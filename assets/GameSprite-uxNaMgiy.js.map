{"version":3,"file":"GameSprite-uxNaMgiy.js","sources":["../../src/components/GameSprite.tsx"],"sourcesContent":["import React, {useEffect, useRef} from 'react';\r\nimport {AnimatedSprite, Sprite} from '@pixi/react';\r\nimport {SpriteManager} from '../core/managers/SpriteManager';\r\nimport * as PIXI from 'pixi.js';\r\n\r\ninterface Props {\r\n    sheetName?: string;\r\n    animationName?: string;\r\n    imageName?: string;\r\n    x: number;\r\n    y: number;\r\n    scale?: number;\r\n    rotation?: number;\r\n    anchor?: number | [number, number];\r\n    isPlaying?: boolean;\r\n    currentFrame?: number;\r\n}\r\n\r\nexport const GameSprite = ({\r\n                               sheetName, animationName, imageName,\r\n                               x, y, scale = 1, rotation = 0, anchor = 0.5,\r\n                               isPlaying = true,\r\n                               currentFrame = 0\r\n                           }: Props) => {\r\n    const manager = SpriteManager.getInstance();\r\n    const spriteRef = useRef<PIXI.AnimatedSprite>(null);\r\n\r\n    const staticTexture = React.useMemo(() => {\r\n        if (!imageName) return null;\r\n        return manager.getTexture(imageName);\r\n    }, [imageName, manager]);\r\n\r\n    const frames = React.useMemo(() => {\r\n        if (imageName) return null;\r\n        const animKey = `${sheetName}_${animationName}`;\r\n        return manager.getAnimation(animKey);\r\n    }, [sheetName, animationName, imageName, manager]);\r\n\r\n    useEffect(() => {\r\n        if (spriteRef.current && frames && frames.length > 0) {\r\n            const frameIndex = Math.floor(currentFrame) % frames.length;\r\n            spriteRef.current.gotoAndStop(frameIndex);\r\n        }\r\n    }, [currentFrame, frames]);\r\n\r\n    if (imageName && staticTexture) {\r\n        return <Sprite texture={staticTexture} x={x} y={y} scale={scale} rotation={rotation} anchor={anchor}/>;\r\n    }\r\n\r\n    if (frames && frames.length > 0) {\r\n        return (\r\n            <AnimatedSprite\r\n                ref={spriteRef}\r\n                textures={frames}\r\n                isPlaying={false}\r\n                x={x}\r\n                y={y}\r\n                scale={scale}\r\n                rotation={rotation}\r\n                anchor={anchor}\r\n            />\r\n        );\r\n    }\r\n\r\n    return null;\r\n};"],"names":["GameSprite","sheetName","animationName","imageName","x","y","scale","rotation","anchor","isPlaying","currentFrame","manager","SpriteManager","spriteRef","useRef","staticTexture","React","frames","animKey","useEffect","frameIndex","jsx","Sprite","AnimatedSprite"],"mappings":"iGAkBO,MAAMA,EAAa,CAAC,CACI,UAAAC,EAAW,cAAAC,EAAe,UAAAC,EAC1B,EAAAC,EAAG,EAAAC,EAAG,MAAAC,EAAQ,EAAG,SAAAC,EAAW,EAAG,OAAAC,EAAS,GACxC,UAAAC,EAAY,GACZ,aAAAC,EAAe,CACnB,IAAa,CACpC,MAAMC,EAAUC,EAAc,YAAA,EACxBC,EAAYC,EAAAA,OAA4B,IAAI,EAE5CC,EAAgBC,EAAM,QAAQ,IAC3Bb,EACEQ,EAAQ,WAAWR,CAAS,EADZ,KAExB,CAACA,EAAWQ,CAAO,CAAC,EAEjBM,EAASD,EAAM,QAAQ,IAAM,CAC/B,GAAIb,EAAW,OAAO,KACtB,MAAMe,EAAU,GAAGjB,CAAS,IAAIC,CAAa,GAC7C,OAAOS,EAAQ,aAAaO,CAAO,CACvC,EAAG,CAACjB,EAAWC,EAAeC,EAAWQ,CAAO,CAAC,EASjD,OAPAQ,EAAAA,UAAU,IAAM,CACZ,GAAIN,EAAU,SAAWI,GAAUA,EAAO,OAAS,EAAG,CAClD,MAAMG,EAAa,KAAK,MAAMV,CAAY,EAAIO,EAAO,OACrDJ,EAAU,QAAQ,YAAYO,CAAU,CAC5C,CACJ,EAAG,CAACV,EAAcO,CAAM,CAAC,EAErBd,GAAaY,EACNM,MAACC,EAAAA,QAAO,QAASP,EAAe,EAAAX,EAAM,EAAAC,EAAM,MAAAC,EAAc,SAAAC,EAAoB,OAAAC,EAAe,EAGpGS,GAAUA,EAAO,OAAS,EAEtBI,EAAAA,IAACE,EAAAA,eAAA,CACG,IAAKV,EACL,SAAUI,EACV,UAAW,GACX,EAAAb,EACA,EAAAC,EACA,MAAAC,EACA,SAAAC,EACA,OAAAC,CAAA,CAAA,EAKL,IACX"}