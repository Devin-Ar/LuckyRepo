{"version":3,"file":"BaseMenuController-CRgEou9J.js","sources":["../../src/core/templates/BaseMenuController.ts"],"sourcesContent":["// src/core/templates/BaseMenuController.ts\r\nimport { InputManager } from \"../managers/InputManager\";\r\nimport { StateManager } from \"../managers/StateManager\";\r\nimport { FeatureEnum } from \"../../features/FeatureEnum\";\r\n\r\nexport abstract class BaseMenuController {\r\n    protected input: InputManager;\r\n    protected stateManager: StateManager;\r\n    protected stateId?: FeatureEnum;\r\n\r\n    constructor() {\r\n        this.input = InputManager.getInstance();\r\n        this.stateManager = StateManager.getInstance();\r\n        this.handleKeyDown = this.handleKeyDown.bind(this);\r\n    }\r\n\r\n    public init(stateId: FeatureEnum): void {\r\n        this.stateId = stateId;\r\n        window.addEventListener('keydown', this.handleKeyDown);\r\n        this.onInitialize();\r\n    }\r\n\r\n    public destroy(): void {\r\n        window.removeEventListener('keydown', this.handleKeyDown);\r\n        this.onDestroy();\r\n    }\r\n\r\n    private handleKeyDown(e: KeyboardEvent): void {\r\n        const activeState = this.stateManager.getActiveState();\r\n        if (activeState?.name !== this.stateId) {\r\n            return;\r\n        }\r\n\r\n        if (this.input.isKeyAction(e.key, 'UI_BACK')) {\r\n            e.preventDefault();\r\n            e.stopImmediatePropagation();\r\n            this.onBack();\r\n            return;\r\n        }\r\n\r\n        this.onKeyDown(e);\r\n    }\r\n\r\n    public abstract onBack(): void;\r\n    protected onInitialize(): void {}\r\n    protected onDestroy(): void {}\r\n    protected onKeyDown(e: KeyboardEvent): void {}\r\n}"],"names":["BaseMenuController","InputManager","StateManager","stateId","e"],"mappings":"+CAKO,MAAeA,CAAmB,CAC3B,MACA,aACA,QAEV,aAAc,CACV,KAAK,MAAQC,EAAa,YAAA,EAC1B,KAAK,aAAeC,EAAa,YAAA,EACjC,KAAK,cAAgB,KAAK,cAAc,KAAK,IAAI,CACrD,CAEO,KAAKC,EAA4B,CACpC,KAAK,QAAUA,EACf,OAAO,iBAAiB,UAAW,KAAK,aAAa,EACrD,KAAK,aAAA,CACT,CAEO,SAAgB,CACnB,OAAO,oBAAoB,UAAW,KAAK,aAAa,EACxD,KAAK,UAAA,CACT,CAEQ,cAAcC,EAAwB,CAE1C,GADoB,KAAK,aAAa,eAAA,GACrB,OAAS,KAAK,QAI/B,IAAI,KAAK,MAAM,YAAYA,EAAE,IAAK,SAAS,EAAG,CAC1CA,EAAE,eAAA,EACFA,EAAE,yBAAA,EACF,KAAK,OAAA,EACL,MACJ,CAEA,KAAK,UAAUA,CAAC,EACpB,CAGU,cAAqB,CAAC,CACtB,WAAkB,CAAC,CACnB,UAAUA,EAAwB,CAAC,CACjD"}