import{B as i}from"./BHLogicSchema-j6k_AvBl.js";import{B as c}from"./BaseViewLogic-fTOOk9Vw.js";const t={HERO_X:0,HERO_Y:1,HERO_ROTATION:2,HERO_SCALE:3,HERO_HP_DISPLAY:4,HERO_FRAME:5,ACTIVE_ROCK_COUNT:8,CURRENT_WAVE:9,TOTAL_WAVES:12,WAVE_STATE:13,WAVE_DELAY_TIMER:14,EXIT_DOOR_ACTIVE:15,EXIT_DOOR_X:16,EXIT_DOOR_Y:17,CURRENT_LEVEL:18,ROCKS_START_INDEX:20,ROCK_STRIDE:6,PPROJ_START_INDEX:200,PPROJ_STRIDE:2,EPROJ_START_INDEX:300,EPROJ_STRIDE:2};class r extends c{heroRotation=0;globalRockRotation=0;heroFrame=0;update(E,A){if(!this.hasBuffers())return;const O=this.logicView[i.HERO_X],u=this.logicView[i.HERO_Y],s=this.logicView[i.HERO_HP];this.heroRotation+=.03*(E/16.67),this.heroFrame+=.15*(E/16.67),this.outputView[t.HERO_X]=O,this.outputView[t.HERO_Y]=u,this.outputView[t.HERO_ROTATION]=this.heroRotation,this.outputView[t.HERO_SCALE]=.5+s/100,this.outputView[t.HERO_HP_DISPLAY]=s,this.outputView[t.HERO_FRAME]=this.heroFrame;const _=this.logicView[i.ENTITY_COUNT];this.outputView[t.ACTIVE_ROCK_COUNT]=_,this.globalRockRotation+=.02*(E/16.67);for(let o=0;o<_;o++){const R=i.ROCKS_START_INDEX+o*i.ROCK_STRIDE,e=t.ROCKS_START_INDEX+o*t.ROCK_STRIDE;this.outputView[e]=this.logicView[R],this.outputView[e+1]=this.logicView[R+1];const V=this.logicView[R+2],w=(Math.floor(V)%5+1)*.5;this.outputView[e+2]=this.globalRockRotation*w+V,this.outputView[e+3]=this.logicView[R+3],this.outputView[e+4]=this.logicView[R+4],this.outputView[e+5]=this.logicView[R+5]}const h=this.logicView[i.PPROJ_START_INDEX-1];this.outputView[t.PPROJ_START_INDEX-1]=h;for(let o=0;o<h;o++){const R=i.PPROJ_START_INDEX+o*i.PPROJ_STRIDE,e=t.PPROJ_START_INDEX+o*t.PPROJ_STRIDE;this.outputView[e]=this.logicView[R],this.outputView[e+1]=this.logicView[R+1]}const T=this.logicView[i.EPROJ_START_INDEX-1];this.outputView[t.EPROJ_START_INDEX-1]=T;for(let o=0;o<T;o++){const R=i.EPROJ_START_INDEX+o*i.EPROJ_STRIDE,e=t.EPROJ_START_INDEX+o*t.EPROJ_STRIDE;this.outputView[e]=this.logicView[R],this.outputView[e+1]=this.logicView[R+1]}this.outputView[t.CURRENT_WAVE]=this.logicView[i.CURRENT_WAVE],this.outputView[t.TOTAL_WAVES]=this.logicView[i.TOTAL_WAVES],this.outputView[t.WAVE_STATE]=this.logicView[i.WAVE_STATE],this.outputView[t.WAVE_DELAY_TIMER]=this.logicView[i.WAVE_DELAY_TIMER],this.outputView[t.EXIT_DOOR_ACTIVE]=this.logicView[i.EXIT_DOOR_ACTIVE],this.outputView[t.EXIT_DOOR_X]=this.logicView[i.EXIT_DOOR_X],this.outputView[t.EXIT_DOOR_Y]=this.logicView[i.EXIT_DOOR_Y],this.outputView[t.CURRENT_LEVEL]=this.logicView[i.CURRENT_LEVEL]}getSnapshot(){return{heroRotation:this.heroRotation,globalRockRotation:this.globalRockRotation,heroFrame:this.heroFrame}}loadSnapshot(E){E&&(this.heroRotation=E.heroRotation??0,this.globalRockRotation=E.globalRockRotation??0,this.heroFrame=E.heroFrame??0)}}export{r as BHViewLogic};
//# sourceMappingURL=BHViewLogic-DSJWzk9V.js.map
