(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var Da=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function nx(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var Gp={exports:{}},Hh={},zp={exports:{}},Qt={};var pv;function x1(){if(pv)return Qt;pv=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),f=Symbol.iterator;function y(U){return U===null||typeof U!="object"?null:(U=f&&U[f]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,R={};function k(U,K,he){this.props=U,this.context=K,this.refs=R,this.updater=he||b}k.prototype.isReactComponent={},k.prototype.setState=function(U,K){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,K,"setState")},k.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function L(){}L.prototype=k.prototype;function V(U,K,he){this.props=U,this.context=K,this.refs=R,this.updater=he||b}var z=V.prototype=new L;z.constructor=V,T(z,k.prototype),z.isPureReactComponent=!0;var J=Array.isArray,X=Object.prototype.hasOwnProperty,fe={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function te(U,K,he){var Ae,Oe={},Fe=null,Ge=null;if(K!=null)for(Ae in K.ref!==void 0&&(Ge=K.ref),K.key!==void 0&&(Fe=""+K.key),K)X.call(K,Ae)&&!N.hasOwnProperty(Ae)&&(Oe[Ae]=K[Ae]);var Ke=arguments.length-2;if(Ke===1)Oe.children=he;else if(1<Ke){for(var st=Array(Ke),Se=0;Se<Ke;Se++)st[Se]=arguments[Se+2];Oe.children=st}if(U&&U.defaultProps)for(Ae in Ke=U.defaultProps,Ke)Oe[Ae]===void 0&&(Oe[Ae]=Ke[Ae]);return{$$typeof:n,type:U,key:Fe,ref:Ge,props:Oe,_owner:fe.current}}function pe(U,K){return{$$typeof:n,type:U.type,key:K,ref:U.ref,props:U.props,_owner:U._owner}}function Me(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function Pe(U){var K={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(he){return K[he]})}var ve=/\/+/g;function _e(U,K){return typeof U=="object"&&U!==null&&U.key!=null?Pe(""+U.key):K.toString(36)}function we(U,K,he,Ae,Oe){var Fe=typeof U;(Fe==="undefined"||Fe==="boolean")&&(U=null);var Ge=!1;if(U===null)Ge=!0;else switch(Fe){case"string":case"number":Ge=!0;break;case"object":switch(U.$$typeof){case n:case e:Ge=!0}}if(Ge)return Ge=U,Oe=Oe(Ge),U=Ae===""?"."+_e(Ge,0):Ae,J(Oe)?(he="",U!=null&&(he=U.replace(ve,"$&/")+"/"),we(Oe,K,he,"",function(Se){return Se})):Oe!=null&&(Me(Oe)&&(Oe=pe(Oe,he+(!Oe.key||Ge&&Ge.key===Oe.key?"":(""+Oe.key).replace(ve,"$&/")+"/")+U)),K.push(Oe)),1;if(Ge=0,Ae=Ae===""?".":Ae+":",J(U))for(var Ke=0;Ke<U.length;Ke++){Fe=U[Ke];var st=Ae+_e(Fe,Ke);Ge+=we(Fe,K,he,st,Oe)}else if(st=y(U),typeof st=="function")for(U=st.call(U),Ke=0;!(Fe=U.next()).done;)Fe=Fe.value,st=Ae+_e(Fe,Ke++),Ge+=we(Fe,K,he,st,Oe);else if(Fe==="object")throw K=String(U),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Ge}function Xe(U,K,he){if(U==null)return U;var Ae=[],Oe=0;return we(U,Ae,"","",function(Fe){return K.call(he,Fe,Oe++)}),Ae}function H(U){if(U._status===-1){var K=U._result;K=K(),K.then(function(he){(U._status===0||U._status===-1)&&(U._status=1,U._result=he)},function(he){(U._status===0||U._status===-1)&&(U._status=2,U._result=he)}),U._status===-1&&(U._status=0,U._result=K)}if(U._status===1)return U._result.default;throw U._result}var W={current:null},D={transition:null},Y={ReactCurrentDispatcher:W,ReactCurrentBatchConfig:D,ReactCurrentOwner:fe};function G(){throw Error("act(...) is not supported in production builds of React.")}return Qt.Children={map:Xe,forEach:function(U,K,he){Xe(U,function(){K.apply(this,arguments)},he)},count:function(U){var K=0;return Xe(U,function(){K++}),K},toArray:function(U){return Xe(U,function(K){return K})||[]},only:function(U){if(!Me(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Qt.Component=k,Qt.Fragment=t,Qt.Profiler=s,Qt.PureComponent=V,Qt.StrictMode=r,Qt.Suspense=m,Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,Qt.act=G,Qt.cloneElement=function(U,K,he){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Ae=T({},U.props),Oe=U.key,Fe=U.ref,Ge=U._owner;if(K!=null){if(K.ref!==void 0&&(Fe=K.ref,Ge=fe.current),K.key!==void 0&&(Oe=""+K.key),U.type&&U.type.defaultProps)var Ke=U.type.defaultProps;for(st in K)X.call(K,st)&&!N.hasOwnProperty(st)&&(Ae[st]=K[st]===void 0&&Ke!==void 0?Ke[st]:K[st])}var st=arguments.length-2;if(st===1)Ae.children=he;else if(1<st){Ke=Array(st);for(var Se=0;Se<st;Se++)Ke[Se]=arguments[Se+2];Ae.children=Ke}return{$$typeof:n,type:U.type,key:Oe,ref:Fe,props:Ae,_owner:Ge}},Qt.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},Qt.createElement=te,Qt.createFactory=function(U){var K=te.bind(null,U);return K.type=U,K},Qt.createRef=function(){return{current:null}},Qt.forwardRef=function(U){return{$$typeof:d,render:U}},Qt.isValidElement=Me,Qt.lazy=function(U){return{$$typeof:w,_payload:{_status:-1,_result:U},_init:H}},Qt.memo=function(U,K){return{$$typeof:v,type:U,compare:K===void 0?null:K}},Qt.startTransition=function(U){var K=D.transition;D.transition={};try{U()}finally{D.transition=K}},Qt.unstable_act=G,Qt.useCallback=function(U,K){return W.current.useCallback(U,K)},Qt.useContext=function(U){return W.current.useContext(U)},Qt.useDebugValue=function(){},Qt.useDeferredValue=function(U){return W.current.useDeferredValue(U)},Qt.useEffect=function(U,K){return W.current.useEffect(U,K)},Qt.useId=function(){return W.current.useId()},Qt.useImperativeHandle=function(U,K,he){return W.current.useImperativeHandle(U,K,he)},Qt.useInsertionEffect=function(U,K){return W.current.useInsertionEffect(U,K)},Qt.useLayoutEffect=function(U,K){return W.current.useLayoutEffect(U,K)},Qt.useMemo=function(U,K){return W.current.useMemo(U,K)},Qt.useReducer=function(U,K,he){return W.current.useReducer(U,K,he)},Qt.useRef=function(U){return W.current.useRef(U)},Qt.useState=function(U){return W.current.useState(U)},Qt.useSyncExternalStore=function(U,K,he){return W.current.useSyncExternalStore(U,K,he)},Qt.useTransition=function(){return W.current.useTransition()},Qt.version="18.3.1",Qt}var mv;function vy(){return mv||(mv=1,zp.exports=x1()),zp.exports}var gv;function w1(){if(gv)return Hh;gv=1;var n=vy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(d,m,v){var w,f={},y=null,b=null;v!==void 0&&(y=""+v),m.key!==void 0&&(y=""+m.key),m.ref!==void 0&&(b=m.ref);for(w in m)r.call(m,w)&&!a.hasOwnProperty(w)&&(f[w]=m[w]);if(d&&d.defaultProps)for(w in m=d.defaultProps,m)f[w]===void 0&&(f[w]=m[w]);return{$$typeof:e,type:d,key:y,ref:b,props:f,_owner:s.current}}return Hh.Fragment=t,Hh.jsx=c,Hh.jsxs=c,Hh}var yv;function b1(){return yv||(yv=1,Gp.exports=w1()),Gp.exports}var Q=b1(),it=vy();const Jr=uh(it);var Vd={},Hp={exports:{}},ms={},Vp={exports:{}},Wp={};var vv;function S1(){return vv||(vv=1,(function(n){function e(D,Y){var G=D.length;D.push(Y);e:for(;0<G;){var U=G-1>>>1,K=D[U];if(0<s(K,Y))D[U]=Y,D[G]=K,G=U;else break e}}function t(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var Y=D[0],G=D.pop();if(G!==Y){D[0]=G;e:for(var U=0,K=D.length,he=K>>>1;U<he;){var Ae=2*(U+1)-1,Oe=D[Ae],Fe=Ae+1,Ge=D[Fe];if(0>s(Oe,G))Fe<K&&0>s(Ge,Oe)?(D[U]=Ge,D[Fe]=G,U=Fe):(D[U]=Oe,D[Ae]=G,U=Ae);else if(Fe<K&&0>s(Ge,G))D[U]=Ge,D[Fe]=G,U=Fe;else break e}}return Y}function s(D,Y){var G=D.sortIndex-Y.sortIndex;return G!==0?G:D.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],v=[],w=1,f=null,y=3,b=!1,T=!1,R=!1,k=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(D){for(var Y=t(v);Y!==null;){if(Y.callback===null)r(v);else if(Y.startTime<=D)r(v),Y.sortIndex=Y.expirationTime,e(m,Y);else break;Y=t(v)}}function J(D){if(R=!1,z(D),!T)if(t(m)!==null)T=!0,H(X);else{var Y=t(v);Y!==null&&W(J,Y.startTime-D)}}function X(D,Y){T=!1,R&&(R=!1,L(te),te=-1),b=!0;var G=y;try{for(z(Y),f=t(m);f!==null&&(!(f.expirationTime>Y)||D&&!Pe());){var U=f.callback;if(typeof U=="function"){f.callback=null,y=f.priorityLevel;var K=U(f.expirationTime<=Y);Y=n.unstable_now(),typeof K=="function"?f.callback=K:f===t(m)&&r(m),z(Y)}else r(m);f=t(m)}if(f!==null)var he=!0;else{var Ae=t(v);Ae!==null&&W(J,Ae.startTime-Y),he=!1}return he}finally{f=null,y=G,b=!1}}var fe=!1,N=null,te=-1,pe=5,Me=-1;function Pe(){return!(n.unstable_now()-Me<pe)}function ve(){if(N!==null){var D=n.unstable_now();Me=D;var Y=!0;try{Y=N(!0,D)}finally{Y?_e():(fe=!1,N=null)}}else fe=!1}var _e;if(typeof V=="function")_e=function(){V(ve)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Xe=we.port2;we.port1.onmessage=ve,_e=function(){Xe.postMessage(null)}}else _e=function(){k(ve,0)};function H(D){N=D,fe||(fe=!0,_e())}function W(D,Y){te=k(function(){D(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){T||b||(T=!0,H(X))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pe=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(D){switch(y){case 1:case 2:case 3:var Y=3;break;default:Y=y}var G=y;y=Y;try{return D()}finally{y=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,Y){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var G=y;y=D;try{return Y()}finally{y=G}},n.unstable_scheduleCallback=function(D,Y,G){var U=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?U+G:U):G=U,D){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=G+K,D={id:w++,callback:Y,priorityLevel:D,startTime:G,expirationTime:K,sortIndex:-1},G>U?(D.sortIndex=G,e(v,D),t(m)===null&&D===t(v)&&(R?(L(te),te=-1):R=!0,W(J,G-U))):(D.sortIndex=K,e(m,D),T||b||(T=!0,H(X))),D},n.unstable_shouldYield=Pe,n.unstable_wrapCallback=function(D){var Y=y;return function(){var G=y;y=Y;try{return D.apply(this,arguments)}finally{y=G}}}})(Wp)),Wp}var _v;function E1(){return _v||(_v=1,Vp.exports=S1()),Vp.exports}var xv;function T1(){if(xv)return ms;xv=1;var n=vy(),e=E1();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,h=1;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){c(i,o),c(i+"Capture",o)}function c(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},f={};function y(i){return m.call(f,i)?!0:m.call(w,i)?!1:v.test(i)?f[i]=!0:(w[i]=!0,!1)}function b(i,o,h,g){if(h!==null&&h.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function T(i,o,h,g){if(o===null||typeof o>"u"||b(i,o,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function R(i,o,h,g,S,I,B){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=g,this.attributeNamespace=S,this.mustUseProperty=h,this.propertyName=i,this.type=o,this.sanitizeURL=I,this.removeEmptyString=B}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){k[i]=new R(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];k[o]=new R(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){k[i]=new R(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){k[i]=new R(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){k[i]=new R(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){k[i]=new R(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){k[i]=new R(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){k[i]=new R(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){k[i]=new R(i,5,!1,i.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function V(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(L,V);k[o]=new R(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(L,V);k[o]=new R(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(L,V);k[o]=new R(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){k[i]=new R(i,1,!1,i.toLowerCase(),null,!1,!1)}),k.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){k[i]=new R(i,1,!1,i.toLowerCase(),null,!0,!0)});function z(i,o,h,g){var S=k.hasOwnProperty(o)?k[o]:null;(S!==null?S.type!==0:g||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(T(o,h,S,g)&&(h=null),g||S===null?y(o)&&(h===null?i.removeAttribute(o):i.setAttribute(o,""+h)):S.mustUseProperty?i[S.propertyName]=h===null?S.type===3?!1:"":h:(o=S.attributeName,g=S.attributeNamespace,h===null?i.removeAttribute(o):(S=S.type,h=S===3||S===4&&h===!0?"":""+h,g?i.setAttributeNS(g,o,h):i.setAttribute(o,h))))}var J=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),fe=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),pe=Symbol.for("react.profiler"),Me=Symbol.for("react.provider"),Pe=Symbol.for("react.context"),ve=Symbol.for("react.forward_ref"),_e=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),Xe=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),W=Symbol.for("react.offscreen"),D=Symbol.iterator;function Y(i){return i===null||typeof i!="object"?null:(i=D&&i[D]||i["@@iterator"],typeof i=="function"?i:null)}var G=Object.assign,U;function K(i){if(U===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);U=o&&o[1]||""}return`
`+U+i}var he=!1;function Ae(i,o){if(!i||he)return"";he=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Re){var g=Re}Reflect.construct(i,[],o)}else{try{o.call()}catch(Re){g=Re}i.call(o.prototype)}else{try{throw Error()}catch(Re){g=Re}i()}}catch(Re){if(Re&&g&&typeof Re.stack=="string"){for(var S=Re.stack.split(`
`),I=g.stack.split(`
`),B=S.length-1,Z=I.length-1;1<=B&&0<=Z&&S[B]!==I[Z];)Z--;for(;1<=B&&0<=Z;B--,Z--)if(S[B]!==I[Z]){if(B!==1||Z!==1)do if(B--,Z--,0>Z||S[B]!==I[Z]){var ae=`
`+S[B].replace(" at new "," at ");return i.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",i.displayName)),ae}while(1<=B&&0<=Z);break}}}finally{he=!1,Error.prepareStackTrace=h}return(i=i?i.displayName||i.name:"")?K(i):""}function Oe(i){switch(i.tag){case 5:return K(i.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return i=Ae(i.type,!1),i;case 11:return i=Ae(i.type.render,!1),i;case 1:return i=Ae(i.type,!0),i;default:return""}}function Fe(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case fe:return"Portal";case pe:return"Profiler";case te:return"StrictMode";case _e:return"Suspense";case we:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Pe:return(i.displayName||"Context")+".Consumer";case Me:return(i._context.displayName||"Context")+".Provider";case ve:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Xe:return o=i.displayName||null,o!==null?o:Fe(i.type)||"Memo";case H:o=i._payload,i=i._init;try{return Fe(i(o))}catch{}}return null}function Ge(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fe(o);case 8:return o===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ke(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function st(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Se(i){var o=st(i)?"checked":"value",h=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),g=""+i[o];if(!i.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var S=h.get,I=h.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return S.call(this)},set:function(B){g=""+B,I.call(this,B)}}),Object.defineProperty(i,o,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(B){g=""+B},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function at(i){i._valueTracker||(i._valueTracker=Se(i))}function Qe(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var h=o.getValue(),g="";return i&&(g=st(i)?i.checked?"true":"false":i.value),i=g,i!==h?(o.setValue(i),!0):!1}function yt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Bt(i,o){var h=o.checked;return G({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??i._wrapperState.initialChecked})}function ft(i,o){var h=o.defaultValue==null?"":o.defaultValue,g=o.checked!=null?o.checked:o.defaultChecked;h=Ke(o.value!=null?o.value:h),i._wrapperState={initialChecked:g,initialValue:h,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function _t(i,o){o=o.checked,o!=null&&z(i,"checked",o,!1)}function gr(i,o){_t(i,o);var h=Ke(o.value),g=o.type;if(h!=null)g==="number"?(h===0&&i.value===""||i.value!=h)&&(i.value=""+h):i.value!==""+h&&(i.value=""+h);else if(g==="submit"||g==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Fi(i,o.type,h):o.hasOwnProperty("defaultValue")&&Fi(i,o.type,Ke(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Cr(i,o,h){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var g=o.type;if(!(g!=="submit"&&g!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,h||o===i.value||(i.value=o),i.defaultValue=o}h=i.name,h!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,h!==""&&(i.name=h)}function Fi(i,o,h){(o!=="number"||yt(i.ownerDocument)!==i)&&(h==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+h&&(i.defaultValue=""+h))}var Nr=Array.isArray;function dr(i,o,h,g){if(i=i.options,o){o={};for(var S=0;S<h.length;S++)o["$"+h[S]]=!0;for(h=0;h<i.length;h++)S=o.hasOwnProperty("$"+i[h].value),i[h].selected!==S&&(i[h].selected=S),S&&g&&(i[h].defaultSelected=!0)}else{for(h=""+Ke(h),o=null,S=0;S<i.length;S++){if(i[S].value===h){i[S].selected=!0,g&&(i[S].defaultSelected=!0);return}o!==null||i[S].disabled||(o=i[S])}o!==null&&(o.selected=!0)}}function vi(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return G({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Hn(i,o){var h=o.value;if(h==null){if(h=o.children,o=o.defaultValue,h!=null){if(o!=null)throw Error(t(92));if(Nr(h)){if(1<h.length)throw Error(t(93));h=h[0]}o=h}o==null&&(o=""),h=o}i._wrapperState={initialValue:Ke(h)}}function Pn(i,o){var h=Ke(o.value),g=Ke(o.defaultValue);h!=null&&(h=""+h,h!==i.value&&(i.value=h),o.defaultValue==null&&i.defaultValue!==h&&(i.defaultValue=h)),g!=null&&(i.defaultValue=""+g)}function Fs(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function gn(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jn(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?gn(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Bs,ei=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,h,g,S){MSApp.execUnsafeLocalFunction(function(){return i(o,h,g,S)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Bs=Bs||document.createElement("div"),Bs.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Bs.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function _i(i,o){if(o){var h=i.firstChild;if(h&&h===i.lastChild&&h.nodeType===3){h.nodeValue=o;return}}i.textContent=o}var xi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xs=["Webkit","ms","Moz","O"];Object.keys(xi).forEach(function(i){xs.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),xi[o]=xi[i]})});function mo(i,o,h){return o==null||typeof o=="boolean"||o===""?"":h||typeof o!="number"||o===0||xi.hasOwnProperty(i)&&xi[i]?(""+o).trim():o+"px"}function Us(i,o){i=i.style;for(var h in o)if(o.hasOwnProperty(h)){var g=h.indexOf("--")===0,S=mo(h,o[h],g);h==="float"&&(h="cssFloat"),g?i.setProperty(h,S):i[h]=S}}var Vn=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ie(i,o){if(o){if(Vn[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Ie(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nt=null;function Zt(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ze=null,kt=null,yn=null;function ti(i){if(i=Gl(i)){if(typeof ze!="function")throw Error(t(280));var o=i.stateNode;o&&(o=zl(o),ze(i.stateNode,i.type,o))}}function $r(i){kt?yn?yn.push(i):yn=[i]:kt=i}function Rn(){if(kt){var i=kt,o=yn;if(yn=kt=null,ti(i),o)for(i=0;i<o.length;i++)ti(o[i])}}function Yo(i,o){return i(o)}function wi(){}var Mr=!1;function bi(i,o,h){if(Mr)return i(o,h);Mr=!0;try{return Yo(i,o,h)}finally{Mr=!1,(kt!==null||yn!==null)&&(wi(),Rn())}}function Bi(i,o){var h=i.stateNode;if(h===null)return null;var g=zl(h);if(g===null)return null;h=g[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(i=i.type,g=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!g;break e;default:i=!1}if(i)return null;if(h&&typeof h!="function")throw Error(t(231,o,typeof h));return h}var ws=!1;if(d)try{var Xt={};Object.defineProperty(Xt,"passive",{get:function(){ws=!0}}),window.addEventListener("test",Xt,Xt),window.removeEventListener("test",Xt,Xt)}catch{ws=!1}function Sr(i,o,h,g,S,I,B,Z,ae){var Re=Array.prototype.slice.call(arguments,3);try{o.apply(h,Re)}catch(We){this.onError(We)}}var ri=!1,Si=null,Ei=!1,ni=null,Al={onError:function(i){ri=!0,Si=i}};function ii(i,o,h,g,S,I,B,Z,ae){ri=!1,Si=null,Sr.apply(Al,arguments)}function bs(i,o,h,g,S,I,B,Z,ae){if(ii.apply(this,arguments),ri){if(ri){var Re=Si;ri=!1,Si=null}else throw Error(t(198));Ei||(Ei=!0,ni=Re)}}function qr(i){var o=i,h=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(h=o.return),i=o.return;while(i)}return o.tag===3?h:null}function js(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Cl(i){if(qr(i)!==i)throw Error(t(188))}function si(i){var o=i.alternate;if(!o){if(o=qr(i),o===null)throw Error(t(188));return o!==i?null:i}for(var h=i,g=o;;){var S=h.return;if(S===null)break;var I=S.alternate;if(I===null){if(g=S.return,g!==null){h=g;continue}break}if(S.child===I.child){for(I=S.child;I;){if(I===h)return Cl(S),i;if(I===g)return Cl(S),o;I=I.sibling}throw Error(t(188))}if(h.return!==g.return)h=S,g=I;else{for(var B=!1,Z=S.child;Z;){if(Z===h){B=!0,h=S,g=I;break}if(Z===g){B=!0,g=S,h=I;break}Z=Z.sibling}if(!B){for(Z=I.child;Z;){if(Z===h){B=!0,h=I,g=S;break}if(Z===g){B=!0,g=I,h=S;break}Z=Z.sibling}if(!B)throw Error(t(189))}}if(h.alternate!==g)throw Error(t(190))}if(h.tag!==3)throw Error(t(188));return h.stateNode.current===h?i:o}function Ui(i){return i=si(i),i!==null?Wn(i):null}function Wn(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Wn(i);if(o!==null)return o;i=i.sibling}return null}var Ha=e.unstable_scheduleCallback,go=e.unstable_cancelCallback,Or=e.unstable_shouldYield,yo=e.unstable_requestPaint,nr=e.unstable_now,Qo=e.unstable_getCurrentPriorityLevel,ji=e.unstable_ImmediatePriority,vo=e.unstable_UserBlockingPriority,Zo=e.unstable_NormalPriority,Va=e.unstable_LowPriority,$n=e.unstable_IdlePriority,oi=null,Wt=null;function fr(i){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(oi,i,void 0,(i.current.flags&128)===128)}catch{}}var Rt=Math.clz32?Math.clz32:Gi,rn=Math.log,bn=Math.LN2;function Gi(i){return i>>>=0,i===0?32:31-(rn(i)/bn|0)|0}var qn=64,nn=4194304;function Gs(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Jo(i,o){var h=i.pendingLanes;if(h===0)return 0;var g=0,S=i.suspendedLanes,I=i.pingedLanes,B=h&268435455;if(B!==0){var Z=B&~S;Z!==0?g=Gs(Z):(I&=B,I!==0&&(g=Gs(I)))}else B=h&~S,B!==0?g=Gs(B):I!==0&&(g=Gs(I));if(g===0)return 0;if(o!==0&&o!==g&&(o&S)===0&&(S=g&-g,I=o&-o,S>=I||S===16&&(I&4194240)!==0))return o;if((g&4)!==0&&(g|=h&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=g;0<o;)h=31-Rt(o),S=1<<h,g|=i[h],o&=~S;return g}function pr(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zs(i,o){for(var h=i.suspendedLanes,g=i.pingedLanes,S=i.expirationTimes,I=i.pendingLanes;0<I;){var B=31-Rt(I),Z=1<<B,ae=S[B];ae===-1?((Z&h)===0||(Z&g)!==0)&&(S[B]=pr(Z,o)):ae<=o&&(i.expiredLanes|=Z),I&=~Z}}function Hs(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function sn(){var i=qn;return qn<<=1,(qn&4194240)===0&&(qn=64),i}function Wa(i){for(var o=[],h=0;31>h;h++)o.push(i);return o}function _o(i,o,h){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Rt(o),i[o]=h}function ea(i,o){var h=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var g=i.eventTimes;for(i=i.expirationTimes;0<h;){var S=31-Rt(h),I=1<<S;o[S]=0,g[S]=-1,i[S]=-1,h&=~I}}function ta(i,o){var h=i.entangledLanes|=o;for(i=i.entanglements;h;){var g=31-Rt(h),S=1<<g;S&o|i[g]&o&&(i[g]|=o),h&=~S}}var $t=0;function ra(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var gc,qt,Il,Pl,na,on=!1,Ut=[],ai=null,an=null,zi=null,ia=new Map,Ir=new Map,Kt=[],xo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sa(i,o){switch(i){case"focusin":case"focusout":ai=null;break;case"dragenter":case"dragleave":an=null;break;case"mouseover":case"mouseout":zi=null;break;case"pointerover":case"pointerout":ia.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ir.delete(o.pointerId)}}function Vs(i,o,h,g,S,I){return i===null||i.nativeEvent!==I?(i={blockedOn:o,domEventName:h,eventSystemFlags:g,nativeEvent:I,targetContainers:[S]},o!==null&&(o=Gl(o),o!==null&&qt(o)),i):(i.eventSystemFlags|=g,o=i.targetContainers,S!==null&&o.indexOf(S)===-1&&o.push(S),i)}function Ws(i,o,h,g,S){switch(o){case"focusin":return ai=Vs(ai,i,o,h,g,S),!0;case"dragenter":return an=Vs(an,i,o,h,g,S),!0;case"mouseover":return zi=Vs(zi,i,o,h,g,S),!0;case"pointerover":var I=S.pointerId;return ia.set(I,Vs(ia.get(I)||null,i,o,h,g,S)),!0;case"gotpointercapture":return I=S.pointerId,Ir.set(I,Vs(Ir.get(I)||null,i,o,h,g,S)),!0}return!1}function $a(i){var o=va(i.target);if(o!==null){var h=qr(o);if(h!==null){if(o=h.tag,o===13){if(o=js(h),o!==null){i.blockedOn=o,na(i.priority,function(){Il(h)});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){i.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Pr(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var h=ln(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(h===null){h=i.nativeEvent;var g=new h.constructor(h.type,h);Nt=g,h.target.dispatchEvent(g),Nt=null}else return o=Gl(h),o!==null&&qt(o),i.blockedOn=h,!1;o.shift()}return!0}function kn(i,o,h){Pr(i)&&h.delete(o)}function Hi(){on=!1,ai!==null&&Pr(ai)&&(ai=null),an!==null&&Pr(an)&&(an=null),zi!==null&&Pr(zi)&&(zi=null),ia.forEach(kn),Ir.forEach(kn)}function Vi(i,o){i.blockedOn===o&&(i.blockedOn=null,on||(on=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Hi)))}function Ti(i){function o(S){return Vi(S,i)}if(0<Ut.length){Vi(Ut[0],i);for(var h=1;h<Ut.length;h++){var g=Ut[h];g.blockedOn===i&&(g.blockedOn=null)}}for(ai!==null&&Vi(ai,i),an!==null&&Vi(an,i),zi!==null&&Vi(zi,i),ia.forEach(o),Ir.forEach(o),h=0;h<Kt.length;h++)g=Kt[h],g.blockedOn===i&&(g.blockedOn=null);for(;0<Kt.length&&(h=Kt[0],h.blockedOn===null);)$a(h),h.blockedOn===null&&Kt.shift()}var Ss=J.ReactCurrentBatchConfig,Mn=!0;function oa(i,o,h,g){var S=$t,I=Ss.transition;Ss.transition=null;try{$t=1,aa(i,o,h,g)}finally{$t=S,Ss.transition=I}}function Wi(i,o,h,g){var S=$t,I=Ss.transition;Ss.transition=null;try{$t=4,aa(i,o,h,g)}finally{$t=S,Ss.transition=I}}function aa(i,o,h,g){if(Mn){var S=ln(i,o,h,g);if(S===null)bc(i,o,g,wo,h),sa(i,g);else if(Ws(S,i,o,h,g))g.stopPropagation();else if(sa(i,g),o&4&&-1<xo.indexOf(i)){for(;S!==null;){var I=Gl(S);if(I!==null&&gc(I),I=ln(i,o,h,g),I===null&&bc(i,o,g,wo,h),I===S)break;S=I}S!==null&&g.stopPropagation()}else bc(i,o,g,null,h)}}var wo=null;function ln(i,o,h,g){if(wo=null,i=Zt(g),i=va(i),i!==null)if(o=qr(i),o===null)i=null;else if(h=o.tag,h===13){if(i=js(o),i!==null)return i;i=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return wo=i,null}function vn(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qo()){case ji:return 1;case vo:return 4;case Zo:case Va:return 16;case $n:return 536870912;default:return 16}default:return 16}}var _n=null,li=null,ui=null;function $s(){if(ui)return ui;var i,o=li,h=o.length,g,S="value"in _n?_n.value:_n.textContent,I=S.length;for(i=0;i<h&&o[i]===S[i];i++);var B=h-i;for(g=1;g<=B&&o[h-g]===S[I-g];g++);return ui=S.slice(i,1<g?1-g:void 0)}function bo(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function qs(){return!0}function qa(){return!1}function ur(i){function o(h,g,S,I,B){this._reactName=h,this._targetInst=S,this.type=g,this.nativeEvent=I,this.target=B,this.currentTarget=null;for(var Z in i)i.hasOwnProperty(Z)&&(h=i[Z],this[Z]=h?h(I):I[Z]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?qs:qa,this.isPropagationStopped=qa,this}return G(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=qs)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=qs)},persist:function(){},isPersistent:qs}),o}var Fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ir=ur(Fr),$i=G({},Fr,{view:0,detail:0}),Ai=ur($i),Es,la,Ts,Xs=G({},$i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fa,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ts&&(Ts&&i.type==="mousemove"?(Es=i.screenX-Ts.screenX,la=i.screenY-Ts.screenY):la=Es=0,Ts=i),Es)},movementY:function(i){return"movementY"in i?i.movementY:la}}),Xa=ur(Xs),zr=G({},Xs,{dataTransfer:0}),ua=ur(zr),qi=G({},$i,{relatedTarget:0}),ca=ur(qi),Rl=G({},Fr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ka=ur(Rl),yc=G({},Fr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),On=ur(yc),ha=G({},Fr,{data:0}),Ci=ur(ha),Ks={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ya={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},da={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kl(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=da[i])?!!o[i]:!1}function fa(){return kl}var wu=G({},$i,{key:function(i){if(i.key){var o=Ks[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=bo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ya[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fa,charCode:function(i){return i.type==="keypress"?bo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?bo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ys=ur(wu),Sn=G({},Xs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qs=ur(Sn),Qa=G({},$i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fa}),Ml=ur(Qa),Xi=G({},Fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),As=ur(Xi),bu=G({},Xs,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Su=ur(bu),Ki=[9,13,27,32],Yi=d&&"CompositionEvent"in window,Cs=null;d&&"documentMode"in document&&(Cs=document.documentMode);var Ol=d&&"TextEvent"in window&&!Cs,pa=d&&(!Yi||Cs&&8<Cs&&11>=Cs),Dl=" ",Eu=!1;function Ll(i,o){switch(i){case"keyup":return Ki.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Za(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Qi=!1;function Zi(i,o){switch(i){case"compositionend":return Za(o);case"keypress":return o.which!==32?null:(Eu=!0,Dl);case"textInput":return i=o.data,i===Dl&&Eu?null:i;default:return null}}function Rr(i,o){if(Qi)return i==="compositionend"||!Yi&&Ll(i,o)?(i=$s(),ui=li=_n=null,Qi=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return pa&&o.locale!=="ko"?null:o.data;default:return null}}var ma={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ii(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!ma[i.type]:o==="textarea"}function Ja(i,o,h,g){$r(g),o=Cu(o,"onChange"),0<o.length&&(h=new ir("onChange","change",null,h,g),i.push({event:h,listeners:o}))}var Zs=null,So=null;function ci(i){_c(i,0)}function Eo(i){var o=tl(i);if(Qe(o))return i}function Ji(i,o){if(i==="change")return o}var Br=!1;if(d){var Js;if(d){var p="oninput"in document;if(!p){var x=document.createElement("div");x.setAttribute("oninput","return;"),p=typeof x.oninput=="function"}Js=p}else Js=!1;Br=Js&&(!document.documentMode||9<document.documentMode)}function A(){Zs&&(Zs.detachEvent("onpropertychange",P),So=Zs=null)}function P(i){if(i.propertyName==="value"&&Eo(So)){var o=[];Ja(o,So,i,Zt(i)),bi(ci,o)}}function M(i,o,h){i==="focusin"?(A(),Zs=o,So=h,Zs.attachEvent("onpropertychange",P)):i==="focusout"&&A()}function F(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Eo(So)}function j(i,o){if(i==="click")return Eo(o)}function q(i,o){if(i==="input"||i==="change")return Eo(o)}function le(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var me=typeof Object.is=="function"?Object.is:le;function oe(i,o){if(me(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var h=Object.keys(i),g=Object.keys(o);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var S=h[g];if(!m.call(o,S)||!me(i[S],o[S]))return!1}return!0}function se(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ue(i,o){var h=se(i);i=0;for(var g;h;){if(h.nodeType===3){if(g=i+h.textContent.length,i<=o&&g>=o)return{node:h,offset:o-i};i=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=se(h)}}function ne(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?ne(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function re(){for(var i=window,o=yt();o instanceof i.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)i=o.contentWindow;else break;o=yt(i.document)}return o}function ee(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function xe(i){var o=re(),h=i.focusedElem,g=i.selectionRange;if(o!==h&&h&&h.ownerDocument&&ne(h.ownerDocument.documentElement,h)){if(g!==null&&ee(h)){if(o=g.start,i=g.end,i===void 0&&(i=o),"selectionStart"in h)h.selectionStart=o,h.selectionEnd=Math.min(i,h.value.length);else if(i=(o=h.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var S=h.textContent.length,I=Math.min(g.start,S);g=g.end===void 0?I:Math.min(g.end,S),!i.extend&&I>g&&(S=g,g=I,I=S),S=ue(h,I);var B=ue(h,g);S&&B&&(i.rangeCount!==1||i.anchorNode!==S.node||i.anchorOffset!==S.offset||i.focusNode!==B.node||i.focusOffset!==B.offset)&&(o=o.createRange(),o.setStart(S.node,S.offset),i.removeAllRanges(),I>g?(i.addRange(o),i.extend(B.node,B.offset)):(o.setEnd(B.node,B.offset),i.addRange(o)))}}for(o=[],i=h;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<o.length;h++)i=o[h],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Ee=d&&"documentMode"in document&&11>=document.documentMode,ge=null,De=null,Ne=null,Je=!1;function rt(i,o,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Je||ge==null||ge!==yt(g)||(g=ge,"selectionStart"in g&&ee(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Ne&&oe(Ne,g)||(Ne=g,g=Cu(De,"onSelect"),0<g.length&&(o=new ir("onSelect","select",null,o,h),i.push({event:o,listeners:g}),o.target=ge)))}function He(i,o){var h={};return h[i.toLowerCase()]=o.toLowerCase(),h["Webkit"+i]="webkit"+o,h["Moz"+i]="moz"+o,h}var ot={animationend:He("Animation","AnimationEnd"),animationiteration:He("Animation","AnimationIteration"),animationstart:He("Animation","AnimationStart"),transitionend:He("Transition","TransitionEnd")},et={},qe={};d&&(qe=document.createElement("div").style,"AnimationEvent"in window||(delete ot.animationend.animation,delete ot.animationiteration.animation,delete ot.animationstart.animation),"TransitionEvent"in window||delete ot.transitionend.transition);function ct(i){if(et[i])return et[i];if(!ot[i])return i;var o=ot[i],h;for(h in o)if(o.hasOwnProperty(h)&&h in qe)return et[i]=o[h];return i}var Vt=ct("animationend"),Yt=ct("animationiteration"),Ct=ct("animationstart"),Ft=ct("transitionend"),yr=new Map,Dn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rr(i,o){yr.set(i,o),a(o,[i])}for(var es=0;es<Dn.length;es++){var ga=Dn[es],Tu=ga.toLowerCase(),md=ga[0].toUpperCase()+ga.slice(1);rr(Tu,"on"+md)}rr(Vt,"onAnimationEnd"),rr(Yt,"onAnimationIteration"),rr(Ct,"onAnimationStart"),rr("dblclick","onDoubleClick"),rr("focusin","onFocus"),rr("focusout","onBlur"),rr(Ft,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vc=new Set("cancel close invalid load scroll toggle".split(" ").concat(ya));function fh(i,o,h){var g=i.type||"unknown-event";i.currentTarget=h,bs(g,o,void 0,i),i.currentTarget=null}function _c(i,o){o=(o&4)!==0;for(var h=0;h<i.length;h++){var g=i[h],S=g.event;g=g.listeners;e:{var I=void 0;if(o)for(var B=g.length-1;0<=B;B--){var Z=g[B],ae=Z.instance,Re=Z.currentTarget;if(Z=Z.listener,ae!==I&&S.isPropagationStopped())break e;fh(S,Z,Re),I=ae}else for(B=0;B<g.length;B++){if(Z=g[B],ae=Z.instance,Re=Z.currentTarget,Z=Z.listener,ae!==I&&S.isPropagationStopped())break e;fh(S,Z,Re),I=ae}}}if(Ei)throw i=ni,Ei=!1,ni=null,i}function xr(i,o){var h=o[Ln];h===void 0&&(h=o[Ln]=new Set);var g=i+"__bubble";h.has(g)||(wc(o,i,2,!1),h.add(g))}function xc(i,o,h){var g=0;o&&(g|=4),wc(h,i,g,o)}var Au="_reactListening"+Math.random().toString(36).slice(2);function Nl(i){if(!i[Au]){i[Au]=!0,r.forEach(function(h){h!=="selectionchange"&&(vc.has(h)||xc(h,!1,i),xc(h,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Au]||(o[Au]=!0,xc("selectionchange",!1,o))}}function wc(i,o,h,g){switch(vn(o)){case 1:var S=oa;break;case 4:S=Wi;break;default:S=aa}h=S.bind(null,o,h,i),S=void 0,!ws||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(S=!0),g?S!==void 0?i.addEventListener(o,h,{capture:!0,passive:S}):i.addEventListener(o,h,!0):S!==void 0?i.addEventListener(o,h,{passive:S}):i.addEventListener(o,h,!1)}function bc(i,o,h,g,S){var I=g;if((o&1)===0&&(o&2)===0&&g!==null)e:for(;;){if(g===null)return;var B=g.tag;if(B===3||B===4){var Z=g.stateNode.containerInfo;if(Z===S||Z.nodeType===8&&Z.parentNode===S)break;if(B===4)for(B=g.return;B!==null;){var ae=B.tag;if((ae===3||ae===4)&&(ae=B.stateNode.containerInfo,ae===S||ae.nodeType===8&&ae.parentNode===S))return;B=B.return}for(;Z!==null;){if(B=va(Z),B===null)return;if(ae=B.tag,ae===5||ae===6){g=I=B;continue e}Z=Z.parentNode}}g=g.return}bi(function(){var Re=I,We=Zt(h),Ye=[];e:{var Ve=yr.get(i);if(Ve!==void 0){var pt=ir,wt=i;switch(i){case"keypress":if(bo(h)===0)break e;case"keydown":case"keyup":pt=Ys;break;case"focusin":wt="focus",pt=ca;break;case"focusout":wt="blur",pt=ca;break;case"beforeblur":case"afterblur":pt=ca;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pt=Xa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pt=ua;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pt=Ml;break;case Vt:case Yt:case Ct:pt=Ka;break;case Ft:pt=As;break;case"scroll":pt=Ai;break;case"wheel":pt=Su;break;case"copy":case"cut":case"paste":pt=On;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pt=Qs}var St=(o&4)!==0,dn=!St&&i==="scroll",be=St?Ve!==null?Ve+"Capture":null:Ve;St=[];for(var de=Re,Ce;de!==null;){Ce=de;var nt=Ce.stateNode;if(Ce.tag===5&&nt!==null&&(Ce=nt,be!==null&&(nt=Bi(de,be),nt!=null&&St.push(Fl(de,nt,Ce)))),dn)break;de=de.return}0<St.length&&(Ve=new pt(Ve,wt,null,h,We),Ye.push({event:Ve,listeners:St}))}}if((o&7)===0){e:{if(Ve=i==="mouseover"||i==="pointerover",pt=i==="mouseout"||i==="pointerout",Ve&&h!==Nt&&(wt=h.relatedTarget||h.fromElement)&&(va(wt)||wt[Ur]))break e;if((pt||Ve)&&(Ve=We.window===We?We:(Ve=We.ownerDocument)?Ve.defaultView||Ve.parentWindow:window,pt?(wt=h.relatedTarget||h.toElement,pt=Re,wt=wt?va(wt):null,wt!==null&&(dn=qr(wt),wt!==dn||wt.tag!==5&&wt.tag!==6)&&(wt=null)):(pt=null,wt=Re),pt!==wt)){if(St=Xa,nt="onMouseLeave",be="onMouseEnter",de="mouse",(i==="pointerout"||i==="pointerover")&&(St=Qs,nt="onPointerLeave",be="onPointerEnter",de="pointer"),dn=pt==null?Ve:tl(pt),Ce=wt==null?Ve:tl(wt),Ve=new St(nt,de+"leave",pt,h,We),Ve.target=dn,Ve.relatedTarget=Ce,nt=null,va(We)===Re&&(St=new St(be,de+"enter",wt,h,We),St.target=Ce,St.relatedTarget=dn,nt=St),dn=nt,pt&&wt)t:{for(St=pt,be=wt,de=0,Ce=St;Ce;Ce=Bl(Ce))de++;for(Ce=0,nt=be;nt;nt=Bl(nt))Ce++;for(;0<de-Ce;)St=Bl(St),de--;for(;0<Ce-de;)be=Bl(be),Ce--;for(;de--;){if(St===be||be!==null&&St===be.alternate)break t;St=Bl(St),be=Bl(be)}St=null}else St=null;pt!==null&&ph(Ye,Ve,pt,St,!1),wt!==null&&dn!==null&&ph(Ye,dn,wt,St,!0)}}e:{if(Ve=Re?tl(Re):window,pt=Ve.nodeName&&Ve.nodeName.toLowerCase(),pt==="select"||pt==="input"&&Ve.type==="file")var Tt=Ji;else if(Ii(Ve))if(Br)Tt=q;else{Tt=F;var Mt=M}else(pt=Ve.nodeName)&&pt.toLowerCase()==="input"&&(Ve.type==="checkbox"||Ve.type==="radio")&&(Tt=j);if(Tt&&(Tt=Tt(i,Re))){Ja(Ye,Tt,h,We);break e}Mt&&Mt(i,Ve,Re),i==="focusout"&&(Mt=Ve._wrapperState)&&Mt.controlled&&Ve.type==="number"&&Fi(Ve,"number",Ve.value)}switch(Mt=Re?tl(Re):window,i){case"focusin":(Ii(Mt)||Mt.contentEditable==="true")&&(ge=Mt,De=Re,Ne=null);break;case"focusout":Ne=De=ge=null;break;case"mousedown":Je=!0;break;case"contextmenu":case"mouseup":case"dragend":Je=!1,rt(Ye,h,We);break;case"selectionchange":if(Ee)break;case"keydown":case"keyup":rt(Ye,h,We)}var Ot;if(Yi)e:{switch(i){case"compositionstart":var Lt="onCompositionStart";break e;case"compositionend":Lt="onCompositionEnd";break e;case"compositionupdate":Lt="onCompositionUpdate";break e}Lt=void 0}else Qi?Ll(i,h)&&(Lt="onCompositionEnd"):i==="keydown"&&h.keyCode===229&&(Lt="onCompositionStart");Lt&&(pa&&h.locale!=="ko"&&(Qi||Lt!=="onCompositionStart"?Lt==="onCompositionEnd"&&Qi&&(Ot=$s()):(_n=We,li="value"in _n?_n.value:_n.textContent,Qi=!0)),Mt=Cu(Re,Lt),0<Mt.length&&(Lt=new Ci(Lt,i,null,h,We),Ye.push({event:Lt,listeners:Mt}),Ot?Lt.data=Ot:(Ot=Za(h),Ot!==null&&(Lt.data=Ot)))),(Ot=Ol?Zi(i,h):Rr(i,h))&&(Re=Cu(Re,"onBeforeInput"),0<Re.length&&(We=new Ci("onBeforeInput","beforeinput",null,h,We),Ye.push({event:We,listeners:Re}),We.data=Ot))}_c(Ye,o)})}function Fl(i,o,h){return{instance:i,listener:o,currentTarget:h}}function Cu(i,o){for(var h=o+"Capture",g=[];i!==null;){var S=i,I=S.stateNode;S.tag===5&&I!==null&&(S=I,I=Bi(i,h),I!=null&&g.unshift(Fl(i,I,S)),I=Bi(i,o),I!=null&&g.push(Fl(i,I,S))),i=i.return}return g}function Bl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function ph(i,o,h,g,S){for(var I=o._reactName,B=[];h!==null&&h!==g;){var Z=h,ae=Z.alternate,Re=Z.stateNode;if(ae!==null&&ae===g)break;Z.tag===5&&Re!==null&&(Z=Re,S?(ae=Bi(h,I),ae!=null&&B.unshift(Fl(h,ae,Z))):S||(ae=Bi(h,I),ae!=null&&B.push(Fl(h,ae,Z)))),h=h.return}B.length!==0&&i.push({event:o,listeners:B})}var lp=/\r\n?/g,up=/\u0000|\uFFFD/g;function mh(i){return(typeof i=="string"?i:""+i).replace(lp,`
`).replace(up,"")}function Iu(i,o,h){if(o=mh(o),mh(i)!==o&&h)throw Error(t(425))}function Pu(){}var Ul=null,gh=null;function yh(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var vh=typeof setTimeout=="function"?setTimeout:void 0,jl=typeof clearTimeout=="function"?clearTimeout:void 0,Sc=typeof Promise=="function"?Promise:void 0,_h=typeof queueMicrotask=="function"?queueMicrotask:typeof Sc<"u"?function(i){return Sc.resolve(null).then(i).catch(cp)}:vh;function cp(i){setTimeout(function(){throw i})}function Ec(i,o){var h=o,g=0;do{var S=h.nextSibling;if(i.removeChild(h),S&&S.nodeType===8)if(h=S.data,h==="/$"){if(g===0){i.removeChild(S),Ti(o);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=S}while(h);Ti(o)}function To(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function xh(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var h=i.data;if(h==="$"||h==="$!"||h==="$?"){if(o===0)return i;o--}else h==="/$"&&o++}i=i.previousSibling}return null}var el=Math.random().toString(36).slice(2),Is="__reactFiber$"+el,Ru="__reactProps$"+el,Ur="__reactContainer$"+el,Ln="__reactEvents$"+el,gd="__reactListeners$"+el,yd="__reactHandles$"+el;function va(i){var o=i[Is];if(o)return o;for(var h=i.parentNode;h;){if(o=h[Ur]||h[Is]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(i=xh(i);i!==null;){if(h=i[Is])return h;i=xh(i)}return o}i=h,h=i.parentNode}return null}function Gl(i){return i=i[Is]||i[Ur],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function tl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function zl(i){return i[Ru]||null}var Tc=[],_a=-1;function Ao(i){return{current:i}}function wr(i){0>_a||(i.current=Tc[_a],Tc[_a]=null,_a--)}function cr(i,o){_a++,Tc[_a]=i.current,i.current=o}var ts={},un=Ao(ts),En=Ao(!1),Co=ts;function xa(i,o){var h=i.type.contextTypes;if(!h)return ts;var g=i.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===o)return g.__reactInternalMemoizedMaskedChildContext;var S={},I;for(I in h)S[I]=o[I];return g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=S),S}function Xn(i){return i=i.childContextTypes,i!=null}function Hl(){wr(En),wr(un)}function ku(i,o,h){if(un.current!==ts)throw Error(t(168));cr(un,o),cr(En,h)}function wh(i,o,h){var g=i.stateNode;if(o=o.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var S in g)if(!(S in o))throw Error(t(108,Ge(i)||"Unknown",S));return G({},h,g)}function Vl(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ts,Co=un.current,cr(un,i),cr(En,En.current),!0}function bh(i,o,h){var g=i.stateNode;if(!g)throw Error(t(169));h?(i=wh(i,o,Co),g.__reactInternalMemoizedMergedChildContext=i,wr(En),wr(un),cr(un,i)):wr(En),cr(En,h)}var rs=null,ns=!1,is=!1;function Sh(i){rs===null?rs=[i]:rs.push(i)}function vd(i){ns=!0,Sh(i)}function ss(){if(!is&&rs!==null){is=!0;var i=0,o=$t;try{var h=rs;for($t=1;i<h.length;i++){var g=h[i];do g=g(!0);while(g!==null)}rs=null,ns=!1}catch(S){throw rs!==null&&(rs=rs.slice(i+1)),Ha(ji,ss),S}finally{$t=o,is=!1}}return null}var Xr=[],Wl=0,Ac=null,rl=0,vr=[],os=0,dt=null,hi=1,eo="";function wa(i,o){Xr[Wl++]=rl,Xr[Wl++]=Ac,Ac=i,rl=o}function $l(i,o,h){vr[os++]=hi,vr[os++]=eo,vr[os++]=dt,dt=i;var g=hi;i=eo;var S=32-Rt(g)-1;g&=~(1<<S),h+=1;var I=32-Rt(o)+S;if(30<I){var B=S-S%5;I=(g&(1<<B)-1).toString(32),g>>=B,S-=B,hi=1<<32-Rt(o)+S|h<<S|g,eo=I+i}else hi=1<<I|h<<S|g,eo=i}function ql(i){i.return!==null&&(wa(i,1),$l(i,1,0))}function Mu(i){for(;i===Ac;)Ac=Xr[--Wl],Xr[Wl]=null,rl=Xr[--Wl],Xr[Wl]=null;for(;i===dt;)dt=vr[--os],vr[os]=null,eo=vr[--os],vr[os]=null,hi=vr[--os],vr[os]=null}var di=null,fi=null,Er=!1,Pi=null;function Cc(i,o){var h=so(5,null,null,0);h.elementType="DELETED",h.stateNode=o,h.return=i,o=i.deletions,o===null?(i.deletions=[h],i.flags|=16):o.push(h)}function Nn(i,o){switch(i.tag){case 5:var h=i.type;return o=o.nodeType!==1||h.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,di=i,fi=To(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,di=i,fi=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(h=dt!==null?{id:hi,overflow:eo}:null,i.memoizedState={dehydrated:o,treeContext:h,retryLane:1073741824},h=so(18,null,null,0),h.stateNode=o,h.return=i,i.child=h,di=i,fi=null,!0):!1;default:return!1}}function as(i){return(i.mode&1)!==0&&(i.flags&128)===0}function ls(i){if(Er){var o=fi;if(o){var h=o;if(!Nn(i,o)){if(as(i))throw Error(t(418));o=To(h.nextSibling);var g=di;o&&Nn(i,o)?Cc(g,h):(i.flags=i.flags&-4097|2,Er=!1,di=i)}}else{if(as(i))throw Error(t(418));i.flags=i.flags&-4097|2,Er=!1,di=i}}}function Ic(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;di=i}function Ou(i){if(i!==di)return!1;if(!Er)return Ic(i),Er=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!yh(i.type,i.memoizedProps)),o&&(o=fi)){if(as(i))throw us(),Error(t(418));for(;o;)Cc(i,o),o=To(o.nextSibling)}if(Ic(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var h=i.data;if(h==="/$"){if(o===0){fi=To(i.nextSibling);break e}o--}else h!=="$"&&h!=="$!"&&h!=="$?"||o++}i=i.nextSibling}fi=null}}else fi=di?To(i.stateNode.nextSibling):null;return!0}function us(){for(var i=fi;i;)i=To(i.nextSibling)}function nl(){fi=di=null,Er=!1}function cs(i){Pi===null?Pi=[i]:Pi.push(i)}var hp=J.ReactCurrentBatchConfig;function Xl(i,o,h){if(i=h.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(t(309));var g=h.stateNode}if(!g)throw Error(t(147,i));var S=g,I=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===I?o.ref:(o=function(B){var Z=S.refs;B===null?delete Z[I]:Z[I]=B},o._stringRef=I,o)}if(typeof i!="string")throw Error(t(284));if(!h._owner)throw Error(t(290,i))}return i}function Du(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Eh(i){var o=i._init;return o(i._payload)}function Th(i){function o(be,de){if(i){var Ce=be.deletions;Ce===null?(be.deletions=[de],be.flags|=16):Ce.push(de)}}function h(be,de){if(!i)return null;for(;de!==null;)o(be,de),de=de.sibling;return null}function g(be,de){for(be=new Map;de!==null;)de.key!==null?be.set(de.key,de):be.set(de.index,de),de=de.sibling;return be}function S(be,de){return be=iu(be,de),be.index=0,be.sibling=null,be}function I(be,de,Ce){return be.index=Ce,i?(Ce=be.alternate,Ce!==null?(Ce=Ce.index,Ce<de?(be.flags|=2,de):Ce):(be.flags|=2,de)):(be.flags|=1048576,de)}function B(be){return i&&be.alternate===null&&(be.flags|=2),be}function Z(be,de,Ce,nt){return de===null||de.tag!==6?(de=Lp(Ce,be.mode,nt),de.return=be,de):(de=S(de,Ce),de.return=be,de)}function ae(be,de,Ce,nt){var Tt=Ce.type;return Tt===N?We(be,de,Ce.props.children,nt,Ce.key):de!==null&&(de.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===H&&Eh(Tt)===de.type)?(nt=S(de,Ce.props),nt.ref=Xl(be,de,Ce),nt.return=be,nt):(nt=Nd(Ce.type,Ce.key,Ce.props,null,be.mode,nt),nt.ref=Xl(be,de,Ce),nt.return=be,nt)}function Re(be,de,Ce,nt){return de===null||de.tag!==4||de.stateNode.containerInfo!==Ce.containerInfo||de.stateNode.implementation!==Ce.implementation?(de=Np(Ce,be.mode,nt),de.return=be,de):(de=S(de,Ce.children||[]),de.return=be,de)}function We(be,de,Ce,nt,Tt){return de===null||de.tag!==7?(de=Yu(Ce,be.mode,nt,Tt),de.return=be,de):(de=S(de,Ce),de.return=be,de)}function Ye(be,de,Ce){if(typeof de=="string"&&de!==""||typeof de=="number")return de=Lp(""+de,be.mode,Ce),de.return=be,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case X:return Ce=Nd(de.type,de.key,de.props,null,be.mode,Ce),Ce.ref=Xl(be,null,de),Ce.return=be,Ce;case fe:return de=Np(de,be.mode,Ce),de.return=be,de;case H:var nt=de._init;return Ye(be,nt(de._payload),Ce)}if(Nr(de)||Y(de))return de=Yu(de,be.mode,Ce,null),de.return=be,de;Du(be,de)}return null}function Ve(be,de,Ce,nt){var Tt=de!==null?de.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Tt!==null?null:Z(be,de,""+Ce,nt);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case X:return Ce.key===Tt?ae(be,de,Ce,nt):null;case fe:return Ce.key===Tt?Re(be,de,Ce,nt):null;case H:return Tt=Ce._init,Ve(be,de,Tt(Ce._payload),nt)}if(Nr(Ce)||Y(Ce))return Tt!==null?null:We(be,de,Ce,nt,null);Du(be,Ce)}return null}function pt(be,de,Ce,nt,Tt){if(typeof nt=="string"&&nt!==""||typeof nt=="number")return be=be.get(Ce)||null,Z(de,be,""+nt,Tt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case X:return be=be.get(nt.key===null?Ce:nt.key)||null,ae(de,be,nt,Tt);case fe:return be=be.get(nt.key===null?Ce:nt.key)||null,Re(de,be,nt,Tt);case H:var Mt=nt._init;return pt(be,de,Ce,Mt(nt._payload),Tt)}if(Nr(nt)||Y(nt))return be=be.get(Ce)||null,We(de,be,nt,Tt,null);Du(de,nt)}return null}function wt(be,de,Ce,nt){for(var Tt=null,Mt=null,Ot=de,Lt=de=0,Un=null;Ot!==null&&Lt<Ce.length;Lt++){Ot.index>Lt?(Un=Ot,Ot=null):Un=Ot.sibling;var hr=Ve(be,Ot,Ce[Lt],nt);if(hr===null){Ot===null&&(Ot=Un);break}i&&Ot&&hr.alternate===null&&o(be,Ot),de=I(hr,de,Lt),Mt===null?Tt=hr:Mt.sibling=hr,Mt=hr,Ot=Un}if(Lt===Ce.length)return h(be,Ot),Er&&wa(be,Lt),Tt;if(Ot===null){for(;Lt<Ce.length;Lt++)Ot=Ye(be,Ce[Lt],nt),Ot!==null&&(de=I(Ot,de,Lt),Mt===null?Tt=Ot:Mt.sibling=Ot,Mt=Ot);return Er&&wa(be,Lt),Tt}for(Ot=g(be,Ot);Lt<Ce.length;Lt++)Un=pt(Ot,be,Lt,Ce[Lt],nt),Un!==null&&(i&&Un.alternate!==null&&Ot.delete(Un.key===null?Lt:Un.key),de=I(Un,de,Lt),Mt===null?Tt=Un:Mt.sibling=Un,Mt=Un);return i&&Ot.forEach(function(su){return o(be,su)}),Er&&wa(be,Lt),Tt}function St(be,de,Ce,nt){var Tt=Y(Ce);if(typeof Tt!="function")throw Error(t(150));if(Ce=Tt.call(Ce),Ce==null)throw Error(t(151));for(var Mt=Tt=null,Ot=de,Lt=de=0,Un=null,hr=Ce.next();Ot!==null&&!hr.done;Lt++,hr=Ce.next()){Ot.index>Lt?(Un=Ot,Ot=null):Un=Ot.sibling;var su=Ve(be,Ot,hr.value,nt);if(su===null){Ot===null&&(Ot=Un);break}i&&Ot&&su.alternate===null&&o(be,Ot),de=I(su,de,Lt),Mt===null?Tt=su:Mt.sibling=su,Mt=su,Ot=Un}if(hr.done)return h(be,Ot),Er&&wa(be,Lt),Tt;if(Ot===null){for(;!hr.done;Lt++,hr=Ce.next())hr=Ye(be,hr.value,nt),hr!==null&&(de=I(hr,de,Lt),Mt===null?Tt=hr:Mt.sibling=hr,Mt=hr);return Er&&wa(be,Lt),Tt}for(Ot=g(be,Ot);!hr.done;Lt++,hr=Ce.next())hr=pt(Ot,be,Lt,hr.value,nt),hr!==null&&(i&&hr.alternate!==null&&Ot.delete(hr.key===null?Lt:hr.key),de=I(hr,de,Lt),Mt===null?Tt=hr:Mt.sibling=hr,Mt=hr);return i&&Ot.forEach(function(_1){return o(be,_1)}),Er&&wa(be,Lt),Tt}function dn(be,de,Ce,nt){if(typeof Ce=="object"&&Ce!==null&&Ce.type===N&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case X:e:{for(var Tt=Ce.key,Mt=de;Mt!==null;){if(Mt.key===Tt){if(Tt=Ce.type,Tt===N){if(Mt.tag===7){h(be,Mt.sibling),de=S(Mt,Ce.props.children),de.return=be,be=de;break e}}else if(Mt.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===H&&Eh(Tt)===Mt.type){h(be,Mt.sibling),de=S(Mt,Ce.props),de.ref=Xl(be,Mt,Ce),de.return=be,be=de;break e}h(be,Mt);break}else o(be,Mt);Mt=Mt.sibling}Ce.type===N?(de=Yu(Ce.props.children,be.mode,nt,Ce.key),de.return=be,be=de):(nt=Nd(Ce.type,Ce.key,Ce.props,null,be.mode,nt),nt.ref=Xl(be,de,Ce),nt.return=be,be=nt)}return B(be);case fe:e:{for(Mt=Ce.key;de!==null;){if(de.key===Mt)if(de.tag===4&&de.stateNode.containerInfo===Ce.containerInfo&&de.stateNode.implementation===Ce.implementation){h(be,de.sibling),de=S(de,Ce.children||[]),de.return=be,be=de;break e}else{h(be,de);break}else o(be,de);de=de.sibling}de=Np(Ce,be.mode,nt),de.return=be,be=de}return B(be);case H:return Mt=Ce._init,dn(be,de,Mt(Ce._payload),nt)}if(Nr(Ce))return wt(be,de,Ce,nt);if(Y(Ce))return St(be,de,Ce,nt);Du(be,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"?(Ce=""+Ce,de!==null&&de.tag===6?(h(be,de.sibling),de=S(de,Ce),de.return=be,be=de):(h(be,de),de=Lp(Ce,be.mode,nt),de.return=be,be=de),B(be)):h(be,de)}return dn}var Io=Th(!0),Lu=Th(!1),il=Ao(null),sl=null,Po=null,ol=null;function Nu(){ol=Po=sl=null}function Fu(i){var o=il.current;wr(il),i._currentValue=o}function Bu(i,o,h){for(;i!==null;){var g=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,g!==null&&(g.childLanes|=o)):g!==null&&(g.childLanes&o)!==o&&(g.childLanes|=o),i===h)break;i=i.return}}function al(i,o){sl=i,ol=Po=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(ye=!0),i.firstContext=null)}function pi(i){var o=i._currentValue;if(ol!==i)if(i={context:i,memoizedValue:o,next:null},Po===null){if(sl===null)throw Error(t(308));Po=i,sl.dependencies={lanes:0,firstContext:i}}else Po=Po.next=i;return o}var ll=null;function Kl(i){ll===null?ll=[i]:ll.push(i)}function Pc(i,o,h,g){var S=o.interleaved;return S===null?(h.next=h,Kl(o)):(h.next=S.next,S.next=h),o.interleaved=h,mr(i,g)}function mr(i,o){i.lanes|=o;var h=i.alternate;for(h!==null&&(h.lanes|=o),h=i,i=i.return;i!==null;)i.childLanes|=o,h=i.alternate,h!==null&&(h.childLanes|=o),h=i,i=i.return;return h.tag===3?h.stateNode:null}var jt=!1;function Kr(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hr(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Tr(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Yr(i,o,h){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,(ar&2)!==0){var S=g.pending;return S===null?o.next=o:(o.next=S.next,S.next=o),g.pending=o,mr(i,h)}return S=g.interleaved,S===null?(o.next=o,Kl(g)):(o.next=S.next,S.next=o),g.interleaved=o,mr(i,h)}function Ro(i,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194240)!==0)){var g=o.lanes;g&=i.pendingLanes,h|=g,o.lanes=h,ta(i,h)}}function Qr(i,o){var h=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var S=null,I=null;if(h=h.firstBaseUpdate,h!==null){do{var B={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};I===null?S=I=B:I=I.next=B,h=h.next}while(h!==null);I===null?S=I=o:I=I.next=o}else S=I=o;h={baseState:g.baseState,firstBaseUpdate:S,lastBaseUpdate:I,shared:g.shared,effects:g.effects},i.updateQueue=h;return}i=h.lastBaseUpdate,i===null?h.firstBaseUpdate=o:i.next=o,h.lastBaseUpdate=o}function ba(i,o,h,g){var S=i.updateQueue;jt=!1;var I=S.firstBaseUpdate,B=S.lastBaseUpdate,Z=S.shared.pending;if(Z!==null){S.shared.pending=null;var ae=Z,Re=ae.next;ae.next=null,B===null?I=Re:B.next=Re,B=ae;var We=i.alternate;We!==null&&(We=We.updateQueue,Z=We.lastBaseUpdate,Z!==B&&(Z===null?We.firstBaseUpdate=Re:Z.next=Re,We.lastBaseUpdate=ae))}if(I!==null){var Ye=S.baseState;B=0,We=Re=ae=null,Z=I;do{var Ve=Z.lane,pt=Z.eventTime;if((g&Ve)===Ve){We!==null&&(We=We.next={eventTime:pt,lane:0,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null});e:{var wt=i,St=Z;switch(Ve=o,pt=h,St.tag){case 1:if(wt=St.payload,typeof wt=="function"){Ye=wt.call(pt,Ye,Ve);break e}Ye=wt;break e;case 3:wt.flags=wt.flags&-65537|128;case 0:if(wt=St.payload,Ve=typeof wt=="function"?wt.call(pt,Ye,Ve):wt,Ve==null)break e;Ye=G({},Ye,Ve);break e;case 2:jt=!0}}Z.callback!==null&&Z.lane!==0&&(i.flags|=64,Ve=S.effects,Ve===null?S.effects=[Z]:Ve.push(Z))}else pt={eventTime:pt,lane:Ve,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},We===null?(Re=We=pt,ae=Ye):We=We.next=pt,B|=Ve;if(Z=Z.next,Z===null){if(Z=S.shared.pending,Z===null)break;Ve=Z,Z=Ve.next,Ve.next=null,S.lastBaseUpdate=Ve,S.shared.pending=null}}while(!0);if(We===null&&(ae=Ye),S.baseState=ae,S.firstBaseUpdate=Re,S.lastBaseUpdate=We,o=S.shared.interleaved,o!==null){S=o;do B|=S.lane,S=S.next;while(S!==o)}else I===null&&(S.shared.lanes=0);$u|=B,i.lanes=B,i.memoizedState=Ye}}function Sa(i,o,h){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var g=i[o],S=g.callback;if(S!==null){if(g.callback=null,g=h,typeof S!="function")throw Error(t(191,S));S.call(g)}}}var Ea={},hs=Ao(Ea),ko=Ao(Ea),Tn=Ao(Ea);function Mo(i){if(i===Ea)throw Error(t(174));return i}function Uu(i,o){switch(cr(Tn,o),cr(ko,i),cr(hs,Ea),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Jn(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Jn(o,i)}wr(hs),cr(hs,o)}function Ri(){wr(hs),wr(ko),wr(Tn)}function ul(i){Mo(Tn.current);var o=Mo(hs.current),h=Jn(o,i.type);o!==h&&(cr(ko,i),cr(hs,h))}function Rc(i){ko.current===i&&(wr(hs),wr(ko))}var br=Ao(0);function Yl(i){for(var o=i;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var to=[];function Ql(){for(var i=0;i<to.length;i++)to[i]._workInProgressVersionPrimary=null;to.length=0}var Ps=J.ReactCurrentDispatcher,Zl=J.ReactCurrentBatchConfig,Rs=0,Ar=null,jr=null,Vr=null,cn=!1,ds=!1,Fn=0,mi=0;function An(){throw Error(t(321))}function ju(i,o){if(o===null)return!1;for(var h=0;h<o.length&&h<i.length;h++)if(!me(i[h],o[h]))return!1;return!0}function Gu(i,o,h,g,S,I){if(Rs=I,Ar=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ps.current=i===null||i.memoizedState===null?Nc:fp,i=h(g,S),ds){I=0;do{if(ds=!1,Fn=0,25<=I)throw Error(t(301));I+=1,Vr=jr=null,o.updateQueue=null,Ps.current=pp,i=h(g,S)}while(ds)}if(Ps.current=Wu,o=jr!==null&&jr.next!==null,Rs=0,Vr=jr=Ar=null,cn=!1,o)throw Error(t(300));return i}function ro(){var i=Fn!==0;return Fn=0,i}function ks(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vr===null?Ar.memoizedState=Vr=i:Vr=Vr.next=i,Vr}function ki(){if(jr===null){var i=Ar.alternate;i=i!==null?i.memoizedState:null}else i=jr.next;var o=Vr===null?Ar.memoizedState:Vr.next;if(o!==null)Vr=o,jr=i;else{if(i===null)throw Error(t(310));jr=i,i={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},Vr===null?Ar.memoizedState=Vr=i:Vr=Vr.next=i}return Vr}function cl(i,o){return typeof o=="function"?o(i):o}function Oo(i){var o=ki(),h=o.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=i;var g=jr,S=g.baseQueue,I=h.pending;if(I!==null){if(S!==null){var B=S.next;S.next=I.next,I.next=B}g.baseQueue=S=I,h.pending=null}if(S!==null){I=S.next,g=g.baseState;var Z=B=null,ae=null,Re=I;do{var We=Re.lane;if((Rs&We)===We)ae!==null&&(ae=ae.next={lane:0,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),g=Re.hasEagerState?Re.eagerState:i(g,Re.action);else{var Ye={lane:We,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null};ae===null?(Z=ae=Ye,B=g):ae=ae.next=Ye,Ar.lanes|=We,$u|=We}Re=Re.next}while(Re!==null&&Re!==I);ae===null?B=g:ae.next=Z,me(g,o.memoizedState)||(ye=!0),o.memoizedState=g,o.baseState=B,o.baseQueue=ae,h.lastRenderedState=g}if(i=h.interleaved,i!==null){S=i;do I=S.lane,Ar.lanes|=I,$u|=I,S=S.next;while(S!==i)}else S===null&&(h.lanes=0);return[o.memoizedState,h.dispatch]}function kc(i){var o=ki(),h=o.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=i;var g=h.dispatch,S=h.pending,I=o.memoizedState;if(S!==null){h.pending=null;var B=S=S.next;do I=i(I,B.action),B=B.next;while(B!==S);me(I,o.memoizedState)||(ye=!0),o.memoizedState=I,o.baseQueue===null&&(o.baseState=I),h.lastRenderedState=I}return[I,g]}function Ah(){}function Mc(i,o){var h=Ar,g=ki(),S=o(),I=!me(g.memoizedState,S);if(I&&(g.memoizedState=S,ye=!0),g=g.queue,kh(xd.bind(null,h,g,i),[i]),g.getSnapshot!==o||I||Vr!==null&&Vr.memoizedState.tag&1){if(h.flags|=2048,Ms(9,_d.bind(null,h,g,S,o),void 0,null),Bn===null)throw Error(t(349));(Rs&30)!==0||zu(h,o,S)}return S}function zu(i,o,h){i.flags|=16384,i={getSnapshot:o,value:h},o=Ar.updateQueue,o===null?(o={lastEffect:null,stores:null},Ar.updateQueue=o,o.stores=[i]):(h=o.stores,h===null?o.stores=[i]:h.push(i))}function _d(i,o,h,g){o.value=h,o.getSnapshot=g,Ch(o)&&Ih(i)}function xd(i,o,h){return h(function(){Ch(o)&&Ih(i)})}function Ch(i){var o=i.getSnapshot;i=i.value;try{var h=o();return!me(i,h)}catch{return!0}}function Ih(i){var o=mr(i,1);o!==null&&Fo(o,i,1,-1)}function hl(i){var o=ks();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cl,lastRenderedState:i},o.queue=i,i=i.dispatch=dp.bind(null,Ar,i),[o.memoizedState,i]}function Ms(i,o,h,g){return i={tag:i,create:o,destroy:h,deps:g,next:null},o=Ar.updateQueue,o===null?(o={lastEffect:null,stores:null},Ar.updateQueue=o,o.lastEffect=i.next=i):(h=o.lastEffect,h===null?o.lastEffect=i.next=i:(g=h.next,h.next=i,i.next=g,o.lastEffect=i)),i}function Ph(){return ki().memoizedState}function _r(i,o,h,g){var S=ks();Ar.flags|=i,S.memoizedState=Ms(1|o,h,void 0,g===void 0?null:g)}function Oc(i,o,h,g){var S=ki();g=g===void 0?null:g;var I=void 0;if(jr!==null){var B=jr.memoizedState;if(I=B.destroy,g!==null&&ju(g,B.deps)){S.memoizedState=Ms(o,h,I,g);return}}Ar.flags|=i,S.memoizedState=Ms(1|o,h,I,g)}function Rh(i,o){return _r(8390656,8,i,o)}function kh(i,o){return Oc(2048,8,i,o)}function wd(i,o){return Oc(4,2,i,o)}function Mh(i,o){return Oc(4,4,i,o)}function bd(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Mi(i,o,h){return h=h!=null?h.concat([i]):null,Oc(4,4,bd.bind(null,o,i),h)}function Hu(){}function Do(i,o){var h=ki();o=o===void 0?null:o;var g=h.memoizedState;return g!==null&&o!==null&&ju(o,g[1])?g[0]:(h.memoizedState=[i,o],i)}function Vu(i,o){var h=ki();o=o===void 0?null:o;var g=h.memoizedState;return g!==null&&o!==null&&ju(o,g[1])?g[0]:(i=i(),h.memoizedState=[i,o],i)}function Ta(i,o,h){return(Rs&21)===0?(i.baseState&&(i.baseState=!1,ye=!0),i.memoizedState=h):(me(h,o)||(h=sn(),Ar.lanes|=h,$u|=h,i.baseState=!0),o)}function Dc(i,o){var h=$t;$t=h!==0&&4>h?h:4,i(!0);var g=Zl.transition;Zl.transition={};try{i(!1),o()}finally{$t=h,Zl.transition=g}}function Lc(){return ki().memoizedState}function Oh(i,o,h){var g=ru(i);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},Dh(i))Lh(o,h);else if(h=Pc(i,o,h,g),h!==null){var S=Oi();Fo(h,i,g,S),Nh(h,o,g)}}function dp(i,o,h){var g=ru(i),S={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(Dh(i))Lh(o,S);else{var I=i.alternate;if(i.lanes===0&&(I===null||I.lanes===0)&&(I=o.lastRenderedReducer,I!==null))try{var B=o.lastRenderedState,Z=I(B,h);if(S.hasEagerState=!0,S.eagerState=Z,me(Z,B)){var ae=o.interleaved;ae===null?(S.next=S,Kl(o)):(S.next=ae.next,ae.next=S),o.interleaved=S;return}}catch{}h=Pc(i,o,S,g),h!==null&&(S=Oi(),Fo(h,i,g,S),Nh(h,o,g))}}function Dh(i){var o=i.alternate;return i===Ar||o!==null&&o===Ar}function Lh(i,o){ds=cn=!0;var h=i.pending;h===null?o.next=o:(o.next=h.next,h.next=o),i.pending=o}function Nh(i,o,h){if((h&4194240)!==0){var g=o.lanes;g&=i.pendingLanes,h|=g,o.lanes=h,ta(i,h)}}var Wu={readContext:pi,useCallback:An,useContext:An,useEffect:An,useImperativeHandle:An,useInsertionEffect:An,useLayoutEffect:An,useMemo:An,useReducer:An,useRef:An,useState:An,useDebugValue:An,useDeferredValue:An,useTransition:An,useMutableSource:An,useSyncExternalStore:An,useId:An,unstable_isNewReconciler:!1},Nc={readContext:pi,useCallback:function(i,o){return ks().memoizedState=[i,o===void 0?null:o],i},useContext:pi,useEffect:Rh,useImperativeHandle:function(i,o,h){return h=h!=null?h.concat([i]):null,_r(4194308,4,bd.bind(null,o,i),h)},useLayoutEffect:function(i,o){return _r(4194308,4,i,o)},useInsertionEffect:function(i,o){return _r(4,2,i,o)},useMemo:function(i,o){var h=ks();return o=o===void 0?null:o,i=i(),h.memoizedState=[i,o],i},useReducer:function(i,o,h){var g=ks();return o=h!==void 0?h(o):o,g.memoizedState=g.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},g.queue=i,i=i.dispatch=Oh.bind(null,Ar,i),[g.memoizedState,i]},useRef:function(i){var o=ks();return i={current:i},o.memoizedState=i},useState:hl,useDebugValue:Hu,useDeferredValue:function(i){return ks().memoizedState=i},useTransition:function(){var i=hl(!1),o=i[0];return i=Dc.bind(null,i[1]),ks().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,h){var g=Ar,S=ks();if(Er){if(h===void 0)throw Error(t(407));h=h()}else{if(h=o(),Bn===null)throw Error(t(349));(Rs&30)!==0||zu(g,o,h)}S.memoizedState=h;var I={value:h,getSnapshot:o};return S.queue=I,Rh(xd.bind(null,g,I,i),[i]),g.flags|=2048,Ms(9,_d.bind(null,g,I,h,o),void 0,null),h},useId:function(){var i=ks(),o=Bn.identifierPrefix;if(Er){var h=eo,g=hi;h=(g&~(1<<32-Rt(g)-1)).toString(32)+h,o=":"+o+"R"+h,h=Fn++,0<h&&(o+="H"+h.toString(32)),o+=":"}else h=mi++,o=":"+o+"r"+h.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},fp={readContext:pi,useCallback:Do,useContext:pi,useEffect:kh,useImperativeHandle:Mi,useInsertionEffect:wd,useLayoutEffect:Mh,useMemo:Vu,useReducer:Oo,useRef:Ph,useState:function(){return Oo(cl)},useDebugValue:Hu,useDeferredValue:function(i){var o=ki();return Ta(o,jr.memoizedState,i)},useTransition:function(){var i=Oo(cl)[0],o=ki().memoizedState;return[i,o]},useMutableSource:Ah,useSyncExternalStore:Mc,useId:Lc,unstable_isNewReconciler:!1},pp={readContext:pi,useCallback:Do,useContext:pi,useEffect:kh,useImperativeHandle:Mi,useInsertionEffect:wd,useLayoutEffect:Mh,useMemo:Vu,useReducer:kc,useRef:Ph,useState:function(){return kc(cl)},useDebugValue:Hu,useDeferredValue:function(i){var o=ki();return jr===null?o.memoizedState=i:Ta(o,jr.memoizedState,i)},useTransition:function(){var i=kc(cl)[0],o=ki().memoizedState;return[i,o]},useMutableSource:Ah,useSyncExternalStore:Mc,useId:Lc,unstable_isNewReconciler:!1};function l(i,o){if(i&&i.defaultProps){o=G({},o),i=i.defaultProps;for(var h in i)o[h]===void 0&&(o[h]=i[h]);return o}return o}function u(i,o,h,g){o=i.memoizedState,h=h(g,o),h=h==null?o:G({},o,h),i.memoizedState=h,i.lanes===0&&(i.updateQueue.baseState=h)}var _={isMounted:function(i){return(i=i._reactInternals)?qr(i)===i:!1},enqueueSetState:function(i,o,h){i=i._reactInternals;var g=Oi(),S=ru(i),I=Tr(g,S);I.payload=o,h!=null&&(I.callback=h),o=Yr(i,I,S),o!==null&&(Fo(o,i,S,g),Ro(o,i,S))},enqueueReplaceState:function(i,o,h){i=i._reactInternals;var g=Oi(),S=ru(i),I=Tr(g,S);I.tag=1,I.payload=o,h!=null&&(I.callback=h),o=Yr(i,I,S),o!==null&&(Fo(o,i,S,g),Ro(o,i,S))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var h=Oi(),g=ru(i),S=Tr(h,g);S.tag=2,o!=null&&(S.callback=o),o=Yr(i,S,g),o!==null&&(Fo(o,i,g,h),Ro(o,i,g))}};function E(i,o,h,g,S,I,B){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,I,B):o.prototype&&o.prototype.isPureReactComponent?!oe(h,g)||!oe(S,I):!0}function C(i,o,h){var g=!1,S=ts,I=o.contextType;return typeof I=="object"&&I!==null?I=pi(I):(S=Xn(o)?Co:un.current,g=o.contextTypes,I=(g=g!=null)?xa(i,S):ts),o=new o(h,I),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=_,i.stateNode=o,o._reactInternals=i,g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=S,i.__reactInternalMemoizedMaskedChildContext=I),o}function O(i,o,h,g){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,g),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,g),o.state!==i&&_.enqueueReplaceState(o,o.state,null)}function $(i,o,h,g){var S=i.stateNode;S.props=h,S.state=i.memoizedState,S.refs={},Kr(i);var I=o.contextType;typeof I=="object"&&I!==null?S.context=pi(I):(I=Xn(o)?Co:un.current,S.context=xa(i,I)),S.state=i.memoizedState,I=o.getDerivedStateFromProps,typeof I=="function"&&(u(i,o,I,h),S.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(o=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),o!==S.state&&_.enqueueReplaceState(S,S.state,null),ba(i,h,S,g),S.state=i.memoizedState),typeof S.componentDidMount=="function"&&(i.flags|=4194308)}function ce(i,o){try{var h="",g=o;do h+=Oe(g),g=g.return;while(g);var S=h}catch(I){S=`
Error generating stack: `+I.message+`
`+I.stack}return{value:i,source:o,stack:S,digest:null}}function Te(i,o,h){return{value:i,source:null,stack:h??null,digest:o??null}}function Le(i,o){try{console.error(o.value)}catch(h){setTimeout(function(){throw h})}}var Ue=typeof WeakMap=="function"?WeakMap:Map;function lt(i,o,h){h=Tr(-1,h),h.tag=3,h.payload={element:null};var g=o.value;return h.callback=function(){Rd||(Rd=!0,Cp=g),Le(i,o)},h}function Be(i,o,h){h=Tr(-1,h),h.tag=3;var g=i.type.getDerivedStateFromError;if(typeof g=="function"){var S=o.value;h.payload=function(){return g(S)},h.callback=function(){Le(i,o)}}var I=i.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(h.callback=function(){Le(i,o),typeof g!="function"&&(eu===null?eu=new Set([this]):eu.add(this));var B=o.stack;this.componentDidCatch(o.value,{componentStack:B!==null?B:""})}),h}function Ze(i,o,h){var g=i.pingCache;if(g===null){g=i.pingCache=new Ue;var S=new Set;g.set(o,S)}else S=g.get(o),S===void 0&&(S=new Set,g.set(o,S));S.has(h)||(S.add(h),i=l1.bind(null,i,o,h),o.then(i,i))}function xt(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Ht(i,o,h,g,S){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(o=Tr(-1,1),o.tag=2,Yr(h,o,1))),h.lanes|=1),i):(i.flags|=65536,i.lanes=S,i)}var je=J.ReactCurrentOwner,ye=!1;function ke(i,o,h,g){o.child=i===null?Lu(o,null,h,g):Io(o,i.child,h,g)}function $e(i,o,h,g,S){h=h.render;var I=o.ref;return al(o,S),g=Gu(i,o,h,g,I,S),h=ro(),i!==null&&!ye?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~S,dl(i,o,S)):(Er&&h&&ql(o),o.flags|=1,ke(i,o,g,S),o.child)}function It(i,o,h,g,S){if(i===null){var I=h.type;return typeof I=="function"&&!Dp(I)&&I.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(o.tag=15,o.type=I,sr(i,o,I,g,S)):(i=Nd(h.type,null,g,o,o.mode,S),i.ref=o.ref,i.return=o,o.child=i)}if(I=i.child,(i.lanes&S)===0){var B=I.memoizedProps;if(h=h.compare,h=h!==null?h:oe,h(B,g)&&i.ref===o.ref)return dl(i,o,S)}return o.flags|=1,i=iu(I,g),i.ref=o.ref,i.return=o,o.child=i}function sr(i,o,h,g,S){if(i!==null){var I=i.memoizedProps;if(oe(I,g)&&i.ref===o.ref)if(ye=!1,o.pendingProps=g=I,(i.lanes&S)!==0)(i.flags&131072)!==0&&(ye=!0);else return o.lanes=i.lanes,dl(i,o,S)}return hn(i,o,h,g,S)}function bt(i,o,h){var g=o.pendingProps,S=g.children,I=i!==null?i.memoizedState:null;if(g.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},cr(Bc,Os),Os|=h;else{if((h&1073741824)===0)return i=I!==null?I.baseLanes|h:h,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,cr(Bc,Os),Os|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=I!==null?I.baseLanes:h,cr(Bc,Os),Os|=g}else I!==null?(g=I.baseLanes|h,o.memoizedState=null):g=h,cr(Bc,Os),Os|=g;return ke(i,o,S,h),o.child}function tr(i,o){var h=o.ref;(i===null&&h!==null||i!==null&&i.ref!==h)&&(o.flags|=512,o.flags|=2097152)}function hn(i,o,h,g,S){var I=Xn(h)?Co:un.current;return I=xa(o,I),al(o,S),h=Gu(i,o,h,g,I,S),g=ro(),i!==null&&!ye?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~S,dl(i,o,S)):(Er&&g&&ql(o),o.flags|=1,ke(i,o,h,S),o.child)}function or(i,o,h,g,S){if(Xn(h)){var I=!0;Vl(o)}else I=!1;if(al(o,S),o.stateNode===null)Td(i,o),C(o,h,g),$(o,h,g,S),g=!0;else if(i===null){var B=o.stateNode,Z=o.memoizedProps;B.props=Z;var ae=B.context,Re=h.contextType;typeof Re=="object"&&Re!==null?Re=pi(Re):(Re=Xn(h)?Co:un.current,Re=xa(o,Re));var We=h.getDerivedStateFromProps,Ye=typeof We=="function"||typeof B.getSnapshotBeforeUpdate=="function";Ye||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(Z!==g||ae!==Re)&&O(o,B,g,Re),jt=!1;var Ve=o.memoizedState;B.state=Ve,ba(o,g,B,S),ae=o.memoizedState,Z!==g||Ve!==ae||En.current||jt?(typeof We=="function"&&(u(o,h,We,g),ae=o.memoizedState),(Z=jt||E(o,h,Z,g,Ve,ae,Re))?(Ye||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(o.flags|=4194308)):(typeof B.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=g,o.memoizedState=ae),B.props=g,B.state=ae,B.context=Re,g=Z):(typeof B.componentDidMount=="function"&&(o.flags|=4194308),g=!1)}else{B=o.stateNode,Hr(i,o),Z=o.memoizedProps,Re=o.type===o.elementType?Z:l(o.type,Z),B.props=Re,Ye=o.pendingProps,Ve=B.context,ae=h.contextType,typeof ae=="object"&&ae!==null?ae=pi(ae):(ae=Xn(h)?Co:un.current,ae=xa(o,ae));var pt=h.getDerivedStateFromProps;(We=typeof pt=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(Z!==Ye||Ve!==ae)&&O(o,B,g,ae),jt=!1,Ve=o.memoizedState,B.state=Ve,ba(o,g,B,S);var wt=o.memoizedState;Z!==Ye||Ve!==wt||En.current||jt?(typeof pt=="function"&&(u(o,h,pt,g),wt=o.memoizedState),(Re=jt||E(o,h,Re,g,Ve,wt,ae)||!1)?(We||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(g,wt,ae),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(g,wt,ae)),typeof B.componentDidUpdate=="function"&&(o.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof B.componentDidUpdate!="function"||Z===i.memoizedProps&&Ve===i.memoizedState||(o.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||Z===i.memoizedProps&&Ve===i.memoizedState||(o.flags|=1024),o.memoizedProps=g,o.memoizedState=wt),B.props=g,B.state=wt,B.context=ae,g=Re):(typeof B.componentDidUpdate!="function"||Z===i.memoizedProps&&Ve===i.memoizedState||(o.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||Z===i.memoizedProps&&Ve===i.memoizedState||(o.flags|=1024),g=!1)}return no(i,o,h,g,I,S)}function no(i,o,h,g,S,I){tr(i,o);var B=(o.flags&128)!==0;if(!g&&!B)return S&&bh(o,h,!1),dl(i,o,I);g=o.stateNode,je.current=o;var Z=B&&typeof h.getDerivedStateFromError!="function"?null:g.render();return o.flags|=1,i!==null&&B?(o.child=Io(o,i.child,null,I),o.child=Io(o,null,Z,I)):ke(i,o,Z,I),o.memoizedState=g.state,S&&bh(o,h,!0),o.child}function Sd(i){var o=i.stateNode;o.pendingContext?ku(i,o.pendingContext,o.pendingContext!==o.context):o.context&&ku(i,o.context,!1),Uu(i,o.containerInfo)}function Ly(i,o,h,g,S){return nl(),cs(S),o.flags|=256,ke(i,o,h,g),o.child}var mp={dehydrated:null,treeContext:null,retryLane:0};function gp(i){return{baseLanes:i,cachePool:null,transitions:null}}function Ny(i,o,h){var g=o.pendingProps,S=br.current,I=!1,B=(o.flags&128)!==0,Z;if((Z=B)||(Z=i!==null&&i.memoizedState===null?!1:(S&2)!==0),Z?(I=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(S|=1),cr(br,S&1),i===null)return ls(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(B=g.children,i=g.fallback,I?(g=o.mode,I=o.child,B={mode:"hidden",children:B},(g&1)===0&&I!==null?(I.childLanes=0,I.pendingProps=B):I=Fd(B,g,0,null),i=Yu(i,g,h,null),I.return=o,i.return=o,I.sibling=i,o.child=I,o.child.memoizedState=gp(h),o.memoizedState=mp,i):yp(o,B));if(S=i.memoizedState,S!==null&&(Z=S.dehydrated,Z!==null))return Yw(i,o,B,g,Z,S,h);if(I){I=g.fallback,B=o.mode,S=i.child,Z=S.sibling;var ae={mode:"hidden",children:g.children};return(B&1)===0&&o.child!==S?(g=o.child,g.childLanes=0,g.pendingProps=ae,o.deletions=null):(g=iu(S,ae),g.subtreeFlags=S.subtreeFlags&14680064),Z!==null?I=iu(Z,I):(I=Yu(I,B,h,null),I.flags|=2),I.return=o,g.return=o,g.sibling=I,o.child=g,g=I,I=o.child,B=i.child.memoizedState,B=B===null?gp(h):{baseLanes:B.baseLanes|h,cachePool:null,transitions:B.transitions},I.memoizedState=B,I.childLanes=i.childLanes&~h,o.memoizedState=mp,g}return I=i.child,i=I.sibling,g=iu(I,{mode:"visible",children:g.children}),(o.mode&1)===0&&(g.lanes=h),g.return=o,g.sibling=null,i!==null&&(h=o.deletions,h===null?(o.deletions=[i],o.flags|=16):h.push(i)),o.child=g,o.memoizedState=null,g}function yp(i,o){return o=Fd({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Ed(i,o,h,g){return g!==null&&cs(g),Io(o,i.child,null,h),i=yp(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Yw(i,o,h,g,S,I,B){if(h)return o.flags&256?(o.flags&=-257,g=Te(Error(t(422))),Ed(i,o,B,g)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(I=g.fallback,S=o.mode,g=Fd({mode:"visible",children:g.children},S,0,null),I=Yu(I,S,B,null),I.flags|=2,g.return=o,I.return=o,g.sibling=I,o.child=g,(o.mode&1)!==0&&Io(o,i.child,null,B),o.child.memoizedState=gp(B),o.memoizedState=mp,I);if((o.mode&1)===0)return Ed(i,o,B,null);if(S.data==="$!"){if(g=S.nextSibling&&S.nextSibling.dataset,g)var Z=g.dgst;return g=Z,I=Error(t(419)),g=Te(I,g,void 0),Ed(i,o,B,g)}if(Z=(B&i.childLanes)!==0,ye||Z){if(g=Bn,g!==null){switch(B&-B){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(g.suspendedLanes|B))!==0?0:S,S!==0&&S!==I.retryLane&&(I.retryLane=S,mr(i,S),Fo(g,i,S,-1))}return Op(),g=Te(Error(t(421))),Ed(i,o,B,g)}return S.data==="$?"?(o.flags|=128,o.child=i.child,o=u1.bind(null,i),S._reactRetry=o,null):(i=I.treeContext,fi=To(S.nextSibling),di=o,Er=!0,Pi=null,i!==null&&(vr[os++]=hi,vr[os++]=eo,vr[os++]=dt,hi=i.id,eo=i.overflow,dt=o),o=yp(o,g.children),o.flags|=4096,o)}function Fy(i,o,h){i.lanes|=o;var g=i.alternate;g!==null&&(g.lanes|=o),Bu(i.return,o,h)}function vp(i,o,h,g,S){var I=i.memoizedState;I===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:S}:(I.isBackwards=o,I.rendering=null,I.renderingStartTime=0,I.last=g,I.tail=h,I.tailMode=S)}function By(i,o,h){var g=o.pendingProps,S=g.revealOrder,I=g.tail;if(ke(i,o,g.children,h),g=br.current,(g&2)!==0)g=g&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Fy(i,h,o);else if(i.tag===19)Fy(i,h,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}g&=1}if(cr(br,g),(o.mode&1)===0)o.memoizedState=null;else switch(S){case"forwards":for(h=o.child,S=null;h!==null;)i=h.alternate,i!==null&&Yl(i)===null&&(S=h),h=h.sibling;h=S,h===null?(S=o.child,o.child=null):(S=h.sibling,h.sibling=null),vp(o,!1,S,h,I);break;case"backwards":for(h=null,S=o.child,o.child=null;S!==null;){if(i=S.alternate,i!==null&&Yl(i)===null){o.child=S;break}i=S.sibling,S.sibling=h,h=S,S=i}vp(o,!0,h,null,I);break;case"together":vp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Td(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function dl(i,o,h){if(i!==null&&(o.dependencies=i.dependencies),$u|=o.lanes,(h&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,h=iu(i,i.pendingProps),o.child=h,h.return=o;i.sibling!==null;)i=i.sibling,h=h.sibling=iu(i,i.pendingProps),h.return=o;h.sibling=null}return o.child}function Qw(i,o,h){switch(o.tag){case 3:Sd(o),nl();break;case 5:ul(o);break;case 1:Xn(o.type)&&Vl(o);break;case 4:Uu(o,o.stateNode.containerInfo);break;case 10:var g=o.type._context,S=o.memoizedProps.value;cr(il,g._currentValue),g._currentValue=S;break;case 13:if(g=o.memoizedState,g!==null)return g.dehydrated!==null?(cr(br,br.current&1),o.flags|=128,null):(h&o.child.childLanes)!==0?Ny(i,o,h):(cr(br,br.current&1),i=dl(i,o,h),i!==null?i.sibling:null);cr(br,br.current&1);break;case 19:if(g=(h&o.childLanes)!==0,(i.flags&128)!==0){if(g)return By(i,o,h);o.flags|=128}if(S=o.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),cr(br,br.current),g)break;return null;case 22:case 23:return o.lanes=0,bt(i,o,h)}return dl(i,o,h)}var Uy,_p,jy,Gy;Uy=function(i,o){for(var h=o.child;h!==null;){if(h.tag===5||h.tag===6)i.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},_p=function(){},jy=function(i,o,h,g){var S=i.memoizedProps;if(S!==g){i=o.stateNode,Mo(hs.current);var I=null;switch(h){case"input":S=Bt(i,S),g=Bt(i,g),I=[];break;case"select":S=G({},S,{value:void 0}),g=G({},g,{value:void 0}),I=[];break;case"textarea":S=vi(i,S),g=vi(i,g),I=[];break;default:typeof S.onClick!="function"&&typeof g.onClick=="function"&&(i.onclick=Pu)}ie(h,g);var B;h=null;for(Re in S)if(!g.hasOwnProperty(Re)&&S.hasOwnProperty(Re)&&S[Re]!=null)if(Re==="style"){var Z=S[Re];for(B in Z)Z.hasOwnProperty(B)&&(h||(h={}),h[B]="")}else Re!=="dangerouslySetInnerHTML"&&Re!=="children"&&Re!=="suppressContentEditableWarning"&&Re!=="suppressHydrationWarning"&&Re!=="autoFocus"&&(s.hasOwnProperty(Re)?I||(I=[]):(I=I||[]).push(Re,null));for(Re in g){var ae=g[Re];if(Z=S?.[Re],g.hasOwnProperty(Re)&&ae!==Z&&(ae!=null||Z!=null))if(Re==="style")if(Z){for(B in Z)!Z.hasOwnProperty(B)||ae&&ae.hasOwnProperty(B)||(h||(h={}),h[B]="");for(B in ae)ae.hasOwnProperty(B)&&Z[B]!==ae[B]&&(h||(h={}),h[B]=ae[B])}else h||(I||(I=[]),I.push(Re,h)),h=ae;else Re==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,Z=Z?Z.__html:void 0,ae!=null&&Z!==ae&&(I=I||[]).push(Re,ae)):Re==="children"?typeof ae!="string"&&typeof ae!="number"||(I=I||[]).push(Re,""+ae):Re!=="suppressContentEditableWarning"&&Re!=="suppressHydrationWarning"&&(s.hasOwnProperty(Re)?(ae!=null&&Re==="onScroll"&&xr("scroll",i),I||Z===ae||(I=[])):(I=I||[]).push(Re,ae))}h&&(I=I||[]).push("style",h);var Re=I;(o.updateQueue=Re)&&(o.flags|=4)}},Gy=function(i,o,h,g){h!==g&&(o.flags|=4)};function Fh(i,o){if(!Er)switch(i.tailMode){case"hidden":o=i.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?i.tail=null:h.sibling=null;break;case"collapsed":h=i.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function gi(i){var o=i.alternate!==null&&i.alternate.child===i.child,h=0,g=0;if(o)for(var S=i.child;S!==null;)h|=S.lanes|S.childLanes,g|=S.subtreeFlags&14680064,g|=S.flags&14680064,S.return=i,S=S.sibling;else for(S=i.child;S!==null;)h|=S.lanes|S.childLanes,g|=S.subtreeFlags,g|=S.flags,S.return=i,S=S.sibling;return i.subtreeFlags|=g,i.childLanes=h,o}function Zw(i,o,h){var g=o.pendingProps;switch(Mu(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gi(o),null;case 1:return Xn(o.type)&&Hl(),gi(o),null;case 3:return g=o.stateNode,Ri(),wr(En),wr(un),Ql(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(i===null||i.child===null)&&(Ou(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Pi!==null&&(Rp(Pi),Pi=null))),_p(i,o),gi(o),null;case 5:Rc(o);var S=Mo(Tn.current);if(h=o.type,i!==null&&o.stateNode!=null)jy(i,o,h,g,S),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!g){if(o.stateNode===null)throw Error(t(166));return gi(o),null}if(i=Mo(hs.current),Ou(o)){g=o.stateNode,h=o.type;var I=o.memoizedProps;switch(g[Is]=o,g[Ru]=I,i=(o.mode&1)!==0,h){case"dialog":xr("cancel",g),xr("close",g);break;case"iframe":case"object":case"embed":xr("load",g);break;case"video":case"audio":for(S=0;S<ya.length;S++)xr(ya[S],g);break;case"source":xr("error",g);break;case"img":case"image":case"link":xr("error",g),xr("load",g);break;case"details":xr("toggle",g);break;case"input":ft(g,I),xr("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!I.multiple},xr("invalid",g);break;case"textarea":Hn(g,I),xr("invalid",g)}ie(h,I),S=null;for(var B in I)if(I.hasOwnProperty(B)){var Z=I[B];B==="children"?typeof Z=="string"?g.textContent!==Z&&(I.suppressHydrationWarning!==!0&&Iu(g.textContent,Z,i),S=["children",Z]):typeof Z=="number"&&g.textContent!==""+Z&&(I.suppressHydrationWarning!==!0&&Iu(g.textContent,Z,i),S=["children",""+Z]):s.hasOwnProperty(B)&&Z!=null&&B==="onScroll"&&xr("scroll",g)}switch(h){case"input":at(g),Cr(g,I,!0);break;case"textarea":at(g),Fs(g);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(g.onclick=Pu)}g=S,o.updateQueue=g,g!==null&&(o.flags|=4)}else{B=S.nodeType===9?S:S.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=gn(h)),i==="http://www.w3.org/1999/xhtml"?h==="script"?(i=B.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof g.is=="string"?i=B.createElement(h,{is:g.is}):(i=B.createElement(h),h==="select"&&(B=i,g.multiple?B.multiple=!0:g.size&&(B.size=g.size))):i=B.createElementNS(i,h),i[Is]=o,i[Ru]=g,Uy(i,o,!1,!1),o.stateNode=i;e:{switch(B=Ie(h,g),h){case"dialog":xr("cancel",i),xr("close",i),S=g;break;case"iframe":case"object":case"embed":xr("load",i),S=g;break;case"video":case"audio":for(S=0;S<ya.length;S++)xr(ya[S],i);S=g;break;case"source":xr("error",i),S=g;break;case"img":case"image":case"link":xr("error",i),xr("load",i),S=g;break;case"details":xr("toggle",i),S=g;break;case"input":ft(i,g),S=Bt(i,g),xr("invalid",i);break;case"option":S=g;break;case"select":i._wrapperState={wasMultiple:!!g.multiple},S=G({},g,{value:void 0}),xr("invalid",i);break;case"textarea":Hn(i,g),S=vi(i,g),xr("invalid",i);break;default:S=g}ie(h,S),Z=S;for(I in Z)if(Z.hasOwnProperty(I)){var ae=Z[I];I==="style"?Us(i,ae):I==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,ae!=null&&ei(i,ae)):I==="children"?typeof ae=="string"?(h!=="textarea"||ae!=="")&&_i(i,ae):typeof ae=="number"&&_i(i,""+ae):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(s.hasOwnProperty(I)?ae!=null&&I==="onScroll"&&xr("scroll",i):ae!=null&&z(i,I,ae,B))}switch(h){case"input":at(i),Cr(i,g,!1);break;case"textarea":at(i),Fs(i);break;case"option":g.value!=null&&i.setAttribute("value",""+Ke(g.value));break;case"select":i.multiple=!!g.multiple,I=g.value,I!=null?dr(i,!!g.multiple,I,!1):g.defaultValue!=null&&dr(i,!!g.multiple,g.defaultValue,!0);break;default:typeof S.onClick=="function"&&(i.onclick=Pu)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return gi(o),null;case 6:if(i&&o.stateNode!=null)Gy(i,o,i.memoizedProps,g);else{if(typeof g!="string"&&o.stateNode===null)throw Error(t(166));if(h=Mo(Tn.current),Mo(hs.current),Ou(o)){if(g=o.stateNode,h=o.memoizedProps,g[Is]=o,(I=g.nodeValue!==h)&&(i=di,i!==null))switch(i.tag){case 3:Iu(g.nodeValue,h,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Iu(g.nodeValue,h,(i.mode&1)!==0)}I&&(o.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[Is]=o,o.stateNode=g}return gi(o),null;case 13:if(wr(br),g=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Er&&fi!==null&&(o.mode&1)!==0&&(o.flags&128)===0)us(),nl(),o.flags|=98560,I=!1;else if(I=Ou(o),g!==null&&g.dehydrated!==null){if(i===null){if(!I)throw Error(t(318));if(I=o.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(t(317));I[Is]=o}else nl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;gi(o),I=!1}else Pi!==null&&(Rp(Pi),Pi=null),I=!0;if(!I)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=h,o):(g=g!==null,g!==(i!==null&&i.memoizedState!==null)&&g&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(br.current&1)!==0?Cn===0&&(Cn=3):Op())),o.updateQueue!==null&&(o.flags|=4),gi(o),null);case 4:return Ri(),_p(i,o),i===null&&Nl(o.stateNode.containerInfo),gi(o),null;case 10:return Fu(o.type._context),gi(o),null;case 17:return Xn(o.type)&&Hl(),gi(o),null;case 19:if(wr(br),I=o.memoizedState,I===null)return gi(o),null;if(g=(o.flags&128)!==0,B=I.rendering,B===null)if(g)Fh(I,!1);else{if(Cn!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(B=Yl(i),B!==null){for(o.flags|=128,Fh(I,!1),g=B.updateQueue,g!==null&&(o.updateQueue=g,o.flags|=4),o.subtreeFlags=0,g=h,h=o.child;h!==null;)I=h,i=g,I.flags&=14680066,B=I.alternate,B===null?(I.childLanes=0,I.lanes=i,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=B.childLanes,I.lanes=B.lanes,I.child=B.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=B.memoizedProps,I.memoizedState=B.memoizedState,I.updateQueue=B.updateQueue,I.type=B.type,i=B.dependencies,I.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),h=h.sibling;return cr(br,br.current&1|2),o.child}i=i.sibling}I.tail!==null&&nr()>Uc&&(o.flags|=128,g=!0,Fh(I,!1),o.lanes=4194304)}else{if(!g)if(i=Yl(B),i!==null){if(o.flags|=128,g=!0,h=i.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),Fh(I,!0),I.tail===null&&I.tailMode==="hidden"&&!B.alternate&&!Er)return gi(o),null}else 2*nr()-I.renderingStartTime>Uc&&h!==1073741824&&(o.flags|=128,g=!0,Fh(I,!1),o.lanes=4194304);I.isBackwards?(B.sibling=o.child,o.child=B):(h=I.last,h!==null?h.sibling=B:o.child=B,I.last=B)}return I.tail!==null?(o=I.tail,I.rendering=o,I.tail=o.sibling,I.renderingStartTime=nr(),o.sibling=null,h=br.current,cr(br,g?h&1|2:h&1),o):(gi(o),null);case 22:case 23:return Mp(),g=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==g&&(o.flags|=8192),g&&(o.mode&1)!==0?(Os&1073741824)!==0&&(gi(o),o.subtreeFlags&6&&(o.flags|=8192)):gi(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function Jw(i,o){switch(Mu(o),o.tag){case 1:return Xn(o.type)&&Hl(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Ri(),wr(En),wr(un),Ql(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Rc(o),null;case 13:if(wr(br),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));nl()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return wr(br),null;case 4:return Ri(),null;case 10:return Fu(o.type._context),null;case 22:case 23:return Mp(),null;case 24:return null;default:return null}}var Ad=!1,yi=!1,e1=typeof WeakSet=="function"?WeakSet:Set,vt=null;function Fc(i,o){var h=i.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){Zr(i,o,g)}else h.current=null}function xp(i,o,h){try{h()}catch(g){Zr(i,o,g)}}var zy=!1;function t1(i,o){if(Ul=Mn,i=re(),ee(i)){if("selectionStart"in i)var h={start:i.selectionStart,end:i.selectionEnd};else e:{h=(h=i.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var S=g.anchorOffset,I=g.focusNode;g=g.focusOffset;try{h.nodeType,I.nodeType}catch{h=null;break e}var B=0,Z=-1,ae=-1,Re=0,We=0,Ye=i,Ve=null;t:for(;;){for(var pt;Ye!==h||S!==0&&Ye.nodeType!==3||(Z=B+S),Ye!==I||g!==0&&Ye.nodeType!==3||(ae=B+g),Ye.nodeType===3&&(B+=Ye.nodeValue.length),(pt=Ye.firstChild)!==null;)Ve=Ye,Ye=pt;for(;;){if(Ye===i)break t;if(Ve===h&&++Re===S&&(Z=B),Ve===I&&++We===g&&(ae=B),(pt=Ye.nextSibling)!==null)break;Ye=Ve,Ve=Ye.parentNode}Ye=pt}h=Z===-1||ae===-1?null:{start:Z,end:ae}}else h=null}h=h||{start:0,end:0}}else h=null;for(gh={focusedElem:i,selectionRange:h},Mn=!1,vt=o;vt!==null;)if(o=vt,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,vt=i;else for(;vt!==null;){o=vt;try{var wt=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(wt!==null){var St=wt.memoizedProps,dn=wt.memoizedState,be=o.stateNode,de=be.getSnapshotBeforeUpdate(o.elementType===o.type?St:l(o.type,St),dn);be.__reactInternalSnapshotBeforeUpdate=de}break;case 3:var Ce=o.stateNode.containerInfo;Ce.nodeType===1?Ce.textContent="":Ce.nodeType===9&&Ce.documentElement&&Ce.removeChild(Ce.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(nt){Zr(o,o.return,nt)}if(i=o.sibling,i!==null){i.return=o.return,vt=i;break}vt=o.return}return wt=zy,zy=!1,wt}function Bh(i,o,h){var g=o.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var S=g=g.next;do{if((S.tag&i)===i){var I=S.destroy;S.destroy=void 0,I!==void 0&&xp(o,h,I)}S=S.next}while(S!==g)}}function Cd(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var h=o=o.next;do{if((h.tag&i)===i){var g=h.create;h.destroy=g()}h=h.next}while(h!==o)}}function wp(i){var o=i.ref;if(o!==null){var h=i.stateNode;i.tag,i=h,typeof o=="function"?o(i):o.current=i}}function Hy(i){var o=i.alternate;o!==null&&(i.alternate=null,Hy(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Is],delete o[Ru],delete o[Ln],delete o[gd],delete o[yd])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Vy(i){return i.tag===5||i.tag===3||i.tag===4}function Wy(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Vy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function bp(i,o,h){var g=i.tag;if(g===5||g===6)i=i.stateNode,o?h.nodeType===8?h.parentNode.insertBefore(i,o):h.insertBefore(i,o):(h.nodeType===8?(o=h.parentNode,o.insertBefore(i,h)):(o=h,o.appendChild(i)),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=Pu));else if(g!==4&&(i=i.child,i!==null))for(bp(i,o,h),i=i.sibling;i!==null;)bp(i,o,h),i=i.sibling}function Sp(i,o,h){var g=i.tag;if(g===5||g===6)i=i.stateNode,o?h.insertBefore(i,o):h.appendChild(i);else if(g!==4&&(i=i.child,i!==null))for(Sp(i,o,h),i=i.sibling;i!==null;)Sp(i,o,h),i=i.sibling}var Kn=null,Lo=!1;function Jl(i,o,h){for(h=h.child;h!==null;)$y(i,o,h),h=h.sibling}function $y(i,o,h){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(oi,h)}catch{}switch(h.tag){case 5:yi||Fc(h,o);case 6:var g=Kn,S=Lo;Kn=null,Jl(i,o,h),Kn=g,Lo=S,Kn!==null&&(Lo?(i=Kn,h=h.stateNode,i.nodeType===8?i.parentNode.removeChild(h):i.removeChild(h)):Kn.removeChild(h.stateNode));break;case 18:Kn!==null&&(Lo?(i=Kn,h=h.stateNode,i.nodeType===8?Ec(i.parentNode,h):i.nodeType===1&&Ec(i,h),Ti(i)):Ec(Kn,h.stateNode));break;case 4:g=Kn,S=Lo,Kn=h.stateNode.containerInfo,Lo=!0,Jl(i,o,h),Kn=g,Lo=S;break;case 0:case 11:case 14:case 15:if(!yi&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){S=g=g.next;do{var I=S,B=I.destroy;I=I.tag,B!==void 0&&((I&2)!==0||(I&4)!==0)&&xp(h,o,B),S=S.next}while(S!==g)}Jl(i,o,h);break;case 1:if(!yi&&(Fc(h,o),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(Z){Zr(h,o,Z)}Jl(i,o,h);break;case 21:Jl(i,o,h);break;case 22:h.mode&1?(yi=(g=yi)||h.memoizedState!==null,Jl(i,o,h),yi=g):Jl(i,o,h);break;default:Jl(i,o,h)}}function qy(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var h=i.stateNode;h===null&&(h=i.stateNode=new e1),o.forEach(function(g){var S=c1.bind(null,i,g);h.has(g)||(h.add(g),g.then(S,S))})}}function No(i,o){var h=o.deletions;if(h!==null)for(var g=0;g<h.length;g++){var S=h[g];try{var I=i,B=o,Z=B;e:for(;Z!==null;){switch(Z.tag){case 5:Kn=Z.stateNode,Lo=!1;break e;case 3:Kn=Z.stateNode.containerInfo,Lo=!0;break e;case 4:Kn=Z.stateNode.containerInfo,Lo=!0;break e}Z=Z.return}if(Kn===null)throw Error(t(160));$y(I,B,S),Kn=null,Lo=!1;var ae=S.alternate;ae!==null&&(ae.return=null),S.return=null}catch(Re){Zr(S,o,Re)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Xy(o,i),o=o.sibling}function Xy(i,o){var h=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(No(o,i),Aa(i),g&4){try{Bh(3,i,i.return),Cd(3,i)}catch(St){Zr(i,i.return,St)}try{Bh(5,i,i.return)}catch(St){Zr(i,i.return,St)}}break;case 1:No(o,i),Aa(i),g&512&&h!==null&&Fc(h,h.return);break;case 5:if(No(o,i),Aa(i),g&512&&h!==null&&Fc(h,h.return),i.flags&32){var S=i.stateNode;try{_i(S,"")}catch(St){Zr(i,i.return,St)}}if(g&4&&(S=i.stateNode,S!=null)){var I=i.memoizedProps,B=h!==null?h.memoizedProps:I,Z=i.type,ae=i.updateQueue;if(i.updateQueue=null,ae!==null)try{Z==="input"&&I.type==="radio"&&I.name!=null&&_t(S,I),Ie(Z,B);var Re=Ie(Z,I);for(B=0;B<ae.length;B+=2){var We=ae[B],Ye=ae[B+1];We==="style"?Us(S,Ye):We==="dangerouslySetInnerHTML"?ei(S,Ye):We==="children"?_i(S,Ye):z(S,We,Ye,Re)}switch(Z){case"input":gr(S,I);break;case"textarea":Pn(S,I);break;case"select":var Ve=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!I.multiple;var pt=I.value;pt!=null?dr(S,!!I.multiple,pt,!1):Ve!==!!I.multiple&&(I.defaultValue!=null?dr(S,!!I.multiple,I.defaultValue,!0):dr(S,!!I.multiple,I.multiple?[]:"",!1))}S[Ru]=I}catch(St){Zr(i,i.return,St)}}break;case 6:if(No(o,i),Aa(i),g&4){if(i.stateNode===null)throw Error(t(162));S=i.stateNode,I=i.memoizedProps;try{S.nodeValue=I}catch(St){Zr(i,i.return,St)}}break;case 3:if(No(o,i),Aa(i),g&4&&h!==null&&h.memoizedState.isDehydrated)try{Ti(o.containerInfo)}catch(St){Zr(i,i.return,St)}break;case 4:No(o,i),Aa(i);break;case 13:No(o,i),Aa(i),S=i.child,S.flags&8192&&(I=S.memoizedState!==null,S.stateNode.isHidden=I,!I||S.alternate!==null&&S.alternate.memoizedState!==null||(Ap=nr())),g&4&&qy(i);break;case 22:if(We=h!==null&&h.memoizedState!==null,i.mode&1?(yi=(Re=yi)||We,No(o,i),yi=Re):No(o,i),Aa(i),g&8192){if(Re=i.memoizedState!==null,(i.stateNode.isHidden=Re)&&!We&&(i.mode&1)!==0)for(vt=i,We=i.child;We!==null;){for(Ye=vt=We;vt!==null;){switch(Ve=vt,pt=Ve.child,Ve.tag){case 0:case 11:case 14:case 15:Bh(4,Ve,Ve.return);break;case 1:Fc(Ve,Ve.return);var wt=Ve.stateNode;if(typeof wt.componentWillUnmount=="function"){g=Ve,h=Ve.return;try{o=g,wt.props=o.memoizedProps,wt.state=o.memoizedState,wt.componentWillUnmount()}catch(St){Zr(g,h,St)}}break;case 5:Fc(Ve,Ve.return);break;case 22:if(Ve.memoizedState!==null){Qy(Ye);continue}}pt!==null?(pt.return=Ve,vt=pt):Qy(Ye)}We=We.sibling}e:for(We=null,Ye=i;;){if(Ye.tag===5){if(We===null){We=Ye;try{S=Ye.stateNode,Re?(I=S.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(Z=Ye.stateNode,ae=Ye.memoizedProps.style,B=ae!=null&&ae.hasOwnProperty("display")?ae.display:null,Z.style.display=mo("display",B))}catch(St){Zr(i,i.return,St)}}}else if(Ye.tag===6){if(We===null)try{Ye.stateNode.nodeValue=Re?"":Ye.memoizedProps}catch(St){Zr(i,i.return,St)}}else if((Ye.tag!==22&&Ye.tag!==23||Ye.memoizedState===null||Ye===i)&&Ye.child!==null){Ye.child.return=Ye,Ye=Ye.child;continue}if(Ye===i)break e;for(;Ye.sibling===null;){if(Ye.return===null||Ye.return===i)break e;We===Ye&&(We=null),Ye=Ye.return}We===Ye&&(We=null),Ye.sibling.return=Ye.return,Ye=Ye.sibling}}break;case 19:No(o,i),Aa(i),g&4&&qy(i);break;case 21:break;default:No(o,i),Aa(i)}}function Aa(i){var o=i.flags;if(o&2){try{e:{for(var h=i.return;h!==null;){if(Vy(h)){var g=h;break e}h=h.return}throw Error(t(160))}switch(g.tag){case 5:var S=g.stateNode;g.flags&32&&(_i(S,""),g.flags&=-33);var I=Wy(i);Sp(i,I,S);break;case 3:case 4:var B=g.stateNode.containerInfo,Z=Wy(i);bp(i,Z,B);break;default:throw Error(t(161))}}catch(ae){Zr(i,i.return,ae)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function r1(i,o,h){vt=i,Ky(i)}function Ky(i,o,h){for(var g=(i.mode&1)!==0;vt!==null;){var S=vt,I=S.child;if(S.tag===22&&g){var B=S.memoizedState!==null||Ad;if(!B){var Z=S.alternate,ae=Z!==null&&Z.memoizedState!==null||yi;Z=Ad;var Re=yi;if(Ad=B,(yi=ae)&&!Re)for(vt=S;vt!==null;)B=vt,ae=B.child,B.tag===22&&B.memoizedState!==null?Zy(S):ae!==null?(ae.return=B,vt=ae):Zy(S);for(;I!==null;)vt=I,Ky(I),I=I.sibling;vt=S,Ad=Z,yi=Re}Yy(i)}else(S.subtreeFlags&8772)!==0&&I!==null?(I.return=S,vt=I):Yy(i)}}function Yy(i){for(;vt!==null;){var o=vt;if((o.flags&8772)!==0){var h=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:yi||Cd(5,o);break;case 1:var g=o.stateNode;if(o.flags&4&&!yi)if(h===null)g.componentDidMount();else{var S=o.elementType===o.type?h.memoizedProps:l(o.type,h.memoizedProps);g.componentDidUpdate(S,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var I=o.updateQueue;I!==null&&Sa(o,I,g);break;case 3:var B=o.updateQueue;if(B!==null){if(h=null,o.child!==null)switch(o.child.tag){case 5:h=o.child.stateNode;break;case 1:h=o.child.stateNode}Sa(o,B,h)}break;case 5:var Z=o.stateNode;if(h===null&&o.flags&4){h=Z;var ae=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":ae.autoFocus&&h.focus();break;case"img":ae.src&&(h.src=ae.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Re=o.alternate;if(Re!==null){var We=Re.memoizedState;if(We!==null){var Ye=We.dehydrated;Ye!==null&&Ti(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}yi||o.flags&512&&wp(o)}catch(Ve){Zr(o,o.return,Ve)}}if(o===i){vt=null;break}if(h=o.sibling,h!==null){h.return=o.return,vt=h;break}vt=o.return}}function Qy(i){for(;vt!==null;){var o=vt;if(o===i){vt=null;break}var h=o.sibling;if(h!==null){h.return=o.return,vt=h;break}vt=o.return}}function Zy(i){for(;vt!==null;){var o=vt;try{switch(o.tag){case 0:case 11:case 15:var h=o.return;try{Cd(4,o)}catch(ae){Zr(o,h,ae)}break;case 1:var g=o.stateNode;if(typeof g.componentDidMount=="function"){var S=o.return;try{g.componentDidMount()}catch(ae){Zr(o,S,ae)}}var I=o.return;try{wp(o)}catch(ae){Zr(o,I,ae)}break;case 5:var B=o.return;try{wp(o)}catch(ae){Zr(o,B,ae)}}}catch(ae){Zr(o,o.return,ae)}if(o===i){vt=null;break}var Z=o.sibling;if(Z!==null){Z.return=o.return,vt=Z;break}vt=o.return}}var n1=Math.ceil,Id=J.ReactCurrentDispatcher,Ep=J.ReactCurrentOwner,io=J.ReactCurrentBatchConfig,ar=0,Bn=null,xn=null,Yn=0,Os=0,Bc=Ao(0),Cn=0,Uh=null,$u=0,Pd=0,Tp=0,jh=null,fs=null,Ap=0,Uc=1/0,fl=null,Rd=!1,Cp=null,eu=null,kd=!1,tu=null,Md=0,Gh=0,Ip=null,Od=-1,Dd=0;function Oi(){return(ar&6)!==0?nr():Od!==-1?Od:Od=nr()}function ru(i){return(i.mode&1)===0?1:(ar&2)!==0&&Yn!==0?Yn&-Yn:hp.transition!==null?(Dd===0&&(Dd=sn()),Dd):(i=$t,i!==0||(i=window.event,i=i===void 0?16:vn(i.type)),i)}function Fo(i,o,h,g){if(50<Gh)throw Gh=0,Ip=null,Error(t(185));_o(i,h,g),((ar&2)===0||i!==Bn)&&(i===Bn&&((ar&2)===0&&(Pd|=h),Cn===4&&nu(i,Yn)),ps(i,g),h===1&&ar===0&&(o.mode&1)===0&&(Uc=nr()+500,ns&&ss()))}function ps(i,o){var h=i.callbackNode;zs(i,o);var g=Jo(i,i===Bn?Yn:0);if(g===0)h!==null&&go(h),i.callbackNode=null,i.callbackPriority=0;else if(o=g&-g,i.callbackPriority!==o){if(h!=null&&go(h),o===1)i.tag===0?vd(ev.bind(null,i)):Sh(ev.bind(null,i)),_h(function(){(ar&6)===0&&ss()}),h=null;else{switch(ra(g)){case 1:h=ji;break;case 4:h=vo;break;case 16:h=Zo;break;case 536870912:h=$n;break;default:h=Zo}h=lv(h,Jy.bind(null,i))}i.callbackPriority=o,i.callbackNode=h}}function Jy(i,o){if(Od=-1,Dd=0,(ar&6)!==0)throw Error(t(327));var h=i.callbackNode;if(jc()&&i.callbackNode!==h)return null;var g=Jo(i,i===Bn?Yn:0);if(g===0)return null;if((g&30)!==0||(g&i.expiredLanes)!==0||o)o=Ld(i,g);else{o=g;var S=ar;ar|=2;var I=rv();(Bn!==i||Yn!==o)&&(fl=null,Uc=nr()+500,Xu(i,o));do try{o1();break}catch(Z){tv(i,Z)}while(!0);Nu(),Id.current=I,ar=S,xn!==null?o=0:(Bn=null,Yn=0,o=Cn)}if(o!==0){if(o===2&&(S=Hs(i),S!==0&&(g=S,o=Pp(i,S))),o===1)throw h=Uh,Xu(i,0),nu(i,g),ps(i,nr()),h;if(o===6)nu(i,g);else{if(S=i.current.alternate,(g&30)===0&&!i1(S)&&(o=Ld(i,g),o===2&&(I=Hs(i),I!==0&&(g=I,o=Pp(i,I))),o===1))throw h=Uh,Xu(i,0),nu(i,g),ps(i,nr()),h;switch(i.finishedWork=S,i.finishedLanes=g,o){case 0:case 1:throw Error(t(345));case 2:Ku(i,fs,fl);break;case 3:if(nu(i,g),(g&130023424)===g&&(o=Ap+500-nr(),10<o)){if(Jo(i,0)!==0)break;if(S=i.suspendedLanes,(S&g)!==g){Oi(),i.pingedLanes|=i.suspendedLanes&S;break}i.timeoutHandle=vh(Ku.bind(null,i,fs,fl),o);break}Ku(i,fs,fl);break;case 4:if(nu(i,g),(g&4194240)===g)break;for(o=i.eventTimes,S=-1;0<g;){var B=31-Rt(g);I=1<<B,B=o[B],B>S&&(S=B),g&=~I}if(g=S,g=nr()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*n1(g/1960))-g,10<g){i.timeoutHandle=vh(Ku.bind(null,i,fs,fl),g);break}Ku(i,fs,fl);break;case 5:Ku(i,fs,fl);break;default:throw Error(t(329))}}}return ps(i,nr()),i.callbackNode===h?Jy.bind(null,i):null}function Pp(i,o){var h=jh;return i.current.memoizedState.isDehydrated&&(Xu(i,o).flags|=256),i=Ld(i,o),i!==2&&(o=fs,fs=h,o!==null&&Rp(o)),i}function Rp(i){fs===null?fs=i:fs.push.apply(fs,i)}function i1(i){for(var o=i;;){if(o.flags&16384){var h=o.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var S=h[g],I=S.getSnapshot;S=S.value;try{if(!me(I(),S))return!1}catch{return!1}}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function nu(i,o){for(o&=~Tp,o&=~Pd,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var h=31-Rt(o),g=1<<h;i[h]=-1,o&=~g}}function ev(i){if((ar&6)!==0)throw Error(t(327));jc();var o=Jo(i,0);if((o&1)===0)return ps(i,nr()),null;var h=Ld(i,o);if(i.tag!==0&&h===2){var g=Hs(i);g!==0&&(o=g,h=Pp(i,g))}if(h===1)throw h=Uh,Xu(i,0),nu(i,o),ps(i,nr()),h;if(h===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Ku(i,fs,fl),ps(i,nr()),null}function kp(i,o){var h=ar;ar|=1;try{return i(o)}finally{ar=h,ar===0&&(Uc=nr()+500,ns&&ss())}}function qu(i){tu!==null&&tu.tag===0&&(ar&6)===0&&jc();var o=ar;ar|=1;var h=io.transition,g=$t;try{if(io.transition=null,$t=1,i)return i()}finally{$t=g,io.transition=h,ar=o,(ar&6)===0&&ss()}}function Mp(){Os=Bc.current,wr(Bc)}function Xu(i,o){i.finishedWork=null,i.finishedLanes=0;var h=i.timeoutHandle;if(h!==-1&&(i.timeoutHandle=-1,jl(h)),xn!==null)for(h=xn.return;h!==null;){var g=h;switch(Mu(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Hl();break;case 3:Ri(),wr(En),wr(un),Ql();break;case 5:Rc(g);break;case 4:Ri();break;case 13:wr(br);break;case 19:wr(br);break;case 10:Fu(g.type._context);break;case 22:case 23:Mp()}h=h.return}if(Bn=i,xn=i=iu(i.current,null),Yn=Os=o,Cn=0,Uh=null,Tp=Pd=$u=0,fs=jh=null,ll!==null){for(o=0;o<ll.length;o++)if(h=ll[o],g=h.interleaved,g!==null){h.interleaved=null;var S=g.next,I=h.pending;if(I!==null){var B=I.next;I.next=S,g.next=B}h.pending=g}ll=null}return i}function tv(i,o){do{var h=xn;try{if(Nu(),Ps.current=Wu,cn){for(var g=Ar.memoizedState;g!==null;){var S=g.queue;S!==null&&(S.pending=null),g=g.next}cn=!1}if(Rs=0,Vr=jr=Ar=null,ds=!1,Fn=0,Ep.current=null,h===null||h.return===null){Cn=1,Uh=o,xn=null;break}e:{var I=i,B=h.return,Z=h,ae=o;if(o=Yn,Z.flags|=32768,ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var Re=ae,We=Z,Ye=We.tag;if((We.mode&1)===0&&(Ye===0||Ye===11||Ye===15)){var Ve=We.alternate;Ve?(We.updateQueue=Ve.updateQueue,We.memoizedState=Ve.memoizedState,We.lanes=Ve.lanes):(We.updateQueue=null,We.memoizedState=null)}var pt=xt(B);if(pt!==null){pt.flags&=-257,Ht(pt,B,Z,I,o),pt.mode&1&&Ze(I,Re,o),o=pt,ae=Re;var wt=o.updateQueue;if(wt===null){var St=new Set;St.add(ae),o.updateQueue=St}else wt.add(ae);break e}else{if((o&1)===0){Ze(I,Re,o),Op();break e}ae=Error(t(426))}}else if(Er&&Z.mode&1){var dn=xt(B);if(dn!==null){(dn.flags&65536)===0&&(dn.flags|=256),Ht(dn,B,Z,I,o),cs(ce(ae,Z));break e}}I=ae=ce(ae,Z),Cn!==4&&(Cn=2),jh===null?jh=[I]:jh.push(I),I=B;do{switch(I.tag){case 3:I.flags|=65536,o&=-o,I.lanes|=o;var be=lt(I,ae,o);Qr(I,be);break e;case 1:Z=ae;var de=I.type,Ce=I.stateNode;if((I.flags&128)===0&&(typeof de.getDerivedStateFromError=="function"||Ce!==null&&typeof Ce.componentDidCatch=="function"&&(eu===null||!eu.has(Ce)))){I.flags|=65536,o&=-o,I.lanes|=o;var nt=Be(I,Z,o);Qr(I,nt);break e}}I=I.return}while(I!==null)}iv(h)}catch(Tt){o=Tt,xn===h&&h!==null&&(xn=h=h.return);continue}break}while(!0)}function rv(){var i=Id.current;return Id.current=Wu,i===null?Wu:i}function Op(){(Cn===0||Cn===3||Cn===2)&&(Cn=4),Bn===null||($u&268435455)===0&&(Pd&268435455)===0||nu(Bn,Yn)}function Ld(i,o){var h=ar;ar|=2;var g=rv();(Bn!==i||Yn!==o)&&(fl=null,Xu(i,o));do try{s1();break}catch(S){tv(i,S)}while(!0);if(Nu(),ar=h,Id.current=g,xn!==null)throw Error(t(261));return Bn=null,Yn=0,Cn}function s1(){for(;xn!==null;)nv(xn)}function o1(){for(;xn!==null&&!Or();)nv(xn)}function nv(i){var o=av(i.alternate,i,Os);i.memoizedProps=i.pendingProps,o===null?iv(i):xn=o,Ep.current=null}function iv(i){var o=i;do{var h=o.alternate;if(i=o.return,(o.flags&32768)===0){if(h=Zw(h,o,Os),h!==null){xn=h;return}}else{if(h=Jw(h,o),h!==null){h.flags&=32767,xn=h;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Cn=6,xn=null;return}}if(o=o.sibling,o!==null){xn=o;return}xn=o=i}while(o!==null);Cn===0&&(Cn=5)}function Ku(i,o,h){var g=$t,S=io.transition;try{io.transition=null,$t=1,a1(i,o,h,g)}finally{io.transition=S,$t=g}return null}function a1(i,o,h,g){do jc();while(tu!==null);if((ar&6)!==0)throw Error(t(327));h=i.finishedWork;var S=i.finishedLanes;if(h===null)return null;if(i.finishedWork=null,i.finishedLanes=0,h===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var I=h.lanes|h.childLanes;if(ea(i,I),i===Bn&&(xn=Bn=null,Yn=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||kd||(kd=!0,lv(Zo,function(){return jc(),null})),I=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||I){I=io.transition,io.transition=null;var B=$t;$t=1;var Z=ar;ar|=4,Ep.current=null,t1(i,h),Xy(h,i),xe(gh),Mn=!!Ul,gh=Ul=null,i.current=h,r1(h),yo(),ar=Z,$t=B,io.transition=I}else i.current=h;if(kd&&(kd=!1,tu=i,Md=S),I=i.pendingLanes,I===0&&(eu=null),fr(h.stateNode),ps(i,nr()),o!==null)for(g=i.onRecoverableError,h=0;h<o.length;h++)S=o[h],g(S.value,{componentStack:S.stack,digest:S.digest});if(Rd)throw Rd=!1,i=Cp,Cp=null,i;return(Md&1)!==0&&i.tag!==0&&jc(),I=i.pendingLanes,(I&1)!==0?i===Ip?Gh++:(Gh=0,Ip=i):Gh=0,ss(),null}function jc(){if(tu!==null){var i=ra(Md),o=io.transition,h=$t;try{if(io.transition=null,$t=16>i?16:i,tu===null)var g=!1;else{if(i=tu,tu=null,Md=0,(ar&6)!==0)throw Error(t(331));var S=ar;for(ar|=4,vt=i.current;vt!==null;){var I=vt,B=I.child;if((vt.flags&16)!==0){var Z=I.deletions;if(Z!==null){for(var ae=0;ae<Z.length;ae++){var Re=Z[ae];for(vt=Re;vt!==null;){var We=vt;switch(We.tag){case 0:case 11:case 15:Bh(8,We,I)}var Ye=We.child;if(Ye!==null)Ye.return=We,vt=Ye;else for(;vt!==null;){We=vt;var Ve=We.sibling,pt=We.return;if(Hy(We),We===Re){vt=null;break}if(Ve!==null){Ve.return=pt,vt=Ve;break}vt=pt}}}var wt=I.alternate;if(wt!==null){var St=wt.child;if(St!==null){wt.child=null;do{var dn=St.sibling;St.sibling=null,St=dn}while(St!==null)}}vt=I}}if((I.subtreeFlags&2064)!==0&&B!==null)B.return=I,vt=B;else e:for(;vt!==null;){if(I=vt,(I.flags&2048)!==0)switch(I.tag){case 0:case 11:case 15:Bh(9,I,I.return)}var be=I.sibling;if(be!==null){be.return=I.return,vt=be;break e}vt=I.return}}var de=i.current;for(vt=de;vt!==null;){B=vt;var Ce=B.child;if((B.subtreeFlags&2064)!==0&&Ce!==null)Ce.return=B,vt=Ce;else e:for(B=de;vt!==null;){if(Z=vt,(Z.flags&2048)!==0)try{switch(Z.tag){case 0:case 11:case 15:Cd(9,Z)}}catch(Tt){Zr(Z,Z.return,Tt)}if(Z===B){vt=null;break e}var nt=Z.sibling;if(nt!==null){nt.return=Z.return,vt=nt;break e}vt=Z.return}}if(ar=S,ss(),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(oi,i)}catch{}g=!0}return g}finally{$t=h,io.transition=o}}return!1}function sv(i,o,h){o=ce(h,o),o=lt(i,o,1),i=Yr(i,o,1),o=Oi(),i!==null&&(_o(i,1,o),ps(i,o))}function Zr(i,o,h){if(i.tag===3)sv(i,i,h);else for(;o!==null;){if(o.tag===3){sv(o,i,h);break}else if(o.tag===1){var g=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(eu===null||!eu.has(g))){i=ce(h,i),i=Be(o,i,1),o=Yr(o,i,1),i=Oi(),o!==null&&(_o(o,1,i),ps(o,i));break}}o=o.return}}function l1(i,o,h){var g=i.pingCache;g!==null&&g.delete(o),o=Oi(),i.pingedLanes|=i.suspendedLanes&h,Bn===i&&(Yn&h)===h&&(Cn===4||Cn===3&&(Yn&130023424)===Yn&&500>nr()-Ap?Xu(i,0):Tp|=h),ps(i,o)}function ov(i,o){o===0&&((i.mode&1)===0?o=1:(o=nn,nn<<=1,(nn&130023424)===0&&(nn=4194304)));var h=Oi();i=mr(i,o),i!==null&&(_o(i,o,h),ps(i,h))}function u1(i){var o=i.memoizedState,h=0;o!==null&&(h=o.retryLane),ov(i,h)}function c1(i,o){var h=0;switch(i.tag){case 13:var g=i.stateNode,S=i.memoizedState;S!==null&&(h=S.retryLane);break;case 19:g=i.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(o),ov(i,h)}var av;av=function(i,o,h){if(i!==null)if(i.memoizedProps!==o.pendingProps||En.current)ye=!0;else{if((i.lanes&h)===0&&(o.flags&128)===0)return ye=!1,Qw(i,o,h);ye=(i.flags&131072)!==0}else ye=!1,Er&&(o.flags&1048576)!==0&&$l(o,rl,o.index);switch(o.lanes=0,o.tag){case 2:var g=o.type;Td(i,o),i=o.pendingProps;var S=xa(o,un.current);al(o,h),S=Gu(null,o,g,i,S,h);var I=ro();return o.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Xn(g)?(I=!0,Vl(o)):I=!1,o.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Kr(o),S.updater=_,o.stateNode=S,S._reactInternals=o,$(o,g,i,h),o=no(null,o,g,!0,I,h)):(o.tag=0,Er&&I&&ql(o),ke(null,o,S,h),o=o.child),o;case 16:g=o.elementType;e:{switch(Td(i,o),i=o.pendingProps,S=g._init,g=S(g._payload),o.type=g,S=o.tag=d1(g),i=l(g,i),S){case 0:o=hn(null,o,g,i,h);break e;case 1:o=or(null,o,g,i,h);break e;case 11:o=$e(null,o,g,i,h);break e;case 14:o=It(null,o,g,l(g.type,i),h);break e}throw Error(t(306,g,""))}return o;case 0:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:l(g,S),hn(i,o,g,S,h);case 1:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:l(g,S),or(i,o,g,S,h);case 3:e:{if(Sd(o),i===null)throw Error(t(387));g=o.pendingProps,I=o.memoizedState,S=I.element,Hr(i,o),ba(o,g,null,h);var B=o.memoizedState;if(g=B.element,I.isDehydrated)if(I={element:g,isDehydrated:!1,cache:B.cache,pendingSuspenseBoundaries:B.pendingSuspenseBoundaries,transitions:B.transitions},o.updateQueue.baseState=I,o.memoizedState=I,o.flags&256){S=ce(Error(t(423)),o),o=Ly(i,o,g,h,S);break e}else if(g!==S){S=ce(Error(t(424)),o),o=Ly(i,o,g,h,S);break e}else for(fi=To(o.stateNode.containerInfo.firstChild),di=o,Er=!0,Pi=null,h=Lu(o,null,g,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(nl(),g===S){o=dl(i,o,h);break e}ke(i,o,g,h)}o=o.child}return o;case 5:return ul(o),i===null&&ls(o),g=o.type,S=o.pendingProps,I=i!==null?i.memoizedProps:null,B=S.children,yh(g,S)?B=null:I!==null&&yh(g,I)&&(o.flags|=32),tr(i,o),ke(i,o,B,h),o.child;case 6:return i===null&&ls(o),null;case 13:return Ny(i,o,h);case 4:return Uu(o,o.stateNode.containerInfo),g=o.pendingProps,i===null?o.child=Io(o,null,g,h):ke(i,o,g,h),o.child;case 11:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:l(g,S),$e(i,o,g,S,h);case 7:return ke(i,o,o.pendingProps,h),o.child;case 8:return ke(i,o,o.pendingProps.children,h),o.child;case 12:return ke(i,o,o.pendingProps.children,h),o.child;case 10:e:{if(g=o.type._context,S=o.pendingProps,I=o.memoizedProps,B=S.value,cr(il,g._currentValue),g._currentValue=B,I!==null)if(me(I.value,B)){if(I.children===S.children&&!En.current){o=dl(i,o,h);break e}}else for(I=o.child,I!==null&&(I.return=o);I!==null;){var Z=I.dependencies;if(Z!==null){B=I.child;for(var ae=Z.firstContext;ae!==null;){if(ae.context===g){if(I.tag===1){ae=Tr(-1,h&-h),ae.tag=2;var Re=I.updateQueue;if(Re!==null){Re=Re.shared;var We=Re.pending;We===null?ae.next=ae:(ae.next=We.next,We.next=ae),Re.pending=ae}}I.lanes|=h,ae=I.alternate,ae!==null&&(ae.lanes|=h),Bu(I.return,h,o),Z.lanes|=h;break}ae=ae.next}}else if(I.tag===10)B=I.type===o.type?null:I.child;else if(I.tag===18){if(B=I.return,B===null)throw Error(t(341));B.lanes|=h,Z=B.alternate,Z!==null&&(Z.lanes|=h),Bu(B,h,o),B=I.sibling}else B=I.child;if(B!==null)B.return=I;else for(B=I;B!==null;){if(B===o){B=null;break}if(I=B.sibling,I!==null){I.return=B.return,B=I;break}B=B.return}I=B}ke(i,o,S.children,h),o=o.child}return o;case 9:return S=o.type,g=o.pendingProps.children,al(o,h),S=pi(S),g=g(S),o.flags|=1,ke(i,o,g,h),o.child;case 14:return g=o.type,S=l(g,o.pendingProps),S=l(g.type,S),It(i,o,g,S,h);case 15:return sr(i,o,o.type,o.pendingProps,h);case 17:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:l(g,S),Td(i,o),o.tag=1,Xn(g)?(i=!0,Vl(o)):i=!1,al(o,h),C(o,g,S),$(o,g,S,h),no(null,o,g,!0,i,h);case 19:return By(i,o,h);case 22:return bt(i,o,h)}throw Error(t(156,o.tag))};function lv(i,o){return Ha(i,o)}function h1(i,o,h,g){this.tag=i,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function so(i,o,h,g){return new h1(i,o,h,g)}function Dp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function d1(i){if(typeof i=="function")return Dp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===ve)return 11;if(i===Xe)return 14}return 2}function iu(i,o){var h=i.alternate;return h===null?(h=so(i.tag,o,i.key,i.mode),h.elementType=i.elementType,h.type=i.type,h.stateNode=i.stateNode,h.alternate=i,i.alternate=h):(h.pendingProps=o,h.type=i.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=i.flags&14680064,h.childLanes=i.childLanes,h.lanes=i.lanes,h.child=i.child,h.memoizedProps=i.memoizedProps,h.memoizedState=i.memoizedState,h.updateQueue=i.updateQueue,o=i.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=i.sibling,h.index=i.index,h.ref=i.ref,h}function Nd(i,o,h,g,S,I){var B=2;if(g=i,typeof i=="function")Dp(i)&&(B=1);else if(typeof i=="string")B=5;else e:switch(i){case N:return Yu(h.children,S,I,o);case te:B=8,S|=8;break;case pe:return i=so(12,h,o,S|2),i.elementType=pe,i.lanes=I,i;case _e:return i=so(13,h,o,S),i.elementType=_e,i.lanes=I,i;case we:return i=so(19,h,o,S),i.elementType=we,i.lanes=I,i;case W:return Fd(h,S,I,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Me:B=10;break e;case Pe:B=9;break e;case ve:B=11;break e;case Xe:B=14;break e;case H:B=16,g=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=so(B,h,o,S),o.elementType=i,o.type=g,o.lanes=I,o}function Yu(i,o,h,g){return i=so(7,i,g,o),i.lanes=h,i}function Fd(i,o,h,g){return i=so(22,i,g,o),i.elementType=W,i.lanes=h,i.stateNode={isHidden:!1},i}function Lp(i,o,h){return i=so(6,i,null,o),i.lanes=h,i}function Np(i,o,h){return o=so(4,i.children!==null?i.children:[],i.key,o),o.lanes=h,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function f1(i,o,h,g,S){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wa(0),this.expirationTimes=Wa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wa(0),this.identifierPrefix=g,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function Fp(i,o,h,g,S,I,B,Z,ae){return i=new f1(i,o,h,Z,ae),o===1?(o=1,I===!0&&(o|=8)):o=0,I=so(3,null,null,o),i.current=I,I.stateNode=i,I.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kr(I),i}function p1(i,o,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fe,key:g==null?null:""+g,children:i,containerInfo:o,implementation:h}}function uv(i){if(!i)return ts;i=i._reactInternals;e:{if(qr(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Xn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var h=i.type;if(Xn(h))return wh(i,h,o)}return o}function cv(i,o,h,g,S,I,B,Z,ae){return i=Fp(h,g,!0,i,S,I,B,Z,ae),i.context=uv(null),h=i.current,g=Oi(),S=ru(h),I=Tr(g,S),I.callback=o??null,Yr(h,I,S),i.current.lanes=S,_o(i,S,g),ps(i,g),i}function Bd(i,o,h,g){var S=o.current,I=Oi(),B=ru(S);return h=uv(h),o.context===null?o.context=h:o.pendingContext=h,o=Tr(I,B),o.payload={element:i},g=g===void 0?null:g,g!==null&&(o.callback=g),i=Yr(S,o,B),i!==null&&(Fo(i,S,B,I),Ro(i,S,B)),B}function Ud(i){return i=i.current,i.child?(i.child.tag===5,i.child.stateNode):null}function hv(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var h=i.retryLane;i.retryLane=h!==0&&h<o?h:o}}function Bp(i,o){hv(i,o),(i=i.alternate)&&hv(i,o)}function m1(){return null}var dv=typeof reportError=="function"?reportError:function(i){console.error(i)};function Up(i){this._internalRoot=i}jd.prototype.render=Up.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Bd(i,o,null,null)},jd.prototype.unmount=Up.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;qu(function(){Bd(null,i,null,null)}),o[Ur]=null}};function jd(i){this._internalRoot=i}jd.prototype.unstable_scheduleHydration=function(i){if(i){var o=Pl();i={blockedOn:null,target:i,priority:o};for(var h=0;h<Kt.length&&o!==0&&o<Kt[h].priority;h++);Kt.splice(h,0,i),h===0&&$a(i)}};function jp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Gd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function fv(){}function g1(i,o,h,g,S){if(S){if(typeof g=="function"){var I=g;g=function(){var Re=Ud(B);I.call(Re)}}var B=cv(o,g,i,0,null,!1,!1,"",fv);return i._reactRootContainer=B,i[Ur]=B.current,Nl(i.nodeType===8?i.parentNode:i),qu(),B}for(;S=i.lastChild;)i.removeChild(S);if(typeof g=="function"){var Z=g;g=function(){var Re=Ud(ae);Z.call(Re)}}var ae=Fp(i,0,!1,null,null,!1,!1,"",fv);return i._reactRootContainer=ae,i[Ur]=ae.current,Nl(i.nodeType===8?i.parentNode:i),qu(function(){Bd(o,ae,h,g)}),ae}function zd(i,o,h,g,S){var I=h._reactRootContainer;if(I){var B=I;if(typeof S=="function"){var Z=S;S=function(){var ae=Ud(B);Z.call(ae)}}Bd(o,B,i,S)}else B=g1(h,o,i,S,g);return Ud(B)}gc=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var h=Gs(o.pendingLanes);h!==0&&(ta(o,h|1),ps(o,nr()),(ar&6)===0&&(Uc=nr()+500,ss()))}break;case 13:qu(function(){var g=mr(i,1);if(g!==null){var S=Oi();Fo(g,i,1,S)}}),Bp(i,1)}},qt=function(i){if(i.tag===13){var o=mr(i,134217728);if(o!==null){var h=Oi();Fo(o,i,134217728,h)}Bp(i,134217728)}},Il=function(i){if(i.tag===13){var o=ru(i),h=mr(i,o);if(h!==null){var g=Oi();Fo(h,i,o,g)}Bp(i,o)}},Pl=function(){return $t},na=function(i,o){var h=$t;try{return $t=i,o()}finally{$t=h}},ze=function(i,o,h){switch(o){case"input":if(gr(i,h),o=h.name,h.type==="radio"&&o!=null){for(h=i;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<h.length;o++){var g=h[o];if(g!==i&&g.form===i.form){var S=zl(g);if(!S)throw Error(t(90));Qe(g),gr(g,S)}}}break;case"textarea":Pn(i,h);break;case"select":o=h.value,o!=null&&dr(i,!!h.multiple,o,!1)}},Yo=kp,wi=qu;var y1={usingClientEntryPoint:!1,Events:[Gl,tl,zl,$r,Rn,kp]},zh={findFiberByHostInstance:va,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},v1={bundleType:zh.bundleType,version:zh.version,rendererPackageName:zh.rendererPackageName,rendererConfig:zh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Ui(i),i===null?null:i.stateNode},findFiberByHostInstance:zh.findFiberByHostInstance||m1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hd.isDisabled&&Hd.supportsFiber)try{oi=Hd.inject(v1),Wt=Hd}catch{}}return ms.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y1,ms.createPortal=function(i,o){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jp(o))throw Error(t(200));return p1(i,o,null,h)},ms.createRoot=function(i,o){if(!jp(i))throw Error(t(299));var h=!1,g="",S=dv;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),o=Fp(i,1,!1,null,null,h,!1,g,S),i[Ur]=o.current,Nl(i.nodeType===8?i.parentNode:i),new Up(o)},ms.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Ui(o),i=i===null?null:i.stateNode,i},ms.flushSync=function(i){return qu(i)},ms.hydrate=function(i,o,h){if(!Gd(o))throw Error(t(200));return zd(null,i,o,!0,h)},ms.hydrateRoot=function(i,o,h){if(!jp(i))throw Error(t(405));var g=h!=null&&h.hydratedSources||null,S=!1,I="",B=dv;if(h!=null&&(h.unstable_strictMode===!0&&(S=!0),h.identifierPrefix!==void 0&&(I=h.identifierPrefix),h.onRecoverableError!==void 0&&(B=h.onRecoverableError)),o=cv(o,null,i,1,h??null,S,!1,I,B),i[Ur]=o.current,Nl(i),g)for(i=0;i<g.length;i++)h=g[i],S=h._getVersion,S=S(h._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[h,S]:o.mutableSourceEagerHydrationData.push(h,S);return new jd(o)},ms.render=function(i,o,h){if(!Gd(o))throw Error(t(200));return zd(null,i,o,!1,h)},ms.unmountComponentAtNode=function(i){if(!Gd(i))throw Error(t(40));return i._reactRootContainer?(qu(function(){zd(null,null,i,!1,function(){i._reactRootContainer=null,i[Ur]=null})}),!0):!1},ms.unstable_batchedUpdates=kp,ms.unstable_renderSubtreeIntoContainer=function(i,o,h,g){if(!Gd(h))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return zd(i,o,h,!1,g)},ms.version="18.3.1-next-f1338f8080-20240426",ms}var wv;function A1(){if(wv)return Hp.exports;wv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Hp.exports=T1(),Hp.exports}var bv;function C1(){if(bv)return Vd;bv=1;var n=A1();return Vd.createRoot=n.createRoot,Vd.hydrateRoot=n.hydrateRoot,Vd}var I1=C1();const P1=uh(I1);function R1(n){return new Worker("/LuckyRepo/assets/logic.worker-DD_Nyw6I.js",{name:n?.name})}function k1(n){return new Worker("/LuckyRepo/assets/view.worker-DF3_5iW7.js",{name:n?.name})}class ao{static instance;worker;sharedBuffers=new Map;sharedViews=new Map;isInitialized=!1;activeStateName=null;activeInstanceId=null;constructor(){this.worker=new k1,this.worker.onerror=e=>console.error("View Worker Error:",e),this.worker.onmessage=e=>{e.data.type==="REQUEST_RESIZE_OUTPUT"&&this.resizeOutputBuffer(e.data.payload.bufferName,e.data.payload.newSize)}}static getInstance(){return ao.instance||(ao.instance=new ao),ao.instance}updateInputBuffer(e,t){this.worker.postMessage({type:"UPDATE_BUFFER",payload:{name:e,buffer:t,isInput:!0}})}resizeOutputBuffer(e,t){const r=this.sharedViews.get(e),s=t*4,a=new SharedArrayBuffer(s),c=new Float32Array(a);r&&c.set(r),this.sharedBuffers.set(e,a),this.sharedViews.set(e,c),this.worker.postMessage({type:"UPDATE_BUFFER",payload:{name:e,buffer:a,isInput:!1}})}setupBuffers(e,t){this.isInitialized=!1,this.sharedBuffers.clear(),this.sharedViews.clear();const r="BUFFER_SIZE"in t?{main:t}:t,s={};Object.entries(r).forEach(([a,c])=>{const d=c.BUFFER_SIZE*4,m=new SharedArrayBuffer(d);this.sharedBuffers.set(a,m),this.sharedViews.set(a,new Float32Array(m)),s[a]=m}),this.worker.postMessage({type:"INIT_SABS",payload:{inputBuffers:e,outputBuffers:s}}),this.isInitialized=!0}prepareForState(e){const t=crypto.randomUUID();return this.activeStateName!==e&&(this.isInitialized=!1),this.activeInstanceId=t,this.activeStateName=e,t}createState(e){this.worker.postMessage({type:"CREATE_STATE",stateName:e})}terminateState(e,t){t&&t!==this.activeInstanceId||(this.activeStateName===e&&(this.activeStateName=null,this.activeInstanceId=null,this.isInitialized=!1),this.worker.postMessage({type:"TERMINATE_STATE",stateName:e}))}tick(e,t,r){!this.isInitialized||this.sharedViews.size===0||e!==this.activeStateName||this.worker.postMessage({type:"TICK",stateName:e,dt:t,frameCount:r})}forceClearWorker(){this.isInitialized=!1,this.activeStateName=null,this.activeInstanceId=null,this.worker.postMessage({type:"TERMINATE_ALL"})}sendInput(e,t,r={}){this.worker.postMessage({type:"INPUT",stateName:e,payload:{action:t,...r}})}loadSnapshot(e,t){this.worker.postMessage({type:"INPUT",stateName:e,payload:{action:"LOAD_SNAPSHOT",data:t}})}}let oh=class Kh{static instance;logic;buffers=new Map;views=new Map;isInitialized=!1;activeStateName=null;activeInstanceId=null;constructor(){if(this.logic=new R1,typeof SharedArrayBuffer>"u")throw new Error("COOP/COEP headers missing for SharedArrayBuffer.");this.logic.onerror=e=>console.error("Logic Worker Error:",e),this.logic.onmessage=e=>{e.data.type==="REQUEST_RESIZE"&&this.resizeBuffer(e.data.payload.bufferName,e.data.payload.newSize)}}static getInstance(){return Kh.instance||(Kh.instance=new Kh),Kh.instance}setupBuffers(e,t=!1){this.isInitialized=!1,this.buffers.clear(),this.views.clear();const r="BUFFER_SIZE"in e?{main:e}:e,s={};Object.entries(r).forEach(([a,c])=>{const d=c.BUFFER_SIZE*4,m=new SharedArrayBuffer(d);t&&new Float32Array(m).fill(0),this.buffers.set(a,m),this.views.set(a,new Float32Array(m)),s[a]=m}),this.logic.postMessage({type:"INIT_SABS",payload:{buffers:s}}),this.isInitialized=!0}resizeBuffer(e,t){const r=this.views.get(e),s=t*4,a=new SharedArrayBuffer(s),c=new Float32Array(a);r&&c.set(r),this.buffers.set(e,a),this.views.set(e,c),this.logic.postMessage({type:"UPDATE_BUFFER",payload:{name:e,buffer:a}}),ao.getInstance().updateInputBuffer(e,a)}getBuffers(){const e={};return this.buffers.forEach((t,r)=>e[r]=t),e}prepareForState(e){const t=crypto.randomUUID();return this.activeStateName!==e&&(this.isInitialized=!1),this.activeInstanceId=t,this.activeStateName=e,t}createState(e,t=!1){this.logic.postMessage({type:"CREATE_STATE",stateName:e,payload:{force:t}})}terminateState(e,t){t&&t!==this.activeInstanceId||(this.activeStateName===e&&(this.activeStateName=null,this.activeInstanceId=null,this.isInitialized=!1),this.logic.postMessage({type:"TERMINATE_STATE",stateName:e}))}sendInput(e,t,r={}){this.logic.postMessage({type:"INPUT",stateName:e,payload:{action:t,...r}})}tick(e,t,r){!this.isInitialized||this.views.size===0||e!==this.activeStateName||this.logic.postMessage({type:"TICK",stateName:e,frameCount:t,fps:r})}forceClearWorker(){this.isInitialized=!1,this.activeStateName=null,this.activeInstanceId=null,this.logic.postMessage({type:"TERMINATE_ALL"})}};class mn{static instance;data=new Map;isWriteLocked=!1;STORAGE_KEY="engine_settings_global";PERSISTENT_KEYS=["resolution","master_volume","ost_volume","sfx_volume"];SAVABLE_KEYS=["global_hp","global_energy","campaign_id","campaign_step_index"];constructor(){this.data.set("master_volume",.5),this.data.set("ost_volume",.5),this.data.set("sfx_volume",.5),this.data.set("resolution","1080p"),this.loadFromLocalStorage()}static getInstance(){return mn.instance||(mn.instance=new mn),mn.instance}exportSaveData(){const e={};return this.SAVABLE_KEYS.forEach(t=>{this.data.has(t)&&(e[t]=this.data.get(t))}),e}importSaveData(e){this.SAVABLE_KEYS.forEach(t=>{e[t]!==void 0&&this.forceSet(t,e[t])})}set(e,t){if(this.isWriteLocked&&this.SAVABLE_KEYS.includes(e)){console.warn(`[SharedSession] Blocked stale write to ${e} during lock.`);return}this.data.set(e,t),(this.PERSISTENT_KEYS.includes(e)||e.startsWith("bind_"))&&this.saveToLocalStorage()}get(e,t){return this.data.has(e)?this.data.get(e):t}clearSavableKeys(){this.SAVABLE_KEYS.forEach(e=>{this.data.delete(e)})}forceSet(e,t){this.data.set(e,t)}lockForLoad(){this.isWriteLocked=!0}unlock(){this.isWriteLocked=!1}loadFromLocalStorage(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(e){const t=JSON.parse(e);Object.entries(t).forEach(([r,s])=>{(this.PERSISTENT_KEYS.includes(r)||r.startsWith("bind_"))&&this.data.set(r,s)})}}catch(e){console.warn("[SharedSession] Persistence load failed",e)}}saveToLocalStorage(){const e={};this.data.forEach((t,r)=>{(this.PERSISTENT_KEYS.includes(r)||r.startsWith("bind_"))&&(e[r]=t)}),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}}const Pf={Shared:{PAUSE:["ESCAPE","P"]},Game1:{MOVE_UP:["W","ARROWUP"],MOVE_DOWN:["S","ARROWDOWN"],MOVE_LEFT:["A","ARROWLEFT"],MOVE_RIGHT:["D","ARROWRIGHT"]},Game2:{MOVE_UP:["G","H"]},BHTest:{MOVE_UP:["W","ARROWUP"],MOVE_DOWN:["S","ARROWDOWN"],MOVE_LEFT:["A","ARROWLEFT"],MOVE_RIGHT:["D","ARROWRIGHT"]}};class ys{static instance;mouseX=0;mouseY=0;isHoveringButton=!1;isMouseDown=!1;activeKeys=new Set;currentBindings=new Map;currentGame="Shared";constructor(){this.setupGlobalListeners(),this.refreshBindings("Shared")}static getInstance(){return ys.instance||(ys.instance=new ys),ys.instance}getSnapshot(){const e=[];return this.currentBindings.forEach((t,r)=>{t.some(s=>this.activeKeys.has(s))&&e.push(r)}),{isHoveringButton:this.isHoveringButton,isMouseDown:this.isMouseDown,mouseX:this.mouseX,mouseY:this.mouseY,actions:e}}reset(){this.activeKeys.clear(),this.isMouseDown=!1,this.isHoveringButton=!1}refreshBindings(e){this.currentGame=e;const t=mn.getInstance(),r={...Pf.Shared,...Pf[e]||{}},s=t.get("bind_Shared");if(s&&Object.assign(r,s),e!=="Shared"){const a=t.get(`bind_${e}`);a&&Object.assign(r,a)}this.currentBindings=new Map(Object.entries(r))}isKeyAction(e,t){const r=this.currentBindings.get(t);return r?r.includes(e.toUpperCase()):!1}setBinding(e,t,r=this.currentGame,s=0){const a=mn.getInstance(),c=`bind_${r}`,d=a.get(c)||{};if(!d[e]){const m=this.currentBindings.get(e)||[];d[e]=[...m]}d[e][s]=t.toUpperCase(),a.set(c,d),this.refreshBindings(this.currentGame)}resetBindings(e=this.currentGame){const t=mn.getInstance(),r=`bind_${e}`;t.set(r,void 0),this.refreshBindings(this.currentGame)}setupGlobalListeners(){window.addEventListener("keydown",e=>this.activeKeys.add(e.key.toUpperCase())),window.addEventListener("keyup",e=>this.activeKeys.delete(e.key.toUpperCase())),window.addEventListener("mousemove",e=>{const t=window.innerWidth,r=window.innerHeight,s=16/9,a=t/r;let c,d,m=0,v=0;a>s?(d=r,c=r*s,m=(t-c)/2):(c=t,d=t/s,v=(r-d)/2);const w=(e.clientX-m)/c,f=(e.clientY-v)/d;this.mouseX=Math.max(0,Math.min(1,w)),this.mouseY=Math.max(0,Math.min(1,f))}),window.addEventListener("mousedown",()=>this.isMouseDown=!0),window.addEventListener("mouseup",()=>this.isMouseDown=!1),window.addEventListener("mouseover",e=>{const t=e.target;this.isHoveringButton=!!t.closest("button, .interactable")}),window.addEventListener("blur",()=>this.reset())}}class hu{static instance;TARGET_FPS=60;MS_PER_FRAME=1e3/this.TARGET_FPS;lastFrameTime=0;isRunning=!1;requestRef=0;frameCount=0;fps=0;lastFpsUpdate=0;framesSinceLastUpdate=0;constructor(){}static getInstance(){return hu.instance||(hu.instance=new hu),hu.instance}start(){this.isRunning||(this.isRunning=!0,this.lastFrameTime=performance.now(),this.lastFpsUpdate=performance.now(),ys.getInstance(),this.requestRef=requestAnimationFrame(this.loop),console.log("[Engine] Core Loop Started"))}stop(){this.isRunning=!1,cancelAnimationFrame(this.requestRef),console.log("[Engine] Core Loop Stopped")}loop=e=>{if(!this.isRunning)return;const t=e-this.lastFrameTime;if(t<this.MS_PER_FRAME){this.requestRef=requestAnimationFrame(this.loop);return}this.lastFrameTime=e-t%this.MS_PER_FRAME;const r=lr.getInstance();if(r.stack.length===0){this.requestRef=requestAnimationFrame(this.loop);return}this.framesSinceLastUpdate++,e>this.lastFpsUpdate+1e3&&(this.fps=Math.round(this.framesSinceLastUpdate*1e3/(e-this.lastFpsUpdate)),this.lastFpsUpdate=e,this.framesSinceLastUpdate=0),this.dispatchLogicTick(r),this.dispatchViewTick(r,this.MS_PER_FRAME),r.updateAll(this.MS_PER_FRAME,this.frameCount),this.frameCount++,this.requestRef=requestAnimationFrame(this.loop)};dispatchLogicTick(e){const t=oh.getInstance(),r=t.activeStateName;if(!r)return;const a=e.stack.find(m=>m.name===r);if(!a||!a.isUpdating)return;const d=ys.getInstance().getSnapshot();t.sendInput(r,"SYNC_INPUT",{actions:d.actions,mouseX:d.mouseX,mouseY:d.mouseY,isMouseDown:d.isMouseDown,isHovering:d.isHoveringButton}),t.tick(r,this.frameCount,this.fps||60)}dispatchViewTick(e,t){const r=ao.getInstance(),s=r.activeStateName;if(!s)return;const c=e.stack.find(m=>m.name===s);if(!c||!c.isRendering)return;const d=c.isUpdating?t:0;r.tick(s,d,this.frameCount)}}let ch=class{isUpdating=!1;isRendering=!1;priority=0;isInitialized=!1;update(e,t){}};const M1=({isFinished:n,onTransitionComplete:e})=>(it.useEffect(()=>{n&&e()},[n,e]),Q.jsx("div",{style:{position:"absolute",inset:0,background:"#000",display:"flex",alignItems:"center",justifyContent:"center"},children:Q.jsx("div",{style:{width:"100%",height:"100%",maxWidth:"calc(100vh * (16 / 9))",maxHeight:"calc(100vw * (9 / 16))",aspectRatio:"16 / 9",backgroundColor:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center"},children:Q.jsx("div",{style:{color:"#000",fontFamily:"monospace",fontWeight:"bold"},children:"LOADING..."})})}));var pc=(n=>(n[n.WEBGL_LEGACY=0]="WEBGL_LEGACY",n[n.WEBGL=1]="WEBGL",n[n.WEBGL2=2]="WEBGL2",n))(pc||{}),ix=(n=>(n[n.UNKNOWN=0]="UNKNOWN",n[n.WEBGL=1]="WEBGL",n[n.CANVAS=2]="CANVAS",n))(ix||{}),Tg=(n=>(n[n.COLOR=16384]="COLOR",n[n.DEPTH=256]="DEPTH",n[n.STENCIL=1024]="STENCIL",n))(Tg||{}),Dt=(n=>(n[n.NORMAL=0]="NORMAL",n[n.ADD=1]="ADD",n[n.MULTIPLY=2]="MULTIPLY",n[n.SCREEN=3]="SCREEN",n[n.OVERLAY=4]="OVERLAY",n[n.DARKEN=5]="DARKEN",n[n.LIGHTEN=6]="LIGHTEN",n[n.COLOR_DODGE=7]="COLOR_DODGE",n[n.COLOR_BURN=8]="COLOR_BURN",n[n.HARD_LIGHT=9]="HARD_LIGHT",n[n.SOFT_LIGHT=10]="SOFT_LIGHT",n[n.DIFFERENCE=11]="DIFFERENCE",n[n.EXCLUSION=12]="EXCLUSION",n[n.HUE=13]="HUE",n[n.SATURATION=14]="SATURATION",n[n.COLOR=15]="COLOR",n[n.LUMINOSITY=16]="LUMINOSITY",n[n.NORMAL_NPM=17]="NORMAL_NPM",n[n.ADD_NPM=18]="ADD_NPM",n[n.SCREEN_NPM=19]="SCREEN_NPM",n[n.NONE=20]="NONE",n[n.SRC_OVER=0]="SRC_OVER",n[n.SRC_IN=21]="SRC_IN",n[n.SRC_OUT=22]="SRC_OUT",n[n.SRC_ATOP=23]="SRC_ATOP",n[n.DST_OVER=24]="DST_OVER",n[n.DST_IN=25]="DST_IN",n[n.DST_OUT=26]="DST_OUT",n[n.DST_ATOP=27]="DST_ATOP",n[n.ERASE=26]="ERASE",n[n.SUBTRACT=28]="SUBTRACT",n[n.XOR=29]="XOR",n))(Dt||{}),Ho=(n=>(n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",n))(Ho||{}),tt=(n=>(n[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.RG=33319]="RG",n[n.RED=6403]="RED",n[n.RGBA_INTEGER=36249]="RGBA_INTEGER",n[n.RGB_INTEGER=36248]="RGB_INTEGER",n[n.RG_INTEGER=33320]="RG_INTEGER",n[n.RED_INTEGER=36244]="RED_INTEGER",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n))(tt||{}),Jc=(n=>(n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n))(Jc||{}),Pt=(n=>(n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",n[n.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",n[n.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",n[n.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",n[n.BYTE=5120]="BYTE",n[n.SHORT=5122]="SHORT",n[n.INT=5124]="INT",n[n.FLOAT=5126]="FLOAT",n[n.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",n[n.HALF_FLOAT=36193]="HALF_FLOAT",n))(Pt||{}),mt=(n=>(n[n.FLOAT=0]="FLOAT",n[n.INT=1]="INT",n[n.UINT=2]="UINT",n))(mt||{}),yl=(n=>(n[n.NEAREST=0]="NEAREST",n[n.LINEAR=1]="LINEAR",n))(yl||{}),xl=(n=>(n[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n))(xl||{}),Ua=(n=>(n[n.OFF=0]="OFF",n[n.POW2=1]="POW2",n[n.ON=2]="ON",n[n.ON_MANUAL=3]="ON_MANUAL",n))(Ua||{}),vs=(n=>(n[n.NPM=0]="NPM",n[n.UNPACK=1]="UNPACK",n[n.PMA=2]="PMA",n[n.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",n[n.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",n[n.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",n))(vs||{}),Oa=(n=>(n[n.NO=0]="NO",n[n.YES=1]="YES",n[n.AUTO=2]="AUTO",n[n.BLEND=0]="BLEND",n[n.CLEAR=1]="CLEAR",n[n.BLIT=2]="BLIT",n))(Oa||{}),_y=(n=>(n[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL",n))(_y||{}),lo=(n=>(n.LOW="lowp",n.MEDIUM="mediump",n.HIGH="highp",n))(lo||{}),In=(n=>(n[n.NONE=0]="NONE",n[n.SCISSOR=1]="SCISSOR",n[n.STENCIL=2]="STENCIL",n[n.SPRITE=3]="SPRITE",n[n.COLOR=4]="COLOR",n))(In||{}),wn=(n=>(n[n.NONE=0]="NONE",n[n.LOW=2]="LOW",n[n.MEDIUM=4]="MEDIUM",n[n.HIGH=8]="HIGH",n))(wn||{}),Fa=(n=>(n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",n))(Fa||{});const O1={createCanvas:(n,e)=>{const t=document.createElement("canvas");return t.width=n,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,e)=>fetch(n,e),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")},gt={ADAPTER:O1,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var $p=/iPhone/i,Sv=/iPod/i,Ev=/iPad/i,Tv=/\biOS-universal(?:.+)Mac\b/i,qp=/\bAndroid(?:.+)Mobile\b/i,Av=/Android/i,Gc=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Wd=/Silk/i,pl=/Windows Phone/i,Cv=/\bWindows(?:.+)ARM\b/i,Iv=/BlackBerry/i,Pv=/BB10/i,Rv=/Opera Mini/i,kv=/\b(CriOS|Chrome)(?:.+)Mobile/i,Mv=/Mobile(?:.+)Firefox\b/i,Ov=function(n){return typeof n<"u"&&n.platform==="MacIntel"&&typeof n.maxTouchPoints=="number"&&n.maxTouchPoints>1&&typeof MSStream>"u"};function D1(n){return function(e){return e.test(n)}}function Dv(n){var e={userAgent:"",platform:"",maxTouchPoints:0};!n&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof n=="string"?e.userAgent=n:n&&n.userAgent&&(e={userAgent:n.userAgent,platform:n.platform,maxTouchPoints:n.maxTouchPoints||0});var t=e.userAgent,r=t.split("[FBAN");typeof r[1]<"u"&&(t=r[0]),r=t.split("Twitter"),typeof r[1]<"u"&&(t=r[0]);var s=D1(t),a={apple:{phone:s($p)&&!s(pl),ipod:s(Sv),tablet:!s($p)&&(s(Ev)||Ov(e))&&!s(pl),universal:s(Tv),device:(s($p)||s(Sv)||s(Ev)||s(Tv)||Ov(e))&&!s(pl)},amazon:{phone:s(Gc),tablet:!s(Gc)&&s(Wd),device:s(Gc)||s(Wd)},android:{phone:!s(pl)&&s(Gc)||!s(pl)&&s(qp),tablet:!s(pl)&&!s(Gc)&&!s(qp)&&(s(Wd)||s(Av)),device:!s(pl)&&(s(Gc)||s(Wd)||s(qp)||s(Av))||s(/\bokhttp\b/i)},windows:{phone:s(pl),tablet:s(Cv),device:s(pl)||s(Cv)},other:{blackberry:s(Iv),blackberry10:s(Pv),opera:s(Rv),firefox:s(Mv),chrome:s(kv),device:s(Iv)||s(Pv)||s(Rv)||s(Mv)||s(kv)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}const L1=Dv.default??Dv,vl=L1(globalThis.navigator);gt.RETINA_PREFIX=/@([0-9\.]+)x/;gt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Xp={exports:{}},Lv;function N1(){return Lv||(Lv=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function s(m,v,w){this.fn=m,this.context=v,this.once=w||!1}function a(m,v,w,f,y){if(typeof w!="function")throw new TypeError("The listener must be a function");var b=new s(w,f||m,y),T=t?t+v:v;return m._events[T]?m._events[T].fn?m._events[T]=[m._events[T],b]:m._events[T].push(b):(m._events[T]=b,m._eventsCount++),m}function c(m,v){--m._eventsCount===0?m._events=new r:delete m._events[v]}function d(){this._events=new r,this._eventsCount=0}d.prototype.eventNames=function(){var v=[],w,f;if(this._eventsCount===0)return v;for(f in w=this._events)e.call(w,f)&&v.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(w)):v},d.prototype.listeners=function(v){var w=t?t+v:v,f=this._events[w];if(!f)return[];if(f.fn)return[f.fn];for(var y=0,b=f.length,T=new Array(b);y<b;y++)T[y]=f[y].fn;return T},d.prototype.listenerCount=function(v){var w=t?t+v:v,f=this._events[w];return f?f.fn?1:f.length:0},d.prototype.emit=function(v,w,f,y,b,T){var R=t?t+v:v;if(!this._events[R])return!1;var k=this._events[R],L=arguments.length,V,z;if(k.fn){switch(k.once&&this.removeListener(v,k.fn,void 0,!0),L){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,w),!0;case 3:return k.fn.call(k.context,w,f),!0;case 4:return k.fn.call(k.context,w,f,y),!0;case 5:return k.fn.call(k.context,w,f,y,b),!0;case 6:return k.fn.call(k.context,w,f,y,b,T),!0}for(z=1,V=new Array(L-1);z<L;z++)V[z-1]=arguments[z];k.fn.apply(k.context,V)}else{var J=k.length,X;for(z=0;z<J;z++)switch(k[z].once&&this.removeListener(v,k[z].fn,void 0,!0),L){case 1:k[z].fn.call(k[z].context);break;case 2:k[z].fn.call(k[z].context,w);break;case 3:k[z].fn.call(k[z].context,w,f);break;case 4:k[z].fn.call(k[z].context,w,f,y);break;default:if(!V)for(X=1,V=new Array(L-1);X<L;X++)V[X-1]=arguments[X];k[z].fn.apply(k[z].context,V)}}return!0},d.prototype.on=function(v,w,f){return a(this,v,w,f,!1)},d.prototype.once=function(v,w,f){return a(this,v,w,f,!0)},d.prototype.removeListener=function(v,w,f,y){var b=t?t+v:v;if(!this._events[b])return this;if(!w)return c(this,b),this;var T=this._events[b];if(T.fn)T.fn===w&&(!y||T.once)&&(!f||T.context===f)&&c(this,b);else{for(var R=0,k=[],L=T.length;R<L;R++)(T[R].fn!==w||y&&!T[R].once||f&&T[R].context!==f)&&k.push(T[R]);k.length?this._events[b]=k.length===1?k[0]:k:c(this,b)}return this},d.prototype.removeAllListeners=function(v){var w;return v?(w=t?t+v:v,this._events[w]&&c(this,w)):(this._events=new r,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=t,d.EventEmitter=d,n.exports=d})(Xp)),Xp.exports}var F1=N1();const dd=uh(F1);var $d={exports:{}},Nv;function B1(){if(Nv)return $d.exports;Nv=1,$d.exports=n,$d.exports.default=n;function n(H,W,D){D=D||2;var Y=W&&W.length,G=Y?W[0]*D:H.length,U=e(H,0,G,D,!0),K=[];if(!U||U.next===U.prev)return K;var he,Ae,Oe,Fe,Ge,Ke,st;if(Y&&(U=m(H,W,U,D)),H.length>80*D){he=Oe=H[0],Ae=Fe=H[1];for(var Se=D;Se<G;Se+=D)Ge=H[Se],Ke=H[Se+1],Ge<he&&(he=Ge),Ke<Ae&&(Ae=Ke),Ge>Oe&&(Oe=Ge),Ke>Fe&&(Fe=Ke);st=Math.max(Oe-he,Fe-Ae),st=st!==0?32767/st:0}return r(U,K,D,he,Ae,st,0),K}function e(H,W,D,Y,G){var U,K;if(G===Xe(H,W,D,Y)>0)for(U=W;U<D;U+=Y)K=ve(U,H[U],H[U+1],K);else for(U=D-Y;U>=W;U-=Y)K=ve(U,H[U],H[U+1],K);return K&&J(K,K.next)&&(_e(K),K=K.next),K}function t(H,W){if(!H)return H;W||(W=H);var D=H,Y;do if(Y=!1,!D.steiner&&(J(D,D.next)||z(D.prev,D,D.next)===0)){if(_e(D),D=W=D.prev,D===D.next)break;Y=!0}else D=D.next;while(Y||D!==W);return W}function r(H,W,D,Y,G,U,K){if(H){!K&&U&&b(H,Y,G,U);for(var he=H,Ae,Oe;H.prev!==H.next;){if(Ae=H.prev,Oe=H.next,U?a(H,Y,G,U):s(H)){W.push(Ae.i/D|0),W.push(H.i/D|0),W.push(Oe.i/D|0),_e(H),H=Oe.next,he=Oe.next;continue}if(H=Oe,H===he){K?K===1?(H=c(t(H),W,D),r(H,W,D,Y,G,U,2)):K===2&&d(H,W,D,Y,G,U):r(t(H),W,D,Y,G,U,1);break}}}}function s(H){var W=H.prev,D=H,Y=H.next;if(z(W,D,Y)>=0)return!1;for(var G=W.x,U=D.x,K=Y.x,he=W.y,Ae=D.y,Oe=Y.y,Fe=G<U?G<K?G:K:U<K?U:K,Ge=he<Ae?he<Oe?he:Oe:Ae<Oe?Ae:Oe,Ke=G>U?G>K?G:K:U>K?U:K,st=he>Ae?he>Oe?he:Oe:Ae>Oe?Ae:Oe,Se=Y.next;Se!==W;){if(Se.x>=Fe&&Se.x<=Ke&&Se.y>=Ge&&Se.y<=st&&L(G,he,U,Ae,K,Oe,Se.x,Se.y)&&z(Se.prev,Se,Se.next)>=0)return!1;Se=Se.next}return!0}function a(H,W,D,Y){var G=H.prev,U=H,K=H.next;if(z(G,U,K)>=0)return!1;for(var he=G.x,Ae=U.x,Oe=K.x,Fe=G.y,Ge=U.y,Ke=K.y,st=he<Ae?he<Oe?he:Oe:Ae<Oe?Ae:Oe,Se=Fe<Ge?Fe<Ke?Fe:Ke:Ge<Ke?Ge:Ke,at=he>Ae?he>Oe?he:Oe:Ae>Oe?Ae:Oe,Qe=Fe>Ge?Fe>Ke?Fe:Ke:Ge>Ke?Ge:Ke,yt=R(st,Se,W,D,Y),Bt=R(at,Qe,W,D,Y),ft=H.prevZ,_t=H.nextZ;ft&&ft.z>=yt&&_t&&_t.z<=Bt;){if(ft.x>=st&&ft.x<=at&&ft.y>=Se&&ft.y<=Qe&&ft!==G&&ft!==K&&L(he,Fe,Ae,Ge,Oe,Ke,ft.x,ft.y)&&z(ft.prev,ft,ft.next)>=0||(ft=ft.prevZ,_t.x>=st&&_t.x<=at&&_t.y>=Se&&_t.y<=Qe&&_t!==G&&_t!==K&&L(he,Fe,Ae,Ge,Oe,Ke,_t.x,_t.y)&&z(_t.prev,_t,_t.next)>=0))return!1;_t=_t.nextZ}for(;ft&&ft.z>=yt;){if(ft.x>=st&&ft.x<=at&&ft.y>=Se&&ft.y<=Qe&&ft!==G&&ft!==K&&L(he,Fe,Ae,Ge,Oe,Ke,ft.x,ft.y)&&z(ft.prev,ft,ft.next)>=0)return!1;ft=ft.prevZ}for(;_t&&_t.z<=Bt;){if(_t.x>=st&&_t.x<=at&&_t.y>=Se&&_t.y<=Qe&&_t!==G&&_t!==K&&L(he,Fe,Ae,Ge,Oe,Ke,_t.x,_t.y)&&z(_t.prev,_t,_t.next)>=0)return!1;_t=_t.nextZ}return!0}function c(H,W,D){var Y=H;do{var G=Y.prev,U=Y.next.next;!J(G,U)&&X(G,Y,Y.next,U)&&pe(G,U)&&pe(U,G)&&(W.push(G.i/D|0),W.push(Y.i/D|0),W.push(U.i/D|0),_e(Y),_e(Y.next),Y=H=U),Y=Y.next}while(Y!==H);return t(Y)}function d(H,W,D,Y,G,U){var K=H;do{for(var he=K.next.next;he!==K.prev;){if(K.i!==he.i&&V(K,he)){var Ae=Pe(K,he);K=t(K,K.next),Ae=t(Ae,Ae.next),r(K,W,D,Y,G,U,0),r(Ae,W,D,Y,G,U,0);return}he=he.next}K=K.next}while(K!==H)}function m(H,W,D,Y){var G=[],U,K,he,Ae,Oe;for(U=0,K=W.length;U<K;U++)he=W[U]*Y,Ae=U<K-1?W[U+1]*Y:H.length,Oe=e(H,he,Ae,Y,!1),Oe===Oe.next&&(Oe.steiner=!0),G.push(k(Oe));for(G.sort(v),U=0;U<G.length;U++)D=w(G[U],D);return D}function v(H,W){return H.x-W.x}function w(H,W){var D=f(H,W);if(!D)return W;var Y=Pe(D,H);return t(Y,Y.next),t(D,D.next)}function f(H,W){var D=W,Y=H.x,G=H.y,U=-1/0,K;do{if(G<=D.y&&G>=D.next.y&&D.next.y!==D.y){var he=D.x+(G-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if(he<=Y&&he>U&&(U=he,K=D.x<D.next.x?D:D.next,he===Y))return K}D=D.next}while(D!==W);if(!K)return null;var Ae=K,Oe=K.x,Fe=K.y,Ge=1/0,Ke;D=K;do Y>=D.x&&D.x>=Oe&&Y!==D.x&&L(G<Fe?Y:U,G,Oe,Fe,G<Fe?U:Y,G,D.x,D.y)&&(Ke=Math.abs(G-D.y)/(Y-D.x),pe(D,H)&&(Ke<Ge||Ke===Ge&&(D.x>K.x||D.x===K.x&&y(K,D)))&&(K=D,Ge=Ke)),D=D.next;while(D!==Ae);return K}function y(H,W){return z(H.prev,H,W.prev)<0&&z(W.next,H,H.next)<0}function b(H,W,D,Y){var G=H;do G.z===0&&(G.z=R(G.x,G.y,W,D,Y)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==H);G.prevZ.nextZ=null,G.prevZ=null,T(G)}function T(H){var W,D,Y,G,U,K,he,Ae,Oe=1;do{for(D=H,H=null,U=null,K=0;D;){for(K++,Y=D,he=0,W=0;W<Oe&&(he++,Y=Y.nextZ,!!Y);W++);for(Ae=Oe;he>0||Ae>0&&Y;)he!==0&&(Ae===0||!Y||D.z<=Y.z)?(G=D,D=D.nextZ,he--):(G=Y,Y=Y.nextZ,Ae--),U?U.nextZ=G:H=G,G.prevZ=U,U=G;D=Y}U.nextZ=null,Oe*=2}while(K>1);return H}function R(H,W,D,Y,G){return H=(H-D)*G|0,W=(W-Y)*G|0,H=(H|H<<8)&16711935,H=(H|H<<4)&252645135,H=(H|H<<2)&858993459,H=(H|H<<1)&1431655765,W=(W|W<<8)&16711935,W=(W|W<<4)&252645135,W=(W|W<<2)&858993459,W=(W|W<<1)&1431655765,H|W<<1}function k(H){var W=H,D=H;do(W.x<D.x||W.x===D.x&&W.y<D.y)&&(D=W),W=W.next;while(W!==H);return D}function L(H,W,D,Y,G,U,K,he){return(G-K)*(W-he)>=(H-K)*(U-he)&&(H-K)*(Y-he)>=(D-K)*(W-he)&&(D-K)*(U-he)>=(G-K)*(Y-he)}function V(H,W){return H.next.i!==W.i&&H.prev.i!==W.i&&!te(H,W)&&(pe(H,W)&&pe(W,H)&&Me(H,W)&&(z(H.prev,H,W.prev)||z(H,W.prev,W))||J(H,W)&&z(H.prev,H,H.next)>0&&z(W.prev,W,W.next)>0)}function z(H,W,D){return(W.y-H.y)*(D.x-W.x)-(W.x-H.x)*(D.y-W.y)}function J(H,W){return H.x===W.x&&H.y===W.y}function X(H,W,D,Y){var G=N(z(H,W,D)),U=N(z(H,W,Y)),K=N(z(D,Y,H)),he=N(z(D,Y,W));return!!(G!==U&&K!==he||G===0&&fe(H,D,W)||U===0&&fe(H,Y,W)||K===0&&fe(D,H,Y)||he===0&&fe(D,W,Y))}function fe(H,W,D){return W.x<=Math.max(H.x,D.x)&&W.x>=Math.min(H.x,D.x)&&W.y<=Math.max(H.y,D.y)&&W.y>=Math.min(H.y,D.y)}function N(H){return H>0?1:H<0?-1:0}function te(H,W){var D=H;do{if(D.i!==H.i&&D.next.i!==H.i&&D.i!==W.i&&D.next.i!==W.i&&X(D,D.next,H,W))return!0;D=D.next}while(D!==H);return!1}function pe(H,W){return z(H.prev,H,H.next)<0?z(H,W,H.next)>=0&&z(H,H.prev,W)>=0:z(H,W,H.prev)<0||z(H,H.next,W)<0}function Me(H,W){var D=H,Y=!1,G=(H.x+W.x)/2,U=(H.y+W.y)/2;do D.y>U!=D.next.y>U&&D.next.y!==D.y&&G<(D.next.x-D.x)*(U-D.y)/(D.next.y-D.y)+D.x&&(Y=!Y),D=D.next;while(D!==H);return Y}function Pe(H,W){var D=new we(H.i,H.x,H.y),Y=new we(W.i,W.x,W.y),G=H.next,U=W.prev;return H.next=W,W.prev=H,D.next=G,G.prev=D,Y.next=D,D.prev=Y,U.next=Y,Y.prev=U,Y}function ve(H,W,D,Y){var G=new we(H,W,D);return Y?(G.next=Y.next,G.prev=Y,Y.next.prev=G,Y.next=G):(G.prev=G,G.next=G),G}function _e(H){H.next.prev=H.prev,H.prev.next=H.next,H.prevZ&&(H.prevZ.nextZ=H.nextZ),H.nextZ&&(H.nextZ.prevZ=H.prevZ)}function we(H,W,D){this.i=H,this.x=W,this.y=D,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}n.deviation=function(H,W,D,Y){var G=W&&W.length,U=G?W[0]*D:H.length,K=Math.abs(Xe(H,0,U,D));if(G)for(var he=0,Ae=W.length;he<Ae;he++){var Oe=W[he]*D,Fe=he<Ae-1?W[he+1]*D:H.length;K-=Math.abs(Xe(H,Oe,Fe,D))}var Ge=0;for(he=0;he<Y.length;he+=3){var Ke=Y[he]*D,st=Y[he+1]*D,Se=Y[he+2]*D;Ge+=Math.abs((H[Ke]-H[Se])*(H[st+1]-H[Ke+1])-(H[Ke]-H[st])*(H[Se+1]-H[Ke+1]))}return K===0&&Ge===0?0:Math.abs((Ge-K)/K)};function Xe(H,W,D,Y){for(var G=0,U=W,K=D-Y;U<D;U+=Y)G+=(H[K]-H[U])*(H[U+1]+H[K+1]),K=U;return G}return n.flatten=function(H){for(var W=H[0][0].length,D={vertices:[],holes:[],dimensions:W},Y=0,G=0;G<H.length;G++){for(var U=0;U<H[G].length;U++)for(var K=0;K<W;K++)D.vertices.push(H[G][U][K]);G>0&&(Y+=H[G-1].length,D.holes.push(Y))}return D},$d.exports}var U1=B1();const j1=uh(U1);var Qu={},Yh={exports:{}};var G1=Yh.exports,Fv;function z1(){return Fv||(Fv=1,(function(n,e){(function(t){var r=e&&!e.nodeType&&e,s=n&&!n.nodeType&&n,a=typeof Da=="object"&&Da;(a.global===a||a.window===a||a.self===a)&&(t=a);var c,d=2147483647,m=36,v=1,w=26,f=38,y=700,b=72,T=128,R="-",k=/^xn--/,L=/[^\x20-\x7E]/,V=/[\x2E\u3002\uFF0E\uFF61]/g,z={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J=m-v,X=Math.floor,fe=String.fromCharCode,N;function te(G){throw new RangeError(z[G])}function pe(G,U){for(var K=G.length,he=[];K--;)he[K]=U(G[K]);return he}function Me(G,U){var K=G.split("@"),he="";K.length>1&&(he=K[0]+"@",G=K[1]),G=G.replace(V,".");var Ae=G.split("."),Oe=pe(Ae,U).join(".");return he+Oe}function Pe(G){for(var U=[],K=0,he=G.length,Ae,Oe;K<he;)Ae=G.charCodeAt(K++),Ae>=55296&&Ae<=56319&&K<he?(Oe=G.charCodeAt(K++),(Oe&64512)==56320?U.push(((Ae&1023)<<10)+(Oe&1023)+65536):(U.push(Ae),K--)):U.push(Ae);return U}function ve(G){return pe(G,function(U){var K="";return U>65535&&(U-=65536,K+=fe(U>>>10&1023|55296),U=56320|U&1023),K+=fe(U),K}).join("")}function _e(G){return G-48<10?G-22:G-65<26?G-65:G-97<26?G-97:m}function we(G,U){return G+22+75*(G<26)-((U!=0)<<5)}function Xe(G,U,K){var he=0;for(G=K?X(G/y):G>>1,G+=X(G/U);G>J*w>>1;he+=m)G=X(G/J);return X(he+(J+1)*G/(G+f))}function H(G){var U=[],K=G.length,he,Ae=0,Oe=T,Fe=b,Ge,Ke,st,Se,at,Qe,yt,Bt,ft;for(Ge=G.lastIndexOf(R),Ge<0&&(Ge=0),Ke=0;Ke<Ge;++Ke)G.charCodeAt(Ke)>=128&&te("not-basic"),U.push(G.charCodeAt(Ke));for(st=Ge>0?Ge+1:0;st<K;){for(Se=Ae,at=1,Qe=m;st>=K&&te("invalid-input"),yt=_e(G.charCodeAt(st++)),(yt>=m||yt>X((d-Ae)/at))&&te("overflow"),Ae+=yt*at,Bt=Qe<=Fe?v:Qe>=Fe+w?w:Qe-Fe,!(yt<Bt);Qe+=m)ft=m-Bt,at>X(d/ft)&&te("overflow"),at*=ft;he=U.length+1,Fe=Xe(Ae-Se,he,Se==0),X(Ae/he)>d-Oe&&te("overflow"),Oe+=X(Ae/he),Ae%=he,U.splice(Ae++,0,Oe)}return ve(U)}function W(G){var U,K,he,Ae,Oe,Fe,Ge,Ke,st,Se,at,Qe=[],yt,Bt,ft,_t;for(G=Pe(G),yt=G.length,U=T,K=0,Oe=b,Fe=0;Fe<yt;++Fe)at=G[Fe],at<128&&Qe.push(fe(at));for(he=Ae=Qe.length,Ae&&Qe.push(R);he<yt;){for(Ge=d,Fe=0;Fe<yt;++Fe)at=G[Fe],at>=U&&at<Ge&&(Ge=at);for(Bt=he+1,Ge-U>X((d-K)/Bt)&&te("overflow"),K+=(Ge-U)*Bt,U=Ge,Fe=0;Fe<yt;++Fe)if(at=G[Fe],at<U&&++K>d&&te("overflow"),at==U){for(Ke=K,st=m;Se=st<=Oe?v:st>=Oe+w?w:st-Oe,!(Ke<Se);st+=m)_t=Ke-Se,ft=m-Se,Qe.push(fe(we(Se+_t%ft,0))),Ke=X(_t/ft);Qe.push(fe(we(Ke,0))),Oe=Xe(K,Bt,he==Ae),K=0,++he}++K,++U}return Qe.join("")}function D(G){return Me(G,function(U){return k.test(U)?H(U.slice(4).toLowerCase()):U})}function Y(G){return Me(G,function(U){return L.test(U)?"xn--"+W(U):U})}if(c={version:"1.4.1",ucs2:{decode:Pe,encode:ve},decode:H,encode:W,toASCII:Y,toUnicode:D},r&&s)if(n.exports==r)s.exports=c;else for(N in c)c.hasOwnProperty(N)&&(r[N]=c[N]);else t.punycode=c})(G1)})(Yh,Yh.exports)),Yh.exports}var Kp,Bv;function hh(){return Bv||(Bv=1,Kp=TypeError),Kp}const H1={},V1=Object.freeze(Object.defineProperty({__proto__:null,default:H1},Symbol.toStringTag,{value:"Module"})),W1=nx(V1);var Yp,Uv;function Xf(){if(Uv)return Yp;Uv=1;var n=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=n&&e&&typeof e.get=="function"?e.get:null,r=n&&Map.prototype.forEach,s=typeof Set=="function"&&Set.prototype,a=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=s&&a&&typeof a.get=="function"?a.get:null,d=s&&Set.prototype.forEach,m=typeof WeakMap=="function"&&WeakMap.prototype,v=m?WeakMap.prototype.has:null,w=typeof WeakSet=="function"&&WeakSet.prototype,f=w?WeakSet.prototype.has:null,y=typeof WeakRef=="function"&&WeakRef.prototype,b=y?WeakRef.prototype.deref:null,T=Boolean.prototype.valueOf,R=Object.prototype.toString,k=Function.prototype.toString,L=String.prototype.match,V=String.prototype.slice,z=String.prototype.replace,J=String.prototype.toUpperCase,X=String.prototype.toLowerCase,fe=RegExp.prototype.test,N=Array.prototype.concat,te=Array.prototype.join,pe=Array.prototype.slice,Me=Math.floor,Pe=typeof BigInt=="function"?BigInt.prototype.valueOf:null,ve=Object.getOwnPropertySymbols,_e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,we=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Xe=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===we||!0)?Symbol.toStringTag:null,H=Object.prototype.propertyIsEnumerable,W=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(ie){return ie.__proto__}:null);function D(ie,Ie){if(ie===1/0||ie===-1/0||ie!==ie||ie&&ie>-1e3&&ie<1e3||fe.call(/e/,Ie))return Ie;var Nt=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof ie=="number"){var Zt=ie<0?-Me(-ie):Me(ie);if(Zt!==ie){var ze=String(Zt),kt=V.call(Ie,ze.length+1);return z.call(ze,Nt,"$&_")+"."+z.call(z.call(kt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return z.call(Ie,Nt,"$&_")}var Y=W1,G=Y.custom,U=Bt(G)?G:null,K={__proto__:null,double:'"',single:"'"},he={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};Yp=function ie(Ie,Nt,Zt,ze){var kt=Nt||{};if(gr(kt,"quoteStyle")&&!gr(K,kt.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(gr(kt,"maxStringLength")&&(typeof kt.maxStringLength=="number"?kt.maxStringLength<0&&kt.maxStringLength!==1/0:kt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var yn=gr(kt,"customInspect")?kt.customInspect:!0;if(typeof yn!="boolean"&&yn!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(gr(kt,"indent")&&kt.indent!==null&&kt.indent!=="	"&&!(parseInt(kt.indent,10)===kt.indent&&kt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(gr(kt,"numericSeparator")&&typeof kt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var ti=kt.numericSeparator;if(typeof Ie>"u")return"undefined";if(Ie===null)return"null";if(typeof Ie=="boolean")return Ie?"true":"false";if(typeof Ie=="string")return Jn(Ie,kt);if(typeof Ie=="number"){if(Ie===0)return 1/0/Ie>0?"0":"-0";var $r=String(Ie);return ti?D(Ie,$r):$r}if(typeof Ie=="bigint"){var Rn=String(Ie)+"n";return ti?D(Ie,Rn):Rn}var Yo=typeof kt.depth>"u"?5:kt.depth;if(typeof Zt>"u"&&(Zt=0),Zt>=Yo&&Yo>0&&typeof Ie=="object")return Ge(Ie)?"[Array]":"[Object]";var wi=mo(kt,Zt);if(typeof ze>"u")ze=[];else if(Nr(ze,Ie)>=0)return"[Circular]";function Mr(Ui,Wn,Ha){if(Wn&&(ze=pe.call(ze),ze.push(Wn)),Ha){var go={depth:kt.depth};return gr(kt,"quoteStyle")&&(go.quoteStyle=kt.quoteStyle),ie(Ui,go,Zt+1,ze)}return ie(Ui,kt,Zt+1,ze)}if(typeof Ie=="function"&&!st(Ie)){var bi=Fi(Ie),Bi=Vn(Ie,Mr);return"[Function"+(bi?": "+bi:" (anonymous)")+"]"+(Bi.length>0?" { "+te.call(Bi,", ")+" }":"")}if(Bt(Ie)){var ws=we?z.call(String(Ie),/^(Symbol\(.*\))_[^)]*$/,"$1"):_e.call(Ie);return typeof Ie=="object"&&!we?ei(ws):ws}if(gn(Ie)){for(var Xt="<"+X.call(String(Ie.nodeName)),Sr=Ie.attributes||[],ri=0;ri<Sr.length;ri++)Xt+=" "+Sr[ri].name+"="+Ae(Oe(Sr[ri].value),"double",kt);return Xt+=">",Ie.childNodes&&Ie.childNodes.length&&(Xt+="..."),Xt+="</"+X.call(String(Ie.nodeName))+">",Xt}if(Ge(Ie)){if(Ie.length===0)return"[]";var Si=Vn(Ie,Mr);return wi&&!xs(Si)?"["+Us(Si,wi)+"]":"[ "+te.call(Si,", ")+" ]"}if(Se(Ie)){var Ei=Vn(Ie,Mr);return!("cause"in Error.prototype)&&"cause"in Ie&&!H.call(Ie,"cause")?"{ ["+String(Ie)+"] "+te.call(N.call("[cause]: "+Mr(Ie.cause),Ei),", ")+" }":Ei.length===0?"["+String(Ie)+"]":"{ ["+String(Ie)+"] "+te.call(Ei,", ")+" }"}if(typeof Ie=="object"&&yn){if(U&&typeof Ie[U]=="function"&&Y)return Y(Ie,{depth:Yo-Zt});if(yn!=="symbol"&&typeof Ie.inspect=="function")return Ie.inspect()}if(dr(Ie)){var ni=[];return r&&r.call(Ie,function(Ui,Wn){ni.push(Mr(Wn,Ie,!0)+" => "+Mr(Ui,Ie))}),xi("Map",t.call(Ie),ni,wi)}if(Pn(Ie)){var Al=[];return d&&d.call(Ie,function(Ui){Al.push(Mr(Ui,Ie))}),xi("Set",c.call(Ie),Al,wi)}if(vi(Ie))return _i("WeakMap");if(Fs(Ie))return _i("WeakSet");if(Hn(Ie))return _i("WeakRef");if(Qe(Ie))return ei(Mr(Number(Ie)));if(ft(Ie))return ei(Mr(Pe.call(Ie)));if(yt(Ie))return ei(T.call(Ie));if(at(Ie))return ei(Mr(String(Ie)));if(typeof window<"u"&&Ie===window)return"{ [object Window] }";if(typeof globalThis<"u"&&Ie===globalThis||typeof Da<"u"&&Ie===Da)return"{ [object globalThis] }";if(!Ke(Ie)&&!st(Ie)){var ii=Vn(Ie,Mr),bs=W?W(Ie)===Object.prototype:Ie instanceof Object||Ie.constructor===Object,qr=Ie instanceof Object?"":"null prototype",js=!bs&&Xe&&Object(Ie)===Ie&&Xe in Ie?V.call(Cr(Ie),8,-1):qr?"Object":"",Cl=bs||typeof Ie.constructor!="function"?"":Ie.constructor.name?Ie.constructor.name+" ":"",si=Cl+(js||qr?"["+te.call(N.call([],js||[],qr||[]),": ")+"] ":"");return ii.length===0?si+"{}":wi?si+"{"+Us(ii,wi)+"}":si+"{ "+te.call(ii,", ")+" }"}return String(Ie)};function Ae(ie,Ie,Nt){var Zt=Nt.quoteStyle||Ie,ze=K[Zt];return ze+ie+ze}function Oe(ie){return z.call(String(ie),/"/g,"&quot;")}function Fe(ie){return!Xe||!(typeof ie=="object"&&(Xe in ie||typeof ie[Xe]<"u"))}function Ge(ie){return Cr(ie)==="[object Array]"&&Fe(ie)}function Ke(ie){return Cr(ie)==="[object Date]"&&Fe(ie)}function st(ie){return Cr(ie)==="[object RegExp]"&&Fe(ie)}function Se(ie){return Cr(ie)==="[object Error]"&&Fe(ie)}function at(ie){return Cr(ie)==="[object String]"&&Fe(ie)}function Qe(ie){return Cr(ie)==="[object Number]"&&Fe(ie)}function yt(ie){return Cr(ie)==="[object Boolean]"&&Fe(ie)}function Bt(ie){if(we)return ie&&typeof ie=="object"&&ie instanceof Symbol;if(typeof ie=="symbol")return!0;if(!ie||typeof ie!="object"||!_e)return!1;try{return _e.call(ie),!0}catch{}return!1}function ft(ie){if(!ie||typeof ie!="object"||!Pe)return!1;try{return Pe.call(ie),!0}catch{}return!1}var _t=Object.prototype.hasOwnProperty||function(ie){return ie in this};function gr(ie,Ie){return _t.call(ie,Ie)}function Cr(ie){return R.call(ie)}function Fi(ie){if(ie.name)return ie.name;var Ie=L.call(k.call(ie),/^function\s*([\w$]+)/);return Ie?Ie[1]:null}function Nr(ie,Ie){if(ie.indexOf)return ie.indexOf(Ie);for(var Nt=0,Zt=ie.length;Nt<Zt;Nt++)if(ie[Nt]===Ie)return Nt;return-1}function dr(ie){if(!t||!ie||typeof ie!="object")return!1;try{t.call(ie);try{c.call(ie)}catch{return!0}return ie instanceof Map}catch{}return!1}function vi(ie){if(!v||!ie||typeof ie!="object")return!1;try{v.call(ie,v);try{f.call(ie,f)}catch{return!0}return ie instanceof WeakMap}catch{}return!1}function Hn(ie){if(!b||!ie||typeof ie!="object")return!1;try{return b.call(ie),!0}catch{}return!1}function Pn(ie){if(!c||!ie||typeof ie!="object")return!1;try{c.call(ie);try{t.call(ie)}catch{return!0}return ie instanceof Set}catch{}return!1}function Fs(ie){if(!f||!ie||typeof ie!="object")return!1;try{f.call(ie,f);try{v.call(ie,v)}catch{return!0}return ie instanceof WeakSet}catch{}return!1}function gn(ie){return!ie||typeof ie!="object"?!1:typeof HTMLElement<"u"&&ie instanceof HTMLElement?!0:typeof ie.nodeName=="string"&&typeof ie.getAttribute=="function"}function Jn(ie,Ie){if(ie.length>Ie.maxStringLength){var Nt=ie.length-Ie.maxStringLength,Zt="... "+Nt+" more character"+(Nt>1?"s":"");return Jn(V.call(ie,0,Ie.maxStringLength),Ie)+Zt}var ze=he[Ie.quoteStyle||"single"];ze.lastIndex=0;var kt=z.call(z.call(ie,ze,"\\$1"),/[\x00-\x1f]/g,Bs);return Ae(kt,"single",Ie)}function Bs(ie){var Ie=ie.charCodeAt(0),Nt={8:"b",9:"t",10:"n",12:"f",13:"r"}[Ie];return Nt?"\\"+Nt:"\\x"+(Ie<16?"0":"")+J.call(Ie.toString(16))}function ei(ie){return"Object("+ie+")"}function _i(ie){return ie+" { ? }"}function xi(ie,Ie,Nt,Zt){var ze=Zt?Us(Nt,Zt):te.call(Nt,", ");return ie+" ("+Ie+") {"+ze+"}"}function xs(ie){for(var Ie=0;Ie<ie.length;Ie++)if(Nr(ie[Ie],`
`)>=0)return!1;return!0}function mo(ie,Ie){var Nt;if(ie.indent==="	")Nt="	";else if(typeof ie.indent=="number"&&ie.indent>0)Nt=te.call(Array(ie.indent+1)," ");else return null;return{base:Nt,prev:te.call(Array(Ie+1),Nt)}}function Us(ie,Ie){if(ie.length===0)return"";var Nt=`
`+Ie.prev+Ie.base;return Nt+te.call(ie,","+Nt)+`
`+Ie.prev}function Vn(ie,Ie){var Nt=Ge(ie),Zt=[];if(Nt){Zt.length=ie.length;for(var ze=0;ze<ie.length;ze++)Zt[ze]=gr(ie,ze)?Ie(ie[ze],ie):""}var kt=typeof ve=="function"?ve(ie):[],yn;if(we){yn={};for(var ti=0;ti<kt.length;ti++)yn["$"+kt[ti]]=kt[ti]}for(var $r in ie)gr(ie,$r)&&(Nt&&String(Number($r))===$r&&$r<ie.length||we&&yn["$"+$r]instanceof Symbol||(fe.call(/[^\w$]/,$r)?Zt.push(Ie($r,ie)+": "+Ie(ie[$r],ie)):Zt.push($r+": "+Ie(ie[$r],ie))));if(typeof ve=="function")for(var Rn=0;Rn<kt.length;Rn++)H.call(ie,kt[Rn])&&Zt.push("["+Ie(kt[Rn])+"]: "+Ie(ie[kt[Rn]],ie));return Zt}return Yp}var Qp,jv;function $1(){if(jv)return Qp;jv=1;var n=Xf(),e=hh(),t=function(d,m,v){for(var w=d,f;(f=w.next)!=null;w=f)if(f.key===m)return w.next=f.next,v||(f.next=d.next,d.next=f),f},r=function(d,m){if(d){var v=t(d,m);return v&&v.value}},s=function(d,m,v){var w=t(d,m);w?w.value=v:d.next={key:m,next:d.next,value:v}},a=function(d,m){return d?!!t(d,m):!1},c=function(d,m){if(d)return t(d,m,!0)};return Qp=function(){var m,v={assert:function(w){if(!v.has(w))throw new e("Side channel does not contain "+n(w))},delete:function(w){var f=m&&m.next,y=c(m,w);return y&&f&&f===y&&(m=void 0),!!y},get:function(w){return r(m,w)},has:function(w){return a(m,w)},set:function(w,f){m||(m={next:void 0}),s(m,w,f)}};return v},Qp}var Zp,Gv;function sx(){return Gv||(Gv=1,Zp=Object),Zp}var Jp,zv;function q1(){return zv||(zv=1,Jp=Error),Jp}var em,Hv;function X1(){return Hv||(Hv=1,em=EvalError),em}var tm,Vv;function K1(){return Vv||(Vv=1,tm=RangeError),tm}var rm,Wv;function Y1(){return Wv||(Wv=1,rm=ReferenceError),rm}var nm,$v;function Q1(){return $v||($v=1,nm=SyntaxError),nm}var im,qv;function Z1(){return qv||(qv=1,im=URIError),im}var sm,Xv;function J1(){return Xv||(Xv=1,sm=Math.abs),sm}var om,Kv;function eb(){return Kv||(Kv=1,om=Math.floor),om}var am,Yv;function tb(){return Yv||(Yv=1,am=Math.max),am}var lm,Qv;function rb(){return Qv||(Qv=1,lm=Math.min),lm}var um,Zv;function nb(){return Zv||(Zv=1,um=Math.pow),um}var cm,Jv;function ib(){return Jv||(Jv=1,cm=Math.round),cm}var hm,e0;function sb(){return e0||(e0=1,hm=Number.isNaN||function(e){return e!==e}),hm}var dm,t0;function ob(){if(t0)return dm;t0=1;var n=sb();return dm=function(t){return n(t)||t===0?t:t<0?-1:1},dm}var fm,r0;function ab(){return r0||(r0=1,fm=Object.getOwnPropertyDescriptor),fm}var pm,n0;function ox(){if(n0)return pm;n0=1;var n=ab();if(n)try{n([],"length")}catch{n=null}return pm=n,pm}var mm,i0;function lb(){if(i0)return mm;i0=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return mm=n,mm}var gm,s0;function ub(){return s0||(s0=1,gm=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var s=42;e[t]=s;for(var a in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var c=Object.getOwnPropertySymbols(e);if(c.length!==1||c[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var d=Object.getOwnPropertyDescriptor(e,t);if(d.value!==s||d.enumerable!==!0)return!1}return!0}),gm}var ym,o0;function cb(){if(o0)return ym;o0=1;var n=typeof Symbol<"u"&&Symbol,e=ub();return ym=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},ym}var vm,a0;function ax(){return a0||(a0=1,vm=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),vm}var _m,l0;function lx(){if(l0)return _m;l0=1;var n=sx();return _m=n.getPrototypeOf||null,_m}var xm,u0;function hb(){if(u0)return xm;u0=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",s=function(m,v){for(var w=[],f=0;f<m.length;f+=1)w[f]=m[f];for(var y=0;y<v.length;y+=1)w[y+m.length]=v[y];return w},a=function(m,v){for(var w=[],f=v,y=0;f<m.length;f+=1,y+=1)w[y]=m[f];return w},c=function(d,m){for(var v="",w=0;w<d.length;w+=1)v+=d[w],w+1<d.length&&(v+=m);return v};return xm=function(m){var v=this;if(typeof v!="function"||e.apply(v)!==r)throw new TypeError(n+v);for(var w=a(arguments,1),f,y=function(){if(this instanceof f){var L=v.apply(this,s(w,arguments));return Object(L)===L?L:this}return v.apply(m,s(w,arguments))},b=t(0,v.length-w.length),T=[],R=0;R<b;R++)T[R]="$"+R;if(f=Function("binder","return function ("+c(T,",")+"){ return binder.apply(this,arguments); }")(y),v.prototype){var k=function(){};k.prototype=v.prototype,f.prototype=new k,k.prototype=null}return f},xm}var wm,c0;function Kf(){if(c0)return wm;c0=1;var n=hb();return wm=Function.prototype.bind||n,wm}var bm,h0;function xy(){return h0||(h0=1,bm=Function.prototype.call),bm}var Sm,d0;function ux(){return d0||(d0=1,Sm=Function.prototype.apply),Sm}var Em,f0;function db(){return f0||(f0=1,Em=typeof Reflect<"u"&&Reflect&&Reflect.apply),Em}var Tm,p0;function fb(){if(p0)return Tm;p0=1;var n=Kf(),e=ux(),t=xy(),r=db();return Tm=r||n.call(t,e),Tm}var Am,m0;function cx(){if(m0)return Am;m0=1;var n=Kf(),e=hh(),t=xy(),r=fb();return Am=function(a){if(a.length<1||typeof a[0]!="function")throw new e("a function is required");return r(n,t,a)},Am}var Cm,g0;function pb(){if(g0)return Cm;g0=1;var n=cx(),e=ox(),t;try{t=[].__proto__===Array.prototype}catch(c){if(!c||typeof c!="object"||!("code"in c)||c.code!=="ERR_PROTO_ACCESS")throw c}var r=!!t&&e&&e(Object.prototype,"__proto__"),s=Object,a=s.getPrototypeOf;return Cm=r&&typeof r.get=="function"?n([r.get]):typeof a=="function"?function(d){return a(d==null?d:s(d))}:!1,Cm}var Im,y0;function mb(){if(y0)return Im;y0=1;var n=ax(),e=lx(),t=pb();return Im=n?function(s){return n(s)}:e?function(s){if(!s||typeof s!="object"&&typeof s!="function")throw new TypeError("getProto: not an object");return e(s)}:t?function(s){return t(s)}:null,Im}var Pm,v0;function gb(){if(v0)return Pm;v0=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=Kf();return Pm=t.call(n,e),Pm}var Rm,_0;function wy(){if(_0)return Rm;_0=1;var n,e=sx(),t=q1(),r=X1(),s=K1(),a=Y1(),c=Q1(),d=hh(),m=Z1(),v=J1(),w=eb(),f=tb(),y=rb(),b=nb(),T=ib(),R=ob(),k=Function,L=function(st){try{return k('"use strict"; return ('+st+").constructor;")()}catch{}},V=ox(),z=lb(),J=function(){throw new d},X=V?(function(){try{return arguments.callee,J}catch{try{return V(arguments,"callee").get}catch{return J}}})():J,fe=cb()(),N=mb(),te=lx(),pe=ax(),Me=ux(),Pe=xy(),ve={},_e=typeof Uint8Array>"u"||!N?n:N(Uint8Array),we={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":fe&&N?N([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":ve,"%AsyncGenerator%":ve,"%AsyncGeneratorFunction%":ve,"%AsyncIteratorPrototype%":ve,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":r,"%Float16Array%":typeof Float16Array>"u"?n:Float16Array,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":k,"%GeneratorFunction%":ve,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":fe&&N?N(N([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!fe||!N?n:N(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":V,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":s,"%ReferenceError%":a,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!fe||!N?n:N(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":fe&&N?N(""[Symbol.iterator]()):n,"%Symbol%":fe?Symbol:n,"%SyntaxError%":c,"%ThrowTypeError%":X,"%TypedArray%":_e,"%TypeError%":d,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":m,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":Pe,"%Function.prototype.apply%":Me,"%Object.defineProperty%":z,"%Object.getPrototypeOf%":te,"%Math.abs%":v,"%Math.floor%":w,"%Math.max%":f,"%Math.min%":y,"%Math.pow%":b,"%Math.round%":T,"%Math.sign%":R,"%Reflect.getPrototypeOf%":pe};if(N)try{null.error}catch(st){var Xe=N(N(st));we["%Error.prototype%"]=Xe}var H=function st(Se){var at;if(Se==="%AsyncFunction%")at=L("async function () {}");else if(Se==="%GeneratorFunction%")at=L("function* () {}");else if(Se==="%AsyncGeneratorFunction%")at=L("async function* () {}");else if(Se==="%AsyncGenerator%"){var Qe=st("%AsyncGeneratorFunction%");Qe&&(at=Qe.prototype)}else if(Se==="%AsyncIteratorPrototype%"){var yt=st("%AsyncGenerator%");yt&&N&&(at=N(yt.prototype))}return we[Se]=at,at},W={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},D=Kf(),Y=gb(),G=D.call(Pe,Array.prototype.concat),U=D.call(Me,Array.prototype.splice),K=D.call(Pe,String.prototype.replace),he=D.call(Pe,String.prototype.slice),Ae=D.call(Pe,RegExp.prototype.exec),Oe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Fe=/\\(\\)?/g,Ge=function(Se){var at=he(Se,0,1),Qe=he(Se,-1);if(at==="%"&&Qe!=="%")throw new c("invalid intrinsic syntax, expected closing `%`");if(Qe==="%"&&at!=="%")throw new c("invalid intrinsic syntax, expected opening `%`");var yt=[];return K(Se,Oe,function(Bt,ft,_t,gr){yt[yt.length]=_t?K(gr,Fe,"$1"):ft||Bt}),yt},Ke=function(Se,at){var Qe=Se,yt;if(Y(W,Qe)&&(yt=W[Qe],Qe="%"+yt[0]+"%"),Y(we,Qe)){var Bt=we[Qe];if(Bt===ve&&(Bt=H(Qe)),typeof Bt>"u"&&!at)throw new d("intrinsic "+Se+" exists, but is not available. Please file an issue!");return{alias:yt,name:Qe,value:Bt}}throw new c("intrinsic "+Se+" does not exist!")};return Rm=function(Se,at){if(typeof Se!="string"||Se.length===0)throw new d("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof at!="boolean")throw new d('"allowMissing" argument must be a boolean');if(Ae(/^%?[^%]*%?$/,Se)===null)throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Qe=Ge(Se),yt=Qe.length>0?Qe[0]:"",Bt=Ke("%"+yt+"%",at),ft=Bt.name,_t=Bt.value,gr=!1,Cr=Bt.alias;Cr&&(yt=Cr[0],U(Qe,G([0,1],Cr)));for(var Fi=1,Nr=!0;Fi<Qe.length;Fi+=1){var dr=Qe[Fi],vi=he(dr,0,1),Hn=he(dr,-1);if((vi==='"'||vi==="'"||vi==="`"||Hn==='"'||Hn==="'"||Hn==="`")&&vi!==Hn)throw new c("property names with quotes must have matching quotes");if((dr==="constructor"||!Nr)&&(gr=!0),yt+="."+dr,ft="%"+yt+"%",Y(we,ft))_t=we[ft];else if(_t!=null){if(!(dr in _t)){if(!at)throw new d("base intrinsic for "+Se+" exists, but the property is not available.");return}if(V&&Fi+1>=Qe.length){var Pn=V(_t,dr);Nr=!!Pn,Nr&&"get"in Pn&&!("originalValue"in Pn.get)?_t=Pn.get:_t=_t[dr]}else Nr=Y(_t,dr),_t=_t[dr];Nr&&!gr&&(we[ft]=_t)}}return _t},Rm}var km,x0;function hx(){if(x0)return km;x0=1;var n=wy(),e=cx(),t=e([n("%String.prototype.indexOf%")]);return km=function(s,a){var c=n(s,!!a);return typeof c=="function"&&t(s,".prototype.")>-1?e([c]):c},km}var Mm,w0;function dx(){if(w0)return Mm;w0=1;var n=wy(),e=hx(),t=Xf(),r=hh(),s=n("%Map%",!0),a=e("Map.prototype.get",!0),c=e("Map.prototype.set",!0),d=e("Map.prototype.has",!0),m=e("Map.prototype.delete",!0),v=e("Map.prototype.size",!0);return Mm=!!s&&function(){var f,y={assert:function(b){if(!y.has(b))throw new r("Side channel does not contain "+t(b))},delete:function(b){if(f){var T=m(f,b);return v(f)===0&&(f=void 0),T}return!1},get:function(b){if(f)return a(f,b)},has:function(b){return f?d(f,b):!1},set:function(b,T){f||(f=new s),c(f,b,T)}};return y},Mm}var Om,b0;function yb(){if(b0)return Om;b0=1;var n=wy(),e=hx(),t=Xf(),r=dx(),s=hh(),a=n("%WeakMap%",!0),c=e("WeakMap.prototype.get",!0),d=e("WeakMap.prototype.set",!0),m=e("WeakMap.prototype.has",!0),v=e("WeakMap.prototype.delete",!0);return Om=a?function(){var f,y,b={assert:function(T){if(!b.has(T))throw new s("Side channel does not contain "+t(T))},delete:function(T){if(a&&T&&(typeof T=="object"||typeof T=="function")){if(f)return v(f,T)}else if(r&&y)return y.delete(T);return!1},get:function(T){return a&&T&&(typeof T=="object"||typeof T=="function")&&f?c(f,T):y&&y.get(T)},has:function(T){return a&&T&&(typeof T=="object"||typeof T=="function")&&f?m(f,T):!!y&&y.has(T)},set:function(T,R){a&&T&&(typeof T=="object"||typeof T=="function")?(f||(f=new a),d(f,T,R)):r&&(y||(y=r()),y.set(T,R))}};return b}:r,Om}var Dm,S0;function fx(){if(S0)return Dm;S0=1;var n=hh(),e=Xf(),t=$1(),r=dx(),s=yb(),a=s||r||t;return Dm=function(){var d,m={assert:function(v){if(!m.has(v))throw new n("Side channel does not contain "+e(v))},delete:function(v){return!!d&&d.delete(v)},get:function(v){return d&&d.get(v)},has:function(v){return!!d&&d.has(v)},set:function(v,w){d||(d=a()),d.set(v,w)}};return m},Dm}var Lm,E0;function by(){if(E0)return Lm;E0=1;var n=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Lm={default:t.RFC3986,formatters:{RFC1738:function(r){return n.call(r,e,"+")},RFC3986:function(r){return String(r)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},Lm}var Nm,T0;function px(){if(T0)return Nm;T0=1;var n=by(),e=fx(),t=Object.prototype.hasOwnProperty,r=Array.isArray,s=e(),a=function(N,te){return s.set(N,te),N},c=function(N){return s.has(N)},d=function(N){return s.get(N)},m=function(N,te){s.set(N,te)},v=(function(){for(var fe=[],N=0;N<256;++N)fe.push("%"+((N<16?"0":"")+N.toString(16)).toUpperCase());return fe})(),w=function(N){for(;N.length>1;){var te=N.pop(),pe=te.obj[te.prop];if(r(pe)){for(var Me=[],Pe=0;Pe<pe.length;++Pe)typeof pe[Pe]<"u"&&Me.push(pe[Pe]);te.obj[te.prop]=Me}}},f=function(N,te){for(var pe=te&&te.plainObjects?{__proto__:null}:{},Me=0;Me<N.length;++Me)typeof N[Me]<"u"&&(pe[Me]=N[Me]);return pe},y=function fe(N,te,pe){if(!te)return N;if(typeof te!="object"&&typeof te!="function"){if(r(N))N.push(te);else if(N&&typeof N=="object")if(c(N)){var Me=d(N)+1;N[Me]=te,m(N,Me)}else(pe&&(pe.plainObjects||pe.allowPrototypes)||!t.call(Object.prototype,te))&&(N[te]=!0);else return[N,te];return N}if(!N||typeof N!="object"){if(c(te)){for(var Pe=Object.keys(te),ve=pe&&pe.plainObjects?{__proto__:null,0:N}:{0:N},_e=0;_e<Pe.length;_e++){var we=parseInt(Pe[_e],10);ve[we+1]=te[Pe[_e]]}return a(ve,d(te)+1)}return[N].concat(te)}var Xe=N;return r(N)&&!r(te)&&(Xe=f(N,pe)),r(N)&&r(te)?(te.forEach(function(H,W){if(t.call(N,W)){var D=N[W];D&&typeof D=="object"&&H&&typeof H=="object"?N[W]=fe(D,H,pe):N.push(H)}else N[W]=H}),N):Object.keys(te).reduce(function(H,W){var D=te[W];return t.call(H,W)?H[W]=fe(H[W],D,pe):H[W]=D,H},Xe)},b=function(N,te){return Object.keys(te).reduce(function(pe,Me){return pe[Me]=te[Me],pe},N)},T=function(fe,N,te){var pe=fe.replace(/\+/g," ");if(te==="iso-8859-1")return pe.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(pe)}catch{return pe}},R=1024,k=function(N,te,pe,Me,Pe){if(N.length===0)return N;var ve=N;if(typeof N=="symbol"?ve=Symbol.prototype.toString.call(N):typeof N!="string"&&(ve=String(N)),pe==="iso-8859-1")return escape(ve).replace(/%u[0-9a-f]{4}/gi,function(Y){return"%26%23"+parseInt(Y.slice(2),16)+"%3B"});for(var _e="",we=0;we<ve.length;we+=R){for(var Xe=ve.length>=R?ve.slice(we,we+R):ve,H=[],W=0;W<Xe.length;++W){var D=Xe.charCodeAt(W);if(D===45||D===46||D===95||D===126||D>=48&&D<=57||D>=65&&D<=90||D>=97&&D<=122||Pe===n.RFC1738&&(D===40||D===41)){H[H.length]=Xe.charAt(W);continue}if(D<128){H[H.length]=v[D];continue}if(D<2048){H[H.length]=v[192|D>>6]+v[128|D&63];continue}if(D<55296||D>=57344){H[H.length]=v[224|D>>12]+v[128|D>>6&63]+v[128|D&63];continue}W+=1,D=65536+((D&1023)<<10|Xe.charCodeAt(W)&1023),H[H.length]=v[240|D>>18]+v[128|D>>12&63]+v[128|D>>6&63]+v[128|D&63]}_e+=H.join("")}return _e},L=function(N){for(var te=[{obj:{o:N},prop:"o"}],pe=[],Me=0;Me<te.length;++Me)for(var Pe=te[Me],ve=Pe.obj[Pe.prop],_e=Object.keys(ve),we=0;we<_e.length;++we){var Xe=_e[we],H=ve[Xe];typeof H=="object"&&H!==null&&pe.indexOf(H)===-1&&(te.push({obj:ve,prop:Xe}),pe.push(H))}return w(te),N},V=function(N){return Object.prototype.toString.call(N)==="[object RegExp]"},z=function(N){return!N||typeof N!="object"?!1:!!(N.constructor&&N.constructor.isBuffer&&N.constructor.isBuffer(N))},J=function(N,te,pe,Me){if(c(N)){var Pe=d(N)+1;return N[Pe]=te,m(N,Pe),N}var ve=[].concat(N,te);return ve.length>pe?a(f(ve,{plainObjects:Me}),ve.length-1):ve},X=function(N,te){if(r(N)){for(var pe=[],Me=0;Me<N.length;Me+=1)pe.push(te(N[Me]));return pe}return te(N)};return Nm={arrayToObject:f,assign:b,combine:J,compact:L,decode:T,encode:k,isBuffer:z,isOverflow:c,isRegExp:V,maybeMap:X,merge:y},Nm}var Fm,A0;function vb(){if(A0)return Fm;A0=1;var n=fx(),e=px(),t=by(),r=Object.prototype.hasOwnProperty,s={brackets:function(k){return k+"[]"},comma:"comma",indices:function(k,L){return k+"["+L+"]"},repeat:function(k){return k}},a=Array.isArray,c=Array.prototype.push,d=function(R,k){c.apply(R,a(k)?k:[k])},m=Date.prototype.toISOString,v=t.default,w={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:v,formatter:t.formatters[v],indices:!1,serializeDate:function(k){return m.call(k)},skipNulls:!1,strictNullHandling:!1},f=function(k){return typeof k=="string"||typeof k=="number"||typeof k=="boolean"||typeof k=="symbol"||typeof k=="bigint"},y={},b=function R(k,L,V,z,J,X,fe,N,te,pe,Me,Pe,ve,_e,we,Xe,H,W){for(var D=k,Y=W,G=0,U=!1;(Y=Y.get(y))!==void 0&&!U;){var K=Y.get(k);if(G+=1,typeof K<"u"){if(K===G)throw new RangeError("Cyclic object value");U=!0}typeof Y.get(y)>"u"&&(G=0)}if(typeof pe=="function"?D=pe(L,D):D instanceof Date?D=ve(D):V==="comma"&&a(D)&&(D=e.maybeMap(D,function(ft){return ft instanceof Date?ve(ft):ft})),D===null){if(X)return te&&!Xe?te(L,w.encoder,H,"key",_e):L;D=""}if(f(D)||e.isBuffer(D)){if(te){var he=Xe?L:te(L,w.encoder,H,"key",_e);return[we(he)+"="+we(te(D,w.encoder,H,"value",_e))]}return[we(L)+"="+we(String(D))]}var Ae=[];if(typeof D>"u")return Ae;var Oe;if(V==="comma"&&a(D))Xe&&te&&(D=e.maybeMap(D,te)),Oe=[{value:D.length>0?D.join(",")||null:void 0}];else if(a(pe))Oe=pe;else{var Fe=Object.keys(D);Oe=Me?Fe.sort(Me):Fe}var Ge=N?String(L).replace(/\./g,"%2E"):String(L),Ke=z&&a(D)&&D.length===1?Ge+"[]":Ge;if(J&&a(D)&&D.length===0)return Ke+"[]";for(var st=0;st<Oe.length;++st){var Se=Oe[st],at=typeof Se=="object"&&Se&&typeof Se.value<"u"?Se.value:D[Se];if(!(fe&&at===null)){var Qe=Pe&&N?String(Se).replace(/\./g,"%2E"):String(Se),yt=a(D)?typeof V=="function"?V(Ke,Qe):Ke:Ke+(Pe?"."+Qe:"["+Qe+"]");W.set(k,G);var Bt=n();Bt.set(y,W),d(Ae,R(at,yt,V,z,J,X,fe,N,V==="comma"&&Xe&&a(D)?null:te,pe,Me,Pe,ve,_e,we,Xe,H,Bt))}}return Ae},T=function(k){if(!k)return w;if(typeof k.allowEmptyArrays<"u"&&typeof k.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof k.encodeDotInKeys<"u"&&typeof k.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(k.encoder!==null&&typeof k.encoder<"u"&&typeof k.encoder!="function")throw new TypeError("Encoder has to be a function.");var L=k.charset||w.charset;if(typeof k.charset<"u"&&k.charset!=="utf-8"&&k.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var V=t.default;if(typeof k.format<"u"){if(!r.call(t.formatters,k.format))throw new TypeError("Unknown format option provided.");V=k.format}var z=t.formatters[V],J=w.filter;(typeof k.filter=="function"||a(k.filter))&&(J=k.filter);var X;if(k.arrayFormat in s?X=k.arrayFormat:"indices"in k?X=k.indices?"indices":"repeat":X=w.arrayFormat,"commaRoundTrip"in k&&typeof k.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var fe=typeof k.allowDots>"u"?k.encodeDotInKeys===!0?!0:w.allowDots:!!k.allowDots;return{addQueryPrefix:typeof k.addQueryPrefix=="boolean"?k.addQueryPrefix:w.addQueryPrefix,allowDots:fe,allowEmptyArrays:typeof k.allowEmptyArrays=="boolean"?!!k.allowEmptyArrays:w.allowEmptyArrays,arrayFormat:X,charset:L,charsetSentinel:typeof k.charsetSentinel=="boolean"?k.charsetSentinel:w.charsetSentinel,commaRoundTrip:!!k.commaRoundTrip,delimiter:typeof k.delimiter>"u"?w.delimiter:k.delimiter,encode:typeof k.encode=="boolean"?k.encode:w.encode,encodeDotInKeys:typeof k.encodeDotInKeys=="boolean"?k.encodeDotInKeys:w.encodeDotInKeys,encoder:typeof k.encoder=="function"?k.encoder:w.encoder,encodeValuesOnly:typeof k.encodeValuesOnly=="boolean"?k.encodeValuesOnly:w.encodeValuesOnly,filter:J,format:V,formatter:z,serializeDate:typeof k.serializeDate=="function"?k.serializeDate:w.serializeDate,skipNulls:typeof k.skipNulls=="boolean"?k.skipNulls:w.skipNulls,sort:typeof k.sort=="function"?k.sort:null,strictNullHandling:typeof k.strictNullHandling=="boolean"?k.strictNullHandling:w.strictNullHandling}};return Fm=function(R,k){var L=R,V=T(k),z,J;typeof V.filter=="function"?(J=V.filter,L=J("",L)):a(V.filter)&&(J=V.filter,z=J);var X=[];if(typeof L!="object"||L===null)return"";var fe=s[V.arrayFormat],N=fe==="comma"&&V.commaRoundTrip;z||(z=Object.keys(L)),V.sort&&z.sort(V.sort);for(var te=n(),pe=0;pe<z.length;++pe){var Me=z[pe],Pe=L[Me];V.skipNulls&&Pe===null||d(X,b(Pe,Me,fe,N,V.allowEmptyArrays,V.strictNullHandling,V.skipNulls,V.encodeDotInKeys,V.encode?V.encoder:null,V.filter,V.sort,V.allowDots,V.serializeDate,V.format,V.formatter,V.encodeValuesOnly,V.charset,te))}var ve=X.join(V.delimiter),_e=V.addQueryPrefix===!0?"?":"";return V.charsetSentinel&&(V.charset==="iso-8859-1"?_e+="utf8=%26%2310003%3B&":_e+="utf8=%E2%9C%93&"),ve.length>0?_e+ve:""},Fm}var Bm,C0;function _b(){if(C0)return Bm;C0=1;var n=px(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},s=function(b){return b.replace(/&#(\d+);/g,function(T,R){return String.fromCharCode(parseInt(R,10))})},a=function(b,T,R){if(b&&typeof b=="string"&&T.comma&&b.indexOf(",")>-1)return b.split(",");if(T.throwOnLimitExceeded&&R>=T.arrayLimit)throw new RangeError("Array limit exceeded. Only "+T.arrayLimit+" element"+(T.arrayLimit===1?"":"s")+" allowed in an array.");return b},c="utf8=%26%2310003%3B",d="utf8=%E2%9C%93",m=function(T,R){var k={__proto__:null},L=R.ignoreQueryPrefix?T.replace(/^\?/,""):T;L=L.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var V=R.parameterLimit===1/0?void 0:R.parameterLimit,z=L.split(R.delimiter,R.throwOnLimitExceeded?V+1:V);if(R.throwOnLimitExceeded&&z.length>V)throw new RangeError("Parameter limit exceeded. Only "+V+" parameter"+(V===1?"":"s")+" allowed.");var J=-1,X,fe=R.charset;if(R.charsetSentinel)for(X=0;X<z.length;++X)z[X].indexOf("utf8=")===0&&(z[X]===d?fe="utf-8":z[X]===c&&(fe="iso-8859-1"),J=X,X=z.length);for(X=0;X<z.length;++X)if(X!==J){var N=z[X],te=N.indexOf("]="),pe=te===-1?N.indexOf("="):te+1,Me,Pe;if(pe===-1?(Me=R.decoder(N,r.decoder,fe,"key"),Pe=R.strictNullHandling?null:""):(Me=R.decoder(N.slice(0,pe),r.decoder,fe,"key"),Me!==null&&(Pe=n.maybeMap(a(N.slice(pe+1),R,t(k[Me])?k[Me].length:0),function(_e){return R.decoder(_e,r.decoder,fe,"value")}))),Pe&&R.interpretNumericEntities&&fe==="iso-8859-1"&&(Pe=s(String(Pe))),N.indexOf("[]=")>-1&&(Pe=t(Pe)?[Pe]:Pe),Me!==null){var ve=e.call(k,Me);ve&&R.duplicates==="combine"?k[Me]=n.combine(k[Me],Pe,R.arrayLimit,R.plainObjects):(!ve||R.duplicates==="last")&&(k[Me]=Pe)}}return k},v=function(b,T,R,k){var L=0;if(b.length>0&&b[b.length-1]==="[]"){var V=b.slice(0,-1).join("");L=Array.isArray(T)&&T[V]?T[V].length:0}for(var z=k?T:a(T,R,L),J=b.length-1;J>=0;--J){var X,fe=b[J];if(fe==="[]"&&R.parseArrays)n.isOverflow(z)?X=z:X=R.allowEmptyArrays&&(z===""||R.strictNullHandling&&z===null)?[]:n.combine([],z,R.arrayLimit,R.plainObjects);else{X=R.plainObjects?{__proto__:null}:{};var N=fe.charAt(0)==="["&&fe.charAt(fe.length-1)==="]"?fe.slice(1,-1):fe,te=R.decodeDotInKeys?N.replace(/%2E/g,"."):N,pe=parseInt(te,10);!R.parseArrays&&te===""?X={0:z}:!isNaN(pe)&&fe!==te&&String(pe)===te&&pe>=0&&R.parseArrays&&pe<=R.arrayLimit?(X=[],X[pe]=z):te!=="__proto__"&&(X[te]=z)}z=X}return z},w=function(T,R){var k=R.allowDots?T.replace(/\.([^.[]+)/g,"[$1]"):T;if(R.depth<=0)return!R.plainObjects&&e.call(Object.prototype,k)&&!R.allowPrototypes?void 0:[k];var L=/(\[[^[\]]*])/,V=/(\[[^[\]]*])/g,z=L.exec(k),J=z?k.slice(0,z.index):k,X=[];if(J){if(!R.plainObjects&&e.call(Object.prototype,J)&&!R.allowPrototypes)return;X.push(J)}for(var fe=0;(z=V.exec(k))!==null&&fe<R.depth;){fe+=1;var N=z[1].slice(1,-1);if(!R.plainObjects&&e.call(Object.prototype,N)&&!R.allowPrototypes)return;X.push(z[1])}if(z){if(R.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+R.depth+" and strictDepth is true");X.push("["+k.slice(z.index)+"]")}return X},f=function(T,R,k,L){if(T){var V=w(T,k);if(V)return v(V,R,k,L)}},y=function(T){if(!T)return r;if(typeof T.allowEmptyArrays<"u"&&typeof T.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof T.decodeDotInKeys<"u"&&typeof T.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(T.decoder!==null&&typeof T.decoder<"u"&&typeof T.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof T.charset<"u"&&T.charset!=="utf-8"&&T.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof T.throwOnLimitExceeded<"u"&&typeof T.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var R=typeof T.charset>"u"?r.charset:T.charset,k=typeof T.duplicates>"u"?r.duplicates:T.duplicates;if(k!=="combine"&&k!=="first"&&k!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var L=typeof T.allowDots>"u"?T.decodeDotInKeys===!0?!0:r.allowDots:!!T.allowDots;return{allowDots:L,allowEmptyArrays:typeof T.allowEmptyArrays=="boolean"?!!T.allowEmptyArrays:r.allowEmptyArrays,allowPrototypes:typeof T.allowPrototypes=="boolean"?T.allowPrototypes:r.allowPrototypes,allowSparse:typeof T.allowSparse=="boolean"?T.allowSparse:r.allowSparse,arrayLimit:typeof T.arrayLimit=="number"?T.arrayLimit:r.arrayLimit,charset:R,charsetSentinel:typeof T.charsetSentinel=="boolean"?T.charsetSentinel:r.charsetSentinel,comma:typeof T.comma=="boolean"?T.comma:r.comma,decodeDotInKeys:typeof T.decodeDotInKeys=="boolean"?T.decodeDotInKeys:r.decodeDotInKeys,decoder:typeof T.decoder=="function"?T.decoder:r.decoder,delimiter:typeof T.delimiter=="string"||n.isRegExp(T.delimiter)?T.delimiter:r.delimiter,depth:typeof T.depth=="number"||T.depth===!1?+T.depth:r.depth,duplicates:k,ignoreQueryPrefix:T.ignoreQueryPrefix===!0,interpretNumericEntities:typeof T.interpretNumericEntities=="boolean"?T.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof T.parameterLimit=="number"?T.parameterLimit:r.parameterLimit,parseArrays:T.parseArrays!==!1,plainObjects:typeof T.plainObjects=="boolean"?T.plainObjects:r.plainObjects,strictDepth:typeof T.strictDepth=="boolean"?!!T.strictDepth:r.strictDepth,strictNullHandling:typeof T.strictNullHandling=="boolean"?T.strictNullHandling:r.strictNullHandling,throwOnLimitExceeded:typeof T.throwOnLimitExceeded=="boolean"?T.throwOnLimitExceeded:!1}};return Bm=function(b,T){var R=y(T);if(b===""||b===null||typeof b>"u")return R.plainObjects?{__proto__:null}:{};for(var k=typeof b=="string"?m(b,R):b,L=R.plainObjects?{__proto__:null}:{},V=Object.keys(k),z=0;z<V.length;++z){var J=V[z],X=f(J,k[J],R,typeof b=="string");L=n.merge(L,X,R)}return R.allowSparse===!0?L:n.compact(L)},Bm}var Um,I0;function xb(){if(I0)return Um;I0=1;var n=vb(),e=_b(),t=by();return Um={formats:t,parse:e,stringify:n},Um}var P0;function wb(){if(P0)return Qu;P0=1;var n=z1();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,a=["<",">",'"',"`"," ","\r",`
`,"	"],c=["{","}","|","\\","^","`"].concat(a),d=["'"].concat(c),m=["%","/","?",";","#"].concat(d),v=["/","?","#"],w=255,f=/^[+a-z0-9A-Z_-]{0,63}$/,y=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,b={javascript:!0,"javascript:":!0},T={javascript:!0,"javascript:":!0},R={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},k=xb();function L(X,fe,N){if(X&&typeof X=="object"&&X instanceof e)return X;var te=new e;return te.parse(X,fe,N),te}e.prototype.parse=function(X,fe,N){if(typeof X!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof X);var te=X.indexOf("?"),pe=te!==-1&&te<X.indexOf("#")?"?":"#",Me=X.split(pe),Pe=/\\/g;Me[0]=Me[0].replace(Pe,"/"),X=Me.join(pe);var ve=X;if(ve=ve.trim(),!N&&X.split("#").length===1){var _e=s.exec(ve);if(_e)return this.path=ve,this.href=ve,this.pathname=_e[1],_e[2]?(this.search=_e[2],fe?this.query=k.parse(this.search.substr(1)):this.query=this.search.substr(1)):fe&&(this.search="",this.query={}),this}var we=t.exec(ve);if(we){we=we[0];var Xe=we.toLowerCase();this.protocol=Xe,ve=ve.substr(we.length)}if(N||we||ve.match(/^\/\/[^@/]+@[^@/]+/)){var H=ve.substr(0,2)==="//";H&&!(we&&T[we])&&(ve=ve.substr(2),this.slashes=!0)}if(!T[we]&&(H||we&&!R[we])){for(var W=-1,D=0;D<v.length;D++){var Y=ve.indexOf(v[D]);Y!==-1&&(W===-1||Y<W)&&(W=Y)}var G,U;W===-1?U=ve.lastIndexOf("@"):U=ve.lastIndexOf("@",W),U!==-1&&(G=ve.slice(0,U),ve=ve.slice(U+1),this.auth=decodeURIComponent(G)),W=-1;for(var D=0;D<m.length;D++){var Y=ve.indexOf(m[D]);Y!==-1&&(W===-1||Y<W)&&(W=Y)}W===-1&&(W=ve.length),this.host=ve.slice(0,W),ve=ve.slice(W),this.parseHost(),this.hostname=this.hostname||"";var K=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!K)for(var he=this.hostname.split(/\./),D=0,Ae=he.length;D<Ae;D++){var Oe=he[D];if(Oe&&!Oe.match(f)){for(var Fe="",Ge=0,Ke=Oe.length;Ge<Ke;Ge++)Oe.charCodeAt(Ge)>127?Fe+="x":Fe+=Oe[Ge];if(!Fe.match(f)){var st=he.slice(0,D),Se=he.slice(D+1),at=Oe.match(y);at&&(st.push(at[1]),Se.unshift(at[2])),Se.length&&(ve="/"+Se.join(".")+ve),this.hostname=st.join(".");break}}}this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),K||(this.hostname=n.toASCII(this.hostname));var Qe=this.port?":"+this.port:"",yt=this.hostname||"";this.host=yt+Qe,this.href+=this.host,K&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),ve[0]!=="/"&&(ve="/"+ve))}if(!b[Xe])for(var D=0,Ae=d.length;D<Ae;D++){var Bt=d[D];if(ve.indexOf(Bt)!==-1){var ft=encodeURIComponent(Bt);ft===Bt&&(ft=escape(Bt)),ve=ve.split(Bt).join(ft)}}var _t=ve.indexOf("#");_t!==-1&&(this.hash=ve.substr(_t),ve=ve.slice(0,_t));var gr=ve.indexOf("?");if(gr!==-1?(this.search=ve.substr(gr),this.query=ve.substr(gr+1),fe&&(this.query=k.parse(this.query)),ve=ve.slice(0,gr)):fe&&(this.search="",this.query={}),ve&&(this.pathname=ve),R[Xe]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Qe=this.pathname||"",Cr=this.search||"";this.path=Qe+Cr}return this.href=this.format(),this};function V(X){return typeof X=="string"&&(X=L(X)),X instanceof e?X.format():e.prototype.format.call(X)}e.prototype.format=function(){var X=this.auth||"";X&&(X=encodeURIComponent(X),X=X.replace(/%3A/i,":"),X+="@");var fe=this.protocol||"",N=this.pathname||"",te=this.hash||"",pe=!1,Me="";this.host?pe=X+this.host:this.hostname&&(pe=X+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(pe+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(Me=k.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var Pe=this.search||Me&&"?"+Me||"";return fe&&fe.substr(-1)!==":"&&(fe+=":"),this.slashes||(!fe||R[fe])&&pe!==!1?(pe="//"+(pe||""),N&&N.charAt(0)!=="/"&&(N="/"+N)):pe||(pe=""),te&&te.charAt(0)!=="#"&&(te="#"+te),Pe&&Pe.charAt(0)!=="?"&&(Pe="?"+Pe),N=N.replace(/[?#]/g,function(ve){return encodeURIComponent(ve)}),Pe=Pe.replace("#","%23"),fe+pe+N+Pe+te};function z(X,fe){return L(X,!1,!0).resolve(fe)}e.prototype.resolve=function(X){return this.resolveObject(L(X,!1,!0)).format()};function J(X,fe){return X?L(X,!1,!0).resolveObject(fe):fe}return e.prototype.resolveObject=function(X){if(typeof X=="string"){var fe=new e;fe.parse(X,!1,!0),X=fe}for(var N=new e,te=Object.keys(this),pe=0;pe<te.length;pe++){var Me=te[pe];N[Me]=this[Me]}if(N.hash=X.hash,X.href==="")return N.href=N.format(),N;if(X.slashes&&!X.protocol){for(var Pe=Object.keys(X),ve=0;ve<Pe.length;ve++){var _e=Pe[ve];_e!=="protocol"&&(N[_e]=X[_e])}return R[N.protocol]&&N.hostname&&!N.pathname&&(N.pathname="/",N.path=N.pathname),N.href=N.format(),N}if(X.protocol&&X.protocol!==N.protocol){if(!R[X.protocol]){for(var we=Object.keys(X),Xe=0;Xe<we.length;Xe++){var H=we[Xe];N[H]=X[H]}return N.href=N.format(),N}if(N.protocol=X.protocol,!X.host&&!T[X.protocol]){for(var Ae=(X.pathname||"").split("/");Ae.length&&!(X.host=Ae.shift()););X.host||(X.host=""),X.hostname||(X.hostname=""),Ae[0]!==""&&Ae.unshift(""),Ae.length<2&&Ae.unshift(""),N.pathname=Ae.join("/")}else N.pathname=X.pathname;if(N.search=X.search,N.query=X.query,N.host=X.host||"",N.auth=X.auth,N.hostname=X.hostname||X.host,N.port=X.port,N.pathname||N.search){var W=N.pathname||"",D=N.search||"";N.path=W+D}return N.slashes=N.slashes||X.slashes,N.href=N.format(),N}var Y=N.pathname&&N.pathname.charAt(0)==="/",G=X.host||X.pathname&&X.pathname.charAt(0)==="/",U=G||Y||N.host&&X.pathname,K=U,he=N.pathname&&N.pathname.split("/")||[],Ae=X.pathname&&X.pathname.split("/")||[],Oe=N.protocol&&!R[N.protocol];if(Oe&&(N.hostname="",N.port=null,N.host&&(he[0]===""?he[0]=N.host:he.unshift(N.host)),N.host="",X.protocol&&(X.hostname=null,X.port=null,X.host&&(Ae[0]===""?Ae[0]=X.host:Ae.unshift(X.host)),X.host=null),U=U&&(Ae[0]===""||he[0]==="")),G)N.host=X.host||X.host===""?X.host:N.host,N.hostname=X.hostname||X.hostname===""?X.hostname:N.hostname,N.search=X.search,N.query=X.query,he=Ae;else if(Ae.length)he||(he=[]),he.pop(),he=he.concat(Ae),N.search=X.search,N.query=X.query;else if(X.search!=null){if(Oe){N.host=he.shift(),N.hostname=N.host;var Fe=N.host&&N.host.indexOf("@")>0?N.host.split("@"):!1;Fe&&(N.auth=Fe.shift(),N.hostname=Fe.shift(),N.host=N.hostname)}return N.search=X.search,N.query=X.query,(N.pathname!==null||N.search!==null)&&(N.path=(N.pathname?N.pathname:"")+(N.search?N.search:"")),N.href=N.format(),N}if(!he.length)return N.pathname=null,N.search?N.path="/"+N.search:N.path=null,N.href=N.format(),N;for(var Ge=he.slice(-1)[0],Ke=(N.host||X.host||he.length>1)&&(Ge==="."||Ge==="..")||Ge==="",st=0,Se=he.length;Se>=0;Se--)Ge=he[Se],Ge==="."?he.splice(Se,1):Ge===".."?(he.splice(Se,1),st++):st&&(he.splice(Se,1),st--);if(!U&&!K)for(;st--;st)he.unshift("..");U&&he[0]!==""&&(!he[0]||he[0].charAt(0)!=="/")&&he.unshift(""),Ke&&he.join("/").substr(-1)!=="/"&&he.push("");var at=he[0]===""||he[0]&&he[0].charAt(0)==="/";if(Oe){N.hostname=at?"":he.length?he.shift():"",N.host=N.hostname;var Fe=N.host&&N.host.indexOf("@")>0?N.host.split("@"):!1;Fe&&(N.auth=Fe.shift(),N.hostname=Fe.shift(),N.host=N.hostname)}return U=U||N.host&&he.length,U&&!at&&he.unshift(""),he.length>0?N.pathname=he.join("/"):(N.pathname=null,N.path=null),(N.pathname!==null||N.search!==null)&&(N.path=(N.pathname?N.pathname:"")+(N.search?N.search:"")),N.auth=X.auth||N.auth,N.slashes=N.slashes||X.slashes,N.href=N.format(),N},e.prototype.parseHost=function(){var X=this.host,fe=r.exec(X);fe&&(fe=fe[0],fe!==":"&&(this.port=fe.substr(1)),X=X.substr(0,X.length-fe.length)),X&&(this.hostname=X)},Qu.parse=L,Qu.resolve=z,Qu.resolveObject=J,Qu.format=V,Qu.Url=e,Qu}wb();const R0={};function Jt(n,e,t=3){if(R0[e])return;let r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${n}`):(r=r.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${n}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${n}`),console.warn(r))),R0[e]=!0}function Bo(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function Vh(n){return n.split("?")[0].split("#")[0]}function bb(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Sb(n,e,t){return n.replace(new RegExp(bb(e),"g"),t)}function Eb(n,e){let t="",r=0,s=-1,a=0,c=-1;for(let d=0;d<=n.length;++d){if(d<n.length)c=n.charCodeAt(d);else{if(c===47)break;c=47}if(c===47){if(!(s===d-1||a===1))if(s!==d-1&&a===2){if(t.length<2||r!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const m=t.lastIndexOf("/");if(m!==t.length-1){m===-1?(t="",r=0):(t=t.slice(0,m),r=t.length-1-t.lastIndexOf("/")),s=d,a=0;continue}}else if(t.length===2||t.length===1){t="",r=0,s=d,a=0;continue}}}else t.length>0?t+=`/${n.slice(s+1,d)}`:t=n.slice(s+1,d),r=d-s-1;s=d,a=0}else c===46&&a!==-1?++a:a=-1}return t}const zn={toPosix(n){return Sb(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){Bo(n),n=this.toPosix(n);const e=/^file:\/\/\//.exec(n);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(n);return t?t[0]:""},toAbsolute(n,e,t){if(Bo(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const r=Vh(this.toPosix(e??gt.ADAPTER.getBaseUrl())),s=Vh(this.toPosix(t??this.rootname(r)));return n=this.toPosix(n),n.startsWith("/")?zn.join(s,n.slice(1)):this.isAbsolute(n)?n:this.join(r,n)},normalize(n){if(Bo(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let e="";const t=n.startsWith("/");this.hasProtocol(n)&&(e=this.rootname(n),n=n.slice(e.length));const r=n.endsWith("/");return n=Eb(n),n.length>0&&r&&(n+="/"),t?`/${n}`:e+n},isAbsolute(n){return Bo(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let e;for(let t=0;t<n.length;++t){const r=n[t];if(Bo(r),r.length>0)if(e===void 0)e=r;else{const s=n[t-1]??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?e+=`/../${r}`:e+=`/${r}`}}return e===void 0?".":this.normalize(e)},dirname(n){if(Bo(n),n.length===0)return".";n=this.toPosix(n);let e=n.charCodeAt(0);const t=e===47;let r=-1,s=!0;const a=this.getProtocol(n),c=n;n=n.slice(a.length);for(let d=n.length-1;d>=1;--d)if(e=n.charCodeAt(d),e===47){if(!s){r=d;break}}else s=!1;return r===-1?t?"/":this.isUrl(c)?a+n:a:t&&r===1?"//":a+n.slice(0,r)},rootname(n){Bo(n),n=this.toPosix(n);let e="";if(n.startsWith("/")?e="/":e=this.getProtocol(n),this.isUrl(n)){const t=n.indexOf("/",e.length);t!==-1?e=n.slice(0,t):e=n,e.endsWith("/")||(e+="/")}return e},basename(n,e){Bo(n),e&&Bo(e),n=Vh(this.toPosix(n));let t=0,r=-1,s=!0,a;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e.length===n.length&&e===n)return"";let c=e.length-1,d=-1;for(a=n.length-1;a>=0;--a){const m=n.charCodeAt(a);if(m===47){if(!s){t=a+1;break}}else d===-1&&(s=!1,d=a+1),c>=0&&(m===e.charCodeAt(c)?--c===-1&&(r=a):(c=-1,r=d))}return t===r?r=d:r===-1&&(r=n.length),n.slice(t,r)}for(a=n.length-1;a>=0;--a)if(n.charCodeAt(a)===47){if(!s){t=a+1;break}}else r===-1&&(s=!1,r=a+1);return r===-1?"":n.slice(t,r)},extname(n){Bo(n),n=Vh(this.toPosix(n));let e=-1,t=0,r=-1,s=!0,a=0;for(let c=n.length-1;c>=0;--c){const d=n.charCodeAt(c);if(d===47){if(!s){t=c+1;break}continue}r===-1&&(s=!1,r=c+1),d===46?e===-1?e=c:a!==1&&(a=1):e!==-1&&(a=-1)}return e===-1||r===-1||a===0||a===1&&e===r-1&&e===t+1?"":n.slice(e,r)},parse(n){Bo(n);const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;n=Vh(this.toPosix(n));let t=n.charCodeAt(0);const r=this.isAbsolute(n);let s;e.root=this.rootname(n),r||this.hasProtocol(n)?s=1:s=0;let a=-1,c=0,d=-1,m=!0,v=n.length-1,w=0;for(;v>=s;--v){if(t=n.charCodeAt(v),t===47){if(!m){c=v+1;break}continue}d===-1&&(m=!1,d=v+1),t===46?a===-1?a=v:w!==1&&(w=1):a!==-1&&(w=-1)}return a===-1||d===-1||w===0||w===1&&a===d-1&&a===c+1?d!==-1&&(c===0&&r?e.base=e.name=n.slice(1,d):e.base=e.name=n.slice(c,d)):(c===0&&r?(e.name=n.slice(1,a),e.base=n.slice(1,d)):(e.name=n.slice(c,a),e.base=n.slice(c,d)),e.ext=n.slice(a,d)),e.dir=this.dirname(n),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let jm;async function Tb(){return jm??(jm=(async()=>{const n=document.createElement("canvas").getContext("webgl");if(!n)return vs.UNPACK;const e=await new Promise(a=>{const c=document.createElement("video");c.onloadeddata=()=>a(c),c.onerror=()=>a(null),c.autoplay=!1,c.crossOrigin="anonymous",c.preload="auto",c.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",c.load()});if(!e)return vs.UNPACK;const t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t);const r=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,r),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e);const s=new Uint8Array(4);return n.readPixels(0,0,1,1,n.RGBA,n.UNSIGNED_BYTE,s),n.deleteFramebuffer(r),n.deleteTexture(t),n.getExtension("WEBGL_lose_context")?.loseContext(),s[0]<=s[3]?vs.PMA:vs.UNPACK})()),jm}let Gm;function Ab(){return typeof Gm>"u"&&(Gm=(function(){const n={stencil:!0,failIfMajorPerformanceCaveat:gt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!gt.ADAPTER.getWebGLRenderingContext())return!1;const e=gt.ADAPTER.createCanvas();let t=e.getContext("webgl",n)||e.getContext("experimental-webgl",n);const r=!!t?.getContextAttributes()?.stencil;if(t){const s=t.getExtension("WEBGL_lose_context");s&&s.loseContext()}return t=null,r}catch{return!1}})()),Gm}var Cb={grad:.9,turn:360,rad:360/(2*Math.PI)},ml=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},jn=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},uo=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},mx=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},k0=function(n){return{r:uo(n.r,0,255),g:uo(n.g,0,255),b:uo(n.b,0,255),a:uo(n.a)}},zm=function(n){return{r:jn(n.r),g:jn(n.g),b:jn(n.b),a:jn(n.a,3)}},Ib=/^#([0-9a-f]{3,8})$/i,qd=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},gx=function(n){var e=n.r,t=n.g,r=n.b,s=n.a,a=Math.max(e,t,r),c=a-Math.min(e,t,r),d=c?a===e?(t-r)/c:a===t?2+(r-e)/c:4+(e-t)/c:0;return{h:60*(d<0?d+6:d),s:a?c/a*100:0,v:a/255*100,a:s}},yx=function(n){var e=n.h,t=n.s,r=n.v,s=n.a;e=e/360*6,t/=100,r/=100;var a=Math.floor(e),c=r*(1-t),d=r*(1-(e-a)*t),m=r*(1-(1-e+a)*t),v=a%6;return{r:255*[r,d,c,c,m,r][v],g:255*[m,r,r,d,c,c][v],b:255*[c,c,m,r,r,d][v],a:s}},M0=function(n){return{h:mx(n.h),s:uo(n.s,0,100),l:uo(n.l,0,100),a:uo(n.a)}},O0=function(n){return{h:jn(n.h),s:jn(n.s),l:jn(n.l),a:jn(n.a,3)}},D0=function(n){return yx((t=(e=n).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},sd=function(n){return{h:(e=gx(n)).h,s:(s=(200-(t=e.s))*(r=e.v)/100)>0&&s<200?t*r/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,t,r,s},Pb=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Rb=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,kb=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Mb=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ag={string:[[function(n){var e=Ib.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?jn(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?jn(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=kb.exec(n)||Mb.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:k0({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=Pb.exec(n)||Rb.exec(n);if(!e)return null;var t,r,s=M0({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(Cb[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return D0(s)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,r=n.b,s=n.a,a=s===void 0?1:s;return ml(e)&&ml(t)&&ml(r)?k0({r:Number(e),g:Number(t),b:Number(r),a:Number(a)}):null},"rgb"],[function(n){var e=n.h,t=n.s,r=n.l,s=n.a,a=s===void 0?1:s;if(!ml(e)||!ml(t)||!ml(r))return null;var c=M0({h:Number(e),s:Number(t),l:Number(r),a:Number(a)});return D0(c)},"hsl"],[function(n){var e=n.h,t=n.s,r=n.v,s=n.a,a=s===void 0?1:s;if(!ml(e)||!ml(t)||!ml(r))return null;var c=(function(d){return{h:mx(d.h),s:uo(d.s,0,100),v:uo(d.v,0,100),a:uo(d.a)}})({h:Number(e),s:Number(t),v:Number(r),a:Number(a)});return yx(c)},"hsv"]]},L0=function(n,e){for(var t=0;t<e.length;t++){var r=e[t][0](n);if(r)return[r,e[t][1]]}return[null,void 0]},Ob=function(n){return typeof n=="string"?L0(n.trim(),Ag.string):typeof n=="object"&&n!==null?L0(n,Ag.object):[null,void 0]},Hm=function(n,e){var t=sd(n);return{h:t.h,s:uo(t.s+100*e,0,100),l:t.l,a:t.a}},Vm=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},N0=function(n,e){var t=sd(n);return{h:t.h,s:t.s,l:uo(t.l+100*e,0,100),a:t.a}},Cg=(function(){function n(e){this.parsed=Ob(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return jn(Vm(this.rgba),2)},n.prototype.isDark=function(){return Vm(this.rgba)<.5},n.prototype.isLight=function(){return Vm(this.rgba)>=.5},n.prototype.toHex=function(){return e=zm(this.rgba),t=e.r,r=e.g,s=e.b,c=(a=e.a)<1?qd(jn(255*a)):"","#"+qd(t)+qd(r)+qd(s)+c;var e,t,r,s,a,c},n.prototype.toRgb=function(){return zm(this.rgba)},n.prototype.toRgbString=function(){return e=zm(this.rgba),t=e.r,r=e.g,s=e.b,(a=e.a)<1?"rgba("+t+", "+r+", "+s+", "+a+")":"rgb("+t+", "+r+", "+s+")";var e,t,r,s,a},n.prototype.toHsl=function(){return O0(sd(this.rgba))},n.prototype.toHslString=function(){return e=O0(sd(this.rgba)),t=e.h,r=e.s,s=e.l,(a=e.a)<1?"hsla("+t+", "+r+"%, "+s+"%, "+a+")":"hsl("+t+", "+r+"%, "+s+"%)";var e,t,r,s,a},n.prototype.toHsv=function(){return e=gx(this.rgba),{h:jn(e.h),s:jn(e.s),v:jn(e.v),a:jn(e.a,3)};var e},n.prototype.invert=function(){return Ca({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Ca(Hm(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Ca(Hm(this.rgba,-e))},n.prototype.grayscale=function(){return Ca(Hm(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Ca(N0(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Ca(N0(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Ca({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):jn(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=sd(this.rgba);return typeof e=="number"?Ca({h:e,s:t.s,l:t.l,a:t.a}):jn(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Ca(e).toHex()},n})(),Ca=function(n){return n instanceof Cg?n:new Cg(n)},F0=[],Db=function(n){n.forEach(function(e){F0.indexOf(e)<0&&(e(Cg,Ag),F0.push(e))})};function Lb(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var s in t)r[t[s]]=s;var a={};n.prototype.toName=function(c){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var d,m,v=r[this.toHex()];if(v)return v;if(c?.closest){var w=this.toRgb(),f=1/0,y="black";if(!a.length)for(var b in t)a[b]=new n(t[b]).toRgb();for(var T in t){var R=(d=w,m=a[T],Math.pow(d.r-m.r,2)+Math.pow(d.g-m.g,2)+Math.pow(d.b-m.b,2));R<f&&(f=R,y=T)}return y}},e.string.push([function(c){var d=c.toLowerCase(),m=d==="transparent"?"#0000":t[d];return m?new n(m).toRgb():null},"name"])}Db([Lb]);const Vc=class _f{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof _f)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const r=typeof e;if(r!==typeof t)return!1;if(r==="number"||r==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((s,a)=>s===t[a]);if(e!==null&&t!==null){const s=Object.keys(e),a=Object.keys(t);return s.length!==a.length?!1:s.every(c=>e[c]===t[c])}return e===t}toRgba(){const[e,t,r,s]=this._components;return{r:e,g:t,b:r,a:s}}toRgb(){const[e,t,r]=this._components;return{r:e,g:t,b:r}}toRgbaString(){const[e,t,r]=this.toUint8RgbArray();return`rgba(${e},${t},${r},${this.alpha})`}toUint8RgbArray(e){const[t,r,s]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(r*255),e[2]=Math.round(s*255),e}toRgbArray(e){e=e??[];const[t,r,s]=this._components;return e[0]=t,e[1]=r,e[2]=s,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,r,s,a]=_f.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=r,this._components[2]*=s,this._components[3]*=a,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let r=this._int>>16&255,s=this._int>>8&255,a=this._int&255;return t&&(r=r*e+.5|0,s=s*e+.5|0,a=a*e+.5|0),(e*255<<24)+(r<<16)+(s<<8)+a}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,r,s]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(r*e)/e,this._components[2]=Math.round(s*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,r,s,a]=this._components;return e[0]=t,e[1]=r,e[2]=s,e[3]=a,e}normalize(e){let t,r,s,a;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const c=e;t=(c>>16&255)/255,r=(c>>8&255)/255,s=(c&255)/255,a=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,r,s,a=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,r,s,a=255]=e,t/=255,r/=255,s/=255,a/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const d=_f.HEX_PATTERN.exec(e);d&&(e=`#${d[2]}`)}const c=Ca(e);c.isValid()&&({r:t,g:r,b:s,a}=c.rgba,t/=255,r/=255,s/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=r,this._components[2]=s,this._components[3]=a,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,r]=this._components;this._int=(e*255<<16)+(t*255<<8)+(r*255|0)}_clamp(e,t=0,r=1){return typeof e=="number"?Math.min(Math.max(e,t),r):(e.forEach((s,a)=>{e[a]=Math.min(Math.max(s,t),r)}),e)}};Vc.shared=new Vc,Vc.temp=new Vc,Vc.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let kr=Vc;function Nb(n){return Jt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),kr.shared.setValue(n).toHex()}function Fb(n){return Jt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),kr.shared.setValue(n).toNumber()}function Bb(){const n=[],e=[];for(let r=0;r<32;r++)n[r]=r,e[r]=r;n[Dt.NORMAL_NPM]=Dt.NORMAL,n[Dt.ADD_NPM]=Dt.ADD,n[Dt.SCREEN_NPM]=Dt.SCREEN,e[Dt.NORMAL]=Dt.NORMAL_NPM,e[Dt.ADD]=Dt.ADD_NPM,e[Dt.SCREEN]=Dt.SCREEN_NPM;const t=[];return t.push(e),t.push(n),t}const vx=Bb();function _x(n,e){return vx[e?1:0][n]}function Ub(n,e=null){const t=n*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let r=0,s=0;r<t;r+=6,s+=4)e[r+0]=s+0,e[r+1]=s+1,e[r+2]=s+2,e[r+3]=s+0,e[r+4]=s+2,e[r+5]=s+3;return e}function xx(n){if(n.BYTES_PER_ELEMENT===4)return n instanceof Float32Array?"Float32Array":n instanceof Uint32Array?"Uint32Array":"Int32Array";if(n.BYTES_PER_ELEMENT===2){if(n instanceof Uint16Array)return"Uint16Array"}else if(n.BYTES_PER_ELEMENT===1&&n instanceof Uint8Array)return"Uint8Array";return null}function Rf(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function B0(n){return!(n&n-1)&&!!n}function U0(n){let e=(n>65535?1:0)<<4;n>>>=e;let t=(n>255?1:0)<<3;return n>>>=t,e|=t,t=(n>15?1:0)<<2,n>>>=t,e|=t,t=(n>3?1:0)<<1,n>>>=t,e|=t,e|n>>1}function eh(n,e,t){const r=n.length;let s;if(e>=r||t===0)return;t=e+t>r?r-e:t;const a=r-t;for(s=e;s<a;++s)n[s]=n[s+t];n.length=a}function du(n){return n===0?0:n<0?-1:1}let jb=0;function fc(){return++jb}const Ig=class{constructor(n,e,t,r){this.left=n,this.top=e,this.right=t,this.bottom=r}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};Ig.EMPTY=new Ig(0,0,0,0);let j0=Ig;const G0={},Ia=Object.create(null),ou=Object.create(null);class Gb{constructor(e,t,r){this._canvas=gt.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||gt.RESOLUTION,this.resize(e,t)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function z0(n,e,t){for(let r=0,s=4*t*e;r<e;++r,s+=4)if(n[s+3]!==0)return!1;return!0}function H0(n,e,t,r,s){const a=4*e;for(let c=r,d=r*a+4*t;c<=s;++c,d+=a)if(n[d+3]!==0)return!1;return!0}function zb(n){const{width:e,height:t}=n,r=n.getContext("2d",{willReadFrequently:!0});if(r===null)throw new TypeError("Failed to get canvas 2D context");const s=r.getImageData(0,0,e,t).data;let a=0,c=0,d=e-1,m=t-1;for(;c<t&&z0(s,e,c);)++c;if(c===t)return j0.EMPTY;for(;z0(s,e,m);)--m;for(;H0(s,e,a,c,m);)++a;for(;H0(s,e,d,c,m);)--d;return++d,++m,new j0(a,c,d,m)}function Hb(n){const e=zb(n),{width:t,height:r}=e;let s=null;if(!e.isEmpty()){const a=n.getContext("2d");if(a===null)throw new TypeError("Failed to get canvas 2D context");s=a.getImageData(e.left,e.top,t,r)}return{width:t,height:r,data:s}}function Vb(n,e=globalThis.location){if(n.startsWith("data:"))return"";e=e||globalThis.location;const t=new URL(n,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function bl(n,e=1){const t=gt.RETINA_PREFIX?.exec(n);return t?parseFloat(t[1]):e}var ht=(n=>(n.Renderer="renderer",n.Application="application",n.RendererSystem="renderer-webgl-system",n.RendererPlugin="renderer-webgl-plugin",n.CanvasRendererSystem="renderer-canvas-system",n.CanvasRendererPlugin="renderer-canvas-plugin",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n))(ht||{});const Pg=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},V0=(n,e)=>Pg(n).priority??e,Et={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(Pg).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...n){return n.map(Pg).forEach(e=>{e.type.forEach(t=>{const r=this._addHandlers,s=this._queue;r[t]?r[t]?.(e):(s[t]=s[t]||[],s[t]?.push(e))})}),this},handle(n,e,t){const r=this._addHandlers,s=this._removeHandlers;if(r[n]||s[n])throw new Error(`Extension type ${n} already has a handler`);r[n]=e,s[n]=t;const a=this._queue;return a[n]&&(a[n]?.forEach(c=>e(c)),delete a[n]),this},handleByMap(n,e){return this.handle(n,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByList(n,e,t=-1){return this.handle(n,r=>{e.includes(r.ref)||(e.push(r.ref),e.sort((s,a)=>V0(a,t)-V0(s,t)))},r=>{const s=e.indexOf(r.ref);s!==-1&&e.splice(s,1)})}};class Rg{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const Wb=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function $b(n){let e="";for(let t=0;t<n;++t)t>0&&(e+=`
else `),t<n-1&&(e+=`if(test == ${t}.0){}`);return e}function qb(n,e){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);for(;;){const r=Wb.replace(/%forloop%/gi,$b(n));if(e.shaderSource(t,r),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))n=n/2|0;else break}return n}const Wm=0,$m=1,qm=2,Xm=3,Km=4,Ym=5;class za{constructor(){this.data=0,this.blendMode=Dt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Wm)}set blend(e){!!(this.data&1<<Wm)!==e&&(this.data^=1<<Wm)}get offsets(){return!!(this.data&1<<$m)}set offsets(e){!!(this.data&1<<$m)!==e&&(this.data^=1<<$m)}get culling(){return!!(this.data&1<<qm)}set culling(e){!!(this.data&1<<qm)!==e&&(this.data^=1<<qm)}get depthTest(){return!!(this.data&1<<Xm)}set depthTest(e){!!(this.data&1<<Xm)!==e&&(this.data^=1<<Xm)}get depthMask(){return!!(this.data&1<<Ym)}set depthMask(e){!!(this.data&1<<Ym)!==e&&(this.data^=1<<Ym)}get clockwiseFrontFace(){return!!(this.data&1<<Km)}set clockwiseFrontFace(e){!!(this.data&1<<Km)!==e&&(this.data^=1<<Km)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Dt.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new za;return e.depthTest=!1,e.blend=!0,e}}za.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const kg=[];function wx(n,e){if(!n)return null;let t="";if(typeof n=="string"){const r=/\.(\w{3,4})(?:$|\?|#)/i.exec(n);r&&(t=r[1].toLowerCase())}for(let r=kg.length-1;r>=0;--r){const s=kg[r];if(s.test&&s.test(n,t))return new s(n,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class $o{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,r,s,a,c,d,m){if(arguments.length>8)throw new Error("max arguments reached");const{name:v,items:w}=this;this._aliasCount++;for(let f=0,y=w.length;f<y;f++)w[f][v](e,t,r,s,a,c,d,m);return w===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties($o.prototype,{dispatch:{value:$o.prototype.emit},run:{value:$o.prototype.emit}});class od{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new $o("setRealSize"),this.onUpdate=new $o("update"),this.onError=new $o("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class Yf extends od{constructor(e,t){const{width:r,height:s}=t||{};if(!r||!s)throw new Error("BufferResource width or height invalid");super(r,s),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,r){const s=e.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,this.unpackAlignment),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===vs.UNPACK);const a=t.realWidth,c=t.realHeight;return r.width===a&&r.height===c?s.texSubImage2D(t.target,0,0,0,a,c,t.format,r.type,this.data):(r.width=a,r.height=c,s.texImage2D(t.target,0,r.internalFormat,a,c,0,t.format,r.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const Xb={scaleMode:yl.NEAREST,alphaMode:vs.NPM},Mg=class Wc extends dd{constructor(e=null,t=null){super(),t=Object.assign({},Wc.defaultOptions,t);const{alphaMode:r,mipmap:s,anisotropicLevel:a,scaleMode:c,width:d,height:m,wrapMode:v,format:w,type:f,target:y,resolution:b,resourceOptions:T}=t;e&&!(e instanceof od)&&(e=wx(e,T),e.internal=!0),this.resolution=b||gt.RESOLUTION,this.width=Math.round((d||0)*this.resolution)/this.resolution,this.height=Math.round((m||0)*this.resolution)/this.resolution,this._mipmap=s,this.anisotropicLevel=a,this._wrapMode=v,this._scaleMode=c,this.format=w,this.type=f,this.target=y,this.alphaMode=r,this.uid=fc(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=d>0&&m>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let r;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,r=!0),r&&this.dirtyStyleId++,this}setSize(e,t,r){return r=r||this.resolution,this.setRealSize(e*r,t*r,r)}setRealSize(e,t,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=B0(this.realWidth)&&B0(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete ou[this.cacheId],delete Ia[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Wc.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,r=gt.STRICT_TEXTURE_CACHE){const s=typeof e=="string";let a=null;if(s)a=e;else{if(!e._pixiId){const d=t?.pixiIdPrefix||"pixiid";e._pixiId=`${d}_${fc()}`}a=e._pixiId}let c=ou[a];if(s&&r&&!c)throw new Error(`The cacheId "${a}" does not exist in BaseTextureCache.`);return c||(c=new Wc(e,t),c.cacheId=a,Wc.addToCache(c,a)),c}static fromBuffer(e,t,r,s){e=e||new Float32Array(t*r*4);const a=new Yf(e,{width:t,height:r,...s?.resourceOptions});let c,d;return e instanceof Float32Array?(c=tt.RGBA,d=Pt.FLOAT):e instanceof Int32Array?(c=tt.RGBA_INTEGER,d=Pt.INT):e instanceof Uint32Array?(c=tt.RGBA_INTEGER,d=Pt.UNSIGNED_INT):e instanceof Int16Array?(c=tt.RGBA_INTEGER,d=Pt.SHORT):e instanceof Uint16Array?(c=tt.RGBA_INTEGER,d=Pt.UNSIGNED_SHORT):e instanceof Int8Array?(c=tt.RGBA,d=Pt.BYTE):(c=tt.RGBA,d=Pt.UNSIGNED_BYTE),a.internal=!0,new Wc(a,Object.assign({},Xb,{type:d,format:c},s))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),ou[t]&&ou[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),ou[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=ou[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete ou[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete ou[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};Mg.defaultOptions={mipmap:Ua.POW2,anisotropicLevel:0,scaleMode:yl.LINEAR,wrapMode:xl.CLAMP,alphaMode:vs.UNPACK,target:Jc.TEXTURE_2D,format:tt.RGBA,type:Pt.UNSIGNED_BYTE},Mg._globalBatch=0;let Gt=Mg;class Og{constructor(){this.texArray=null,this.blend=0,this.type=Ho.TRIANGLES,this.start=0,this.size=0,this.data=null}}let Kb=0;class pn{constructor(e,t=!0,r=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=t,this.id=Kb++,this.disposeRunner=new $o("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?Fa.ELEMENT_ARRAY_BUFFER:Fa.ARRAY_BUFFER}get index(){return this.type===Fa.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new pn(e)}}class kf{constructor(e,t=0,r=!1,s=Pt.FLOAT,a,c,d,m=1){this.buffer=e,this.size=t,this.normalized=r,this.type=s,this.stride=a,this.start=c,this.instance=d,this.divisor=m}destroy(){this.buffer=null}static from(e,t,r,s,a){return new kf(e,t,r,s,a)}}const Yb={Float32Array,Uint32Array,Int32Array,Uint8Array};function Qb(n,e){let t=0,r=0;const s={};for(let m=0;m<n.length;m++)r+=e[m],t+=n[m].length;const a=new ArrayBuffer(t*4);let c=null,d=0;for(let m=0;m<n.length;m++){const v=e[m],w=n[m],f=xx(w);s[f]||(s[f]=new Yb[f](a)),c=s[f];for(let y=0;y<w.length;y++){const b=(y/v|0)*r+d,T=y%v;c[b+T]=w[y]}d+=v}return new Float32Array(a)}const W0={5126:4,5123:2,5121:1};let Zb=0;const Jb={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class gu{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=Zb++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new $o("disposeGeometry"),this.refCount=0}addAttribute(e,t,r=0,s=!1,a,c,d,m=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof pn||(t instanceof Array&&(t=new Float32Array(t)),t=new pn(t));const v=e.split("|");if(v.length>1){for(let f=0;f<v.length;f++)this.addAttribute(v[f],t,r,s,a);return this}let w=this.buffers.indexOf(t);return w===-1&&(this.buffers.push(t),w=this.buffers.length-1),this.attributes[e]=new kf(w,r,s,a,c,d,m),this.instanced=this.instanced||m,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof pn||(e instanceof Array&&(e=new Uint16Array(e)),e=new pn(e)),e.type=Fa.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],t=[],r=new pn;let s;for(s in this.attributes){const a=this.attributes[s],c=this.buffers[a.buffer];e.push(c.data),t.push(a.size*W0[a.type]/4),a.buffer=0}for(r.data=Qb(e,t),s=0;s<this.buffers.length;s++)this.buffers[s]!==this.indexBuffer&&this.buffers[s].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new gu;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new pn(this.buffers[t].data.slice(0));for(const t in this.attributes){const r=this.attributes[t];e.attributes[t]=new kf(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Fa.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new gu,r=[],s=[],a=[];let c;for(let d=0;d<e.length;d++){c=e[d];for(let m=0;m<c.buffers.length;m++)s[m]=s[m]||0,s[m]+=c.buffers[m].data.length,a[m]=0}for(let d=0;d<c.buffers.length;d++)r[d]=new Jb[xx(c.buffers[d].data)](s[d]),t.buffers[d]=new pn(r[d]);for(let d=0;d<e.length;d++){c=e[d];for(let m=0;m<c.buffers.length;m++)r[m].set(c.buffers[m].data,a[m]),a[m]+=c.buffers[m].data.length}if(t.attributes=c.attributes,c.indexBuffer){t.indexBuffer=t.buffers[c.buffers.indexOf(c.indexBuffer)],t.indexBuffer.type=Fa.ELEMENT_ARRAY_BUFFER;let d=0,m=0,v=0,w=0;for(let f=0;f<c.buffers.length;f++)if(c.buffers[f]!==c.indexBuffer){w=f;break}for(const f in c.attributes){const y=c.attributes[f];(y.buffer|0)===w&&(m+=y.size*W0[y.type]/4)}for(let f=0;f<e.length;f++){const y=e[f].indexBuffer.data;for(let b=0;b<y.length;b++)t.indexBuffer.data[b+v]+=d;d+=e[f].buffers[w].data.length/m,v+=y.length}}return t}}class bx extends gu{constructor(e=!1){super(),this._buffer=new pn(null,e,!1),this._indexBuffer=new pn(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Pt.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Pt.FLOAT).addAttribute("aColor",this._buffer,4,!0,Pt.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Pt.FLOAT).addIndex(this._indexBuffer)}}const Mf=Math.PI*2,eS=180/Math.PI,tS=Math.PI/180;var Zn=(n=>(n[n.POLY=0]="POLY",n[n.RECT=1]="RECT",n[n.CIRC=2]="CIRC",n[n.ELIP=3]="ELIP",n[n.RREC=4]="RREC",n))(Zn||{});class er{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new er(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}}er.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Xd=[new er,new er,new er,new er];class zt{constructor(e=0,t=0,r=0,s=0){this.x=Number(e),this.y=Number(t),this.width=Number(r),this.height=Number(s),this.type=Zn.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new zt(0,0,0,0)}clone(){return new zt(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t){const te=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=te)return!1;const pe=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>pe}const r=this.left,s=this.right,a=this.top,c=this.bottom;if(s<=r||c<=a)return!1;const d=Xd[0].set(e.left,e.top),m=Xd[1].set(e.left,e.bottom),v=Xd[2].set(e.right,e.top),w=Xd[3].set(e.right,e.bottom);if(v.x<=d.x||m.y<=d.y)return!1;const f=Math.sign(t.a*t.d-t.b*t.c);if(f===0||(t.apply(d,d),t.apply(m,m),t.apply(v,v),t.apply(w,w),Math.max(d.x,m.x,v.x,w.x)<=r||Math.min(d.x,m.x,v.x,w.x)>=s||Math.max(d.y,m.y,v.y,w.y)<=a||Math.min(d.y,m.y,v.y,w.y)>=c))return!1;const y=f*(m.y-d.y),b=f*(d.x-m.x),T=y*r+b*a,R=y*s+b*a,k=y*r+b*c,L=y*s+b*c;if(Math.max(T,R,k,L)<=y*d.x+b*d.y||Math.min(T,R,k,L)>=y*w.x+b*w.y)return!1;const V=f*(d.y-v.y),z=f*(v.x-d.x),J=V*r+z*a,X=V*s+z*a,fe=V*r+z*c,N=V*s+z*c;return!(Math.max(J,X,fe,N)<=V*d.x+z*d.y||Math.min(J,X,fe,N)>=V*w.x+z*w.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),s=Math.max(this.y,e.y),a=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(r-t,0),this.y=s,this.height=Math.max(a-s,0),this}ceil(e=1,t=.001){const r=Math.ceil((this.x+this.width-t)*e)/e,s=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=r-this.x,this.height=s-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),s=Math.min(this.y,e.y),a=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=r-t,this.y=s,this.height=a-s,this}}zt.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Qf{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.radius=r,this.type=Zn.CIRC}clone(){return new Qf(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const r=this.radius*this.radius;let s=this.x-e,a=this.y-t;return s*=s,a*=a,s+a<=r}getBounds(){return new zt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Qf.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Zf{constructor(e=0,t=0,r=0,s=0){this.x=e,this.y=t,this.width=r,this.height=s,this.type=Zn.ELIP}clone(){return new Zf(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let r=(e-this.x)/this.width,s=(t-this.y)/this.height;return r*=r,s*=s,r+s<=1}getBounds(){return new zt(this.x-this.width,this.y-this.height,this.width,this.height)}}Zf.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class hc{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const r=[];for(let s=0,a=t.length;s<a;s++)r.push(t[s].x,t[s].y);t=r}this.points=t,this.type=Zn.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),t=new hc(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let r=!1;const s=this.points.length/2;for(let a=0,c=s-1;a<s;c=a++){const d=this.points[a*2],m=this.points[a*2+1],v=this.points[c*2],w=this.points[c*2+1];m>t!=w>t&&e<(v-d)*((t-m)/(w-m))+d&&(r=!r)}return r}}hc.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((n,e)=>`${n}, ${e}`,"")}]`};class Jf{constructor(e=0,t=0,r=0,s=0,a=20){this.x=e,this.y=t,this.width=r,this.height=s,this.radius=a,this.type=Zn.RREC}clone(){return new Jf(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+r&&t<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;let s=e-(this.x+r),a=t-(this.y+r);const c=r*r;if(s*s+a*a<=c||(s=e-(this.x+this.width-r),s*s+a*a<=c)||(a=t-(this.y+this.height-r),s*s+a*a<=c)||(s=e-(this.x+r),s*s+a*a<=c))return!0}return!1}}Jf.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Lr{constructor(e=1,t=0,r=0,s=1,a=0,c=0){this.array=null,this.a=e,this.b=t,this.c=r,this.d=s,this.tx=a,this.ty=c}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,r,s,a,c){return this.a=e,this.b=t,this.c=r,this.d=s,this.tx=a,this.ty=c,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,t){t=t||new er;const r=e.x,s=e.y;return t.x=this.a*r+this.c*s+this.tx,t.y=this.b*r+this.d*s+this.ty,t}applyInverse(e,t){t=t||new er;const r=1/(this.a*this.d+this.c*-this.b),s=e.x,a=e.y;return t.x=this.d*r*s+-this.c*r*a+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*a+-this.b*r*s+(-this.ty*this.a+this.tx*this.b)*r,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),s=this.a,a=this.c,c=this.tx;return this.a=s*t-this.b*r,this.b=s*r+this.b*t,this.c=a*t-this.d*r,this.d=a*r+this.d*t,this.tx=c*t-this.ty*r,this.ty=c*r+this.ty*t,this}append(e){const t=this.a,r=this.b,s=this.c,a=this.d;return this.a=e.a*t+e.b*s,this.b=e.a*r+e.b*a,this.c=e.c*t+e.d*s,this.d=e.c*r+e.d*a,this.tx=e.tx*t+e.ty*s+this.tx,this.ty=e.tx*r+e.ty*a+this.ty,this}setTransform(e,t,r,s,a,c,d,m,v){return this.a=Math.cos(d+v)*a,this.b=Math.sin(d+v)*a,this.c=-Math.sin(d-m)*c,this.d=Math.cos(d-m)*c,this.tx=e-(r*this.a+s*this.c),this.ty=t-(r*this.b+s*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const r=this.a,s=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,r=this.b,s=this.c,a=this.d,c=e.pivot,d=-Math.atan2(-s,a),m=Math.atan2(r,t),v=Math.abs(d+m);return v<1e-5||Math.abs(Mf-v)<1e-5?(e.rotation=m,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=d,e.skew.y=m),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(s*s+a*a),e.position.x=this.tx+(c.x*t+c.y*s),e.position.y=this.ty+(c.x*r+c.y*a),e}invert(){const e=this.a,t=this.b,r=this.c,s=this.d,a=this.tx,c=e*s-t*r;return this.a=s/c,this.b=-t/c,this.c=-r/c,this.d=e/c,this.tx=(r*this.ty-s*a)/c,this.ty=-(e*this.ty-t*a)/c,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Lr;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new Lr}static get TEMP_MATRIX(){return new Lr}}Lr.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const rc=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],nc=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ic=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],sc=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Dg=[],Sx=[],Kd=Math.sign;function rS(){for(let n=0;n<16;n++){const e=[];Dg.push(e);for(let t=0;t<16;t++){const r=Kd(rc[n]*rc[t]+ic[n]*nc[t]),s=Kd(nc[n]*rc[t]+sc[n]*nc[t]),a=Kd(rc[n]*ic[t]+ic[n]*sc[t]),c=Kd(nc[n]*ic[t]+sc[n]*sc[t]);for(let d=0;d<16;d++)if(rc[d]===r&&nc[d]===s&&ic[d]===a&&sc[d]===c){e.push(d);break}}}for(let n=0;n<16;n++){const e=new Lr;e.set(rc[n],nc[n],ic[n],sc[n],0,0),Sx.push(e)}}rS();const Wr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>rc[n],uY:n=>nc[n],vX:n=>ic[n],vY:n=>sc[n],inv:n=>n&8?n&15:-n&7,add:(n,e)=>Dg[n][e],sub:(n,e)=>Dg[n][Wr.inv(e)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,e)=>Math.abs(n)*2<=Math.abs(e)?e>=0?Wr.S:Wr.N:Math.abs(e)*2<=Math.abs(n)?n>0?Wr.E:Wr.W:e>0?n>0?Wr.SE:Wr.SW:n>0?Wr.NE:Wr.NW,matrixAppendRotationInv:(n,e,t=0,r=0)=>{const s=Sx[Wr.inv(e)];s.tx=t,s.ty=r,n.append(s)}};class La{constructor(e,t,r=0,s=0){this._x=r,this._y=s,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new La(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}La.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const Lg=class{constructor(){this.worldTransform=new Lr,this.localTransform=new Lr,this.position=new La(this.onChange,this,0,0),this.scale=new La(this.onChange,this,1,1),this.pivot=new La(this.onChange,this,0,0),this.skew=new La(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const n=this.localTransform;this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale.x,n.b=this._sx*this.scale.x,n.c=this._cy*this.scale.y,n.d=this._sy*this.scale.y,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(n){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==n._worldID){const t=n.worldTransform,r=this.worldTransform;r.a=e.a*t.a+e.b*t.c,r.b=e.a*t.b+e.b*t.d,r.c=e.c*t.a+e.d*t.c,r.d=e.c*t.b+e.d*t.d,r.tx=e.tx*t.a+e.ty*t.c+t.tx,r.ty=e.tx*t.b+e.ty*t.d+t.ty,this._parentID=n._worldID,this._worldID++}}setFromMatrix(n){n.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(n){this._rotation!==n&&(this._rotation=n,this.updateSkew())}};Lg.IDENTITY=new Lg;let ep=Lg;ep.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var nS=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,iS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function $0(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}function Qm(n){const e=new Array(n);for(let t=0;t<e.length;t++)e[t]=!1;return e}function Ex(n,e){switch(n){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Qm(2*e);case"bvec3":return Qm(3*e);case"bvec4":return Qm(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const th=[{test:n=>n.type==="float"&&n.size===1&&!n.isArray,code:n=>`
            if(uv["${n}"] !== ud["${n}"].value)
            {
                ud["${n}"].value = uv["${n}"]
                gl.uniform1f(ud["${n}"].location, uv["${n}"])
            }
            `},{test:(n,e)=>(n.type==="sampler2D"||n.type==="samplerCube"||n.type==="sampler2DArray")&&n.size===1&&!n.isArray&&(e==null||e.castToBaseTexture!==void 0),code:n=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${n}"], t);

            if(ud["${n}"].value !== t)
            {
                ud["${n}"].value = t;
                gl.uniform1i(ud["${n}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(n,e)=>n.type==="mat3"&&n.size===1&&!n.isArray&&e.a!==void 0,code:n=>`
            gl.uniformMatrix3fv(ud["${n}"].location, false, uv["${n}"].toArray(true));
            `,codeUbo:n=>`
                var ${n}_matrix = uv.${n}.toArray(true);

                data[offset] = ${n}_matrix[0];
                data[offset+1] = ${n}_matrix[1];
                data[offset+2] = ${n}_matrix[2];
        
                data[offset + 4] = ${n}_matrix[3];
                data[offset + 5] = ${n}_matrix[4];
                data[offset + 6] = ${n}_matrix[5];
        
                data[offset + 8] = ${n}_matrix[6];
                data[offset + 9] = ${n}_matrix[7];
                data[offset + 10] = ${n}_matrix[8];
            `},{test:(n,e)=>n.type==="vec2"&&n.size===1&&!n.isArray&&e.x!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${n}"].location, v.x, v.y);
                }`,codeUbo:n=>`
                v = uv.${n};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:n=>n.type==="vec2"&&n.size===1&&!n.isArray,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${n}"].location, v[0], v[1]);
                }
            `},{test:(n,e)=>n.type==="vec4"&&n.size===1&&!n.isArray&&e.width!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${n}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(n,e)=>n.type==="vec4"&&n.size===1&&!n.isArray&&e.red!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${n}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(n,e)=>n.type==="vec3"&&n.size===1&&!n.isArray&&e.red!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${n}"].location, v.red, v.green, v.blue)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:n=>n.type==="vec4"&&n.size===1&&!n.isArray,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${n}"].location, v[0], v[1], v[2], v[3])
                }`}],sS={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},oS={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function aS(n,e){const t=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const r in n.uniforms){const s=e[r];if(!s){n.uniforms[r]?.group===!0&&(n.uniforms[r].ubo?t.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${r}, '${r}');
                    `):t.push(`
                        renderer.shader.syncUniformGroup(uv.${r}, syncData);
                    `));continue}const a=n.uniforms[r];let c=!1;for(let d=0;d<th.length;d++)if(th[d].test(s,a)){t.push(th[d].code(r,a)),c=!0;break}if(!c){const d=(s.size===1&&!s.isArray?sS:oS)[s.type].replace("location",`ud["${r}"].location`);t.push(`
            cu = ud["${r}"];
            cv = cu.value;
            v = uv["${r}"];
            ${d};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}const Tx={};let Yd=Tx;function lS(){if(Yd===Tx||Yd?.isContextLost()){const n=gt.ADAPTER.createCanvas();let e;gt.PREFER_ENV>=pc.WEBGL2&&(e=n.getContext("webgl2",{})),e||(e=n.getContext("webgl",{})||n.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Yd=e}return Yd}let Qd;function uS(){if(!Qd){Qd=lo.MEDIUM;const n=lS();if(n&&n.getShaderPrecisionFormat){const e=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);e&&(Qd=e.precision?lo.HIGH:lo.MEDIUM)}}return Qd}function q0(n,e){const t=n.getShaderSource(e).split(`
`).map((v,w)=>`${w}: ${v}`),r=n.getShaderInfoLog(e),s=r.split(`
`),a={},c=s.map(v=>parseFloat(v.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(v=>v&&!a[v]?(a[v]=!0,!0):!1),d=[""];c.forEach(v=>{t[v-1]=`%c${t[v-1]}%c`,d.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const m=t.join(`
`);d[0]=m,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn(...d),console.groupEnd()}function cS(n,e,t,r){n.getProgramParameter(e,n.LINK_STATUS)||(n.getShaderParameter(t,n.COMPILE_STATUS)||q0(n,t),n.getShaderParameter(r,n.COMPILE_STATUS)||q0(n,r),console.error("PixiJS Error: Could not initialize shader."),n.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",n.getProgramInfoLog(e)))}const hS={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Ax(n){return hS[n]}let Zd=null;const X0={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Cx(n,e){if(!Zd){const t=Object.keys(X0);Zd={};for(let r=0;r<t.length;++r){const s=t[r];Zd[n[s]]=X0[s]}}return Zd[e]}function K0(n,e,t){if(n.substring(0,9)!=="precision"){let r=e;return e===lo.HIGH&&t!==lo.HIGH&&(r=lo.MEDIUM),`precision ${r} float;
${n}`}else if(t!==lo.HIGH&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}let Wh;function dS(){if(typeof Wh=="boolean")return Wh;try{Wh=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Wh=!1}return Wh}let fS=0;const Jd={},Ng=class $c{constructor(e,t,r="pixi-shader",s={}){this.extra={},this.id=fS++,this.vertexSrc=e||$c.defaultVertexSrc,this.fragmentSrc=t||$c.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=s,this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),Jd[r]?(Jd[r]++,r+=`-${Jd[r]}`):Jd[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}
${this.fragmentSrc}`,this.vertexSrc=K0(this.vertexSrc,$c.defaultVertexPrecision,lo.HIGH),this.fragmentSrc=K0(this.fragmentSrc,$c.defaultFragmentPrecision,uS())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return iS}static get defaultFragmentSrc(){return nS}static from(e,t,r){const s=e+t;let a=G0[s];return a||(G0[s]=a=new $c(e,t,r)),a}};Ng.defaultVertexPrecision=lo.HIGH,Ng.defaultFragmentPrecision=vl.apple.device?lo.HIGH:lo.MEDIUM;let _l=Ng,pS=0;class qo{constructor(e,t,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=pS++,this.static=!!t,this.ubo=!!r,e instanceof pn?(this.buffer=e,this.buffer.type=Fa.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new pn(new Float32Array(1)),this.buffer.type=Fa.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,r){if(!this.ubo)this.uniforms[e]=new qo(t,r);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,t,r){return new qo(e,t,r)}static uboFrom(e,t){return new qo(e,t??!0,!0)}}class Ba{constructor(e,t){this.uniformBindCount=0,this.program=e,t?t instanceof qo?this.uniformGroup=t:this.uniformGroup=new qo(t):this.uniformGroup=new qo({}),this.disposeRunner=new $o("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const r in t.uniforms){const s=t.uniforms[r];if(s.group===!0&&this.checkUniformExists(e,s))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,r){const s=_l.from(e,t);return new Ba(s,r)}}class mS{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const r=new Int32Array(e);for(let a=0;a<e;a++)r[a]=a;this.defaultGroupCache[e]=qo.from({uSamplers:r},!0);let s=this.fragTemplate;s=s.replace(/%count%/gi,`${e}`),s=s.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new _l(this.vertexSrc,s)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new Lr,default:this.defaultGroupCache[e]};return new Ba(this.programCache[e],t)}generateSampleSrc(e){let t="";t+=`
`,t+=`
`;for(let r=0;r<e;r++)r>0&&(t+=`
else `),r<e-1&&(t+=`if(vTextureId < ${r}.5)`),t+=`
{`,t+=`
	color = texture2D(uSamplers[${r}], vTextureCoord);`,t+=`
}`;return t+=`
`,t+=`
`,t}}class Fg{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function gS(){return!vl.apple.device}function yS(n){let e=!0;const t=gt.ADAPTER.getNavigator();if(vl.tablet||vl.phone){if(vl.apple.device){const r=t.userAgent.match(/OS (\d+)_(\d+)?/);r&&parseInt(r[1],10)<11&&(e=!1)}if(vl.android.device){const r=t.userAgent.match(/Android\s([0-9.]*)/);r&&parseInt(r[1],10)<7&&(e=!1)}}return e?n:4}class tp{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var vS=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,_S=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Qh=class jo extends tp{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=bx,this.vertexSize=6,this.state=za.for2d(),this.size=jo.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??yS(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??gS(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return Jt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return _S}static get defaultFragmentTemplate(){return vS}setShaderGenerator({vertex:e=jo.defaultVertexSrc,fragment:t=jo.defaultFragmentTemplate}={}){this.shaderGenerator=new mS(e,t)}contextChange(){const e=this.renderer.gl;gt.PREFER_ENV===pc.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),jo.defaultMaxTextures),this.maxTextures=qb(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=jo,r=this.size/4,s=Math.floor(r/this.maxTextures)+1;for(;e.length<r;)e.push(new Og);for(;t.length<s;)t.push(new Fg);for(let a=0;a<this.maxTextures;a++)this._tempBoundTextures[a]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,r=jo._textureArrayPool,s=this.renderer.batch,a=this._tempBoundTextures,c=this.renderer.textureGC.count;let d=++Gt._globalBatch,m=0,v=r[0],w=0;s.copyBoundTextures(a,t);for(let f=0;f<this._bufferSize;++f){const y=e[f];e[f]=null,y._batchEnabled!==d&&(v.count>=t&&(s.boundArray(v,a,d,t),this.buildDrawCalls(v,w,f),w=f,v=r[++m],++d),y._batchEnabled=d,y.touched=c,v.elements[v.count++]=y)}v.count>0&&(s.boundArray(v,a,d,t),this.buildDrawCalls(v,w,this._bufferSize),++m,++d);for(let f=0;f<a.length;f++)a[f]=null;Gt._globalBatch=d}buildDrawCalls(e,t,r){const{_bufferedElements:s,_attributeBuffer:a,_indexBuffer:c,vertexSize:d}=this,m=jo._drawCallPool;let v=this._dcIndex,w=this._aIndex,f=this._iIndex,y=m[v];y.start=this._iIndex,y.texArray=e;for(let b=t;b<r;++b){const T=s[b],R=T._texture.baseTexture,k=vx[R.alphaMode?1:0][T.blendMode];s[b]=null,t<b&&y.blend!==k&&(y.size=f-y.start,t=b,y=m[++v],y.texArray=e,y.start=f),this.packInterleavedGeometry(T,a,c,w,f),w+=T.vertexData.length/2*d,f+=T.indices.length,y.blend=k}t<r&&(y.size=f-y.start,++v),this._dcIndex=v,this._aIndex=w,this._iIndex=f}bindAndClearTexArray(e){const t=this.renderer.texture;for(let r=0;r<e.count;r++)t.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:r}=this;jo.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:r}=this.renderer,s=jo._drawCallPool;let a=null;for(let c=0;c<e;c++){const{texArray:d,type:m,size:v,start:w,blend:f}=s[c];a!==d&&(a=d,this.bindAndClearTexArray(d)),this.state.blendMode=f,r.set(this.state),t.drawElements(m,v,t.UNSIGNED_SHORT,w*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),jo.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=Rf(Math.ceil(e/8)),r=U0(t),s=t*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new Rg(s*this.vertexSize*4)),a}getIndexBuffer(e){const t=Rf(Math.ceil(e/12)),r=U0(t),s=t*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let a=this._iBuffers[r];return a||(this._iBuffers[r]=a=new Uint16Array(s)),a}packInterleavedGeometry(e,t,r,s,a){const{uint32View:c,float32View:d}=t,m=s/this.vertexSize,v=e.uvs,w=e.indices,f=e.vertexData,y=e._texture.baseTexture._batchLocation,b=Math.min(e.worldAlpha,1),T=kr.shared.setValue(e._tintRGB).toPremultiplied(b,e._texture.baseTexture.alphaMode>0);for(let R=0;R<f.length;R+=2)d[s++]=f[R],d[s++]=f[R+1],d[s++]=v[R],d[s++]=v[R+1],c[s++]=T,d[s++]=y;for(let R=0;R<w.length;R++)r[a++]=m+w[R]}};Qh.defaultBatchSize=4096,Qh.extension={name:"batch",type:ht.RendererPlugin},Qh._drawCallPool=[],Qh._textureArrayPool=[];let oc=Qh;Et.add(oc);var xS=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,wS=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Bg=class Zh extends Ba{constructor(e,t,r){const s=_l.from(e||Zh.defaultVertexSrc,t||Zh.defaultFragmentSrc);super(s,r),this.padding=0,this.resolution=Zh.defaultResolution,this.multisample=Zh.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new za}apply(e,t,r,s,a){e.applyFilter(this,t,r,s)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return wS}static get defaultFragmentSrc(){return xS}};Bg.defaultResolution=1,Bg.defaultMultisample=wn.NONE;let Li=Bg;class Of{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new kr(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:t,background:r,backgroundAlpha:s}=e,a=r??t;a!==void 0&&(this.color=a),this.alpha=s}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}Of.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Of.extension={type:[ht.RendererSystem,ht.CanvasRendererSystem],name:"background"};Et.add(Of);class Ix{constructor(e){this.renderer=e,this.emptyRenderer=new tp(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:r}=this.renderer.texture;for(let s=t-1;s>=0;--s)e[s]=r[s]||null,e[s]&&(e[s]._batchLocation=s)}boundArray(e,t,r,s){const{elements:a,ids:c,count:d}=e;let m=0;for(let v=0;v<d;v++){const w=a[v],f=w._batchLocation;if(f>=0&&f<s&&t[f]===w){c[v]=f;continue}for(;m<s;){const y=t[m];if(y&&y._batchEnabled===r&&y._batchLocation===m){m++;continue}c[v]=m,w._batchLocation=m,t[m]=w;break}}}destroy(){this.renderer=null}}Ix.extension={type:ht.RendererSystem,name:"batch"};Et.add(Ix);let Y0=0;class Df{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=Y0++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,r=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:r,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=Y0++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;t.addEventListener!==void 0&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let r;if(gt.PREFER_ENV>=pc.WEBGL2&&(r=e.getContext("webgl2",t)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const s=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Df.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Df.extension={type:ht.RendererSystem,name:"context"};Et.add(Df);class Ug{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new $o("disposeFramebuffer"),this.multisample=wn.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new Gt(null,{scaleMode:yl.NEAREST,resolution:1,mipmap:Ua.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new Gt(null,{scaleMode:yl.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Ua.OFF,format:tt.DEPTH_COMPONENT,type:Pt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const s=this.colorTextures[r],a=s.resolution;s.setSize(e/a,t/a)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(e/r,t/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class Px extends Gt{constructor(e={}){if(typeof e=="number"){const t=arguments[0],r=arguments[1],s=arguments[2],a=arguments[3];e={width:t,height:r,scaleMode:s,resolution:a}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=wn.NONE),super(null,e),this.mipmap=Ua.OFF,this.valid=!0,this._clear=new kr([0,0,0,0]),this.framebuffer=new Ug(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Sl extends od{constructor(e){const t=e,r=t.naturalWidth||t.videoWidth||t.displayWidth||t.width,s=t.naturalHeight||t.videoHeight||t.displayHeight||t.height;super(r,s),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,r){r===void 0&&!t.startsWith("data:")?e.crossOrigin=Vb(t):r!==!1&&(e.crossOrigin=typeof r=="string"?r:"anonymous")}upload(e,t,r,s){const a=e.gl,c=t.realWidth,d=t.realHeight;if(s=s||this.source,typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement&&s.readyState<=1)return!1;return a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===vs.UNPACK),!this.noSubImage&&t.target===a.TEXTURE_2D&&r.width===c&&r.height===d?a.texSubImage2D(a.TEXTURE_2D,0,0,0,t.format,r.type,s):(r.width=c,r.height=d,a.texImage2D(t.target,0,r.internalFormat,t.format,r.type,s)),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(t,r),super.update()}dispose(){this.source=null}}class Rx extends Sl{constructor(e,t){if(t=t||{},typeof e=="string"){const r=new Image;Sl.crossOrigin(r,e,t.crossorigin),r.src=e,e=r}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??gt.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.bitmap=null,this._load=null,t.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((t,r)=>{const s=this.source;this.url=s.src;const a=()=>{this.destroyed||(s.onload=null,s.onerror=null,this.update(),this._load=null,this.createBitmap?t(this.process()):t(this))};s.complete&&s.src?a():(s.onload=a,s.onerror=c=>{r(c),this.onError.emit(c)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,r=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then(s=>s.blob()).then(s=>t(s,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===vs.UNPACK?"premultiply":"none"})).then(s=>this.destroyed?Promise.reject():(this.bitmap=s,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,r){if(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,r,this.bitmap),!this.preserveBitmap){let s=!0;const a=t._glTextures;for(const c in a){const d=a[c];if(d!==r&&d.dirtyId!==t.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class Sy{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,r){const s=t.width,a=t.height;if(r){const c=e.width/2/s,d=e.height/2/a,m=e.x/s+c,v=e.y/a+d;r=Wr.add(r,Wr.NW),this.x0=m+c*Wr.uX(r),this.y0=v+d*Wr.uY(r),r=Wr.add(r,2),this.x1=m+c*Wr.uX(r),this.y1=v+d*Wr.uY(r),r=Wr.add(r,2),this.x2=m+c*Wr.uX(r),this.y2=v+d*Wr.uY(r),r=Wr.add(r,2),this.x3=m+c*Wr.uX(r),this.y3=v+d*Wr.uY(r)}else this.x0=e.x/s,this.y0=e.y/a,this.x1=(e.x+e.width)/s,this.y1=e.y/a,this.x2=(e.x+e.width)/s,this.y2=(e.y+e.height)/a,this.x3=e.x/s,this.y3=(e.y+e.height)/a;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}Sy.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const Q0=new Sy;function ef(n){n.destroy=function(){},n.on=function(){},n.once=function(){},n.emit=function(){}}class ut extends dd{constructor(e,t,r,s,a,c,d){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new zt(0,0,1,1)),e instanceof ut&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=s,this.valid=!1,this.destroyed=!1,this._uvs=Q0,this.uvMatrix=null,this.orig=r||t,this._rotate=Number(a||0),a===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=c?new er(c.x,c.y):new er(0,0),this.defaultBorders=d,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:t}=this.baseTexture;t?.url&&Ia[t.url]&&ut.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,ut.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),r=new ut(this.baseTexture,!this.noFrame&&e,t,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=e),r}updateUvs(){this._uvs===Q0&&(this._uvs=new Sy),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},r=gt.STRICT_TEXTURE_CACHE){const s=typeof e=="string";let a=null;if(s)a=e;else if(e instanceof Gt){if(!e.cacheId){const d=t?.pixiIdPrefix||"pixiid";e.cacheId=`${d}-${fc()}`,Gt.addToCache(e,e.cacheId)}a=e.cacheId}else{if(!e._pixiId){const d=t?.pixiIdPrefix||"pixiid";e._pixiId=`${d}_${fc()}`}a=e._pixiId}let c=Ia[a];if(s&&r&&!c)throw new Error(`The cacheId "${a}" does not exist in TextureCache.`);return!c&&!(e instanceof Gt)?(t.resolution||(t.resolution=bl(e)),c=new ut(new Gt(e,t)),c.baseTexture.cacheId=a,Gt.addToCache(c.baseTexture,a),ut.addToCache(c,a)):!c&&e instanceof Gt&&(c=new ut(e),ut.addToCache(c,a)),c}static fromURL(e,t){const r=Object.assign({autoLoad:!1},t?.resourceOptions),s=ut.from(e,Object.assign({resourceOptions:r},t),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(()=>Promise.resolve(s))}static fromBuffer(e,t,r,s){return new ut(Gt.fromBuffer(e,t,r,s))}static fromLoader(e,t,r,s){const a=new Gt(e,Object.assign({scaleMode:Gt.defaultOptions.scaleMode,resolution:bl(t)},s)),{resource:c}=a;c instanceof Rx&&(c.url=t);const d=new ut(a);return r||(r=t),Gt.addToCache(d.baseTexture,r),ut.addToCache(d,r),r!==t&&(Gt.addToCache(d.baseTexture,t),ut.addToCache(d,t)),d.baseTexture.valid?Promise.resolve(d):new Promise(m=>{d.baseTexture.once("loaded",()=>m(d))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Ia[t]&&Ia[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),Ia[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=Ia[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete Ia[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)Ia[e.textureCacheIds[t]]===e&&delete Ia[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:r,width:s,height:a}=e,c=t+s>this.baseTexture.width,d=r+a>this.baseTexture.height;if(c||d){const m=c&&d?"and":"or",v=`X: ${t} + ${s} = ${t+s} > ${this.baseTexture.width}`,w=`Y: ${r} + ${a} = ${r+a} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${v} ${m} ${w}`)}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return ut._EMPTY||(ut._EMPTY=new ut(new Gt),ef(ut._EMPTY),ef(ut._EMPTY.baseTexture)),ut._EMPTY}static get WHITE(){if(!ut._WHITE){const e=gt.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),ut._WHITE=new ut(Gt.from(e)),ef(ut._WHITE),ef(ut._WHITE.baseTexture)}return ut._WHITE}}class mc extends ut{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,r=!0){const s=this.baseTexture.resolution,a=Math.round(e*s)/s,c=Math.round(t*s)/s;this.valid=a>0&&c>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=c,r&&this.baseTexture.resize(a,c),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new mc(new Px(e))}}class kx{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t,r=wn.NONE){const s=new Px(Object.assign({width:e,height:t,resolution:1,multisample:r},this.textureOptions));return new mc(s)}getOptimalTexture(e,t,r=1,s=wn.NONE){let a;e=Math.max(Math.ceil(e*r-1e-6),1),t=Math.max(Math.ceil(t*r-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||t!==this._pixelsHeight?(e=Rf(e),t=Rf(t),a=((e&65535)<<16|t&65535)>>>0,s>1&&(a+=s*4294967296)):a=s>1?-s:-1,this.texturePool[a]||(this.texturePool[a]=[]);let c=this.texturePool[a].pop();return c||(c=this.createTexture(e,t,s)),c.filterPoolKey=a,c.setResolution(r),c}getFilterTexture(e,t,r){const s=this.getOptimalTexture(e.width,e.height,t||e.resolution,r||wn.NONE);return s.filterFrame=e.filterFrame,s}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const t in this.texturePool){const r=this.texturePool[t];if(r)for(let s=0;s<r.length;s++)r[s].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const t in this.texturePool){if(!(Number(t)<0))continue;const r=this.texturePool[t];if(r)for(let s=0;s<r.length;s++)r[s].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}kx.SCREEN_KEY=-1;class bS extends gu{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Mx extends gu{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new pn(this.vertices),this.uvBuffer=new pn(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let r=0,s=0;return this.uvs[0]=r,this.uvs[1]=s,this.uvs[2]=r+t.width/e.width,this.uvs[3]=s,this.uvs[4]=r+t.width/e.width,this.uvs[5]=s+t.height/e.height,this.uvs[6]=r,this.uvs[7]=s+t.height/e.height,r=t.x,s=t.y,this.vertices[0]=r,this.vertices[1]=s,this.vertices[2]=r+t.width,this.vertices[3]=s,this.vertices[4]=r+t.width,this.vertices[5]=s+t.height,this.vertices[6]=r,this.vertices[7]=s+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class SS{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=wn.NONE,this.sourceFrame=new zt,this.destinationFrame=new zt,this.bindingSourceFrame=new zt,this.bindingDestinationFrame=new zt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const tf=[new er,new er,new er,new er],Zm=new Lr;class Ox{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new kx,this.statePool=[],this.quad=new bS,this.quadUv=new Mx,this.tempRect=new zt,this.activeState={},this.globalUniforms=new qo({outputFrame:new zt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const r=this.renderer,s=this.defaultFilterStack,a=this.statePool.pop()||new SS,c=r.renderTexture;let d,m;if(c.current){const k=c.current;d=k.resolution,m=k.multisample}else d=r.resolution,m=r.multisample;let v=t[0].resolution||d,w=t[0].multisample??m,f=t[0].padding,y=t[0].autoFit,b=t[0].legacy??!0;for(let k=1;k<t.length;k++){const L=t[k];v=Math.min(v,L.resolution||d),w=Math.min(w,L.multisample??m),f=this.useMaxPadding?Math.max(f,L.padding):f+L.padding,y=y&&L.autoFit,b=b||(L.legacy??!0)}s.length===1&&(this.defaultFilterStack[0].renderTexture=c.current),s.push(a),a.resolution=v,a.multisample=w,a.legacy=b,a.target=e,a.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),a.sourceFrame.pad(f);const T=this.tempRect.copyFrom(c.sourceFrame);r.projection.transform&&this.transformAABB(Zm.copyFrom(r.projection.transform).invert(),T),y?(a.sourceFrame.fit(T),(a.sourceFrame.width<=0||a.sourceFrame.height<=0)&&(a.sourceFrame.width=0,a.sourceFrame.height=0)):a.sourceFrame.intersects(T)||(a.sourceFrame.width=0,a.sourceFrame.height=0),this.roundFrame(a.sourceFrame,c.current?c.current.resolution:r.resolution,c.sourceFrame,c.destinationFrame,r.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,v,w),a.filters=t,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;const R=this.tempRect;R.x=0,R.y=0,R.width=a.sourceFrame.width,R.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(c.sourceFrame),a.bindingDestinationFrame.copyFrom(c.destinationFrame),a.transform=r.projection.transform,r.projection.transform=null,c.bind(a.renderTexture,a.sourceFrame,R),r.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),r=t.filters;this.activeState=t;const s=this.globalUniforms.uniforms;s.outputFrame=t.sourceFrame,s.resolution=t.resolution;const a=s.inputSize,c=s.inputPixel,d=s.inputClamp;if(a[0]=t.destinationFrame.width,a[1]=t.destinationFrame.height,a[2]=1/a[0],a[3]=1/a[1],c[0]=Math.round(a[0]*t.resolution),c[1]=Math.round(a[1]*t.resolution),c[2]=1/c[0],c[3]=1/c[1],d[0]=.5*c[2],d[1]=.5*c[3],d[2]=t.sourceFrame.width*a[2]-.5*c[2],d[3]=t.sourceFrame.height*a[3]-.5*c[3],t.legacy){const v=s.filterArea;v[0]=t.destinationFrame.width,v[1]=t.destinationFrame.height,v[2]=t.sourceFrame.x,v[3]=t.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();const m=e[e.length-1];if(this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,t.renderTexture,m.renderTexture,Oa.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let v=t.renderTexture,w=this.getOptimalFilterTexture(v.width,v.height,t.resolution);w.filterFrame=v.filterFrame;let f=0;for(f=0;f<r.length-1;++f){f===1&&t.multisample>1&&(w=this.getOptimalFilterTexture(v.width,v.height,t.resolution),w.filterFrame=v.filterFrame),r[f].apply(this,v,w,Oa.CLEAR,t);const y=v;v=w,w=y}r[f].apply(this,v,m.renderTexture,Oa.BLEND,t),f>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(v),this.returnFilterTexture(w)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=Oa.CLEAR){const{renderTexture:r,state:s}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e?.filterFrame){const c=this.tempRect;c.x=0,c.y=0,c.width=e.filterFrame.width,c.height=e.filterFrame.height,r.bind(e,e.filterFrame,c)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const a=s.stateId&1||this.forceClear;(t===Oa.CLEAR||t===Oa.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,r,s){const a=this.renderer;a.state.set(e.state),this.bindAndClear(r,s),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,a.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),a.geometry.bind(this.quadUv),a.geometry.draw(Ho.TRIANGLES)):(a.geometry.bind(this.quad),a.geometry.draw(Ho.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:r,destinationFrame:s}=this.activeState,{orig:a}=t._texture,c=e.set(s.width,0,0,s.height,r.x,r.y),d=t.worldTransform.copyTo(Lr.TEMP_MATRIX);return d.invert(),c.prepend(d),c.scale(1/a.width,1/a.height),c.translate(t.anchor.x,t.anchor.y),c}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,r=1,s=wn.NONE){return this.texturePool.getOptimalTexture(e,t,r,s)}getFilterTexture(e,t,r){if(typeof e=="number"){const a=e;e=t,t=a}e=e||this.activeState.renderTexture;const s=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,r||wn.NONE);return s.filterFrame=e.filterFrame,s}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const r=tf[0],s=tf[1],a=tf[2],c=tf[3];r.set(t.left,t.top),s.set(t.left,t.bottom),a.set(t.right,t.top),c.set(t.right,t.bottom),e.apply(r,r),e.apply(s,s),e.apply(a,a),e.apply(c,c);const d=Math.min(r.x,s.x,a.x,c.x),m=Math.min(r.y,s.y,a.y,c.y),v=Math.max(r.x,s.x,a.x,c.x),w=Math.max(r.y,s.y,a.y,c.y);t.x=d,t.y=m,t.width=v-d,t.height=w-m}roundFrame(e,t,r,s,a){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(a){const{a:c,b:d,c:m,d:v}=a;if((Math.abs(d)>1e-4||Math.abs(m)>1e-4)&&(Math.abs(c)>1e-4||Math.abs(v)>1e-4))return}a=a?Zm.copyFrom(a):Zm.identity(),a.translate(-r.x,-r.y).scale(s.width/r.width,s.height/r.height).translate(s.x,s.y),this.transformAABB(a,e),e.ceil(t),this.transformAABB(a.invert(),e)}}}Ox.extension={type:ht.RendererSystem,name:"filter"};Et.add(Ox);class ES{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=wn.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const TS=new zt;class Dx{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new Ug(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new zt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let t=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;gt.PREFER_ENV===pc.WEBGL_LEGACY&&(t=null,r=null),t?e.drawBuffers=s=>t.drawBuffersWEBGL(s):(this.hasMRT=!1,e.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,r=0){const{gl:s}=this;if(e){const a=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,s.bindFramebuffer(s.FRAMEBUFFER,a.framebuffer)),a.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,a.mipLevel=r),a.dirtyId!==e.dirtyId&&(a.dirtyId=e.dirtyId,a.dirtyFormat!==e.dirtyFormat?(a.dirtyFormat=e.dirtyFormat,a.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):a.dirtySize!==e.dirtySize&&(a.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let c=0;c<e.colorTextures.length;c++){const d=e.colorTextures[c];this.renderer.texture.unbind(d.parentTextureArray||d)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const c=t.width>>r,d=t.height>>r,m=c/t.width;this.setViewport(t.x*m,t.y*m,c,d)}else{const c=e.width>>r,d=e.height>>r;this.setViewport(0,0,c,d)}}else this.current&&(this.current=null,s.bindFramebuffer(s.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,r,s){const a=this.viewport;e=Math.round(e),t=Math.round(t),r=Math.round(r),s=Math.round(s),(a.width!==r||a.height!==s||a.x!==e||a.y!==t)&&(a.x=e,a.y=t,a.width=r,a.height=s,this.gl.viewport(e,t,r,s))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,r,s,a=Tg.COLOR|Tg.DEPTH){const{gl:c}=this;c.clearColor(e,t,r,s),c.clear(a)}initFramebuffer(e){const{gl:t}=this,r=new ES(t.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r}resizeFramebuffer(e){const{gl:t}=this,r=e.glFramebuffers[this.CONTEXT_UID];if(r.stencil){t.bindRenderbuffer(t.RENDERBUFFER,r.stencil);let c;this.renderer.context.webGLVersion===1?c=t.DEPTH_STENCIL:e.depth&&e.stencil?c=t.DEPTH24_STENCIL8:e.depth?c=t.DEPTH_COMPONENT24:c=t.STENCIL_INDEX8,r.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,c,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,c,e.width,e.height)}const s=e.colorTextures;let a=s.length;t.drawBuffers||(a=Math.min(a,1));for(let c=0;c<a;c++){const d=s[c],m=d.parentTextureArray||d;this.renderer.texture.bind(m,0),c===0&&r.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,m._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:r}=this,s=e.glFramebuffers[this.CONTEXT_UID],a=e.colorTextures;let c=a.length;r.drawBuffers||(c=Math.min(c,1)),s.multisample>1&&this.canMultisampleFramebuffer(e)?s.msaaBuffer=s.msaaBuffer||r.createRenderbuffer():s.msaaBuffer&&(r.deleteRenderbuffer(s.msaaBuffer),s.msaaBuffer=null,s.blitFramebuffer&&(s.blitFramebuffer.dispose(),s.blitFramebuffer=null));const d=[];for(let m=0;m<c;m++){const v=a[m],w=v.parentTextureArray||v;this.renderer.texture.bind(w,0),m===0&&s.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,s.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,s.multisample,w._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,s.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+m,v.target,w._glTextures[this.CONTEXT_UID].texture,t),d.push(r.COLOR_ATTACHMENT0+m))}if(d.length>1&&r.drawBuffers(d),e.depthTexture&&this.writeDepthTexture){const m=e.depthTexture;this.renderer.texture.bind(m,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,m._glTextures[this.CONTEXT_UID].texture,t)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){s.stencil=s.stencil||r.createRenderbuffer();let m,v;this.renderer.context.webGLVersion===1?(m=r.DEPTH_STENCIL_ATTACHMENT,v=r.DEPTH_STENCIL):e.depth&&e.stencil?(m=r.DEPTH_STENCIL_ATTACHMENT,v=r.DEPTH24_STENCIL8):e.depth?(m=r.DEPTH_ATTACHMENT,v=r.DEPTH_COMPONENT24):(m=r.STENCIL_ATTACHMENT,v=r.STENCIL_INDEX8),r.bindRenderbuffer(r.RENDERBUFFER,s.stencil),s.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,s.multisample,v,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,v,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,m,r.RENDERBUFFER,s.stencil)}else s.stencil&&(r.deleteRenderbuffer(s.stencil),s.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let r=wn.NONE;if(e<=1||t===null)return r;for(let s=0;s<t.length;s++)if(t[s]<=e){r=t[s];break}return r===1&&(r=wn.NONE),r}blit(e,t,r){const{current:s,renderer:a,gl:c,CONTEXT_UID:d}=this;if(a.context.webGLVersion!==2||!s)return;const m=s.glFramebuffers[d];if(!m)return;if(!e){if(!m.msaaBuffer)return;const w=s.colorTextures[0];if(!w)return;m.blitFramebuffer||(m.blitFramebuffer=new Ug(s.width,s.height),m.blitFramebuffer.addColorTexture(0,w)),e=m.blitFramebuffer,e.colorTextures[0]!==w&&(e.colorTextures[0]=w,e.dirtyId++,e.dirtyFormat++),(e.width!==s.width||e.height!==s.height)&&(e.width=s.width,e.height=s.height,e.dirtyId++,e.dirtySize++)}t||(t=TS,t.width=s.width,t.height=s.height),r||(r=t);const v=t.width===r.width&&t.height===r.height;this.bind(e),c.bindFramebuffer(c.READ_FRAMEBUFFER,m.framebuffer),c.blitFramebuffer(t.left,t.top,t.right,t.bottom,r.left,r.top,r.right,r.bottom,c.COLOR_BUFFER_BIT,v?c.NEAREST:c.LINEAR),c.bindFramebuffer(c.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){const r=e.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(!r)return;delete e.glFramebuffers[this.CONTEXT_UID];const a=this.managedFramebuffers.indexOf(e);a>=0&&this.managedFramebuffers.splice(a,1),e.disposeRunner.remove(this),t||(s.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&s.deleteRenderbuffer(r.msaaBuffer),r.stencil&&s.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,t)}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<t.length;r++)this.disposeFramebuffer(t[r],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;const r=e.width,s=e.height,a=this.gl,c=t.stencil=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,c);let d,m;this.renderer.context.webGLVersion===1?(d=a.DEPTH_STENCIL_ATTACHMENT,m=a.DEPTH_STENCIL):e.depth?(d=a.DEPTH_STENCIL_ATTACHMENT,m=a.DEPTH24_STENCIL8):(d=a.STENCIL_ATTACHMENT,m=a.STENCIL_INDEX8),t.msaaBuffer?a.renderbufferStorageMultisample(a.RENDERBUFFER,t.multisample,m,r,s):a.renderbufferStorage(a.RENDERBUFFER,m,r,s),a.framebufferRenderbuffer(a.FRAMEBUFFER,d,a.RENDERBUFFER,c)}reset(){this.current=this.unknownFramebuffer,this.viewport=new zt}destroy(){this.renderer=null}}Dx.extension={type:ht.RendererSystem,name:"framebuffer"};Et.add(Dx);const Jm={5126:4,5123:2,5121:1};class Lx{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){let r=this.renderer.context.extensions.vertexArrayObject;gt.PREFER_ENV===pc.WEBGL_LEGACY&&(r=null),r?(e.createVertexArray=()=>r.createVertexArrayOES(),e.bindVertexArray=s=>r.bindVertexArrayOES(s),e.deleteVertexArray=s=>r.deleteVertexArrayOES(s)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(t.webGLVersion!==2){const r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=(s,a)=>r.vertexAttribDivisorANGLE(s,a),e.drawElementsInstanced=(s,a,c,d,m)=>r.drawElementsInstancedANGLE(s,a,c,d,m),e.drawArraysInstanced=(s,a,c,d)=>r.drawArraysInstancedANGLE(s,a,c,d)):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:r}=this;let s=e.glVertexArrayObjects[this.CONTEXT_UID],a=!1;s||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=s={},a=!0);const c=s[t.program.id]||this.initGeometryVao(e,t,a);this._activeGeometry=e,this._activeVao!==c&&(this._activeVao=c,this.hasVao?r.bindVertexArray(c):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let r=0;r<e.buffers.length;r++){const s=e.buffers[r];t.update(s)}}checkCompatibility(e,t){const r=e.attributes,s=t.attributeData;for(const a in s)if(!r[a])throw new Error(`shader and geometry incompatible, geometry missing the "${a}" attribute`)}getSignature(e,t){const r=e.attributes,s=t.attributeData,a=["g",e.id];for(const c in r)s[c]&&a.push(c,s[c].location);return a.join("-")}initGeometryVao(e,t,r=!0){const s=this.gl,a=this.CONTEXT_UID,c=this.renderer.buffer,d=t.program;d.glPrograms[a]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,d);const m=this.getSignature(e,d),v=e.glVertexArrayObjects[this.CONTEXT_UID];let w=v[m];if(w)return v[d.id]=w,w;const f=e.buffers,y=e.attributes,b={},T={};for(const R in f)b[R]=0,T[R]=0;for(const R in y)!y[R].size&&d.attributeData[R]?y[R].size=d.attributeData[R].size:y[R].size||console.warn(`PIXI Geometry attribute '${R}' size cannot be determined (likely the bound shader does not have the attribute)`),b[y[R].buffer]+=y[R].size*Jm[y[R].type];for(const R in y){const k=y[R],L=k.size;k.stride===void 0&&(b[k.buffer]===L*Jm[k.type]?k.stride=0:k.stride=b[k.buffer]),k.start===void 0&&(k.start=T[k.buffer],T[k.buffer]+=L*Jm[k.type])}w=s.createVertexArray(),s.bindVertexArray(w);for(let R=0;R<f.length;R++){const k=f[R];c.bind(k),r&&k._glBuffers[a].refCount++}return this.activateVao(e,d),v[d.id]=w,v[m]=w,s.bindVertexArray(null),c.unbind(Fa.ARRAY_BUFFER),w}disposeGeometry(e,t){if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const r=e.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=e.buffers,c=this.renderer?.buffer;if(e.disposeRunner.remove(this),!!r){if(c)for(let d=0;d<a.length;d++){const m=a[d]._glBuffers[this.CONTEXT_UID];m&&(m.refCount--,m.refCount===0&&!t&&c.dispose(a[d],t))}if(!t){for(const d in r)if(d[0]==="g"){const m=r[d];this._activeVao===m&&this.unbind(),s.deleteVertexArray(m)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let r=0;r<t.length;r++)this.disposeGeometry(this.managedGeometries[t[r]],e)}activateVao(e,t){const r=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,c=e.buffers,d=e.attributes;e.indexBuffer&&a.bind(e.indexBuffer);let m=null;for(const v in d){const w=d[v],f=c[w.buffer],y=f._glBuffers[s];if(t.attributeData[v]){m!==y&&(a.bind(f),m=y);const b=t.attributeData[v].location;if(r.enableVertexAttribArray(b),r.vertexAttribPointer(b,w.size,w.type||r.FLOAT,w.normalized,w.stride,w.start),w.instance)if(this.hasInstance)r.vertexAttribDivisor(b,w.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,r,s){const{gl:a}=this,c=this._activeGeometry;if(c.indexBuffer){const d=c.indexBuffer.data.BYTES_PER_ELEMENT,m=d===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;d===2||d===4&&this.canUseUInt32ElementIndex?c.instanced?a.drawElementsInstanced(e,t||c.indexBuffer.data.length,m,(r||0)*d,s||1):a.drawElements(e,t||c.indexBuffer.data.length,m,(r||0)*d):console.warn("unsupported index buffer type: uint32")}else c.instanced?a.drawArraysInstanced(e,r,t||c.getSize(),s||1):a.drawArrays(e,r,t||c.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Lx.extension={type:ht.RendererSystem,name:"geometry"};Et.add(Lx);const Z0=new Lr;class Ey{constructor(e,t){this._texture=e,this.mapCoord=new Lr,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){t===void 0&&(t=e);const r=this.mapCoord;for(let s=0;s<e.length;s+=2){const a=e[s],c=e[s+1];t[s]=a*r.a+c*r.c+r.tx,t[s+1]=a*r.b+c*r.d+r.ty}return t}update(e){const t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const s=t.orig,a=t.trim;a&&(Z0.set(s.width/a.width,0,0,s.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(Z0));const c=t.baseTexture,d=this.uClampFrame,m=this.clampMargin/c.resolution,v=this.clampOffset;return d[0]=(t._frame.x+m+v)/c.width,d[1]=(t._frame.y+m+v)/c.height,d[2]=(t._frame.x+t._frame.width-m+v)/c.width,d[3]=(t._frame.y+t._frame.height-m+v)/c.height,this.uClampOffset[0]=v/c.realWidth,this.uClampOffset[1]=v/c.realHeight,this.isSimple=t._frame.width===c.width&&t._frame.height===c.height&&t.rotate===0,!0}}var AS=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,CS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class IS extends Li{constructor(e,t,r){let s=null;typeof e!="string"&&t===void 0&&r===void 0&&(s=e,e=void 0,t=void 0,r=void 0),super(e||CS,t||AS,r),this.maskSprite=s,this.maskMatrix=new Lr}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,r,s){const a=this._maskSprite,c=a._texture;c.valid&&(c.uvMatrix||(c.uvMatrix=new Ey(c,0)),c.uvMatrix.update(),this.uniforms.npmAlpha=c.baseTexture.alphaMode?0:1,this.uniforms.mask=c,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(c.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=c.uvMatrix.uClampFrame,e.applyFilter(this,t,r,s))}}class PS{constructor(e=null){this.type=In.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Li.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=In.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class Nx{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let r=t;if(!r.isMaskData){const a=this.maskDataPool.pop()||new PS;a.pooled=!0,a.maskObject=t,r=a}const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(s),r._colorMask=s?s._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==In.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case In.SCISSOR:this.renderer.scissor.push(r);break;case In.STENCIL:this.renderer.stencil.push(r);break;case In.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case In.COLOR:this.pushColorMask(r);break}r.type===In.SPRITE&&this.maskStack.push(r)}pop(e){const t=this.maskStack.pop();if(!(!t||t._target!==e)){if(t.enabled)switch(t.type){case In.SCISSOR:this.renderer.scissor.pop(t);break;case In.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case In.SPRITE:this.popSpriteMask(t);break;case In.COLOR:this.popColorMask(t);break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){const r=this.maskStack[this.maskStack.length-1];r.type===In.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=In.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=In.SCISSOR:e.type=In.STENCIL:e.type=In.COLOR}pushSpriteMask(e){const{maskObject:t}=e,r=e._target;let s=e._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex],s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new IS])),s[0].resolution=e.resolution,s[0].multisample=e.multisample,s[0].maskSprite=t;const a=r.filterArea;r.filterArea=t.getBounds(!0),this.renderer.filter.push(r,s),r.filterArea=a,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,r=e._colorMask=t&e.colorMask;r!==t&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}popColorMask(e){const t=e._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==t&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}destroy(){this.renderer=null}}Nx.extension={type:ht.RendererSystem,name:"mask"};Et.add(Nx);class Fx{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,r=this.getStackLength();this.maskStack=e;const s=this.getStackLength();s!==r&&(s===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const J0=new Lr,e_=[],Bx=class xf extends Fx{constructor(e){super(e),this.glConst=gt.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:r}=e,{renderer:s}=this,a=s.renderTexture,c=r.getBounds(!0,e_.pop()??new zt);this.roundFrameToPixels(c,a.current?a.current.resolution:s.resolution,a.sourceFrame,a.destinationFrame,s.projection.transform),t&&c.fit(t),e._scissorRectLocal=c}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:r,c:s,d:a}=e;return(Math.abs(r)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(a)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||xf.isMatrixRotated(t.worldTransform)||xf.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const r=e._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(e,t,r,s,a){xf.isMatrixRotated(a)||(a=a?J0.copyFrom(a):J0.identity(),a.translate(-r.x,-r.y).scale(s.width/r.width,s.height/r.height).translate(s.x,s.y),this.renderer.filter.transformAABB(a,e),e.fit(s),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&e_.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};Bx.extension={type:ht.RendererSystem,name:"scissor"};let RS=Bx;Et.add(RS);class Ux extends Fx{constructor(e){super(e),this.glConst=gt.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:r}=this.renderer,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++;const a=e._colorMask;a!==0&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,s,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,a!==0&&(e._colorMask=a,r.colorMask((a&1)!==0,(a&2)!==0,(a&4)!==0,(a&8)!==0)),this._useCurrent()}pop(e){const t=this.renderer.gl;if(this.getStackLength()===0)t.disable(t.STENCIL_TEST);else{const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=r?r._colorMask:15;s!==0&&(r._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,s!==0&&(r._colorMask=s,t.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}Ux.extension={type:ht.RendererSystem,name:"stencil"};Et.add(Ux);class jx{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return Jt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return Jt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return Jt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}jx.extension={type:[ht.RendererSystem,ht.CanvasRendererSystem],name:"_plugin"};Et.add(jx);class Gx{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Lr,this.transform=null}update(e,t,r,s){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,s),this.transform&&this.projectionMatrix.append(this.transform);const a=this.renderer;a.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,a.globalUniforms.update(),a.shader.shader&&a.shader.syncUniformGroup(a.shader.shader.uniforms.globals)}calculateProjection(e,t,r,s){const a=this.projectionMatrix,c=s?-1:1;a.identity(),a.a=1/t.width*2,a.d=c*(1/t.height*2),a.tx=-1-t.x*a.a,a.ty=-c-t.y*a.d}setTransform(e){}destroy(){this.renderer=null}}Gx.extension={type:ht.RendererSystem,name:"projection"};Et.add(Gx);const kS=new ep,t_=new zt;class zx{constructor(e){this.renderer=e,this._tempMatrix=new Lr}generateTexture(e,t){const{region:r,...s}=t||{},a=r?.copyTo(t_)||e.getLocalBounds(t_,!0),c=s.resolution||this.renderer.resolution;a.width=Math.max(a.width,1/c),a.height=Math.max(a.height,1/c),s.width=a.width,s.height=a.height,s.resolution=c,s.multisample??(s.multisample=this.renderer.multisample);const d=mc.create(s);this._tempMatrix.tx=-a.x,this._tempMatrix.ty=-a.y;const m=e.transform;return e.transform=kS,this.renderer.render(e,{renderTexture:d,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=m,d}destroy(){}}zx.extension={type:[ht.RendererSystem,ht.CanvasRendererSystem],name:"textureGenerator"};Et.add(zx);const Zu=new zt,$h=new zt;class Hx{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new zt,this.destinationFrame=new zt,this.viewportFrame=new zt}contextChange(){const e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,r){const s=this.renderer;this.current=e;let a,c,d;e?(a=e.baseTexture,d=a.resolution,t||(Zu.width=e.frame.width,Zu.height=e.frame.height,t=Zu),r||($h.x=e.frame.x,$h.y=e.frame.y,$h.width=t.width,$h.height=t.height,r=$h),c=a.framebuffer):(d=s.resolution,t||(Zu.width=s._view.screen.width,Zu.height=s._view.screen.height,t=Zu),r||(r=Zu,r.width=t.width,r.height=t.height));const m=this.viewportFrame;m.x=r.x*d,m.y=r.y*d,m.width=r.width*d,m.height=r.height*d,e||(m.y=s.view.height-(m.y+m.height)),m.ceil(),this.renderer.framebuffer.bind(c,m),this.renderer.projection.update(r,t,d,!c),e?this.renderer.mask.setMaskStack(a.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(r)}clear(e,t){const r=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,s=kr.shared.setValue(e||r);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&s.premultiply(s.alpha);const a=this.destinationFrame,c=this.current?this.current.baseTexture:this.renderer._view.screen,d=a.width!==c.width||a.height!==c.height;if(d){let{x:m,y:v,width:w,height:f}=this.viewportFrame;m=Math.round(m),v=Math.round(v),w=Math.round(w),f=Math.round(f),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(m,v,w,f)}this.renderer.framebuffer.clear(s.red,s.green,s.blue,s.alpha,t),d&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}Hx.extension={type:ht.RendererSystem,name:"renderTexture"};Et.add(Hx);class MS{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function OS(n,e){const t={},r=e.getProgramParameter(n,e.ACTIVE_ATTRIBUTES);for(let s=0;s<r;s++){const a=e.getActiveAttrib(n,s);if(a.name.startsWith("gl_"))continue;const c=Cx(e,a.type),d={type:c,name:a.name,size:Ax(c),location:e.getAttribLocation(n,a.name)};t[a.name]=d}return t}function DS(n,e){const t={},r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let s=0;s<r;s++){const a=e.getActiveUniform(n,s),c=a.name.replace(/\[.*?\]$/,""),d=!!a.name.match(/\[.*?\]$/),m=Cx(e,a.type);t[c]={name:c,index:s,type:m,size:a.size,isArray:d,value:Ex(m,a.size)}}return t}function LS(n,e){const t=$0(n,n.VERTEX_SHADER,e.vertexSrc),r=$0(n,n.FRAGMENT_SHADER,e.fragmentSrc),s=n.createProgram();n.attachShader(s,t),n.attachShader(s,r);const a=e.extra?.transformFeedbackVaryings;if(a&&(typeof n.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):n.transformFeedbackVaryings(s,a.names,a.bufferMode==="separate"?n.SEPARATE_ATTRIBS:n.INTERLEAVED_ATTRIBS)),n.linkProgram(s),n.getProgramParameter(s,n.LINK_STATUS)||cS(n,s,t,r),e.attributeData=OS(s,n),e.uniformData=DS(s,n),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const d=Object.keys(e.attributeData);d.sort((m,v)=>m>v?1:-1);for(let m=0;m<d.length;m++)e.attributeData[d[m]].location=m,n.bindAttribLocation(s,m,d[m]);n.linkProgram(s)}n.deleteShader(t),n.deleteShader(r);const c={};for(const d in e.uniformData){const m=e.uniformData[d];c[d]={location:n.getUniformLocation(s,d),value:Ex(m.type,m.size)}}return new MS(s,c)}function NS(n,e,t,r,s){t.buffer.update(s)}const FS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Vx={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function BS(n){const e=n.map(a=>({data:a,offset:0,dataLen:0,dirty:0}));let t=0,r=0,s=0;for(let a=0;a<e.length;a++){const c=e[a];if(t=Vx[c.data.type],c.data.size>1&&(t=Math.max(t,16)*c.data.size),c.dataLen=t,r%t!==0&&r<16){const d=r%t%16;r+=d,s+=d}r+t>16?(s=Math.ceil(s/16)*16,c.offset=s,s+=t,r=t):(c.offset=s,r+=t,s+=t)}return s=Math.ceil(s/16)*16,{uboElements:e,size:s}}function US(n,e){const t=[];for(const r in n)e[r]&&t.push(e[r]);return t.sort((r,s)=>r.index-s.index),t}function jS(n,e){if(!n.autoManage)return{size:0,syncFunc:NS};const t=US(n.uniforms,e),{uboElements:r,size:s}=BS(t),a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let c=0;c<r.length;c++){const d=r[c],m=n.uniforms[d.data.name],v=d.data.name;let w=!1;for(let f=0;f<th.length;f++){const y=th[f];if(y.codeUbo&&y.test(d.data,m)){a.push(`offset = ${d.offset/4};`,th[f].codeUbo(d.data.name,m)),w=!0;break}}if(!w)if(d.data.size>1){const f=Ax(d.data.type),y=Math.max(Vx[d.data.type]/16,1),b=f/y,T=(4-b%4)%4;a.push(`
                cv = ud.${v}.value;
                v = uv.${v};
                offset = ${d.offset/4};

                t = 0;

                for(var i=0; i < ${d.data.size*y}; i++)
                {
                    for(var j = 0; j < ${b}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${T};
                }

                `)}else{const f=FS[d.data.type];a.push(`
                cv = ud.${v}.value;
                v = uv.${v};
                offset = ${d.offset/4};
                ${f};
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}let GS=0;const rf={textureCount:0,uboCount:0};class Wx{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=GS++}systemCheck(){if(!dS())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const r=e.program,s=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(s.program)),t||(rf.textureCount=0,rf.uboCount=0,this.syncUniformGroup(e.uniformGroup,rf)),s}setUniforms(e){const t=this.shader.program,r=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(r.uniformData,e,this.renderer)}syncUniformGroup(e,t){const r=this.getGlProgram();(!e.static||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,t))}syncUniforms(e,t,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,r)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=aS(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const r=this.getGlProgram();if(!e.static||e.dirtyId!==0||!r.uniformGroups[e.id]){e.dirtyId=0;const s=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,t);e.buffer.update(),s(r.uniformData,e.uniforms,this.renderer,rf,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[t])}createSyncBufferGroup(e,t,r){const{gl:s}=this.renderer;this.renderer.buffer.bind(e.buffer);const a=this.gl.getUniformBlockIndex(t.program,r);t.uniformBufferBindings[r]=this.shader.uniformBindCount,s.uniformBlockBinding(t.program,a,this.shader.uniformBindCount),this.shader.uniformBindCount++;const c=this.getSignature(e,this.shader.program.uniformData,"ubo");let d=this._uboCache[c];if(d||(d=this._uboCache[c]=jS(e,this.shader.program.uniformData)),e.autoManage){const m=new Float32Array(d.size/4);e.buffer.update(m)}return t.uniformGroups[e.id]=d.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,r){const s=e.uniforms,a=[`${r}-`];for(const c in s)a.push(c),t[c]&&a.push(t[c].type);return a.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,r=e.program,s=LS(t,r);return r.glPrograms[this.renderer.CONTEXT_UID]=s,s}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}Wx.extension={type:ht.RendererSystem,name:"shader"};Et.add(Wx);class Lf{constructor(e){this.renderer=e}run(e){const{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&console.log(`PixiJS 7.4.3 - ${t.rendererLogId} - https://pixijs.com`),t.resize(t.screen.width,t.screen.height)}destroy(){}}Lf.defaultOptions={hello:!1},Lf.extension={type:[ht.RendererSystem,ht.CanvasRendererSystem],name:"startup"};Et.add(Lf);function zS(n,e=[]){return e[Dt.NORMAL]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.ADD]=[n.ONE,n.ONE],e[Dt.MULTIPLY]=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.SCREEN]=[n.ONE,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.OVERLAY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.DARKEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.LIGHTEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.COLOR_DODGE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.COLOR_BURN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.HARD_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.SOFT_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.DIFFERENCE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.EXCLUSION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.HUE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.SATURATION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.COLOR]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.LUMINOSITY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.NONE]=[0,0],e[Dt.NORMAL_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.ADD_NPM]=[n.SRC_ALPHA,n.ONE,n.ONE,n.ONE],e[Dt.SCREEN_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.SRC_IN]=[n.DST_ALPHA,n.ZERO],e[Dt.SRC_OUT]=[n.ONE_MINUS_DST_ALPHA,n.ZERO],e[Dt.SRC_ATOP]=[n.DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[Dt.DST_OVER]=[n.ONE_MINUS_DST_ALPHA,n.ONE],e[Dt.DST_IN]=[n.ZERO,n.SRC_ALPHA],e[Dt.DST_OUT]=[n.ZERO,n.ONE_MINUS_SRC_ALPHA],e[Dt.DST_ATOP]=[n.ONE_MINUS_DST_ALPHA,n.SRC_ALPHA],e[Dt.XOR]=[n.ONE_MINUS_DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[Dt.SUBTRACT]=[n.ONE,n.ONE,n.ONE,n.ONE,n.FUNC_REVERSE_SUBTRACT,n.FUNC_ADD],e}const HS=0,VS=1,WS=2,$S=3,qS=4,XS=5,$x=class jg{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Dt.NONE,this._blendEq=!1,this.map=[],this.map[HS]=this.setBlend,this.map[VS]=this.setOffset,this.map[WS]=this.setCullFace,this.map[$S]=this.setDepthTest,this.map[qS]=this.setFrontFace,this.map[XS]=this.setDepthMask,this.checks=[],this.defaultState=new za,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=zS(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,r=0;for(;t;)t&1&&this.map[r].call(this,!!(e.data&1<<r)),t=t>>1,r++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(jg.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(jg.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],r=this.gl;t.length===2?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const r=this.checks.indexOf(e);t&&r===-1?this.checks.push(e):!t&&r!==-1&&this.checks.splice(r,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};$x.extension={type:ht.RendererSystem,name:"state"};let KS=$x;Et.add(KS);class YS extends dd{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter(s=>e.systems[s]),r=[...t,...Object.keys(e.systems).filter(s=>!t.includes(s))];for(const s of r)this.addSystem(e.systems[s],s)}addRunners(...e){e.forEach(t=>{this.runners[t]=new $o(t)})}addSystem(e,t){const r=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=r,this._systemsHash[t]=r;for(const s in this.runners)this.runners[s].add(r);return this}emitWithCustomOptions(e,t){const r=Object.keys(this._systemsHash);e.items.forEach(s=>{const a=r.find(c=>this._systemsHash[c]===s);s[e.name](t[a])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const Jh=class wf{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=wf.defaultMaxIdle,this.checkCountMax=wf.defaultCheckCountMax,this.mode=wf.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==_y.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let r=!1;for(let s=0;s<t.length;s++){const a=t[s];a.resource&&this.count-a.touched>this.maxIdle&&(e.destroyTexture(a,!0),t[s]=null,r=!0)}if(r){let s=0;for(let a=0;a<t.length;a++)t[a]!==null&&(t[s++]=t[a]);t.length=s}}unload(e){const t=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(let s=e.children.length-1;s>=0;s--)this.unload(e.children[s])}destroy(){this.renderer=null}};Jh.defaultMode=_y.AUTO,Jh.defaultMaxIdle=3600,Jh.defaultCheckCountMax=600,Jh.extension={type:ht.RendererSystem,name:"textureGC"};let ac=Jh;Et.add(ac);class eg{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Pt.UNSIGNED_BYTE,this.internalFormat=tt.RGBA,this.samplerType=0}}function QS(n){let e;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?e={[n.RGB]:mt.FLOAT,[n.RGBA]:mt.FLOAT,[n.ALPHA]:mt.FLOAT,[n.LUMINANCE]:mt.FLOAT,[n.LUMINANCE_ALPHA]:mt.FLOAT,[n.R8]:mt.FLOAT,[n.R8_SNORM]:mt.FLOAT,[n.RG8]:mt.FLOAT,[n.RG8_SNORM]:mt.FLOAT,[n.RGB8]:mt.FLOAT,[n.RGB8_SNORM]:mt.FLOAT,[n.RGB565]:mt.FLOAT,[n.RGBA4]:mt.FLOAT,[n.RGB5_A1]:mt.FLOAT,[n.RGBA8]:mt.FLOAT,[n.RGBA8_SNORM]:mt.FLOAT,[n.RGB10_A2]:mt.FLOAT,[n.RGB10_A2UI]:mt.FLOAT,[n.SRGB8]:mt.FLOAT,[n.SRGB8_ALPHA8]:mt.FLOAT,[n.R16F]:mt.FLOAT,[n.RG16F]:mt.FLOAT,[n.RGB16F]:mt.FLOAT,[n.RGBA16F]:mt.FLOAT,[n.R32F]:mt.FLOAT,[n.RG32F]:mt.FLOAT,[n.RGB32F]:mt.FLOAT,[n.RGBA32F]:mt.FLOAT,[n.R11F_G11F_B10F]:mt.FLOAT,[n.RGB9_E5]:mt.FLOAT,[n.R8I]:mt.INT,[n.R8UI]:mt.UINT,[n.R16I]:mt.INT,[n.R16UI]:mt.UINT,[n.R32I]:mt.INT,[n.R32UI]:mt.UINT,[n.RG8I]:mt.INT,[n.RG8UI]:mt.UINT,[n.RG16I]:mt.INT,[n.RG16UI]:mt.UINT,[n.RG32I]:mt.INT,[n.RG32UI]:mt.UINT,[n.RGB8I]:mt.INT,[n.RGB8UI]:mt.UINT,[n.RGB16I]:mt.INT,[n.RGB16UI]:mt.UINT,[n.RGB32I]:mt.INT,[n.RGB32UI]:mt.UINT,[n.RGBA8I]:mt.INT,[n.RGBA8UI]:mt.UINT,[n.RGBA16I]:mt.INT,[n.RGBA16UI]:mt.UINT,[n.RGBA32I]:mt.INT,[n.RGBA32UI]:mt.UINT,[n.DEPTH_COMPONENT16]:mt.FLOAT,[n.DEPTH_COMPONENT24]:mt.FLOAT,[n.DEPTH_COMPONENT32F]:mt.FLOAT,[n.DEPTH_STENCIL]:mt.FLOAT,[n.DEPTH24_STENCIL8]:mt.FLOAT,[n.DEPTH32F_STENCIL8]:mt.FLOAT}:e={[n.RGB]:mt.FLOAT,[n.RGBA]:mt.FLOAT,[n.ALPHA]:mt.FLOAT,[n.LUMINANCE]:mt.FLOAT,[n.LUMINANCE_ALPHA]:mt.FLOAT,[n.DEPTH_STENCIL]:mt.FLOAT},e}function ZS(n){let e;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?e={[Pt.UNSIGNED_BYTE]:{[tt.RGBA]:n.RGBA8,[tt.RGB]:n.RGB8,[tt.RG]:n.RG8,[tt.RED]:n.R8,[tt.RGBA_INTEGER]:n.RGBA8UI,[tt.RGB_INTEGER]:n.RGB8UI,[tt.RG_INTEGER]:n.RG8UI,[tt.RED_INTEGER]:n.R8UI,[tt.ALPHA]:n.ALPHA,[tt.LUMINANCE]:n.LUMINANCE,[tt.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[Pt.BYTE]:{[tt.RGBA]:n.RGBA8_SNORM,[tt.RGB]:n.RGB8_SNORM,[tt.RG]:n.RG8_SNORM,[tt.RED]:n.R8_SNORM,[tt.RGBA_INTEGER]:n.RGBA8I,[tt.RGB_INTEGER]:n.RGB8I,[tt.RG_INTEGER]:n.RG8I,[tt.RED_INTEGER]:n.R8I},[Pt.UNSIGNED_SHORT]:{[tt.RGBA_INTEGER]:n.RGBA16UI,[tt.RGB_INTEGER]:n.RGB16UI,[tt.RG_INTEGER]:n.RG16UI,[tt.RED_INTEGER]:n.R16UI,[tt.DEPTH_COMPONENT]:n.DEPTH_COMPONENT16},[Pt.SHORT]:{[tt.RGBA_INTEGER]:n.RGBA16I,[tt.RGB_INTEGER]:n.RGB16I,[tt.RG_INTEGER]:n.RG16I,[tt.RED_INTEGER]:n.R16I},[Pt.UNSIGNED_INT]:{[tt.RGBA_INTEGER]:n.RGBA32UI,[tt.RGB_INTEGER]:n.RGB32UI,[tt.RG_INTEGER]:n.RG32UI,[tt.RED_INTEGER]:n.R32UI,[tt.DEPTH_COMPONENT]:n.DEPTH_COMPONENT24},[Pt.INT]:{[tt.RGBA_INTEGER]:n.RGBA32I,[tt.RGB_INTEGER]:n.RGB32I,[tt.RG_INTEGER]:n.RG32I,[tt.RED_INTEGER]:n.R32I},[Pt.FLOAT]:{[tt.RGBA]:n.RGBA32F,[tt.RGB]:n.RGB32F,[tt.RG]:n.RG32F,[tt.RED]:n.R32F,[tt.DEPTH_COMPONENT]:n.DEPTH_COMPONENT32F},[Pt.HALF_FLOAT]:{[tt.RGBA]:n.RGBA16F,[tt.RGB]:n.RGB16F,[tt.RG]:n.RG16F,[tt.RED]:n.R16F},[Pt.UNSIGNED_SHORT_5_6_5]:{[tt.RGB]:n.RGB565},[Pt.UNSIGNED_SHORT_4_4_4_4]:{[tt.RGBA]:n.RGBA4},[Pt.UNSIGNED_SHORT_5_5_5_1]:{[tt.RGBA]:n.RGB5_A1},[Pt.UNSIGNED_INT_2_10_10_10_REV]:{[tt.RGBA]:n.RGB10_A2,[tt.RGBA_INTEGER]:n.RGB10_A2UI},[Pt.UNSIGNED_INT_10F_11F_11F_REV]:{[tt.RGB]:n.R11F_G11F_B10F},[Pt.UNSIGNED_INT_5_9_9_9_REV]:{[tt.RGB]:n.RGB9_E5},[Pt.UNSIGNED_INT_24_8]:{[tt.DEPTH_STENCIL]:n.DEPTH24_STENCIL8},[Pt.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[tt.DEPTH_STENCIL]:n.DEPTH32F_STENCIL8}}:e={[Pt.UNSIGNED_BYTE]:{[tt.RGBA]:n.RGBA,[tt.RGB]:n.RGB,[tt.ALPHA]:n.ALPHA,[tt.LUMINANCE]:n.LUMINANCE,[tt.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[Pt.UNSIGNED_SHORT_5_6_5]:{[tt.RGB]:n.RGB},[Pt.UNSIGNED_SHORT_4_4_4_4]:{[tt.RGBA]:n.RGBA},[Pt.UNSIGNED_SHORT_5_5_5_1]:{[tt.RGBA]:n.RGBA}},e}class qx{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Gt,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=ZS(e),this.samplerTypes=QS(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let s=0;s<t;s++)this.boundTextures[s]=null;this.emptyTextures={};const r=new eg(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new eg(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let s=0;s<6;s++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let s=0;s<this.boundTextures.length;s++)this.bind(null,s)}bind(e,t=0){const{gl:r}=this;if(e=e?.castToBaseTexture(),e?.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const s=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(e.target,s.texture)),s.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),this.updateTexture(e)):s.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let s=0;s<r.length;s++)r[s]===this.unknownTexture&&this.bind(null,s)}for(let s=0;s<r.length;s++)r[s]===e&&(this.currentLocation!==s&&(t.activeTexture(t.TEXTURE0+s),this.currentLocation=s),t.bindTexture(e.target,this.emptyTextures[e.target].texture),r[s]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:r,CONTEXT_UID:s}=this;if(r)for(let a=e-1;a>=0;--a){const c=t[a];c&&c._glTextures[s].samplerType!==mt.FLOAT&&this.renderer.texture.unbind(c)}}initTexture(e){const t=new eg(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){t.internalFormat=this.internalFormats[e.type]?.[e.format]??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??mt.FLOAT,this.webGLVersion===2&&e.type===Pt.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const r=this.renderer;if(this.initTextureType(e,t),e.resource?.upload(r,e,t))t.samplerType!==mt.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,a=e.realHeight,c=r.gl;(t.width!==s||t.height!==a||t.dirtyId<0)&&(t.width=s,t.height=a,c.texImage2D(e.target,0,t.internalFormat,s,a,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:r}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const s=this.managedTextures.indexOf(e);s!==-1&&eh(this.managedTextures,s,1)}}updateTextureStyle(e){const t=e._glTextures[this.CONTEXT_UID];t&&((e.mipmap===Ua.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?t.mipmap=!1:t.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?t.wrapMode=xl.CLAMP:t.wrapMode=e.wrapMode,e.resource?.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const r=this.gl;if(t.mipmap&&e.mipmap!==Ua.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===yl.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const s=this.renderer.context.extensions.anisotropicFiltering;if(s&&e.anisotropicLevel>0&&e.scaleMode===yl.LINEAR){const a=Math.min(e.anisotropicLevel,r.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,s.TEXTURE_MAX_ANISOTROPY_EXT,a)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===yl.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===yl.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}qx.extension={type:ht.RendererSystem,name:"texture"};Et.add(qx);class Xx{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:r}=this,s=e._glTransformFeedbacks[r]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,s)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:r,renderer:s}=this;t&&s.shader.bind(t),r.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:r,CONTEXT_UID:s}=this,a=t.createTransformFeedback();e._glTransformFeedbacks[s]=a,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,a);for(let c=0;c<e.buffers.length;c++){const d=e.buffers[c];d&&(r.buffer.update(d),d._glBuffers[s].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,c,d._glBuffers[s].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),a}disposeTransformFeedback(e,t){const r=e._glTransformFeedbacks[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this);const a=this.renderer.buffer;if(a)for(let c=0;c<e.buffers.length;c++){const d=e.buffers[c];if(!d)continue;const m=d._glBuffers[this.CONTEXT_UID];m&&(m.refCount--,m.refCount===0&&!t&&a.dispose(d,t))}r&&(t||s.deleteTransformFeedback(r),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Xx.extension={type:ht.RendererSystem,name:"transformFeedback"};Et.add(Xx);class Nf{constructor(e){this.renderer=e}init(e){this.screen=new zt(0,0,e.width,e.height),this.element=e.view||gt.ADAPTER.createCanvas(),this.resolution=e.resolution||gt.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const r=this.element.width/this.resolution,s=this.element.height/this.resolution;this.screen.width=r,this.screen.height=s,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${s}px`),this.renderer.emit("resize",r,s),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){e&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}Nf.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},Nf.extension={type:[ht.RendererSystem,ht.CanvasRendererSystem],name:"_view"};Et.add(Nf);gt.PREFER_ENV=pc.WEBGL2;gt.STRICT_TEXTURE_CACHE=!1;gt.RENDER_OPTIONS={...Df.defaultOptions,...Of.defaultOptions,...Nf.defaultOptions,...Lf.defaultOptions};Object.defineProperties(gt,{WRAP_MODE:{get(){return Gt.defaultOptions.wrapMode},set(n){Jt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Gt.defaultOptions.wrapMode=n}},SCALE_MODE:{get(){return Gt.defaultOptions.scaleMode},set(n){Jt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Gt.defaultOptions.scaleMode=n}},MIPMAP_TEXTURES:{get(){return Gt.defaultOptions.mipmap},set(n){Jt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Gt.defaultOptions.mipmap=n}},ANISOTROPIC_LEVEL:{get(){return Gt.defaultOptions.anisotropicLevel},set(n){Jt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Gt.defaultOptions.anisotropicLevel=n}},FILTER_RESOLUTION:{get(){return Jt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Li.defaultResolution},set(n){Li.defaultResolution=n}},FILTER_MULTISAMPLE:{get(){return Jt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Li.defaultMultisample},set(n){Li.defaultMultisample=n}},SPRITE_MAX_TEXTURES:{get(){return oc.defaultMaxTextures},set(n){Jt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),oc.defaultMaxTextures=n}},SPRITE_BATCH_SIZE:{get(){return oc.defaultBatchSize},set(n){Jt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),oc.defaultBatchSize=n}},CAN_UPLOAD_SAME_BUFFER:{get(){return oc.canUploadSameBuffer},set(n){Jt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),oc.canUploadSameBuffer=n}},GC_MODE:{get(){return ac.defaultMode},set(n){Jt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),ac.defaultMode=n}},GC_MAX_IDLE:{get(){return ac.defaultMaxIdle},set(n){Jt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),ac.defaultMaxIdle=n}},GC_MAX_CHECK_COUNT:{get(){return ac.defaultCheckCountMax},set(n){Jt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),ac.defaultCheckCountMax=n}},PRECISION_VERTEX:{get(){return _l.defaultVertexPrecision},set(n){Jt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),_l.defaultVertexPrecision=n}},PRECISION_FRAGMENT:{get(){return _l.defaultFragmentPrecision},set(n){Jt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),_l.defaultFragmentPrecision=n}}});var yu=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(yu||{});class tg{constructor(e,t=null,r=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=r,this.once=s}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const Kx=class Ds{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new tg(null,null,1/0),this.deltaMS=1/Ds.targetFPMS,this.elapsedMS=1/Ds.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,r=yu.NORMAL){return this._addListener(new tg(e,t,r))}addOnce(e,t,r=yu.NORMAL){return this._addListener(new tg(e,t,r,!0))}_addListener(e){let t=this._head.next,r=this._head;if(!t)e.connect(r);else{for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}return this._startIfPossible(),this}remove(e,t){let r=this._head.next;for(;r;)r.match(e,t)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const a=e-this._lastFrame|0;if(a<this._minElapsedMS)return;this._lastFrame=e-a%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Ds.targetFPMS;const r=this._head;let s=r.next;for(;s;)s=s.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,t)/1e3,Ds.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Ds._shared){const e=Ds._shared=new Ds;e.autoStart=!0,e._protected=!0}return Ds._shared}static get system(){if(!Ds._system){const e=Ds._system=new Ds;e.autoStart=!0,e._protected=!0}return Ds._system}};Kx.targetFPMS=.06;let Gn=Kx;Object.defineProperties(gt,{TARGET_FPMS:{get(){return Gn.targetFPMS},set(n){Jt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Gn.targetFPMS=n}}});class Yx{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,yu.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Gn.shared:new Gn,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}Yx.extension=ht.Application;Et.add(Yx);const Qx=[];Et.handleByList(ht.Renderer,Qx);function JS(n){for(const e of Qx)if(e.test(n))return new e(n);throw new Error("Unable to auto-detect a suitable renderer.")}var eE=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,tE=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const rE=eE,Zx=tE;class Jx{constructor(e){this.renderer=e}contextChange(e){let t;if(this.renderer.context.webGLVersion===1){const r=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,r)}else{const r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}t>=wn.HIGH?this.multisample=wn.HIGH:t>=wn.MEDIUM?this.multisample=wn.MEDIUM:t>=wn.LOW?this.multisample=wn.LOW:this.multisample=wn.NONE}destroy(){}}Jx.extension={type:ht.RendererSystem,name:"_multisample"};Et.add(Jx);class nE{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class ew{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:r}=this,s=e._glBuffers[r]||this.createGLBuffer(e);t.bindBuffer(e.type,s.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:r,CONTEXT_UID:s}=this;if(this.boundBufferBases[t]!==e){const a=e._glBuffers[s]||this.createGLBuffer(e);this.boundBufferBases[t]=e,r.bindBufferBase(r.UNIFORM_BUFFER,t,a.buffer)}}bindBufferRange(e,t,r){const{gl:s,CONTEXT_UID:a}=this;r=r||0;const c=e._glBuffers[a]||this.createGLBuffer(e);s.bindBufferRange(s.UNIFORM_BUFFER,t||0,c.buffer,r*256,256)}update(e){const{gl:t,CONTEXT_UID:r}=this,s=e._glBuffers[r]||this.createGLBuffer(e);if(e._updateID!==s.updateID)if(s.updateID=e._updateID,t.bindBuffer(e.type,s.buffer),s.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const a=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;s.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,a)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const r=e._glBuffers[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this),r&&(t||s.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let r=0;r<t.length;r++)this.dispose(this.managedBuffers[t[r]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:r}=this;return e._glBuffers[t]=new nE(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}ew.extension={type:ht.RendererSystem,name:"buffer"};Et.add(ew);class tw{constructor(e){this.renderer=e}render(e,t){const r=this.renderer;let s,a,c,d;if(t&&(s=t.renderTexture,a=t.clear,c=t.transform,d=t.skipUpdateTransform),this.renderingToScreen=!s,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=c,!r.context.isLost){if(s||(this.lastObjectRendered=e),!d){const m=e.enableTempParent();e.updateTransform(),e.disableTempParent(m)}r.renderTexture.bind(s),r.batch.currentRenderer.start(),(a??r.background.clearBeforeRender)&&r.renderTexture.clear(),e.render(r),r.batch.currentRenderer.flush(),s&&(t.blit&&r.framebuffer.blit(),s.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}tw.extension={type:ht.RendererSystem,name:"objectRenderer"};Et.add(tw);const bf=class Gg extends YS{constructor(e){super(),this.type=ix.WEBGL,e=Object.assign({},gt.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new qo({projectionMatrix:new Lr},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Gg.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(Jt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=Gg.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e?.forceCanvas?!1:Ab()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Jt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Jt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Jt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Jt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){Jt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return Jt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){Jt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return Jt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};bf.extension={type:ht.Renderer,priority:1},bf.__plugins={},bf.__systems={};let Ty=bf;Et.handleByMap(ht.RendererPlugin,Ty.__plugins);Et.handleByMap(ht.RendererSystem,Ty.__systems);Et.add(Ty);class rw extends od{constructor(e,t){const{width:r,height:s}=t||{};super(r,s),this.items=[],this.itemDirtyIds=[];for(let a=0;a<e;a++){const c=new Gt;this.items.push(c),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):e[r]instanceof od?this.addResourceAt(e[r],r):this.addResourceAt(wx(e[r],t),r))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(t=>t.resource).filter(t=>t).map(t=>t.load());return this._load=Promise.all(e).then(()=>{const{realWidth:t,realHeight:r}=this.items[0];return this.resize(t,r),this.update(),Promise.resolve(this)}),this._load}}class iE extends rw{constructor(e,t){const{width:r,height:s}=t||{};let a,c;Array.isArray(e)?(a=e,c=e.length):c=e,super(c,{width:r,height:s}),a&&this.initFromArray(a,t)}addBaseTextureAt(e,t){if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=Jc.TEXTURE_2D_ARRAY}upload(e,t,r){const{length:s,itemDirtyIds:a,items:c}=this,{gl:d}=e;r.dirtyId<0&&d.texImage3D(d.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,s,0,t.format,r.type,null);for(let m=0;m<s;m++){const v=c[m];a[m]<v.dirtyId&&(a[m]=v.dirtyId,v.valid&&d.texSubImage3D(d.TEXTURE_2D_ARRAY,0,0,0,m,v.resource.width,v.resource.height,1,t.format,r.type,v.resource.source))}return!0}}class sE extends Sl{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return t&&e instanceof t?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const nw=class ed extends rw{constructor(e,t){const{width:r,height:s,autoLoad:a,linkBaseTexture:c}=t||{};if(e&&e.length!==ed.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:r,height:s});for(let d=0;d<ed.SIDES;d++)this.items[d].target=Jc.TEXTURE_CUBE_MAP_POSITIVE_X+d;this.linkBaseTexture=c!==!1,e&&this.initFromArray(e,t),a!==!1&&this.load()}bind(e){super.bind(e),e.target=Jc.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Jc.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,r){const s=this.itemDirtyIds;for(let a=0;a<ed.SIDES;a++){const c=this.items[a];(s[a]<c.dirtyId||r.dirtyId<t.dirtyId)&&(c.valid&&c.resource?(c.resource.upload(e,c,r),s[a]=c.dirtyId):s[a]<-1&&(e.gl.texImage2D(c.target,0,r.internalFormat,t.realWidth,t.realHeight,0,t.format,r.type,null),s[a]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===ed.SIDES}};nw.SIDES=6;let oE=nw;class Yc extends Sl{constructor(e,t){t=t||{};let r,s,a;typeof e=="string"?(r=Yc.EMPTY,s=e,a=!0):(r=e,s=null,a=!1),super(r),this.url=s,this.crossOrigin=t.crossOrigin??!0,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??a,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,t)=>{if(this.url===null){e(this);return}try{const r=await gt.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const s=await r.blob();if(this.destroyed)return;const a=await createImageBitmap(s,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===vs.UNPACK?"premultiply":"none"});if(this.destroyed){a.close();return}this.source=a,this.update(),e(this)}catch(r){if(this.destroyed)return;t(r),this.onError.emit(r)}}),this._load)}upload(e,t,r){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),super.upload(e,t,r)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return Yc._EMPTY=Yc._EMPTY??gt.ADAPTER.createCanvas(0,0),Yc._EMPTY}}const zg=class Sf extends Sl{constructor(e,t){t=t||{},super(gt.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},Sf.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;Sl.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,r=e.height;if(!t||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let s=t*this.scale,a=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(s=this._overrideWidth||this._overrideHeight/r*t,a=this._overrideHeight||this._overrideWidth/t*r),s=Math.round(s),a=Math.round(a);const c=this.source;c.width=s,c.height=a,c._pixiId=`canvas_${fc()}`,c.getContext("2d").drawImage(e,0,0,t,r,0,0,s,a),this._resolve(),this._resolve=null}}static getSize(e){const t=Sf.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&Sf.SVG_XML.test(e)}};zg.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,zg.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let Hg=zg;class aE extends Sl{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const Vg=class Wg extends Sl{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const r=document.createElement("video");t.autoLoad!==!1&&r.setAttribute("preload","auto"),t.playsinline!==!1&&(r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline","")),t.muted===!0&&(r.setAttribute("muted",""),r.muted=!0),t.loop===!0&&r.setAttribute("loop",""),t.autoPlay!==!1&&r.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const s=e[0].src||e[0];Sl.crossOrigin(r,s,t.crossorigin);for(let a=0;a<e.length;++a){const c=document.createElement("source");let{src:d,mime:m}=e[a];if(d=d||e[a],d.startsWith("data:"))m=d.slice(5,d.indexOf(";"));else if(!d.startsWith("blob:")){const v=d.split("?").shift().toLowerCase(),w=v.slice(v.lastIndexOf(".")+1);m=m||Wg.MIME_TYPES[w]||`video/${w}`}c.src=d,m&&(c.type=m),r.appendChild(c)}e=r}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const t=Gn.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t,r)=>{this.valid?t(this):(this._resolve=t,this._reject=r,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Gn.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Gn.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Gn.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||Wg.TYPES.includes(t)}};Vg.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],Vg.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let iw=Vg;kg.push(Yc,Rx,sE,iw,aE,Hg,Yf,oE,iE);class Ff{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?zt.EMPTY:(e=e||new zt(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:r,b:s,c:a,d:c,tx:d,ty:m}=e,v=r*t.x+a*t.y+d,w=s*t.x+c*t.y+m;this.minX=Math.min(this.minX,v),this.maxX=Math.max(this.maxX,v),this.minY=Math.min(this.minY,w),this.maxY=Math.max(this.maxY,w)}addQuad(e){let t=this.minX,r=this.minY,s=this.maxX,a=this.maxY,c=e[0],d=e[1];t=c<t?c:t,r=d<r?d:r,s=c>s?c:s,a=d>a?d:a,c=e[2],d=e[3],t=c<t?c:t,r=d<r?d:r,s=c>s?c:s,a=d>a?d:a,c=e[4],d=e[5],t=c<t?c:t,r=d<r?d:r,s=c>s?c:s,a=d>a?d:a,c=e[6],d=e[7],t=c<t?c:t,r=d<r?d:r,s=c>s?c:s,a=d>a?d:a,this.minX=t,this.minY=r,this.maxX=s,this.maxY=a}addFrame(e,t,r,s,a){this.addFrameMatrix(e.worldTransform,t,r,s,a)}addFrameMatrix(e,t,r,s,a){const c=e.a,d=e.b,m=e.c,v=e.d,w=e.tx,f=e.ty;let y=this.minX,b=this.minY,T=this.maxX,R=this.maxY,k=c*t+m*r+w,L=d*t+v*r+f;y=k<y?k:y,b=L<b?L:b,T=k>T?k:T,R=L>R?L:R,k=c*s+m*r+w,L=d*s+v*r+f,y=k<y?k:y,b=L<b?L:b,T=k>T?k:T,R=L>R?L:R,k=c*t+m*a+w,L=d*t+v*a+f,y=k<y?k:y,b=L<b?L:b,T=k>T?k:T,R=L>R?L:R,k=c*s+m*a+w,L=d*s+v*a+f,y=k<y?k:y,b=L<b?L:b,T=k>T?k:T,R=L>R?L:R,this.minX=y,this.minY=b,this.maxX=T,this.maxY=R}addVertexData(e,t,r){let s=this.minX,a=this.minY,c=this.maxX,d=this.maxY;for(let m=t;m<r;m+=2){const v=e[m],w=e[m+1];s=v<s?v:s,a=w<a?w:a,c=v>c?v:c,d=w>d?w:d}this.minX=s,this.minY=a,this.maxX=c,this.maxY=d}addVertices(e,t,r,s){this.addVerticesMatrix(e.worldTransform,t,r,s)}addVerticesMatrix(e,t,r,s,a=0,c=a){const d=e.a,m=e.b,v=e.c,w=e.d,f=e.tx,y=e.ty;let b=this.minX,T=this.minY,R=this.maxX,k=this.maxY;for(let L=r;L<s;L+=2){const V=t[L],z=t[L+1],J=d*V+v*z+f,X=w*z+m*V+y;b=Math.min(b,J-a),R=Math.max(R,J+a),T=Math.min(T,X-c),k=Math.max(k,X+c)}this.minX=b,this.minY=T,this.maxX=R,this.maxY=k}addBounds(e){const t=this.minX,r=this.minY,s=this.maxX,a=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>s?e.maxX:s,this.maxY=e.maxY>a?e.maxY:a}addBoundsMask(e,t){const r=e.minX>t.minX?e.minX:t.minX,s=e.minY>t.minY?e.minY:t.minY,a=e.maxX<t.maxX?e.maxX:t.maxX,c=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=a&&s<=c){const d=this.minX,m=this.minY,v=this.maxX,w=this.maxY;this.minX=r<d?r:d,this.minY=s<m?s:m,this.maxX=a>v?a:v,this.maxY=c>w?c:w}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const r=e.minX>t.x?e.minX:t.x,s=e.minY>t.y?e.minY:t.y,a=e.maxX<t.x+t.width?e.maxX:t.x+t.width,c=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=a&&s<=c){const d=this.minX,m=this.minY,v=this.maxX,w=this.maxY;this.minX=r<d?r:d,this.minY=s<m?s:m,this.maxX=a>v?a:v,this.maxY=c>w?c:w}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,r,s,a,c){e-=a,t-=c,r+=a,s+=c,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>s?this.maxY:s}}class Gr extends dd{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new ep,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Ff,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let r=0;r<t.length;++r){const s=t[r];Object.defineProperty(Gr.prototype,s,Object.getOwnPropertyDescriptor(e,s))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new zt),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new zt),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Ff);const t=this.transform,r=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=r?.worldAlpha??1,this.transform=this._tempDisplayObjectParent.transform;const s=this._bounds,a=this._boundsID;this._bounds=this._localBounds;const c=this.getBounds(!1,e);return this.parent=r,this.transform=t,this._bounds=s,this._bounds.updateID+=this._boundsID-a,c}toGlobal(e,t,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,r,s){return t&&(e=t.toGlobal(e,r,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){this.parent?.removeChild(this)}setTransform(e=0,t=0,r=1,s=1,a=0,c=0,d=0,m=0,v=0){return this.position.x=e,this.position.y=t,this.scale.x=r||1,this.scale.y=s||1,this.rotation=a,this.skew.x=c,this.skew.y=d,this.pivot.x=m,this.pivot.y=v,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new lE),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*eS}set angle(e){this.transform.rotation=e*tS}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,t._maskRefCount===0&&(t.renderable=!0,t.isMask=!1))}if(this._mask=e,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount===0&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class lE extends Gr{constructor(){super(...arguments),this.sortDirty=null}}Gr.prototype.displayObjectUpdateTransform=Gr.prototype.updateTransform;const uE=new Lr;function cE(n,e){return n.zIndex===e.zIndex?n._lastSortedIndex-e._lastSortedIndex:n.zIndex-e.zIndex}const sw=class $g extends Gr{constructor(){super(),this.children=[],this.sortableChildren=$g.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const r=this.getChildIndex(e),s=this.getChildIndex(t);this.children[r]=t,this.children[s]=e,this.onChildrenChange(r<s?r:s)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(e);eh(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],r=this.children.indexOf(t);if(r===-1)return null;t.parent=null,t.transform._parentID=-1,eh(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),this.emit("childRemoved",t,this,r)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,eh(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const r=e,s=t,a=s-r;let c;if(a>0&&a<=s){c=this.children.splice(r,a);for(let d=0;d<c.length;++d)c[d].parent=null,c[d].transform&&(c[d].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let d=0;d<c.length;++d)c[d].emit("removed",this),this.emit("childRemoved",c[d],this,d);return c}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,r=this.children.length;t<r;++t){const s=this.children[t];s._lastSortedIndex=t,!e&&s.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(cE),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const r=this.children[e];r.visible&&r.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const r=t._mask.isMaskData?t._mask.maskObject:t._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(t._bounds,r._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const r=super.getLocalBounds(e);if(!t)for(let s=0,a=this.children.length;s<a;++s){const c=this.children[s];c.visible&&c.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let r,s;this.cullArea?(r=this.cullArea,s=this.worldTransform):this._render!==$g.prototype._render&&(r=this.getBounds(!0));const a=e.projection.transform;if(a&&(s?(s=uE.copyFrom(s),s.prepend(a)):s=a),r&&t.intersects(r,s))this._render(e);else if(this.cullArea)return;for(let c=0,d=this.children.length;c<d;++c){const m=this.children[c],v=m.cullable;m.cullable=v||!this.cullArea,m.render(e),m.cullable=v}}render(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,r=this.children.length;t<r;++t)this.children[t].render(e)}}renderAdvanced(e){const t=this.filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let a=0;a<t.length;a++)t[a].enabled&&this._enabledFilters.push(t[a])}const s=t&&this._enabledFilters?.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==In.NONE));if(s&&e.batch.flush(),t&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let a=0,c=this.children.length;a<c;++a)this.children[a].render(e)}s&&e.batch.flush(),r&&e.mask.pop(this),t&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e?.children,r=this.removeChildren(0,this.children.length);if(t)for(let s=0;s<r.length;++s)r[s].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};sw.defaultSortableChildren=!1;let Ni=sw;Ni.prototype.containerUpdateTransform=Ni.prototype.updateTransform;Object.defineProperties(gt,{SORTABLE_CHILDREN:{get(){return Ni.defaultSortableChildren},set(n){Jt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Ni.defaultSortableChildren=n}}});const qh=new er,hE=new Uint16Array([0,1,2,0,2,3]);class po extends Ni{constructor(e){super(),this._anchor=new La(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new kr(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Dt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||ut.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=hE,this.pluginName="batch",this.isSprite=!0,this._roundPixels=gt.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=du(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=du(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const t=this.transform.worldTransform,r=t.a,s=t.b,a=t.c,c=t.d,d=t.tx,m=t.ty,v=this.vertexData,w=e.trim,f=e.orig,y=this._anchor;let b=0,T=0,R=0,k=0;if(w?(T=w.x-y._x*f.width,b=T+w.width,k=w.y-y._y*f.height,R=k+w.height):(T=-y._x*f.width,b=T+f.width,k=-y._y*f.height,R=k+f.height),v[0]=r*T+a*k+d,v[1]=c*k+s*T+m,v[2]=r*b+a*k+d,v[3]=c*k+s*b+m,v[4]=r*b+a*R+d,v[5]=c*R+s*b+m,v[6]=r*T+a*R+d,v[7]=c*R+s*T+m,this._roundPixels){const L=gt.RESOLUTION;for(let V=0;V<v.length;++V)v[V]=Math.round(v[V]*L)/L}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,t=this.vertexTrimmedData,r=e.orig,s=this._anchor,a=this.transform.worldTransform,c=a.a,d=a.b,m=a.c,v=a.d,w=a.tx,f=a.ty,y=-s._x*r.width,b=y+r.width,T=-s._y*r.height,R=T+r.height;if(t[0]=c*y+m*T+w,t[1]=v*T+d*y+f,t[2]=c*b+m*T+w,t[3]=v*T+d*b+f,t[4]=c*b+m*R+w,t[5]=v*R+d*b+f,t[6]=c*y+m*R+w,t[7]=v*R+d*y+f,this._roundPixels){const k=gt.RESOLUTION;for(let L=0;L<t.length;++L)t[L]=Math.round(t[L]*k)/k}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new Ff),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new zt),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,qh);const t=this._texture.orig.width,r=this._texture.orig.height,s=-t*this.anchor.x;let a=0;return qh.x>=s&&qh.x<s+t&&(a=-r*this.anchor.y,qh.y>=a&&qh.y<a+r)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e?.texture){const t=typeof e=="boolean"?e:e?.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){const r=e instanceof ut?e:ut.from(e,t);return new po(r)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const t=du(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const t=du(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||ut.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const ow=new Lr;Gr.prototype._cacheAsBitmap=!1;Gr.prototype._cacheData=null;Gr.prototype._cacheAsBitmapResolution=null;Gr.prototype._cacheAsBitmapMultisample=null;class dE{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Gr.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(n){n!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(n){n!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(n){if(this._cacheAsBitmap===n)return;this._cacheAsBitmap=n;let e;n?(this._cacheData||(this._cacheData=new dE),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});Gr.prototype._renderCached=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(n),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(n))};Gr.prototype._initCachedDisplayObject=function(n){if(this._cacheData?.sprite)return;const e=this.alpha;this.alpha=1,n.batch.flush();const t=this.getLocalBounds(new zt,!0);if(this.filters?.length){const y=this.filters[0].padding;t.pad(y)}const r=this.cacheAsBitmapResolution||n.resolution;t.ceil(r),t.width=Math.max(t.width,1/r),t.height=Math.max(t.height,1/r);const s=n.renderTexture.current,a=n.renderTexture.sourceFrame.clone(),c=n.renderTexture.destinationFrame.clone(),d=n.projection.transform,m=mc.create({width:t.width,height:t.height,resolution:r,multisample:this.cacheAsBitmapMultisample??n.multisample}),v=`cacheAsBitmap_${fc()}`;this._cacheData.textureCacheId=v,Gt.addToCache(m.baseTexture,v),ut.addToCache(m,v);const w=this.transform.localTransform.copyTo(ow).invert().translate(-t.x,-t.y);this.render=this._cacheData.originalRender,n.render(this,{renderTexture:m,clear:!0,transform:w,skipUpdateTransform:!1}),n.framebuffer.blit(),n.projection.transform=d,n.renderTexture.bind(s,a,c),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const f=new po(m);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-(t.x/t.width),f.anchor.y=-(t.y/t.height),f.alpha=e,f._bounds=this._bounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=f.containsPoint.bind(f)};Gr.prototype._renderCachedCanvas=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(n),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(n))};Gr.prototype._initCachedDisplayObjectCanvas=function(n){if(this._cacheData?.sprite)return;const e=this.getLocalBounds(new zt,!0),t=this.alpha;this.alpha=1;const r=n.canvasContext.activeContext,s=n._projTransform,a=this.cacheAsBitmapResolution||n.resolution;e.ceil(a),e.width=Math.max(e.width,1/a),e.height=Math.max(e.height,1/a);const c=mc.create({width:e.width,height:e.height,resolution:a}),d=`cacheAsBitmap_${fc()}`;this._cacheData.textureCacheId=d,Gt.addToCache(c.baseTexture,d),ut.addToCache(c,d);const m=ow;this.transform.localTransform.copyTo(m),m.invert(),m.tx-=e.x,m.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,n.render(this,{renderTexture:c,clear:!0,transform:m,skipUpdateTransform:!1}),n.canvasContext.activeContext=r,n._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const v=new po(c);v.transform.worldTransform=this.transform.worldTransform,v.anchor.x=-(e.x/e.width),v.anchor.y=-(e.y/e.height),v.alpha=t,v._bounds=this._bounds,this._cacheData.sprite=v,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=n._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=v.containsPoint.bind(v)};Gr.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Gr.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Gr.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Gt.removeFromCache(this._cacheData.textureCacheId),ut.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Gr.prototype._cacheAsBitmapDestroy=function(n){this.cacheAsBitmap=!1,this.destroy(n)};Gr.prototype.name=null;Ni.prototype.getChildByName=function(n,e){for(let t=0,r=this.children.length;t<r;t++)if(this.children[t].name===n)return this.children[t];if(e)for(let t=0,r=this.children.length;t<r;t++){const s=this.children[t];if(!s.getChildByName)continue;const a=s.getChildByName(n,!0);if(a)return a}return null};Gr.prototype.getGlobalPosition=function(n=new er,e=!1){return this.parent?this.parent.toGlobal(this.position,n,e):(n.x=this.position.x,n.y=this.position.y),n};var fE=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class pE extends Li{constructor(e=1){super(rE,fE,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const mE={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},gE=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function yE(n){const e=mE[n],t=e.length;let r=gE,s="";const a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let c;for(let d=0;d<n;d++){let m=a.replace("%index%",d.toString());c=d,d>=t&&(c=n-d-1),m=m.replace("%value%",e[c].toString()),s+=m,s+=`
`}return r=r.replace("%blur%",s),r=r.replace("%size%",n.toString()),r}const vE=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function _E(n,e){const t=Math.ceil(n/2);let r=vE,s="",a;e?a="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":a="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let c=0;c<n;c++){let d=a.replace("%index%",c.toString());d=d.replace("%sampleIndex%",`${c-(t-1)}.0`),s+=d,s+=`
`}return r=r.replace("%blur%",s),r=r.replace("%size%",n.toString()),r}class qg extends Li{constructor(e,t=8,r=4,s=Li.defaultResolution,a=5){const c=_E(a,e),d=yE(a);super(c,d),this.horizontal=e,this.resolution=s,this._quality=0,this.quality=r,this.blur=t}apply(e,t,r,s){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/t.width):this.uniforms.strength=1/r.height*(r.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,t,r,s);else{const a=e.getFilterTexture(),c=e.renderer;let d=t,m=a;this.state.blend=!1,e.applyFilter(this,d,m,Oa.CLEAR);for(let v=1;v<this.passes-1;v++){e.bindAndClear(d,Oa.BLIT),this.uniforms.uSampler=m;const w=m;m=d,d=w,c.shader.bind(this),c.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,m,r,s),e.returnFilterTexture(a)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class xE extends Li{constructor(e=8,t=4,r=Li.defaultResolution,s=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new qg(!0,e,t,r,s),this.blurYFilter=new qg(!1,e,t,r,s),this.resolution=r,this.quality=t,this.blur=e,this.repeatEdgePixels=!1}apply(e,t,r,s){const a=Math.abs(this.blurXFilter.strength),c=Math.abs(this.blurYFilter.strength);if(a&&c){const d=e.getFilterTexture();this.blurXFilter.apply(e,t,d,Oa.CLEAR),this.blurYFilter.apply(e,d,r,s),e.returnFilterTexture(d)}else c?this.blurYFilter.apply(e,t,r,s):this.blurXFilter.apply(e,t,r,s)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var wE=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class Xg extends Li{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(Zx,wE,e),this.alpha=1}_loadMatrix(e,t=!1){let r=e;t&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(e,t,r){return e[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15],e[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16],e[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17],e[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18],e[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19]+t[4],e[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15],e[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16],e[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17],e[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18],e[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19]+t[9],e[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15],e[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16],e[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17],e[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18],e[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19]+t[14],e[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15],e[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16],e[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17],e[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18],e[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}tint(e,t){const[r,s,a]=kr.shared.setValue(e).toArray(),c=[r,0,0,0,0,0,s,0,0,0,0,0,a,0,0,0,0,0,1,0];this._loadMatrix(c,t)}greyscale(e,t){const r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}blackAndWhite(e){const t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)}hue(e,t){e=(e||0)/180*Math.PI;const r=Math.cos(e),s=Math.sin(e),a=Math.sqrt,c=1/3,d=a(c),m=r+(1-r)*c,v=c*(1-r)-d*s,w=c*(1-r)+d*s,f=c*(1-r)+d*s,y=r+c*(1-r),b=c*(1-r)-d*s,T=c*(1-r)-d*s,R=c*(1-r)+d*s,k=r+c*(1-r),L=[m,v,w,0,0,f,y,b,0,0,T,R,k,0,0,0,0,0,1,0];this._loadMatrix(L,t)}contrast(e,t){const r=(e||0)+1,s=-.5*(r-1),a=[r,0,0,0,s,0,r,0,0,s,0,0,r,0,s,0,0,0,1,0];this._loadMatrix(a,t)}saturate(e=0,t){const r=e*2/3+1,s=(r-1)*-.5,a=[r,s,s,0,0,s,r,s,0,0,s,s,r,0,0,0,0,0,1,0];this._loadMatrix(a,t)}desaturate(){this.saturate(-1)}negative(e){const t=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(t,e)}sepia(e){const t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)}technicolor(e){const t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)}polaroid(e){const t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)}toBGR(e){const t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)}kodachrome(e){const t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)}browni(e){const t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)}vintage(e){const t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)}colorTone(e,t,r,s,a){e=e||.2,t=t||.15,r=r||16770432,s=s||3375104;const c=kr.shared,[d,m,v]=c.setValue(r).toArray(),[w,f,y]=c.setValue(s).toArray(),b=[.3,.59,.11,0,0,d,m,v,e,0,w,f,y,t,0,d-w,m-f,v-y,0,0];this._loadMatrix(b,a)}night(e,t){e=e||.1;const r=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(r,t)}predator(e,t){const r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,t)}lsd(e){const t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}Xg.prototype.grayscale=Xg.prototype.greyscale;var bE=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,SE=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class EE extends Li{constructor(e,t){const r=new Lr;e.renderable=!1,super(SE,bE,{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=r,t==null&&(t=20),this.scale=new er(t,t)}apply(e,t,r,s){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const a=this.maskSprite.worldTransform,c=Math.sqrt(a.a*a.a+a.b*a.b),d=Math.sqrt(a.c*a.c+a.d*a.d);c!==0&&d!==0&&(this.uniforms.rotation[0]=a.a/c,this.uniforms.rotation[1]=a.b/c,this.uniforms.rotation[2]=a.c/d,this.uniforms.rotation[3]=a.d/d),e.applyFilter(this,t,r,s)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var TE=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,AE=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class CE extends Li{constructor(){super(AE,TE)}}var IE=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class PE extends Li{constructor(e=.5,t=Math.random()){super(Zx,IE,{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const r_={AlphaFilter:pE,BlurFilter:xE,BlurFilterPass:qg,ColorMatrixFilter:Xg,DisplacementFilter:EE,FXAAFilter:CE,NoiseFilter:PE};Object.entries(r_).forEach(([n,e])=>{Object.defineProperty(r_,n,{get(){return Jt("7.1.0",`filters.${n} has moved to ${n}`),e}})});class RE{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(Gn.system.add(this.tickerUpdate,this,yu.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Gn.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const cu=new RE;class fd{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=fd.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new er,this.page=new er,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,r,s,a){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Bf extends fd{constructor(){super(...arguments),this.client=new er,this.movement=new er,this.offset=new er,this.global=new er,this.screen=new er}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,r,s,a,c,d,m,v,w,f,y,b,T,R){throw new Error("Method not implemented.")}}class Go extends Bf{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class rh extends Bf{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}rh.DOM_DELTA_PIXEL=0,rh.DOM_DELTA_LINE=1,rh.DOM_DELTA_PAGE=2;const kE=2048,ME=new er,rg=new er;class OE{constructor(e){this.dispatch=new dd,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((r,s)=>r.priority-s.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let r=0,s=t.length;r<s;r++)t[r].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){cu.pauseUpdate=!0;const r=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[r](this.rootTarget,this.rootTarget.eventMode,ME.set(e,t),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(e,t){if(!e.target)return;const r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let s=0,a=r.length-1;s<a;s++)if(e.currentTarget=r[s],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let s=r.length-2;s>=0;s--)if(e.currentTarget=r[s],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,r=this._allInteractiveElements){if(r.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const s=Array.isArray(t)?t:[t];for(let a=r.length-1;a>=0;a--)s.forEach(c=>{e.currentTarget=r[a],this.notifyTarget(e,c)})}propagationPath(e){const t=[e];for(let r=0;r<kE&&e!==this.rootTarget;r++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,r,s,a,c=!1){let d=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(cu.pauseUpdate=!1),e.interactiveChildren&&e.children){const w=e.children;for(let f=w.length-1;f>=0;f--){const y=w[f],b=this.hitTestMoveRecursive(y,this._isInteractive(t)?t:y.eventMode,r,s,a,c||a(e,r));if(b){if(b.length>0&&!b[b.length-1].parent)continue;const T=e.isInteractive();(b.length>0||T)&&(T&&this._allInteractiveElements.push(e),b.push(e)),this._hitElements.length===0&&(this._hitElements=b),d=!0}}}const m=this._isInteractive(t),v=e.isInteractive();return m&&v&&this._allInteractiveElements.push(e),c||this._hitElements.length>0?null:d?this._hitElements:m&&!a(e,r)&&s(e,r)?v?[e]:[]:null}hitTestRecursive(e,t,r,s,a){if(this._interactivePrune(e)||a(e,r))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(cu.pauseUpdate=!1),e.interactiveChildren&&e.children){const m=e.children;for(let v=m.length-1;v>=0;v--){const w=m[v],f=this.hitTestRecursive(w,this._isInteractive(t)?t:w.eventMode,r,s,a);if(f){if(f.length>0&&!f[f.length-1].parent)continue;const y=e.isInteractive();return(f.length>0||y)&&f.push(e),f}}}const c=this._isInteractive(t),d=e.isInteractive();return c&&s(e,r)?d?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,rg),!e.hitArea.contains(rg.x,rg.y)))return!0;if(e._mask){const r=e._mask.isMaskData?e._mask.maskObject:e._mask;if(r&&!r.containsPoint?.(t))return!0}return!1}hitTestFn(e,t){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(t):!1}notifyTarget(e,t){t=t??e.type;const r=`on${t}`;e.currentTarget[r]?.(e);const s=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,s),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof Go)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){const s=t.button===2;this.dispatchEvent(t,s?"rightdown":"mousedown")}const r=this.trackingData(e.pointerId);r.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){if(!(e instanceof Go)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const r=t.pointerType==="mouse"||t.pointerType==="pen",s=this.trackingData(e.pointerId),a=this.findMountedTarget(s.overTargets);if(s.overTargets?.length>0&&a!==t.target){const m=e.type==="mousemove"?"mouseout":"pointerout",v=this.createPointerEvent(e,m,a);if(this.dispatchEvent(v,"pointerout"),r&&this.dispatchEvent(v,"mouseout"),!t.composedPath().includes(a)){const w=this.createPointerEvent(e,"pointerleave",a);for(w.eventPhase=w.AT_TARGET;w.target&&!t.composedPath().includes(w.target);)w.currentTarget=w.target,this.notifyTarget(w),r&&this.notifyTarget(w,"mouseleave"),w.target=w.target.parent;this.freeEvent(w)}this.freeEvent(v)}if(a!==t.target){const m=e.type==="mousemove"?"mouseover":"pointerover",v=this.clonePointerEvent(t,m);this.dispatchEvent(v,"pointerover"),r&&this.dispatchEvent(v,"mouseover");let w=a?.parent;for(;w&&w!==this.rootTarget.parent&&w!==t.target;)w=w.parent;if(!w||w===this.rootTarget.parent){const f=this.clonePointerEvent(t,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==a&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),r&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(v)}const c=[],d=this.enableGlobalMoveEvents??!0;this.moveOnAll?c.push("pointermove"):this.dispatchEvent(t,"pointermove"),d&&c.push("globalpointermove"),t.pointerType==="touch"&&(this.moveOnAll?c.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),d&&c.push("globaltouchmove")),r&&(this.moveOnAll?c.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),d&&c.push("globalmousemove"),this.cursor=t.target?.cursor),c.length>0&&this.all(t,c),this._allInteractiveElements.length=0,this._hitElements.length=0,s.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){if(!(e instanceof Go)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),r=this.createPointerEvent(e),s=r.pointerType==="mouse"||r.pointerType==="pen";this.dispatchEvent(r,"pointerover"),s&&this.dispatchEvent(r,"mouseover"),r.pointerType==="mouse"&&(this.cursor=r.target?.cursor);const a=this.clonePointerEvent(r,"pointerenter");for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),s&&this.notifyTarget(a,"mouseenter"),a.target=a.target.parent;t.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(a)}mapPointerOut(e){if(!(e instanceof Go)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId);if(t.overTargets){const r=e.pointerType==="mouse"||e.pointerType==="pen",s=this.findMountedTarget(t.overTargets),a=this.createPointerEvent(e,"pointerout",s);this.dispatchEvent(a),r&&this.dispatchEvent(a,"mouseout");const c=this.createPointerEvent(e,"pointerleave",s);for(c.eventPhase=c.AT_TARGET;c.target&&c.target!==this.rootTarget.parent;)c.currentTarget=c.target,this.notifyTarget(c),r&&this.notifyTarget(c,"mouseleave"),c.target=c.target.parent;t.overTargets=null,this.freeEvent(a),this.freeEvent(c)}this.cursor=null}mapPointerUp(e){if(!(e instanceof Go)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=performance.now(),r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerup"),r.pointerType==="touch")this.dispatchEvent(r,"touchend");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const d=r.button===2;this.dispatchEvent(r,d?"rightup":"mouseup")}const s=this.trackingData(e.pointerId),a=this.findMountedTarget(s.pressTargetsByButton[e.button]);let c=a;if(a&&!r.composedPath().includes(a)){let d=a;for(;d&&!r.composedPath().includes(d);){if(r.currentTarget=d,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch")this.notifyTarget(r,"touchendoutside");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const m=r.button===2;this.notifyTarget(r,m?"rightupoutside":"mouseupoutside")}d=d.parent}delete s.pressTargetsByButton[e.button],c=d}if(c){const d=this.clonePointerEvent(r,"click");d.target=c,d.path=null,s.clicksByButton[e.button]||(s.clicksByButton[e.button]={clickCount:0,target:d.target,timeStamp:t});const m=s.clicksByButton[e.button];if(m.target===d.target&&t-m.timeStamp<200?++m.clickCount:m.clickCount=1,m.target=d.target,m.timeStamp=t,d.detail=m.clickCount,d.pointerType==="mouse"){const v=d.button===2;this.dispatchEvent(d,v?"rightclick":"click")}else d.pointerType==="touch"&&this.dispatchEvent(d,"tap");this.dispatchEvent(d,"pointertap"),this.freeEvent(d)}this.freeEvent(r)}mapPointerUpOutside(e){if(!(e instanceof Go)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),r=this.findMountedTarget(t.pressTargetsByButton[e.button]),s=this.createPointerEvent(e);if(r){let a=r;for(;a;)s.currentTarget=a,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"?this.notifyTarget(s,"touchendoutside"):(s.pointerType==="mouse"||s.pointerType==="pen")&&this.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),a=a.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(s)}mapWheel(e){if(!(e instanceof rh)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let r=1;r<e.length&&e[r].parent===t;r++)t=e[r];return t}createPointerEvent(e,t,r){const s=this.allocateEvent(Go);return this.copyPointerData(e,s),this.copyMouseData(e,s),this.copyData(e,s),s.nativeEvent=e.nativeEvent,s.originalEvent=e,s.target=r??this.hitTest(s.global.x,s.global.y)??this._hitElements[0],typeof t=="string"&&(s.type=t),s}createWheelEvent(e){const t=this.allocateEvent(rh);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const r=this.allocateEvent(Go);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=t??r.type,r}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof Go&&t instanceof Go&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof Bf&&t instanceof Bf&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){const r=e.currentTarget._events[t];if(r&&e.currentTarget.isInteractive())if("fn"in r)r.once&&e.currentTarget.removeListener(t,r.fn,void 0,!0),r.fn.call(r.context,e);else for(let s=0,a=r.length;s<a&&!e.propagationImmediatelyStopped;s++)r[s].once&&e.currentTarget.removeListener(t,r[s].fn,void 0,!0),r[s].fn.call(r[s].context,e)}}const DE=1,LE={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Kg=class Yg{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new OE(null),cu.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Go(null),this.rootWheelEvent=new rh(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Yg.defaultEventFeatures},{set:(t,r,s)=>(r==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=s),t[r]=s,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:r}=this.renderer;this.setTargetElement(t),this.resolution=r,Yg._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const r=this.cursorStyles[e];if(r)switch(typeof r){case"string":t&&(this.domElement.style.cursor=r);break;case"function":r(e);break;case"object":t&&Object.assign(this.domElement.style,r);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let r=0,s=t.length;r<s;r++){const a=t[r],c=this.bootstrapEvent(this.rootPointerEvent,a);this.rootBoundary.mapEvent(c)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,cu.pointerMoved();const t=this.normalizeToPointerData(e);for(let r=0,s=t.length;r<s;r++){const a=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const r=t!==this.domElement?"outside":"",s=this.normalizeToPointerData(e);for(let a=0,c=s.length;a<c;a++){const d=this.bootstrapEvent(this.rootPointerEvent,s[a]);d.type+=r,this.rootBoundary.mapEvent(d)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);for(let r=0,s=t.length;r<s;r++){const a=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,cu.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;cu.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;cu.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,r){const s=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},a=1/this.resolution;e.x=(t-s.left)*(this.domElement.width/s.width)*a,e.y=(r-s.top)*(this.domElement.height/s.height)*a}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let r=0,s=e.changedTouches.length;r<s;r++){const a=e.changedTouches[r];typeof a.button>"u"&&(a.button=0),typeof a.buttons>"u"&&(a.buttons=1),typeof a.isPrimary>"u"&&(a.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof a.width>"u"&&(a.width=a.radiusX||1),typeof a.height>"u"&&(a.height=a.radiusY||1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="touch"),typeof a.pointerId>"u"&&(a.pointerId=a.identifier||0),typeof a.pressure>"u"&&(a.pressure=a.force||.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),typeof a.layerX>"u"&&(a.layerX=a.offsetX=a.clientX),typeof a.layerY>"u"&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,a.type=e.type,t.push(a)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const r=e;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=DE),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,t.push(r)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=LE[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};Kg.extension={name:"events",type:[ht.RendererSystem,ht.CanvasRendererSystem]},Kg.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let Qg=Kg;Et.add(Qg);function n_(n){return n==="dynamic"||n==="static"}const NE={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??n_(Qg.defaultEventMode)},set interactive(n){Jt("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=n,this.eventMode=n?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Qg.defaultEventMode},set eventMode(n){this._internalInteractive=n_(n),this._internalEventMode=n},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(n,e,t){const r=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,s=typeof t=="object"?t.signal:void 0,a=typeof t=="object"?t.once===!0:!1,c=typeof e=="function"?void 0:e;n=r?`${n}capture`:n;const d=typeof e=="function"?e:e.handleEvent,m=this;s&&s.addEventListener("abort",()=>{m.off(n,d,c)}),a?m.once(n,d,c):m.on(n,d,c)},removeEventListener(n,e,t){const r=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,s=typeof e=="function"?void 0:e;n=r?`${n}capture`:n,e=typeof e=="function"?e:e.handleEvent,this.off(n,e,s)},dispatchEvent(n){if(!(n instanceof fd))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return n.defaultPrevented=!1,n.path=null,n.target=this,n.manager.dispatchEvent(n),!n.defaultPrevented}};Gr.mixin(NE);const FE={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Gr.mixin(FE);const BE=9,nf=100,UE=0,jE=0,i_=2,s_=1,GE=-1e3,zE=-1e3,HE=2;class aw{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(vl.tablet||vl.phone)&&this.createTouchHook();const t=document.createElement("div");t.style.width=`${nf}px`,t.style.height=`${nf}px`,t.style.position="absolute",t.style.top=`${UE}px`,t.style.left=`${jE}px`,t.style.zIndex=i_.toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${s_}px`,e.style.height=`${s_}px`,e.style.position="absolute",e.style.top=`${GE}px`,e.style.left=`${zE}px`,e.style.zIndex=HE.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const t=e.children;if(t)for(let r=0;r<t.length;r++)this.updateAccessibleObjects(t[r])}update(){const e=performance.now();if(vl.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:t,y:r,width:s,height:a}=this.renderer.view.getBoundingClientRect(),{width:c,height:d,resolution:m}=this.renderer,v=s/c*m,w=a/d*m;let f=this.div;f.style.left=`${t}px`,f.style.top=`${r}px`,f.style.width=`${c}px`,f.style.height=`${d}px`;for(let y=0;y<this.children.length;y++){const b=this.children[y];if(b.renderId!==this.renderId)b._accessibleActive=!1,eh(this.children,y,1),this.div.removeChild(b._accessibleDiv),this.pool.push(b._accessibleDiv),b._accessibleDiv=null,y--;else{f=b._accessibleDiv;let T=b.hitArea;const R=b.worldTransform;b.hitArea?(f.style.left=`${(R.tx+T.x*R.a)*v}px`,f.style.top=`${(R.ty+T.y*R.d)*w}px`,f.style.width=`${T.width*R.a*v}px`,f.style.height=`${T.height*R.d*w}px`):(T=b.getBounds(),this.capHitArea(T),f.style.left=`${T.x*v}px`,f.style.top=`${T.y*w}px`,f.style.width=`${T.width*v}px`,f.style.height=`${T.height*w}px`,f.title!==b.accessibleTitle&&b.accessibleTitle!==null&&(f.title=b.accessibleTitle),f.getAttribute("aria-label")!==b.accessibleHint&&b.accessibleHint!==null&&f.setAttribute("aria-label",b.accessibleHint)),(b.accessibleTitle!==f.title||b.tabIndex!==f.tabIndex)&&(f.title=b.accessibleTitle,f.tabIndex=b.tabIndex,this.debug&&this.updateDebugHTML(f))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:r}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>r&&(e.height=r-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=`${nf}px`,t.style.height=`${nf}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=i_.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){const{displayObject:r}=e.target,s=this.renderer.events.rootBoundary,a=Object.assign(new fd(s),{target:r});s.rootTarget=this.renderer.lastObjectRendered,t.forEach(c=>s.dispatchEvent(a,c))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===BE&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}aw.extension={name:"accessibility",type:[ht.RendererPlugin,ht.CanvasRendererPlugin]};Et.add(aw);const lw=class Zg{constructor(e){this.stage=new Ni,e=Object.assign({forceCanvas:!1},e),this.renderer=JS(e),Zg._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer?.view}get screen(){return this.renderer?.screen}destroy(e,t){const r=Zg._plugins.slice(0);r.reverse(),r.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};lw._plugins=[];let rp=lw;Et.handleByList(ht.Application,rp._plugins);class uw{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let t,r;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,r=globalThis.innerHeight;else{const{clientWidth:s,clientHeight:a}=this._resizeTo;t=s,r=a}this.renderer.resize(t,r),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}uw.extension=ht.Application;Et.add(uw);const o_={loader:ht.LoadParser,resolver:ht.ResolveParser,cache:ht.CacheParser,detection:ht.DetectionParser};Et.handle(ht.Asset,n=>{const e=n.ref;Object.entries(o_).filter(([t])=>!!e[t]).forEach(([t,r])=>Et.add(Object.assign(e[t],{extension:e[t].extension??r})))},n=>{const e=n.ref;Object.keys(o_).filter(t=>!!e[t]).forEach(t=>Et.remove(e[t]))});class VE{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<t;r++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function dh(n,e){if(Array.isArray(e)){for(const t of e)if(n.startsWith(`data:${t}`))return!0;return!1}return n.startsWith(`data:${e}`)}function _u(n,e){const t=n.split("?")[0],r=zn.extname(t).toLowerCase();return Array.isArray(e)?e.includes(r):r===e}const zo=(n,e,t=!1)=>(Array.isArray(n)||(n=[n]),e?n.map(r=>typeof r=="string"||t?e(r):r):n),Jg=(n,e)=>{const t=e.split("?")[1];return t&&(n+=`?${t}`),n};function cw(n,e,t,r,s){const a=e[t];for(let c=0;c<a.length;c++){const d=a[c];t<e.length-1?cw(n.replace(r[t],d),e,t+1,r,s):s.push(n.replace(r[t],d))}}function WE(n){const e=/\{(.*?)\}/g,t=n.match(e),r=[];if(t){const s=[];t.forEach(a=>{const c=a.substring(1,a.length-1).split(",");s.push(c)}),cw(n,s,0,t,r)}else r.push(n);return r}const Uf=n=>!Array.isArray(n);class $E{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const r=zo(e);let s;for(let d=0;d<this.parsers.length;d++){const m=this.parsers[d];if(m.test(t)){s=m.getCacheableAssets(r,t);break}}s||(s={},r.forEach(d=>{s[d]=t}));const a=Object.keys(s),c={cacheKeys:a,keys:r};if(r.forEach(d=>{this._cacheMap.set(d,c)}),a.forEach(d=>{const m=s?s[d]:t;this._cache.has(d)&&this._cache.get(d)!==m&&console.warn("[Cache] already has key:",d),this._cache.set(d,s[d])}),t instanceof ut){const d=t;r.forEach(m=>{d.baseTexture!==ut.EMPTY.baseTexture&&Gt.addToCache(d.baseTexture,m),ut.addToCache(d,m)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(r=>{this._cache.delete(r)}),t.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const uc=new $E;class qE{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,r)=>(this._parsersValidated=!1,e[t]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const r={promise:null,parser:null};return r.promise=(async()=>{let s=null,a=null;if(t.loadParser&&(a=this._parserHash[t.loadParser],a||console.warn(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!a){for(let c=0;c<this.parsers.length;c++){const d=this.parsers[c];if(d.load&&d.test?.(e,t,this)){a=d;break}}if(!a)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=await a.load(e,t,this),r.parser=a;for(let c=0;c<this.parsers.length;c++){const d=this.parsers[c];d.parse&&d.parse&&await d.testParse?.(s,t,this)&&(s=await d.parse(s,t,this)||s,r.parser=d)}return s})(),r}async load(e,t){this._parsersValidated||this._validateParsers();let r=0;const s={},a=Uf(e),c=zo(e,v=>({alias:[v],src:v})),d=c.length,m=c.map(async v=>{const w=zn.toAbsolute(v.src);if(!s[v.src])try{this.promiseCache[w]||(this.promiseCache[w]=this._getLoadPromiseAndParser(w,v)),s[v.src]=await this.promiseCache[w].promise,t&&t(++r/d)}catch(f){throw delete this.promiseCache[w],delete s[v.src],new Error(`[Loader.load] Failed to load ${w}.
${f}`)}});return await Promise.all(m),a?s[c[0].src]:s}async unload(e){const t=zo(e,r=>({alias:[r],src:r})).map(async r=>{const s=zn.toAbsolute(r.src),a=this.promiseCache[s];if(a){const c=await a.promise;delete this.promiseCache[s],a.parser?.unload?.(c,r,this)}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(e[t.name]&&console.warn(`[Assets] loadParser name conflict "${t.name}"`),{...e,[t.name]:t}),{})}}var Ko=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(Ko||{});const XE=".json",KE="application/json",YE={extension:{type:ht.LoadParser,priority:Ko.Low},name:"loadJson",test(n){return dh(n,KE)||_u(n,XE)},async load(n){return await(await gt.ADAPTER.fetch(n)).json()}};Et.add(YE);const QE=".txt",ZE="text/plain",JE={name:"loadTxt",extension:{type:ht.LoadParser,priority:Ko.Low},test(n){return dh(n,ZE)||_u(n,QE)},async load(n){return await(await gt.ADAPTER.fetch(n)).text()}};Et.add(JE);const eT=["normal","bold","100","200","300","400","500","600","700","800","900"],tT=[".ttf",".otf",".woff",".woff2"],rT=["font/ttf","font/otf","font/woff","font/woff2"],nT=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function iT(n){const e=zn.extname(n),t=zn.basename(n,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1));let r=t.length>0;for(const a of t)if(!a.match(nT)){r=!1;break}let s=t.join(" ");return r||(s=`"${s.replace(/[\\"]/g,"\\$&")}"`),s}const sT=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function oT(n){return sT.test(n)?n:encodeURI(n)}const aT={extension:{type:ht.LoadParser,priority:Ko.Low},name:"loadWebFont",test(n){return dh(n,rT)||_u(n,tT)},async load(n,e){const t=gt.ADAPTER.getFontFaceSet();if(t){const r=[],s=e.data?.family??iT(n),a=e.data?.weights?.filter(d=>eT.includes(d))??["normal"],c=e.data??{};for(let d=0;d<a.length;d++){const m=a[d],v=new FontFace(s,`url(${oT(n)})`,{...c,weight:m});await v.load(),t.add(v),r.push(v)}return r.length===1?r[0]:r}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(n){(Array.isArray(n)?n:[n]).forEach(e=>gt.ADAPTER.getFontFaceSet().delete(e))}};Et.add(aT);const lT=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let nh=null,ey=class{constructor(){nh||(nh=URL.createObjectURL(new Blob([lT],{type:"application/javascript"}))),this.worker=new Worker(nh)}};ey.revokeObjectURL=function(){nh&&(URL.revokeObjectURL(nh),nh=null)};const uT=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let ih=null;class hw{constructor(){ih||(ih=URL.createObjectURL(new Blob([uT],{type:"application/javascript"}))),this.worker=new Worker(ih)}}hw.revokeObjectURL=function(){ih&&(URL.revokeObjectURL(ih),ih=null)};let a_=0,ng;class cT{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new ey;t.addEventListener("message",r=>{t.terminate(),ey.revokeObjectURL(),e(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){ng===void 0&&(ng=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<ng&&(this._createdWorkers++,e=new hw().worker,e.addEventListener("message",t=>{this.complete(t.data),this.returnWorker(t.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const r=new Promise((s,a)=>{this.queue.push({id:e,arguments:t,resolve:s,reject:a})});return this.next(),r}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const t=this.queue.pop(),r=t.id;this.resolveHash[a_]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:a_++,id:r})}}const l_=new cT;function pd(n,e,t){n.resource.internal=!0;const r=new ut(n),s=()=>{delete e.promiseCache[t],uc.has(t)&&uc.remove(t)};return r.baseTexture.once("destroyed",()=>{t in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),s())}),r.once("destroyed",()=>{n.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),s())}),r}const hT=[".jpeg",".jpg",".png",".webp",".avif"],dT=["image/jpeg","image/png","image/webp","image/avif"];async function fT(n){const e=await gt.ADAPTER.fetch(n);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${e.status} ${e.statusText}`);const t=await e.blob();return await createImageBitmap(t)}const np={name:"loadTextures",extension:{type:ht.LoadParser,priority:Ko.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(n){return dh(n,dT)||_u(n,hT)},async load(n,e,t){const r=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let s;r?this.config.preferWorkers&&await l_.isImageBitmapSupported()?s=await l_.loadImageBitmap(n):s=await fT(n):s=await new Promise((d,m)=>{const v=new Image;v.crossOrigin=this.config.crossOrigin,v.src=n,v.complete?d(v):(v.onload=()=>d(v),v.onerror=w=>m(w))});const a={...e.data};a.resolution??(a.resolution=bl(n)),r&&a.resourceOptions?.ownsImageBitmap===void 0&&(a.resourceOptions={...a.resourceOptions},a.resourceOptions.ownsImageBitmap=!0);const c=new Gt(s,a);return c.resource.src=n,pd(c,t,n)},unload(n){n.destroy(!0)}};Et.add(np);const pT=".svg",mT="image/svg+xml",gT={extension:{type:ht.LoadParser,priority:Ko.High},name:"loadSVG",test(n){return dh(n,mT)||_u(n,pT)},async testParse(n){return Hg.test(n)},async parse(n,e,t){const r=new Hg(n,e?.data?.resourceOptions);await r.load();const s=new Gt(r,{resolution:bl(n),...e?.data});return s.resource.src=e.src,pd(s,t,e.src)},async load(n,e){return(await gt.ADAPTER.fetch(n)).text()},unload:np.unload};Et.add(gT);const yT=[".mp4",".m4v",".webm",".ogv"],vT=["video/mp4","video/webm","video/ogg"],_T={name:"loadVideo",extension:{type:ht.LoadParser,priority:Ko.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(n){return dh(n,vT)||_u(n,yT)},async load(n,e,t){let r;const s=await(await gt.ADAPTER.fetch(n)).blob(),a=URL.createObjectURL(s);try{const c={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...e?.data?.resourceOptions,autoLoad:!0},d=new iw(a,c);await d.load();const m=new Gt(d,{alphaMode:await Tb(),resolution:bl(n),...e?.data});m.resource.src=n,r=pd(m,t,n),r.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(a)})}catch(c){throw URL.revokeObjectURL(a),c}return r},unload(n){n.destroy(!0)}};Et.add(_T);class xT{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(t[r])}`).join("&")}}getAlias(e){const{alias:t,name:r,src:s,srcs:a}=e;return zo(t||r||s||a,c=>typeof c=="string"?c:Array.isArray(c)?c.map(d=>d?.src??d?.srcs??d):c?.src||c?.srcs?c.src??c.srcs:c,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const r=[];Array.isArray(t)?t.forEach(s=>{const a=s.src??s.srcs,c=s.alias??s.name;let d;if(typeof c=="string"){const m=this._createBundleAssetId(e,c);r.push(m),d=[c,m]}else{const m=c.map(v=>this._createBundleAssetId(e,v));r.push(...m),d=[...c,...m]}this.add({...s,alias:d,src:a})}):Object.keys(t).forEach(s=>{const a=[s,this._createBundleAssetId(e,s)];if(typeof t[s]=="string")this.add({alias:a,src:t[s]});else if(Array.isArray(t[s]))this.add({alias:a,src:t[s]});else{const c=t[s],d=c.src??c.srcs;this.add({...c,alias:a,src:Array.isArray(d)?d:[d]})}r.push(...a)}),this._bundles[e]=r}add(e,t,r,s,a){const c=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(Jt("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),c.push({alias:e,src:t,data:r,format:s,loadParser:a})):Array.isArray(e)?c.push(...e):c.push(e);let d;d=m=>{this.hasKey(m)&&console.warn(`[Resolver] already has key: ${m} overwriting`)},zo(c).forEach(m=>{const{src:v,srcs:w}=m;let{data:f,format:y,loadParser:b}=m;const T=zo(v||w).map(L=>typeof L=="string"?WE(L):Array.isArray(L)?L:[L]),R=this.getAlias(m);Array.isArray(R)?R.forEach(d):d(R);const k=[];T.forEach(L=>{L.forEach(V=>{let z={};if(typeof V!="object"){z.src=V;for(let J=0;J<this._parsers.length;J++){const X=this._parsers[J];if(X.test(V)){z=X.parse(V);break}}}else f=V.data??f,y=V.format??y,b=V.loadParser??b,z={...z,...V};if(!R)throw new Error(`[Resolver] alias is undefined for this asset: ${z.src}`);z=this.buildResolvedAsset(z,{aliases:R,data:f,format:y,loadParser:b}),k.push(z)})}),R.forEach(L=>{this._assetMap[L]=k})})}resolveBundle(e){const t=Uf(e);e=zo(e);const r={};return e.forEach(s=>{const a=this._bundles[s];if(a){const c=this.resolve(a),d={};for(const m in c){const v=c[m];d[this._extractAssetIdFromBundle(s,m)]=v}r[s]=d}}),t?r[e[0]]:r}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const r={};for(const s in t)r[s]=t[s].src;return r}return t.src}resolve(e){const t=Uf(e);e=zo(e);const r={};return e.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let a=this._assetMap[s];const c=a[0],d=this._getPreferredOrder(a);d?.priority.forEach(m=>{d.params[m].forEach(v=>{const w=a.filter(f=>f[m]?f[m]===v:!1);w.length&&(a=w)})}),this._resolverHash[s]=a[0]??c}else this._resolverHash[s]=this.buildResolvedAsset({alias:[s],src:s},{});r[s]=this._resolverHash[s]}),t?r[e[0]]:r}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const r=e[0],s=this._preferredOrder.find(a=>a.params.format.includes(r.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}buildResolvedAsset(e,t){const{aliases:r,data:s,loadParser:a,format:c}=t;return(this._basePath||this._rootPath)&&(e.src=zn.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=r??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...s||{},...e.data},e.loadParser=a??e.loadParser,e.format=c??e.format??zn.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class wT{constructor(){this._detections=[],this._initialized=!1,this.resolver=new xT,this.loader=new qE,this.cache=uc,this._backgroundLoader=new VE(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const t=e.texturePreference?.resolution??1,r=typeof t=="number"?[t]:t,s=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:s,resolution:r}}),e.preferences&&this.setPreferences(e.preferences)}add(e,t,r,s,a){this.resolver.add(e,t,r,s,a)}async load(e,t){this._initialized||await this.init();const r=Uf(e),s=zo(e).map(d=>{if(typeof d!="string"){const m=this.resolver.getAlias(d);return m.some(v=>!this.resolver.hasKey(v))&&this.add(d),Array.isArray(m)?m[0]:m}return this.resolver.hasKey(d)||this.add({alias:d,src:d}),d}),a=this.resolver.resolve(s),c=await this._mapLoadToResolve(a,t);return r?c[s[0]]:c}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let r=!1;typeof e=="string"&&(r=!0,e=[e]);const s=this.resolver.resolveBundle(e),a={},c=Object.keys(s);let d=0,m=0;const v=()=>{t?.(++d/m)},w=c.map(f=>{const y=s[f];return m+=Object.keys(y).length,this._mapLoadToResolve(y,v).then(b=>{a[f]=b})});return await Promise.all(w),r?a[e[0]]:a}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(r=>{this._backgroundLoader.add(Object.values(r))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return uc.get(e);const t={};for(let r=0;r<e.length;r++)t[r]=uc.get(e[r]);return t}async _mapLoadToResolve(e,t){const r=Object.values(e),s=Object.keys(e);this._backgroundLoader.active=!1;const a=await this.loader.load(r,t);this._backgroundLoader.active=!0;const c={};return r.forEach((d,m)=>{const v=a[d.src],w=[d.src];d.alias&&w.push(...d.alias),c[s[m]]=v,uc.set(w,v)}),c}async unload(e){this._initialized||await this.init();const t=zo(e).map(s=>typeof s!="string"?s.src:s),r=this.resolver.resolve(t);await this._unloadFromResolved(r)}async unloadBundle(e){this._initialized||await this.init(),e=zo(e);const t=this.resolver.resolveBundle(e),r=Object.keys(t).map(s=>this._unloadFromResolved(t[s]));await Promise.all(r)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(r=>{uc.remove(r.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const r of e.detections)e.skipDetections||await r.test()?t=await r.add(t):e.skipDetections||(t=await r.remove(t));return t=t.filter((r,s)=>t.indexOf(r)===s),t}get detections(){return this._detections}get preferWorkers(){return np.config.preferWorkers}set preferWorkers(e){Jt("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(r=>r in e).forEach(r=>{t.config[r]=e[r]})})}}const cc=new wT;Et.handleByList(ht.LoadParser,cc.loader.parsers).handleByList(ht.ResolveParser,cc.resolver.parsers).handleByList(ht.CacheParser,cc.cache.parsers).handleByList(ht.DetectionParser,cc.detections);const bT={extension:ht.CacheParser,test:n=>Array.isArray(n)&&n.every(e=>e instanceof ut),getCacheableAssets:(n,e)=>{const t={};return n.forEach(r=>{e.forEach((s,a)=>{t[r+(a===0?"":a+1)]=s})}),t}};Et.add(bT);async function dw(n){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=n});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(n)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const ST={extension:{type:ht.DetectionParser,priority:1},test:async()=>dw("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async n=>[...n,"avif"],remove:async n=>n.filter(e=>e!=="avif")};Et.add(ST);const ET={extension:{type:ht.DetectionParser,priority:0},test:async()=>dw("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async n=>[...n,"webp"],remove:async n=>n.filter(e=>e!=="webp")};Et.add(ET);const u_=["png","jpg","jpeg"],TT={extension:{type:ht.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async n=>[...n,...u_],remove:async n=>n.filter(e=>!u_.includes(e))};Et.add(TT);const AT="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Ay(n){return AT?!1:document.createElement("video").canPlayType(n)!==""}const CT={extension:{type:ht.DetectionParser,priority:0},test:async()=>Ay("video/webm"),add:async n=>[...n,"webm"],remove:async n=>n.filter(e=>e!=="webm")};Et.add(CT);const IT={extension:{type:ht.DetectionParser,priority:0},test:async()=>Ay("video/mp4"),add:async n=>[...n,"mp4","m4v"],remove:async n=>n.filter(e=>e!=="mp4"&&e!=="m4v")};Et.add(IT);const PT={extension:{type:ht.DetectionParser,priority:0},test:async()=>Ay("video/ogg"),add:async n=>[...n,"ogv"],remove:async n=>n.filter(e=>e!=="ogv")};Et.add(PT);const RT={extension:ht.ResolveParser,test:np.test,parse:n=>({resolution:parseFloat(gt.RETINA_PREFIX.exec(n)?.[1]??"1"),format:zn.extname(n).slice(1),src:n})};Et.add(RT);var Qn=(n=>(n[n.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",n[n.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",n[n.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",n[n.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",n[n.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",n[n.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",n[n.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",n[n.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",n[n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",n[n.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",n[n.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",n[n.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",n[n.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",n[n.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",n[n.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",n[n.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",n))(Qn||{});const jf={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let Pa,qc;function c_(){qc={bptc:Pa.getExtension("EXT_texture_compression_bptc"),astc:Pa.getExtension("WEBGL_compressed_texture_astc"),etc:Pa.getExtension("WEBGL_compressed_texture_etc"),s3tc:Pa.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Pa.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:Pa.getExtension("WEBGL_compressed_texture_pvrtc")||Pa.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:Pa.getExtension("WEBGL_compressed_texture_etc1"),atc:Pa.getExtension("WEBGL_compressed_texture_atc")}}const kT={extension:{type:ht.DetectionParser,priority:2},test:async()=>{const n=gt.ADAPTER.createCanvas().getContext("webgl");return n?(Pa=n,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async n=>{qc||c_();const e=[];for(const t in qc)qc[t]&&e.push(t);return[...e,...n]},remove:async n=>(qc||c_(),n.filter(e=>!(e in qc)))};Et.add(kT);class MT extends Yf{constructor(e,t={width:1,height:1,autoLoad:!0}){let r,s;typeof e=="string"?(r=e,s=new Uint8Array):(r=null,s=e),super(s,t),this.origin=r,this.buffer=s?new Rg(s):null,this._load=null,this.loaded=!1,this.origin!==null&&t.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new Rg(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class dc extends MT{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=dc._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||dc._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,r){const s=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;s.pixelStorei(s.UNPACK_ALIGNMENT,4);for(let a=0,c=this.levels;a<c;a++){const{levelID:d,levelWidth:m,levelHeight:v,levelBuffer:w}=this._levelBuffers[a];s.compressedTexImage2D(s.TEXTURE_2D,d,this.format,m,v,0,w)}return!0}onBlobLoaded(){this._levelBuffers=dc._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,t,r,s,a,c,d){const m=new Array(r);let v=e.byteOffset,w=c,f=d,y=w+s-1&~(s-1),b=f+a-1&~(a-1),T=y*b*jf[t];for(let R=0;R<r;R++)m[R]={levelID:R,levelWidth:r>1?w:y,levelHeight:r>1?f:b,levelBuffer:new Uint8Array(e.buffer,v,T)},v+=T,w=w>>1||1,f=f>>1||1,y=w+s-1&~(s-1),b=f+a-1&~(a-1),T=y*b*jf[t];return m}}const ig=4,sf=124,OT=32,h_=20,DT=542327876,of={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},LT={FOURCC:2},af={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},NT=1,FT=2,BT=4,UT=64,jT=512,GT=131072,zT=827611204,HT=861165636,VT=894720068,WT=808540228,$T=4,qT={[zT]:Qn.COMPRESSED_RGBA_S3TC_DXT1_EXT,[HT]:Qn.COMPRESSED_RGBA_S3TC_DXT3_EXT,[VT]:Qn.COMPRESSED_RGBA_S3TC_DXT5_EXT},XT={70:Qn.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Qn.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Qn.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Qn.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Qn.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Qn.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Qn.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Qn.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Qn.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:Qn.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:Qn.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:Qn.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:Qn.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function KT(n){const e=new Uint32Array(n);if(e[0]!==DT)throw new Error("Invalid DDS file magic word");const t=new Uint32Array(n,0,sf/Uint32Array.BYTES_PER_ELEMENT),r=t[of.HEIGHT],s=t[of.WIDTH],a=t[of.MIPMAP_COUNT],c=new Uint32Array(n,of.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,OT/Uint32Array.BYTES_PER_ELEMENT),d=c[NT];if(d&BT){const m=c[LT.FOURCC];if(m!==WT){const V=qT[m],z=ig+sf,J=new Uint8Array(n,z);return[new dc(J,{format:V,width:s,height:r,levels:a})]}const v=ig+sf,w=new Uint32Array(e.buffer,v,h_/Uint32Array.BYTES_PER_ELEMENT),f=w[af.DXGI_FORMAT],y=w[af.RESOURCE_DIMENSION],b=w[af.MISC_FLAG],T=w[af.ARRAY_SIZE],R=XT[f];if(R===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${f}`);if(b===$T)throw new Error("DDSParser does not support cubemap textures");if(y===6)throw new Error("DDSParser does not supported 3D texture data");const k=new Array,L=ig+sf+h_;if(T===1)k.push(new Uint8Array(n,L));else{const V=jf[R];let z=0,J=s,X=r;for(let N=0;N<a;N++){const te=Math.max(1,J+3&-4),pe=Math.max(1,X+3&-4),Me=te*pe*V;z+=Me,J=J>>>1,X=X>>>1}let fe=L;for(let N=0;N<T;N++)k.push(new Uint8Array(n,fe,z)),fe+=z}return k.map(V=>new dc(V,{format:R,width:s,height:r,levels:a}))}throw d&UT?new Error("DDSParser does not support uncompressed texture data."):d&jT?new Error("DDSParser does not supported YUV uncompressed texture data."):d&GT?new Error("DDSParser does not support single-channel (lumninance) texture data!"):d&FT?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const d_=[171,75,84,88,32,49,49,187,13,10,26,10],YT=67305985,Uo={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},ty=64,f_={[Pt.UNSIGNED_BYTE]:1,[Pt.UNSIGNED_SHORT]:2,[Pt.INT]:4,[Pt.UNSIGNED_INT]:4,[Pt.FLOAT]:4,[Pt.HALF_FLOAT]:8},QT={[tt.RGBA]:4,[tt.RGB]:3,[tt.RG]:2,[tt.RED]:1,[tt.LUMINANCE]:1,[tt.LUMINANCE_ALPHA]:2,[tt.ALPHA]:1},ZT={[Pt.UNSIGNED_SHORT_4_4_4_4]:2,[Pt.UNSIGNED_SHORT_5_5_5_1]:2,[Pt.UNSIGNED_SHORT_5_6_5]:2};function JT(n,e,t=!1){const r=new DataView(e);if(!eA(n,r))return null;const s=r.getUint32(Uo.ENDIANNESS,!0)===YT,a=r.getUint32(Uo.GL_TYPE,s),c=r.getUint32(Uo.GL_FORMAT,s),d=r.getUint32(Uo.GL_INTERNAL_FORMAT,s),m=r.getUint32(Uo.PIXEL_WIDTH,s),v=r.getUint32(Uo.PIXEL_HEIGHT,s)||1,w=r.getUint32(Uo.PIXEL_DEPTH,s)||1,f=r.getUint32(Uo.NUMBER_OF_ARRAY_ELEMENTS,s)||1,y=r.getUint32(Uo.NUMBER_OF_FACES,s),b=r.getUint32(Uo.NUMBER_OF_MIPMAP_LEVELS,s),T=r.getUint32(Uo.BYTES_OF_KEY_VALUE_DATA,s);if(v===0||w!==1)throw new Error("Only 2D textures are supported");if(y!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(f!==1)throw new Error("WebGL does not support array textures");const R=4,k=4,L=m+3&-4,V=v+3&-4,z=new Array(f);let J=m*v;a===0&&(J=L*V);let X;if(a!==0?f_[a]?X=f_[a]*QT[c]:X=ZT[a]:X=jf[d],X===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const fe=t?rA(r,T,s):null;let N=J*X,te=m,pe=v,Me=L,Pe=V,ve=ty+T;for(let _e=0;_e<b;_e++){const we=r.getUint32(ve,s);let Xe=ve+4;for(let H=0;H<f;H++){let W=z[H];W||(W=z[H]=new Array(b)),W[_e]={levelID:_e,levelWidth:b>1||a!==0?te:Me,levelHeight:b>1||a!==0?pe:Pe,levelBuffer:new Uint8Array(e,Xe,N)},Xe+=N}ve+=we+4,ve=ve%4!==0?ve+4-ve%4:ve,te=te>>1||1,pe=pe>>1||1,Me=te+R-1&-4,Pe=pe+k-1&-4,N=Me*Pe*X}return a!==0?{uncompressed:z.map(_e=>{let we=_e[0].levelBuffer,Xe=!1;return a===Pt.FLOAT?we=new Float32Array(_e[0].levelBuffer.buffer,_e[0].levelBuffer.byteOffset,_e[0].levelBuffer.byteLength/4):a===Pt.UNSIGNED_INT?(Xe=!0,we=new Uint32Array(_e[0].levelBuffer.buffer,_e[0].levelBuffer.byteOffset,_e[0].levelBuffer.byteLength/4)):a===Pt.INT&&(Xe=!0,we=new Int32Array(_e[0].levelBuffer.buffer,_e[0].levelBuffer.byteOffset,_e[0].levelBuffer.byteLength/4)),{resource:new Yf(we,{width:_e[0].levelWidth,height:_e[0].levelHeight}),type:a,format:Xe?tA(c):c}}),kvData:fe}:{compressed:z.map(_e=>new dc(null,{format:d,width:m,height:v,levels:b,levelBuffers:_e})),kvData:fe}}function eA(n,e){for(let t=0;t<d_.length;t++)if(e.getUint8(t)!==d_[t])return console.error(`${n} is not a valid *.ktx file!`),!1;return!0}function tA(n){switch(n){case tt.RGBA:return tt.RGBA_INTEGER;case tt.RGB:return tt.RGB_INTEGER;case tt.RG:return tt.RG_INTEGER;case tt.RED:return tt.RED_INTEGER;default:return n}}function rA(n,e,t){const r=new Map;let s=0;for(;s<e;){const a=n.getUint32(ty+s,t),c=ty+s+4,d=3-(a+3)%4;if(a===0||a>e-s){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let m=0;for(;m<a&&n.getUint8(c+m)!==0;m++);if(m===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const v=new TextDecoder().decode(new Uint8Array(n.buffer,c,m)),w=new DataView(n.buffer,c+m+1,a-m-1);r.set(v,w),s+=4+a+d}return r}const nA={extension:{type:ht.LoadParser,priority:Ko.High},name:"loadDDS",test(n){return _u(n,".dds")},async load(n,e,t){const r=await(await gt.ADAPTER.fetch(n)).arrayBuffer(),s=KT(r).map(a=>{const c=new Gt(a,{mipmap:Ua.OFF,alphaMode:vs.NO_PREMULTIPLIED_ALPHA,resolution:bl(n),...e.data});return pd(c,t,n)});return s.length===1?s[0]:s},unload(n){Array.isArray(n)?n.forEach(e=>e.destroy(!0)):n.destroy(!0)}};Et.add(nA);const iA={extension:{type:ht.LoadParser,priority:Ko.High},name:"loadKTX",test(n){return _u(n,".ktx")},async load(n,e,t){const r=await(await gt.ADAPTER.fetch(n)).arrayBuffer(),{compressed:s,uncompressed:a,kvData:c}=JT(n,r),d=s??a,m={mipmap:Ua.OFF,alphaMode:vs.NO_PREMULTIPLIED_ALPHA,resolution:bl(n),...e.data},v=d.map(w=>{d===a&&Object.assign(m,{type:w.type,format:w.format});const f=w.resource??w,y=new Gt(f,m);return y.ktxKeyValueData=c,pd(y,t,n)});return v.length===1?v[0]:v},unload(n){Array.isArray(n)?n.forEach(e=>e.destroy(!0)):n.destroy(!0)}};Et.add(iA);const sA=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],oA={extension:ht.ResolveParser,test:n=>{const e=zn.extname(n).slice(1);return["basis","ktx","dds"].includes(e)},parse:n=>{const e=n.split("."),t=e.pop();if(["ktx","dds"].includes(t)){const r=e.pop();if(sA.includes(r))return{resolution:parseFloat(gt.RETINA_PREFIX.exec(n)?.[1]??"1"),format:r,src:n}}return{resolution:parseFloat(gt.RETINA_PREFIX.exec(n)?.[1]??"1"),format:t,src:n}}};Et.add(oA);const lf=new zt,aA=4,fw=class td{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){const e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,t,r,s){const a=new Image;return a.src=await this.base64(e,t,r,s),a}async base64(e,t,r,s){const a=this.canvas(e,s);if(a.toBlob!==void 0)return new Promise((c,d)=>{a.toBlob(m=>{if(!m){d(new Error("ICanvas.toBlob failed!"));return}const v=new FileReader;v.onload=()=>c(v.result),v.onerror=d,v.readAsDataURL(m)},t,r)});if(a.toDataURL!==void 0)return a.toDataURL(t,r);if(a.convertToBlob!==void 0){const c=await a.convertToBlob({type:t,quality:r});return new Promise((d,m)=>{const v=new FileReader;v.onload=()=>d(v.result),v.onerror=m,v.readAsDataURL(c)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:r,width:s,height:a,flipY:c,premultipliedAlpha:d}=this._rawPixels(e,t);c&&td._flipY(r,s,a),d&&td._unpremultiplyAlpha(r);const m=new Gb(s,a,1),v=new ImageData(new Uint8ClampedArray(r.buffer),s,a);return m.context.putImageData(v,0,0),m.canvas}pixels(e,t){const{pixels:r,width:s,height:a,flipY:c,premultipliedAlpha:d}=this._rawPixels(e,t);return c&&td._flipY(r,s,a),d&&td._unpremultiplyAlpha(r),r}_rawPixels(e,t){const r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");let s,a=!1,c=!1,d,m=!1;e&&(e instanceof mc?d=e:(d=r.generateTexture(e,{region:t,resolution:r.resolution,multisample:r.multisample}),m=!0,t&&(lf.width=t.width,lf.height=t.height,t=lf)));const v=r.gl;if(d){if(s=d.baseTexture.resolution,t=t??d.frame,a=!1,c=d.baseTexture.alphaMode>0&&d.baseTexture.format===tt.RGBA,!m){r.renderTexture.bind(d);const b=d.framebuffer.glFramebuffers[r.CONTEXT_UID];b.blitFramebuffer&&r.framebuffer.bind(b.blitFramebuffer)}}else s=r.resolution,t||(t=lf,t.width=r.width/s,t.height=r.height/s),a=!0,c=this._rendererPremultipliedAlpha,r.renderTexture.bind();const w=Math.max(Math.round(t.width*s),1),f=Math.max(Math.round(t.height*s),1),y=new Uint8Array(aA*w*f);return v.readPixels(Math.round(t.x*s),Math.round(t.y*s),w,f,v.RGBA,v.UNSIGNED_BYTE,y),m&&d?.destroy(!0),{pixels:y,width:w,height:f,flipY:a,premultipliedAlpha:c}}destroy(){this.renderer=null}static _flipY(e,t,r){const s=t<<2,a=r>>1,c=new Uint8Array(s);for(let d=0;d<a;d++){const m=d*s,v=(r-d-1)*s;c.set(e.subarray(m,m+s)),e.copyWithin(m,v,v+s),e.set(c,v)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let r=0;r<t;r+=4){const s=e[r+3];if(s!==0){const a=255.001/s;e[r]=e[r]*a+.5,e[r+1]=e[r+1]*a+.5,e[r+2]=e[r+2]*a+.5}}}};fw.extension={name:"extract",type:ht.RendererSystem};let lA=fw;Et.add(lA);const Gf={build(n){const e=n.points;let t,r,s,a,c,d;if(n.type===Zn.CIRC){const T=n.shape;t=T.x,r=T.y,c=d=T.radius,s=a=0}else if(n.type===Zn.ELIP){const T=n.shape;t=T.x,r=T.y,c=T.width,d=T.height,s=a=0}else{const T=n.shape,R=T.width/2,k=T.height/2;t=T.x+R,r=T.y+k,c=d=Math.max(0,Math.min(T.radius,Math.min(R,k))),s=R-c,a=k-d}if(!(c>=0&&d>=0&&s>=0&&a>=0)){e.length=0;return}const m=Math.ceil(2.3*Math.sqrt(c+d)),v=m*8+(s?4:0)+(a?4:0);if(e.length=v,v===0)return;if(m===0){e.length=8,e[0]=e[6]=t+s,e[1]=e[3]=r+a,e[2]=e[4]=t-s,e[5]=e[7]=r-a;return}let w=0,f=m*4+(s?2:0)+2,y=f,b=v;{const T=s+c,R=a,k=t+T,L=t-T,V=r+R;if(e[w++]=k,e[w++]=V,e[--f]=V,e[--f]=L,a){const z=r-R;e[y++]=L,e[y++]=z,e[--b]=z,e[--b]=k}}for(let T=1;T<m;T++){const R=Math.PI/2*(T/m),k=s+Math.cos(R)*c,L=a+Math.sin(R)*d,V=t+k,z=t-k,J=r+L,X=r-L;e[w++]=V,e[w++]=J,e[--f]=J,e[--f]=z,e[y++]=z,e[y++]=X,e[--b]=X,e[--b]=V}{const T=s,R=a+d,k=t+T,L=t-T,V=r+R,z=r-R;e[w++]=k,e[w++]=V,e[--b]=z,e[--b]=k,s&&(e[w++]=L,e[w++]=V,e[--b]=z,e[--b]=L)}},triangulate(n,e){const t=n.points,r=e.points,s=e.indices;if(t.length===0)return;let a=r.length/2;const c=a;let d,m;if(n.type!==Zn.RREC){const w=n.shape;d=w.x,m=w.y}else{const w=n.shape;d=w.x+w.width/2,m=w.y+w.height/2}const v=n.matrix;r.push(n.matrix?v.a*d+v.c*m+v.tx:d,n.matrix?v.b*d+v.d*m+v.ty:m),a++,r.push(t[0],t[1]);for(let w=2;w<t.length;w+=2)r.push(t[w],t[w+1]),s.push(a++,c,a);s.push(c+1,c,a)}};function p_(n,e=!1){const t=n.length;if(t<6)return;let r=0;for(let s=0,a=n[t-2],c=n[t-1];s<t;s+=2){const d=n[s],m=n[s+1];r+=(d-a)*(m+c),a=d,c=m}if(!e&&r>0||e&&r<=0){const s=t/2;for(let a=s+s%2;a<t;a+=2){const c=t-a-2,d=t-a-1,m=a,v=a+1;[n[c],n[m]]=[n[m],n[c]],[n[d],n[v]]=[n[v],n[d]]}}}const pw={build(n){n.points=n.shape.points.slice()},triangulate(n,e){let t=n.points;const r=n.holes,s=e.points,a=e.indices;if(t.length>=6){p_(t,!1);const c=[];for(let v=0;v<r.length;v++){const w=r[v];p_(w.points,!0),c.push(t.length/2),t=t.concat(w.points)}const d=j1(t,c,2);if(!d)return;const m=s.length/2;for(let v=0;v<d.length;v+=3)a.push(d[v]+m),a.push(d[v+1]+m),a.push(d[v+2]+m);for(let v=0;v<t.length;v++)s.push(t[v])}}},uA={build(n){const e=n.shape,t=e.x,r=e.y,s=e.width,a=e.height,c=n.points;c.length=0,s>=0&&a>=0&&c.push(t,r,t+s,r,t+s,r+a,t,r+a)},triangulate(n,e){const t=n.points,r=e.points;if(t.length===0)return;const s=r.length/2;r.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(s,s+1,s+2,s+1,s+2,s+3)}},cA={build(n){Gf.build(n)},triangulate(n,e){Gf.triangulate(n,e)}};var oo=(n=>(n.MITER="miter",n.BEVEL="bevel",n.ROUND="round",n))(oo||{}),fu=(n=>(n.BUTT="butt",n.ROUND="round",n.SQUARE="square",n))(fu||{});const ah={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(n,e=20){if(!this.adaptive||!n||isNaN(n))return e;let t=Math.ceil(n/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}};class m_{static curveTo(e,t,r,s,a,c){const d=c[c.length-2],m=c[c.length-1]-t,v=d-e,w=s-t,f=r-e,y=Math.abs(m*f-v*w);if(y<1e-8||a===0)return(c[c.length-2]!==e||c[c.length-1]!==t)&&c.push(e,t),null;const b=m*m+v*v,T=w*w+f*f,R=m*w+v*f,k=a*Math.sqrt(b)/y,L=a*Math.sqrt(T)/y,V=k*R/b,z=L*R/T,J=k*f+L*v,X=k*w+L*m,fe=v*(L+V),N=m*(L+V),te=f*(k+z),pe=w*(k+z),Me=Math.atan2(N-X,fe-J),Pe=Math.atan2(pe-X,te-J);return{cx:J+e,cy:X+t,radius:a,startAngle:Me,endAngle:Pe,anticlockwise:v*w>f*m}}static arc(e,t,r,s,a,c,d,m,v){const w=d-c,f=ah._segmentsCount(Math.abs(w)*a,Math.ceil(Math.abs(w)/Mf)*40),y=w/(f*2),b=y*2,T=Math.cos(y),R=Math.sin(y),k=f-1,L=k%1/k;for(let V=0;V<=k;++V){const z=V+L*V,J=y+c+b*z,X=Math.cos(J),fe=-Math.sin(J);v.push((T*X+R*fe)*a+r,(T*-fe+R*X)*a+s)}}}class hA{constructor(){this.reset()}begin(e,t,r){this.reset(),this.style=e,this.start=t,this.attribStart=r}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Cy{static curveLength(e,t,r,s,a,c,d,m){let v=0,w=0,f=0,y=0,b=0,T=0,R=0,k=0,L=0,V=0,z=0,J=e,X=t;for(let fe=1;fe<=10;++fe)w=fe/10,f=w*w,y=f*w,b=1-w,T=b*b,R=T*b,k=R*e+3*T*w*r+3*b*f*a+y*d,L=R*t+3*T*w*s+3*b*f*c+y*m,V=J-k,z=X-L,J=k,X=L,v+=Math.sqrt(V*V+z*z);return v}static curveTo(e,t,r,s,a,c,d){const m=d[d.length-2],v=d[d.length-1];d.length-=2;const w=ah._segmentsCount(Cy.curveLength(m,v,e,t,r,s,a,c));let f=0,y=0,b=0,T=0,R=0;d.push(m,v);for(let k=1,L=0;k<=w;++k)L=k/w,f=1-L,y=f*f,b=y*f,T=L*L,R=T*L,d.push(b*m+3*y*L*e+3*f*T*r+R*a,b*v+3*y*L*t+3*f*T*s+R*c)}}function g_(n,e,t,r,s,a,c,d){const m=n-t*s,v=e-r*s,w=n+t*a,f=e+r*a;let y,b;c?(y=r,b=-t):(y=-r,b=t);const T=m+y,R=v+b,k=w+y,L=f+b;return d.push(T,R,k,L),2}function Ju(n,e,t,r,s,a,c,d){const m=t-n,v=r-e;let w=Math.atan2(m,v),f=Math.atan2(s-n,a-e);d&&w<f?w+=Math.PI*2:!d&&w>f&&(f+=Math.PI*2);let y=w;const b=f-w,T=Math.abs(b),R=Math.sqrt(m*m+v*v),k=(15*T*Math.sqrt(R)/Math.PI>>0)+1,L=b/k;if(y+=L,d){c.push(n,e,t,r);for(let V=1,z=y;V<k;V++,z+=L)c.push(n,e,n+Math.sin(z)*R,e+Math.cos(z)*R);c.push(n,e,s,a)}else{c.push(t,r,n,e);for(let V=1,z=y;V<k;V++,z+=L)c.push(n+Math.sin(z)*R,e+Math.cos(z)*R,n,e);c.push(s,a,n,e)}return k*2}function dA(n,e){const t=n.shape;let r=n.points||t.points.slice();const s=e.closePointEps;if(r.length===0)return;const a=n.lineStyle,c=new er(r[0],r[1]),d=new er(r[r.length-2],r[r.length-1]),m=t.type!==Zn.POLY||t.closeStroke,v=Math.abs(c.x-d.x)<s&&Math.abs(c.y-d.y)<s;if(m){r=r.slice(),v&&(r.pop(),r.pop(),d.set(r[r.length-2],r[r.length-1]));const W=(c.x+d.x)*.5,D=(d.y+c.y)*.5;r.unshift(W,D),r.push(W,D)}const w=e.points,f=r.length/2;let y=r.length;const b=w.length/2,T=a.width/2,R=T*T,k=a.miterLimit*a.miterLimit;let L=r[0],V=r[1],z=r[2],J=r[3],X=0,fe=0,N=-(V-J),te=L-z,pe=0,Me=0,Pe=Math.sqrt(N*N+te*te);N/=Pe,te/=Pe,N*=T,te*=T;const ve=a.alignment,_e=(1-ve)*2,we=ve*2;m||(a.cap===fu.ROUND?y+=Ju(L-N*(_e-we)*.5,V-te*(_e-we)*.5,L-N*_e,V-te*_e,L+N*we,V+te*we,w,!0)+2:a.cap===fu.SQUARE&&(y+=g_(L,V,N,te,_e,we,!0,w))),w.push(L-N*_e,V-te*_e,L+N*we,V+te*we);for(let W=1;W<f-1;++W){L=r[(W-1)*2],V=r[(W-1)*2+1],z=r[W*2],J=r[W*2+1],X=r[(W+1)*2],fe=r[(W+1)*2+1],N=-(V-J),te=L-z,Pe=Math.sqrt(N*N+te*te),N/=Pe,te/=Pe,N*=T,te*=T,pe=-(J-fe),Me=z-X,Pe=Math.sqrt(pe*pe+Me*Me),pe/=Pe,Me/=Pe,pe*=T,Me*=T;const D=z-L,Y=V-J,G=z-X,U=fe-J,K=D*G+Y*U,he=Y*G-U*D,Ae=he<0;if(Math.abs(he)<.001*Math.abs(K)){w.push(z-N*_e,J-te*_e,z+N*we,J+te*we),K>=0&&(a.join===oo.ROUND?y+=Ju(z,J,z-N*_e,J-te*_e,z-pe*_e,J-Me*_e,w,!1)+4:y+=2,w.push(z-pe*we,J-Me*we,z+pe*_e,J+Me*_e));continue}const Oe=(-N+L)*(-te+J)-(-N+z)*(-te+V),Fe=(-pe+X)*(-Me+J)-(-pe+z)*(-Me+fe),Ge=(D*Fe-G*Oe)/he,Ke=(U*Oe-Y*Fe)/he,st=(Ge-z)*(Ge-z)+(Ke-J)*(Ke-J),Se=z+(Ge-z)*_e,at=J+(Ke-J)*_e,Qe=z-(Ge-z)*we,yt=J-(Ke-J)*we,Bt=Math.min(D*D+Y*Y,G*G+U*U),ft=Ae?_e:we,_t=Bt+ft*ft*R,gr=st<=_t;let Cr=a.join;if(Cr===oo.MITER&&st/R>k&&(Cr=oo.BEVEL),gr)switch(Cr){case oo.MITER:{w.push(Se,at,Qe,yt);break}case oo.BEVEL:{Ae?w.push(Se,at,z+N*we,J+te*we,Se,at,z+pe*we,J+Me*we):w.push(z-N*_e,J-te*_e,Qe,yt,z-pe*_e,J-Me*_e,Qe,yt),y+=2;break}case oo.ROUND:{Ae?(w.push(Se,at,z+N*we,J+te*we),y+=Ju(z,J,z+N*we,J+te*we,z+pe*we,J+Me*we,w,!0)+4,w.push(Se,at,z+pe*we,J+Me*we)):(w.push(z-N*_e,J-te*_e,Qe,yt),y+=Ju(z,J,z-N*_e,J-te*_e,z-pe*_e,J-Me*_e,w,!1)+4,w.push(z-pe*_e,J-Me*_e,Qe,yt));break}}else{switch(w.push(z-N*_e,J-te*_e,z+N*we,J+te*we),Cr){case oo.MITER:{Ae?w.push(Qe,yt,Qe,yt):w.push(Se,at,Se,at),y+=2;break}case oo.ROUND:{Ae?y+=Ju(z,J,z+N*we,J+te*we,z+pe*we,J+Me*we,w,!0)+2:y+=Ju(z,J,z-N*_e,J-te*_e,z-pe*_e,J-Me*_e,w,!1)+2;break}}w.push(z-pe*_e,J-Me*_e,z+pe*we,J+Me*we),y+=2}}L=r[(f-2)*2],V=r[(f-2)*2+1],z=r[(f-1)*2],J=r[(f-1)*2+1],N=-(V-J),te=L-z,Pe=Math.sqrt(N*N+te*te),N/=Pe,te/=Pe,N*=T,te*=T,w.push(z-N*_e,J-te*_e,z+N*we,J+te*we),m||(a.cap===fu.ROUND?y+=Ju(z-N*(_e-we)*.5,J-te*(_e-we)*.5,z-N*_e,J-te*_e,z+N*we,J+te*we,w,!1)+2:a.cap===fu.SQUARE&&(y+=g_(z,J,N,te,_e,we,!1,w)));const Xe=e.indices,H=ah.epsilon*ah.epsilon;for(let W=b;W<y+b-2;++W)L=w[W*2],V=w[W*2+1],z=w[(W+1)*2],J=w[(W+1)*2+1],X=w[(W+2)*2],fe=w[(W+2)*2+1],!(Math.abs(L*(J-fe)+z*(fe-V)+X*(V-J))<H)&&Xe.push(W,W+1,W+2)}function fA(n,e){let t=0;const r=n.shape,s=n.points||r.points,a=r.type!==Zn.POLY||r.closeStroke;if(s.length===0)return;const c=e.points,d=e.indices,m=s.length/2,v=c.length/2;let w=v;for(c.push(s[0],s[1]),t=1;t<m;t++)c.push(s[t*2],s[t*2+1]),d.push(w,w+1),w++;a&&d.push(w,v)}function y_(n,e){n.lineStyle.native?fA(n,e):dA(n,e)}class Iy{static curveLength(e,t,r,s,a,c){const d=e-2*r+a,m=t-2*s+c,v=2*r-2*e,w=2*s-2*t,f=4*(d*d+m*m),y=4*(d*v+m*w),b=v*v+w*w,T=2*Math.sqrt(f+y+b),R=Math.sqrt(f),k=2*f*R,L=2*Math.sqrt(b),V=y/R;return(k*T+R*y*(T-L)+(4*b*f-y*y)*Math.log((2*R+V+T)/(V+L)))/(4*k)}static curveTo(e,t,r,s,a){const c=a[a.length-2],d=a[a.length-1],m=ah._segmentsCount(Iy.curveLength(c,d,e,t,r,s));let v=0,w=0;for(let f=1;f<=m;++f){const y=f/m;v=c+(e-c)*y,w=d+(t-d)*y,a.push(v+(e+(r-e)*y-v)*y,w+(t+(s-t)*y-w)*y)}}}const sg={[Zn.POLY]:pw,[Zn.CIRC]:Gf,[Zn.ELIP]:Gf,[Zn.RECT]:uA,[Zn.RREC]:cA},v_=[],uf=[];class zf{constructor(e,t=null,r=null,s=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=t,this.matrix=s,this.type=e.type}clone(){return new zf(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const zc=new er,mw=class gw extends bx{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Ff,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),uf.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),v_.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,r=null,s=null){const a=new zf(e,t,r,s);return this.graphicsData.push(a),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const r=new zf(e,null,null,t),s=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=s.lineStyle,s.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let r=0;r<t.length;++r){const s=t[r];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(e,zc):zc.copyFrom(e),s.shape.contains(zc.x,zc.y))){let a=!1;if(s.holes){for(let c=0;c<s.holes.length;c++)if(s.holes[c].shape.contains(zc.x,zc.y)){a=!0;break}}if(!a)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let r=null,s=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],s=r.style);for(let m=this.shapeIndex;m<t.length;m++){this.shapeIndex++;const v=t[m],w=v.fillStyle,f=v.lineStyle;sg[v.type].build(v),v.matrix&&this.transformPoints(v.points,v.matrix),(w.visible||f.visible)&&this.processHoles(v.holes);for(let y=0;y<2;y++){const b=y===0?w:f;if(!b.visible)continue;const T=b.texture.baseTexture,R=this.indices.length,k=this.points.length/2;T.wrapMode=xl.REPEAT,y===0?this.processFill(v):this.processLine(v);const L=this.points.length/2-k;L!==0&&(r&&!this._compareStyles(s,b)&&(r.end(R,k),r=null),r||(r=v_.pop()||new hA,r.begin(b,R,k),this.batches.push(r),s=b),this.addUvs(this.points,e,b.texture,k,L,b.matrix))}}const a=this.indices.length,c=this.points.length/2;if(r&&r.end(a,c),this.batches.length===0){this.batchable=!0;return}const d=c>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&d===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=d?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const r=this.graphicsData[e],s=r.fillStyle,a=r.lineStyle;if(s&&!s.texture.baseTexture.valid||a&&!a.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,r=e.length;t<r;t++){const s=e[t];for(let a=0;a<s.size;a++){const c=s.start+a;this.indicesUint16[c]=this.indicesUint16[c]-s.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<gw.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++Gt._globalBatch;for(let f=0;f<this.drawCalls.length;f++)this.drawCalls[f].texArray.clear(),uf.push(this.drawCalls[f]);this.drawCalls.length=0;const t=this.colors,r=this.textureIds;let s=uf.pop();s||(s=new Og,s.texArray=new Fg),s.texArray.count=0,s.start=0,s.size=0,s.type=Ho.TRIANGLES;let a=0,c=null,d=0,m=!1,v=Ho.TRIANGLES,w=0;this.drawCalls.push(s);for(let f=0;f<this.batches.length;f++){const y=this.batches[f],b=8,T=y.style,R=T.texture.baseTexture;m!==!!T.native&&(m=!!T.native,v=m?Ho.LINES:Ho.TRIANGLES,c=null,a=b,e++),c!==R&&(c=R,R._batchEnabled!==e&&(a===b&&(e++,a=0,s.size>0&&(s=uf.pop(),s||(s=new Og,s.texArray=new Fg),this.drawCalls.push(s)),s.start=w,s.size=0,s.texArray.count=0,s.type=v),R.touched=1,R._batchEnabled=e,R._batchLocation=a,R.wrapMode=xl.REPEAT,s.texArray.elements[s.texArray.count++]=R,a++)),s.size+=y.size,w+=y.size,d=R._batchLocation,this.addColors(t,T.color,T.alpha,y.attribSize,y.attribStart),this.addTextureIds(r,d,y.attribSize,y.attribStart)}Gt._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,r=this.colors,s=this.textureIds,a=new ArrayBuffer(e.length*3*4),c=new Float32Array(a),d=new Uint32Array(a);let m=0;for(let v=0;v<e.length/2;v++)c[m++]=e[v*2],c[m++]=e[v*2+1],c[m++]=t[v*2],c[m++]=t[v*2+1],d[m++]=r[v],c[m++]=s[v];this._buffer.update(a),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?pw.triangulate(e,this):sg[e.type].triangulate(e,this)}processLine(e){y_(e,this);for(let t=0;t<e.holes.length;t++)y_(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const r=e[t];sg[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let r=0;r<e.length/2;r++){const s=e[r*2],a=e[r*2+1];e[r*2]=t.a*s+t.c*a+t.tx,e[r*2+1]=t.b*s+t.d*a+t.ty}}addColors(e,t,r,s,a=0){const c=kr.shared.setValue(t).toLittleEndianNumber(),d=kr.shared.setValue(c).toPremultiplied(r);e.length=Math.max(e.length,a+s);for(let m=0;m<s;m++)e[a+m]=d}addTextureIds(e,t,r,s=0){e.length=Math.max(e.length,s+r);for(let a=0;a<r;a++)e[s+a]=t}addUvs(e,t,r,s,a,c=null){let d=0;const m=t.length,v=r.frame;for(;d<a;){let f=e[(s+d)*2],y=e[(s+d)*2+1];if(c){const b=c.a*f+c.c*y+c.tx;y=c.b*f+c.d*y+c.ty,f=b}d++,t.push(f/v.width,y/v.height)}const w=r.baseTexture;(v.width<w.width||v.height<w.height)&&this.adjustUvs(t,r,m,a)}adjustUvs(e,t,r,s){const a=t.baseTexture,c=1e-6,d=r+s*2,m=t.frame,v=m.width/a.width,w=m.height/a.height;let f=m.x/m.width,y=m.y/m.height,b=Math.floor(e[r]+c),T=Math.floor(e[r+1]+c);for(let R=r+2;R<d;R+=2)b=Math.min(b,Math.floor(e[R]+c)),T=Math.min(T,Math.floor(e[R+1]+c));f-=b,y-=T;for(let R=r;R<d;R+=2)e[R]=(e[R]+f)*v,e[R+1]=(e[R+1]+y)*w}};mw.BATCHABLE_SIZE=100;let pA=mw;class ip{constructor(){this.color=16777215,this.alpha=1,this.texture=ut.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new ip;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=ut.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Py extends ip{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=fu.BUTT,this.join=oo.MITER,this.miterLimit=10}clone(){const e=new Py;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=fu.BUTT,this.join=oo.MITER,this.miterLimit=10}}const og={},ry=class Ef extends Ni{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new ip,this._lineStyle=new Py,this._matrix=null,this._holeMode=!1,this.state=za.for2d(),this._geometry=e||new pA,this._geometry.refCount++,this._transformID=-1,this._tintColor=new kr(16777215),this.blendMode=Dt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Ef(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,r,s=.5,a=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:r,alignment:s,native:a}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:ut.WHITE,color:e?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:fu.BUTT,join:oo.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new hc,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new hc,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,s=r[r.length-2],a=r[r.length-1];return(s!==e||a!==t)&&r.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,r,s){this._initCurve();const a=this.currentPath.points;return a.length===0&&this.moveTo(0,0),Iy.curveTo(e,t,r,s,a),this}bezierCurveTo(e,t,r,s,a,c){return this._initCurve(),Cy.curveTo(e,t,r,s,a,c,this.currentPath.points),this}arcTo(e,t,r,s,a){this._initCurve(e,t);const c=this.currentPath.points,d=m_.curveTo(e,t,r,s,a,c);if(d){const{cx:m,cy:v,radius:w,startAngle:f,endAngle:y,anticlockwise:b}=d;this.arc(m,v,w,f,y,b)}return this}arc(e,t,r,s,a,c=!1){if(s===a)return this;if(!c&&a<=s?a+=Mf:c&&s<=a&&(s+=Mf),a-s===0)return this;const d=e+Math.cos(s)*r,m=t+Math.sin(s)*r,v=this._geometry.closePointEps;let w=this.currentPath?this.currentPath.points:null;if(w){const f=Math.abs(w[w.length-2]-d),y=Math.abs(w[w.length-1]-m);f<v&&y<v||w.push(d,m)}else this.moveTo(d,m),w=this.currentPath.points;return m_.arc(d,m,e,t,r,s,a,c,w),this}beginFill(e=0,t){return this.beginTextureFill({texture:ut.WHITE,color:e,alpha:t})}normalizeColor(e){const t=kr.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:ut.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:r},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,r,s){return this.drawShape(new zt(e,t,r,s))}drawRoundedRect(e,t,r,s,a){return this.drawShape(new Jf(e,t,r,s,a))}drawCircle(e,t,r){return this.drawShape(new Qf(e,t,r))}drawEllipse(e,t,r,s){return this.drawShape(new Zf(e,t,r,s))}drawPolygon(...e){let t,r=!0;const s=e[0];s.points?(r=s.closeStroke,t=s.points):Array.isArray(e[0])?t=e[0]:t=e;const a=new hc(t);return a.closeStroke=r,this.drawShape(a),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Zn.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,r=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(e.points);for(let s=0;s<r;s++){const a=e.batches[s],c=a.style.color,d=new Float32Array(this.vertexData.buffer,a.attribStart*4*2,a.attribSize*2),m=new Float32Array(e.uvsFloat32.buffer,a.attribStart*4*2,a.attribSize*2),v=new Uint16Array(e.indicesUint16.buffer,a.start*2,a.size),w={vertexData:d,blendMode:t,indices:v,uvs:m,_batchRGB:kr.shared.setValue(c).toRgbArray(),_tintRGB:c,_texture:a.style.texture,alpha:a.style.alpha,worldAlpha:1};this.batches[s]=w}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,r=this.batches.length;t<r;t++){const s=this.batches[t];s.worldAlpha=this.worldAlpha*s.alpha,e.plugins[this.pluginName].render(s)}}}_renderDirect(e){const t=this._resolveDirectShader(e),r=this._geometry,s=this.worldAlpha,a=t.uniforms,c=r.drawCalls;a.translationMatrix=this.transform.worldTransform,kr.shared.setValue(this._tintColor).premultiply(s).toArray(a.tint),e.shader.bind(t),e.geometry.bind(r,t),e.state.set(this.state);for(let d=0,m=c.length;d<m;d++)this._renderDrawCallDirect(e,r.drawCalls[d])}_renderDrawCallDirect(e,t){const{texArray:r,type:s,size:a,start:c}=t,d=r.count;for(let m=0;m<d;m++)e.texture.bind(r.elements[m],m);e.geometry.draw(s,a,c)}_resolveDirectShader(e){let t=this.shader;const r=this.pluginName;if(!t){if(!og[r]){const{maxTextures:s}=e.plugins[r],a=new Int32Array(s);for(let m=0;m<s;m++)a[m]=m;const c={tint:new Float32Array([1,1,1,1]),translationMatrix:new Lr,default:qo.from({uSamplers:a},!0)},d=e.plugins[r]._shader.program;og[r]=new Ba(d,c)}t=og[r]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:r,maxX:s,maxY:a}=e.bounds;this._bounds.addFrame(this.transform,t,r,s,a)}containsPoint(e){return this.worldTransform.applyInverse(e,Ef._TEMP_POINT),this._geometry.containsPoint(Ef._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=kr.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,r=t.a,s=t.b,a=t.c,c=t.d,d=t.tx,m=t.ty,v=this._geometry.points,w=this.vertexData;let f=0;for(let y=0;y<v.length;y+=2){const b=v[y],T=v[y+1];w[f++]=r*b+a*T+d,w[f++]=c*T+s*b+m}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};ry.curves=ah,ry._TEMP_POINT=new er;let sh=ry;class mA{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}const ag=new er,__=new hc,yw=class vw extends Ni{constructor(e,t,r,s=Ho.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=r||za.for2d(),this.drawMode=s,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=gt.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Ho.TRIANGLES&&t.length<vw.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const s=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[s]),e.plugins[s].render(this)}calculateVertices(){const e=this.geometry.buffers[0],t=e.data,r=e._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));const s=this.transform.worldTransform,a=s.a,c=s.b,d=s.c,m=s.d,v=s.tx,w=s.ty,f=this.vertexData;for(let y=0;y<f.length/2;y++){const b=t[y*2],T=t[y*2+1];f[y*2]=a*b+d*T+v,f[y*2+1]=c*b+m*T+w}if(this._roundPixels){const y=gt.RESOLUTION;for(let b=0;b<f.length;++b)f[b]=Math.round(f[b]*y)/y}this.vertexDirty=r}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new mA(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,ag);const t=this.geometry.getBuffer("aVertexPosition").data,r=__.points,s=this.geometry.getIndex().data,a=s.length,c=this.drawMode===4?3:1;for(let d=0;d+2<a;d+=c){const m=s[d]*2,v=s[d+1]*2,w=s[d+2]*2;if(r[0]=t[m],r[1]=t[m+1],r[2]=t[v],r[3]=t[v+1],r[4]=t[w],r[5]=t[w+1],__.contains(ag.x,ag.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};yw.BATCHABLE_SIZE=100;let ad=yw;class sp extends gu{constructor(e,t,r){super();const s=new pn(e),a=new pn(t,!0),c=new pn(r,!0,!0);this.addAttribute("aVertexPosition",s,2,!1,Pt.FLOAT).addAttribute("aTextureCoord",a,2,!1,Pt.FLOAT).addIndex(c),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var gA=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,yA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class ld extends Ba{constructor(e,t){const r={uSampler:e,alpha:1,uTextureMatrix:Lr.IDENTITY,uColor:new Float32Array([1,1,1,1])};t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t),t.uniforms&&Object.assign(r,t.uniforms),super(t.program||_l.from(yA,gA),r),this._colorDirty=!1,this.uvMatrix=new Ey(e),this.batchable=t.program===void 0,this.pluginName=t.pluginName,this._tintColor=new kr(t.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;kr.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class vA extends sp{constructor(e=100,t=100,r=10,s=10){super(),this.segWidth=r,this.segHeight=s,this.width=e,this.height=t,this.build()}build(){const e=this.segWidth*this.segHeight,t=[],r=[],s=[],a=this.segWidth-1,c=this.segHeight-1,d=this.width/a,m=this.height/c;for(let w=0;w<e;w++){const f=w%this.segWidth,y=w/this.segWidth|0;t.push(f*d,y*m),r.push(f/a,y/c)}const v=a*c;for(let w=0;w<v;w++){const f=w%a,y=w/a|0,b=y*this.segWidth+f,T=y*this.segWidth+f+1,R=(y+1)*this.segWidth+f,k=(y+1)*this.segWidth+f+1;s.push(b,T,R,T,k,R)}this.buffers[0].data=new Float32Array(t),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class _A extends sp{constructor(e=200,t,r=0){super(new Float32Array(t.length*4),new Float32Array(t.length*4),new Uint16Array((t.length-1)*6)),this.points=t,this._width=e,this.textureScale=r,this.build()}get width(){return this._width}build(){const e=this.points;if(!e)return;const t=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),s=this.getIndex();if(e.length<1)return;t.data.length/4!==e.length&&(t.data=new Float32Array(e.length*4),r.data=new Float32Array(e.length*4),s.data=new Uint16Array((e.length-1)*6));const a=r.data,c=s.data;a[0]=0,a[1]=0,a[2]=0,a[3]=1;let d=0,m=e[0];const v=this._width*this.textureScale,w=e.length;for(let y=0;y<w;y++){const b=y*4;if(this.textureScale>0){const T=m.x-e[y].x,R=m.y-e[y].y,k=Math.sqrt(T*T+R*R);m=e[y],d+=k/v}else d=y/(w-1);a[b]=d,a[b+1]=0,a[b+2]=d,a[b+3]=1}let f=0;for(let y=0;y<w-1;y++){const b=y*2;c[f++]=b,c[f++]=b+1,c[f++]=b+2,c[f++]=b+2,c[f++]=b+1,c[f++]=b+3}r.update(),s.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let t=e[0],r,s=0,a=0;const c=this.buffers[0].data,d=e.length,m=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let v=0;v<d;v++){const w=e[v],f=v*4;v<e.length-1?r=e[v+1]:r=w,a=-(r.x-t.x),s=r.y-t.y;const y=Math.sqrt(s*s+a*a);y<1e-6?(s=0,a=0):(s/=y,a/=y,s*=m,a*=m),c[f]=w.x+s,c[f+1]=w.y+a,c[f+2]=w.x-s,c[f+3]=w.y-a,t=w}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class xA extends ad{constructor(e,t,r){const s=new vA(e.width,e.height,t,r),a=new ld(ut.WHITE);super(s,a),this.texture=e,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const e=this.geometry,{width:t,height:r}=this.shader.texture;this.autoResize&&(e.width!==t||e.height!==r)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())}set texture(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(e)}destroy(e){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const cf=10;class wA extends xA{constructor(e,t,r,s,a){super(ut.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=t??e.defaultBorders?.left??cf,this._rightWidth=s??e.defaultBorders?.right??cf,this._topHeight=r??e.defaultBorders?.top??cf,this._bottomHeight=a??e.defaultBorders?.bottom??cf,this.texture=e}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}updateHorizontalVertices(){const e=this.vertices,t=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*t,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*t,e[25]=e[27]=e[29]=e[31]=this._height}updateVerticalVertices(){const e=this.vertices,t=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*t,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*t,e[6]=e[14]=e[22]=e[30]=this._width}_getMinScale(){const e=this._leftWidth+this._rightWidth,t=this._width>e?1:this._width/e,r=this._topHeight+this._bottomHeight,s=this._height>r?1:this._height/r;return Math.min(t,s)}get width(){return this._width}set width(e){this._width=e,this._refresh()}get height(){return this._height}set height(e){this._height=e,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this._refresh()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this._refresh()}_refresh(){const e=this.texture,t=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;const r=1/this._origWidth,s=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=r*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-r*this._rightWidth,t[9]=t[11]=t[13]=t[15]=s*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-s*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class bA extends ad{constructor(e=ut.EMPTY,t,r,s,a){const c=new sp(t,r,s);c.getBuffer("aVertexPosition").static=!1;const d=new ld(e);super(c,d,null,a),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}_render(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(e)}}class SA extends ad{constructor(e,t,r=0){const s=new _A(e.height,t,r),a=new ld(e);r>0&&(e.baseTexture.wrapMode=xl.REPEAT),super(s,a),this.autoUpdate=!0}_render(e){const t=this.geometry;(this.autoUpdate||t._width!==this.shader.texture.height)&&(t._width=this.shader.texture.height,t.update()),super._render(e)}}class EA extends Ni{constructor(e=1500,t,r=16384,s=!1){super();const a=16384;r>a&&(r=a),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=r,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=Dt.NORMAL,this.autoResize=s,this.roundPixels=!0,this.baseTexture=null,this.setProperties(t),this._tintColor=new kr(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb)}render(e){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))}onChildrenChange(e){const t=Math.floor(e/this._batchSize);for(;this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID}dispose(){if(this._buffers){for(let e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}}destroy(e){super.destroy(e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class x_{constructor(e,t,r){this.geometry=new gu,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let s=0;s<e.length;++s){let a=e[s];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||Pt.FLOAT,offset:a.offset},t[s]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let t=0;this.indexBuffer=new pn(Ub(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let c=0;c<this.dynamicProperties.length;++c){const d=this.dynamicProperties[c];d.offset=t,t+=d.size,this.dynamicStride+=d.size}const r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new pn(this.dynamicData,!1,!1);let s=0;this.staticStride=0;for(let c=0;c<this.staticProperties.length;++c){const d=this.staticProperties[c];d.offset=s,s+=d.size,this.staticStride+=d.size}const a=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(a),this.staticDataUint32=new Uint32Array(a),this.staticBuffer=new pn(this.staticData,!0,!1);for(let c=0;c<this.dynamicProperties.length;++c){const d=this.dynamicProperties[c];e.addAttribute(d.attributeName,this.dynamicBuffer,0,d.type===Pt.UNSIGNED_BYTE,d.type,this.dynamicStride*4,d.offset*4)}for(let c=0;c<this.staticProperties.length;++c){const d=this.staticProperties[c];e.addAttribute(d.attributeName,this.staticBuffer,0,d.type===Pt.UNSIGNED_BYTE,d.type,this.staticStride*4,d.offset*4)}}uploadDynamic(e,t,r){for(let s=0;s<this.dynamicProperties.length;s++){const a=this.dynamicProperties[s];a.uploadFunction(e,t,r,a.type===Pt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,r){for(let s=0;s<this.staticProperties.length;s++){const a=this.staticProperties[s];a.uploadFunction(e,t,r,a.type===Pt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var TA=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,AA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class _w extends tp{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new Lr,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Pt.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Ba.from(AA,TA,{}),this.state=za.for2d()}render(e){const t=e.children,r=e._maxSize,s=e._batchSize,a=this.renderer;let c=t.length;if(c===0)return;c>r&&!e.autoResize&&(c=r);let d=e._buffers;d||(d=e._buffers=this.generateBuffers(e));const m=t[0]._texture.baseTexture,v=m.alphaMode>0;this.state.blendMode=_x(e.blendMode,v),a.state.set(this.state);const w=a.gl,f=e.worldTransform.copyTo(this.tempMatrix);f.prepend(a.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=kr.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,v).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=m,this.renderer.shader.bind(this.shader);let y=!1;for(let b=0,T=0;b<c;b+=s,T+=1){let R=c-b;R>s&&(R=s),T>=d.length&&d.push(this._generateOneMoreBuffer(e));const k=d[T];k.uploadDynamic(t,b,R);const L=e._bufferUpdateIDs[T]||0;y=y||k._updateID<L,y&&(k._updateID=e._updateID,k.uploadStatic(t,b,R)),a.geometry.bind(k.geometry),w.drawElements(w.TRIANGLES,R*6,w.UNSIGNED_SHORT,0)}}generateBuffers(e){const t=[],r=e._maxSize,s=e._batchSize,a=e._properties;for(let c=0;c<r;c+=s)t.push(new x_(this.properties,a,s));return t}_generateOneMoreBuffer(e){const t=e._batchSize,r=e._properties;return new x_(this.properties,r,t)}uploadVertices(e,t,r,s,a,c){let d=0,m=0,v=0,w=0;for(let f=0;f<r;++f){const y=e[t+f],b=y._texture,T=y.scale.x,R=y.scale.y,k=b.trim,L=b.orig;k?(m=k.x-y.anchor.x*L.width,d=m+k.width,w=k.y-y.anchor.y*L.height,v=w+k.height):(d=L.width*(1-y.anchor.x),m=L.width*-y.anchor.x,v=L.height*(1-y.anchor.y),w=L.height*-y.anchor.y),s[c]=m*T,s[c+1]=w*R,s[c+a]=d*T,s[c+a+1]=w*R,s[c+a*2]=d*T,s[c+a*2+1]=v*R,s[c+a*3]=m*T,s[c+a*3+1]=v*R,c+=a*4}}uploadPosition(e,t,r,s,a,c){for(let d=0;d<r;d++){const m=e[t+d].position;s[c]=m.x,s[c+1]=m.y,s[c+a]=m.x,s[c+a+1]=m.y,s[c+a*2]=m.x,s[c+a*2+1]=m.y,s[c+a*3]=m.x,s[c+a*3+1]=m.y,c+=a*4}}uploadRotation(e,t,r,s,a,c){for(let d=0;d<r;d++){const m=e[t+d].rotation;s[c]=m,s[c+a]=m,s[c+a*2]=m,s[c+a*3]=m,c+=a*4}}uploadUvs(e,t,r,s,a,c){for(let d=0;d<r;++d){const m=e[t+d]._texture._uvs;m?(s[c]=m.x0,s[c+1]=m.y0,s[c+a]=m.x1,s[c+a+1]=m.y1,s[c+a*2]=m.x2,s[c+a*2+1]=m.y2,s[c+a*3]=m.x3,s[c+a*3+1]=m.y3,c+=a*4):(s[c]=0,s[c+1]=0,s[c+a]=0,s[c+a+1]=0,s[c+a*2]=0,s[c+a*2+1]=0,s[c+a*3]=0,s[c+a*3+1]=0,c+=a*4)}}uploadTint(e,t,r,s,a,c){for(let d=0;d<r;++d){const m=e[t+d],v=kr.shared.setValue(m._tintRGB).toPremultiplied(m.alpha,m.texture.baseTexture.alphaMode>0);s[c]=v,s[c+a]=v,s[c+a*2]=v,s[c+a*3]=v,c+=a*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}_w.extension={name:"particle",type:ht.RendererPlugin};Et.add(_w);var op=(n=>(n[n.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",n[n.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",n))(op||{});const hf={willReadFrequently:!0},Ra=class At{static get experimentalLetterSpacingSupported(){let e=At._experimentalLetterSpacingSupported;if(e!==void 0){const t=gt.ADAPTER.getCanvasRenderingContext2D().prototype;e=At._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,r,s,a,c,d,m,v){this.text=e,this.style=t,this.width=r,this.height=s,this.lines=a,this.lineWidths=c,this.lineHeight=d,this.maxLineWidth=m,this.fontProperties=v}static measureText(e,t,r,s=At._canvas){r=r??t.wordWrap;const a=t.toFontString(),c=At.measureFont(a);c.fontSize===0&&(c.fontSize=t.fontSize,c.ascent=t.fontSize);const d=s.getContext("2d",hf);d.font=a;const m=(r?At.wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),v=new Array(m.length);let w=0;for(let T=0;T<m.length;T++){const R=At._measureText(m[T],t.letterSpacing,d);v[T]=R,w=Math.max(w,R)}let f=w+t.strokeThickness;t.dropShadow&&(f+=t.dropShadowDistance);const y=t.lineHeight||c.fontSize+t.strokeThickness;let b=Math.max(y,c.fontSize+t.strokeThickness*2)+t.leading+(m.length-1)*(y+t.leading);return t.dropShadow&&(b+=t.dropShadowDistance),new At(e,t,f,b,m,v,y+t.leading,w,c)}static _measureText(e,t,r){let s=!1;At.experimentalLetterSpacingSupported&&(At.experimentalLetterSpacing?(r.letterSpacing=`${t}px`,r.textLetterSpacing=`${t}px`,s=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let a=r.measureText(e).width;return a>0&&(s?a-=t:a+=(At.graphemeSegmenter(e).length-1)*t),a}static wordWrap(e,t,r=At._canvas){const s=r.getContext("2d",hf);let a=0,c="",d="";const m=Object.create(null),{letterSpacing:v,whiteSpace:w}=t,f=At.collapseSpaces(w),y=At.collapseNewlines(w);let b=!f;const T=t.wordWrapWidth+v,R=At.tokenize(e);for(let k=0;k<R.length;k++){let L=R[k];if(At.isNewline(L)){if(!y){d+=At.addLine(c),b=!f,c="",a=0;continue}L=" "}if(f){const z=At.isBreakingSpace(L),J=At.isBreakingSpace(c[c.length-1]);if(z&&J)continue}const V=At.getFromCache(L,v,m,s);if(V>T)if(c!==""&&(d+=At.addLine(c),c="",a=0),At.canBreakWords(L,t.breakWords)){const z=At.wordWrapSplit(L);for(let J=0;J<z.length;J++){let X=z[J],fe=X,N=1;for(;z[J+N];){const pe=z[J+N];if(!At.canBreakChars(fe,pe,L,J,t.breakWords))X+=pe;else break;fe=pe,N++}J+=N-1;const te=At.getFromCache(X,v,m,s);te+a>T&&(d+=At.addLine(c),b=!1,c="",a=0),c+=X,a+=te}}else{c.length>0&&(d+=At.addLine(c),c="",a=0);const z=k===R.length-1;d+=At.addLine(L,!z),b=!1,c="",a=0}else V+a>T&&(b=!1,d+=At.addLine(c),c="",a=0),(c.length>0||!At.isBreakingSpace(L)||b)&&(c+=L,a+=V)}return d+=At.addLine(c,!1),d}static addLine(e,t=!0){return e=At.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,r,s){let a=r[e];return typeof a!="number"&&(a=At._measureText(e,t,s)+t,r[e]=a),a}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const r=e[t];if(!At.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:At._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:At._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let r="";if(typeof e!="string")return t;for(let s=0;s<e.length;s++){const a=e[s],c=e[s+1];if(At.isBreakingSpace(a,c)||At.isNewline(a)){r!==""&&(t.push(r),r=""),t.push(a);continue}r+=a}return r!==""&&t.push(r),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,r,s,a){return!0}static wordWrapSplit(e){return At.graphemeSegmenter(e)}static measureFont(e){if(At._fonts[e])return At._fonts[e];const t={ascent:0,descent:0,fontSize:0},r=At._canvas,s=At._context;s.font=e;const a=At.METRICS_STRING+At.BASELINE_SYMBOL,c=Math.ceil(s.measureText(a).width);let d=Math.ceil(s.measureText(At.BASELINE_SYMBOL).width);const m=Math.ceil(At.HEIGHT_MULTIPLIER*d);if(d=d*At.BASELINE_MULTIPLIER|0,c===0||m===0)return At._fonts[e]=t,t;r.width=c,r.height=m,s.fillStyle="#f00",s.fillRect(0,0,c,m),s.font=e,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(a,0,d);const v=s.getImageData(0,0,c,m).data,w=v.length,f=c*4;let y=0,b=0,T=!1;for(y=0;y<d;++y){for(let R=0;R<f;R+=4)if(v[b+R]!==255){T=!0;break}if(!T)b+=f;else break}for(t.ascent=d-y,b=w-f,T=!1,y=m;y>d;--y){for(let R=0;R<f;R+=4)if(v[b+R]!==255){T=!0;break}if(!T)b-=f;else break}return t.descent=y-d,t.fontSize=t.ascent+t.descent,At._fonts[e]=t,t}static clearMetrics(e=""){e?delete At._fonts[e]:At._fonts={}}static get _canvas(){if(!At.__canvas){let e;try{const t=new OffscreenCanvas(0,0);if(t.getContext("2d",hf)?.measureText)return At.__canvas=t,t;e=gt.ADAPTER.createCanvas()}catch{e=gt.ADAPTER.createCanvas()}e.width=e.height=10,At.__canvas=e}return At.__canvas}static get _context(){return At.__context||(At.__context=At._canvas.getContext("2d",hf)),At.__context}};Ra.METRICS_STRING="|q",Ra.BASELINE_SYMBOL="M",Ra.BASELINE_MULTIPLIER=1.4,Ra.HEIGHT_MULTIPLIER=2,Ra.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const n=new Intl.Segmenter;return e=>[...n.segment(e)].map(t=>t.segment)}return n=>[...n]})(),Ra.experimentalLetterSpacing=!1,Ra._fonts={},Ra._newlines=[10,13],Ra._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let uu=Ra;const CA=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],xw=class rd{constructor(e){this.styleID=0,this.reset(),ug(this,e,e)}clone(){const e={};return ug(e,this,rd.defaultStyle),new rd(e)}reset(){ug(this,rd.defaultStyle,rd.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=lg(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=lg(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){IA(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=lg(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let r=t.length-1;r>=0;r--){let s=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!CA.includes(s)&&(s=`"${s}"`),t[r]=s}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};xw.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:op.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let vu=xw;function lg(n){const e=kr.shared,t=r=>{const s=e.setValue(r);return s.alpha===1?s.toHex():s.toRgbaString()};return Array.isArray(n)?n.map(t):t(n)}function IA(n,e){if(!Array.isArray(n)||!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(n[t]!==e[t])return!1;return!0}function ug(n,e,t){for(const r in t)Array.isArray(e[r])?n[r]=e[r].slice():n[r]=e[r]}const PA={texture:!0,children:!1,baseTexture:!0},ww=class ny extends po{constructor(e,t,r){let s=!1;r||(r=gt.ADAPTER.createCanvas(),s=!0),r.width=3,r.height=3;const a=ut.from(r);a.orig=new zt,a.trim=new zt,super(a),this._ownCanvas=s,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=ny.defaultResolution??gt.RESOLUTION,this._autoResolution=ny.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return uu.experimentalLetterSpacing}static set experimentalLetterSpacing(e){Jt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),uu.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const r=this.context,s=uu.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=s.width,c=s.height,d=s.lines,m=s.lineHeight,v=s.lineWidths,w=s.maxLineWidth,f=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,a)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,c)+t.padding*2)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=t.strokeThickness,r.textBaseline=t.textBaseline,r.lineJoin=t.lineJoin,r.miterLimit=t.miterLimit;let y,b;const T=t.dropShadow?2:1;for(let R=0;R<T;++R){const k=t.dropShadow&&R===0,L=k?Math.ceil(Math.max(1,c)+t.padding*2):0,V=L*this._resolution;if(k){r.fillStyle="black",r.strokeStyle="black";const J=t.dropShadowColor,X=t.dropShadowBlur*this._resolution,fe=t.dropShadowDistance*this._resolution;r.shadowColor=kr.shared.setValue(J).setAlpha(t.dropShadowAlpha).toRgbaString(),r.shadowBlur=X,r.shadowOffsetX=Math.cos(t.dropShadowAngle)*fe,r.shadowOffsetY=Math.sin(t.dropShadowAngle)*fe+V}else r.fillStyle=this._generateFillStyle(t,d,s),r.strokeStyle=t.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let z=(m-f.fontSize)/2;m-f.fontSize<0&&(z=0);for(let J=0;J<d.length;J++)y=t.strokeThickness/2,b=t.strokeThickness/2+J*m+f.ascent+z,t.align==="right"?y+=w-v[J]:t.align==="center"&&(y+=(w-v[J])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(d[J],y+t.padding,b+t.padding-L,!0),t.fill&&this.drawLetterSpacing(d[J],y+t.padding,b+t.padding-L)}this.updateTexture()}drawLetterSpacing(e,t,r,s=!1){const a=this._style.letterSpacing;let c=!1;if(uu.experimentalLetterSpacingSupported&&(uu.experimentalLetterSpacing?(this.context.letterSpacing=`${a}px`,this.context.textLetterSpacing=`${a}px`,c=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),a===0||c){s?this.context.strokeText(e,t,r):this.context.fillText(e,t,r);return}let d=t;const m=uu.graphemeSegmenter(e);let v=this.context.measureText(e).width,w=0;for(let f=0;f<m.length;++f){const y=m[f];s?this.context.strokeText(y,d,r):this.context.fillText(y,d,r);let b="";for(let T=f+1;T<m.length;++T)b+=m[T];w=this.context.measureText(b).width,d+=v-w+a,v=w}}updateTexture(){const e=this.canvas;if(this._style.trim){const c=Hb(e);c.data&&(e.width=c.width,e.height=c.height,this.context.putImageData(c.data,0,0))}const t=this._texture,r=this._style,s=r.trim?0:r.padding,a=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),a.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,r){const s=e.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;let a;const c=e.dropShadow?e.dropShadowDistance:0,d=e.padding||0,m=this.canvas.width/this._resolution-c-d*2,v=this.canvas.height/this._resolution-c-d*2,w=s.slice(),f=e.fillGradientStops.slice();if(!f.length){const y=w.length+1;for(let b=1;b<y;++b)f.push(b/y)}if(w.unshift(s[0]),f.unshift(0),w.push(s[s.length-1]),f.push(1),e.fillGradientType===op.LINEAR_VERTICAL){a=this.context.createLinearGradient(m/2,d,m/2,v+d);const y=r.fontProperties.fontSize+e.strokeThickness;for(let b=0;b<t.length;b++){const T=r.lineHeight*(b-1)+y,R=r.lineHeight*b;let k=R;b>0&&T>R&&(k=(R+T)/2);const L=R+y,V=r.lineHeight*(b+1);let z=L;b+1<t.length&&V<L&&(z=(L+V)/2);const J=(z-k)/v;for(let X=0;X<w.length;X++){let fe=0;typeof f[X]=="number"?fe=f[X]:fe=X/w.length;let N=Math.min(1,Math.max(0,k/v+fe*J));N=Number(N.toFixed(5)),a.addColorStop(N,w[X])}}}else{a=this.context.createLinearGradient(d,v/2,m+d,v/2);const y=w.length+1;let b=1;for(let T=0;T<w.length;T++){let R;typeof f[T]=="number"?R=f[T]:R=b/y,a.addColorStop(R,w[T]),b++}}return a}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},PA,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=du(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=du(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof vu?this._style=e:this._style=new vu(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};ww.defaultAutoResolution=!0;let Ry=ww;class RA{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function kA(n,e){let t=!1;if(n?._textures?.length){for(let r=0;r<n._textures.length;r++)if(n._textures[r]instanceof ut){const s=n._textures[r].baseTexture;e.includes(s)||(e.push(s),t=!0)}}return t}function MA(n,e){if(n.baseTexture instanceof Gt){const t=n.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function OA(n,e){if(n._texture&&n._texture instanceof ut){const t=n._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function DA(n,e){return e instanceof Ry?(e.updateText(!0),!0):!1}function LA(n,e){if(e instanceof vu){const t=e.toFontString();return uu.measureFont(t),!0}return!1}function NA(n,e){if(n instanceof Ry){e.includes(n.style)||e.push(n.style),e.includes(n)||e.push(n);const t=n._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function FA(n,e){return n instanceof vu?(e.includes(n)||e.push(n),!0):!1}const bw=class Sw{constructor(e){this.limiter=new RA(Sw.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(NA),this.registerFindHook(FA),this.registerFindHook(kA),this.registerFindHook(MA),this.registerFindHook(OA),this.registerUploadHook(DA),this.registerUploadHook(LA)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,Gn.system.addOnce(this.tick,this,yu.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let r=0,s=this.uploadHooks.length;r<s;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Gn.system.addOnce(this.tick,this,yu.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,r=e.length;t<r;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Ni)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&Gn.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};bw.uploadsPerFrame=4;let iy=bw;Object.defineProperties(gt,{UPLOADS_PER_FRAME:{get(){return iy.uploadsPerFrame},set(n){Jt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),iy.uploadsPerFrame=n}}});function Ew(n,e){return e instanceof Gt?(e._glTextures[n.CONTEXT_UID]||n.texture.bind(e),!0):!1}function BA(n,e){if(!(e instanceof sh))return!1;const{geometry:t}=e;e.finishPoly(),t.updateBatches();const{batches:r}=t;for(let s=0;s<r.length;s++){const{texture:a}=r[s].style;a&&Ew(n,a.baseTexture)}return t.batchable||n.geometry.bind(t,e._resolveDirectShader(n)),!0}function UA(n,e){return n instanceof sh?(e.push(n),!0):!1}class Tw extends iy{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(UA),this.registerUploadHook(Ew),this.registerUploadHook(BA)}}Tw.extension={name:"prepare",type:ht.RendererSystem};Et.add(Tw);class ud extends po{constructor(e,t=!0){super(e[0]instanceof ut?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=t,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Gn.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Gn.shared.add(this.update,this,yu.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const t=this.animationSpeed*e,r=this.currentFrame;if(this._durations!==null){let s=this._currentTime%1*this._durations[this.currentFrame];for(s+=t/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];const a=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const t=[];for(let r=0;r<e.length;++r)t.push(ut.from(e[r]));return new ud(t)}static fromImages(e){const t=[];for(let r=0;r<e.length;++r)t.push(ut.from(e[r]));return new ud(t)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof ut)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Gn.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Gn.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const Xh=new er;class ky extends po{constructor(e,t=100,r=100){super(e),this.tileTransform=new ep,this._width=t,this._height=r,this.uvMatrix=this.texture.uvMatrix||new Ey(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const t=this._texture;!t||!t.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){const e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),s=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,r,s)}getLocalBounds(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new zt),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Xh);const t=this._width,r=this._height,s=-t*this.anchor._x;if(Xh.x>=s&&Xh.x<s+t){const a=-r*this.anchor._y;if(Xh.y>=a&&Xh.y<a+r)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,t){const r=e instanceof ut?e:ut.from(e,t);return new ky(r,t.width,t.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}}var jA=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,GA=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,zA=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,w_=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,HA=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const df=new Lr;class Aw extends tp{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new Mx,this.state=za.for2d()}contextChange(){const e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=Ba.from(w_,HA,t),this.shader=e.context.webGLVersion>1?Ba.from(GA,jA,t):Ba.from(w_,zA,t)}render(e){const t=this.renderer,r=this.quad;let s=r.vertices;s[0]=s[6]=e._width*-e.anchor.x,s[1]=s[3]=e._height*-e.anchor.y,s[2]=s[4]=e._width*(1-e.anchor.x),s[5]=s[7]=e._height*(1-e.anchor.y);const a=e.uvRespectAnchor?e.anchor.x:0,c=e.uvRespectAnchor?e.anchor.y:0;s=r.uvs,s[0]=s[6]=-a,s[1]=s[3]=-c,s[2]=s[4]=1-a,s[5]=s[7]=1-c,r.invalidate();const d=e._texture,m=d.baseTexture,v=m.alphaMode>0,w=e.tileTransform.localTransform,f=e.uvMatrix;let y=m.isPowerOfTwo&&d.frame.width===m.width&&d.frame.height===m.height;y&&(m._glTextures[t.CONTEXT_UID]?y=m.wrapMode!==xl.CLAMP:m.wrapMode===xl.CLAMP&&(m.wrapMode=xl.REPEAT));const b=y?this.simpleShader:this.shader,T=d.width,R=d.height,k=e._width,L=e._height;df.set(w.a*T/k,w.b*T/L,w.c*R/k,w.d*R/L,w.tx/k,w.ty/L),df.invert(),y?df.prepend(f.mapCoord):(b.uniforms.uMapCoord=f.mapCoord.toArray(!0),b.uniforms.uClampFrame=f.uClampFrame,b.uniforms.uClampOffset=f.uClampOffset),b.uniforms.uTransform=df.toArray(!0),b.uniforms.uColor=kr.shared.setValue(e.tint).premultiply(e.worldAlpha,v).toArray(b.uniforms.uColor),b.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),b.uniforms.uSampler=d,t.shader.bind(b),t.geometry.bind(r),this.state.blendMode=_x(e.blendMode,v),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Aw.extension={name:"tilingSprite",type:ht.RendererPlugin};Et.add(Aw);const Cw=class nd{constructor(e,t,r){this.linkedSheets=[],(e instanceof Gt||e instanceof ut)&&(e={texture:e,data:t,resolutionFilename:r});const{texture:s,data:a,resolutionFilename:c=null,cachePrefix:d=""}=e;this.cachePrefix=d,this._texture=s instanceof ut?s:null,this.baseTexture=s instanceof Gt?s:this._texture.baseTexture,this.textures={},this.animations={},this.data=a;const m=this.baseTexture.resource;this.resolution=this._updateResolution(c||(m?m.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let r=bl(e,null);return r===null&&(r=typeof t=="number"?t:parseFloat(t??"1")),r!==1&&this.baseTexture.setResolution(r),r}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=nd.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const r=nd.BATCH_SIZE;for(;t-e<r&&t<this._frameKeys.length;){const s=this._frameKeys[t],a=this._frames[s],c=a.frame;if(c){let d=null,m=null;const v=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,w=new zt(0,0,Math.floor(v.w)/this.resolution,Math.floor(v.h)/this.resolution);a.rotated?d=new zt(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.h)/this.resolution,Math.floor(c.w)/this.resolution):d=new zt(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(m=new zt(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution)),this.textures[s]=new ut(this.baseTexture,d,w,m,a.rotated?2:0,a.anchor,a.borders),ut.addToCache(this.textures[s],this.cachePrefix+s.toString())}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let r=0;r<e[t].length;r++){const s=e[t][r];this.animations[t].push(this.textures[s])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*nd.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*nd.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};Cw.BATCH_SIZE=1e3;let b_=Cw;const VA=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function Iw(n,e,t){const r={};if(n.forEach(s=>{r[s]=e}),Object.keys(e.textures).forEach(s=>{r[`${e.cachePrefix}${s}`]=e.textures[s]}),!t){const s=zn.dirname(n[0]);e.linkedSheets.forEach((a,c)=>{Object.assign(r,Iw([`${s}/${e.data.meta.related_multi_packs[c]}`],a,!0))})}return r}const WA={extension:ht.Asset,cache:{test:n=>n instanceof b_,getCacheableAssets:(n,e)=>Iw(n,e,!1)},resolver:{test:n=>{const e=n.split("?")[0].split("."),t=e.pop(),r=e.pop();return t==="json"&&VA.includes(r)},parse:n=>{const e=n.split(".");return{resolution:parseFloat(gt.RETINA_PREFIX.exec(n)?.[1]??"1"),format:e[e.length-2],src:n}}},loader:{name:"spritesheetLoader",extension:{type:ht.LoadParser,priority:Ko.Normal},async testParse(n,e){return zn.extname(e.src).toLowerCase()===".json"&&!!n.frames},async parse(n,e,t){const{texture:r,imageFilename:s,cachePrefix:a}=e?.data??{};let c=zn.dirname(e.src);c&&c.lastIndexOf("/")!==c.length-1&&(c+="/");let d;if(r&&r.baseTexture)d=r;else{const w=Jg(c+(s??n.meta.image),e.src);d=(await t.load([w]))[w]}const m=new b_({texture:d.baseTexture,data:n,resolutionFilename:e.src,cachePrefix:a});await m.parse();const v=n?.meta?.related_multi_packs;if(Array.isArray(v)){const w=[];for(const y of v){if(typeof y!="string")continue;let b=c+y;e.data?.ignoreMultiPack||(b=Jg(b,e.src),w.push(t.load({src:b,data:{ignoreMultiPack:!0}})))}const f=await Promise.all(w);m.linkedSheets=f,f.forEach(y=>{y.linkedSheets=[m].concat(m.linkedSheets.filter(b=>b!==y))})}return m},unload(n){n.destroy(!0)}}};Et.add(WA);class Hf{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Tf{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const t=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const a in t){const c=t[a].match(/^[a-z]+/gm)[0],d=t[a].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),m={};for(const v in d){const w=d[v].split("="),f=w[0],y=w[1].replace(/"/gm,""),b=parseFloat(y),T=isNaN(b)?y:b;m[f]=T}r[c].push(m)}const s=new Hf;return r.info.forEach(a=>s.info.push({face:a.face,size:parseInt(a.size,10)})),r.common.forEach(a=>s.common.push({lineHeight:parseInt(a.lineHeight,10)})),r.page.forEach(a=>s.page.push({id:parseInt(a.id,10),file:a.file})),r.char.forEach(a=>s.char.push({id:parseInt(a.id,10),page:parseInt(a.page,10),x:parseInt(a.x,10),y:parseInt(a.y,10),width:parseInt(a.width,10),height:parseInt(a.height,10),xoffset:parseInt(a.xoffset,10),yoffset:parseInt(a.yoffset,10),xadvance:parseInt(a.xadvance,10)})),r.kerning.forEach(a=>s.kerning.push({first:parseInt(a.first,10),second:parseInt(a.second,10),amount:parseInt(a.amount,10)})),r.distanceField.forEach(a=>s.distanceField.push({distanceRange:parseInt(a.distanceRange,10),fieldType:a.fieldType})),s}}class sy{static test(e){const t=e;return typeof e!="string"&&"getElementsByTagName"in e&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const t=new Hf,r=e.getElementsByTagName("info"),s=e.getElementsByTagName("common"),a=e.getElementsByTagName("page"),c=e.getElementsByTagName("char"),d=e.getElementsByTagName("kerning"),m=e.getElementsByTagName("distanceField");for(let v=0;v<r.length;v++)t.info.push({face:r[v].getAttribute("face"),size:parseInt(r[v].getAttribute("size"),10)});for(let v=0;v<s.length;v++)t.common.push({lineHeight:parseInt(s[v].getAttribute("lineHeight"),10)});for(let v=0;v<a.length;v++)t.page.push({id:parseInt(a[v].getAttribute("id"),10)||0,file:a[v].getAttribute("file")});for(let v=0;v<c.length;v++){const w=c[v];t.char.push({id:parseInt(w.getAttribute("id"),10),page:parseInt(w.getAttribute("page"),10)||0,x:parseInt(w.getAttribute("x"),10),y:parseInt(w.getAttribute("y"),10),width:parseInt(w.getAttribute("width"),10),height:parseInt(w.getAttribute("height"),10),xoffset:parseInt(w.getAttribute("xoffset"),10),yoffset:parseInt(w.getAttribute("yoffset"),10),xadvance:parseInt(w.getAttribute("xadvance"),10)})}for(let v=0;v<d.length;v++)t.kerning.push({first:parseInt(d[v].getAttribute("first"),10),second:parseInt(d[v].getAttribute("second"),10),amount:parseInt(d[v].getAttribute("amount"),10)});for(let v=0;v<m.length;v++)t.distanceField.push({fieldType:m[v].getAttribute("fieldType"),distanceRange:parseInt(m[v].getAttribute("distanceRange"),10)});return t}}class oy{static test(e){return typeof e=="string"&&e.includes("<font>")?sy.test(gt.ADAPTER.parseXML(e)):!1}static parse(e){return sy.parse(gt.ADAPTER.parseXML(e))}}const cg=[Tf,sy,oy];function $A(n){for(let e=0;e<cg.length;e++)if(cg[e].test(n))return cg[e];return null}function qA(n,e,t,r,s,a){const c=t.fill;if(Array.isArray(c)){if(c.length===1)return c[0]}else return c;let d;const m=t.dropShadow?t.dropShadowDistance:0,v=t.padding||0,w=n.width/r-m-v*2,f=n.height/r-m-v*2,y=c.slice(),b=t.fillGradientStops.slice();if(!b.length){const T=y.length+1;for(let R=1;R<T;++R)b.push(R/T)}if(y.unshift(c[0]),b.unshift(0),y.push(c[c.length-1]),b.push(1),t.fillGradientType===op.LINEAR_VERTICAL){d=e.createLinearGradient(w/2,v,w/2,f+v);let T=0;const R=(a.fontProperties.fontSize+t.strokeThickness)/f;for(let k=0;k<s.length;k++){const L=a.lineHeight*k;for(let V=0;V<y.length;V++){let z=0;typeof b[V]=="number"?z=b[V]:z=V/y.length;const J=L/f+z*R;let X=Math.max(T,J);X=Math.min(X,1),d.addColorStop(X,y[V]),T=X}}}else{d=e.createLinearGradient(v,f/2,w+v,f/2);const T=y.length+1;let R=1;for(let k=0;k<y.length;k++){let L;typeof b[k]=="number"?L=b[k]:L=R/T,d.addColorStop(L,y[k]),R++}}return d}function XA(n,e,t,r,s,a,c){const d=t.text,m=t.fontProperties;e.translate(r,s),e.scale(a,a);const v=c.strokeThickness/2,w=-(c.strokeThickness/2);if(e.font=c.toFontString(),e.lineWidth=c.strokeThickness,e.textBaseline=c.textBaseline,e.lineJoin=c.lineJoin,e.miterLimit=c.miterLimit,e.fillStyle=qA(n,e,c,a,[d],t),e.strokeStyle=c.stroke,c.dropShadow){const f=c.dropShadowColor,y=c.dropShadowBlur*a,b=c.dropShadowDistance*a;e.shadowColor=kr.shared.setValue(f).setAlpha(c.dropShadowAlpha).toRgbaString(),e.shadowBlur=y,e.shadowOffsetX=Math.cos(c.dropShadowAngle)*b,e.shadowOffsetY=Math.sin(c.dropShadowAngle)*b}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;c.stroke&&c.strokeThickness&&e.strokeText(d,v,w+t.lineHeight-m.descent),c.fill&&e.fillText(d,v,w+t.lineHeight-m.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Af(n){return n.codePointAt?n.codePointAt(0):n.charCodeAt(0)}function Pw(n){return Array.from?Array.from(n):n.split("")}function KA(n){typeof n=="string"&&(n=[n]);const e=[];for(let t=0,r=n.length;t<r;t++){const s=n[t];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);const a=s[0].charCodeAt(0),c=s[1].charCodeAt(0);if(c<a)throw new Error("[BitmapFont]: Invalid character range.");for(let d=a,m=c;d<=m;d++)e.push(String.fromCharCode(d))}else e.push(...Pw(s))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const au=class ka{constructor(e,t,r){const[s]=e.info,[a]=e.common,[c]=e.page,[d]=e.distanceField,m=bl(c.file),v={};this._ownsTextures=r,this.font=s.face,this.size=s.size,this.lineHeight=a.lineHeight/m,this.chars={},this.pageTextures=v;for(let w=0;w<e.page.length;w++){const{id:f,file:y}=e.page[w];v[f]=t instanceof Array?t[w]:t[y],d?.fieldType&&d.fieldType!=="none"&&(v[f].baseTexture.alphaMode=vs.NO_PREMULTIPLIED_ALPHA,v[f].baseTexture.mipmap=Ua.OFF)}for(let w=0;w<e.char.length;w++){const{id:f,page:y}=e.char[w];let{x:b,y:T,width:R,height:k,xoffset:L,yoffset:V,xadvance:z}=e.char[w];b/=m,T/=m,R/=m,k/=m,L/=m,V/=m,z/=m;const J=new zt(b+v[y].frame.x/m,T+v[y].frame.y/m,R,k);this.chars[f]={xOffset:L,yOffset:V,xAdvance:z,kerning:{},texture:new ut(v[y].baseTexture,J),page:y}}for(let w=0;w<e.kerning.length;w++){let{first:f,second:y,amount:b}=e.kerning[w];f/=m,y/=m,b/=m,this.chars[y]&&(this.chars[y].kerning[f]=b)}this.distanceFieldRange=d?.distanceRange,this.distanceFieldType=d?.fieldType?.toLowerCase()??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,r){let s;if(e instanceof Hf)s=e;else{const c=$A(e);if(!c)throw new Error("Unrecognized data format for font.");s=c.parse(e)}t instanceof ut&&(t=[t]);const a=new ka(s,t,r);return ka.available[a.font]=a,a}static uninstall(e){const t=ka.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete ka.available[e]}static from(e,t,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:s,padding:a,resolution:c,textureWidth:d,textureHeight:m,...v}=Object.assign({},ka.defaultOptions,r),w=KA(s),f=t instanceof vu?t:new vu(t),y=d,b=new Hf;b.info[0]={face:f.fontFamily,size:f.fontSize},b.common[0]={lineHeight:f.fontSize};let T=0,R=0,k,L,V,z=0;const J=[];for(let fe=0;fe<w.length;fe++){k||(k=gt.ADAPTER.createCanvas(),k.width=d,k.height=m,L=k.getContext("2d"),V=new Gt(k,{resolution:c,...v}),J.push(new ut(V)),b.page.push({id:J.length-1,file:""}));const N=w[fe],te=uu.measureText(N,f,!1,k),pe=te.width,Me=Math.ceil(te.height),Pe=Math.ceil((f.fontStyle==="italic"?2:1)*pe);if(R>=m-Me*c){if(R===0)throw new Error(`[BitmapFont] textureHeight ${m}px is too small (fontFamily: '${f.fontFamily}', fontSize: ${f.fontSize}px, char: '${N}')`);--fe,k=null,L=null,V=null,R=0,T=0,z=0;continue}if(z=Math.max(Me+te.fontProperties.descent,z),Pe*c+T>=y){if(T===0)throw new Error(`[BitmapFont] textureWidth ${d}px is too small (fontFamily: '${f.fontFamily}', fontSize: ${f.fontSize}px, char: '${N}')`);--fe,R+=z*c,R=Math.ceil(R),T=0,z=0;continue}XA(k,L,te,T,R,c,f);const ve=Af(te.text);b.char.push({id:ve,page:J.length-1,x:T/c,y:R/c,width:Pe,height:Me,xoffset:0,yoffset:0,xadvance:pe-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0)}),T+=(Pe+2*a)*c,T=Math.ceil(T)}if(!r?.skipKerning)for(let fe=0,N=w.length;fe<N;fe++){const te=w[fe];for(let pe=0;pe<N;pe++){const Me=w[pe],Pe=L.measureText(te).width,ve=L.measureText(Me).width,_e=L.measureText(te+Me).width-(Pe+ve);_e&&b.kerning.push({first:Af(te),second:Af(Me),amount:_e})}}const X=new ka(b,J,!0);return ka.available[e]!==void 0&&ka.uninstall(e),ka.available[e]=X,X}};au.ALPHA=[["a","z"],["A","Z"]," "],au.NUMERIC=[["0","9"]],au.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],au.ASCII=[[" ","~"]],au.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:au.ALPHANUMERIC},au.available={};let lu=au;var YA=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,QA=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const S_=[],E_=[],T_=[],Rw=class kw extends Ni{constructor(e,t={}){super();const{align:r,tint:s,maxWidth:a,letterSpacing:c,fontName:d,fontSize:m}=Object.assign({},kw.styleDefaults,t);if(!lu.available[d])throw new Error(`Missing BitmapFont "${d}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tintColor=new kr(s),this._font=void 0,this._fontName=d,this._fontSize=m,this.text=e,this._maxWidth=a,this._maxLineHeight=0,this._letterSpacing=c,this._anchor=new La(()=>{this.dirty=!0},this,0,0),this._roundPixels=gt.ROUND_PIXELS,this.dirty=!0,this._resolution=gt.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const e=lu.available[this._fontName],t=this.fontSize,r=t/e.size,s=new er,a=[],c=[],d=[],m=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",v=Pw(m),w=this._maxWidth*e.size/t,f=e.distanceFieldType==="none"?S_:E_;let y=null,b=0,T=0,R=0,k=-1,L=0,V=0,z=0,J=0;for(let Pe=0;Pe<v.length;Pe++){const ve=v[Pe],_e=Af(ve);if(/(?:\s)/.test(ve)&&(k=Pe,L=b,J++),ve==="\r"||ve===`
`){c.push(b),d.push(-1),T=Math.max(T,b),++R,++V,s.x=0,s.y+=e.lineHeight,y=null,J=0;continue}const we=e.chars[_e];if(!we)continue;y&&we.kerning[y]&&(s.x+=we.kerning[y]);const Xe=T_.pop()||{texture:ut.EMPTY,line:0,charCode:0,prevSpaces:0,position:new er};Xe.texture=we.texture,Xe.line=R,Xe.charCode=_e,Xe.position.x=Math.round(s.x+we.xOffset+this._letterSpacing/2),Xe.position.y=Math.round(s.y+we.yOffset),Xe.prevSpaces=J,a.push(Xe),b=Xe.position.x+Math.max(we.xAdvance-we.xOffset,we.texture.orig.width),s.x+=we.xAdvance+this._letterSpacing,z=Math.max(z,we.yOffset+we.texture.height),y=_e,k!==-1&&w>0&&s.x>w&&(++V,eh(a,1+k-V,1+Pe-k),Pe=k,k=-1,c.push(L),d.push(a.length>0?a[a.length-1].prevSpaces:0),T=Math.max(T,L),R++,s.x=0,s.y+=e.lineHeight,y=null,J=0)}const X=v[v.length-1];X!=="\r"&&X!==`
`&&(/(?:\s)/.test(X)&&(b=L),c.push(b),T=Math.max(T,b),d.push(-1));const fe=[];for(let Pe=0;Pe<=R;Pe++){let ve=0;this._align==="right"?ve=T-c[Pe]:this._align==="center"?ve=(T-c[Pe])/2:this._align==="justify"&&(ve=d[Pe]<0?0:(T-c[Pe])/d[Pe]),fe.push(ve)}const N=a.length,te={},pe=[],Me=this._activePagesMeshData;f.push(...Me);for(let Pe=0;Pe<N;Pe++){const ve=a[Pe].texture,_e=ve.baseTexture.uid;if(!te[_e]){let we=f.pop();if(!we){const H=new sp;let W,D;e.distanceFieldType==="none"?(W=new ld(ut.EMPTY),D=Dt.NORMAL):(W=new ld(ut.EMPTY,{program:_l.from(QA,YA),uniforms:{uFWidth:0}}),D=Dt.NORMAL_NPM);const Y=new ad(H,W);Y.blendMode=D,we={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Y,vertices:null,uvs:null,indices:null}}we.index=0,we.indexCount=0,we.vertexCount=0,we.uvsCount=0,we.total=0;const{_textureCache:Xe}=this;Xe[_e]=Xe[_e]||new ut(ve.baseTexture),we.mesh.texture=Xe[_e],we.mesh.tint=this._tintColor.value,pe.push(we),te[_e]=we}te[_e].total++}for(let Pe=0;Pe<Me.length;Pe++)pe.includes(Me[Pe])||this.removeChild(Me[Pe].mesh);for(let Pe=0;Pe<pe.length;Pe++)pe[Pe].mesh.parent!==this&&this.addChild(pe[Pe].mesh);this._activePagesMeshData=pe;for(const Pe in te){const ve=te[Pe],_e=ve.total;if(!(ve.indices?.length>6*_e)||ve.vertices.length<ad.BATCHABLE_SIZE*2)ve.vertices=new Float32Array(8*_e),ve.uvs=new Float32Array(8*_e),ve.indices=new Uint16Array(6*_e);else{const we=ve.total,Xe=ve.vertices;for(let H=we*4*2;H<Xe.length;H++)Xe[H]=0}ve.mesh.size=6*_e}for(let Pe=0;Pe<N;Pe++){const ve=a[Pe];let _e=ve.position.x+fe[ve.line]*(this._align==="justify"?ve.prevSpaces:1);this._roundPixels&&(_e=Math.round(_e));const we=_e*r,Xe=ve.position.y*r,H=ve.texture,W=te[H.baseTexture.uid],D=H.frame,Y=H._uvs,G=W.index++;W.indices[G*6+0]=0+G*4,W.indices[G*6+1]=1+G*4,W.indices[G*6+2]=2+G*4,W.indices[G*6+3]=0+G*4,W.indices[G*6+4]=2+G*4,W.indices[G*6+5]=3+G*4,W.vertices[G*8+0]=we,W.vertices[G*8+1]=Xe,W.vertices[G*8+2]=we+D.width*r,W.vertices[G*8+3]=Xe,W.vertices[G*8+4]=we+D.width*r,W.vertices[G*8+5]=Xe+D.height*r,W.vertices[G*8+6]=we,W.vertices[G*8+7]=Xe+D.height*r,W.uvs[G*8+0]=Y.x0,W.uvs[G*8+1]=Y.y0,W.uvs[G*8+2]=Y.x1,W.uvs[G*8+3]=Y.y1,W.uvs[G*8+4]=Y.x2,W.uvs[G*8+5]=Y.y2,W.uvs[G*8+6]=Y.x3,W.uvs[G*8+7]=Y.y3}this._textWidth=T*r,this._textHeight=(s.y+e.lineHeight)*r;for(const Pe in te){const ve=te[Pe];if(this.anchor.x!==0||this.anchor.y!==0){let H=0;const W=this._textWidth*this.anchor.x,D=this._textHeight*this.anchor.y;for(let Y=0;Y<ve.total;Y++)ve.vertices[H++]-=W,ve.vertices[H++]-=D,ve.vertices[H++]-=W,ve.vertices[H++]-=D,ve.vertices[H++]-=W,ve.vertices[H++]-=D,ve.vertices[H++]-=W,ve.vertices[H++]-=D}this._maxLineHeight=z*r;const _e=ve.mesh.geometry.getBuffer("aVertexPosition"),we=ve.mesh.geometry.getBuffer("aTextureCoord"),Xe=ve.mesh.geometry.getIndex();_e.data=ve.vertices,we.data=ve.uvs,Xe.data=ve.indices,_e.update(),we.update(),Xe.update()}for(let Pe=0;Pe<a.length;Pe++)T_.push(a[Pe]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:r,size:s}=lu.available[this._fontName];if(r!=="none"){const{a,b:c,c:d,d:m}=this.worldTransform,v=Math.sqrt(a*a+c*c),w=Math.sqrt(d*d+m*m),f=(Math.abs(v)+Math.abs(w))/2,y=this.fontSize/s,b=e._view.resolution;for(const T of this._activePagesMeshData)T.mesh.shader.uniforms.uFWidth=f*t*y*b}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=lu.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!lu.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??lu.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,r=lu.available[this._fontName].distanceFieldType==="none"?S_:E_;r.push(...this._activePagesMeshData);for(const s of this._activePagesMeshData)this.removeChild(s.mesh);this._activePagesMeshData=[],r.filter(s=>t[s.mesh.texture.baseTexture.uid]).forEach(s=>{s.mesh.texture=ut.EMPTY});for(const s in t)t[s].destroy(),delete t[s];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};Rw.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let ZA=Rw;const JA=[".xml",".fnt"],eC={extension:{type:ht.LoadParser,priority:Ko.Normal},name:"loadBitmapFont",test(n){return JA.includes(zn.extname(n).toLowerCase())},async testParse(n){return Tf.test(n)||oy.test(n)},async parse(n,e,t){const r=Tf.test(n)?Tf.parse(n):oy.parse(n),{src:s}=e,{page:a}=r,c=[];for(let v=0;v<a.length;++v){const w=a[v].file;let f=zn.join(zn.dirname(s),w);f=Jg(f,s),c.push(f)}const d=await t.load(c),m=c.map(v=>d[v]);return lu.install(r,m,!0)},async load(n,e){return(await gt.ADAPTER.fetch(n)).text()},unload(n){n.destroy()}};Et.add(eC);const ay=class Xc extends vu{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new Xc(Object.keys(Xc.defaultOptions).reduce((t,r)=>({...t,[r]:e[r]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete Xc.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:r}=Xc;if(r[e]){const s=r[e];return this._fonts.push(s),s.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return gt.ADAPTER.fetch(e).then(s=>s.blob()).then(async s=>new Promise((a,c)=>{const d=URL.createObjectURL(s),m=new FileReader;m.onload=()=>a([d,m.result]),m.onerror=c,m.readAsDataURL(s)})).then(async([s,a])=>{const c=Object.assign({family:zn.basename(e,zn.extname(e)),weight:"normal",style:"normal",display:"auto",src:s,dataSrc:a,refs:1,originalUrl:e,fontFace:null},t);r[e]=c,this._fonts.push(c),this.styleID++;const d=new FontFace(c.family,`url(${c.src})`,{weight:c.weight,style:c.style,display:c.display});c.fontFace=d,await d.load(),document.fonts.add(d),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(r=>!this._overrides.includes(r));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(r=>this._overrides.includes(r));t.length>0&&(this._overrides=this._overrides.filter(r=>!t.includes(r)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style};
                font-display: ${t.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=Fb(e)),typeof e=="number"?Nb(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,r=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),s=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const a=`${r}px ${s}px`;return this.dropShadowBlur>0?`text-shadow: ${a} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${a} ${e}`}reset(){Object.assign(this,Xc.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=gt.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};ay.availableFonts={},ay.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let hg=ay;const ff=class Kc extends po{constructor(e="",t={}){super(ut.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const r=new Image,s=ut.from(r,{scaleMode:gt.SCALE_MODE,resourceOptions:{autoLoad:!1}});s.orig=new zt,s.trim=new zt,this.texture=s;const a="http://www.w3.org/2000/svg",c="http://www.w3.org/1999/xhtml",d=document.createElementNS(a,"svg"),m=document.createElementNS(a,"foreignObject"),v=document.createElementNS(c,"div"),w=document.createElementNS(c,"style");m.setAttribute("width","10000"),m.setAttribute("height","10000"),m.style.overflow="hidden",d.appendChild(m),this.maxWidth=Kc.defaultMaxWidth,this.maxHeight=Kc.defaultMaxHeight,this._domElement=v,this._styleElement=w,this._svgRoot=d,this._foreignObject=m,this._foreignObject.appendChild(w),this._foreignObject.appendChild(v),this._image=r,this._loadImage=new Image,this._autoResolution=Kc.defaultAutoResolution,this._resolution=Kc.defaultResolution??gt.RESOLUTION,this.text=e,this.style=t}measureText(e){const{text:t,style:r,resolution:s}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:r.toCSS(s)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);const a=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:c,height:d}=a;(c>this.maxWidth||d>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const m=Math.min(this.maxWidth,Math.ceil(c)),v=Math.min(this.maxHeight,Math.ceil(d));return this._svgRoot.setAttribute("width",m.toString()),this._svgRoot.setAttribute("height",v.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(s)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:m+r.padding*2,height:v+r.padding*2}}async updateText(e=!0){const{style:t,_image:r,_loadImage:s}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:a,height:c}=this.measureText();r.width=s.width=Math.ceil(Math.max(1,a)),r.height=s.height=Math.ceil(Math.max(1,c)),this._updateID++;const d=this._updateID;await new Promise(m=>{s.onload=async()=>{if(d<this._updateID){m();return}await t.onBeforeDraw(),r.src=s.src,s.onload=null,s.src="",this.updateTexture(),m()};const v=new XMLSerializer().serializeToString(this._svgRoot);s.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(v)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:r,resolution:s}=this,{padding:a}=e,{baseTexture:c}=t;t.trim.width=t._frame.width=r.width/s,t.trim.height=t._frame.height=r.height/s,t.trim.x=-a,t.trim.y=-a,t.orig.width=t._frame.width-a*2,t.orig.height=t._frame.height-a*2,this._onTextureUpdate(),c.setRealSize(r.width,r.height,s),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},Kc.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=t,this._svgRoot?.remove(),this._svgRoot=t,this._domElement?.remove(),this._domElement=t,this._foreignObject?.remove(),this._foreignObject=t,this._styleElement?.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=du(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=du(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof hg?(this.ownsStyle=!1,this._style=e):e instanceof vu?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=hg.from(e)):(this.ownsStyle=!0,this._style=new hg(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};ff.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},ff.defaultMaxWidth=2024,ff.defaultMaxHeight=2024,ff.defaultAutoResolution=!0;class El{static instance;textures=new Map;animations=new Map;stateAssets=new Map;static getInstance(){return this.instance||(this.instance=new El),this.instance}async loadManifest(e,t,r){if(this.stateAssets.has(t)&&this.stateAssets.get(t).size>0){r&&r(1);return}const a=await(await fetch(e)).json();this.stateAssets.has(t)||this.stateAssets.set(t,new Set);const c=this.stateAssets.get(t),d=Object.keys(a.spritesheets||{}).length+Object.keys(a.images||{}).length;let m=0;const v=()=>{m++,r&&r(m/d)};for(const[w,f]of Object.entries(a.spritesheets)){const y=await cc.load(f.url);c.add(f.url);for(const[b,T]of Object.entries(f.frames)){const R=new ut(y,new zt(T.x,T.y,T.w,T.h));this.textures.set(b,R),c.add(b)}for(const[b,T]of Object.entries(f.animations)){const R=`${w}_${b}`,k=T.map(L=>this.textures.get(L)).filter(L=>!!L);this.animations.set(R,k),c.add(R)}v()}if(a.images)for(const[w,f]of Object.entries(a.images)){const y=await cc.load(f);this.textures.set(w,y),c.add(w),c.add(f),v()}}uncacheByState(e){const t=this.stateAssets.get(e);t&&(t.forEach(r=>{(r.includes(".")||r.includes("/"))&&cc.unload(r),this.textures.delete(r),this.animations.delete(r)}),this.stateAssets.delete(e))}getTexture(e){return this.textures.get(e)||ut.WHITE}getAnimation(e){return this.animations.get(e)||[]}}var dg={};var A_;function tC(){return A_||(A_=1,(function(n){(function(){var e=function(){this.init()};e.prototype={init:function(){var f=this||t;return f._counter=1e3,f._html5AudioPool=[],f.html5PoolSize=10,f._codecs={},f._howls=[],f._muted=!1,f._volume=1,f._canPlayEvent="canplaythrough",f._navigator=typeof window<"u"&&window.navigator?window.navigator:null,f.masterGain=null,f.noAudio=!1,f.usingWebAudio=!0,f.autoSuspend=!0,f.ctx=null,f.autoUnlock=!0,f._setup(),f},volume:function(f){var y=this||t;if(f=parseFloat(f),y.ctx||w(),typeof f<"u"&&f>=0&&f<=1){if(y._volume=f,y._muted)return y;y.usingWebAudio&&y.masterGain.gain.setValueAtTime(f,t.ctx.currentTime);for(var b=0;b<y._howls.length;b++)if(!y._howls[b]._webAudio)for(var T=y._howls[b]._getSoundIds(),R=0;R<T.length;R++){var k=y._howls[b]._soundById(T[R]);k&&k._node&&(k._node.volume=k._volume*f)}return y}return y._volume},mute:function(f){var y=this||t;y.ctx||w(),y._muted=f,y.usingWebAudio&&y.masterGain.gain.setValueAtTime(f?0:y._volume,t.ctx.currentTime);for(var b=0;b<y._howls.length;b++)if(!y._howls[b]._webAudio)for(var T=y._howls[b]._getSoundIds(),R=0;R<T.length;R++){var k=y._howls[b]._soundById(T[R]);k&&k._node&&(k._node.muted=f?!0:k._muted)}return y},stop:function(){for(var f=this||t,y=0;y<f._howls.length;y++)f._howls[y].stop();return f},unload:function(){for(var f=this||t,y=f._howls.length-1;y>=0;y--)f._howls[y].unload();return f.usingWebAudio&&f.ctx&&typeof f.ctx.close<"u"&&(f.ctx.close(),f.ctx=null,w()),f},codecs:function(f){return(this||t)._codecs[f.replace(/^x-/,"")]},_setup:function(){var f=this||t;if(f.state=f.ctx&&f.ctx.state||"suspended",f._autoSuspend(),!f.usingWebAudio)if(typeof Audio<"u")try{var y=new Audio;typeof y.oncanplaythrough>"u"&&(f._canPlayEvent="canplay")}catch{f.noAudio=!0}else f.noAudio=!0;try{var y=new Audio;y.muted&&(f.noAudio=!0)}catch{}return f.noAudio||f._setupCodecs(),f},_setupCodecs:function(){var f=this||t,y=null;try{y=typeof Audio<"u"?new Audio:null}catch{return f}if(!y||typeof y.canPlayType!="function")return f;var b=y.canPlayType("audio/mpeg;").replace(/^no$/,""),T=f._navigator?f._navigator.userAgent:"",R=T.match(/OPR\/(\d+)/g),k=R&&parseInt(R[0].split("/")[1],10)<33,L=T.indexOf("Safari")!==-1&&T.indexOf("Chrome")===-1,V=T.match(/Version\/(.*?) /),z=L&&V&&parseInt(V[1],10)<15;return f._codecs={mp3:!!(!k&&(b||y.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!b,opus:!!y.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!y.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!y.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(y.canPlayType('audio/wav; codecs="1"')||y.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!y.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!y.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(y.canPlayType("audio/x-m4a;")||y.canPlayType("audio/m4a;")||y.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(y.canPlayType("audio/x-m4b;")||y.canPlayType("audio/m4b;")||y.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(y.canPlayType("audio/x-mp4;")||y.canPlayType("audio/mp4;")||y.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!z&&y.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!z&&y.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!y.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(y.canPlayType("audio/x-flac;")||y.canPlayType("audio/flac;")).replace(/^no$/,"")},f},_unlockAudio:function(){var f=this||t;if(!(f._audioUnlocked||!f.ctx)){f._audioUnlocked=!1,f.autoUnlock=!1,!f._mobileUnloaded&&f.ctx.sampleRate!==44100&&(f._mobileUnloaded=!0,f.unload()),f._scratchBuffer=f.ctx.createBuffer(1,1,22050);var y=function(b){for(;f._html5AudioPool.length<f.html5PoolSize;)try{var T=new Audio;T._unlocked=!0,f._releaseHtml5Audio(T)}catch{f.noAudio=!0;break}for(var R=0;R<f._howls.length;R++)if(!f._howls[R]._webAudio)for(var k=f._howls[R]._getSoundIds(),L=0;L<k.length;L++){var V=f._howls[R]._soundById(k[L]);V&&V._node&&!V._node._unlocked&&(V._node._unlocked=!0,V._node.load())}f._autoResume();var z=f.ctx.createBufferSource();z.buffer=f._scratchBuffer,z.connect(f.ctx.destination),typeof z.start>"u"?z.noteOn(0):z.start(0),typeof f.ctx.resume=="function"&&f.ctx.resume(),z.onended=function(){z.disconnect(0),f._audioUnlocked=!0,document.removeEventListener("touchstart",y,!0),document.removeEventListener("touchend",y,!0),document.removeEventListener("click",y,!0),document.removeEventListener("keydown",y,!0);for(var J=0;J<f._howls.length;J++)f._howls[J]._emit("unlock")}};return document.addEventListener("touchstart",y,!0),document.addEventListener("touchend",y,!0),document.addEventListener("click",y,!0),document.addEventListener("keydown",y,!0),f}},_obtainHtml5Audio:function(){var f=this||t;if(f._html5AudioPool.length)return f._html5AudioPool.pop();var y=new Audio().play();return y&&typeof Promise<"u"&&(y instanceof Promise||typeof y.then=="function")&&y.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(f){var y=this||t;return f._unlocked&&y._html5AudioPool.push(f),y},_autoSuspend:function(){var f=this;if(!(!f.autoSuspend||!f.ctx||typeof f.ctx.suspend>"u"||!t.usingWebAudio)){for(var y=0;y<f._howls.length;y++)if(f._howls[y]._webAudio){for(var b=0;b<f._howls[y]._sounds.length;b++)if(!f._howls[y]._sounds[b]._paused)return f}return f._suspendTimer&&clearTimeout(f._suspendTimer),f._suspendTimer=setTimeout(function(){if(f.autoSuspend){f._suspendTimer=null,f.state="suspending";var T=function(){f.state="suspended",f._resumeAfterSuspend&&(delete f._resumeAfterSuspend,f._autoResume())};f.ctx.suspend().then(T,T)}},3e4),f}},_autoResume:function(){var f=this;if(!(!f.ctx||typeof f.ctx.resume>"u"||!t.usingWebAudio))return f.state==="running"&&f.ctx.state!=="interrupted"&&f._suspendTimer?(clearTimeout(f._suspendTimer),f._suspendTimer=null):f.state==="suspended"||f.state==="running"&&f.ctx.state==="interrupted"?(f.ctx.resume().then(function(){f.state="running";for(var y=0;y<f._howls.length;y++)f._howls[y]._emit("resume")}),f._suspendTimer&&(clearTimeout(f._suspendTimer),f._suspendTimer=null)):f.state==="suspending"&&(f._resumeAfterSuspend=!0),f}};var t=new e,r=function(f){var y=this;if(!f.src||f.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}y.init(f)};r.prototype={init:function(f){var y=this;return t.ctx||w(),y._autoplay=f.autoplay||!1,y._format=typeof f.format!="string"?f.format:[f.format],y._html5=f.html5||!1,y._muted=f.mute||!1,y._loop=f.loop||!1,y._pool=f.pool||5,y._preload=typeof f.preload=="boolean"||f.preload==="metadata"?f.preload:!0,y._rate=f.rate||1,y._sprite=f.sprite||{},y._src=typeof f.src!="string"?f.src:[f.src],y._volume=f.volume!==void 0?f.volume:1,y._xhr={method:f.xhr&&f.xhr.method?f.xhr.method:"GET",headers:f.xhr&&f.xhr.headers?f.xhr.headers:null,withCredentials:f.xhr&&f.xhr.withCredentials?f.xhr.withCredentials:!1},y._duration=0,y._state="unloaded",y._sounds=[],y._endTimers={},y._queue=[],y._playLock=!1,y._onend=f.onend?[{fn:f.onend}]:[],y._onfade=f.onfade?[{fn:f.onfade}]:[],y._onload=f.onload?[{fn:f.onload}]:[],y._onloaderror=f.onloaderror?[{fn:f.onloaderror}]:[],y._onplayerror=f.onplayerror?[{fn:f.onplayerror}]:[],y._onpause=f.onpause?[{fn:f.onpause}]:[],y._onplay=f.onplay?[{fn:f.onplay}]:[],y._onstop=f.onstop?[{fn:f.onstop}]:[],y._onmute=f.onmute?[{fn:f.onmute}]:[],y._onvolume=f.onvolume?[{fn:f.onvolume}]:[],y._onrate=f.onrate?[{fn:f.onrate}]:[],y._onseek=f.onseek?[{fn:f.onseek}]:[],y._onunlock=f.onunlock?[{fn:f.onunlock}]:[],y._onresume=[],y._webAudio=t.usingWebAudio&&!y._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(y),y._autoplay&&y._queue.push({event:"play",action:function(){y.play()}}),y._preload&&y._preload!=="none"&&y.load(),y},load:function(){var f=this,y=null;if(t.noAudio){f._emit("loaderror",null,"No audio support.");return}typeof f._src=="string"&&(f._src=[f._src]);for(var b=0;b<f._src.length;b++){var T,R;if(f._format&&f._format[b])T=f._format[b];else{if(R=f._src[b],typeof R!="string"){f._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}T=/^data:audio\/([^;,]+);/i.exec(R),T||(T=/\.([^.]+)$/.exec(R.split("?",1)[0])),T&&(T=T[1].toLowerCase())}if(T||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),T&&t.codecs(T)){y=f._src[b];break}}if(!y){f._emit("loaderror",null,"No codec support for selected audio sources.");return}return f._src=y,f._state="loading",window.location.protocol==="https:"&&y.slice(0,5)==="http:"&&(f._html5=!0,f._webAudio=!1),new s(f),f._webAudio&&c(f),f},play:function(f,y){var b=this,T=null;if(typeof f=="number")T=f,f=null;else{if(typeof f=="string"&&b._state==="loaded"&&!b._sprite[f])return null;if(typeof f>"u"&&(f="__default",!b._playLock)){for(var R=0,k=0;k<b._sounds.length;k++)b._sounds[k]._paused&&!b._sounds[k]._ended&&(R++,T=b._sounds[k]._id);R===1?f=null:T=null}}var L=T?b._soundById(T):b._inactiveSound();if(!L)return null;if(T&&!f&&(f=L._sprite||"__default"),b._state!=="loaded"){L._sprite=f,L._ended=!1;var V=L._id;return b._queue.push({event:"play",action:function(){b.play(V)}}),V}if(T&&!L._paused)return y||b._loadQueue("play"),L._id;b._webAudio&&t._autoResume();var z=Math.max(0,L._seek>0?L._seek:b._sprite[f][0]/1e3),J=Math.max(0,(b._sprite[f][0]+b._sprite[f][1])/1e3-z),X=J*1e3/Math.abs(L._rate),fe=b._sprite[f][0]/1e3,N=(b._sprite[f][0]+b._sprite[f][1])/1e3;L._sprite=f,L._ended=!1;var te=function(){L._paused=!1,L._seek=z,L._start=fe,L._stop=N,L._loop=!!(L._loop||b._sprite[f][2])};if(z>=N){b._ended(L);return}var pe=L._node;if(b._webAudio){var Me=function(){b._playLock=!1,te(),b._refreshBuffer(L);var we=L._muted||b._muted?0:L._volume;pe.gain.setValueAtTime(we,t.ctx.currentTime),L._playStart=t.ctx.currentTime,typeof pe.bufferSource.start>"u"?L._loop?pe.bufferSource.noteGrainOn(0,z,86400):pe.bufferSource.noteGrainOn(0,z,J):L._loop?pe.bufferSource.start(0,z,86400):pe.bufferSource.start(0,z,J),X!==1/0&&(b._endTimers[L._id]=setTimeout(b._ended.bind(b,L),X)),y||setTimeout(function(){b._emit("play",L._id),b._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?Me():(b._playLock=!0,b.once("resume",Me),b._clearTimer(L._id))}else{var Pe=function(){pe.currentTime=z,pe.muted=L._muted||b._muted||t._muted||pe.muted,pe.volume=L._volume*t.volume(),pe.playbackRate=L._rate;try{var we=pe.play();if(we&&typeof Promise<"u"&&(we instanceof Promise||typeof we.then=="function")?(b._playLock=!0,te(),we.then(function(){b._playLock=!1,pe._unlocked=!0,y?b._loadQueue():b._emit("play",L._id)}).catch(function(){b._playLock=!1,b._emit("playerror",L._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),L._ended=!0,L._paused=!0})):y||(b._playLock=!1,te(),b._emit("play",L._id)),pe.playbackRate=L._rate,pe.paused){b._emit("playerror",L._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}f!=="__default"||L._loop?b._endTimers[L._id]=setTimeout(b._ended.bind(b,L),X):(b._endTimers[L._id]=function(){b._ended(L),pe.removeEventListener("ended",b._endTimers[L._id],!1)},pe.addEventListener("ended",b._endTimers[L._id],!1))}catch(Xe){b._emit("playerror",L._id,Xe)}};pe.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(pe.src=b._src,pe.load());var ve=window&&window.ejecta||!pe.readyState&&t._navigator.isCocoonJS;if(pe.readyState>=3||ve)Pe();else{b._playLock=!0,b._state="loading";var _e=function(){b._state="loaded",Pe(),pe.removeEventListener(t._canPlayEvent,_e,!1)};pe.addEventListener(t._canPlayEvent,_e,!1),b._clearTimer(L._id)}}return L._id},pause:function(f){var y=this;if(y._state!=="loaded"||y._playLock)return y._queue.push({event:"pause",action:function(){y.pause(f)}}),y;for(var b=y._getSoundIds(f),T=0;T<b.length;T++){y._clearTimer(b[T]);var R=y._soundById(b[T]);if(R&&!R._paused&&(R._seek=y.seek(b[T]),R._rateSeek=0,R._paused=!0,y._stopFade(b[T]),R._node))if(y._webAudio){if(!R._node.bufferSource)continue;typeof R._node.bufferSource.stop>"u"?R._node.bufferSource.noteOff(0):R._node.bufferSource.stop(0),y._cleanBuffer(R._node)}else(!isNaN(R._node.duration)||R._node.duration===1/0)&&R._node.pause();arguments[1]||y._emit("pause",R?R._id:null)}return y},stop:function(f,y){var b=this;if(b._state!=="loaded"||b._playLock)return b._queue.push({event:"stop",action:function(){b.stop(f)}}),b;for(var T=b._getSoundIds(f),R=0;R<T.length;R++){b._clearTimer(T[R]);var k=b._soundById(T[R]);k&&(k._seek=k._start||0,k._rateSeek=0,k._paused=!0,k._ended=!0,b._stopFade(T[R]),k._node&&(b._webAudio?k._node.bufferSource&&(typeof k._node.bufferSource.stop>"u"?k._node.bufferSource.noteOff(0):k._node.bufferSource.stop(0),b._cleanBuffer(k._node)):(!isNaN(k._node.duration)||k._node.duration===1/0)&&(k._node.currentTime=k._start||0,k._node.pause(),k._node.duration===1/0&&b._clearSound(k._node))),y||b._emit("stop",k._id))}return b},mute:function(f,y){var b=this;if(b._state!=="loaded"||b._playLock)return b._queue.push({event:"mute",action:function(){b.mute(f,y)}}),b;if(typeof y>"u")if(typeof f=="boolean")b._muted=f;else return b._muted;for(var T=b._getSoundIds(y),R=0;R<T.length;R++){var k=b._soundById(T[R]);k&&(k._muted=f,k._interval&&b._stopFade(k._id),b._webAudio&&k._node?k._node.gain.setValueAtTime(f?0:k._volume,t.ctx.currentTime):k._node&&(k._node.muted=t._muted?!0:f),b._emit("mute",k._id))}return b},volume:function(){var f=this,y=arguments,b,T;if(y.length===0)return f._volume;if(y.length===1||y.length===2&&typeof y[1]>"u"){var R=f._getSoundIds(),k=R.indexOf(y[0]);k>=0?T=parseInt(y[0],10):b=parseFloat(y[0])}else y.length>=2&&(b=parseFloat(y[0]),T=parseInt(y[1],10));var L;if(typeof b<"u"&&b>=0&&b<=1){if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"volume",action:function(){f.volume.apply(f,y)}}),f;typeof T>"u"&&(f._volume=b),T=f._getSoundIds(T);for(var V=0;V<T.length;V++)L=f._soundById(T[V]),L&&(L._volume=b,y[2]||f._stopFade(T[V]),f._webAudio&&L._node&&!L._muted?L._node.gain.setValueAtTime(b,t.ctx.currentTime):L._node&&!L._muted&&(L._node.volume=b*t.volume()),f._emit("volume",L._id))}else return L=T?f._soundById(T):f._sounds[0],L?L._volume:0;return f},fade:function(f,y,b,T){var R=this;if(R._state!=="loaded"||R._playLock)return R._queue.push({event:"fade",action:function(){R.fade(f,y,b,T)}}),R;f=Math.min(Math.max(0,parseFloat(f)),1),y=Math.min(Math.max(0,parseFloat(y)),1),b=parseFloat(b),R.volume(f,T);for(var k=R._getSoundIds(T),L=0;L<k.length;L++){var V=R._soundById(k[L]);if(V){if(T||R._stopFade(k[L]),R._webAudio&&!V._muted){var z=t.ctx.currentTime,J=z+b/1e3;V._volume=f,V._node.gain.setValueAtTime(f,z),V._node.gain.linearRampToValueAtTime(y,J)}R._startFadeInterval(V,f,y,b,k[L],typeof T>"u")}}return R},_startFadeInterval:function(f,y,b,T,R,k){var L=this,V=y,z=b-y,J=Math.abs(z/.01),X=Math.max(4,J>0?T/J:T),fe=Date.now();f._fadeTo=b,f._interval=setInterval(function(){var N=(Date.now()-fe)/T;fe=Date.now(),V+=z*N,V=Math.round(V*100)/100,z<0?V=Math.max(b,V):V=Math.min(b,V),L._webAudio?f._volume=V:L.volume(V,f._id,!0),k&&(L._volume=V),(b<y&&V<=b||b>y&&V>=b)&&(clearInterval(f._interval),f._interval=null,f._fadeTo=null,L.volume(b,f._id),L._emit("fade",f._id))},X)},_stopFade:function(f){var y=this,b=y._soundById(f);return b&&b._interval&&(y._webAudio&&b._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(b._interval),b._interval=null,y.volume(b._fadeTo,f),b._fadeTo=null,y._emit("fade",f)),y},loop:function(){var f=this,y=arguments,b,T,R;if(y.length===0)return f._loop;if(y.length===1)if(typeof y[0]=="boolean")b=y[0],f._loop=b;else return R=f._soundById(parseInt(y[0],10)),R?R._loop:!1;else y.length===2&&(b=y[0],T=parseInt(y[1],10));for(var k=f._getSoundIds(T),L=0;L<k.length;L++)R=f._soundById(k[L]),R&&(R._loop=b,f._webAudio&&R._node&&R._node.bufferSource&&(R._node.bufferSource.loop=b,b&&(R._node.bufferSource.loopStart=R._start||0,R._node.bufferSource.loopEnd=R._stop,f.playing(k[L])&&(f.pause(k[L],!0),f.play(k[L],!0)))));return f},rate:function(){var f=this,y=arguments,b,T;if(y.length===0)T=f._sounds[0]._id;else if(y.length===1){var R=f._getSoundIds(),k=R.indexOf(y[0]);k>=0?T=parseInt(y[0],10):b=parseFloat(y[0])}else y.length===2&&(b=parseFloat(y[0]),T=parseInt(y[1],10));var L;if(typeof b=="number"){if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"rate",action:function(){f.rate.apply(f,y)}}),f;typeof T>"u"&&(f._rate=b),T=f._getSoundIds(T);for(var V=0;V<T.length;V++)if(L=f._soundById(T[V]),L){f.playing(T[V])&&(L._rateSeek=f.seek(T[V]),L._playStart=f._webAudio?t.ctx.currentTime:L._playStart),L._rate=b,f._webAudio&&L._node&&L._node.bufferSource?L._node.bufferSource.playbackRate.setValueAtTime(b,t.ctx.currentTime):L._node&&(L._node.playbackRate=b);var z=f.seek(T[V]),J=(f._sprite[L._sprite][0]+f._sprite[L._sprite][1])/1e3-z,X=J*1e3/Math.abs(L._rate);(f._endTimers[T[V]]||!L._paused)&&(f._clearTimer(T[V]),f._endTimers[T[V]]=setTimeout(f._ended.bind(f,L),X)),f._emit("rate",L._id)}}else return L=f._soundById(T),L?L._rate:f._rate;return f},seek:function(){var f=this,y=arguments,b,T;if(y.length===0)f._sounds.length&&(T=f._sounds[0]._id);else if(y.length===1){var R=f._getSoundIds(),k=R.indexOf(y[0]);k>=0?T=parseInt(y[0],10):f._sounds.length&&(T=f._sounds[0]._id,b=parseFloat(y[0]))}else y.length===2&&(b=parseFloat(y[0]),T=parseInt(y[1],10));if(typeof T>"u")return 0;if(typeof b=="number"&&(f._state!=="loaded"||f._playLock))return f._queue.push({event:"seek",action:function(){f.seek.apply(f,y)}}),f;var L=f._soundById(T);if(L)if(typeof b=="number"&&b>=0){var V=f.playing(T);V&&f.pause(T,!0),L._seek=b,L._ended=!1,f._clearTimer(T),!f._webAudio&&L._node&&!isNaN(L._node.duration)&&(L._node.currentTime=b);var z=function(){V&&f.play(T,!0),f._emit("seek",T)};if(V&&!f._webAudio){var J=function(){f._playLock?setTimeout(J,0):z()};setTimeout(J,0)}else z()}else if(f._webAudio){var X=f.playing(T)?t.ctx.currentTime-L._playStart:0,fe=L._rateSeek?L._rateSeek-L._seek:0;return L._seek+(fe+X*Math.abs(L._rate))}else return L._node.currentTime;return f},playing:function(f){var y=this;if(typeof f=="number"){var b=y._soundById(f);return b?!b._paused:!1}for(var T=0;T<y._sounds.length;T++)if(!y._sounds[T]._paused)return!0;return!1},duration:function(f){var y=this,b=y._duration,T=y._soundById(f);return T&&(b=y._sprite[T._sprite][1]/1e3),b},state:function(){return this._state},unload:function(){for(var f=this,y=f._sounds,b=0;b<y.length;b++)y[b]._paused||f.stop(y[b]._id),f._webAudio||(f._clearSound(y[b]._node),y[b]._node.removeEventListener("error",y[b]._errorFn,!1),y[b]._node.removeEventListener(t._canPlayEvent,y[b]._loadFn,!1),y[b]._node.removeEventListener("ended",y[b]._endFn,!1),t._releaseHtml5Audio(y[b]._node)),delete y[b]._node,f._clearTimer(y[b]._id);var T=t._howls.indexOf(f);T>=0&&t._howls.splice(T,1);var R=!0;for(b=0;b<t._howls.length;b++)if(t._howls[b]._src===f._src||f._src.indexOf(t._howls[b]._src)>=0){R=!1;break}return a&&R&&delete a[f._src],t.noAudio=!1,f._state="unloaded",f._sounds=[],f=null,null},on:function(f,y,b,T){var R=this,k=R["_on"+f];return typeof y=="function"&&k.push(T?{id:b,fn:y,once:T}:{id:b,fn:y}),R},off:function(f,y,b){var T=this,R=T["_on"+f],k=0;if(typeof y=="number"&&(b=y,y=null),y||b)for(k=0;k<R.length;k++){var L=b===R[k].id;if(y===R[k].fn&&L||!y&&L){R.splice(k,1);break}}else if(f)T["_on"+f]=[];else{var V=Object.keys(T);for(k=0;k<V.length;k++)V[k].indexOf("_on")===0&&Array.isArray(T[V[k]])&&(T[V[k]]=[])}return T},once:function(f,y,b){var T=this;return T.on(f,y,b,1),T},_emit:function(f,y,b){for(var T=this,R=T["_on"+f],k=R.length-1;k>=0;k--)(!R[k].id||R[k].id===y||f==="load")&&(setTimeout((function(L){L.call(this,y,b)}).bind(T,R[k].fn),0),R[k].once&&T.off(f,R[k].fn,R[k].id));return T._loadQueue(f),T},_loadQueue:function(f){var y=this;if(y._queue.length>0){var b=y._queue[0];b.event===f&&(y._queue.shift(),y._loadQueue()),f||b.action()}return y},_ended:function(f){var y=this,b=f._sprite;if(!y._webAudio&&f._node&&!f._node.paused&&!f._node.ended&&f._node.currentTime<f._stop)return setTimeout(y._ended.bind(y,f),100),y;var T=!!(f._loop||y._sprite[b][2]);if(y._emit("end",f._id),!y._webAudio&&T&&y.stop(f._id,!0).play(f._id),y._webAudio&&T){y._emit("play",f._id),f._seek=f._start||0,f._rateSeek=0,f._playStart=t.ctx.currentTime;var R=(f._stop-f._start)*1e3/Math.abs(f._rate);y._endTimers[f._id]=setTimeout(y._ended.bind(y,f),R)}return y._webAudio&&!T&&(f._paused=!0,f._ended=!0,f._seek=f._start||0,f._rateSeek=0,y._clearTimer(f._id),y._cleanBuffer(f._node),t._autoSuspend()),!y._webAudio&&!T&&y.stop(f._id,!0),y},_clearTimer:function(f){var y=this;if(y._endTimers[f]){if(typeof y._endTimers[f]!="function")clearTimeout(y._endTimers[f]);else{var b=y._soundById(f);b&&b._node&&b._node.removeEventListener("ended",y._endTimers[f],!1)}delete y._endTimers[f]}return y},_soundById:function(f){for(var y=this,b=0;b<y._sounds.length;b++)if(f===y._sounds[b]._id)return y._sounds[b];return null},_inactiveSound:function(){var f=this;f._drain();for(var y=0;y<f._sounds.length;y++)if(f._sounds[y]._ended)return f._sounds[y].reset();return new s(f)},_drain:function(){var f=this,y=f._pool,b=0,T=0;if(!(f._sounds.length<y)){for(T=0;T<f._sounds.length;T++)f._sounds[T]._ended&&b++;for(T=f._sounds.length-1;T>=0;T--){if(b<=y)return;f._sounds[T]._ended&&(f._webAudio&&f._sounds[T]._node&&f._sounds[T]._node.disconnect(0),f._sounds.splice(T,1),b--)}}},_getSoundIds:function(f){var y=this;if(typeof f>"u"){for(var b=[],T=0;T<y._sounds.length;T++)b.push(y._sounds[T]._id);return b}else return[f]},_refreshBuffer:function(f){var y=this;return f._node.bufferSource=t.ctx.createBufferSource(),f._node.bufferSource.buffer=a[y._src],f._panner?f._node.bufferSource.connect(f._panner):f._node.bufferSource.connect(f._node),f._node.bufferSource.loop=f._loop,f._loop&&(f._node.bufferSource.loopStart=f._start||0,f._node.bufferSource.loopEnd=f._stop||0),f._node.bufferSource.playbackRate.setValueAtTime(f._rate,t.ctx.currentTime),y},_cleanBuffer:function(f){var y=this,b=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!f.bufferSource)return y;if(t._scratchBuffer&&f.bufferSource&&(f.bufferSource.onended=null,f.bufferSource.disconnect(0),b))try{f.bufferSource.buffer=t._scratchBuffer}catch{}return f.bufferSource=null,y},_clearSound:function(f){var y=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);y||(f.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(f){this._parent=f,this.init()};s.prototype={init:function(){var f=this,y=f._parent;return f._muted=y._muted,f._loop=y._loop,f._volume=y._volume,f._rate=y._rate,f._seek=0,f._paused=!0,f._ended=!0,f._sprite="__default",f._id=++t._counter,y._sounds.push(f),f.create(),f},create:function(){var f=this,y=f._parent,b=t._muted||f._muted||f._parent._muted?0:f._volume;return y._webAudio?(f._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),f._node.gain.setValueAtTime(b,t.ctx.currentTime),f._node.paused=!0,f._node.connect(t.masterGain)):t.noAudio||(f._node=t._obtainHtml5Audio(),f._errorFn=f._errorListener.bind(f),f._node.addEventListener("error",f._errorFn,!1),f._loadFn=f._loadListener.bind(f),f._node.addEventListener(t._canPlayEvent,f._loadFn,!1),f._endFn=f._endListener.bind(f),f._node.addEventListener("ended",f._endFn,!1),f._node.src=y._src,f._node.preload=y._preload===!0?"auto":y._preload,f._node.volume=b*t.volume(),f._node.load()),f},reset:function(){var f=this,y=f._parent;return f._muted=y._muted,f._loop=y._loop,f._volume=y._volume,f._rate=y._rate,f._seek=0,f._rateSeek=0,f._paused=!0,f._ended=!0,f._sprite="__default",f._id=++t._counter,f},_errorListener:function(){var f=this;f._parent._emit("loaderror",f._id,f._node.error?f._node.error.code:0),f._node.removeEventListener("error",f._errorFn,!1)},_loadListener:function(){var f=this,y=f._parent;y._duration=Math.ceil(f._node.duration*10)/10,Object.keys(y._sprite).length===0&&(y._sprite={__default:[0,y._duration*1e3]}),y._state!=="loaded"&&(y._state="loaded",y._emit("load"),y._loadQueue()),f._node.removeEventListener(t._canPlayEvent,f._loadFn,!1)},_endListener:function(){var f=this,y=f._parent;y._duration===1/0&&(y._duration=Math.ceil(f._node.duration*10)/10,y._sprite.__default[1]===1/0&&(y._sprite.__default[1]=y._duration*1e3),y._ended(f)),f._node.removeEventListener("ended",f._endFn,!1)}};var a={},c=function(f){var y=f._src;if(a[y]){f._duration=a[y].duration,v(f);return}if(/^data:[^;]+;base64,/.test(y)){for(var b=atob(y.split(",")[1]),T=new Uint8Array(b.length),R=0;R<b.length;++R)T[R]=b.charCodeAt(R);m(T.buffer,f)}else{var k=new XMLHttpRequest;k.open(f._xhr.method,y,!0),k.withCredentials=f._xhr.withCredentials,k.responseType="arraybuffer",f._xhr.headers&&Object.keys(f._xhr.headers).forEach(function(L){k.setRequestHeader(L,f._xhr.headers[L])}),k.onload=function(){var L=(k.status+"")[0];if(L!=="0"&&L!=="2"&&L!=="3"){f._emit("loaderror",null,"Failed loading audio file with status: "+k.status+".");return}m(k.response,f)},k.onerror=function(){f._webAudio&&(f._html5=!0,f._webAudio=!1,f._sounds=[],delete a[y],f.load())},d(k)}},d=function(f){try{f.send()}catch{f.onerror()}},m=function(f,y){var b=function(){y._emit("loaderror",null,"Decoding audio data failed.")},T=function(R){R&&y._sounds.length>0?(a[y._src]=R,v(y,R)):b()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(f).then(T).catch(b):t.ctx.decodeAudioData(f,T,b)},v=function(f,y){y&&!f._duration&&(f._duration=y.duration),Object.keys(f._sprite).length===0&&(f._sprite={__default:[0,f._duration*1e3]}),f._state!=="loaded"&&(f._state="loaded",f._emit("load"),f._loadQueue())},w=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var f=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),y=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),b=y?parseInt(y[1],10):null;if(f&&b&&b<9){var T=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!T&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};n.Howler=t,n.Howl=r,typeof Da<"u"?(Da.HowlerGlobal=e,Da.Howler=t,Da.Howl=r,Da.Sound=s):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=r,window.Sound=s)})();(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var s=r._howls.length-1;s>=0;s--)r._howls[s].stereo(t);return r},HowlerGlobal.prototype.pos=function(t,r,s){var a=this;if(!a.ctx||!a.ctx.listener)return a;if(r=typeof r!="number"?a._pos[1]:r,s=typeof s!="number"?a._pos[2]:s,typeof t=="number")a._pos=[t,r,s],typeof a.ctx.listener.positionX<"u"?(a.ctx.listener.positionX.setTargetAtTime(a._pos[0],Howler.ctx.currentTime,.1),a.ctx.listener.positionY.setTargetAtTime(a._pos[1],Howler.ctx.currentTime,.1),a.ctx.listener.positionZ.setTargetAtTime(a._pos[2],Howler.ctx.currentTime,.1)):a.ctx.listener.setPosition(a._pos[0],a._pos[1],a._pos[2]);else return a._pos;return a},HowlerGlobal.prototype.orientation=function(t,r,s,a,c,d){var m=this;if(!m.ctx||!m.ctx.listener)return m;var v=m._orientation;if(r=typeof r!="number"?v[1]:r,s=typeof s!="number"?v[2]:s,a=typeof a!="number"?v[3]:a,c=typeof c!="number"?v[4]:c,d=typeof d!="number"?v[5]:d,typeof t=="number")m._orientation=[t,r,s,a,c,d],typeof m.ctx.listener.forwardX<"u"?(m.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),m.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),m.ctx.listener.forwardZ.setTargetAtTime(s,Howler.ctx.currentTime,.1),m.ctx.listener.upX.setTargetAtTime(a,Howler.ctx.currentTime,.1),m.ctx.listener.upY.setTargetAtTime(c,Howler.ctx.currentTime,.1),m.ctx.listener.upZ.setTargetAtTime(d,Howler.ctx.currentTime,.1)):m.ctx.listener.setOrientation(t,r,s,a,c,d);else return v;return m},Howl.prototype.init=(function(t){return function(r){var s=this;return s._orientation=r.orientation||[1,0,0],s._stereo=r.stereo||null,s._pos=r.pos||null,s._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},s._onstereo=r.onstereo?[{fn:r.onstereo}]:[],s._onpos=r.onpos?[{fn:r.onpos}]:[],s._onorientation=r.onorientation?[{fn:r.onorientation}]:[],t.call(this,r)}})(Howl.prototype.init),Howl.prototype.stereo=function(t,r){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"stereo",action:function(){s.stereo(t,r)}}),s;var a=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof t=="number")s._stereo=t,s._pos=[t,0,0];else return s._stereo;for(var c=s._getSoundIds(r),d=0;d<c.length;d++){var m=s._soundById(c[d]);if(m)if(typeof t=="number")m._stereo=t,m._pos=[t,0,0],m._node&&(m._pannerAttr.panningModel="equalpower",(!m._panner||!m._panner.pan)&&e(m,a),a==="spatial"?typeof m._panner.positionX<"u"?(m._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),m._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),m._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):m._panner.setPosition(t,0,0):m._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),s._emit("stereo",m._id);else return m._stereo}return s},Howl.prototype.pos=function(t,r,s,a){var c=this;if(!c._webAudio)return c;if(c._state!=="loaded")return c._queue.push({event:"pos",action:function(){c.pos(t,r,s,a)}}),c;if(r=typeof r!="number"?0:r,s=typeof s!="number"?-.5:s,typeof a>"u")if(typeof t=="number")c._pos=[t,r,s];else return c._pos;for(var d=c._getSoundIds(a),m=0;m<d.length;m++){var v=c._soundById(d[m]);if(v)if(typeof t=="number")v._pos=[t,r,s],v._node&&((!v._panner||v._panner.pan)&&e(v,"spatial"),typeof v._panner.positionX<"u"?(v._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),v._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),v._panner.positionZ.setValueAtTime(s,Howler.ctx.currentTime)):v._panner.setPosition(t,r,s)),c._emit("pos",v._id);else return v._pos}return c},Howl.prototype.orientation=function(t,r,s,a){var c=this;if(!c._webAudio)return c;if(c._state!=="loaded")return c._queue.push({event:"orientation",action:function(){c.orientation(t,r,s,a)}}),c;if(r=typeof r!="number"?c._orientation[1]:r,s=typeof s!="number"?c._orientation[2]:s,typeof a>"u")if(typeof t=="number")c._orientation=[t,r,s];else return c._orientation;for(var d=c._getSoundIds(a),m=0;m<d.length;m++){var v=c._soundById(d[m]);if(v)if(typeof t=="number")v._orientation=[t,r,s],v._node&&(v._panner||(v._pos||(v._pos=c._pos||[0,0,-.5]),e(v,"spatial")),typeof v._panner.orientationX<"u"?(v._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),v._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),v._panner.orientationZ.setValueAtTime(s,Howler.ctx.currentTime)):v._panner.setOrientation(t,r,s)),c._emit("orientation",v._id);else return v._orientation}return c},Howl.prototype.pannerAttr=function(){var t=this,r=arguments,s,a,c;if(!t._webAudio)return t;if(r.length===0)return t._pannerAttr;if(r.length===1)if(typeof r[0]=="object")s=r[0],typeof a>"u"&&(s.pannerAttr||(s.pannerAttr={coneInnerAngle:s.coneInnerAngle,coneOuterAngle:s.coneOuterAngle,coneOuterGain:s.coneOuterGain,distanceModel:s.distanceModel,maxDistance:s.maxDistance,refDistance:s.refDistance,rolloffFactor:s.rolloffFactor,panningModel:s.panningModel}),t._pannerAttr={coneInnerAngle:typeof s.pannerAttr.coneInnerAngle<"u"?s.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof s.pannerAttr.coneOuterAngle<"u"?s.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof s.pannerAttr.coneOuterGain<"u"?s.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof s.pannerAttr.distanceModel<"u"?s.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof s.pannerAttr.maxDistance<"u"?s.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof s.pannerAttr.refDistance<"u"?s.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof s.pannerAttr.rolloffFactor<"u"?s.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof s.pannerAttr.panningModel<"u"?s.pannerAttr.panningModel:t._panningModel});else return c=t._soundById(parseInt(r[0],10)),c?c._pannerAttr:t._pannerAttr;else r.length===2&&(s=r[0],a=parseInt(r[1],10));for(var d=t._getSoundIds(a),m=0;m<d.length;m++)if(c=t._soundById(d[m]),c){var v=c._pannerAttr;v={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:v.coneInnerAngle,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:v.coneOuterAngle,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:v.coneOuterGain,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:v.distanceModel,maxDistance:typeof s.maxDistance<"u"?s.maxDistance:v.maxDistance,refDistance:typeof s.refDistance<"u"?s.refDistance:v.refDistance,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:v.rolloffFactor,panningModel:typeof s.panningModel<"u"?s.panningModel:v.panningModel};var w=c._panner;w||(c._pos||(c._pos=t._pos||[0,0,-.5]),e(c,"spatial"),w=c._panner),w.coneInnerAngle=v.coneInnerAngle,w.coneOuterAngle=v.coneOuterAngle,w.coneOuterGain=v.coneOuterGain,w.distanceModel=v.distanceModel,w.maxDistance=v.maxDistance,w.refDistance=v.refDistance,w.rolloffFactor=v.rolloffFactor,w.panningModel=v.panningModel}return t},Sound.prototype.init=(function(t){return function(){var r=this,s=r._parent;r._orientation=s._orientation,r._stereo=s._stereo,r._pos=s._pos,r._pannerAttr=s._pannerAttr,t.call(this),r._stereo?s.stereo(r._stereo):r._pos&&s.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}})(Sound.prototype.init),Sound.prototype.reset=(function(t){return function(){var r=this,s=r._parent;return r._orientation=s._orientation,r._stereo=s._stereo,r._pos=s._pos,r._pannerAttr=s._pannerAttr,r._stereo?s.stereo(r._stereo):r._pos?s.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,s._refreshBuffer(r)),t.call(this)}})(Sound.prototype.reset);var e=function(t,r){r=r||"spatial",r==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()})(dg)),dg}var rC=tC();class co{static instance;sounds=new Map;stateAssets=new Map;volumes={master:1,ost:.7,sfx:1};constructor(){const e=mn.getInstance();this.volumes.master=e.get("master_volume",1)??1,this.volumes.ost=e.get("ost_volume",.7)??.7,this.volumes.sfx=e.get("sfx_volume",1)??1}static getInstance(){return this.instance||(this.instance=new co),this.instance}async loadManifest(e,t){const s=await(await fetch(e)).json();if(!s.audio)return;this.stateAssets.has(t)||this.stateAssets.set(t,new Set);const a=this.stateAssets.get(t);Object.entries(s.audio).forEach(([c,d])=>{if(this.sounds.has(c))return;const m=new rC.Howl({src:[d.url],loop:d.loop||!1,volume:d.volume*this.volumes[d.type]*this.volumes.master,html5:d.type==="ost"});this.sounds.set(c,{howl:m,type:d.type,baseVol:d.volume||1}),a.add(c)})}play(e){const t=this.sounds.get(e);t&&t.howl.play()}stop(e){this.sounds.get(e)?.howl.stop()}stopAllByState(e){const t=this.stateAssets.get(e);t&&t.forEach(r=>this.sounds.get(r)?.howl.stop())}uncacheByState(e){const t=this.stateAssets.get(e);t&&(t.forEach(r=>{const s=this.sounds.get(r);s&&(s.howl.stop(),s.howl.unload(),this.sounds.delete(r))}),this.stateAssets.delete(e))}setVolume(e,t){this.volumes[e]=t,mn.getInstance().set(`settings_${e}_vol`,t),this.sounds.forEach(r=>{const s=r.type==="ost"?this.volumes.ost:this.volumes.sfx;r.howl.volume(r.baseVol*s*this.volumes.master)})}getVolumes(){return{...this.volumes}}}class nC extends ch{constructor(e,t){super(),this.targetState=e,this.config=t,this.isRendering=!0}name="LoadingState";isTargetReady=!1;async init(){this.config.manifestPath&&await Promise.all([El.getInstance().loadManifest(this.config.manifestPath,this.name),co.getInstance().loadManifest(this.config.manifestPath,this.name)]),this.startTargetInit()}async startTargetInit(){try{await this.targetState.init(),this.isTargetReady=!0,lr.getInstance().notify()}catch(e){console.error("Failed to load target state:",e)}}update(e,t){}getView(){const e=this.config.view||M1;return Jr.createElement(e,{key:"loading-view",...this.config.props,isFinished:this.isTargetReady,onTransitionComplete:()=>this.finishLoading()})}finishLoading(){lr.getInstance().replace(this.targetState)}destroy(){El.getInstance().uncacheByState(this.name),co.getInstance().uncacheByState(this.name)}}class lr{static instance;stack=[];listeners=[];constructor(){}static getInstance(){return lr.instance||(lr.instance=new lr),lr.instance}async push(e,t=!0){t&&this.stack.length>0&&(this.stack[this.stack.length-1].isUpdating=!1,this.stack[this.stack.length-1].isRendering=!0),await e.init(),this.stack.push(e),this.notify()}pop(){if(this.stack.length<=1)return;const e=this.stack.pop();e&&e.destroy(),this.stack.length>0&&(this.stack[this.stack.length-1].isUpdating=!0,this.stack[this.stack.length-1].isRendering=!0),this.notify()}async replace(e,t){this.stack.forEach(s=>s.destroy()),this.stack=[],this.notify();const r=t?new nC(e,t):e;await r.init(),this.stack.push(r),this.notify(),hu.getInstance().start()}updateAll(e,t){this.stack.forEach(r=>{r.isUpdating&&r.update(e,t)})}getActiveUpdateStates(){return this.stack.filter(e=>e.isUpdating)}getCurrentStateName(){return this.stack.length>0?this.stack[this.stack.length-1].name:null}subscribe(e){return this.listeners.push(e),this.notify(),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}getUnderlyingStateName(){if(this.stack.length===0)return null;for(let e=this.stack.length-1;e>=0;e--){const t=this.stack[e];if(t.name!=="PauseMenu"&&t.name!=="SaveMenu"&&t.name!=="SettingsMenu")return t.name}return this.stack[0].name}getActiveState(){return this.stack.length>0?this.stack[this.stack.length-1]:null}notify(){const e=this.stack.filter(t=>t.isRendering).map(t=>t.getView());this.listeners.forEach(t=>t(e))}}const iC=()=>{const n=it.useRef(null),e=hu.getInstance(),t=lr.getInstance(),r=it.useRef(0),s=it.useRef([]),a=it.useRef(new Set);return it.useEffect(()=>{const c=w=>a.current.add(w.key.toUpperCase()),d=w=>a.current.delete(w.key.toUpperCase());window.addEventListener("keydown",c),window.addEventListener("keyup",d);let m;const v=()=>{if(n.current){const w=e.fps||0,f=e.frameCount||0,y=t.stack||[];if(y.length!==r.current){const k=new Date().toLocaleTimeString().split(" ")[0],L=y.length>r.current?"PUSH":"POP",V=y[y.length-1]?.name||"NULL";s.current.unshift(`[${k}] ${L}: ${V}`),s.current.length>3&&s.current.pop(),r.current=y.length}const b=y.map((k,L)=>`${L===y.length-1?" ACTIVE >":"        -"} [${L}] ${k.name}`).reverse().join(`
`),T=Array.from(a.current),R=T.length>0?T.join(" | "):"IDLE";n.current.innerText=`// ENGINE_STATS
FPS:    ${w}
FRAME:  ${f}

// STATE_STACK
${b||"EMPTY"}

// INPUT_MONITOR
KEYS:   ${R}

// RECENT_TRANSITIONS
${s.current.join(`
`)||"NONE"}`}m=requestAnimationFrame(v)};return m=requestAnimationFrame(v),()=>{cancelAnimationFrame(m),window.removeEventListener("keydown",c),window.removeEventListener("keyup",d)}},[e,t]),Q.jsx("div",{ref:n,style:{position:"absolute",top:"1cqw",right:"1cqw",color:"#0f0",fontFamily:"monospace",whiteSpace:"pre",textAlign:"left",fontSize:"0.95cqw",lineHeight:"1.4",textShadow:"0 0 5px rgba(0, 255, 0, 0.5)",backgroundColor:"rgba(5, 5, 5, 0.9)",padding:"1.2cqw",borderRadius:"0.2cqw",pointerEvents:"none",zIndex:9999,borderLeft:"3px solid #0f0",minWidth:"22cqw",boxShadow:"0 10px 30px rgba(0,0,0,0.8)",letterSpacing:"0.05cqw"}})},cd={hp:"global_hp",energy:"global_energy"};class My extends ch{constructor(e=!1){super(),this.forceReset=e,this.isRendering=!1,this.isUpdating=!1}vm;controller;instanceId="";isLoadedFromSave=!1;async init(){if(this.isInitialized){this.isUpdating=!0,this.isRendering=!0;return}const e=oh.getInstance(),t=ao.getInstance(),r=mn.getInstance();e.activeStateName===this.name&&(this.isLoadedFromSave=!0),this.instanceId=e.prepareForState(this.name),e.setupBuffers(this.logicSchema,this.forceReset),t.prepareForState(this.name),t.setupBuffers(e.getBuffers(),this.viewSchema);try{await this.internalLoadResources()}catch(s){console.warn(`[${this.name}] Resource load warning:`,s)}this.initMVC(),e.createState(this.name),t.createState(this.name),await this.internalPostInit(e,r),r.unlock(),this.isInitialized=!0,this.isUpdating=!0,this.isRendering=!0}update(e,t){this.isUpdating&&(this.controller&&this.controller.update(),this.vm&&this.vm.update&&this.vm.update())}getView(){return Jr.createElement(this.viewComponent,{key:this.instanceId,vm:this.vm,controller:this.controller})}destroy(){const e=mn.getInstance(),t=oh.getInstance(),r=ao.getInstance();this.isUpdating=!1,this.isRendering=!1,this.isInitialized=!1,this.syncGlobalsToSession(e),co.getInstance().stopAllByState(this.name),co.getInstance().uncacheByState(this.name),El.getInstance().uncacheByState(this.name),this.controller&&this.controller.destroy(),this.onBeforeDestroy(e,t),t.terminateState(this.name,this.instanceId),r.terminateState(this.name),ys.getInstance().reset()}async onCustomLoadResources(){}onBeforeDestroy(e,t){}async internalLoadResources(){const e=this.getConfig();e.manifestPath&&await Promise.all([El.getInstance().loadManifest(e.manifestPath,this.name),co.getInstance().loadManifest(e.manifestPath,this.name)]),await this.onCustomLoadResources()}async internalPostInit(e,t){const r=this.getConfig();if(this.isLoadedFromSave)e.isInitialized=!0;else if(this.forceReset)t.clearSavableKeys(),e.sendInput(this.name,"INITIALIZE",r);else{const s=this.getSessionOverrides(t),a={...r,...s};e.sendInput(this.name,"INITIALIZE",a)}this.vm&&this.vm.notify&&this.vm.notify(),r.bgmKey&&co.getInstance().play(r.bgmKey)}syncGlobalsToSession(e){this.vm&&Object.entries(cd).forEach(([t,r])=>{t in this.vm&&e.set(r,this.vm[t])})}}const sC="modulepreload",oC=function(n){return"/LuckyRepo/"+n},C_={},ho=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let m=function(v){return Promise.all(v.map(w=>Promise.resolve(w).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");s=m(t.map(v=>{if(v=oC(v),v in C_)return;C_[v]=!0;const w=v.endsWith(".css"),f=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${f}`))return;const y=document.createElement("link");if(y.rel=w?"stylesheet":sC,w||(y.as="script"),y.crossOrigin="",y.href=v,d&&y.setAttribute("nonce",d),document.head.appendChild(y),w)return new Promise((b,T)=>{y.addEventListener("load",b),y.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${v}`)))})}))}function a(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return s.then(c=>{for(const d of c||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})};var Cf={exports:{}},aC=Cf.exports,I_;function lC(){return I_||(I_=1,(function(n,e){((t,r)=>{n.exports=r()})(aC,function(){var t=function(p,x){return(t=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(A,P){A.__proto__=P}:function(A,P){for(var M in P)Object.prototype.hasOwnProperty.call(P,M)&&(A[M]=P[M])}))(p,x)},r=function(){return(r=Object.assign||function(p){for(var x,A=1,P=arguments.length;A<P;A++)for(var M in x=arguments[A])Object.prototype.hasOwnProperty.call(x,M)&&(p[M]=x[M]);return p}).apply(this,arguments)};function s(p,x,A){for(var P,M=0,F=x.length;M<F;M++)!P&&M in x||((P=P||Array.prototype.slice.call(x,0,M))[M]=x[M]);return p.concat(P||Array.prototype.slice.call(x))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Da,c=Object.keys,d=Array.isArray;function m(p,x){return typeof x=="object"&&c(x).forEach(function(A){p[A]=x[A]}),p}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var v=Object.getPrototypeOf,w={}.hasOwnProperty;function f(p,x){return w.call(p,x)}function y(p,x){typeof x=="function"&&(x=x(v(p))),(typeof Reflect>"u"?c:Reflect.ownKeys)(x).forEach(function(A){T(p,A,x[A])})}var b=Object.defineProperty;function T(p,x,A,P){b(p,x,m(A&&f(A,"get")&&typeof A.get=="function"?{get:A.get,set:A.set,configurable:!0}:{value:A,configurable:!0,writable:!0},P))}function R(p){return{from:function(x){return p.prototype=Object.create(x.prototype),T(p.prototype,"constructor",p),{extend:y.bind(null,p.prototype)}}}}var k=Object.getOwnPropertyDescriptor,L=[].slice;function V(p,x,A){return L.call(p,x,A)}function z(p,x){return x(p)}function J(p){if(!p)throw new Error("Assertion Failed")}function X(p){a.setImmediate?setImmediate(p):setTimeout(p,0)}function fe(p,x){if(typeof x=="string"&&f(p,x))return p[x];if(!x)return p;if(typeof x!="string"){for(var A=[],P=0,M=x.length;P<M;++P){var F=fe(p,x[P]);A.push(F)}return A}var j,q=x.indexOf(".");return q===-1||(j=p[x.substr(0,q)])==null?void 0:fe(j,x.substr(q+1))}function N(p,x,A){if(p&&x!==void 0&&!("isFrozen"in Object&&Object.isFrozen(p)))if(typeof x!="string"&&"length"in x){J(typeof A!="string"&&"length"in A);for(var P=0,M=x.length;P<M;++P)N(p,x[P],A[P])}else{var F,j,q=x.indexOf(".");q!==-1?(F=x.substr(0,q),(q=x.substr(q+1))===""?A===void 0?d(p)&&!isNaN(parseInt(F))?p.splice(F,1):delete p[F]:p[F]=A:N(j=(j=p[F])&&f(p,F)?j:p[F]={},q,A)):A===void 0?d(p)&&!isNaN(parseInt(x))?p.splice(x,1):delete p[x]:p[x]=A}}function te(p){var x,A={};for(x in p)f(p,x)&&(A[x]=p[x]);return A}var pe=[].concat;function Me(p){return pe.apply([],p)}var K="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Me([8,16,32,64].map(function(p){return["Int","Uint","Float"].map(function(x){return x+p+"Array"})}))).filter(function(p){return a[p]}),Pe=new Set(K.map(function(p){return a[p]})),ve=null;function _e(p){return ve=new WeakMap,p=(function x(A){if(!A||typeof A!="object")return A;var P=ve.get(A);if(P)return P;if(d(A)){P=[],ve.set(A,P);for(var M=0,F=A.length;M<F;++M)P.push(x(A[M]))}else if(Pe.has(A.constructor))P=A;else{var j,q=v(A);for(j in P=q===Object.prototype?{}:Object.create(q),ve.set(A,P),A)f(A,j)&&(P[j]=x(A[j]))}return P})(p),ve=null,p}var we={}.toString;function Xe(p){return we.call(p).slice(8,-1)}var H=typeof Symbol<"u"?Symbol.iterator:"@@iterator",W=typeof H=="symbol"?function(p){var x;return p!=null&&(x=p[H])&&x.apply(p)}:function(){return null};function D(p,x){x=p.indexOf(x),0<=x&&p.splice(x,1)}var Y={};function G(p){var x,A,P,M;if(arguments.length===1){if(d(p))return p.slice();if(this===Y&&typeof p=="string")return[p];if(M=W(p))for(A=[];!(P=M.next()).done;)A.push(P.value);else{if(p==null)return[p];if(typeof(x=p.length)!="number")return[p];for(A=new Array(x);x--;)A[x]=p[x]}}else for(x=arguments.length,A=new Array(x);x--;)A[x]=arguments[x];return A}var U=typeof Symbol<"u"?function(p){return p[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},K=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],gn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(K),he={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ae(p,x){this.name=p,this.message=x}function Oe(p,x){return p+". Errors: "+Object.keys(x).map(function(A){return x[A].toString()}).filter(function(A,P,M){return M.indexOf(A)===P}).join(`
`)}function Fe(p,x,A,P){this.failures=x,this.failedKeys=P,this.successCount=A,this.message=Oe(p,x)}function Ge(p,x){this.name="BulkError",this.failures=Object.keys(x).map(function(A){return x[A]}),this.failuresByPos=x,this.message=Oe(p,this.failures)}R(Ae).from(Error).extend({toString:function(){return this.name+": "+this.message}}),R(Fe).from(Ae),R(Ge).from(Ae);var Ke=gn.reduce(function(p,x){return p[x]=x+"Error",p},{}),st=Ae,Se=gn.reduce(function(p,x){var A=x+"Error";function P(M,F){this.name=A,M?typeof M=="string"?(this.message="".concat(M).concat(F?`
 `+F:""),this.inner=F||null):typeof M=="object"&&(this.message="".concat(M.name," ").concat(M.message),this.inner=M):(this.message=he[x]||A,this.inner=null)}return R(P).from(st),p[x]=P,p},{}),at=(Se.Syntax=SyntaxError,Se.Type=TypeError,Se.Range=RangeError,K.reduce(function(p,x){return p[x+"Error"]=Se[x],p},{}));K=gn.reduce(function(p,x){return["Syntax","Type","Range"].indexOf(x)===-1&&(p[x+"Error"]=Se[x]),p},{});function Qe(){}function yt(p){return p}function Bt(p,x){return p==null||p===yt?x:function(A){return x(p(A))}}function ft(p,x){return function(){p.apply(this,arguments),x.apply(this,arguments)}}function _t(p,x){return p===Qe?x:function(){var A=p.apply(this,arguments),P=(A!==void 0&&(arguments[0]=A),this.onsuccess),M=this.onerror,F=(this.onsuccess=null,this.onerror=null,x.apply(this,arguments));return P&&(this.onsuccess=this.onsuccess?ft(P,this.onsuccess):P),M&&(this.onerror=this.onerror?ft(M,this.onerror):M),F!==void 0?F:A}}function gr(p,x){return p===Qe?x:function(){p.apply(this,arguments);var A=this.onsuccess,P=this.onerror;this.onsuccess=this.onerror=null,x.apply(this,arguments),A&&(this.onsuccess=this.onsuccess?ft(A,this.onsuccess):A),P&&(this.onerror=this.onerror?ft(P,this.onerror):P)}}function Cr(p,x){return p===Qe?x:function(M){var P=p.apply(this,arguments),M=(m(M,P),this.onsuccess),F=this.onerror,j=(this.onsuccess=null,this.onerror=null,x.apply(this,arguments));return M&&(this.onsuccess=this.onsuccess?ft(M,this.onsuccess):M),F&&(this.onerror=this.onerror?ft(F,this.onerror):F),P===void 0?j===void 0?void 0:j:m(P,j)}}function Fi(p,x){return p===Qe?x:function(){return x.apply(this,arguments)!==!1&&p.apply(this,arguments)}}function Nr(p,x){return p===Qe?x:function(){var A=p.apply(this,arguments);if(A&&typeof A.then=="function"){for(var P=this,M=arguments.length,F=new Array(M);M--;)F[M]=arguments[M];return A.then(function(){return x.apply(P,F)})}return x.apply(this,arguments)}}K.ModifyError=Fe,K.DexieError=Ae,K.BulkError=Ge;var dr=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function vi(p){dr=p}var Hn={},Pn=100,Fs=typeof Promise>"u"?[]:(gn=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[Fs=crypto.subtle.digest("SHA-512",new Uint8Array([0])),v(Fs),gn]:[gn,v(gn),gn]),gn=Fs[0],Ii=Fs[1],Ii=Ii&&Ii.then,Jn=gn&&gn.constructor,Bs=!!Fs[2],ei=function(p,x){Ie.push([p,x]),xi&&(queueMicrotask(wi),xi=!1)},_i=!0,xi=!0,xs=[],mo=[],Us=yt,Vn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Qe,pgp:!1,env:{},finalize:Qe},ie=Vn,Ie=[],Nt=0,Zt=[];function ze(p){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var x=this._PSD=ie;if(typeof p!="function"){if(p!==Hn)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&ti(this,this._value)}else this._state=null,this._value=null,++x.ref,(function A(P,M){try{M(function(F){if(P._state===null){if(F===P)throw new TypeError("A promise cannot be resolved with itself.");var j=P._lib&&Mr();F&&typeof F.then=="function"?A(P,function(q,le){F instanceof ze?F._then(q,le):F.then(q,le)}):(P._state=!0,P._value=F,$r(P)),j&&bi()}},ti.bind(null,P))}catch(F){ti(P,F)}})(this,p)}var kt={get:function(){var p=ie,x=ni;function A(P,M){var F=this,j=!p.global&&(p!==ie||x!==ni),q=j&&!qr(),le=new ze(function(me,oe){Rn(F,new yn(Ha(P,p,j,q),Ha(M,p,j,q),me,oe,p))});return this._consoleTask&&(le._consoleTask=this._consoleTask),le}return A.prototype=Hn,A},set:function(p){T(this,"then",p&&p.prototype===Hn?kt:{get:function(){return p},set:kt.set})}};function yn(p,x,A,P,M){this.onFulfilled=typeof p=="function"?p:null,this.onRejected=typeof x=="function"?x:null,this.resolve=A,this.reject=P,this.psd=M}function ti(p,x){var A,P;mo.push(x),p._state===null&&(A=p._lib&&Mr(),x=Us(x),p._state=!1,p._value=x,P=p,xs.some(function(M){return M._value===P._value})||xs.push(P),$r(p),A)&&bi()}function $r(p){var x=p._listeners;p._listeners=[];for(var A=0,P=x.length;A<P;++A)Rn(p,x[A]);var M=p._PSD;--M.ref||M.finalize(),Nt===0&&(++Nt,ei(function(){--Nt==0&&Bi()},[]))}function Rn(p,x){if(p._state===null)p._listeners.push(x);else{var A=p._state?x.onFulfilled:x.onRejected;if(A===null)return(p._state?x.resolve:x.reject)(p._value);++x.psd.ref,++Nt,ei(Yo,[A,p,x])}}function Yo(p,x,A){try{var P,M=x._value;!x._state&&mo.length&&(mo=[]),P=dr&&x._consoleTask?x._consoleTask.run(function(){return p(M)}):p(M),x._state||mo.indexOf(M)!==-1||(F=>{for(var j=xs.length;j;)if(xs[--j]._value===F._value)return xs.splice(j,1)})(x),A.resolve(P)}catch(F){A.reject(F)}finally{--Nt==0&&Bi(),--A.psd.ref||A.psd.finalize()}}function wi(){Wn(Vn,function(){Mr()&&bi()})}function Mr(){var p=_i;return xi=_i=!1,p}function bi(){var p,x,A;do for(;0<Ie.length;)for(p=Ie,Ie=[],A=p.length,x=0;x<A;++x){var P=p[x];P[0].apply(null,P[1])}while(0<Ie.length);xi=_i=!0}function Bi(){for(var p=xs,x=(xs=[],p.forEach(function(P){P._PSD.onunhandled.call(null,P._value,P)}),Zt.slice(0)),A=x.length;A;)x[--A]()}function ws(p){return new ze(Hn,!1,p)}function Xt(p,x){var A=ie;return function(){var P=Mr(),M=ie;try{return si(A,!0),p.apply(this,arguments)}catch(F){x&&x(F)}finally{si(M,!1),P&&bi()}}}y(ze.prototype,{then:kt,_then:function(p,x){Rn(this,new yn(null,null,p,x,ie))},catch:function(p){var x,A;return arguments.length===1?this.then(null,p):(x=p,A=arguments[1],typeof x=="function"?this.then(null,function(P){return(P instanceof x?A:ws)(P)}):this.then(null,function(P){return(P&&P.name===x?A:ws)(P)}))},finally:function(p){return this.then(function(x){return ze.resolve(p()).then(function(){return x})},function(x){return ze.resolve(p()).then(function(){return ws(x)})})},timeout:function(p,x){var A=this;return p<1/0?new ze(function(P,M){var F=setTimeout(function(){return M(new Se.Timeout(x))},p);A.then(P,M).finally(clearTimeout.bind(null,F))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&T(ze.prototype,Symbol.toStringTag,"Dexie.Promise"),Vn.env=Ui(),y(ze,{all:function(){var p=G.apply(null,arguments).map(js);return new ze(function(x,A){p.length===0&&x([]);var P=p.length;p.forEach(function(M,F){return ze.resolve(M).then(function(j){p[F]=j,--P||x(p)},A)})})},resolve:function(p){return p instanceof ze?p:p&&typeof p.then=="function"?new ze(function(x,A){p.then(x,A)}):new ze(Hn,!0,p)},reject:ws,race:function(){var p=G.apply(null,arguments).map(js);return new ze(function(x,A){p.map(function(P){return ze.resolve(P).then(x,A)})})},PSD:{get:function(){return ie},set:function(p){return ie=p}},totalEchoes:{get:function(){return ni}},newPSD:ii,usePSD:Wn,scheduler:{get:function(){return ei},set:function(p){ei=p}},rejectionMapper:{get:function(){return Us},set:function(p){Us=p}},follow:function(p,x){return new ze(function(A,P){return ii(function(M,F){var j=ie;j.unhandleds=[],j.onunhandled=F,j.finalize=ft(function(){var q,le=this;q=function(){le.unhandleds.length===0?M():F(le.unhandleds[0])},Zt.push(function me(){q(),Zt.splice(Zt.indexOf(me),1)}),++Nt,ei(function(){--Nt==0&&Bi()},[])},j.finalize),p()},x,A,P)})}}),Jn&&(Jn.allSettled&&T(ze,"allSettled",function(){var p=G.apply(null,arguments).map(js);return new ze(function(x){p.length===0&&x([]);var A=p.length,P=new Array(A);p.forEach(function(M,F){return ze.resolve(M).then(function(j){return P[F]={status:"fulfilled",value:j}},function(j){return P[F]={status:"rejected",reason:j}}).then(function(){return--A||x(P)})})})}),Jn.any&&typeof AggregateError<"u"&&T(ze,"any",function(){var p=G.apply(null,arguments).map(js);return new ze(function(x,A){p.length===0&&A(new AggregateError([]));var P=p.length,M=new Array(P);p.forEach(function(F,j){return ze.resolve(F).then(function(q){return x(q)},function(q){M[j]=q,--P||A(new AggregateError(M))})})})}),Jn.withResolvers)&&(ze.withResolvers=Jn.withResolvers);var Sr={awaits:0,echoes:0,id:0},ri=0,Si=[],Ei=0,ni=0,Al=0;function ii(p,j,A,P){var M=ie,F=Object.create(M),j=(F.parent=M,F.ref=0,F.global=!1,F.id=++Al,Vn.env,F.env=Bs?{Promise:ze,PromiseProp:{value:ze,configurable:!0,writable:!0},all:ze.all,race:ze.race,allSettled:ze.allSettled,any:ze.any,resolve:ze.resolve,reject:ze.reject}:{},j&&m(F,j),++M.ref,F.finalize=function(){--this.parent.ref||this.parent.finalize()},Wn(F,p,A,P));return F.ref===0&&F.finalize(),j}function bs(){return Sr.id||(Sr.id=++ri),++Sr.awaits,Sr.echoes+=Pn,Sr.id}function qr(){return!!Sr.awaits&&(--Sr.awaits==0&&(Sr.id=0),Sr.echoes=Sr.awaits*Pn,!0)}function js(p){return Sr.echoes&&p&&p.constructor===Jn?(bs(),p.then(function(x){return qr(),x},function(x){return qr(),Or(x)})):p}function Cl(){var p=Si[Si.length-1];Si.pop(),si(p,!1)}function si(p,x){var A,P,M=ie;(x?!Sr.echoes||Ei++&&p===ie:!Ei||--Ei&&p===ie)||queueMicrotask(x?(function(F){++ni,Sr.echoes&&--Sr.echoes!=0||(Sr.echoes=Sr.awaits=Sr.id=0),Si.push(ie),si(F,!0)}).bind(null,p):Cl),p!==ie&&(ie=p,M===Vn&&(Vn.env=Ui()),Bs)&&(A=Vn.env.Promise,P=p.env,M.global||p.global)&&(Object.defineProperty(a,"Promise",P.PromiseProp),A.all=P.all,A.race=P.race,A.resolve=P.resolve,A.reject=P.reject,P.allSettled&&(A.allSettled=P.allSettled),P.any)&&(A.any=P.any)}function Ui(){var p=a.Promise;return Bs?{Promise:p,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:p.all,race:p.race,allSettled:p.allSettled,any:p.any,resolve:p.resolve,reject:p.reject}:{}}function Wn(p,x,A,P,M){var F=ie;try{return si(p,!0),x(A,P,M)}finally{si(F,!1)}}function Ha(p,x,A,P){return typeof p!="function"?p:function(){var M=ie;A&&bs(),si(x,!0);try{return p.apply(this,arguments)}finally{si(M,!1),P&&queueMicrotask(qr)}}}function go(p){Promise===Jn&&Sr.echoes===0?Ei===0?p():enqueueNativeMicroTask(p):setTimeout(p,0)}(""+Ii).indexOf("[native code]")===-1&&(bs=qr=Qe);var Or=ze.reject,yo="",nr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Qo="String expected.",ji=[],vo="__dbnames",Zo="readonly",Va="readwrite";function $n(p,x){return p?x?function(){return p.apply(this,arguments)&&x.apply(this,arguments)}:p:x}var oi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Wt(p){return typeof p!="string"||/\./.test(p)?function(x){return x}:function(x){return x[p]===void 0&&p in x&&delete(x=_e(x))[p],x}}function fr(){throw Se.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Rt(p,x){try{var A=rn(p),P=rn(x);if(A!==P)return A==="Array"?1:P==="Array"?-1:A==="binary"?1:P==="binary"?-1:A==="string"?1:P==="string"?-1:A==="Date"?1:P!=="Date"?NaN:-1;switch(A){case"number":case"Date":case"string":return x<p?1:p<x?-1:0;case"binary":for(var M=bn(p),F=bn(x),j=M.length,q=F.length,le=j<q?j:q,me=0;me<le;++me)if(M[me]!==F[me])return M[me]<F[me]?-1:1;return j===q?0:j<q?-1:1;case"Array":for(var oe=p,se=x,ue=oe.length,ne=se.length,re=ue<ne?ue:ne,ee=0;ee<re;++ee){var xe=Rt(oe[ee],se[ee]);if(xe!==0)return xe}return ue===ne?0:ue<ne?-1:1}}catch{}return NaN}function rn(p){var x=typeof p;return x=="object"&&(ArrayBuffer.isView(p)||(x=Xe(p))==="ArrayBuffer")?"binary":x}function bn(p){return p instanceof Uint8Array?p:ArrayBuffer.isView(p)?new Uint8Array(p.buffer,p.byteOffset,p.byteLength):new Uint8Array(p)}function Gi(p,x,A){var P=p.schema.yProps;return P?(x&&0<A.numFailures&&(x=x.filter(function(M,F){return!A.failures[F]})),Promise.all(P.map(function(M){return M=M.updatesTable,x?p.db.table(M).where("k").anyOf(x).delete():p.db.table(M).clear()})).then(function(){return A})):A}nn.prototype.execute=function(p){var x=this["@@propmod"];if(x.add!==void 0){var A=x.add;if(d(A))return s(s([],d(p)?p:[],!0),A).sort();if(typeof A=="number")return(Number(p)||0)+A;if(typeof A=="bigint")try{return BigInt(p)+A}catch{return BigInt(0)+A}throw new TypeError("Invalid term ".concat(A))}if(x.remove!==void 0){var P=x.remove;if(d(P))return d(p)?p.filter(function(M){return!P.includes(M)}).sort():[];if(typeof P=="number")return Number(p)-P;if(typeof P=="bigint")try{return BigInt(p)-P}catch{return BigInt(0)-P}throw new TypeError("Invalid subtrahend ".concat(P))}return A=(A=x.replacePrefix)==null?void 0:A[0],A&&typeof p=="string"&&p.startsWith(A)?x.replacePrefix[1]+p.substring(A.length):p};var qn=nn;function nn(p){this["@@propmod"]=p}function Gs(p,x){for(var A=c(x),P=A.length,M=!1,F=0;F<P;++F){var j=A[F],q=x[j],le=fe(p,j);q instanceof qn?(N(p,j,q.execute(le)),M=!0):le!==q&&(N(p,j,q),M=!0)}return M}pr.prototype._trans=function(p,x,A){var P=this._tx||ie.trans,M=this.name,F=dr&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(p==="readonly"?"read":"write"," ").concat(this.name));function j(me,oe,se){if(se.schema[M])return x(se.idbtrans,se);throw new Se.NotFound("Table "+M+" not part of transaction")}var q=Mr();try{var le=P&&P.db._novip===this.db._novip?P===ie.trans?P._promise(p,j,A):ii(function(){return P._promise(p,j,A)},{trans:P,transless:ie.transless||ie}):(function me(oe,se,ue,ne){if(oe.idbdb&&(oe._state.openComplete||ie.letThrough||oe._vip)){var re=oe._createTransaction(se,ue,oe._dbSchema);try{re.create(),oe._state.PR1398_maxLoop=3}catch(ee){return ee.name===Ke.InvalidState&&oe.isOpen()&&0<--oe._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),oe.close({disableAutoOpen:!1}),oe.open().then(function(){return me(oe,se,ue,ne)})):Or(ee)}return re._promise(se,function(ee,xe){return ii(function(){return ie.trans=re,ne(ee,xe,re)})}).then(function(ee){if(se==="readwrite")try{re.idbtrans.commit()}catch{}return se==="readonly"?ee:re._completion.then(function(){return ee})})}if(oe._state.openComplete)return Or(new Se.DatabaseClosed(oe._state.dbOpenError));if(!oe._state.isBeingOpened){if(!oe._state.autoOpen)return Or(new Se.DatabaseClosed);oe.open().catch(Qe)}return oe._state.dbReadyPromise.then(function(){return me(oe,se,ue,ne)})})(this.db,p,[this.name],j);return F&&(le._consoleTask=F,le=le.catch(function(me){return console.trace(me),Or(me)})),le}finally{q&&bi()}},pr.prototype.get=function(p,x){var A=this;return p&&p.constructor===Object?this.where(p).first(x):p==null?Or(new Se.Type("Invalid argument to Table.get()")):this._trans("readonly",function(P){return A.core.get({trans:P,key:p}).then(function(M){return A.hook.reading.fire(M)})}).then(x)},pr.prototype.where=function(p){if(typeof p=="string")return new this.db.WhereClause(this,p);if(d(p))return new this.db.WhereClause(this,"[".concat(p.join("+"),"]"));var x=c(p);if(x.length===1)return this.where(x[0]).equals(p[x[0]]);var A=this.schema.indexes.concat(this.schema.primKey).filter(function(q){if(q.compound&&x.every(function(me){return 0<=q.keyPath.indexOf(me)})){for(var le=0;le<x.length;++le)if(x.indexOf(q.keyPath[le])===-1)return!1;return!0}return!1}).sort(function(q,le){return q.keyPath.length-le.keyPath.length})[0];if(A&&this.db._maxKey!==yo)return j=A.keyPath.slice(0,x.length),this.where(j).equals(j.map(function(q){return p[q]}));!A&&dr&&console.warn("The query ".concat(JSON.stringify(p)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(x.join("+"),"]"));var P=this.schema.idxByName;function M(q,le){return Rt(q,le)===0}var j=x.reduce(function(oe,le){var me=oe[0],oe=oe[1],se=P[le],ue=p[le];return[me||se,me||!se?$n(oe,se&&se.multi?function(ne){return ne=fe(ne,le),d(ne)&&ne.some(function(re){return M(ue,re)})}:function(ne){return M(ue,fe(ne,le))}):oe]},[null,null]),F=j[0],j=j[1];return F?this.where(F.name).equals(p[F.keyPath]).filter(j):A?this.filter(j):this.where(x).equals("")},pr.prototype.filter=function(p){return this.toCollection().and(p)},pr.prototype.count=function(p){return this.toCollection().count(p)},pr.prototype.offset=function(p){return this.toCollection().offset(p)},pr.prototype.limit=function(p){return this.toCollection().limit(p)},pr.prototype.each=function(p){return this.toCollection().each(p)},pr.prototype.toArray=function(p){return this.toCollection().toArray(p)},pr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},pr.prototype.orderBy=function(p){return new this.db.Collection(new this.db.WhereClause(this,d(p)?"[".concat(p.join("+"),"]"):p))},pr.prototype.reverse=function(){return this.toCollection().reverse()},pr.prototype.mapToClass=function(p){for(var x=this.db,A=this.name,P=((this.schema.mappedClass=p).prototype instanceof fr&&(p=(j=>{var q=oe,le=j;if(typeof le!="function"&&le!==null)throw new TypeError("Class extends value "+String(le)+" is not a constructor or null");function me(){this.constructor=q}function oe(){return j!==null&&j.apply(this,arguments)||this}return t(q,le),q.prototype=le===null?Object.create(le):(me.prototype=le.prototype,new me),Object.defineProperty(oe.prototype,"db",{get:function(){return x},enumerable:!1,configurable:!0}),oe.prototype.table=function(){return A},oe})(p)),new Set),M=p.prototype;M;M=v(M))Object.getOwnPropertyNames(M).forEach(function(j){return P.add(j)});function F(j){if(!j)return j;var q,le=Object.create(p.prototype);for(q in j)if(!P.has(q))try{le[q]=j[q]}catch{}return le}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=F,this.hook("reading",F),p},pr.prototype.defineClass=function(){return this.mapToClass(function(p){m(this,p)})},pr.prototype.add=function(p,x){var A=this,P=this.schema.primKey,M=P.auto,F=P.keyPath,j=p;return F&&M&&(j=Wt(F)(p)),this._trans("readwrite",function(q){return A.core.mutate({trans:q,type:"add",keys:x!=null?[x]:null,values:[j]})}).then(function(q){return q.numFailures?ze.reject(q.failures[0]):q.lastResult}).then(function(q){if(F)try{N(p,F,q)}catch{}return q})},pr.prototype.upsert=function(p,x){var A=this,P=this.schema.primKey.keyPath;return this._trans("readwrite",function(M){return A.core.get({trans:M,key:p}).then(function(F){var j=F??{};return Gs(j,x),P&&N(j,P,p),A.core.mutate({trans:M,type:"put",values:[j],keys:[p],upsert:!0,updates:{keys:[p],changeSpecs:[x]}}).then(function(q){return q.numFailures?ze.reject(q.failures[0]):!!F})})})},pr.prototype.update=function(p,x){return typeof p!="object"||d(p)?this.where(":id").equals(p).modify(x):(p=fe(p,this.schema.primKey.keyPath))===void 0?Or(new Se.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(p).modify(x)},pr.prototype.put=function(p,x){var A=this,P=this.schema.primKey,M=P.auto,F=P.keyPath,j=p;return F&&M&&(j=Wt(F)(p)),this._trans("readwrite",function(q){return A.core.mutate({trans:q,type:"put",values:[j],keys:x!=null?[x]:null})}).then(function(q){return q.numFailures?ze.reject(q.failures[0]):q.lastResult}).then(function(q){if(F)try{N(p,F,q)}catch{}return q})},pr.prototype.delete=function(p){var x=this;return this._trans("readwrite",function(A){return x.core.mutate({trans:A,type:"delete",keys:[p]}).then(function(P){return Gi(x,[p],P)}).then(function(P){return P.numFailures?ze.reject(P.failures[0]):void 0})})},pr.prototype.clear=function(){var p=this;return this._trans("readwrite",function(x){return p.core.mutate({trans:x,type:"deleteRange",range:oi}).then(function(A){return Gi(p,null,A)})}).then(function(x){return x.numFailures?ze.reject(x.failures[0]):void 0})},pr.prototype.bulkGet=function(p){var x=this;return this._trans("readonly",function(A){return x.core.getMany({keys:p,trans:A}).then(function(P){return P.map(function(M){return x.hook.reading.fire(M)})})})},pr.prototype.bulkAdd=function(p,x,A){var P=this,M=Array.isArray(x)?x:void 0,F=(A=A||(M?void 0:x))?A.allKeys:void 0;return this._trans("readwrite",function(j){var q=P.schema.primKey,me=q.auto,q=q.keyPath;if(q&&M)throw new Se.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(M&&M.length!==p.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");var le=p.length,me=q&&me?p.map(Wt(q)):p;return P.core.mutate({trans:j,type:"add",keys:M,values:me,wantResults:F}).then(function(oe){var se=oe.numFailures,ue=oe.failures;if(se===0)return F?oe.results:oe.lastResult;throw new Ge("".concat(P.name,".bulkAdd(): ").concat(se," of ").concat(le," operations failed"),ue)})})},pr.prototype.bulkPut=function(p,x,A){var P=this,M=Array.isArray(x)?x:void 0,F=(A=A||(M?void 0:x))?A.allKeys:void 0;return this._trans("readwrite",function(j){var q=P.schema.primKey,me=q.auto,q=q.keyPath;if(q&&M)throw new Se.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(M&&M.length!==p.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");var le=p.length,me=q&&me?p.map(Wt(q)):p;return P.core.mutate({trans:j,type:"put",keys:M,values:me,wantResults:F}).then(function(oe){var se=oe.numFailures,ue=oe.failures;if(se===0)return F?oe.results:oe.lastResult;throw new Ge("".concat(P.name,".bulkPut(): ").concat(se," of ").concat(le," operations failed"),ue)})})},pr.prototype.bulkUpdate=function(p){var x=this,A=this.core,P=p.map(function(j){return j.key}),M=p.map(function(j){return j.changes}),F=[];return this._trans("readwrite",function(j){return A.getMany({trans:j,keys:P,cache:"clone"}).then(function(q){var le=[],me=[],oe=(p.forEach(function(se,ue){var ne=se.key,re=se.changes,ee=q[ue];if(ee){for(var xe=0,Ee=Object.keys(re);xe<Ee.length;xe++){var ge=Ee[xe],De=re[ge];if(ge===x.schema.primKey.keyPath){if(Rt(De,ne)!==0)throw new Se.Constraint("Cannot update primary key in bulkUpdate()")}else N(ee,ge,De)}F.push(ue),le.push(ne),me.push(ee)}}),le.length);return A.mutate({trans:j,type:"put",keys:le,values:me,updates:{keys:P,changeSpecs:M}}).then(function(se){var ue=se.numFailures,ne=se.failures;if(ue===0)return oe;for(var re=0,ee=Object.keys(ne);re<ee.length;re++){var xe,Ee=ee[re],ge=F[Number(Ee)];ge!=null&&(xe=ne[Ee],delete ne[Ee],ne[ge]=xe)}throw new Ge("".concat(x.name,".bulkUpdate(): ").concat(ue," of ").concat(oe," operations failed"),ne)})})})},pr.prototype.bulkDelete=function(p){var x=this,A=p.length;return this._trans("readwrite",function(P){return x.core.mutate({trans:P,type:"delete",keys:p}).then(function(M){return Gi(x,p,M)})}).then(function(P){var M=P.numFailures,F=P.failures;if(M===0)return P.lastResult;throw new Ge("".concat(x.name,".bulkDelete(): ").concat(M," of ").concat(A," operations failed"),F)})};var Jo=pr;function pr(){}function zs(p){function x(j,q){if(q){for(var le=arguments.length,me=new Array(le-1);--le;)me[le-1]=arguments[le];return A[j].subscribe.apply(null,me),p}if(typeof j=="string")return A[j]}var A={};x.addEventType=F;for(var P=1,M=arguments.length;P<M;++P)F(arguments[P]);return x;function F(j,q,le){var me,oe;if(typeof j!="object")return q=q||Fi,oe={subscribers:[],fire:le=le||Qe,subscribe:function(se){oe.subscribers.indexOf(se)===-1&&(oe.subscribers.push(se),oe.fire=q(oe.fire,se))},unsubscribe:function(se){oe.subscribers=oe.subscribers.filter(function(ue){return ue!==se}),oe.fire=oe.subscribers.reduce(q,le)}},A[j]=x[j]=oe;c(me=j).forEach(function(se){var ue=me[se];if(d(ue))F(se,me[se][0],me[se][1]);else{if(ue!=="asap")throw new Se.InvalidArgument("Invalid event config");var ne=F(se,yt,function(){for(var re=arguments.length,ee=new Array(re);re--;)ee[re]=arguments[re];ne.subscribers.forEach(function(xe){X(function(){xe.apply(null,ee)})})})}})}}function Hs(p,x){return R(x).from({prototype:p}),x}function sn(p,x){return!(p.filter||p.algorithm||p.or)&&(x?p.justLimit:!p.replayFilter)}function Wa(p,x){p.filter=$n(p.filter,x)}function _o(p,x,A){var P=p.replayFilter;p.replayFilter=P?function(){return $n(P(),x())}:x,p.justLimit=A&&!P}function ea(p,x){if(p.isPrimKey)return x.primaryKey;var A=x.getIndexByKeyPath(p.index);if(A)return A;throw new Se.Schema("KeyPath "+p.index+" on object store "+x.name+" is not indexed")}function ta(p,x,A){var P=ea(p,x.schema);return x.openCursor({trans:A,values:!p.keysOnly,reverse:p.dir==="prev",unique:!!p.unique,query:{index:P,range:p.range}})}function $t(p,x,A,P){var M,F,j=p.replayFilter?$n(p.filter,p.replayFilter()):p.filter;return p.or?(M={},F=function(q,le,me){var oe,se;j&&!j(le,me,function(ue){return le.stop(ue)},function(ue){return le.fail(ue)})||((se=""+(oe=le.primaryKey))=="[object ArrayBuffer]"&&(se=""+new Uint8Array(oe)),f(M,se))||(M[se]=!0,x(q,le,me))},Promise.all([p.or._iterate(F,A),ra(ta(p,P,A),p.algorithm,F,!p.keysOnly&&p.valueMapper)])):ra(ta(p,P,A),$n(p.algorithm,j),x,!p.keysOnly&&p.valueMapper)}function ra(p,x,A,P){var M=Xt(P?function(F,j,q){return A(P(F),j,q)}:A);return p.then(function(F){if(F)return F.start(function(){var j=function(){return F.continue()};x&&!x(F,function(q){return j=q},function(q){F.stop(q),j=Qe},function(q){F.fail(q),j=Qe})||M(F.value,F,function(q){return j=q}),j()})})}qt.prototype._read=function(p,x){var A=this._ctx;return A.error?A.table._trans(null,Or.bind(null,A.error)):A.table._trans("readonly",p).then(x)},qt.prototype._write=function(p){var x=this._ctx;return x.error?x.table._trans(null,Or.bind(null,x.error)):x.table._trans("readwrite",p,"locked")},qt.prototype._addAlgorithm=function(p){var x=this._ctx;x.algorithm=$n(x.algorithm,p)},qt.prototype._iterate=function(p,x){return $t(this._ctx,p,x,this._ctx.table.core)},qt.prototype.clone=function(p){var x=Object.create(this.constructor.prototype),A=Object.create(this._ctx);return p&&m(A,p),x._ctx=A,x},qt.prototype.raw=function(){return this._ctx.valueMapper=null,this},qt.prototype.each=function(p){var x=this._ctx;return this._read(function(A){return $t(x,p,A,x.table.core)})},qt.prototype.count=function(p){var x=this;return this._read(function(A){var P,M=x._ctx,F=M.table.core;return sn(M,!0)?F.count({trans:A,query:{index:ea(M,F.schema),range:M.range}}).then(function(j){return Math.min(j,M.limit)}):(P=0,$t(M,function(){return++P,!1},A,F).then(function(){return P}))}).then(p)},qt.prototype.sortBy=function(p,x){var A=p.split(".").reverse(),P=A[0],M=A.length-1;function F(le,me){return me?F(le[A[me]],me-1):le[P]}var j=this._ctx.dir==="next"?1:-1;function q(le,me){return Rt(F(le,M),F(me,M))*j}return this.toArray(function(le){return le.sort(q)}).then(x)},qt.prototype.toArray=function(p){var x=this;return this._read(function(A){var P,M,F,j=x._ctx;return j.dir==="next"&&sn(j,!0)&&0<j.limit?(P=j.valueMapper,M=ea(j,j.table.core.schema),j.table.core.query({trans:A,limit:j.limit,values:!0,query:{index:M,range:j.range}}).then(function(q){return q=q.result,P?q.map(P):q})):(F=[],$t(j,function(q){return F.push(q)},A,j.table.core).then(function(){return F}))},p)},qt.prototype.offset=function(p){var x=this._ctx;return p<=0||(x.offset+=p,sn(x)?_o(x,function(){var A=p;return function(P,M){return A===0||(A===1?--A:M(function(){P.advance(A),A=0}),!1)}}):_o(x,function(){var A=p;return function(){return--A<0}})),this},qt.prototype.limit=function(p){return this._ctx.limit=Math.min(this._ctx.limit,p),_o(this._ctx,function(){var x=p;return function(A,P,M){return--x<=0&&P(M),0<=x}},!0),this},qt.prototype.until=function(p,x){return Wa(this._ctx,function(A,P,M){return!p(A.value)||(P(M),x)}),this},qt.prototype.first=function(p){return this.limit(1).toArray(function(x){return x[0]}).then(p)},qt.prototype.last=function(p){return this.reverse().first(p)},qt.prototype.filter=function(p){var x;return Wa(this._ctx,function(A){return p(A.value)}),(x=this._ctx).isMatch=$n(x.isMatch,p),this},qt.prototype.and=function(p){return this.filter(p)},qt.prototype.or=function(p){return new this.db.WhereClause(this._ctx.table,p,this)},qt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},qt.prototype.desc=function(){return this.reverse()},qt.prototype.eachKey=function(p){var x=this._ctx;return x.keysOnly=!x.isMatch,this.each(function(A,P){p(P.key,P)})},qt.prototype.eachUniqueKey=function(p){return this._ctx.unique="unique",this.eachKey(p)},qt.prototype.eachPrimaryKey=function(p){var x=this._ctx;return x.keysOnly=!x.isMatch,this.each(function(A,P){p(P.primaryKey,P)})},qt.prototype.keys=function(p){var x=this._ctx,A=(x.keysOnly=!x.isMatch,[]);return this.each(function(P,M){A.push(M.key)}).then(function(){return A}).then(p)},qt.prototype.primaryKeys=function(p){var x=this._ctx;if(x.dir==="next"&&sn(x,!0)&&0<x.limit)return this._read(function(P){var M=ea(x,x.table.core.schema);return x.table.core.query({trans:P,values:!1,limit:x.limit,query:{index:M,range:x.range}})}).then(function(P){return P.result}).then(p);x.keysOnly=!x.isMatch;var A=[];return this.each(function(P,M){A.push(M.primaryKey)}).then(function(){return A}).then(p)},qt.prototype.uniqueKeys=function(p){return this._ctx.unique="unique",this.keys(p)},qt.prototype.firstKey=function(p){return this.limit(1).keys(function(x){return x[0]}).then(p)},qt.prototype.lastKey=function(p){return this.reverse().firstKey(p)},qt.prototype.distinct=function(){var p,x=this._ctx,x=x.index&&x.table.schema.idxByName[x.index];return x&&x.multi&&(p={},Wa(this._ctx,function(P){var P=P.primaryKey.toString(),M=f(p,P);return p[P]=!0,!M})),this},qt.prototype.modify=function(p){var x=this,A=this._ctx;return this._write(function(P){function M(ee,xe){var Ee=xe.failures;ue+=ee-xe.numFailures;for(var ge=0,De=c(Ee);ge<De.length;ge++){var Ne=De[ge];se.push(Ee[Ne])}}var F=typeof p=="function"?p:function(ee){return Gs(ee,p)},j=A.table.core,oe=j.schema.primaryKey,q=oe.outbound,le=oe.extractKey,me=200,oe=x.db._options.modifyChunkSize,se=(oe&&(me=typeof oe=="object"?oe[j.name]||oe["*"]||200:oe),[]),ue=0,ne=[],re=p===Il;return x.clone().primaryKeys().then(function(ee){function xe(ge){var De=Math.min(me,ee.length-ge),Ne=ee.slice(ge,ge+De);return(re?Promise.resolve([]):j.getMany({trans:P,keys:Ne,cache:"immutable"})).then(function(Je){var rt=[],He=[],ot=q?[]:null,et=re?Ne:[];if(!re)for(var qe=0;qe<De;++qe){var ct=Je[qe],Vt={value:_e(ct),primKey:ee[ge+qe]};F.call(Vt,Vt.value,Vt)!==!1&&(Vt.value==null?et.push(ee[ge+qe]):q||Rt(le(ct),le(Vt.value))===0?(He.push(Vt.value),q&&ot.push(ee[ge+qe])):(et.push(ee[ge+qe]),rt.push(Vt.value)))}return Promise.resolve(0<rt.length&&j.mutate({trans:P,type:"add",values:rt}).then(function(Yt){for(var Ct in Yt.failures)et.splice(parseInt(Ct),1);M(rt.length,Yt)})).then(function(){return(0<He.length||Ee&&typeof p=="object")&&j.mutate({trans:P,type:"put",keys:ot,values:He,criteria:Ee,changeSpec:typeof p!="function"&&p,isAdditionalChunk:0<ge}).then(function(Yt){return M(He.length,Yt)})}).then(function(){return(0<et.length||Ee&&re)&&j.mutate({trans:P,type:"delete",keys:et,criteria:Ee,isAdditionalChunk:0<ge}).then(function(Yt){return Gi(A.table,et,Yt)}).then(function(Yt){return M(et.length,Yt)})}).then(function(){return ee.length>ge+De&&xe(ge+me)})})}var Ee=sn(A)&&A.limit===1/0&&(typeof p!="function"||re)&&{index:A.index,range:A.range};return xe(0).then(function(){if(0<se.length)throw new Fe("Error modifying one or more objects",se,ue,ne);return ee.length})})})},qt.prototype.delete=function(){var p=this._ctx,x=p.range;return!sn(p)||p.table.schema.yProps||!p.isPrimKey&&x.type!==3?this.modify(Il):this._write(function(A){var P=p.table.core.schema.primaryKey,M=x;return p.table.core.count({trans:A,query:{index:P,range:M}}).then(function(F){return p.table.core.mutate({trans:A,type:"deleteRange",range:M}).then(function(le){var q=le.failures,le=le.numFailures;if(le)throw new Fe("Could not delete some values",Object.keys(q).map(function(me){return q[me]}),F-le);return F-le})})})};var gc=qt;function qt(){}var Il=function(p,x){return x.value=null};function Pl(p,x){return p<x?-1:p===x?0:1}function na(p,x){return x<p?-1:p===x?0:1}function on(p,x,A){return p=p instanceof ia?new p.Collection(p):p,p._ctx.error=new(A||TypeError)(x),p}function Ut(p){return new p.Collection(p,function(){return zi("")}).limit(0)}function ai(ne,x,A,P){var M,F,j,q,le,me,oe,se=A.length;if(!A.every(function(ee){return typeof ee=="string"}))return on(ne,Qo);function ue(ee){M=ee==="next"?function(Ee){return Ee.toUpperCase()}:function(Ee){return Ee.toLowerCase()},F=ee==="next"?function(Ee){return Ee.toLowerCase()}:function(Ee){return Ee.toUpperCase()},j=ee==="next"?Pl:na;var xe=A.map(function(Ee){return{lower:F(Ee),upper:M(Ee)}}).sort(function(Ee,ge){return j(Ee.lower,ge.lower)});q=xe.map(function(Ee){return Ee.upper}),le=xe.map(function(Ee){return Ee.lower}),oe=(me=ee)==="next"?"":P}ue("next");var ne=new ne.Collection(ne,function(){return an(q[0],le[se-1]+P)}),re=(ne._ondirectionchange=function(ee){ue(ee)},0);return ne._addAlgorithm(function(ee,xe,Ee){var ge=ee.key;if(typeof ge=="string"){var De=F(ge);if(x(De,le,re))return!0;for(var Ne=null,Je=re;Je<se;++Je){var rt=((He,ot,et,qe,ct,Vt)=>{for(var Yt=Math.min(He.length,qe.length),Ct=-1,Ft=0;Ft<Yt;++Ft){var yr=ot[Ft];if(yr!==qe[Ft])return ct(He[Ft],et[Ft])<0?He.substr(0,Ft)+et[Ft]+et.substr(Ft+1):ct(He[Ft],qe[Ft])<0?He.substr(0,Ft)+qe[Ft]+et.substr(Ft+1):0<=Ct?He.substr(0,Ct)+ot[Ct]+et.substr(Ct+1):null;ct(He[Ft],yr)<0&&(Ct=Ft)}return Yt<qe.length&&Vt==="next"?He+et.substr(He.length):Yt<He.length&&Vt==="prev"?He.substr(0,et.length):Ct<0?null:He.substr(0,Ct)+qe[Ct]+et.substr(Ct+1)})(ge,De,q[Je],le[Je],j,me);rt===null&&Ne===null?re=Je+1:(Ne===null||0<j(Ne,rt))&&(Ne=rt)}xe(Ne!==null?function(){ee.continue(Ne+oe)}:Ee)}return!1}),ne}function an(p,x,A,P){return{type:2,lower:p,upper:x,lowerOpen:A,upperOpen:P}}function zi(p){return{type:1,lower:p,upper:p}}Object.defineProperty(Ir.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ir.prototype.between=function(p,x,A,P){A=A!==!1,P=P===!0;try{return 0<this._cmp(p,x)||this._cmp(p,x)===0&&(A||P)&&(!A||!P)?Ut(this):new this.Collection(this,function(){return an(p,x,!A,!P)})}catch{return on(this,nr)}},Ir.prototype.equals=function(p){return p==null?on(this,nr):new this.Collection(this,function(){return zi(p)})},Ir.prototype.above=function(p){return p==null?on(this,nr):new this.Collection(this,function(){return an(p,void 0,!0)})},Ir.prototype.aboveOrEqual=function(p){return p==null?on(this,nr):new this.Collection(this,function(){return an(p,void 0,!1)})},Ir.prototype.below=function(p){return p==null?on(this,nr):new this.Collection(this,function(){return an(void 0,p,!1,!0)})},Ir.prototype.belowOrEqual=function(p){return p==null?on(this,nr):new this.Collection(this,function(){return an(void 0,p)})},Ir.prototype.startsWith=function(p){return typeof p!="string"?on(this,Qo):this.between(p,p+yo,!0,!0)},Ir.prototype.startsWithIgnoreCase=function(p){return p===""?this.startsWith(p):ai(this,function(x,A){return x.indexOf(A[0])===0},[p],yo)},Ir.prototype.equalsIgnoreCase=function(p){return ai(this,function(x,A){return x===A[0]},[p],"")},Ir.prototype.anyOfIgnoreCase=function(){var p=G.apply(Y,arguments);return p.length===0?Ut(this):ai(this,function(x,A){return A.indexOf(x)!==-1},p,"")},Ir.prototype.startsWithAnyOfIgnoreCase=function(){var p=G.apply(Y,arguments);return p.length===0?Ut(this):ai(this,function(x,A){return A.some(function(P){return x.indexOf(P)===0})},p,yo)},Ir.prototype.anyOf=function(){var p,x,A=this,P=G.apply(Y,arguments),M=this._cmp;try{P.sort(M)}catch{return on(this,nr)}return P.length===0?Ut(this):((p=new this.Collection(this,function(){return an(P[0],P[P.length-1])}))._ondirectionchange=function(F){M=F==="next"?A._ascending:A._descending,P.sort(M)},x=0,p._addAlgorithm(function(F,j,q){for(var le=F.key;0<M(le,P[x]);)if(++x===P.length)return j(q),!1;return M(le,P[x])===0||(j(function(){F.continue(P[x])}),!1)}),p)},Ir.prototype.notEqual=function(p){return this.inAnyRange([[-1/0,p],[p,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ir.prototype.noneOf=function(){var p=G.apply(Y,arguments);if(p.length===0)return new this.Collection(this);try{p.sort(this._ascending)}catch{return on(this,nr)}var x=p.reduce(function(A,P){return A?A.concat([[A[A.length-1][1],P]]):[[-1/0,P]]},null);return x.push([p[p.length-1],this.db._maxKey]),this.inAnyRange(x,{includeLowers:!1,includeUppers:!1})},Ir.prototype.inAnyRange=function(p,Ee){var A=this,P=this._cmp,M=this._ascending,F=this._descending,j=this._min,q=this._max;if(p.length===0)return Ut(this);if(!p.every(function(ge){return ge[0]!==void 0&&ge[1]!==void 0&&M(ge[0],ge[1])<=0}))return on(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Se.InvalidArgument);var le=!Ee||Ee.includeLowers!==!1,me=Ee&&Ee.includeUppers===!0,oe,se=M;function ue(ge,De){return se(ge[0],De[0])}try{(oe=p.reduce(function(ge,De){for(var Ne=0,Je=ge.length;Ne<Je;++Ne){var rt=ge[Ne];if(P(De[0],rt[1])<0&&0<P(De[1],rt[0])){rt[0]=j(rt[0],De[0]),rt[1]=q(rt[1],De[1]);break}}return Ne===Je&&ge.push(De),ge},[])).sort(ue)}catch{return on(this,nr)}var ne=0,re=me?function(ge){return 0<M(ge,oe[ne][1])}:function(ge){return 0<=M(ge,oe[ne][1])},ee=le?function(ge){return 0<F(ge,oe[ne][0])}:function(ge){return 0<=F(ge,oe[ne][0])},xe=re,Ee=new this.Collection(this,function(){return an(oe[0][0],oe[oe.length-1][1],!le,!me)});return Ee._ondirectionchange=function(ge){se=ge==="next"?(xe=re,M):(xe=ee,F),oe.sort(ue)},Ee._addAlgorithm(function(ge,De,Ne){for(var Je,rt=ge.key;xe(rt);)if(++ne===oe.length)return De(Ne),!1;return!re(Je=rt)&&!ee(Je)||(A._cmp(rt,oe[ne][1])===0||A._cmp(rt,oe[ne][0])===0||De(function(){se===M?ge.continue(oe[ne][0]):ge.continue(oe[ne][1])}),!1)}),Ee},Ir.prototype.startsWithAnyOf=function(){var p=G.apply(Y,arguments);return p.every(function(x){return typeof x=="string"})?p.length===0?Ut(this):this.inAnyRange(p.map(function(x){return[x,x+yo]})):on(this,"startsWithAnyOf() only works with strings")};var ia=Ir;function Ir(){}function Kt(p){return Xt(function(x){return xo(x),p(x.target.error),!1})}function xo(p){p.stopPropagation&&p.stopPropagation(),p.preventDefault&&p.preventDefault()}var sa="storagemutated",Vs="x-storagemutated-1",Ws=zs(null,sa),$a=(Pr.prototype._lock=function(){return J(!ie.global),++this._reculock,this._reculock!==1||ie.global||(ie.lockOwnerFor=this),this},Pr.prototype._unlock=function(){if(J(!ie.global),--this._reculock==0)for(ie.global||(ie.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var p=this._blockedFuncs.shift();try{Wn(p[1],p[0])}catch{}}return this},Pr.prototype._locked=function(){return this._reculock&&ie.lockOwnerFor!==this},Pr.prototype.create=function(p){var x=this;if(this.mode){var A=this.db.idbdb,P=this.db._state.dbOpenError;if(J(!this.idbtrans),!p&&!A)switch(P&&P.name){case"DatabaseClosedError":throw new Se.DatabaseClosed(P);case"MissingAPIError":throw new Se.MissingAPI(P.message,P);default:throw new Se.OpenFailed(P)}if(!this.active)throw new Se.TransactionInactive;J(this._completion._state===null),(p=this.idbtrans=p||(this.db.core||A).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Xt(function(M){xo(M),x._reject(p.error)}),p.onabort=Xt(function(M){xo(M),x.active&&x._reject(new Se.Abort(p.error)),x.active=!1,x.on("abort").fire(M)}),p.oncomplete=Xt(function(){x.active=!1,x._resolve(),"mutatedParts"in p&&Ws.storagemutated.fire(p.mutatedParts)})}return this},Pr.prototype._promise=function(p,x,A){var P,M=this;return p==="readwrite"&&this.mode!=="readwrite"?Or(new Se.ReadOnly("Transaction is readonly")):this.active?this._locked()?new ze(function(F,j){M._blockedFuncs.push([function(){M._promise(p,x,A).then(F,j)},ie])}):A?ii(function(){var F=new ze(function(j,q){M._lock();var le=x(j,q,M);le&&le.then&&le.then(j,q)});return F.finally(function(){return M._unlock()}),F._lib=!0,F}):((P=new ze(function(F,j){var q=x(F,j,M);q&&q.then&&q.then(F,j)}))._lib=!0,P):Or(new Se.TransactionInactive)},Pr.prototype._root=function(){return this.parent?this.parent._root():this},Pr.prototype.waitFor=function(p){var x,A=this._root(),P=ze.resolve(p),M=(A._waitingFor?A._waitingFor=A._waitingFor.then(function(){return P}):(A._waitingFor=P,A._waitingQueue=[],x=A.idbtrans.objectStore(A.storeNames[0]),(function F(){for(++A._spinCount;A._waitingQueue.length;)A._waitingQueue.shift()();A._waitingFor&&(x.get(-1/0).onsuccess=F)})()),A._waitingFor);return new ze(function(F,j){P.then(function(q){return A._waitingQueue.push(Xt(F.bind(null,q)))},function(q){return A._waitingQueue.push(Xt(j.bind(null,q)))}).finally(function(){A._waitingFor===M&&(A._waitingFor=null)})})},Pr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Se.Abort))},Pr.prototype.table=function(p){var x=this._memoizedTables||(this._memoizedTables={});if(f(x,p))return x[p];var A=this.schema[p];if(A)return(A=new this.db.Table(p,A,this)).core=this.db.core.table(p),x[p]=A;throw new Se.NotFound("Table "+p+" not part of transaction")},Pr);function Pr(){}function kn(p,x,A,P,M,F,j,q){return{name:p,keyPath:x,unique:A,multi:P,auto:M,compound:F,src:(A&&!j?"&":"")+(P?"*":"")+(M?"++":"")+Hi(x),type:q}}function Hi(p){return typeof p=="string"?p:p?"["+[].join.call(p,"+")+"]":""}function Vi(p,x,A){return{name:p,primKey:x,indexes:A,mappedClass:null,idxByName:(P=function(M){return[M.name,M]},A.reduce(function(M,F,j){return F=P(F,j),F&&(M[F[0]]=F[1]),M},{}))};var P}var Ti=function(p){try{return p.only([[]]),Ti=function(){return[[]]},[[]]}catch{return Ti=function(){return yo},yo}};function Ss(p){return p==null?function(){}:typeof p=="string"?(x=p).split(".").length===1?function(A){return A[x]}:function(A){return fe(A,x)}:function(A){return fe(A,p)};var x}function Mn(p){return[].slice.call(p)}var oa=0;function Wi(p){return p==null?":id":typeof p=="string"?p:"[".concat(p.join("+"),"]")}function aa(p,x,le){function P(re){if(re.type===3)return null;if(re.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var se=re.lower,ue=re.upper,ne=re.lowerOpen,re=re.upperOpen;return se===void 0?ue===void 0?null:x.upperBound(ue,!!re):ue===void 0?x.lowerBound(se,!!ne):x.bound(se,ue,!!ne,!!re)}function M(oe){var se,ue=oe.name;return{name:ue,schema:oe,mutate:function(ne){var re=ne.trans,ee=ne.type,xe=ne.keys,Ee=ne.values,ge=ne.range;return new Promise(function(De,Ne){De=Xt(De);var Je=re.objectStore(ue),rt=Je.keyPath==null,He=ee==="put"||ee==="add";if(!He&&ee!=="delete"&&ee!=="deleteRange")throw new Error("Invalid operation type: "+ee);var ot,et=(xe||Ee||{length:1}).length;if(xe&&Ee&&xe.length!==Ee.length)throw new Error("Given keys array must have same length as given values array.");if(et===0)return De({numFailures:0,failures:{},results:[],lastResult:void 0});function qe(rr){++Yt,xo(rr)}var ct=[],Vt=[],Yt=0;if(ee==="deleteRange"){if(ge.type===4)return De({numFailures:Yt,failures:Vt,results:[],lastResult:void 0});ge.type===3?ct.push(ot=Je.clear()):ct.push(ot=Je.delete(P(ge)))}else{var rt=He?rt?[Ee,xe]:[Ee,null]:[xe,null],Ct=rt[0],Ft=rt[1];if(He)for(var yr=0;yr<et;++yr)ct.push(ot=Ft&&Ft[yr]!==void 0?Je[ee](Ct[yr],Ft[yr]):Je[ee](Ct[yr])),ot.onerror=qe;else for(yr=0;yr<et;++yr)ct.push(ot=Je[ee](Ct[yr])),ot.onerror=qe}function Dn(rr){rr=rr.target.result,ct.forEach(function(es,ga){return es.error!=null&&(Vt[ga]=es.error)}),De({numFailures:Yt,failures:Vt,results:ee==="delete"?xe:ct.map(function(es){return es.result}),lastResult:rr})}ot.onerror=function(rr){qe(rr),Dn(rr)},ot.onsuccess=Dn})},getMany:function(ne){var re=ne.trans,ee=ne.keys;return new Promise(function(xe,Ee){xe=Xt(xe);for(var ge,De=re.objectStore(ue),Ne=ee.length,Je=new Array(Ne),rt=0,He=0,ot=function(ct){ct=ct.target,Je[ct._pos]=ct.result,++He===rt&&xe(Je)},et=Kt(Ee),qe=0;qe<Ne;++qe)ee[qe]!=null&&((ge=De.get(ee[qe]))._pos=qe,ge.onsuccess=ot,ge.onerror=et,++rt);rt===0&&xe(Je)})},get:function(ne){var re=ne.trans,ee=ne.key;return new Promise(function(xe,Ee){xe=Xt(xe);var ge=re.objectStore(ue).get(ee);ge.onsuccess=function(De){return xe(De.target.result)},ge.onerror=Kt(Ee)})},query:(se=q,function(ne){return new Promise(function(re,ee){re=Xt(re);var xe,Ee,ge,He=ne.trans,De=ne.values,Ne=ne.limit,rt=ne.query,Je=Ne===1/0?void 0:Ne,ot=rt.index,rt=rt.range,He=He.objectStore(ue),He=ot.isPrimaryKey?He:He.index(ot.name),ot=P(rt);if(Ne===0)return re({result:[]});se?((rt=De?He.getAll(ot,Je):He.getAllKeys(ot,Je)).onsuccess=function(et){return re({result:et.target.result})},rt.onerror=Kt(ee)):(xe=0,Ee=!De&&"openKeyCursor"in He?He.openKeyCursor(ot):He.openCursor(ot),ge=[],Ee.onsuccess=function(et){var qe=Ee.result;return!qe||(ge.push(De?qe.value:qe.primaryKey),++xe===Ne)?re({result:ge}):void qe.continue()},Ee.onerror=Kt(ee))})}),openCursor:function(ne){var re=ne.trans,ee=ne.values,xe=ne.query,Ee=ne.reverse,ge=ne.unique;return new Promise(function(De,Ne){De=Xt(De);var He=xe.index,Je=xe.range,rt=re.objectStore(ue),rt=He.isPrimaryKey?rt:rt.index(He.name),He=Ee?ge?"prevunique":"prev":ge?"nextunique":"next",ot=!ee&&"openKeyCursor"in rt?rt.openKeyCursor(P(Je),He):rt.openCursor(P(Je),He);ot.onerror=Kt(Ne),ot.onsuccess=Xt(function(et){var qe,ct,Vt,Yt,Ct=ot.result;Ct?(Ct.___id=++oa,Ct.done=!1,qe=Ct.continue.bind(Ct),ct=(ct=Ct.continuePrimaryKey)&&ct.bind(Ct),Vt=Ct.advance.bind(Ct),Yt=function(){throw new Error("Cursor not stopped")},Ct.trans=re,Ct.stop=Ct.continue=Ct.continuePrimaryKey=Ct.advance=function(){throw new Error("Cursor not started")},Ct.fail=Xt(Ne),Ct.next=function(){var Ft=this,yr=1;return this.start(function(){return yr--?Ft.continue():Ft.stop()}).then(function(){return Ft})},Ct.start=function(Ft){function yr(){if(ot.result)try{Ft()}catch(rr){Ct.fail(rr)}else Ct.done=!0,Ct.start=function(){throw new Error("Cursor behind last entry")},Ct.stop()}var Dn=new Promise(function(rr,es){rr=Xt(rr),ot.onerror=Kt(es),Ct.fail=es,Ct.stop=function(ga){Ct.stop=Ct.continue=Ct.continuePrimaryKey=Ct.advance=Yt,rr(ga)}});return ot.onsuccess=Xt(function(rr){ot.onsuccess=yr,yr()}),Ct.continue=qe,Ct.continuePrimaryKey=ct,Ct.advance=Vt,yr(),Dn},De(Ct)):De(null)},Ne)})},count:function(ne){var re=ne.query,ee=ne.trans,xe=re.index,Ee=re.range;return new Promise(function(ge,De){var Ne=ee.objectStore(ue),Ne=xe.isPrimaryKey?Ne:Ne.index(xe.name),Je=P(Ee),Je=Je?Ne.count(Je):Ne.count();Je.onsuccess=Xt(function(rt){return ge(rt.target.result)}),Je.onerror=Kt(De)})}}}F=le,j=Mn((le=p).objectStoreNames);var F,le={schema:{name:le.name,tables:j.map(function(oe){return F.objectStore(oe)}).map(function(oe){var se=oe.keyPath,ue=oe.autoIncrement,re=d(se),ne={},re={name:oe.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:se==null,compound:re,keyPath:se,autoIncrement:ue,unique:!0,extractKey:Ss(se)},indexes:Mn(oe.indexNames).map(function(ee){return oe.index(ee)}).map(function(ge){var De=ge.name,xe=ge.unique,Ee=ge.multiEntry,ge=ge.keyPath,De={name:De,compound:d(ge),keyPath:ge,unique:xe,multiEntry:Ee,extractKey:Ss(ge)};return ne[Wi(ge)]=De}),getIndexByKeyPath:function(ee){return ne[Wi(ee)]}};return ne[":id"]=re.primaryKey,se!=null&&(ne[Wi(se)]=re.primaryKey),re})},hasGetAll:0<j.length&&"getAll"in F.objectStore(j[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},j=le.schema,q=le.hasGetAll,le=j.tables.map(M),me={};return le.forEach(function(oe){return me[oe.name]=oe}),{stack:"dbcore",transaction:p.transaction.bind(p),table:function(oe){if(me[oe])return me[oe];throw new Error("Table '".concat(oe,"' not found"))},MIN_KEY:-1/0,MAX_KEY:Ti(x),schema:j}}function wo(p,x,A,P){return A=A.IDBKeyRange,x=aa(x,A,P),{dbcore:p.dbcore.reduce(function(M,F){return F=F.create,r(r({},M),F(M))},x)}}function ln(p,x){var A=x.db,A=wo(p._middlewares,A,p._deps,x);p.core=A.dbcore,p.tables.forEach(function(P){var M=P.name;p.core.schema.tables.some(function(F){return F.name===M})&&(P.core=p.core.table(M),p[M]instanceof p.Table)&&(p[M].core=P.core)})}function vn(p,x,A,P){A.forEach(function(M){var F=P[M];x.forEach(function(j){var q=(function le(me,oe){return k(me,oe)||(me=v(me))&&le(me,oe)})(j,M);(!q||"value"in q&&q.value===void 0)&&(j===p.Transaction.prototype||j instanceof p.Transaction?T(j,M,{get:function(){return this.table(M)},set:function(le){b(this,M,{value:le,writable:!0,configurable:!0,enumerable:!0})}}):j[M]=new p.Table(M,F))})})}function _n(p,x){x.forEach(function(A){for(var P in A)A[P]instanceof p.Table&&delete A[P]})}function li(p,x){return p._cfg.version-x._cfg.version}function ui(p,x,A,P){var M=p._dbSchema,F=(A.objectStoreNames.contains("$meta")&&!M.$meta&&(M.$meta=Vi("$meta",$i("")[0],[]),p._storeNames.push("$meta")),p._createTransaction("readwrite",p._storeNames,M)),j=(F.create(A),F._completion.catch(P),F._reject.bind(F)),q=ie.transless||ie;ii(function(){if(ie.trans=F,ie.transless=q,x!==0)return ln(p,A),me=x,((le=F).storeNames.includes("$meta")?le.table("$meta").get("version").then(function(oe){return oe??me}):ze.resolve(me)).then(function(xe){var se=p,ue=xe,ne=F,re=A,ee=[],xe=se._versions,Ee=se._dbSchema=Fr(0,se.idbdb,re);return(xe=xe.filter(function(ge){return ge._cfg.version>=ue})).length===0?ze.resolve():(xe.forEach(function(ge){ee.push(function(){var De,Ne,Je,rt=Ee,He=ge._cfg.dbschema,ot=(ir(se,rt,re),ir(se,He,re),Ee=se._dbSchema=He,bo(rt,He)),et=(ot.add.forEach(function(qe){qs(re,qe[0],qe[1].primKey,qe[1].indexes)}),ot.change.forEach(function(qe){if(qe.recreate)throw new Se.Upgrade("Not yet support for changing primary key");var ct=re.objectStore(qe.name);qe.add.forEach(function(Vt){return ur(ct,Vt)}),qe.change.forEach(function(Vt){ct.deleteIndex(Vt.name),ur(ct,Vt)}),qe.del.forEach(function(Vt){return ct.deleteIndex(Vt)})}),ge._cfg.contentUpgrade);if(et&&ge._cfg.version>ue)return ln(se,re),ne._memoizedTables={},De=te(He),ot.del.forEach(function(qe){De[qe]=rt[qe]}),_n(se,[se.Transaction.prototype]),vn(se,[se.Transaction.prototype],c(De),De),ne.schema=De,(Ne=U(et))&&bs(),He=ze.follow(function(){var qe;(Je=et(ne))&&Ne&&(qe=qr.bind(null,null),Je.then(qe,qe))}),Je&&typeof Je.then=="function"?ze.resolve(Je):He.then(function(){return Je})}),ee.push(function(De){var Ne,Je,rt=ge._cfg.dbschema;Ne=rt,Je=De,[].slice.call(Je.db.objectStoreNames).forEach(function(He){return Ne[He]==null&&Je.db.deleteObjectStore(He)}),_n(se,[se.Transaction.prototype]),vn(se,[se.Transaction.prototype],se._storeNames,se._dbSchema),ne.schema=se._dbSchema}),ee.push(function(De){se.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(se.idbdb.version/10)===ge._cfg.version?(se.idbdb.deleteObjectStore("$meta"),delete se._dbSchema.$meta,se._storeNames=se._storeNames.filter(function(Ne){return Ne!=="$meta"})):De.objectStore("$meta").put(ge._cfg.version,"version"))})}),(function ge(){return ee.length?ze.resolve(ee.shift()(ne.idbtrans)).then(ge):ze.resolve()})().then(function(){qa(Ee,re)}))}).catch(j);var le,me;c(M).forEach(function(oe){qs(A,oe,M[oe].primKey,M[oe].indexes)}),ln(p,A),ze.follow(function(){return p.on.populate.fire(F)}).catch(j)})}function $s(p,x){qa(p._dbSchema,x),x.db.version%10!=0||x.objectStoreNames.contains("$meta")||x.db.createObjectStore("$meta").add(Math.ceil(x.db.version/10-1),"version");var A=Fr(0,p.idbdb,x);ir(p,p._dbSchema,x);for(var P=0,M=bo(A,p._dbSchema).change;P<M.length;P++){var F=(j=>{if(j.change.length||j.recreate)return console.warn("Unable to patch indexes of table ".concat(j.name," because it has changes on the type of index or primary key.")),{value:void 0};var q=x.objectStore(j.name);j.add.forEach(function(le){dr&&console.debug("Dexie upgrade patch: Creating missing index ".concat(j.name,".").concat(le.src)),ur(q,le)})})(M[P]);if(typeof F=="object")return F.value}}function bo(p,x){var A,P={del:[],add:[],change:[]};for(A in p)x[A]||P.del.push(A);for(A in x){var M=p[A],F=x[A];if(M){var j={name:A,def:F,recreate:!1,del:[],add:[],change:[]};if(""+(M.primKey.keyPath||"")!=""+(F.primKey.keyPath||"")||M.primKey.auto!==F.primKey.auto)j.recreate=!0,P.change.push(j);else{var q=M.idxByName,le=F.idxByName,me=void 0;for(me in q)le[me]||j.del.push(me);for(me in le){var oe=q[me],se=le[me];oe?oe.src!==se.src&&j.change.push(se):j.add.push(se)}(0<j.del.length||0<j.add.length||0<j.change.length)&&P.change.push(j)}}else P.add.push([A,F])}return P}function qs(p,x,A,P){var M=p.db.createObjectStore(x,A.keyPath?{keyPath:A.keyPath,autoIncrement:A.auto}:{autoIncrement:A.auto});P.forEach(function(F){return ur(M,F)})}function qa(p,x){c(p).forEach(function(A){x.db.objectStoreNames.contains(A)||(dr&&console.debug("Dexie: Creating missing table",A),qs(x,A,p[A].primKey,p[A].indexes))})}function ur(p,x){p.createIndex(x.name,x.keyPath,{unique:x.unique,multiEntry:x.multi})}function Fr(p,x,A){var P={};return V(x.objectStoreNames,0).forEach(function(M){for(var F=A.objectStore(M),j=kn(Hi(me=F.keyPath),me||"",!0,!1,!!F.autoIncrement,me&&typeof me!="string",!0),q=[],le=0;le<F.indexNames.length;++le){var oe=F.index(F.indexNames[le]),me=oe.keyPath,oe=kn(oe.name,me,!!oe.unique,!!oe.multiEntry,!1,me&&typeof me!="string",!1);q.push(oe)}P[M]=Vi(M,j,q)}),P}function ir(p,x,A){for(var P=A.db.objectStoreNames,M=0;M<P.length;++M){var F=P[M],j=A.objectStore(F);p._hasGetAll="getAll"in j;for(var q=0;q<j.indexNames.length;++q){var le,me=j.indexNames[q],oe=j.index(me).keyPath,oe=typeof oe=="string"?oe:"["+V(oe).join("+")+"]";x[F]&&(le=x[F].idxByName[oe])&&(le.name=me,delete x[F].idxByName[oe],x[F].idxByName[me]=le)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(p._hasGetAll=!1)}function $i(p){return p.split(",").map(function(x,A){var M=x.split(":"),P=(P=M[1])==null?void 0:P.trim(),M=(x=M[0].trim()).replace(/([&*]|\+\+)/g,""),F=/^\[/.test(M)?M.match(/^\[(.*)\]$/)[1].split("+"):M;return kn(M,F||null,/\&/.test(x),/\*/.test(x),/\+\+/.test(x),d(F),A===0,P)})}Es.prototype._createTableSchema=Vi,Es.prototype._parseIndexSyntax=$i,Es.prototype._parseStoresSpec=function(p,x){var A=this;c(p).forEach(function(P){if(p[P]!==null){var M=A._parseIndexSyntax(p[P]),F=M.shift();if(!F)throw new Se.Schema("Invalid schema for table "+P+": "+p[P]);if(F.unique=!0,F.multi)throw new Se.Schema("Primary key cannot be multiEntry*");M.forEach(function(j){if(j.auto)throw new Se.Schema("Only primary key can be marked as autoIncrement (++)");if(!j.keyPath)throw new Se.Schema("Index must have a name and cannot be an empty string")}),F=A._createTableSchema(P,F,M),x[P]=F}})},Es.prototype.stores=function(A){var x=this.db,A=(this._cfg.storesSource=this._cfg.storesSource?m(this._cfg.storesSource,A):A,x._versions),P={},M={};return A.forEach(function(F){m(P,F._cfg.storesSource),M=F._cfg.dbschema={},F._parseStoresSpec(P,M)}),x._dbSchema=M,_n(x,[x._allTables,x,x.Transaction.prototype]),vn(x,[x._allTables,x,x.Transaction.prototype,this._cfg.tables],c(M),M),x._storeNames=c(M),this},Es.prototype.upgrade=function(p){return this._cfg.contentUpgrade=Nr(this._cfg.contentUpgrade||Qe,p),this};var Ai=Es;function Es(){}function la(p,x){var A=p._dbNamesDB;return A||(A=p._dbNamesDB=new Zi(vo,{addons:[],indexedDB:p,IDBKeyRange:x})).version(1).stores({dbnames:"name"}),A.table("dbnames")}function Ts(p){return p&&typeof p.databases=="function"}function Xs(p){return ii(function(){return ie.letThrough=!0,p()})}function Xa(p){return!("from"in p)}var zr=function(p,x){var A;if(!this)return A=new zr,p&&"d"in p&&m(A,p),A;m(this,arguments.length?{d:1,from:p,to:1<arguments.length?x:p}:{d:0})};function ua(p,x,A){var P=Rt(x,A);if(!isNaN(P)){if(0<P)throw RangeError();if(Xa(p))return m(p,{from:x,to:A,d:1});var P=p.l,M=p.r;if(Rt(A,p.from)<0)return P?ua(P,x,A):p.l={from:x,to:A,d:1,l:null,r:null},Ka(p);if(0<Rt(x,p.to))return M?ua(M,x,A):p.r={from:x,to:A,d:1,l:null,r:null},Ka(p);Rt(x,p.from)<0&&(p.from=x,p.l=null,p.d=M?M.d+1:1),0<Rt(A,p.to)&&(p.to=A,p.r=null,p.d=p.l?p.l.d+1:1),x=!p.r,P&&!p.l&&qi(p,P),M&&x&&qi(p,M)}}function qi(p,x){Xa(x)||(function A(P,M){var F=M.from,j=M.l,q=M.r;ua(P,F,M.to),j&&A(P,j),q&&A(P,q)})(p,x)}function ca(p,x){var A=Rl(x),P=A.next();if(!P.done)for(var M=P.value,F=Rl(p),j=F.next(M.from),q=j.value;!P.done&&!j.done;){if(Rt(q.from,M.to)<=0&&0<=Rt(q.to,M.from))return!0;Rt(M.from,q.from)<0?M=(P=A.next(q.from)).value:q=(j=F.next(M.from)).value}return!1}function Rl(p){var x=Xa(p)?null:{s:0,n:p};return{next:function(A){for(var P=0<arguments.length;x;)switch(x.s){case 0:if(x.s=1,P)for(;x.n.l&&Rt(A,x.n.from)<0;)x={up:x,n:x.n.l,s:1};else for(;x.n.l;)x={up:x,n:x.n.l,s:1};case 1:if(x.s=2,!P||Rt(A,x.n.to)<=0)return{value:x.n,done:!1};case 2:if(x.n.r){x.s=3,x={up:x,n:x.n.r,s:0};continue}case 3:x=x.up}return{done:!0}}}}function Ka(p){var x,A,P,M=(((M=p.r)==null?void 0:M.d)||0)-(((M=p.l)==null?void 0:M.d)||0),M=1<M?"r":M<-1?"l":"";M&&(x=M=="r"?"l":"r",A=r({},p),P=p[M],p.from=P.from,p.to=P.to,p[M]=P[M],A[M]=P[x],(p[x]=A).d=yc(A)),p.d=yc(p)}function yc(A){var x=A.r,A=A.l;return(x?A?Math.max(x.d,A.d):x.d:A?A.d:0)+1}function On(p,x){return c(x).forEach(function(A){p[A]?qi(p[A],x[A]):p[A]=(function P(M){var F,j,q={};for(F in M)f(M,F)&&(j=M[F],q[F]=!j||typeof j!="object"||Pe.has(j.constructor)?j:P(j));return q})(x[A])}),p}function ha(p,x){return p.all||x.all||Object.keys(p).some(function(A){return x[A]&&ca(x[A],p[A])})}y(zr.prototype,((gn={add:function(p){return qi(this,p),this},addKey:function(p){return ua(this,p,p),this},addKeys:function(p){var x=this;return p.forEach(function(A){return ua(x,A,A)}),this},hasKey:function(p){var x=Rl(this).next(p).value;return x&&Rt(x.from,p)<=0&&0<=Rt(x.to,p)}})[H]=function(){return Rl(this)},gn));var Ci={},Ks={},Ya=!1;function da(p){On(Ks,p),Ya||(Ya=!0,setTimeout(function(){Ya=!1,kl(Ks,!(Ks={}))},0))}function kl(p,x){x===void 0&&(x=!1);var A=new Set;if(p.all)for(var P=0,M=Object.values(Ci);P<M.length;P++)fa(q=M[P],p,A,x);else for(var F in p){var j,q,F=/^idb\:\/\/(.*)\/(.*)\//.exec(F);F&&(j=F[1],F=F[2],q=Ci["idb://".concat(j,"/").concat(F)])&&fa(q,p,A,x)}A.forEach(function(le){return le()})}function fa(p,x,A,P){for(var M=[],F=0,j=Object.entries(p.queries.query);F<j.length;F++){for(var q=j[F],le=q[0],me=[],oe=0,se=q[1];oe<se.length;oe++){var ue=se[oe];ha(x,ue.obsSet)?ue.subscribers.forEach(function(xe){return A.add(xe)}):P&&me.push(ue)}P&&M.push([le,me])}if(P)for(var ne=0,re=M;ne<re.length;ne++){var ee=re[ne],le=ee[0],me=ee[1];p.queries.query[le]=me}}function wu(p){var x=p._state,A=p._deps.indexedDB;if(x.isBeingOpened||p.idbdb)return x.dbReadyPromise.then(function(){return x.dbOpenError?Or(x.dbOpenError):p});x.isBeingOpened=!0,x.dbOpenError=null,x.openComplete=!1;var P=x.openCanceller,M=Math.round(10*p.verno),F=!1;function j(){if(x.openCanceller!==P)throw new Se.DatabaseClosed("db.open() was cancelled")}function q(){return new ze(function(ue,ne){if(j(),!A)throw new Se.MissingAPI;var re=p.name,ee=x.autoSchema||!M?A.open(re):A.open(re,M);if(!ee)throw new Se.MissingAPI;ee.onerror=Kt(ne),ee.onblocked=Xt(p._fireOnBlocked),ee.onupgradeneeded=Xt(function(xe){var Ee;oe=ee.transaction,x.autoSchema&&!p._options.allowEmptyDB?(ee.onerror=xo,oe.abort(),ee.result.close(),(Ee=A.deleteDatabase(re)).onsuccess=Ee.onerror=Xt(function(){ne(new Se.NoSuchDatabase("Database ".concat(re," doesnt exist")))})):(oe.onerror=Kt(ne),Ee=xe.oldVersion>Math.pow(2,62)?0:xe.oldVersion,se=Ee<1,p.idbdb=ee.result,F&&$s(p,oe),ui(p,Ee/10,oe,ne))},ne),ee.onsuccess=Xt(function(){oe=null;var xe,Ee,ge,De,Ne,Je,rt=p.idbdb=ee.result,He=V(rt.objectStoreNames);if(0<He.length)try{var ot=rt.transaction((Ne=He).length===1?Ne[0]:Ne,"readonly");if(x.autoSchema)Je=rt,De=ot,(ge=p).verno=Je.version/10,De=ge._dbSchema=Fr(0,Je,De),ge._storeNames=V(Je.objectStoreNames,0),vn(ge,[ge._allTables],c(De),De);else if(ir(p,p._dbSchema,ot),Ee=ot,((Ee=bo(Fr(0,(xe=p).idbdb,Ee),xe._dbSchema)).add.length||Ee.change.some(function(et){return et.add.length||et.change.length}))&&!F)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),rt.close(),M=rt.version+1,F=!0,ue(q());ln(p,ot)}catch{}ji.push(p),rt.onversionchange=Xt(function(et){x.vcFired=!0,p.on("versionchange").fire(et)}),rt.onclose=Xt(function(){p.close({disableAutoOpen:!1})}),se&&(He=p._deps,Ne=re,Ts(Je=He.indexedDB)||Ne===vo||la(Je,He.IDBKeyRange).put({name:Ne}).catch(Qe)),ue()},ne)}).catch(function(ue){switch(ue?.name){case"UnknownError":if(0<x.PR1398_maxLoop)return x.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),q();break;case"VersionError":if(0<M)return M=0,q()}return ze.reject(ue)})}var le,me=x.dbReadyResolve,oe=null,se=!1;return ze.race([P,(typeof navigator>"u"?ze.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ue){function ne(){return indexedDB.databases().finally(ue)}le=setInterval(ne,100),ne()}).finally(function(){return clearInterval(le)}):Promise.resolve()).then(q)]).then(function(){return j(),x.onReadyBeingFired=[],ze.resolve(Xs(function(){return p.on.ready.fire(p.vip)})).then(function ue(){var ne;if(0<x.onReadyBeingFired.length)return ne=x.onReadyBeingFired.reduce(Nr,Qe),x.onReadyBeingFired=[],ze.resolve(Xs(function(){return ne(p.vip)})).then(ue)})}).finally(function(){x.openCanceller===P&&(x.onReadyBeingFired=null,x.isBeingOpened=!1)}).catch(function(ue){x.dbOpenError=ue;try{oe&&oe.abort()}catch{}return P===x.openCanceller&&p._close(),Or(ue)}).finally(function(){x.openComplete=!0,me()}).then(function(){var ue;return se&&(ue={},p.tables.forEach(function(ne){ne.schema.indexes.forEach(function(re){re.name&&(ue["idb://".concat(p.name,"/").concat(ne.name,"/").concat(re.name)]=new zr(-1/0,[[[]]]))}),ue["idb://".concat(p.name,"/").concat(ne.name,"/")]=ue["idb://".concat(p.name,"/").concat(ne.name,"/:dels")]=new zr(-1/0,[[[]]])}),Ws(sa).fire(ue),kl(ue,!0)),p})}function Ys(p){function x(F){return p.next(F)}var A=M(x),P=M(function(F){return p.throw(F)});function M(F){return function(q){var q=F(q),le=q.value;return q.done?le:le&&typeof le.then=="function"?le.then(A,P):d(le)?Promise.all(le).then(A,P):A(le)}}return M(x)()}function Sn(p,x,A){for(var P=d(p)?p.slice():[p],M=0;M<A;++M)P.push(x);return P}var Qs={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(p){return r(r({},p),{table:function(P){var A=p.table(P),P=A.schema,M={},F=[];function j(ue,ne,re){var ge=Wi(ue),ee=M[ge]=M[ge]||[],xe=ue==null?0:typeof ue=="string"?1:ue.length,Ee=0<ne,ge=r(r({},re),{name:Ee?"".concat(ge,"(virtual-from:").concat(re.name,")"):re.name,lowLevelIndex:re,isVirtual:Ee,keyTail:ne,keyLength:xe,extractKey:Ss(ue),unique:!Ee&&re.unique});return ee.push(ge),ge.isPrimaryKey||F.push(ge),1<xe&&j(xe===2?ue[0]:ue.slice(0,xe-1),ne+1,re),ee.sort(function(De,Ne){return De.keyTail-Ne.keyTail}),ge}var q=j(P.primaryKey.keyPath,0,P.primaryKey);M[":id"]=[q];for(var le=0,me=P.indexes;le<me.length;le++){var oe=me[le];j(oe.keyPath,0,oe)}function se(ue){var ne,re=ue.query.index;return re.isVirtual?r(r({},ue),{query:{index:re.lowLevelIndex,range:(ne=ue.query.range,re=re.keyTail,{type:ne.type===1?2:ne.type,lower:Sn(ne.lower,ne.lowerOpen?p.MAX_KEY:p.MIN_KEY,re),lowerOpen:!0,upper:Sn(ne.upper,ne.upperOpen?p.MIN_KEY:p.MAX_KEY,re),upperOpen:!0})}}):ue}return r(r({},A),{schema:r(r({},P),{primaryKey:q,indexes:F,getIndexByKeyPath:function(ue){return(ue=M[Wi(ue)])&&ue[0]}}),count:function(ue){return A.count(se(ue))},query:function(ue){return A.query(se(ue))},openCursor:function(ue){var ne=ue.query.index,re=ne.keyTail,ee=ne.keyLength;return ne.isVirtual?A.openCursor(se(ue)).then(function(Ee){return Ee&&xe(Ee)}):A.openCursor(ue);function xe(Ee){return Object.create(Ee,{continue:{value:function(ge){ge!=null?Ee.continue(Sn(ge,ue.reverse?p.MAX_KEY:p.MIN_KEY,re)):ue.unique?Ee.continue(Ee.key.slice(0,ee).concat(ue.reverse?p.MIN_KEY:p.MAX_KEY,re)):Ee.continue()}},continuePrimaryKey:{value:function(ge,De){Ee.continuePrimaryKey(Sn(ge,p.MAX_KEY,re),De)}},primaryKey:{get:function(){return Ee.primaryKey}},key:{get:function(){var ge=Ee.key;return ee===1?ge[0]:ge.slice(0,ee)}},value:{get:function(){return Ee.value}}})}}})}})}};function Qa(p,x,A,P){return A=A||{},P=P||"",c(p).forEach(function(M){var F,j,q;f(x,M)?(F=p[M],j=x[M],typeof F=="object"&&typeof j=="object"&&F&&j?(q=Xe(F))!==Xe(j)?A[P+M]=x[M]:q==="Object"?Qa(F,j,A,P+M+"."):F!==j&&(A[P+M]=x[M]):F!==j&&(A[P+M]=x[M])):A[P+M]=void 0}),c(x).forEach(function(M){f(p,M)||(A[P+M]=x[M])}),A}function Ml(p,x){return x.type==="delete"?x.keys:x.keys||x.values.map(p.extractKey)}var Xi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(p){return r(r({},p),{table:function(x){var A=p.table(x),P=A.schema.primaryKey;return r(r({},A),{mutate:function(M){var F=ie.trans,j=F.table(x).hook,q=j.deleting,le=j.creating,me=j.updating;switch(M.type){case"add":if(le.fire===Qe)break;return F._promise("readwrite",function(){return oe(M)},!0);case"put":if(le.fire===Qe&&me.fire===Qe)break;return F._promise("readwrite",function(){return oe(M)},!0);case"delete":if(q.fire===Qe)break;return F._promise("readwrite",function(){return oe(M)},!0);case"deleteRange":if(q.fire===Qe)break;return F._promise("readwrite",function(){return(function se(ue,ne,re){return A.query({trans:ue,values:!1,query:{index:P,range:ne},limit:re}).then(function(ee){var xe=ee.result;return oe({type:"delete",keys:xe,trans:ue}).then(function(Ee){return 0<Ee.numFailures?Promise.reject(Ee.failures[0]):xe.length<re?{failures:[],numFailures:0,lastResult:void 0}:se(ue,r(r({},ne),{lower:xe[xe.length-1],lowerOpen:!0}),re)})})})(M.trans,M.range,1e4)},!0)}return A.mutate(M);function oe(se){var ue,ne,re,ee=ie.trans,xe=se.keys||Ml(P,se);if(xe)return(se=se.type==="add"||se.type==="put"?r(r({},se),{keys:xe}):r({},se)).type!=="delete"&&(se.values=s([],se.values)),se.keys&&(se.keys=s([],se.keys)),ue=A,re=xe,((ne=se).type==="add"?Promise.resolve([]):ue.getMany({trans:ne.trans,keys:re,cache:"immutable"})).then(function(Ee){var ge=xe.map(function(De,Ne){var Je,rt,He,ot=Ee[Ne],et={onerror:null,onsuccess:null};return se.type==="delete"?q.fire.call(et,De,ot,ee):se.type==="add"||ot===void 0?(Je=le.fire.call(et,De,se.values[Ne],ee),De==null&&Je!=null&&(se.keys[Ne]=De=Je,P.outbound||N(se.values[Ne],P.keyPath,De))):(Je=Qa(ot,se.values[Ne]),(rt=me.fire.call(et,Je,De,ot,ee))&&(He=se.values[Ne],Object.keys(rt).forEach(function(qe){f(He,qe)?He[qe]=rt[qe]:N(He,qe,rt[qe])}))),et});return A.mutate(se).then(function(De){for(var Ne=De.failures,Je=De.results,rt=De.numFailures,De=De.lastResult,He=0;He<xe.length;++He){var ot=(Je||xe)[He],et=ge[He];ot==null?et.onerror&&et.onerror(Ne[He]):et.onsuccess&&et.onsuccess(se.type==="put"&&Ee[He]?se.values[He]:ot)}return{failures:Ne,results:Je,numFailures:rt,lastResult:De}}).catch(function(De){return ge.forEach(function(Ne){return Ne.onerror&&Ne.onerror(De)}),Promise.reject(De)})});throw new Error("Keys missing")}}})}})}};function As(p,x,A){try{if(!x||x.keys.length<p.length)return null;for(var P=[],M=0,F=0;M<x.keys.length&&F<p.length;++M)Rt(x.keys[M],p[F])===0&&(P.push(A?_e(x.values[M]):x.values[M]),++F);return P.length===p.length?P:null}catch{return null}}var bu={stack:"dbcore",level:-1,create:function(p){return{table:function(x){var A=p.table(x);return r(r({},A),{getMany:function(P){var M;return P.cache?(M=As(P.keys,P.trans._cache,P.cache==="clone"))?ze.resolve(M):A.getMany(P).then(function(F){return P.trans._cache={keys:P.keys,values:P.cache==="clone"?_e(F):F},F}):A.getMany(P)},mutate:function(P){return P.type!=="add"&&(P.trans._cache=null),A.mutate(P)}})}}}};function Su(p,x){return p.trans.mode==="readonly"&&!!p.subscr&&!p.trans.explicit&&p.trans.db._options.cache!=="disabled"&&!x.schema.primaryKey.outbound}function Ki(p,x){switch(p){case"query":return x.values&&!x.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Yi={stack:"dbcore",level:0,name:"Observability",create:function(p){var x=p.schema.name,A=new zr(p.MIN_KEY,p.MAX_KEY);return r(r({},p),{transaction:function(P,M,F){if(ie.subscr&&M!=="readonly")throw new Se.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ie.querier));return p.transaction(P,M,F)},table:function(P){function M(xe){var ee,xe=xe.query;return[ee=xe.index,new zr((ee=(xe=xe.range).lower)!=null?ee:p.MIN_KEY,(ee=xe.upper)!=null?ee:p.MAX_KEY)]}var F=p.table(P),j=F.schema,q=j.primaryKey,le=j.indexes,me=q.extractKey,oe=q.outbound,se=q.autoIncrement&&le.filter(function(re){return re.compound&&re.keyPath.includes(q.keyPath)}),ue=r(r({},F),{mutate:function(re){function ee(ct){return ct="idb://".concat(x,"/").concat(P,"/").concat(ct),Ne[ct]||(Ne[ct]=new zr)}var xe,Ee,ge,De=re.trans,Ne=re.mutatedParts||(re.mutatedParts={}),Je=ee(""),rt=ee(":dels"),He=re.type,et=re.type==="deleteRange"?[re.range]:re.type==="delete"?[re.keys]:re.values.length<50?[Ml(q,re).filter(function(ct){return ct}),re.values]:[],ot=et[0],et=et[1],qe=re.trans._cache;return d(ot)?(Je.addKeys(ot),(He=He==="delete"||ot.length===et.length?As(ot,qe):null)||rt.addKeys(ot),(He||et)&&(xe=ee,Ee=He,ge=et,j.indexes.forEach(function(ct){var Vt=xe(ct.name||"");function Yt(Ft){return Ft!=null?ct.extractKey(Ft):null}function Ct(Ft){ct.multiEntry&&d(Ft)?Ft.forEach(function(yr){return Vt.addKey(yr)}):Vt.addKey(Ft)}(Ee||ge).forEach(function(Ft,rr){var Dn=Ee&&Yt(Ee[rr]),rr=ge&&Yt(ge[rr]);Rt(Dn,rr)!==0&&(Dn!=null&&Ct(Dn),rr!=null)&&Ct(rr)})}))):ot?(et={from:(qe=ot.lower)!=null?qe:p.MIN_KEY,to:(He=ot.upper)!=null?He:p.MAX_KEY},rt.add(et),Je.add(et)):(Je.add(A),rt.add(A),j.indexes.forEach(function(ct){return ee(ct.name).add(A)})),F.mutate(re).then(function(ct){return!ot||re.type!=="add"&&re.type!=="put"||(Je.addKeys(ct.results),se&&se.forEach(function(Vt){for(var Yt=re.values.map(function(Dn){return Vt.extractKey(Dn)}),Ct=Vt.keyPath.findIndex(function(Dn){return Dn===q.keyPath}),Ft=0,yr=ct.results.length;Ft<yr;++Ft)Yt[Ft][Ct]=ct.results[Ft];ee(Vt.name).addKeys(Yt)})),De.mutatedParts=On(De.mutatedParts||{},Ne),ct})}}),ne={get:function(re){return[q,new zr(re.key)]},getMany:function(re){return[q,new zr().addKeys(re.keys)]},count:M,query:M,openCursor:M};return c(ne).forEach(function(re){ue[re]=function(ee){var xe=ie.subscr,Ee=!!xe,ge=Su(ie,F)&&Ki(re,ee)?ee.obsSet={}:xe;if(Ee){var De,xe=function(et){return et="idb://".concat(x,"/").concat(P,"/").concat(et),ge[et]||(ge[et]=new zr)},Ne=xe(""),Je=xe(":dels"),Ee=ne[re](ee),rt=Ee[0],Ee=Ee[1];if((re==="query"&&rt.isPrimaryKey&&!ee.values?Je:xe(rt.name||"")).add(Ee),!rt.isPrimaryKey){if(re!=="count")return De=re==="query"&&oe&&ee.values&&F.query(r(r({},ee),{values:!1})),F[re].apply(this,arguments).then(function(et){if(re==="query"){if(oe&&ee.values)return De.then(function(Yt){return Yt=Yt.result,Ne.addKeys(Yt),et});var qe=ee.values?et.result.map(me):et.result;(ee.values?Ne:Je).addKeys(qe)}else{var ct,Vt;if(re==="openCursor")return Vt=ee.values,(ct=et)&&Object.create(ct,{key:{get:function(){return Je.addKey(ct.primaryKey),ct.key}},primaryKey:{get:function(){var Yt=ct.primaryKey;return Je.addKey(Yt),Yt}},value:{get:function(){return Vt&&Ne.addKey(ct.primaryKey),ct.value}}})}return et});Je.add(A)}}return F[re].apply(this,arguments)}}),ue}})}};function Cs(p,x,A){var P;return A.numFailures===0?x:x.type==="deleteRange"||(P=x.keys?x.keys.length:"values"in x&&x.values?x.values.length:1,A.numFailures===P)?null:(P=r({},x),d(P.keys)&&(P.keys=P.keys.filter(function(M,F){return!(F in A.failures)})),"values"in P&&d(P.values)&&(P.values=P.values.filter(function(M,F){return!(F in A.failures)})),P)}function Ol(p,x){return A=p,((P=x).lower===void 0||(P.lowerOpen?0<Rt(A,P.lower):0<=Rt(A,P.lower)))&&(A=p,(P=x).upper===void 0||(P.upperOpen?Rt(A,P.upper)<0:Rt(A,P.upper)<=0));var A,P}function pa(p,x,A,P,M,F){var j,q,le,me,oe,se;return!A||A.length===0||(j=x.query.index,q=j.multiEntry,le=x.query.range,me=P.schema.primaryKey.extractKey,oe=j.extractKey,se=(j.lowLevelIndex||j).extractKey,(P=A.reduce(function(ue,ne){var re=ue,ee=[];if(ne.type==="add"||ne.type==="put")for(var xe=new zr,Ee=ne.values.length-1;0<=Ee;--Ee){var ge,De=ne.values[Ee],Ne=me(De);!xe.hasKey(Ne)&&(ge=oe(De),q&&d(ge)?ge.some(function(et){return Ol(et,le)}):Ol(ge,le))&&(xe.addKey(Ne),ee.push(De))}switch(ne.type){case"add":var Je=new zr().addKeys(x.values?ue.map(function(qe){return me(qe)}):ue),re=ue.concat(x.values?ee.filter(function(qe){return qe=me(qe),!Je.hasKey(qe)&&(Je.addKey(qe),!0)}):ee.map(function(qe){return me(qe)}).filter(function(qe){return!Je.hasKey(qe)&&(Je.addKey(qe),!0)}));break;case"put":var rt=new zr().addKeys(ne.values.map(function(qe){return me(qe)}));re=ue.filter(function(qe){return!rt.hasKey(x.values?me(qe):qe)}).concat(x.values?ee:ee.map(function(qe){return me(qe)}));break;case"delete":var He=new zr().addKeys(ne.keys);re=ue.filter(function(qe){return!He.hasKey(x.values?me(qe):qe)});break;case"deleteRange":var ot=ne.range;re=ue.filter(function(qe){return!Ol(me(qe),ot)})}return re},p))===p)?p:(P.sort(function(ue,ne){return Rt(se(ue),se(ne))||Rt(me(ue),me(ne))}),x.limit&&x.limit<1/0&&(P.length>x.limit?P.length=x.limit:p.length===x.limit&&P.length<x.limit&&(M.dirty=!0)),F?Object.freeze(P):P)}function Dl(p,x){return Rt(p.lower,x.lower)===0&&Rt(p.upper,x.upper)===0&&!!p.lowerOpen==!!x.lowerOpen&&!!p.upperOpen==!!x.upperOpen}function Eu(p,x){return((A,P,M,F)=>{if(A===void 0)return P!==void 0?-1:0;if(P===void 0)return 1;if((A=Rt(A,P))===0){if(M&&F)return 0;if(M)return 1;if(F)return-1}return A})(p.lower,x.lower,p.lowerOpen,x.lowerOpen)<=0&&0<=((A,P,M,F)=>{if(A===void 0)return P!==void 0?1:0;if(P===void 0)return-1;if((A=Rt(A,P))===0){if(M&&F)return 0;if(M)return-1;if(F)return 1}return A})(p.upper,x.upper,p.upperOpen,x.upperOpen)}function Ll(p,x,A,P){p.subscribers.add(A),P.addEventListener("abort",function(){var M,F;p.subscribers.delete(A),p.subscribers.size===0&&(M=p,F=x,setTimeout(function(){M.subscribers.size===0&&D(F,M)},3e3))})}var Za={stack:"dbcore",level:0,name:"Cache",create:function(p){var x=p.schema.name;return r(r({},p),{transaction:function(A,P,M){var F,j,q=p.transaction(A,P,M);return P==="readwrite"&&(M=(F=new AbortController).signal,q.addEventListener("abort",(j=function(le){return function(){if(F.abort(),P==="readwrite"){for(var me=new Set,oe=0,se=A;oe<se.length;oe++){var ue=se[oe],ne=Ci["idb://".concat(x,"/").concat(ue)];if(ne){var re=p.table(ue),ee=ne.optimisticOps.filter(function(ct){return ct.trans===q});if(q._explicit&&le&&q.mutatedParts)for(var xe=0,Ee=Object.values(ne.queries.query);xe<Ee.length;xe++)for(var ge=0,De=(rt=Ee[xe]).slice();ge<De.length;ge++)ha((He=De[ge]).obsSet,q.mutatedParts)&&(D(rt,He),He.subscribers.forEach(function(ct){return me.add(ct)}));else if(0<ee.length){ne.optimisticOps=ne.optimisticOps.filter(function(ct){return ct.trans!==q});for(var Ne=0,Je=Object.values(ne.queries.query);Ne<Je.length;Ne++)for(var rt,He,ot,et=0,qe=(rt=Je[Ne]).slice();et<qe.length;et++)(He=qe[et]).res!=null&&q.mutatedParts&&(le&&!He.dirty?(ot=Object.isFrozen(He.res),ot=pa(He.res,He.req,ee,re,He,ot),He.dirty?(D(rt,He),He.subscribers.forEach(function(ct){return me.add(ct)})):ot!==He.res&&(He.res=ot,He.promise=ze.resolve({result:ot}))):(He.dirty&&D(rt,He),He.subscribers.forEach(function(ct){return me.add(ct)})))}}}me.forEach(function(ct){return ct()})}}})(!1),{signal:M}),q.addEventListener("error",j(!1),{signal:M}),q.addEventListener("complete",j(!0),{signal:M})),q},table:function(A){var P=p.table(A),M=P.schema.primaryKey;return r(r({},P),{mutate:function(F){var j,q=ie.trans;return!M.outbound&&q.db._options.cache!=="disabled"&&!q.explicit&&q.idbtrans.mode==="readwrite"&&(j=Ci["idb://".concat(x,"/").concat(A)])?(q=P.mutate(F),F.type!=="add"&&F.type!=="put"||!(50<=F.values.length||Ml(M,F).some(function(le){return le==null}))?(j.optimisticOps.push(F),F.mutatedParts&&da(F.mutatedParts),q.then(function(le){0<le.numFailures&&(D(j.optimisticOps,F),(le=Cs(0,F,le))&&j.optimisticOps.push(le),F.mutatedParts)&&da(F.mutatedParts)}),q.catch(function(){D(j.optimisticOps,F),F.mutatedParts&&da(F.mutatedParts)})):q.then(function(le){var me=Cs(0,r(r({},F),{values:F.values.map(function(oe,se){var ue;return le.failures[se]?oe:(N(ue=(ue=M.keyPath)!=null&&ue.includes(".")?_e(oe):r({},oe),M.keyPath,le.results[se]),ue)})}),le);j.optimisticOps.push(me),queueMicrotask(function(){return F.mutatedParts&&da(F.mutatedParts)})}),q):P.mutate(F)},query:function(F){var j,q,le,me,oe,se,ue;return Su(ie,P)&&Ki("query",F)?(j=((le=ie.trans)==null?void 0:le.db._options.cache)==="immutable",q=(le=ie).requery,le=le.signal,se=((ne,re,ee,xe)=>{var Ee=Ci["idb://".concat(ne,"/").concat(re)];if(!Ee)return[];if(!(ne=Ee.queries[ee]))return[null,!1,Ee,null];var ge=ne[(xe.query?xe.query.index.name:null)||""];if(!ge)return[null,!1,Ee,null];switch(ee){case"query":var De=ge.find(function(Ne){return Ne.req.limit===xe.limit&&Ne.req.values===xe.values&&Dl(Ne.req.query.range,xe.query.range)});return De?[De,!0,Ee,ge]:[ge.find(function(Ne){return("limit"in Ne.req?Ne.req.limit:1/0)>=xe.limit&&(!xe.values||Ne.req.values)&&Eu(Ne.req.query.range,xe.query.range)}),!1,Ee,ge];case"count":return De=ge.find(function(Ne){return Dl(Ne.req.query.range,xe.query.range)}),[De,!!De,Ee,ge]}})(x,A,"query",F),ue=se[0],me=se[2],oe=se[3],ue&&se[1]?ue.obsSet=F.obsSet:(se=P.query(F).then(function(ne){var re=ne.result;if(ue&&(ue.res=re),j){for(var ee=0,xe=re.length;ee<xe;++ee)Object.freeze(re[ee]);Object.freeze(re)}else ne.result=_e(re);return ne}).catch(function(ne){return oe&&ue&&D(oe,ue),Promise.reject(ne)}),ue={obsSet:F.obsSet,promise:se,subscribers:new Set,type:"query",req:F,dirty:!1},oe?oe.push(ue):(oe=[ue],(me=me||(Ci["idb://".concat(x,"/").concat(A)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[F.query.index.name||""]=oe)),Ll(ue,oe,q,le),ue.promise.then(function(ne){return{result:pa(ne.result,F,me?.optimisticOps,P,ue,j)}})):P.query(F)}})}})}};function Qi(p,x){return new Proxy(p,{get:function(A,P,M){return P==="db"?x:Reflect.get(A,P,M)}})}Rr.prototype.version=function(p){if(isNaN(p)||p<.1)throw new Se.Type("Given version is not a positive number");if(p=Math.round(10*p)/10,this.idbdb||this._state.isBeingOpened)throw new Se.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,p);var x=this._versions,A=x.filter(function(P){return P._cfg.version===p})[0];return A||(A=new this.Version(p),x.push(A),x.sort(li),A.stores({}),this._state.autoSchema=!1),A},Rr.prototype._whenReady=function(p){var x=this;return this.idbdb&&(this._state.openComplete||ie.letThrough||this._vip)?p():new ze(function(A,P){if(x._state.openComplete)return P(new Se.DatabaseClosed(x._state.dbOpenError));if(!x._state.isBeingOpened){if(!x._state.autoOpen)return void P(new Se.DatabaseClosed);x.open().catch(Qe)}x._state.dbReadyPromise.then(A,P)}).then(p)},Rr.prototype.use=function(M){var x=M.stack,A=M.create,P=M.level,M=M.name,F=(M&&this.unuse({stack:x,name:M}),this._middlewares[x]||(this._middlewares[x]=[]));return F.push({stack:x,create:A,level:P??10,name:M}),F.sort(function(j,q){return j.level-q.level}),this},Rr.prototype.unuse=function(p){var x=p.stack,A=p.name,P=p.create;return x&&this._middlewares[x]&&(this._middlewares[x]=this._middlewares[x].filter(function(M){return P?M.create!==P:!!A&&M.name!==A})),this},Rr.prototype.open=function(){var p=this;return Wn(Vn,function(){return wu(p)})},Rr.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var p=this._state,x=ji.indexOf(this);if(0<=x&&ji.splice(x,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}p.isBeingOpened||(p.dbReadyPromise=new ze(function(A){p.dbReadyResolve=A}),p.openCanceller=new ze(function(A,P){p.cancelOpen=P}))},Rr.prototype.close=function(x){var x=(x===void 0?{disableAutoOpen:!0}:x).disableAutoOpen,A=this._state;x?(A.isBeingOpened&&A.cancelOpen(new Se.DatabaseClosed),this._close(),A.autoOpen=!1,A.dbOpenError=new Se.DatabaseClosed):(this._close(),A.autoOpen=this._options.autoOpen||A.isBeingOpened,A.openComplete=!1,A.dbOpenError=null)},Rr.prototype.delete=function(p){var x=this,A=(p===void 0&&(p={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),P=this._state;return new ze(function(M,F){function j(){x.close(p);var q=x._deps.indexedDB.deleteDatabase(x.name);q.onsuccess=Xt(function(){var le,me,oe;le=x._deps,me=x.name,Ts(oe=le.indexedDB)||me===vo||la(oe,le.IDBKeyRange).delete(me).catch(Qe),M()}),q.onerror=Kt(F),q.onblocked=x._fireOnBlocked}if(A)throw new Se.InvalidArgument("Invalid closeOptions argument to db.delete()");P.isBeingOpened?P.dbReadyPromise.then(j):j()})},Rr.prototype.backendDB=function(){return this.idbdb},Rr.prototype.isOpen=function(){return this.idbdb!==null},Rr.prototype.hasBeenClosed=function(){var p=this._state.dbOpenError;return p&&p.name==="DatabaseClosed"},Rr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Rr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Rr.prototype,"tables",{get:function(){var p=this;return c(this._allTables).map(function(x){return p._allTables[x]})},enumerable:!1,configurable:!0}),Rr.prototype.transaction=function(){var p=(function(x,A,P){var M=arguments.length;if(M<2)throw new Se.InvalidArgument("Too few arguments");for(var F=new Array(M-1);--M;)F[M-1]=arguments[M];return P=F.pop(),[x,Me(F),P]}).apply(this,arguments);return this._transaction.apply(this,p)},Rr.prototype._transaction=function(p,x,A){var P,M,F=this,j=ie.trans,q=(j&&j.db===this&&p.indexOf("!")===-1||(j=null),p.indexOf("?")!==-1);p=p.replace("!","").replace("?","");try{if(M=x.map(function(me){if(me=me instanceof F.Table?me.name:me,typeof me!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return me}),p=="r"||p===Zo)P=Zo;else{if(p!="rw"&&p!=Va)throw new Se.InvalidArgument("Invalid transaction mode: "+p);P=Va}if(j){if(j.mode===Zo&&P===Va){if(!q)throw new Se.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");j=null}j&&M.forEach(function(me){if(j&&j.storeNames.indexOf(me)===-1){if(!q)throw new Se.SubTransaction("Table "+me+" not included in parent transaction.");j=null}}),q&&j&&!j.active&&(j=null)}}catch(me){return j?j._promise(null,function(oe,se){se(me)}):Or(me)}var le=(function me(oe,se,ue,ne,re){return ze.resolve().then(function(){var ge=ie.transless||ie,ee=oe._createTransaction(se,ue,oe._dbSchema,ne),ge=(ee.explicit=!0,{trans:ee,transless:ge});if(ne)ee.idbtrans=ne.idbtrans;else try{ee.create(),ee.idbtrans._explicit=!0,oe._state.PR1398_maxLoop=3}catch(De){return De.name===Ke.InvalidState&&oe.isOpen()&&0<--oe._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),oe.close({disableAutoOpen:!1}),oe.open().then(function(){return me(oe,se,ue,null,re)})):Or(De)}var xe,Ee=U(re),ge=(Ee&&bs(),ze.follow(function(){var De;(xe=re.call(ee,ee))&&(Ee?(De=qr.bind(null,null),xe.then(De,De)):typeof xe.next=="function"&&typeof xe.throw=="function"&&(xe=Ys(xe)))},ge));return(xe&&typeof xe.then=="function"?ze.resolve(xe).then(function(De){return ee.active?De:Or(new Se.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ge.then(function(){return xe})).then(function(De){return ne&&ee._resolve(),ee._completion.then(function(){return De})}).catch(function(De){return ee._reject(De),Or(De)})})}).bind(null,this,P,M,j,A);return j?j._promise(P,le,"lock"):ie.trans?Wn(ie.transless,function(){return F._whenReady(le)}):this._whenReady(le)},Rr.prototype.table=function(p){if(f(this._allTables,p))return this._allTables[p];throw new Se.InvalidTable("Table ".concat(p," does not exist"))};var Zi=Rr;function Rr(p,x){var A,P,M,F,j,q=this,le=(this._middlewares={},this.verno=0,Rr.dependencies),le=(this._options=x=r({addons:Rr.addons,autoOpen:!0,indexedDB:le.indexedDB,IDBKeyRange:le.IDBKeyRange,cache:"cloned"},x),this._deps={indexedDB:x.indexedDB,IDBKeyRange:x.IDBKeyRange},x.addons),me=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Qe,dbReadyPromise:null,cancelOpen:Qe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:x.autoOpen}),oe=(me.dbReadyPromise=new ze(function(se){me.dbReadyResolve=se}),me.openCanceller=new ze(function(se,ue){me.cancelOpen=ue}),this._state=me,this.name=p,this.on=zs(this,"populate","blocked","versionchange","close",{ready:[Nr,Qe]}),this.once=function(se,ue){var ne=function(){for(var re=[],ee=0;ee<arguments.length;ee++)re[ee]=arguments[ee];q.on(se).unsubscribe(ne),ue.apply(q,re)};return q.on(se,ne)},this.on.ready.subscribe=z(this.on.ready.subscribe,function(se){return function(ue,ne){Rr.vip(function(){var re,ee=q._state;ee.openComplete?(ee.dbOpenError||ze.resolve().then(ue),ne&&se(ue)):ee.onReadyBeingFired?(ee.onReadyBeingFired.push(ue),ne&&se(ue)):(se(ue),re=q,ne||se(function xe(){re.on.ready.unsubscribe(ue),re.on.ready.unsubscribe(xe)}))})}}),this.Collection=(A=this,Hs(gc.prototype,function(xe,ee){this.db=A;var ne=oi,re=null;if(ee)try{ne=ee()}catch(ge){re=ge}var ee=xe._ctx,xe=ee.table,Ee=xe.hook.reading.fire;this._ctx={table:xe,index:ee.index,isPrimKey:!ee.index||xe.schema.primKey.keyPath&&ee.index===xe.schema.primKey.name,range:ne,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:re,or:ee.or,valueMapper:Ee!==yt?Ee:null}})),this.Table=(P=this,Hs(Jo.prototype,function(se,ue,ne){this.db=P,this._tx=ne,this.name=se,this.schema=ue,this.hook=P._allTables[se]?P._allTables[se].hook:zs(null,{creating:[_t,Qe],reading:[Bt,yt],updating:[Cr,Qe],deleting:[gr,Qe]})})),this.Transaction=(M=this,Hs($a.prototype,function(se,ue,ne,re,ee){var xe=this;se!=="readonly"&&ue.forEach(function(Ee){Ee=(Ee=ne[Ee])==null?void 0:Ee.yProps,Ee&&(ue=ue.concat(Ee.map(function(ge){return ge.updatesTable})))}),this.db=M,this.mode=se,this.storeNames=ue,this.schema=ne,this.chromeTransactionDurability=re,this.idbtrans=null,this.on=zs(this,"complete","error","abort"),this.parent=ee||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ze(function(Ee,ge){xe._resolve=Ee,xe._reject=ge}),this._completion.then(function(){xe.active=!1,xe.on.complete.fire()},function(Ee){var ge=xe.active;return xe.active=!1,xe.on.error.fire(Ee),xe.parent?xe.parent._reject(Ee):ge&&xe.idbtrans&&xe.idbtrans.abort(),Or(Ee)})})),this.Version=(F=this,Hs(Ai.prototype,function(se){this.db=F,this._cfg={version:se,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(j=this,Hs(ia.prototype,function(se,ue,ne){if(this.db=j,this._ctx={table:se,index:ue===":id"?null:ue,or:ne},this._cmp=this._ascending=Rt,this._descending=function(re,ee){return Rt(ee,re)},this._max=function(re,ee){return 0<Rt(re,ee)?re:ee},this._min=function(re,ee){return Rt(re,ee)<0?re:ee},this._IDBKeyRange=j._deps.IDBKeyRange,!this._IDBKeyRange)throw new Se.MissingAPI})),this.on("versionchange",function(se){0<se.newVersion?console.warn("Another connection wants to upgrade database '".concat(q.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(q.name,"'. Closing db now to resume the delete request.")),q.close({disableAutoOpen:!1})}),this.on("blocked",function(se){!se.newVersion||se.newVersion<se.oldVersion?console.warn("Dexie.delete('".concat(q.name,"') was blocked")):console.warn("Upgrade '".concat(q.name,"' blocked by other connection holding version ").concat(se.oldVersion/10))}),this._maxKey=Ti(x.IDBKeyRange),this._createTransaction=function(se,ue,ne,re){return new q.Transaction(se,ue,ne,q._options.chromeTransactionDurability,re)},this._fireOnBlocked=function(se){q.on("blocked").fire(se),ji.filter(function(ue){return ue.name===q.name&&ue!==q&&!ue._state.vcFired}).map(function(ue){return ue.on("versionchange").fire(se)})},this.use(bu),this.use(Za),this.use(Yi),this.use(Qs),this.use(Xi),new Proxy(this,{get:function(se,ue,ne){var re;return ue==="_vip"||(ue==="table"?function(ee){return Qi(q.table(ee),oe)}:(re=Reflect.get(se,ue,ne))instanceof Jo?Qi(re,oe):ue==="tables"?re.map(function(ee){return Qi(ee,oe)}):ue==="_createTransaction"?function(){return Qi(re.apply(this,arguments),oe)}:re)}}));this.vip=oe,le.forEach(function(se){return se(q)})}var ma,Ii=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ja=(Zs.prototype.subscribe=function(p,x,A){return this._subscribe(p&&typeof p!="function"?p:{next:p,error:x,complete:A})},Zs.prototype[Ii]=function(){return this},Zs);function Zs(p){this._subscribe=p}try{ma={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{ma={indexedDB:null,IDBKeyRange:null}}function So(p){var x,A=!1,P=new Ja(function(M){var F=U(p),j,q=!1,le={},me={},oe={get closed(){return q},unsubscribe:function(){q||(q=!0,j&&j.abort(),se&&Ws.storagemutated.unsubscribe(ne))}},se=(M.start&&M.start(oe),!1),ue=function(){return go(re)},ne=function(ee){On(le,ee),ha(me,le)&&ue()},re=function(){var ee,xe,Ee;!q&&ma.indexedDB&&(le={},ee={},j&&j.abort(),j=new AbortController,Ee=(ge=>{var De=Mr();try{F&&bs();var Ne=ii(p,ge);return Ne=F?Ne.finally(qr):Ne}finally{De&&bi()}})(xe={subscr:ee,signal:j.signal,requery:ue,querier:p,trans:null}),Promise.resolve(Ee).then(function(ge){A=!0,x=ge,q||xe.signal.aborted||(le={},(De=>{for(var Ne in De)if(f(De,Ne))return;return 1})(me=ee)||se||(Ws(sa,ne),se=!0),go(function(){return!q&&M.next&&M.next(ge)}))},function(ge){A=!1,["DatabaseClosedError","AbortError"].includes(ge?.name)||q||go(function(){q||M.error&&M.error(ge)})}))};return setTimeout(ue,0),oe});return P.hasValue=function(){return A},P.getValue=function(){return x},P}var ci=Zi;function Eo(p){var x=Br;try{Br=!0,Ws.storagemutated.fire(p),kl(p,!0)}finally{Br=x}}y(ci,r(r({},K),{delete:function(p){return new ci(p,{addons:[]}).delete()},exists:function(p){return new ci(p,{addons:[]}).open().then(function(x){return x.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(p){try{return x=ci.dependencies,A=x.indexedDB,x=x.IDBKeyRange,(Ts(A)?Promise.resolve(A.databases()).then(function(P){return P.map(function(M){return M.name}).filter(function(M){return M!==vo})}):la(A,x).toCollection().primaryKeys()).then(p)}catch{return Or(new Se.MissingAPI)}var x,A},defineClass:function(){return function(p){m(this,p)}},ignoreTransaction:function(p){return ie.trans?Wn(ie.transless,p):p()},vip:Xs,async:function(p){return function(){try{var x=Ys(p.apply(this,arguments));return x&&typeof x.then=="function"?x:ze.resolve(x)}catch(A){return Or(A)}}},spawn:function(p,x,A){try{var P=Ys(p.apply(A,x||[]));return P&&typeof P.then=="function"?P:ze.resolve(P)}catch(M){return Or(M)}},currentTransaction:{get:function(){return ie.trans||null}},waitFor:function(p,x){return p=ze.resolve(typeof p=="function"?ci.ignoreTransaction(p):p).timeout(x||6e4),ie.trans?ie.trans.waitFor(p):p},Promise:ze,debug:{get:function(){return dr},set:function(p){vi(p)}},derive:R,extend:m,props:y,override:z,Events:zs,on:Ws,liveQuery:So,extendObservabilitySet:On,getByKeyPath:fe,setByKeyPath:N,delByKeyPath:function(p,x){typeof x=="string"?N(p,x,void 0):"length"in x&&[].map.call(x,function(A){N(p,A,void 0)})},shallowClone:te,deepClone:_e,getObjectDiff:Qa,cmp:Rt,asap:X,minKey:-1/0,addons:[],connections:ji,errnames:Ke,dependencies:ma,cache:Ci,semVer:"4.3.0",version:"4.3.0".split(".").map(function(p){return parseInt(p)}).reduce(function(p,x,A){return p+x/Math.pow(10,2*A)})})),ci.maxKey=Ti(ci.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ws(sa,function(p){Br||(p=new CustomEvent(Vs,{detail:p}),Br=!0,dispatchEvent(p),Br=!1)}),addEventListener(Vs,function(p){p=p.detail,Br||Eo(p)}));var Ji,Br=!1,Js=function(){};return typeof BroadcastChannel<"u"&&((Js=function(){(Ji=new BroadcastChannel(Vs)).onmessage=function(p){return p.data&&Eo(p.data)}})(),typeof Ji.unref=="function"&&Ji.unref(),Ws(sa,function(p){Br||Ji.postMessage(p)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(p){if(!Zi.disableBfCache&&p.persisted){dr&&console.debug("Dexie: handling persisted pagehide"),Ji?.close();for(var x=0,A=ji;x<A.length;x++)A[x].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(p){!Zi.disableBfCache&&p.persisted&&(dr&&console.debug("Dexie: handling persisted pageshow"),Js(),Eo({all:new zr(-1/0,[[]])}))})),ze.rejectionMapper=function(p,x){return!p||p instanceof Ae||p instanceof TypeError||p instanceof SyntaxError||!p.name||!at[p.name]?p:(x=new at[p.name](x||p.message,p),"stack"in p&&T(x,"stack",{get:function(){return this.inner.stack}}),x)},vi(dr),r(Zi,Object.freeze({__proto__:null,Dexie:Zi,Entity:fr,PropModification:qn,RangeSet:zr,add:function(p){return new qn({add:p})},cmp:Rt,default:Zi,liveQuery:So,mergeRanges:qi,rangesOverlap:ca,remove:function(p){return new qn({remove:p})},replacePrefix:function(p,x){return new qn({replacePrefix:[p,x]})}}),{default:Zi}),Zi})})(Cf)),Cf.exports}var uC=lC();const ly=uh(uC),P_=Symbol.for("Dexie"),lh=globalThis[P_]||(globalThis[P_]=ly);if(ly.semVer!==lh.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ly.semVer} and ${lh.semVer}`);const{liveQuery:yP,mergeRanges:vP,rangesOverlap:_P,RangeSet:xP,cmp:wP,Entity:bP,PropModification:SP,replacePrefix:EP,add:TP,remove:AP,DexieYProvider:CP}=lh;class cC extends lh{saves;constructor(){super("GameEngineDB"),this.version(1).stores({saves:"++id, stateName, timestamp"})}}const uy=new cC;class Vo{static instance;static getInstance(){return Vo.instance||(Vo.instance=new Vo),Vo.instance}async performSave(e,t){const r=oh.getInstance(),s=ao.getInstance(),a=mn.getInstance(),c=await this.requestSnapshot(r.logic,t),d=await this.requestSnapshot(s.worker,t),m=a.get("campaign_id"),v=a.get("campaign_step_index"),w={id:e,stateName:t,timestamp:Date.now(),preview:`Save ${new Date().toLocaleTimeString()}`,campaignId:m||void 0,campaignIndex:v!==void 0?v:void 0,sessionData:a.exportSaveData(),logicSnapshot:c,viewSnapshot:d};await uy.saves.put(w)}async performLoad(e){const t=await uy.saves.get(e);if(!t)throw new Error("Save not found");const r=mn.getInstance(),s=oh.getInstance(),a=ao.getInstance();return r.lockForLoad(),r.clearSavableKeys(),r.importSaveData(t.sessionData),s.prepareForState(t.stateName),s.createState(t.stateName),s.sendInput(t.stateName,"LOAD_SNAPSHOT",{data:t.logicSnapshot}),a.prepareForState(t.stateName),a.createState(t.stateName),a.loadSnapshot(t.stateName,t.viewSnapshot),s.isInitialized=!0,a.isInitialized=!0,t}requestSnapshot(e,t){return new Promise(r=>{const s=new MessageChannel;s.port1.onmessage=a=>{s.port1.close(),r(a.data)},e.postMessage({type:"INPUT",stateName:t,payload:{action:"GET_SNAPSHOT"}},[s.port2])})}}class Oy{constructor(e,t){this.vm=e,this.stateName=t,this.workers=oh.getInstance(),window.addEventListener("keydown",this.handleKeyDown),this.workers.logic.addEventListener("message",this.handleWorkerMessage),this.captureInitialState()}workers;RESET_SLOT=999;update(){this.vm.update()}destroy(){window.removeEventListener("keydown",this.handleKeyDown),this.workers.logic.removeEventListener("message",this.handleWorkerMessage),this.onInternalDestroy()}send(e,t={}){this.workers.sendInput(this.stateName,e,t)}onInternalDestroy(){}captureInitialState(){setTimeout(async()=>{await Vo.getInstance().performSave(this.RESET_SLOT,this.stateName)},200)}handleWorkerMessage=e=>{const{type:t,name:r,payload:s}=e.data;t==="EVENT"&&this.onWorkerEvent(r,s)};handleKeyDown=e=>{this.onKeyDown(e)}}const R_={"Level 1":{width:960,height:540,initialHP:100,spawnCount:10,heroStartX:480,heroStartY:270,moveSpeed:5,manifestPath:"res/manifest.json",bgmKey:"bgm_level1",levelLabel:"Level 1"},"Level 2":{width:960,height:540,initialHP:80,spawnCount:20,heroStartX:100,heroStartY:100,moveSpeed:6,manifestPath:"res/manifest.json",bgmKey:"bgm_level1",levelLabel:"Level 2"},"Level 3":{width:960,height:540,initialHP:50,spawnCount:35,heroStartX:800,heroStartY:450,moveSpeed:8,manifestPath:"res/manifest.json",bgmKey:"bgm_level1",levelLabel:"Level 3"}};var fo=(n=>(n.Level1="Level 1",n.Level2="Level 2",n.Level3="Level 3",n))(fo||{});const hC=n=>{const e=R_[n];return e||(console.warn(`Config for ${n} not found, falling back to Level 1`),R_["Level 1"])};class Qc{static campaigns=new Map;static register(e){this.campaigns.set(e.id,e)}static get(e){return this.campaigns.get(e)}static getAll(){return Array.from(this.campaigns.values())}}class Ls{static instance;constructor(){}static getInstance(){return Ls.instance||(Ls.instance=new Ls),Ls.instance}startCampaign(e){const t=Qc.get(e);if(!t){console.error(`[CampaignManager] Could not find campaign: ${e}`);return}console.log(`[CampaignManager] Starting Campaign: ${e}`);const r=mn.getInstance();r.clearSavableKeys(),r.set("campaign_id",e),r.set("campaign_step_index",0),this.loadCurrentStep(t,0)}completeCurrentStep(){const e=mn.getInstance(),t=e.get("campaign_id");let r=e.get("campaign_step_index");if(!t||r===void 0){console.error("[CampaignManager] Cannot advance: No active campaign session.");return}const s=Qc.get(t);s&&(r++,e.set("campaign_step_index",r),r>=s.steps.length?this.quitCampaign():this.loadCurrentStep(s,r))}retryCurrentStep(){const e=mn.getInstance(),t=e.get("campaign_id"),r=e.get("campaign_step_index");if(!t||r===void 0)return;const s=Qc.get(t);s&&(console.log(`[CampaignManager] Retrying step ${r}`),e.clearSavableKeys(),e.set("campaign_id",t),e.set("campaign_step_index",r),this.loadCurrentStep(s,r))}failCurrentStep(e){const r=mn.getInstance().get("campaign_id");if(!r){console.error("No active campaign to fail."),this.quitCampaign();return}const s=Qc.get(r);if(s&&s.failFactory){console.log("[CampaignManager] Campaign Failed. Loading Fail State.");const a=s.failFactory(e);lr.getInstance().replace(a)}else console.warn("No failFactory defined for this campaign. Quitting."),this.quitCampaign()}quitCampaign(){const e=mn.getInstance();e.clearSavableKeys(),e.set("campaign_id",null),e.set("campaign_step_index",0),console.log("[CampaignManager] Quitting to Menu."),lr.getInstance().replace(new Xw)}loadCurrentStep(e,t){const r=e.steps[t];console.log(`[CampaignManager] Loading Step ${t}: ${r.name}`);const s=r.factory(r.config);lr.getInstance().replace(s,r.loadingConfig)}}class dC extends Oy{constructor(e){super(e,"Game1")}takeDamage(){this.send("TAKE_DAMAGE",{amount:15})}async jumpToGame2(){const{Game2State:e}=await ho(async()=>{const{Game2State:t}=await Promise.resolve().then(()=>qf);return{Game2State:t}},void 0);await lr.getInstance().replace(new e(!1))}async loadLevel(e){const{Game1State:t}=await ho(async()=>{const{Game1State:r}=await Promise.resolve().then(()=>yy);return{Game1State:r}},void 0);await lr.getInstance().replace(new t(!1,e))}nextLevel(){Ls.getInstance().completeCurrentStep()}failLevel(){Ls.getInstance().failCurrentStep()}async resetLevel(){await Vo.getInstance().performLoad(this.RESET_SLOT);const{Game1State:e}=await ho(async()=>{const{Game1State:r}=await Promise.resolve().then(()=>yy);return{Game1State:r}},void 0),t=this.vm.currentLevel||fo.Level1;await lr.getInstance().replace(new e(!1,t))}onKeyDown(e){ys.getInstance().isKeyAction(e.key,"PAUSE")&&this.openPauseMenu()}onWorkerEvent(e){e==="EXPLOSION_REQ"&&co.getInstance().play("sfx_explosion")}async openPauseMenu(){const{PauseMenuState:e}=await ho(async()=>{const{PauseMenuState:r}=await import("./PauseMenuState-BjDlRTfM.js");return{PauseMenuState:r}},[]),t=lr.getInstance();t.getCurrentStateName()===this.stateName&&await t.push(new e)}}class Dy{listeners=[];_sharedViews;constructor(){this._sharedViews=ao.getInstance().sharedViews}get sharedView(){const e=this._sharedViews.get("main")||this._sharedViews.values().next().value;return e||new Float32Array(0)}getBuffer(e){return this._sharedViews.get(e)}setBuffers(e){this._sharedViews=e}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}update(){this.notify()}notify(){for(let e=0;e<this.listeners.length;e++)this.listeners[e]()}}const Ma={HERO_X:0,HERO_Y:1,HERO_ROTATION:2,HERO_SCALE:3,HERO_HP_DISPLAY:4,HERO_FRAME:5,ACTIVE_ROCK_COUNT:6,BUFFER_SIZE:128},Mw={START_INDEX:0,STRIDE:3,BUFFER_SIZE:3e3},fC={main:Ma,rocks:Mw};class pC extends Dy{get pos(){return{x:this.sharedView[Ma.HERO_X]||0,y:this.sharedView[Ma.HERO_Y]||0}}get hp(){return this.sharedView[Ma.HERO_HP_DISPLAY]||0}get entityCount(){return Math.floor(this.sharedView[Ma.ACTIVE_ROCK_COUNT]||0)}get heroVisuals(){return{x:this.sharedView[Ma.HERO_X]||0,y:this.sharedView[Ma.HERO_Y]||0,rotation:this.sharedView[Ma.HERO_ROTATION]||0,scale:this.sharedView[Ma.HERO_SCALE]||1,currentFrame:this.sharedView[Ma.HERO_FRAME]||0}}getRockViewData(e){const t=this.getBuffer("rocks");if(!t)return{x:0,y:0,rotation:0};const r=e*Mw.STRIDE;return{x:t[r]||0,y:t[r+1]||0,rotation:t[r+2]||0}}}var fg={exports:{}},pg={exports:{}},mg,k_;function mC(){if(k_)return mg;k_=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return mg=n,mg}var gg,M_;function gC(){if(M_)return gg;M_=1;var n=mC();function e(){}function t(){}return t.resetWarningCache=e,gg=function(){function r(c,d,m,v,w,f){if(f!==n){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},gg}var O_;function yC(){return O_||(O_=1,pg.exports=gC()()),pg.exports}var vC=yC();const Dr=uh(vC);function Ns(n){return Ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ns(n)}function Ow(n){var e=(function(t,r){if(Ns(t)!=="object"||t===null)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var a=s.call(t,r);if(Ns(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)})(n,"string");return Ns(e)==="symbol"?e:String(e)}function fn(n,e,t){return(e=Ow(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function yg(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Tl(n){return(function(e){if(Array.isArray(e))return yg(e)})(n)||(function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)})(n)||(function(e,t){if(e){if(typeof e=="string")return yg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yg(e,t):void 0}})(n)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function en(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),s=2;s<t;s++)r[s-2]=arguments[s]}var _C=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var wC=function(n){return n==null};function id(n){var e=[];if(n===void 0)return e;if(typeof n=="string")e=n.split(",");else if(typeof n=="number")e=[n];else if(Array.isArray(n))e=Tl(n);else{if(n===null||Ns(n)!=="object")return e;e=[n&&n?.x||0,n&&n?.y||0]}return e.filter((function(t){return!wC(t)&&!isNaN(t)})).map(Number)}function D_(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function vg(n){return n instanceof er||n instanceof La}var Vf=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function _g(n,e,t){if(vg(n[e])&&vg(t))n[e].copyFrom(t);else if(vg(n[e])){var r=id(t);en(r!==void 0&&r.length>0&&r.length<3,"The property `%s` is a `Point` and must be set to a comma-separated string of either coordinates, an array containing coordinates, or a Point.",e,JSON.stringify(t),Ns(t)),n[e].set(r.shift(),r.shift())}else n[e]=t}var Hc,Dw=function(n){var e,t=n;if(!Array.isArray(t)){if(e=n,Object.prototype.toString.call(e)!=="[object Object]")throw new Error("collection needs to be an Array or Object");t=Object.keys(n)}var r={};return t.forEach((function(s){r[s]=!0})),function(s){return r[s]!==void 0}},Lw=function(n){return function(){return!n.apply(void 0,arguments)}},cy="children",bC=(fn(Hc={},cy,!0),fn(Hc,"parent",!0),fn(Hc,"worldAlpha",!0),fn(Hc,"worldTransform",!0),fn(Hc,"worldVisible",!0),Hc),hy={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},ja=function(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=function(d){return requestAnimationFrame((function(){var m,v;d==null||(m=d.__reactpixi)===null||m===void 0||(v=m.root)===null||v===void 0||v.emit("__REACT_PIXI_REQUEST_RENDER__")}))},s=function(d,m){if(t.hasOwnProperty(d))return en(m.typeofs.some((function(v){return Ns(t[d])===v}))||m.instanceofs.some((function(v){return t[d]instanceof v})),"".concat(n," ").concat(d," prop is invalid")),t[d]};if(t.texture)return en(t.texture instanceof ut,"".concat(n," texture needs to be typeof `Texture`")),t.texture;var a=s("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||s("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||s("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,ut]});en(!!a,"".concat(n," could not get texture from props"));var c=ut.from(a);return c.__reactpixi={root:e},c.once("update",r),c.once("loaded",r),c.valid&&r(c),c},SC=Lw(Dw([].concat(Tl(Object.keys(bC)),Tl(Vf))));function Ga(n,e,t){var r=!1;if(en(Gr.prototype.isPrototypeOf(n),"instance needs to be typeof `DisplayObject`, got `%s`",Ns(n)),!t.ignoreEvents)for(var s=typeof n.removeListener=="function",a=typeof n.on=="function",c=0;c<Vf.length;c++){var d=Vf[c];e[d]!==t[d]&&(r=!0,typeof e[d]=="function"&&s&&n.removeListener(d,e[d]),typeof t[d]=="function"&&a&&n.on(d,t[d]))}var m=Object.keys(t||{});if(t.overwriteProps){for(var v=0;v<m.length;v++){var w=m[v];e[w]!==t[w]&&(r=!0,_g(n,w,t[w]))}return r}for(var f=m.filter(SC),y=0;y<f.length;y++){var b=f[y],T=t[b];t[b]!==e[b]&&(r=!0),T!==void 0?_g(n,b,T):b in hy?(console.warn("setting default value: ".concat(b,", from: ").concat(n[b]," to: ").concat(T," for"),n),r=!0,_g(n,b,hy[b])):console.warn("ignoring prop: ".concat(b,", from ").concat(n[b]," to ").concat(T," for"),n)}return r}var EC=function(n,e){var t=e.text,r=e.style;return new ZA(t,r)},TC=function(){return new Ni};function xu(n,e){if(n==null)return{};var t,r,s=(function(c,d){if(c==null)return{};var m,v,w={},f=Object.keys(c);for(v=0;v<f.length;v++)m=f[v],d.indexOf(m)>=0||(w[m]=c[m]);return w})(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}var AC=["draw","geometry"],CC=function(n,e){var t=e.geometry;en(!t||t instanceof sh,"Graphics geometry needs to be a `Graphics`");var r=t?new sh(t.geometry):new sh;return r.applyProps=function(s,a,c){var d=c.draw;c.geometry;var m=Ga(s,a,xu(c,AC));return a.draw!==d&&typeof d=="function"&&(m=!0,d.call(r,r)),m},r},IC=["image","texture"],PC=function(n,e){var t=e.leftWidth,r=t===void 0?10:t,s=e.topHeight,a=s===void 0?10:s,c=e.rightWidth,d=c===void 0?10:c,m=e.bottomHeight,v=m===void 0?10:m,w=ja("NineSlicePlane",n,e),f=new wA(w,r,a,d,v);return f.applyProps=function(y,b,T){var R=T.image,k=T.texture,L=Ga(y,b,xu(T,IC));return(R||k)&&(k!==b.texture&&(L=!0),y.texture=ja("NineSlicePlane",n,T)),L},f};function L_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.push.apply(t,r)}return t}function pf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?L_(Object(t),!0).forEach((function(r){fn(n,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):L_(Object(t)).forEach((function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))}))}return n}var RC=function(n,e){var t=e.maxSize,r=t===void 0?1500:t,s=e.batchSize,a=s===void 0?16384:s,c=e.autoResize,d=c!==void 0&&c,m=pf(pf({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),e.properties||{}),v=pf(pf({},{children:!1,texture:!1,baseTexture:!1}),e.destroyOptions||{}),w=new EA(r,m,a,d);return w.willUnmount=function(f,y,b){f.destroy(v)},w},kC=["image","texture"],MC=function(n,e){var t=new po(ja("Sprite",n,e));return t.applyProps=function(r,s,a){var c=a.image,d=a.texture,m=Ga(r,s,xu(a,kC));return(d&&s.texture!==a.texture||c&&s.image!==a.image)&&(s.texture!==a.texture&&(m=!0),r.texture=ja("Sprite",n,a)),m},t},OC=["textures","isPlaying","initialFrame","images"],DC=function(n,e){var t=e.textures,r=e.images,s=e.isPlaying,a=s===void 0||s,c=e.initialFrame,d=function(v){return v.map((function(w){return en(w instanceof ut||w?.texture,"AnimationSprite texture needs to be an array of `Texture` or `{ texture: Texture, time:\n                number }`"),w}))},m=r?ud.fromImages(r):new ud(d(t));return m[a?"gotoAndPlay":"gotoAndStop"](c||0),m.applyProps=function(v,w,f){var y=f.textures,b=f.isPlaying,T=f.initialFrame,R=f.images,k=Ga(v,w,xu(f,OC));if(R&&w.images!==R){for(var L=[],V=0;V<R.length;++V)L.push(ut.from(R[V]));v.textures=L,k=!0}if(y&&w.textures!==y&&(v.textures=d(y),k=!0),b!==w.isPlaying||T!==w.initialFrame){var z=typeof T=="number"?T:m.currentFrame||0;m[b?"gotoAndPlay":"gotoAndStop"](z),k=!0}return k},m},LC=function(n,e){var t=e.text,r=t===void 0?"":t,s=e.style,a=s===void 0?{}:s,c=e.isSprite,d=new Ry(r,a);return c?(d.updateText(),new po(d.texture)):d},NC=["tileScale","tilePosition","image","texture"],FC=function(n,e){var t=e.width,r=t===void 0?100:t,s=e.height,a=s===void 0?100:s,c=ja("TilingSprite",n,e),d=new ky(c,r,a);return d.applyProps=function(m,v,w){var f=w.tileScale,y=w.tilePosition,b=w.image,T=w.texture,R=Ga(m,v,xu(w,NC));if(y){var k,L=id(y);(k=m.tilePosition).set.apply(k,Tl(L)),R=!D_(id(v.tilePosition),L)||R}if(f){var V,z=id(f);(V=m.tileScale).set.apply(V,Tl(z)),R=!D_(id(v.tileScale),z)||R}return(b||T)&&(T!==v.texture&&(R=!0),m.texture=ja("Sprite",n,w)),R},d},BC=["image","texture"],UC=function(n,e){var t=ja("Mesh",n,e),r=e.vertices,s=e.uvs,a=e.indices,c=e.drawMode,d=c===void 0?Ho.TRIANGLES:c,m=new bA(t,r,s,a,d);return m.applyProps=function(v,w,f){var y=f.image,b=f.texture,T=Ga(v,w,xu(f,BC));return(y||b)&&(b!==w.texture&&(T=!0),v.texture=ja("Mesh",n,f)),T},m},jC=["image","texture"],GC=function(n,e){var t=ja("SimpleRope",n,e),r=e.points,s=new SA(t,r);return s.applyProps=function(a,c,d){var m=d.image,v=d.texture,w=xu(d,jC);en(Array.isArray(d.points),"SimpleRope points needs to be %s","Array<Point>");var f=Ga(a,c,w);return(m||v)&&(v!==c.texture&&(f=!0),a.texture=ja("SimpleRope",n,d)),f},s},zC=Object.freeze({__proto__:null,BitmapText:EC,Container:TC,Graphics:CC,NineSlicePlane:PC,ParticleContainer:RC,Sprite:MC,Text:LC,TilingSprite:FC,SimpleMesh:UC,SimpleRope:GC,AnimatedSprite:DC});function N_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.push.apply(t,r)}return t}function F_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?N_(Object(t),!0).forEach((function(r){fn(n,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):N_(Object(t)).forEach((function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))}))}return n}var _s={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},HC=Object.keys(_s).reduce((function(n,e){return F_(F_({},n),{},fn({},e,zC[e]))}),{}),Nw={};function VC(n,e){return en(!!n,"Expect type to be defined, got `%s`",n),en(!_s[n],"Component `%s` could not be created, already exists in default components.",n),Nw[n]=e,n}var B_,U_,j_,G_,dy={},fy={},WC={get exports(){return fy},set exports(n){fy=n}},z_={};function $C(){return U_||(U_=1,WC.exports=(B_||(B_=1,(function(n){function e(D,Y){var G=D.length;D.push(Y);e:for(;0<G;){var U=G-1>>>1,K=D[U];if(!(0<s(K,Y)))break e;D[U]=Y,D[G]=K,G=U}}function t(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var Y=D[0],G=D.pop();if(G!==Y){D[0]=G;e:for(var U=0,K=D.length,he=K>>>1;U<he;){var Ae=2*(U+1)-1,Oe=D[Ae],Fe=Ae+1,Ge=D[Fe];if(0>s(Oe,G))Fe<K&&0>s(Ge,Oe)?(D[U]=Ge,D[Fe]=G,U=Fe):(D[U]=Oe,D[Ae]=G,U=Ae);else{if(!(Fe<K&&0>s(Ge,G)))break e;D[U]=Ge,D[Fe]=G,U=Fe}}}return Y}function s(D,Y){var G=D.sortIndex-Y.sortIndex;return G!==0?G:D.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],v=[],w=1,f=null,y=3,b=!1,T=!1,R=!1,k=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function z(D){for(var Y=t(v);Y!==null;){if(Y.callback===null)r(v);else{if(!(Y.startTime<=D))break;r(v),Y.sortIndex=Y.expirationTime,e(m,Y)}Y=t(v)}}function J(D){if(R=!1,z(D),!T)if(t(m)!==null)T=!0,H(X);else{var Y=t(v);Y!==null&&W(J,Y.startTime-D)}}function X(D,Y){T=!1,R&&(R=!1,L(pe),pe=-1),b=!0;var G=y;try{for(z(Y),f=t(m);f!==null&&(!(f.expirationTime>Y)||D&&!ve());){var U=f.callback;if(typeof U=="function"){f.callback=null,y=f.priorityLevel;var K=U(f.expirationTime<=Y);Y=n.unstable_now(),typeof K=="function"?f.callback=K:f===t(m)&&r(m),z(Y)}else r(m);f=t(m)}if(f!==null)var he=!0;else{var Ae=t(v);Ae!==null&&W(J,Ae.startTime-Y),he=!1}return he}finally{f=null,y=G,b=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var fe,N=!1,te=null,pe=-1,Me=5,Pe=-1;function ve(){return!(n.unstable_now()-Pe<Me)}function _e(){if(te!==null){var D=n.unstable_now();Pe=D;var Y=!0;try{Y=te(!0,D)}finally{Y?fe():(N=!1,te=null)}}else N=!1}if(typeof V=="function")fe=function(){V(_e)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Xe=we.port2;we.port1.onmessage=_e,fe=function(){Xe.postMessage(null)}}else fe=function(){k(_e,0)};function H(D){te=D,N||(N=!0,fe())}function W(D,Y){pe=k((function(){D(n.unstable_now())}),Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){T||b||(T=!0,H(X))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Me=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(D){switch(y){case 1:case 2:case 3:var Y=3;break;default:Y=y}var G=y;y=Y;try{return D()}finally{y=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,Y){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var G=y;y=D;try{return Y()}finally{y=G}},n.unstable_scheduleCallback=function(D,Y,G){var U=n.unstable_now();switch(G=typeof G=="object"&&G!==null&&typeof(G=G.delay)=="number"&&0<G?U+G:U,D){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return D={id:w++,callback:Y,priorityLevel:D,startTime:G,expirationTime:K=G+K,sortIndex:-1},G>U?(D.sortIndex=G,e(v,D),t(m)===null&&D===t(v)&&(R?(L(pe),pe=-1):R=!0,W(J,G-U))):(D.sortIndex=K,e(m,D),T||b||(T=!0,H(X))),D},n.unstable_shouldYield=ve,n.unstable_wrapCallback=function(D){var Y=y;return function(){var G=y;y=Y;try{return D.apply(this,arguments)}finally{y=G}}}})(z_)),z_)),fy}function qC(){return G_||(G_=1,j_=function(n){var e={},t=Jr,r=$C(),s=Object.assign;function a(l){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+l,_=1;_<arguments.length;_++)u+="&args[]="+encodeURIComponent(arguments[_]);return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,d=Symbol.for("react.element"),m=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),b=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),z=Symbol.for("react.offscreen"),J=Symbol.iterator;function X(l){return l===null||typeof l!="object"?null:typeof(l=J&&l[J]||l["@@iterator"])=="function"?l:null}function fe(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case m:return"Portal";case f:return"Profiler";case w:return"StrictMode";case R:return"Suspense";case k:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case b:return(l.displayName||"Context")+".Consumer";case y:return(l._context.displayName||"Context")+".Provider";case T:var u=l.render;return(l=l.displayName)||(l=(l=u.displayName||u.name||"")!==""?"ForwardRef("+l+")":"ForwardRef"),l;case L:return(u=l.displayName||null)!==null?u:fe(l.type)||"Memo";case V:u=l._payload,l=l._init;try{return fe(l(u))}catch{}}return null}function N(l){var u=l.type;switch(l.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=(l=u.render).displayName||l.name||"",u.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(u);case 8:return u===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function te(l){var u=l,_=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do(4098&(u=l).flags)!=0&&(_=u.return),l=u.return;while(l)}return u.tag===3?_:null}function pe(l){if(te(l)!==l)throw Error(a(188))}function Me(l){var u=l.alternate;if(!u){if((u=te(l))===null)throw Error(a(188));return u!==l?null:l}for(var _=l,E=u;;){var C=_.return;if(C===null)break;var O=C.alternate;if(O===null){if((E=C.return)!==null){_=E;continue}break}if(C.child===O.child){for(O=C.child;O;){if(O===_)return pe(C),l;if(O===E)return pe(C),u;O=O.sibling}throw Error(a(188))}if(_.return!==E.return)_=C,E=O;else{for(var $=!1,ce=C.child;ce;){if(ce===_){$=!0,_=C,E=O;break}if(ce===E){$=!0,E=C,_=O;break}ce=ce.sibling}if(!$){for(ce=O.child;ce;){if(ce===_){$=!0,_=O,E=C;break}if(ce===E){$=!0,E=O,_=C;break}ce=ce.sibling}if(!$)throw Error(a(189))}}if(_.alternate!==E)throw Error(a(190))}if(_.tag!==3)throw Error(a(188));return _.stateNode.current===_?l:u}function Pe(l){return(l=Me(l))!==null?ve(l):null}function ve(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var u=ve(l);if(u!==null)return u;l=l.sibling}return null}function _e(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){if(l.tag!==4){var u=_e(l);if(u!==null)return u}l=l.sibling}return null}var we,Xe=Array.isArray,H=n.getPublicInstance,W=n.getRootHostContext,D=n.getChildHostContext,Y=n.prepareForCommit,G=n.resetAfterCommit,U=n.createInstance,K=n.appendInitialChild,he=n.finalizeInitialChildren,Ae=n.prepareUpdate,Oe=n.shouldSetTextContent,Fe=n.createTextInstance,Ge=n.scheduleTimeout,Ke=n.cancelTimeout,st=n.noTimeout,Se=n.isPrimaryRenderer,at=n.supportsMutation,Qe=n.supportsPersistence,yt=n.supportsHydration,Bt=n.getInstanceFromNode,ft=n.preparePortalMount,_t=n.getCurrentEventPriority,gr=n.detachDeletedInstance,Cr=n.supportsMicrotasks,Fi=n.scheduleMicrotask,Nr=n.supportsTestSelectors,dr=n.findFiberRoot,vi=n.getBoundingRect,Hn=n.getTextContent,Pn=n.isHiddenSubtree,Fs=n.matchAccessibilityRole,gn=n.setFocusIfFocusable,Jn=n.setupIntersectionObserver,Bs=n.appendChild,ei=n.appendChildToContainer,_i=n.commitTextUpdate,xi=n.commitMount,xs=n.commitUpdate,mo=n.insertBefore,Us=n.insertInContainerBefore,Vn=n.removeChild,ie=n.removeChildFromContainer,Ie=n.resetTextContent,Nt=n.hideInstance,Zt=n.hideTextInstance,ze=n.unhideInstance,kt=n.unhideTextInstance,yn=n.clearContainer,ti=n.cloneInstance,$r=n.createContainerChildSet,Rn=n.appendChildToContainerChildSet,Yo=n.finalizeContainerChildren,wi=n.replaceContainerChildren,Mr=n.cloneHiddenInstance,bi=n.cloneHiddenTextInstance,Bi=n.canHydrateInstance,ws=n.canHydrateTextInstance,Xt=n.canHydrateSuspenseInstance,Sr=n.isSuspenseInstancePending,ri=n.isSuspenseInstanceFallback,Si=n.getSuspenseInstanceFallbackErrorDetails,Ei=n.registerSuspenseInstanceRetry,ni=n.getNextHydratableSibling,Al=n.getFirstHydratableChild,ii=n.getFirstHydratableChildWithinContainer,bs=n.getFirstHydratableChildWithinSuspenseInstance,qr=n.hydrateInstance,js=n.hydrateTextInstance,Cl=n.hydrateSuspenseInstance,si=n.getNextHydratableInstanceAfterSuspenseInstance,Ui=n.commitHydratedContainer,Wn=n.commitHydratedSuspenseInstance,Ha=n.clearSuspenseBoundary,go=n.clearSuspenseBoundaryFromContainer,Or=n.shouldDeleteUnhydratedTailInstances,yo=n.didNotMatchHydratedContainerTextInstance,nr=n.didNotMatchHydratedTextInstance;function Qo(l){if(we===void 0)try{throw Error()}catch(_){var u=_.stack.trim().match(/\n( *(at )?)/);we=u&&u[1]||""}return`
`+we+l}var ji=!1;function vo(l,u){if(!l||ji)return"";ji=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Le){var E=Le}Reflect.construct(l,[],u)}else{try{u.call()}catch(Le){E=Le}l.call(u.prototype)}else{try{throw Error()}catch(Le){E=Le}l()}}catch(Le){if(Le&&E&&typeof Le.stack=="string"){for(var C=Le.stack.split(`
`),O=E.stack.split(`
`),$=C.length-1,ce=O.length-1;1<=$&&0<=ce&&C[$]!==O[ce];)ce--;for(;1<=$&&0<=ce;$--,ce--)if(C[$]!==O[ce]){if($!==1||ce!==1)do if($--,0>--ce||C[$]!==O[ce]){var Te=`
`+C[$].replace(" at new "," at ");return l.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",l.displayName)),Te}while(1<=$&&0<=ce);break}}}finally{ji=!1,Error.prepareStackTrace=_}return(l=l?l.displayName||l.name:"")?Qo(l):""}var Zo=Object.prototype.hasOwnProperty,Va=[],$n=-1;function oi(l){return{current:l}}function Wt(l){0>$n||(l.current=Va[$n],Va[$n]=null,$n--)}function fr(l,u){$n++,Va[$n]=l.current,l.current=u}var Rt={},rn=oi(Rt),bn=oi(!1),Gi=Rt;function qn(l,u){var _=l.type.contextTypes;if(!_)return Rt;var E=l.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===u)return E.__reactInternalMemoizedMaskedChildContext;var C,O={};for(C in _)O[C]=u[C];return E&&((l=l.stateNode).__reactInternalMemoizedUnmaskedChildContext=u,l.__reactInternalMemoizedMaskedChildContext=O),O}function nn(l){return(l=l.childContextTypes)!=null}function Gs(){Wt(bn),Wt(rn)}function Jo(l,u,_){if(rn.current!==Rt)throw Error(a(168));fr(rn,u),fr(bn,_)}function pr(l,u,_){var E=l.stateNode;if(u=u.childContextTypes,typeof E.getChildContext!="function")return _;for(var C in E=E.getChildContext())if(!(C in u))throw Error(a(108,N(l)||"Unknown",C));return s({},_,E)}function zs(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Rt,Gi=rn.current,fr(rn,l),fr(bn,bn.current),!0}function Hs(l,u,_){var E=l.stateNode;if(!E)throw Error(a(169));_?(l=pr(l,u,Gi),E.__reactInternalMemoizedMergedChildContext=l,Wt(bn),Wt(rn),fr(rn,l)):Wt(bn),fr(bn,_)}var sn=Math.clz32?Math.clz32:function(l){return(l>>>=0)===0?32:31-(Wa(l)/_o|0)|0},Wa=Math.log,_o=Math.LN2,ea=64,ta=4194304;function $t(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&l;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&l;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function ra(l,u){var _=l.pendingLanes;if(_===0)return 0;var E=0,C=l.suspendedLanes,O=l.pingedLanes,$=268435455&_;if($!==0){var ce=$&~C;ce!==0?E=$t(ce):(O&=$)!==0&&(E=$t(O))}else($=_&~C)!==0?E=$t($):O!==0&&(E=$t(O));if(E===0)return 0;if(u!==0&&u!==E&&(u&C)==0&&((C=E&-E)>=(O=u&-u)||C===16&&(4194240&O)!=0))return u;if((4&E)!=0&&(E|=16&_),(u=l.entangledLanes)!==0)for(l=l.entanglements,u&=E;0<u;)C=1<<(_=31-sn(u)),E|=l[_],u&=~C;return E}function gc(l,u){switch(l){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;default:return-1}}function qt(l){return(l=-1073741825&l.pendingLanes)!==0?l:1073741824&l?1073741824:0}function Il(){var l=ea;return(4194240&(ea<<=1))==0&&(ea=64),l}function Pl(l){for(var u=[],_=0;31>_;_++)u.push(l);return u}function na(l,u,_){l.pendingLanes|=u,u!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),(l=l.eventTimes)[u=31-sn(u)]=_}function on(l,u){var _=l.entangledLanes|=u;for(l=l.entanglements;_;){var E=31-sn(_),C=1<<E;C&u|l[E]&u&&(l[E]|=u),_&=~C}}var Ut=0;function ai(l){return 1<(l&=-l)?4<l?(268435455&l)!=0?16:536870912:4:1}var an=r.unstable_scheduleCallback,zi=r.unstable_cancelCallback,ia=r.unstable_shouldYield,Ir=r.unstable_requestPaint,Kt=r.unstable_now,xo=r.unstable_ImmediatePriority,sa=r.unstable_UserBlockingPriority,Vs=r.unstable_NormalPriority,Ws=r.unstable_IdlePriority,$a=null,Pr=null,kn=typeof Object.is=="function"?Object.is:function(l,u){return l===u&&(l!==0||1/l==1/u)||l!=l&&u!=u},Hi=null,Vi=!1,Ti=!1;function Ss(l){Hi===null?Hi=[l]:Hi.push(l)}function Mn(){if(!Ti&&Hi!==null){Ti=!0;var l=0,u=Ut;try{var _=Hi;for(Ut=1;l<_.length;l++){var E=_[l];do E=E(!0);while(E!==null)}Hi=null,Vi=!1}catch(C){throw Hi!==null&&(Hi=Hi.slice(l+1)),an(xo,Mn),C}finally{Ut=u,Ti=!1}}return null}var oa=[],Wi=0,aa=null,wo=0,ln=[],vn=0,_n=null,li=1,ui="";function $s(l,u){oa[Wi++]=wo,oa[Wi++]=aa,aa=l,wo=u}function bo(l,u,_){ln[vn++]=li,ln[vn++]=ui,ln[vn++]=_n,_n=l;var E=li;l=ui;var C=32-sn(E)-1;E&=~(1<<C),_+=1;var O=32-sn(u)+C;if(30<O){var $=C-C%5;O=(E&(1<<$)-1).toString(32),E>>=$,C-=$,li=1<<32-sn(u)+C|_<<C|E,ui=O+l}else li=1<<O|_<<C|E,ui=l}function qs(l){l.return!==null&&($s(l,1),bo(l,1,0))}function qa(l){for(;l===aa;)aa=oa[--Wi],oa[Wi]=null,wo=oa[--Wi],oa[Wi]=null;for(;l===_n;)_n=ln[--vn],ln[vn]=null,ui=ln[--vn],ln[vn]=null,li=ln[--vn],ln[vn]=null}var ur=null,Fr=null,ir=!1,$i=!1,Ai=null;function Es(l,u){var _=Mi(5,null,null,0);_.elementType="DELETED",_.stateNode=u,_.return=l,(u=l.deletions)===null?(l.deletions=[_],l.flags|=16):u.push(_)}function la(l,u){switch(l.tag){case 5:return(u=Bi(u,l.type,l.pendingProps))!==null&&(l.stateNode=u,ur=l,Fr=Al(u),!0);case 6:return(u=ws(u,l.pendingProps))!==null&&(l.stateNode=u,ur=l,Fr=null,!0);case 13:if((u=Xt(u))!==null){var _=_n!==null?{id:li,overflow:ui}:null;return l.memoizedState={dehydrated:u,treeContext:_,retryLane:1073741824},(_=Mi(18,null,null,0)).stateNode=u,_.return=l,l.child=_,ur=l,Fr=null,!0}return!1;default:return!1}}function Ts(l){return(1&l.mode)!=0&&(128&l.flags)==0}function Xs(l){if(ir){var u=Fr;if(u){var _=u;if(!la(l,u)){if(Ts(l))throw Error(a(418));u=ni(_);var E=ur;u&&la(l,u)?Es(E,_):(l.flags=-4097&l.flags|2,ir=!1,ur=l)}}else{if(Ts(l))throw Error(a(418));l.flags=-4097&l.flags|2,ir=!1,ur=l}}}function Xa(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;ur=l}function zr(l){if(!yt||l!==ur)return!1;if(!ir)return Xa(l),ir=!0,!1;if(l.tag!==3&&(l.tag!==5||Or(l.type)&&!Oe(l.type,l.memoizedProps))){var u=Fr;if(u){if(Ts(l))throw ua(),Error(a(418));for(;u;)Es(l,u),u=ni(u)}}if(Xa(l),l.tag===13){if(!yt)throw Error(a(316));if(!(l=(l=l.memoizedState)!==null?l.dehydrated:null))throw Error(a(317));Fr=si(l)}else Fr=ur?ni(l.stateNode):null;return!0}function ua(){for(var l=Fr;l;)l=ni(l)}function qi(){yt&&(Fr=ur=null,$i=ir=!1)}function ca(l){Ai===null?Ai=[l]:Ai.push(l)}var Rl=c.ReactCurrentBatchConfig;function Ka(l,u){if(kn(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var _=Object.keys(l),E=Object.keys(u);if(_.length!==E.length)return!1;for(E=0;E<_.length;E++){var C=_[E];if(!Zo.call(u,C)||!kn(l[C],u[C]))return!1}return!0}function yc(l){switch(l.tag){case 5:return Qo(l.type);case 16:return Qo("Lazy");case 13:return Qo("Suspense");case 19:return Qo("SuspenseList");case 0:case 2:case 15:return l=vo(l.type,!1);case 11:return l=vo(l.type.render,!1);case 1:return l=vo(l.type,!0);default:return""}}function On(l,u){if(l&&l.defaultProps){for(var _ in u=s({},u),l=l.defaultProps)u[_]===void 0&&(u[_]=l[_]);return u}return u}var ha=oi(null),Ci=null,Ks=null,Ya=null;function da(){Ya=Ks=Ci=null}function kl(l,u,_){Se?(fr(ha,u._currentValue),u._currentValue=_):(fr(ha,u._currentValue2),u._currentValue2=_)}function fa(l){var u=ha.current;Wt(ha),Se?l._currentValue=u:l._currentValue2=u}function wu(l,u,_){for(;l!==null;){var E=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,E!==null&&(E.childLanes|=u)):E!==null&&(E.childLanes&u)!==u&&(E.childLanes|=u),l===_)break;l=l.return}}function Ys(l,u){Ci=l,Ya=Ks=null,(l=l.dependencies)!==null&&l.firstContext!==null&&((l.lanes&u)!=0&&(Ur=!0),l.firstContext=null)}function Sn(l){var u=Se?l._currentValue:l._currentValue2;if(Ya!==l)if(l={context:l,memoizedValue:u,next:null},Ks===null){if(Ci===null)throw Error(a(308));Ks=l,Ci.dependencies={lanes:0,firstContext:l}}else Ks=Ks.next=l;return u}var Qs=null;function Qa(l){Qs===null?Qs=[l]:Qs.push(l)}function Ml(l,u,_,E){var C=u.interleaved;return C===null?(_.next=_,Qa(u)):(_.next=C.next,C.next=_),u.interleaved=_,Xi(l,E)}function Xi(l,u){l.lanes|=u;var _=l.alternate;for(_!==null&&(_.lanes|=u),_=l,l=l.return;l!==null;)l.childLanes|=u,(_=l.alternate)!==null&&(_.childLanes|=u),_=l,l=l.return;return _.tag===3?_.stateNode:null}var As=!1;function bu(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Su(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Ki(l,u){return{eventTime:l,lane:u,tag:0,payload:null,callback:null,next:null}}function Yi(l,u,_){var E=l.updateQueue;if(E===null)return null;if(E=E.shared,(2&jt)!=0){var C=E.pending;return C===null?u.next=u:(u.next=C.next,C.next=u),E.pending=u,Xi(l,_)}return(C=E.interleaved)===null?(u.next=u,Qa(E)):(u.next=C.next,C.next=u),E.interleaved=u,Xi(l,_)}function Cs(l,u,_){if((u=u.updateQueue)!==null&&(u=u.shared,(4194240&_)!=0)){var E=u.lanes;_|=E&=l.pendingLanes,u.lanes=_,on(l,_)}}function Ol(l,u){var _=l.updateQueue,E=l.alternate;if(E!==null&&_===(E=E.updateQueue)){var C=null,O=null;if((_=_.firstBaseUpdate)!==null){do{var $={eventTime:_.eventTime,lane:_.lane,tag:_.tag,payload:_.payload,callback:_.callback,next:null};O===null?C=O=$:O=O.next=$,_=_.next}while(_!==null);O===null?C=O=u:O=O.next=u}else C=O=u;return _={baseState:E.baseState,firstBaseUpdate:C,lastBaseUpdate:O,shared:E.shared,effects:E.effects},void(l.updateQueue=_)}(l=_.lastBaseUpdate)===null?_.firstBaseUpdate=u:l.next=u,_.lastBaseUpdate=u}function pa(l,u,_,E){var C=l.updateQueue;As=!1;var O=C.firstBaseUpdate,$=C.lastBaseUpdate,ce=C.shared.pending;if(ce!==null){C.shared.pending=null;var Te=ce,Le=Te.next;Te.next=null,$===null?O=Le:$.next=Le,$=Te;var Ue=l.alternate;Ue!==null&&(ce=(Ue=Ue.updateQueue).lastBaseUpdate)!==$&&(ce===null?Ue.firstBaseUpdate=Le:ce.next=Le,Ue.lastBaseUpdate=Te)}if(O!==null){var lt=C.baseState;for($=0,Ue=Le=Te=null,ce=O;;){var Be=ce.lane,Ze=ce.eventTime;if((E&Be)===Be){Ue!==null&&(Ue=Ue.next={eventTime:Ze,lane:0,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null});e:{var xt=l,Ht=ce;switch(Be=u,Ze=_,Ht.tag){case 1:if(typeof(xt=Ht.payload)=="function"){lt=xt.call(Ze,lt,Be);break e}lt=xt;break e;case 3:xt.flags=-65537&xt.flags|128;case 0:if((Be=typeof(xt=Ht.payload)=="function"?xt.call(Ze,lt,Be):xt)==null)break e;lt=s({},lt,Be);break e;case 2:As=!0}}ce.callback!==null&&ce.lane!==0&&(l.flags|=64,(Be=C.effects)===null?C.effects=[ce]:Be.push(ce))}else Ze={eventTime:Ze,lane:Be,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},Ue===null?(Le=Ue=Ze,Te=lt):Ue=Ue.next=Ze,$|=Be;if((ce=ce.next)===null){if((ce=C.shared.pending)===null)break;ce=(Be=ce).next,Be.next=null,C.lastBaseUpdate=Be,C.shared.pending=null}}if(Ue===null&&(Te=lt),C.baseState=Te,C.firstBaseUpdate=Le,C.lastBaseUpdate=Ue,(u=C.shared.interleaved)!==null){C=u;do $|=C.lane,C=C.next;while(C!==u)}else O===null&&(C.shared.lanes=0);Sa|=$,l.lanes=$,l.memoizedState=lt}}function Dl(l,u,_){if(l=u.effects,u.effects=null,l!==null)for(u=0;u<l.length;u++){var E=l[u],C=E.callback;if(C!==null){if(E.callback=null,E=_,typeof C!="function")throw Error(a(191,C));C.call(E)}}}var Eu=new t.Component().refs;function Ll(l,u,_,E){_=(_=_(E,u=l.memoizedState))==null?u:s({},u,_),l.memoizedState=_,l.lanes===0&&(l.updateQueue.baseState=_)}var Za={isMounted:function(l){return!!(l=l._reactInternals)&&te(l)===l},enqueueSetState:function(l,u,_){l=l._reactInternals;var E=cn(),C=ds(l),O=Ki(E,C);O.payload=u,_!=null&&(O.callback=_),(u=Yi(l,O,C))!==null&&(Fn(u,l,C,E),Cs(u,l,C))},enqueueReplaceState:function(l,u,_){l=l._reactInternals;var E=cn(),C=ds(l),O=Ki(E,C);O.tag=1,O.payload=u,_!=null&&(O.callback=_),(u=Yi(l,O,C))!==null&&(Fn(u,l,C,E),Cs(u,l,C))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var _=cn(),E=ds(l),C=Ki(_,E);C.tag=2,u!=null&&(C.callback=u),(u=Yi(l,C,E))!==null&&(Fn(u,l,E,_),Cs(u,l,E))}};function Qi(l,u,_,E,C,O,$){return typeof(l=l.stateNode).shouldComponentUpdate=="function"?l.shouldComponentUpdate(E,O,$):!u.prototype||!u.prototype.isPureReactComponent||!Ka(_,E)||!Ka(C,O)}function Zi(l,u,_){var E=!1,C=Rt,O=u.contextType;return typeof O=="object"&&O!==null?O=Sn(O):(C=nn(u)?Gi:rn.current,O=(E=(E=u.contextTypes)!=null)?qn(l,C):Rt),u=new u(_,O),l.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Za,l.stateNode=u,u._reactInternals=l,E&&((l=l.stateNode).__reactInternalMemoizedUnmaskedChildContext=C,l.__reactInternalMemoizedMaskedChildContext=O),u}function Rr(l,u,_,E){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(_,E),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(_,E),u.state!==l&&Za.enqueueReplaceState(u,u.state,null)}function ma(l,u,_,E){var C=l.stateNode;C.props=_,C.state=l.memoizedState,C.refs=Eu,bu(l);var O=u.contextType;typeof O=="object"&&O!==null?C.context=Sn(O):(O=nn(u)?Gi:rn.current,C.context=qn(l,O)),C.state=l.memoizedState,typeof(O=u.getDerivedStateFromProps)=="function"&&(Ll(l,u,O,_),C.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(u=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),u!==C.state&&Za.enqueueReplaceState(C,C.state,null),pa(l,_,C,E),C.state=l.memoizedState),typeof C.componentDidMount=="function"&&(l.flags|=4194308)}function Ii(l,u,_){if((l=_.ref)!==null&&typeof l!="function"&&typeof l!="object"){if(_._owner){if(_=_._owner){if(_.tag!==1)throw Error(a(309));var E=_.stateNode}if(!E)throw Error(a(147,l));var C=E,O=""+l;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===O?u.ref:(u=function($){var ce=C.refs;ce===Eu&&(ce=C.refs={}),$===null?delete ce[O]:ce[O]=$},u._stringRef=O,u)}if(typeof l!="string")throw Error(a(284));if(!_._owner)throw Error(a(290,l))}return l}function Ja(l,u){throw l=Object.prototype.toString.call(u),Error(a(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l))}function Zs(l){return(0,l._init)(l._payload)}function So(l){function u(je,ye){if(l){var ke=je.deletions;ke===null?(je.deletions=[ye],je.flags|=16):ke.push(ye)}}function _(je,ye){if(!l)return null;for(;ye!==null;)u(je,ye),ye=ye.sibling;return null}function E(je,ye){for(je=new Map;ye!==null;)ye.key!==null?je.set(ye.key,ye):je.set(ye.index,ye),ye=ye.sibling;return je}function C(je,ye){return(je=Do(je,ye)).index=0,je.sibling=null,je}function O(je,ye,ke){return je.index=ke,l?(ke=je.alternate)!==null?(ke=ke.index)<ye?(je.flags|=2,ye):ke:(je.flags|=2,ye):(je.flags|=1048576,ye)}function $(je){return l&&je.alternate===null&&(je.flags|=2),je}function ce(je,ye,ke,$e){return ye===null||ye.tag!==6?((ye=Lc(ke,je.mode,$e)).return=je,ye):((ye=C(ye,ke)).return=je,ye)}function Te(je,ye,ke,$e){var It=ke.type;return It===v?Ue(je,ye,ke.props.children,$e,ke.key):ye!==null&&(ye.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===V&&Zs(It)===ye.type)?(($e=C(ye,ke.props)).ref=Ii(je,ye,ke),$e.return=je,$e):(($e=Vu(ke.type,ke.key,ke.props,null,je.mode,$e)).ref=Ii(je,ye,ke),$e.return=je,$e)}function Le(je,ye,ke,$e){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==ke.containerInfo||ye.stateNode.implementation!==ke.implementation?((ye=Oh(ke,je.mode,$e)).return=je,ye):((ye=C(ye,ke.children||[])).return=je,ye)}function Ue(je,ye,ke,$e,It){return ye===null||ye.tag!==7?((ye=Ta(ke,je.mode,$e,It)).return=je,ye):((ye=C(ye,ke)).return=je,ye)}function lt(je,ye,ke){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return(ye=Lc(""+ye,je.mode,ke)).return=je,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case d:return(ke=Vu(ye.type,ye.key,ye.props,null,je.mode,ke)).ref=Ii(je,null,ye),ke.return=je,ke;case m:return(ye=Oh(ye,je.mode,ke)).return=je,ye;case V:return lt(je,(0,ye._init)(ye._payload),ke)}if(Xe(ye)||X(ye))return(ye=Ta(ye,je.mode,ke,null)).return=je,ye;Ja(je,ye)}return null}function Be(je,ye,ke,$e){var It=ye!==null?ye.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number")return It!==null?null:ce(je,ye,""+ke,$e);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case d:return ke.key===It?Te(je,ye,ke,$e):null;case m:return ke.key===It?Le(je,ye,ke,$e):null;case V:return Be(je,ye,(It=ke._init)(ke._payload),$e)}if(Xe(ke)||X(ke))return It!==null?null:Ue(je,ye,ke,$e,null);Ja(je,ke)}return null}function Ze(je,ye,ke,$e,It){if(typeof $e=="string"&&$e!==""||typeof $e=="number")return ce(ye,je=je.get(ke)||null,""+$e,It);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case d:return Te(ye,je=je.get($e.key===null?ke:$e.key)||null,$e,It);case m:return Le(ye,je=je.get($e.key===null?ke:$e.key)||null,$e,It);case V:return Ze(je,ye,ke,(0,$e._init)($e._payload),It)}if(Xe($e)||X($e))return Ue(ye,je=je.get(ke)||null,$e,It,null);Ja(ye,$e)}return null}function xt(je,ye,ke,$e){for(var It=null,sr=null,bt=ye,tr=ye=0,hn=null;bt!==null&&tr<ke.length;tr++){bt.index>tr?(hn=bt,bt=null):hn=bt.sibling;var or=Be(je,bt,ke[tr],$e);if(or===null){bt===null&&(bt=hn);break}l&&bt&&or.alternate===null&&u(je,bt),ye=O(or,ye,tr),sr===null?It=or:sr.sibling=or,sr=or,bt=hn}if(tr===ke.length)return _(je,bt),ir&&$s(je,tr),It;if(bt===null){for(;tr<ke.length;tr++)(bt=lt(je,ke[tr],$e))!==null&&(ye=O(bt,ye,tr),sr===null?It=bt:sr.sibling=bt,sr=bt);return ir&&$s(je,tr),It}for(bt=E(je,bt);tr<ke.length;tr++)(hn=Ze(bt,je,tr,ke[tr],$e))!==null&&(l&&hn.alternate!==null&&bt.delete(hn.key===null?tr:hn.key),ye=O(hn,ye,tr),sr===null?It=hn:sr.sibling=hn,sr=hn);return l&&bt.forEach((function(no){return u(je,no)})),ir&&$s(je,tr),It}function Ht(je,ye,ke,$e){var It=X(ke);if(typeof It!="function")throw Error(a(150));if((ke=It.call(ke))==null)throw Error(a(151));for(var sr=It=null,bt=ye,tr=ye=0,hn=null,or=ke.next();bt!==null&&!or.done;tr++,or=ke.next()){bt.index>tr?(hn=bt,bt=null):hn=bt.sibling;var no=Be(je,bt,or.value,$e);if(no===null){bt===null&&(bt=hn);break}l&&bt&&no.alternate===null&&u(je,bt),ye=O(no,ye,tr),sr===null?It=no:sr.sibling=no,sr=no,bt=hn}if(or.done)return _(je,bt),ir&&$s(je,tr),It;if(bt===null){for(;!or.done;tr++,or=ke.next())(or=lt(je,or.value,$e))!==null&&(ye=O(or,ye,tr),sr===null?It=or:sr.sibling=or,sr=or);return ir&&$s(je,tr),It}for(bt=E(je,bt);!or.done;tr++,or=ke.next())(or=Ze(bt,je,tr,or.value,$e))!==null&&(l&&or.alternate!==null&&bt.delete(or.key===null?tr:or.key),ye=O(or,ye,tr),sr===null?It=or:sr.sibling=or,sr=or);return l&&bt.forEach((function(Sd){return u(je,Sd)})),ir&&$s(je,tr),It}return function je(ye,ke,$e,It){if(typeof $e=="object"&&$e!==null&&$e.type===v&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case d:e:{for(var sr=$e.key,bt=ke;bt!==null;){if(bt.key===sr){if((sr=$e.type)===v){if(bt.tag===7){_(ye,bt.sibling),(ke=C(bt,$e.props.children)).return=ye,ye=ke;break e}}else if(bt.elementType===sr||typeof sr=="object"&&sr!==null&&sr.$$typeof===V&&Zs(sr)===bt.type){_(ye,bt.sibling),(ke=C(bt,$e.props)).ref=Ii(ye,bt,$e),ke.return=ye,ye=ke;break e}_(ye,bt);break}u(ye,bt),bt=bt.sibling}$e.type===v?((ke=Ta($e.props.children,ye.mode,It,$e.key)).return=ye,ye=ke):((It=Vu($e.type,$e.key,$e.props,null,ye.mode,It)).ref=Ii(ye,ke,$e),It.return=ye,ye=It)}return $(ye);case m:e:{for(bt=$e.key;ke!==null;){if(ke.key===bt){if(ke.tag===4&&ke.stateNode.containerInfo===$e.containerInfo&&ke.stateNode.implementation===$e.implementation){_(ye,ke.sibling),(ke=C(ke,$e.children||[])).return=ye,ye=ke;break e}_(ye,ke);break}u(ye,ke),ke=ke.sibling}(ke=Oh($e,ye.mode,It)).return=ye,ye=ke}return $(ye);case V:return je(ye,ke,(bt=$e._init)($e._payload),It)}if(Xe($e))return xt(ye,ke,$e,It);if(X($e))return Ht(ye,ke,$e,It);Ja(ye,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"?($e=""+$e,ke!==null&&ke.tag===6?(_(ye,ke.sibling),(ke=C(ke,$e)).return=ye,ye=ke):(_(ye,ke),(ke=Lc($e,ye.mode,It)).return=ye,ye=ke),$(ye)):_(ye,ke)}}var ci=So(!0),Eo=So(!1),Ji={},Br=oi(Ji),Js=oi(Ji),p=oi(Ji);function x(l){if(l===Ji)throw Error(a(174));return l}function A(l,u){fr(p,u),fr(Js,l),fr(Br,Ji),l=W(u),Wt(Br),fr(Br,l)}function P(){Wt(Br),Wt(Js),Wt(p)}function M(l){var u=x(p.current),_=x(Br.current);_!==(u=D(_,l.type,u))&&(fr(Js,l),fr(Br,u))}function F(l){Js.current===l&&(Wt(Br),Wt(Js))}var j=oi(0);function q(l){for(var u=l;u!==null;){if(u.tag===13){var _=u.memoizedState;if(_!==null&&((_=_.dehydrated)===null||Sr(_)||ri(_)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((128&u.flags)!=0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var le=[];function me(){for(var l=0;l<le.length;l++){var u=le[l];Se?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}le.length=0}var oe=c.ReactCurrentDispatcher,se=c.ReactCurrentBatchConfig,ue=0,ne=null,re=null,ee=null,xe=!1,Ee=!1,ge=0,De=0;function Ne(){throw Error(a(321))}function Je(l,u){if(u===null)return!1;for(var _=0;_<u.length&&_<l.length;_++)if(!kn(l[_],u[_]))return!1;return!0}function rt(l,u,_,E,C,O){if(ue=O,ne=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,oe.current=l===null||l.memoizedState===null?gh:yh,l=_(E,C),Ee){O=0;do{if(Ee=!1,ge=0,25<=O)throw Error(a(301));O+=1,ee=re=null,u.updateQueue=null,oe.current=vh,l=_(E,C)}while(Ee)}if(oe.current=Ul,u=re!==null&&re.next!==null,ue=0,ee=re=ne=null,xe=!1,u)throw Error(a(300));return l}function He(){var l=ge!==0;return ge=0,l}function ot(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ee===null?ne.memoizedState=ee=l:ee=ee.next=l,ee}function et(){if(re===null){var l=ne.alternate;l=l!==null?l.memoizedState:null}else l=re.next;var u=ee===null?ne.memoizedState:ee.next;if(u!==null)ee=u,re=l;else{if(l===null)throw Error(a(310));l={memoizedState:(re=l).memoizedState,baseState:re.baseState,baseQueue:re.baseQueue,queue:re.queue,next:null},ee===null?ne.memoizedState=ee=l:ee=ee.next=l}return ee}function qe(l,u){return typeof u=="function"?u(l):u}function ct(l){var u=et(),_=u.queue;if(_===null)throw Error(a(311));_.lastRenderedReducer=l;var E=re,C=E.baseQueue,O=_.pending;if(O!==null){if(C!==null){var $=C.next;C.next=O.next,O.next=$}E.baseQueue=C=O,_.pending=null}if(C!==null){O=C.next,E=E.baseState;var ce=$=null,Te=null,Le=O;do{var Ue=Le.lane;if((ue&Ue)===Ue)Te!==null&&(Te=Te.next={lane:0,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),E=Le.hasEagerState?Le.eagerState:l(E,Le.action);else{var lt={lane:Ue,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null};Te===null?(ce=Te=lt,$=E):Te=Te.next=lt,ne.lanes|=Ue,Sa|=Ue}Le=Le.next}while(Le!==null&&Le!==O);Te===null?$=E:Te.next=ce,kn(E,u.memoizedState)||(Ur=!0),u.memoizedState=E,u.baseState=$,u.baseQueue=Te,_.lastRenderedState=E}if((l=_.interleaved)!==null){C=l;do O=C.lane,ne.lanes|=O,Sa|=O,C=C.next;while(C!==l)}else C===null&&(_.lanes=0);return[u.memoizedState,_.dispatch]}function Vt(l){var u=et(),_=u.queue;if(_===null)throw Error(a(311));_.lastRenderedReducer=l;var E=_.dispatch,C=_.pending,O=u.memoizedState;if(C!==null){_.pending=null;var $=C=C.next;do O=l(O,$.action),$=$.next;while($!==C);kn(O,u.memoizedState)||(Ur=!0),u.memoizedState=O,u.baseQueue===null&&(u.baseState=O),_.lastRenderedState=O}return[O,E]}function Yt(){}function Ct(l,u){var _=ne,E=et(),C=u(),O=!kn(E.memoizedState,C);if(O&&(E.memoizedState=C,Ur=!0),E=E.queue,_c(Dn.bind(null,_,E,l),[l]),E.getSnapshot!==u||O||ee!==null&&1&ee.memoizedState.tag){if(_.flags|=2048,Tu(9,yr.bind(null,_,E,C,u),void 0,null),Kr===null)throw Error(a(349));(30&ue)!=0||Ft(_,u,C)}return C}function Ft(l,u,_){l.flags|=16384,l={getSnapshot:u,value:_},(u=ne.updateQueue)===null?(u={lastEffect:null,stores:null},ne.updateQueue=u,u.stores=[l]):(_=u.stores)===null?u.stores=[l]:_.push(l)}function yr(l,u,_,E){u.value=_,u.getSnapshot=E,rr(u)&&es(l)}function Dn(l,u,_){return _((function(){rr(u)&&es(l)}))}function rr(l){var u=l.getSnapshot;l=l.value;try{var _=u();return!kn(l,_)}catch{return!0}}function es(l){var u=Xi(l,1);u!==null&&Fn(u,l,1,-1)}function ga(l){var u=ot();return typeof l=="function"&&(l=l()),u.memoizedState=u.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:l},u.queue=l,l=l.dispatch=up.bind(null,ne,l),[u.memoizedState,l]}function Tu(l,u,_,E){return l={tag:l,create:u,destroy:_,deps:E,next:null},(u=ne.updateQueue)===null?(u={lastEffect:null,stores:null},ne.updateQueue=u,u.lastEffect=l.next=l):(_=u.lastEffect)===null?u.lastEffect=l.next=l:(E=_.next,_.next=l,l.next=E,u.lastEffect=l),l}function md(){return et().memoizedState}function ya(l,u,_,E){var C=ot();ne.flags|=l,C.memoizedState=Tu(1|u,_,void 0,E===void 0?null:E)}function vc(l,u,_,E){var C=et();E=E===void 0?null:E;var O=void 0;if(re!==null){var $=re.memoizedState;if(O=$.destroy,E!==null&&Je(E,$.deps))return void(C.memoizedState=Tu(u,_,O,E))}ne.flags|=l,C.memoizedState=Tu(1|u,_,O,E)}function fh(l,u){return ya(8390656,8,l,u)}function _c(l,u){return vc(2048,8,l,u)}function xr(l,u){return vc(4,2,l,u)}function xc(l,u){return vc(4,4,l,u)}function Au(l,u){return typeof u=="function"?(l=l(),u(l),function(){u(null)}):u!=null?(l=l(),u.current=l,function(){u.current=null}):void 0}function Nl(l,u,_){return _=_!=null?_.concat([l]):null,vc(4,4,Au.bind(null,u,l),_)}function wc(){}function bc(l,u){var _=et();u=u===void 0?null:u;var E=_.memoizedState;return E!==null&&u!==null&&Je(u,E[1])?E[0]:(_.memoizedState=[l,u],l)}function Fl(l,u){var _=et();u=u===void 0?null:u;var E=_.memoizedState;return E!==null&&u!==null&&Je(u,E[1])?E[0]:(l=l(),_.memoizedState=[l,u],l)}function Cu(l,u,_){return(21&ue)==0?(l.baseState&&(l.baseState=!1,Ur=!0),l.memoizedState=_):(kn(_,u)||(_=Il(),ne.lanes|=_,Sa|=_,l.baseState=!0),u)}function Bl(l,u){var _=Ut;Ut=_!==0&&4>_?_:4,l(!0);var E=se.transition;se.transition={};try{l(!1),u()}finally{Ut=_,se.transition=E}}function ph(){return et().memoizedState}function lp(l,u,_){var E=ds(l);_={lane:E,action:_,hasEagerState:!1,eagerState:null,next:null},mh(l)?Iu(u,_):(_=Ml(l,u,_,E))!==null&&(Fn(_,l,E,cn()),Pu(_,u,E))}function up(l,u,_){var E=ds(l),C={lane:E,action:_,hasEagerState:!1,eagerState:null,next:null};if(mh(l))Iu(u,C);else{var O=l.alternate;if(l.lanes===0&&(O===null||O.lanes===0)&&(O=u.lastRenderedReducer)!==null)try{var $=u.lastRenderedState,ce=O($,_);if(C.hasEagerState=!0,C.eagerState=ce,kn(ce,$)){var Te=u.interleaved;return Te===null?(C.next=C,Qa(u)):(C.next=Te.next,Te.next=C),void(u.interleaved=C)}}catch{}(_=Ml(l,u,C,E))!==null&&(Fn(_,l,E,C=cn()),Pu(_,u,E))}}function mh(l){var u=l.alternate;return l===ne||u!==null&&u===ne}function Iu(l,u){Ee=xe=!0;var _=l.pending;_===null?u.next=u:(u.next=_.next,_.next=u),l.pending=u}function Pu(l,u,_){if((4194240&_)!=0){var E=u.lanes;_|=E&=l.pendingLanes,u.lanes=_,on(l,_)}}var Ul={readContext:Sn,useCallback:Ne,useContext:Ne,useEffect:Ne,useImperativeHandle:Ne,useInsertionEffect:Ne,useLayoutEffect:Ne,useMemo:Ne,useReducer:Ne,useRef:Ne,useState:Ne,useDebugValue:Ne,useDeferredValue:Ne,useTransition:Ne,useMutableSource:Ne,useSyncExternalStore:Ne,useId:Ne,unstable_isNewReconciler:!1},gh={readContext:Sn,useCallback:function(l,u){return ot().memoizedState=[l,u===void 0?null:u],l},useContext:Sn,useEffect:fh,useImperativeHandle:function(l,u,_){return _=_!=null?_.concat([l]):null,ya(4194308,4,Au.bind(null,u,l),_)},useLayoutEffect:function(l,u){return ya(4194308,4,l,u)},useInsertionEffect:function(l,u){return ya(4,2,l,u)},useMemo:function(l,u){var _=ot();return u=u===void 0?null:u,l=l(),_.memoizedState=[l,u],l},useReducer:function(l,u,_){var E=ot();return u=_!==void 0?_(u):u,E.memoizedState=E.baseState=u,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:u},E.queue=l,l=l.dispatch=lp.bind(null,ne,l),[E.memoizedState,l]},useRef:function(l){return l={current:l},ot().memoizedState=l},useState:ga,useDebugValue:wc,useDeferredValue:function(l){return ot().memoizedState=l},useTransition:function(){var l=ga(!1),u=l[0];return l=Bl.bind(null,l[1]),ot().memoizedState=l,[u,l]},useMutableSource:function(){},useSyncExternalStore:function(l,u,_){var E=ne,C=ot();if(ir){if(_===void 0)throw Error(a(407));_=_()}else{if(_=u(),Kr===null)throw Error(a(349));(30&ue)!=0||Ft(E,u,_)}C.memoizedState=_;var O={value:_,getSnapshot:u};return C.queue=O,fh(Dn.bind(null,E,O,l),[l]),E.flags|=2048,Tu(9,yr.bind(null,E,O,_,u),void 0,null),_},useId:function(){var l=ot(),u=Kr.identifierPrefix;if(ir){var _=ui;u=":"+u+"R"+(_=(li&~(1<<32-sn(li)-1)).toString(32)+_),0<(_=ge++)&&(u+="H"+_.toString(32)),u+=":"}else u=":"+u+"r"+(_=De++).toString(32)+":";return l.memoizedState=u},unstable_isNewReconciler:!1},yh={readContext:Sn,useCallback:bc,useContext:Sn,useEffect:_c,useImperativeHandle:Nl,useInsertionEffect:xr,useLayoutEffect:xc,useMemo:Fl,useReducer:ct,useRef:md,useState:function(){return ct(qe)},useDebugValue:wc,useDeferredValue:function(l){return Cu(et(),re.memoizedState,l)},useTransition:function(){return[ct(qe)[0],et().memoizedState]},useMutableSource:Yt,useSyncExternalStore:Ct,useId:ph,unstable_isNewReconciler:!1},vh={readContext:Sn,useCallback:bc,useContext:Sn,useEffect:_c,useImperativeHandle:Nl,useInsertionEffect:xr,useLayoutEffect:xc,useMemo:Fl,useReducer:Vt,useRef:md,useState:function(){return Vt(qe)},useDebugValue:wc,useDeferredValue:function(l){var u=et();return re===null?u.memoizedState=l:Cu(u,re.memoizedState,l)},useTransition:function(){return[Vt(qe)[0],et().memoizedState]},useMutableSource:Yt,useSyncExternalStore:Ct,useId:ph,unstable_isNewReconciler:!1};function jl(l,u){try{var _="",E=u;do _+=yc(E),E=E.return;while(E);var C=_}catch(O){C=`
Error generating stack: `+O.message+`
`+O.stack}return{value:l,source:u,stack:C,digest:null}}function Sc(l,u,_){return{value:l,source:null,stack:_??null,digest:u??null}}function _h(l,u){try{console.error(u.value)}catch(_){setTimeout((function(){throw _}))}}var cp=typeof WeakMap=="function"?WeakMap:Map;function Ec(l,u,_){(_=Ki(-1,_)).tag=3,_.payload={element:null};var E=u.value;return _.callback=function(){br||(br=!0,Yl=E),_h(0,u)},_}function To(l,u,_){(_=Ki(-1,_)).tag=3;var E=l.type.getDerivedStateFromError;if(typeof E=="function"){var C=u.value;_.payload=function(){return E(C)},_.callback=function(){_h(0,u)}}var O=l.stateNode;return O!==null&&typeof O.componentDidCatch=="function"&&(_.callback=function(){_h(0,u),typeof E!="function"&&(to===null?to=new Set([this]):to.add(this));var $=u.stack;this.componentDidCatch(u.value,{componentStack:$!==null?$:""})}),_}function xh(l,u,_){var E=l.pingCache;if(E===null){E=l.pingCache=new cp;var C=new Set;E.set(u,C)}else(C=E.get(u))===void 0&&(C=new Set,E.set(u,C));C.has(_)||(C.add(_),l=Oc.bind(null,l,u,_),u.then(l,l))}function el(l){do{var u;if((u=l.tag===13)&&(u=(u=l.memoizedState)===null||u.dehydrated!==null),u)return l;l=l.return}while(l!==null);return null}function Is(l,u,_,E,C){return(1&l.mode)==0?(l===u?l.flags|=65536:(l.flags|=128,_.flags|=131072,_.flags&=-52805,_.tag===1&&(_.alternate===null?_.tag=17:((u=Ki(-1,1)).tag=2,Yi(_,u,1))),_.lanes|=1),l):(l.flags|=65536,l.lanes=C,l)}var Ru=c.ReactCurrentOwner,Ur=!1;function Ln(l,u,_,E){u.child=l===null?Eo(u,null,_,E):ci(u,l.child,_,E)}function gd(l,u,_,E,C){_=_.render;var O=u.ref;return Ys(u,C),E=rt(l,u,_,E,O,C),_=He(),l===null||Ur?(ir&&_&&qs(u),u.flags|=1,Ln(l,u,E,C),u.child):(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~C,ns(l,u,C))}function yd(l,u,_,E,C){if(l===null){var O=_.type;return typeof O!="function"||Hu(O)||O.defaultProps!==void 0||_.compare!==null||_.defaultProps!==void 0?((l=Vu(_.type,null,E,u,u.mode,C)).ref=u.ref,l.return=u,u.child=l):(u.tag=15,u.type=O,va(l,u,O,E,C))}if(O=l.child,(l.lanes&C)==0){var $=O.memoizedProps;if((_=(_=_.compare)!==null?_:Ka)($,E)&&l.ref===u.ref)return ns(l,u,C)}return u.flags|=1,(l=Do(O,E)).ref=u.ref,l.return=u,u.child=l}function va(l,u,_,E,C){if(l!==null){var O=l.memoizedProps;if(Ka(O,E)&&l.ref===u.ref){if(Ur=!1,u.pendingProps=E=O,(l.lanes&C)==0)return u.lanes=l.lanes,ns(l,u,C);(131072&l.flags)!=0&&(Ur=!0)}}return zl(l,u,_,E,C)}function Gl(l,u,_){var E=u.pendingProps,C=E.children,O=l!==null?l.memoizedState:null;if(E.mode==="hidden")if((1&u.mode)==0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},fr(Ro,Yr),Yr|=_;else{if((1073741824&_)==0)return l=O!==null?O.baseLanes|_:_,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:l,cachePool:null,transitions:null},u.updateQueue=null,fr(Ro,Yr),Yr|=l,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},E=O!==null?O.baseLanes:_,fr(Ro,Yr),Yr|=E}else O!==null?(E=O.baseLanes|_,u.memoizedState=null):E=_,fr(Ro,Yr),Yr|=E;return Ln(l,u,C,_),u.child}function tl(l,u){var _=u.ref;(l===null&&_!==null||l!==null&&l.ref!==_)&&(u.flags|=512,u.flags|=2097152)}function zl(l,u,_,E,C){var O=nn(_)?Gi:rn.current;return O=qn(u,O),Ys(u,C),_=rt(l,u,_,E,O,C),E=He(),l===null||Ur?(ir&&E&&qs(u),u.flags|=1,Ln(l,u,_,C),u.child):(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~C,ns(l,u,C))}function Tc(l,u,_,E,C){if(nn(_)){var O=!0;zs(u)}else O=!1;if(Ys(u,C),u.stateNode===null)rs(l,u),Zi(u,_,E),ma(u,_,E,C),E=!0;else if(l===null){var $=u.stateNode,ce=u.memoizedProps;$.props=ce;var Te=$.context,Le=_.contextType;typeof Le=="object"&&Le!==null?Le=Sn(Le):Le=qn(u,Le=nn(_)?Gi:rn.current);var Ue=_.getDerivedStateFromProps,lt=typeof Ue=="function"||typeof $.getSnapshotBeforeUpdate=="function";lt||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(ce!==E||Te!==Le)&&Rr(u,$,E,Le),As=!1;var Be=u.memoizedState;$.state=Be,pa(u,E,$,C),Te=u.memoizedState,ce!==E||Be!==Te||bn.current||As?(typeof Ue=="function"&&(Ll(u,_,Ue,E),Te=u.memoizedState),(ce=As||Qi(u,_,ce,E,Be,Te,Le))?(lt||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(u.flags|=4194308)):(typeof $.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=E,u.memoizedState=Te),$.props=E,$.state=Te,$.context=Le,E=ce):(typeof $.componentDidMount=="function"&&(u.flags|=4194308),E=!1)}else{$=u.stateNode,Su(l,u),ce=u.memoizedProps,Le=u.type===u.elementType?ce:On(u.type,ce),$.props=Le,lt=u.pendingProps,Be=$.context,typeof(Te=_.contextType)=="object"&&Te!==null?Te=Sn(Te):Te=qn(u,Te=nn(_)?Gi:rn.current);var Ze=_.getDerivedStateFromProps;(Ue=typeof Ze=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(ce!==lt||Be!==Te)&&Rr(u,$,E,Te),As=!1,Be=u.memoizedState,$.state=Be,pa(u,E,$,C);var xt=u.memoizedState;ce!==lt||Be!==xt||bn.current||As?(typeof Ze=="function"&&(Ll(u,_,Ze,E),xt=u.memoizedState),(Le=As||Qi(u,_,Le,E,Be,xt,Te)||!1)?(Ue||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(E,xt,Te),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(E,xt,Te)),typeof $.componentDidUpdate=="function"&&(u.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof $.componentDidUpdate!="function"||ce===l.memoizedProps&&Be===l.memoizedState||(u.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||ce===l.memoizedProps&&Be===l.memoizedState||(u.flags|=1024),u.memoizedProps=E,u.memoizedState=xt),$.props=E,$.state=xt,$.context=Te,E=Le):(typeof $.componentDidUpdate!="function"||ce===l.memoizedProps&&Be===l.memoizedState||(u.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||ce===l.memoizedProps&&Be===l.memoizedState||(u.flags|=1024),E=!1)}return _a(l,u,_,E,O,C)}function _a(l,u,_,E,C,O){tl(l,u);var $=(128&u.flags)!=0;if(!E&&!$)return C&&Hs(u,_,!1),ns(l,u,O);E=u.stateNode,Ru.current=u;var ce=$&&typeof _.getDerivedStateFromError!="function"?null:E.render();return u.flags|=1,l!==null&&$?(u.child=ci(u,l.child,null,O),u.child=ci(u,null,ce,O)):Ln(l,u,ce,O),u.memoizedState=E.state,C&&Hs(u,_,!0),u.child}function Ao(l){var u=l.stateNode;u.pendingContext?Jo(0,u.pendingContext,u.pendingContext!==u.context):u.context&&Jo(0,u.context,!1),A(l,u.containerInfo)}function wr(l,u,_,E,C){return qi(),ca(C),u.flags|=256,Ln(l,u,_,E),u.child}var cr,ts,un,En,Co={dehydrated:null,treeContext:null,retryLane:0};function xa(l){return{baseLanes:l,cachePool:null,transitions:null}}function Xn(l,u,_){var E,C=u.pendingProps,O=j.current,$=!1,ce=(128&u.flags)!=0;if((E=ce)||(E=(l===null||l.memoizedState!==null)&&(2&O)!=0),E?($=!0,u.flags&=-129):l!==null&&l.memoizedState===null||(O|=1),fr(j,1&O),l===null)return Xs(u),(l=u.memoizedState)!==null&&(l=l.dehydrated)!==null?((1&u.mode)==0?u.lanes=1:ri(l)?u.lanes=8:u.lanes=1073741824,null):(ce=C.children,l=C.fallback,$?(C=u.mode,$=u.child,ce={mode:"hidden",children:ce},(1&C)==0&&$!==null?($.childLanes=0,$.pendingProps=ce):$=Dc(ce,C,0,null),l=Ta(l,C,_,null),$.return=u,l.return=u,$.sibling=l,u.child=$,u.child.memoizedState=xa(_),u.memoizedState=Co,l):Hl(u,ce));if((O=l.memoizedState)!==null&&(E=O.dehydrated)!==null)return(function(Le,Ue,lt,Be,Ze,xt,Ht){if(lt)return 256&Ue.flags?(Ue.flags&=-257,ku(Le,Ue,Ht,Be=Sc(Error(a(422))))):Ue.memoizedState!==null?(Ue.child=Le.child,Ue.flags|=128,null):(xt=Be.fallback,Ze=Ue.mode,Be=Dc({mode:"visible",children:Be.children},Ze,0,null),(xt=Ta(xt,Ze,Ht,null)).flags|=2,Be.return=Ue,xt.return=Ue,Be.sibling=xt,Ue.child=Be,(1&Ue.mode)!=0&&ci(Ue,Le.child,null,Ht),Ue.child.memoizedState=xa(Ht),Ue.memoizedState=Co,xt);if((1&Ue.mode)==0)return ku(Le,Ue,Ht,null);if(ri(Ze))return Be=Si(Ze).digest,xt=Error(a(419)),Be=Sc(xt,Be,void 0),ku(Le,Ue,Ht,Be);if(lt=(Ht&Le.childLanes)!=0,Ur||lt){if((Be=Kr)!==null){switch(Ht&-Ht){case 4:Ze=2;break;case 16:Ze=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Ze=32;break;case 536870912:Ze=268435456;break;default:Ze=0}(Ze=(Ze&(Be.suspendedLanes|Ht))!=0?0:Ze)!==0&&Ze!==xt.retryLane&&(xt.retryLane=Ze,Xi(Le,Ze),Fn(Be,Le,Ze,-1))}return Mc(),ku(Le,Ue,Ht,Be=Sc(Error(a(421))))}return Sr(Ze)?(Ue.flags|=128,Ue.child=Le.child,Ue=kh.bind(null,Le),Ei(Ze,Ue),null):(Le=xt.treeContext,yt&&(Fr=bs(Ze),ur=Ue,ir=!0,Ai=null,$i=!1,Le!==null&&(ln[vn++]=li,ln[vn++]=ui,ln[vn++]=_n,li=Le.id,ui=Le.overflow,_n=Ue)),Ue=Hl(Ue,Be.children),Ue.flags|=4096,Ue)})(l,u,ce,C,E,O,_);if($){$=C.fallback,ce=u.mode,E=(O=l.child).sibling;var Te={mode:"hidden",children:C.children};return(1&ce)==0&&u.child!==O?((C=u.child).childLanes=0,C.pendingProps=Te,u.deletions=null):(C=Do(O,Te)).subtreeFlags=14680064&O.subtreeFlags,E!==null?$=Do(E,$):($=Ta($,ce,_,null)).flags|=2,$.return=u,C.return=u,C.sibling=$,u.child=C,C=$,$=u.child,ce=(ce=l.child.memoizedState)===null?xa(_):{baseLanes:ce.baseLanes|_,cachePool:null,transitions:ce.transitions},$.memoizedState=ce,$.childLanes=l.childLanes&~_,u.memoizedState=Co,C}return l=($=l.child).sibling,C=Do($,{mode:"visible",children:C.children}),(1&u.mode)==0&&(C.lanes=_),C.return=u,C.sibling=null,l!==null&&((_=u.deletions)===null?(u.deletions=[l],u.flags|=16):_.push(l)),u.child=C,u.memoizedState=null,C}function Hl(l,u){return(u=Dc({mode:"visible",children:u},l.mode,0,null)).return=l,l.child=u}function ku(l,u,_,E){return E!==null&&ca(E),ci(u,l.child,null,_),(l=Hl(u,u.pendingProps.children)).flags|=2,u.memoizedState=null,l}function wh(l,u,_){l.lanes|=u;var E=l.alternate;E!==null&&(E.lanes|=u),wu(l.return,u,_)}function Vl(l,u,_,E,C){var O=l.memoizedState;O===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:E,tail:_,tailMode:C}:(O.isBackwards=u,O.rendering=null,O.renderingStartTime=0,O.last=E,O.tail=_,O.tailMode=C)}function bh(l,u,_){var E=u.pendingProps,C=E.revealOrder,O=E.tail;if(Ln(l,u,E.children,_),(2&(E=j.current))!=0)E=1&E|2,u.flags|=128;else{if(l!==null&&(128&l.flags)!=0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&wh(l,_,u);else if(l.tag===19)wh(l,_,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}E&=1}if(fr(j,E),(1&u.mode)==0)u.memoizedState=null;else switch(C){case"forwards":for(_=u.child,C=null;_!==null;)(l=_.alternate)!==null&&q(l)===null&&(C=_),_=_.sibling;(_=C)===null?(C=u.child,u.child=null):(C=_.sibling,_.sibling=null),Vl(u,!1,C,_,O);break;case"backwards":for(_=null,C=u.child,u.child=null;C!==null;){if((l=C.alternate)!==null&&q(l)===null){u.child=C;break}l=C.sibling,C.sibling=_,_=C,C=l}Vl(u,!0,_,null,O);break;case"together":Vl(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function rs(l,u){(1&u.mode)==0&&l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2)}function ns(l,u,_){if(l!==null&&(u.dependencies=l.dependencies),Sa|=u.lanes,(_&u.childLanes)==0)return null;if(l!==null&&u.child!==l.child)throw Error(a(153));if(u.child!==null){for(_=Do(l=u.child,l.pendingProps),u.child=_,_.return=u;l.sibling!==null;)l=l.sibling,(_=_.sibling=Do(l,l.pendingProps)).return=u;_.sibling=null}return u.child}function is(l){l.flags|=4}function Sh(l,u){if(l!==null&&l.child===u.child)return!0;if((16&u.flags)!=0)return!1;for(l=u.child;l!==null;){if((12854&l.flags)!=0||(12854&l.subtreeFlags)!=0)return!1;l=l.sibling}return!0}if(at)cr=function(l,u){for(var _=u.child;_!==null;){if(_.tag===5||_.tag===6)K(l,_.stateNode);else if(_.tag!==4&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===u)break;for(;_.sibling===null;){if(_.return===null||_.return===u)return;_=_.return}_.sibling.return=_.return,_=_.sibling}},ts=function(){},un=function(l,u,_,E,C){if((l=l.memoizedProps)!==E){var O=u.stateNode,$=x(Br.current);_=Ae(O,_,l,E,C,$),(u.updateQueue=_)&&is(u)}},En=function(l,u,_,E){_!==E&&is(u)};else if(Qe){cr=function(l,u,_,E){for(var C=u.child;C!==null;){if(C.tag===5){var O=C.stateNode;_&&E&&(O=Mr(O,C.type,C.memoizedProps,C)),K(l,O)}else if(C.tag===6)O=C.stateNode,_&&E&&(O=bi(O,C.memoizedProps,C)),K(l,O);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)(O=C.child)!==null&&(O.return=C),cr(l,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===u)break;for(;C.sibling===null;){if(C.return===null||C.return===u)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};var vd=function(l,u,_,E){for(var C=u.child;C!==null;){if(C.tag===5){var O=C.stateNode;_&&E&&(O=Mr(O,C.type,C.memoizedProps,C)),Rn(l,O)}else if(C.tag===6)O=C.stateNode,_&&E&&(O=bi(O,C.memoizedProps,C)),Rn(l,O);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)(O=C.child)!==null&&(O.return=C),vd(l,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===u)break;for(;C.sibling===null;){if(C.return===null||C.return===u)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};ts=function(l,u){var _=u.stateNode;if(!Sh(l,u)){l=_.containerInfo;var E=$r(l);vd(E,u,!1,!1),_.pendingChildren=E,is(u),Yo(l,E)}},un=function(l,u,_,E,C){var O=l.stateNode,$=l.memoizedProps;if((l=Sh(l,u))&&$===E)u.stateNode=O;else{var ce=u.stateNode,Te=x(Br.current),Le=null;$!==E&&(Le=Ae(ce,_,$,E,C,Te)),l&&Le===null?u.stateNode=O:(O=ti(O,Le,_,$,E,u,l,ce),he(O,_,E,C,Te)&&is(u),u.stateNode=O,l?is(u):cr(O,u,!1,!1))}},En=function(l,u,_,E){_!==E?(l=x(p.current),_=x(Br.current),u.stateNode=Fe(E,l,_,u),is(u)):u.stateNode=l.stateNode}}else ts=function(){},un=function(){},En=function(){};function ss(l,u){if(!ir)switch(l.tailMode){case"hidden":u=l.tail;for(var _=null;u!==null;)u.alternate!==null&&(_=u),u=u.sibling;_===null?l.tail=null:_.sibling=null;break;case"collapsed":_=l.tail;for(var E=null;_!==null;)_.alternate!==null&&(E=_),_=_.sibling;E===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:E.sibling=null}}function Xr(l){var u=l.alternate!==null&&l.alternate.child===l.child,_=0,E=0;if(u)for(var C=l.child;C!==null;)_|=C.lanes|C.childLanes,E|=14680064&C.subtreeFlags,E|=14680064&C.flags,C.return=l,C=C.sibling;else for(C=l.child;C!==null;)_|=C.lanes|C.childLanes,E|=C.subtreeFlags,E|=C.flags,C.return=l,C=C.sibling;return l.subtreeFlags|=E,l.childLanes=_,u}function Wl(l,u,_){var E=u.pendingProps;switch(qa(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xr(u),null;case 1:case 17:return nn(u.type)&&Gs(),Xr(u),null;case 3:return _=u.stateNode,P(),Wt(bn),Wt(rn),me(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),l!==null&&l.child!==null||(zr(u)?is(u):l===null||l.memoizedState.isDehydrated&&(256&u.flags)==0||(u.flags|=1024,Ai!==null&&(Gu(Ai),Ai=null))),ts(l,u),Xr(u),null;case 5:F(u),_=x(p.current);var C=u.type;if(l!==null&&u.stateNode!=null)un(l,u,C,E,_),l.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!E){if(u.stateNode===null)throw Error(a(166));return Xr(u),null}if(l=x(Br.current),zr(u)){if(!yt)throw Error(a(175));l=qr(u.stateNode,u.type,u.memoizedProps,_,l,u,!$i),u.updateQueue=l,l!==null&&is(u)}else{var O=U(C,E,_,l,u);cr(O,u,!1,!1),u.stateNode=O,he(O,C,E,_,l)&&is(u)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return Xr(u),null;case 6:if(l&&u.stateNode!=null)En(l,u,l.memoizedProps,E);else{if(typeof E!="string"&&u.stateNode===null)throw Error(a(166));if(l=x(p.current),_=x(Br.current),zr(u)){if(!yt)throw Error(a(176));if(l=u.stateNode,_=u.memoizedProps,(E=js(l,_,u,!$i))&&(C=ur)!==null)switch(C.tag){case 3:yo(C.stateNode.containerInfo,l,_,(1&C.mode)!=0);break;case 5:nr(C.type,C.memoizedProps,C.stateNode,l,_,(1&C.mode)!=0)}E&&is(u)}else u.stateNode=Fe(E,l,_,u)}return Xr(u),null;case 13:if(Wt(j),E=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(ir&&Fr!==null&&(1&u.mode)!=0&&(128&u.flags)==0)ua(),qi(),u.flags|=98560,C=!1;else if(C=zr(u),E!==null&&E.dehydrated!==null){if(l===null){if(!C)throw Error(a(318));if(!yt)throw Error(a(344));if(!(C=(C=u.memoizedState)!==null?C.dehydrated:null))throw Error(a(317));Cl(C,u)}else qi(),(128&u.flags)==0&&(u.memoizedState=null),u.flags|=4;Xr(u),C=!1}else Ai!==null&&(Gu(Ai),Ai=null),C=!0;if(!C)return 65536&u.flags?u:null}return(128&u.flags)!=0?(u.lanes=_,u):((_=E!==null)!=(l!==null&&l.memoizedState!==null)&&_&&(u.child.flags|=8192,(1&u.mode)!=0&&(l===null||(1&j.current)!=0?Qr===0&&(Qr=3):Mc())),u.updateQueue!==null&&(u.flags|=4),Xr(u),null);case 4:return P(),ts(l,u),l===null&&ft(u.stateNode.containerInfo),Xr(u),null;case 10:return fa(u.type._context),Xr(u),null;case 19:if(Wt(j),(C=u.memoizedState)===null)return Xr(u),null;if(E=(128&u.flags)!=0,(O=C.rendering)===null)if(E)ss(C,!1);else{if(Qr!==0||l!==null&&(128&l.flags)!=0)for(l=u.child;l!==null;){if((O=q(l))!==null){for(u.flags|=128,ss(C,!1),(l=O.updateQueue)!==null&&(u.updateQueue=l,u.flags|=4),u.subtreeFlags=0,l=_,_=u.child;_!==null;)C=l,(E=_).flags&=14680066,(O=E.alternate)===null?(E.childLanes=0,E.lanes=C,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=O.childLanes,E.lanes=O.lanes,E.child=O.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=O.memoizedProps,E.memoizedState=O.memoizedState,E.updateQueue=O.updateQueue,E.type=O.type,C=O.dependencies,E.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext}),_=_.sibling;return fr(j,1&j.current|2),u.child}l=l.sibling}C.tail!==null&&Kt()>Uu&&(u.flags|=128,E=!0,ss(C,!1),u.lanes=4194304)}else{if(!E)if((l=q(O))!==null){if(u.flags|=128,E=!0,(l=l.updateQueue)!==null&&(u.updateQueue=l,u.flags|=4),ss(C,!0),C.tail===null&&C.tailMode==="hidden"&&!O.alternate&&!ir)return Xr(u),null}else 2*Kt()-C.renderingStartTime>Uu&&_!==1073741824&&(u.flags|=128,E=!0,ss(C,!1),u.lanes=4194304);C.isBackwards?(O.sibling=u.child,u.child=O):((l=C.last)!==null?l.sibling=O:u.child=O,C.last=O)}return C.tail!==null?(u=C.tail,C.rendering=u,C.tail=u.sibling,C.renderingStartTime=Kt(),u.sibling=null,l=j.current,fr(j,E?1&l|2:1&l),u):(Xr(u),null);case 22:case 23:return cl(),_=u.memoizedState!==null,l!==null&&l.memoizedState!==null!==_&&(u.flags|=8192),_&&(1&u.mode)!=0?(1073741824&Yr)!=0&&(Xr(u),at&&6&u.subtreeFlags&&(u.flags|=8192)):Xr(u),null;case 24:case 25:return null}throw Error(a(156,u.tag))}function Ac(l,u){switch(qa(u),u.tag){case 1:return nn(u.type)&&Gs(),65536&(l=u.flags)?(u.flags=-65537&l|128,u):null;case 3:return P(),Wt(bn),Wt(rn),me(),(65536&(l=u.flags))!=0&&(128&l)==0?(u.flags=-65537&l|128,u):null;case 5:return F(u),null;case 13:if(Wt(j),(l=u.memoizedState)!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(a(340));qi()}return 65536&(l=u.flags)?(u.flags=-65537&l|128,u):null;case 19:return Wt(j),null;case 4:return P(),null;case 10:return fa(u.type._context),null;case 22:case 23:return cl(),null;default:return null}}var rl=!1,vr=!1,os=typeof WeakSet=="function"?WeakSet:Set,dt=null;function hi(l,u){var _=l.ref;if(_!==null)if(typeof _=="function")try{_(null)}catch(E){_r(l,u,E)}else _.current=null}function eo(l,u,_){try{_()}catch(E){_r(l,u,E)}}var wa=!1;function $l(l,u,_){var E=u.updateQueue;if((E=E!==null?E.lastEffect:null)!==null){var C=E=E.next;do{if((C.tag&l)===l){var O=C.destroy;C.destroy=void 0,O!==void 0&&eo(u,_,O)}C=C.next}while(C!==E)}}function ql(l,u){if((u=(u=u.updateQueue)!==null?u.lastEffect:null)!==null){var _=u=u.next;do{if((_.tag&l)===l){var E=_.create;_.destroy=E()}_=_.next}while(_!==u)}}function Mu(l){var u=l.ref;if(u!==null){var _=l.stateNode;l.tag===5?l=H(_):l=_,typeof u=="function"?u(l):u.current=l}}function di(l){var u=l.alternate;u!==null&&(l.alternate=null,di(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode)!==null&&gr(u),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function fi(l){return l.tag===5||l.tag===3||l.tag===4}function Er(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||fi(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(2&l.flags||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(2&l.flags))return l.stateNode}}function Pi(l,u,_){var E=l.tag;if(E===5||E===6)l=l.stateNode,u?Us(_,l,u):ei(_,l);else if(E!==4&&(l=l.child)!==null)for(Pi(l,u,_),l=l.sibling;l!==null;)Pi(l,u,_),l=l.sibling}function Cc(l,u,_){var E=l.tag;if(E===5||E===6)l=l.stateNode,u?mo(_,l,u):Bs(_,l);else if(E!==4&&(l=l.child)!==null)for(Cc(l,u,_),l=l.sibling;l!==null;)Cc(l,u,_),l=l.sibling}var Nn=null,as=!1;function ls(l,u,_){for(_=_.child;_!==null;)Ic(l,u,_),_=_.sibling}function Ic(l,u,_){if(Pr&&typeof Pr.onCommitFiberUnmount=="function")try{Pr.onCommitFiberUnmount($a,_)}catch{}switch(_.tag){case 5:vr||hi(_,u);case 6:if(at){var E=Nn,C=as;Nn=null,ls(l,u,_),as=C,(Nn=E)!==null&&(as?ie(Nn,_.stateNode):Vn(Nn,_.stateNode))}else ls(l,u,_);break;case 18:at&&Nn!==null&&(as?go(Nn,_.stateNode):Ha(Nn,_.stateNode));break;case 4:at?(E=Nn,C=as,Nn=_.stateNode.containerInfo,as=!0,ls(l,u,_),Nn=E,as=C):(Qe&&(E=_.stateNode.containerInfo,C=$r(E),wi(E,C)),ls(l,u,_));break;case 0:case 11:case 14:case 15:if(!vr&&(E=_.updateQueue)!==null&&(E=E.lastEffect)!==null){C=E=E.next;do{var O=C,$=O.destroy;O=O.tag,$!==void 0&&((2&O)!=0||(4&O)!=0)&&eo(_,u,$),C=C.next}while(C!==E)}ls(l,u,_);break;case 1:if(!vr&&(hi(_,u),typeof(E=_.stateNode).componentWillUnmount=="function"))try{E.props=_.memoizedProps,E.state=_.memoizedState,E.componentWillUnmount()}catch(ce){_r(_,u,ce)}ls(l,u,_);break;case 21:ls(l,u,_);break;case 22:1&_.mode?(vr=(E=vr)||_.memoizedState!==null,ls(l,u,_),vr=E):ls(l,u,_);break;default:ls(l,u,_)}}function Ou(l){var u=l.updateQueue;if(u!==null){l.updateQueue=null;var _=l.stateNode;_===null&&(_=l.stateNode=new os),u.forEach((function(E){var C=wd.bind(null,l,E);_.has(E)||(_.add(E),E.then(C,C))}))}}function us(l,u){var _=u.deletions;if(_!==null)for(var E=0;E<_.length;E++){var C=_[E];try{var O=l,$=u;if(at){var ce=$;e:for(;ce!==null;){switch(ce.tag){case 5:Nn=ce.stateNode,as=!1;break e;case 3:case 4:Nn=ce.stateNode.containerInfo,as=!0;break e}ce=ce.return}if(Nn===null)throw Error(a(160));Ic(O,$,C),Nn=null,as=!1}else Ic(O,$,C);var Te=C.alternate;Te!==null&&(Te.return=null),C.return=null}catch(Le){_r(C,u,Le)}}if(12854&u.subtreeFlags)for(u=u.child;u!==null;)nl(u,l),u=u.sibling}function nl(l,u){var _=l.alternate,E=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(us(u,l),cs(l),4&E){try{$l(3,l,l.return),ql(3,l)}catch(Be){_r(l,l.return,Be)}try{$l(5,l,l.return)}catch(Be){_r(l,l.return,Be)}}break;case 1:us(u,l),cs(l),512&E&&_!==null&&hi(_,_.return);break;case 5:if(us(u,l),cs(l),512&E&&_!==null&&hi(_,_.return),at){if(32&l.flags){var C=l.stateNode;try{Ie(C)}catch(Be){_r(l,l.return,Be)}}if(4&E&&(C=l.stateNode)!=null){var O=l.memoizedProps;if(_=_!==null?_.memoizedProps:O,E=l.type,u=l.updateQueue,l.updateQueue=null,u!==null)try{xs(C,u,E,_,O,l)}catch(Be){_r(l,l.return,Be)}}}break;case 6:if(us(u,l),cs(l),4&E&&at){if(l.stateNode===null)throw Error(a(162));C=l.stateNode,O=l.memoizedProps,_=_!==null?_.memoizedProps:O;try{_i(C,_,O)}catch(Be){_r(l,l.return,Be)}}break;case 3:if(us(u,l),cs(l),4&E){if(at&&yt&&_!==null&&_.memoizedState.isDehydrated)try{Ui(u.containerInfo)}catch(Be){_r(l,l.return,Be)}if(Qe){C=u.containerInfo,O=u.pendingChildren;try{wi(C,O)}catch(Be){_r(l,l.return,Be)}}}break;case 4:if(us(u,l),cs(l),4&E&&Qe){C=(O=l.stateNode).containerInfo,O=O.pendingChildren;try{wi(C,O)}catch(Be){_r(l,l.return,Be)}}break;case 13:us(u,l),cs(l),8192&(C=l.child).flags&&(O=C.memoizedState!==null,C.stateNode.isHidden=O,!O||C.alternate!==null&&C.alternate.memoizedState!==null||(Mo=Kt())),4&E&&Ou(l);break;case 22:var $=_!==null&&_.memoizedState!==null;if(1&l.mode?(vr=(_=vr)||$,us(u,l),vr=_):us(u,l),cs(l),8192&E){if(_=l.memoizedState!==null,(l.stateNode.isHidden=_)&&!$&&(1&l.mode)!=0)for(dt=l,E=l.child;E!==null;){for(u=dt=E;dt!==null;){var ce=($=dt).child;switch($.tag){case 0:case 11:case 14:case 15:$l(4,$,$.return);break;case 1:hi($,$.return);var Te=$.stateNode;if(typeof Te.componentWillUnmount=="function"){var Le=$,Ue=$.return;try{var lt=Le;Te.props=lt.memoizedProps,Te.state=lt.memoizedState,Te.componentWillUnmount()}catch(Be){_r(Le,Ue,Be)}}break;case 5:hi($,$.return);break;case 22:if($.memoizedState!==null){Eh(u);continue}}ce!==null?(ce.return=$,dt=ce):Eh(u)}E=E.sibling}if(at){e:if(E=null,at)for(u=l;;){if(u.tag===5){if(E===null){E=u;try{C=u.stateNode,_?Nt(C):ze(u.stateNode,u.memoizedProps)}catch(Be){_r(l,l.return,Be)}}}else if(u.tag===6){if(E===null)try{O=u.stateNode,_?Zt(O):kt(O,u.memoizedProps)}catch(Be){_r(l,l.return,Be)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;E===u&&(E=null),u=u.return}E===u&&(E=null),u.sibling.return=u.return,u=u.sibling}}}break;case 19:us(u,l),cs(l),4&E&&Ou(l);break;case 21:break;default:us(u,l),cs(l)}}function cs(l){var u=l.flags;if(2&u){try{if(at){e:{for(var _=l.return;_!==null;){if(fi(_)){var E=_;break e}_=_.return}throw Error(a(160))}switch(E.tag){case 5:var C=E.stateNode;32&E.flags&&(Ie(C),E.flags&=-33),Cc(l,Er(l),C);break;case 3:case 4:var O=E.stateNode.containerInfo;Pi(l,Er(l),O);break;default:throw Error(a(161))}}}catch($){_r(l,l.return,$)}l.flags&=-3}4096&u&&(l.flags&=-4097)}function hp(l,u,_){dt=l,Xl(l)}function Xl(l,u,_){for(var E=(1&l.mode)!=0;dt!==null;){var C=dt,O=C.child;if(C.tag===22&&E){var $=C.memoizedState!==null||rl;if(!$){var ce=C.alternate,Te=ce!==null&&ce.memoizedState!==null||vr;ce=rl;var Le=vr;if(rl=$,(vr=Te)&&!Le)for(dt=C;dt!==null;)Te=($=dt).child,$.tag===22&&$.memoizedState!==null?Th(C):Te!==null?(Te.return=$,dt=Te):Th(C);for(;O!==null;)dt=O,Xl(O),O=O.sibling;dt=C,rl=ce,vr=Le}Du(l)}else(8772&C.subtreeFlags)!=0&&O!==null?(O.return=C,dt=O):Du(l)}}function Du(l){for(;dt!==null;){var u=dt;if((8772&u.flags)!=0){var _=u.alternate;try{if((8772&u.flags)!=0)switch(u.tag){case 0:case 11:case 15:vr||ql(5,u);break;case 1:var E=u.stateNode;if(4&u.flags&&!vr)if(_===null)E.componentDidMount();else{var C=u.elementType===u.type?_.memoizedProps:On(u.type,_.memoizedProps);E.componentDidUpdate(C,_.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var O=u.updateQueue;O!==null&&Dl(u,O,E);break;case 3:var $=u.updateQueue;if($!==null){if(_=null,u.child!==null)switch(u.child.tag){case 5:_=H(u.child.stateNode);break;case 1:_=u.child.stateNode}Dl(u,$,_)}break;case 5:var ce=u.stateNode;_===null&&4&u.flags&&xi(ce,u.type,u.memoizedProps,u);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(yt&&u.memoizedState===null){var Te=u.alternate;if(Te!==null){var Le=Te.memoizedState;if(Le!==null){var Ue=Le.dehydrated;Ue!==null&&Wn(Ue)}}}break;default:throw Error(a(163))}vr||512&u.flags&&Mu(u)}catch(lt){_r(u,u.return,lt)}}if(u===l){dt=null;break}if((_=u.sibling)!==null){_.return=u.return,dt=_;break}dt=u.return}}function Eh(l){for(;dt!==null;){var u=dt;if(u===l){dt=null;break}var _=u.sibling;if(_!==null){_.return=u.return,dt=_;break}dt=u.return}}function Th(l){for(;dt!==null;){var u=dt;try{switch(u.tag){case 0:case 11:case 15:var _=u.return;try{ql(4,u)}catch(Te){_r(u,_,Te)}break;case 1:var E=u.stateNode;if(typeof E.componentDidMount=="function"){var C=u.return;try{E.componentDidMount()}catch(Te){_r(u,C,Te)}}var O=u.return;try{Mu(u)}catch(Te){_r(u,O,Te)}break;case 5:var $=u.return;try{Mu(u)}catch(Te){_r(u,$,Te)}}}catch(Te){_r(u,u.return,Te)}if(u===l){dt=null;break}var ce=u.sibling;if(ce!==null){ce.return=u.return,dt=ce;break}dt=u.return}}var Io=0,Lu=1,il=2,sl=3,Po=4;if(typeof Symbol=="function"&&Symbol.for){var ol=Symbol.for;Io=ol("selector.component"),Lu=ol("selector.has_pseudo_class"),il=ol("selector.role"),sl=ol("selector.test_id"),Po=ol("selector.text")}function Nu(l){var u=Bt(l);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(a(364));return u}if((l=dr(l))===null)throw Error(a(362));return l.stateNode.current}function Fu(l,u){switch(u.$$typeof){case Io:if(l.type===u.value)return!0;break;case Lu:e:{u=u.value,l=[l,0];for(var _=0;_<l.length;){var E=l[_++],C=l[_++],O=u[C];if(E.tag!==5||!Pn(E)){for(;O!=null&&Fu(E,O);)O=u[++C];if(C===u.length){u=!0;break e}for(E=E.child;E!==null;)l.push(E,C),E=E.sibling}}u=!1}return u;case il:if(l.tag===5&&Fs(l.stateNode,u.value))return!0;break;case Po:if((l.tag===5||l.tag===6)&&(l=Hn(l))!==null&&0<=l.indexOf(u.value))return!0;break;case sl:if(l.tag===5&&typeof(l=l.memoizedProps["data-testname"])=="string"&&l.toLowerCase()===u.value.toLowerCase())return!0;break;default:throw Error(a(365))}return!1}function Bu(l){switch(l.$$typeof){case Io:return"<"+(fe(l.value)||"Unknown")+">";case Lu:return":has("+(Bu(l)||"")+")";case il:return'[role="'+l.value+'"]';case Po:return'"'+l.value+'"';case sl:return'[data-testname="'+l.value+'"]';default:throw Error(a(365))}}function al(l,u){var _=[];l=[l,0];for(var E=0;E<l.length;){var C=l[E++],O=l[E++],$=u[O];if(C.tag!==5||!Pn(C)){for(;$!=null&&Fu(C,$);)$=u[++O];if(O===u.length)_.push(C);else for(C=C.child;C!==null;)l.push(C,O),C=C.sibling}}return _}function pi(l,u){if(!Nr)throw Error(a(363));l=al(l=Nu(l),u),u=[],l=Array.from(l);for(var _=0;_<l.length;){var E=l[_++];if(E.tag===5)Pn(E)||u.push(E.stateNode);else for(E=E.child;E!==null;)l.push(E),E=E.sibling}return u}var ll=Math.ceil,Kl=c.ReactCurrentDispatcher,Pc=c.ReactCurrentOwner,mr=c.ReactCurrentBatchConfig,jt=0,Kr=null,Hr=null,Tr=0,Yr=0,Ro=oi(0),Qr=0,ba=null,Sa=0,Ea=0,hs=0,ko=null,Tn=null,Mo=0,Uu=1/0,Ri=null;function ul(){Uu=Kt()+500}var Rc,br=!1,Yl=null,to=null,Ql=!1,Ps=null,Zl=0,Rs=0,Ar=null,jr=-1,Vr=0;function cn(){return(6&jt)!=0?Kt():jr!==-1?jr:jr=Kt()}function ds(l){return(1&l.mode)==0?1:(2&jt)!=0&&Tr!==0?Tr&-Tr:Rl.transition!==null?(Vr===0&&(Vr=Il()),Vr):(l=Ut)!==0?l:_t()}function Fn(l,u,_,E){if(50<Rs)throw Rs=0,Ar=null,Error(a(185));na(l,_,E),(2&jt)!=0&&l===Kr||(l===Kr&&((2&jt)==0&&(Ea|=_),Qr===4&&ro(l,Tr)),mi(l,E),_===1&&jt===0&&(1&u.mode)==0&&(ul(),Vi&&Mn()))}function mi(l,u){var _=l.callbackNode;(function(C,O){for(var $=C.suspendedLanes,ce=C.pingedLanes,Te=C.expirationTimes,Le=C.pendingLanes;0<Le;){var Ue=31-sn(Le),lt=1<<Ue,Be=Te[Ue];Be===-1?(lt&$)!=0&&(lt&ce)==0||(Te[Ue]=gc(lt,O)):Be<=O&&(C.expiredLanes|=lt),Le&=~lt}})(l,u);var E=ra(l,l===Kr?Tr:0);if(E===0)_!==null&&zi(_),l.callbackNode=null,l.callbackPriority=0;else if(u=E&-E,l.callbackPriority!==u){if(_!=null&&zi(_),u===1)l.tag===0?(function(C){Vi=!0,Ss(C)})(ks.bind(null,l)):Ss(ks.bind(null,l)),Cr?Fi((function(){(6&jt)==0&&Mn()})):an(xo,Mn),_=null;else{switch(ai(E)){case 1:_=xo;break;case 4:_=sa;break;case 16:default:_=Vs;break;case 536870912:_=Ws}_=Mh(_,An.bind(null,l))}l.callbackPriority=u,l.callbackNode=_}}function An(l,u){if(jr=-1,Vr=0,(6&jt)!=0)throw Error(a(327));var _=l.callbackNode;if(Ms()&&l.callbackNode!==_)return null;var E=ra(l,l===Kr?Tr:0);if(E===0)return null;if((30&E)!=0||(E&l.expiredLanes)!=0||u)u=zu(l,E);else{u=E;var C=jt;jt|=2;var O=Ah();for(Kr===l&&Tr===u||(Ri=null,ul(),Oo(l,u));;)try{xd();break}catch(ce){kc(l,ce)}da(),Kl.current=O,jt=C,Hr!==null?u=0:(Kr=null,Tr=0,u=Qr)}if(u!==0){if(u===2&&(C=qt(l))!==0&&(E=C,u=ju(l,C)),u===1)throw _=ba,Oo(l,0),ro(l,E),mi(l,Kt()),_;if(u===6)ro(l,E);else{if(C=l.current.alternate,(30&E)==0&&!(function(ce){for(var Te=ce;;){if(16384&Te.flags){var Le=Te.updateQueue;if(Le!==null&&(Le=Le.stores)!==null)for(var Ue=0;Ue<Le.length;Ue++){var lt=Le[Ue],Be=lt.getSnapshot;lt=lt.value;try{if(!kn(Be(),lt))return!1}catch{return!1}}}if(Le=Te.child,16384&Te.subtreeFlags&&Le!==null)Le.return=Te,Te=Le;else{if(Te===ce)break;for(;Te.sibling===null;){if(Te.return===null||Te.return===ce)return!0;Te=Te.return}Te.sibling.return=Te.return,Te=Te.sibling}}return!0})(C)&&((u=zu(l,E))===2&&(O=qt(l))!==0&&(E=O,u=ju(l,O)),u===1))throw _=ba,Oo(l,0),ro(l,E),mi(l,Kt()),_;switch(l.finishedWork=C,l.finishedLanes=E,u){case 0:case 1:throw Error(a(345));case 2:case 5:hl(l,Tn,Ri);break;case 3:if(ro(l,E),(130023424&E)===E&&10<(u=Mo+500-Kt())){if(ra(l,0)!==0)break;if(((C=l.suspendedLanes)&E)!==E){cn(),l.pingedLanes|=l.suspendedLanes&C;break}l.timeoutHandle=Ge(hl.bind(null,l,Tn,Ri),u);break}hl(l,Tn,Ri);break;case 4:if(ro(l,E),(4194240&E)===E)break;for(u=l.eventTimes,C=-1;0<E;){var $=31-sn(E);O=1<<$,($=u[$])>C&&(C=$),E&=~O}if(E=C,10<(E=(120>(E=Kt()-E)?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*ll(E/1960))-E)){l.timeoutHandle=Ge(hl.bind(null,l,Tn,Ri),E);break}hl(l,Tn,Ri);break;default:throw Error(a(329))}}}return mi(l,Kt()),l.callbackNode===_?An.bind(null,l):null}function ju(l,u){var _=ko;return l.current.memoizedState.isDehydrated&&(Oo(l,u).flags|=256),(l=zu(l,u))!==2&&(u=Tn,Tn=_,u!==null&&Gu(u)),l}function Gu(l){Tn===null?Tn=l:Tn.push.apply(Tn,l)}function ro(l,u){for(u&=~hs,u&=~Ea,l.suspendedLanes|=u,l.pingedLanes&=~u,l=l.expirationTimes;0<u;){var _=31-sn(u),E=1<<_;l[_]=-1,u&=~E}}function ks(l){if((6&jt)!=0)throw Error(a(327));Ms();var u=ra(l,0);if((1&u)==0)return mi(l,Kt()),null;var _=zu(l,u);if(l.tag!==0&&_===2){var E=qt(l);E!==0&&(u=E,_=ju(l,E))}if(_===1)throw _=ba,Oo(l,0),ro(l,u),mi(l,Kt()),_;if(_===6)throw Error(a(345));return l.finishedWork=l.current.alternate,l.finishedLanes=u,hl(l,Tn,Ri),mi(l,Kt()),null}function ki(l){Ps!==null&&Ps.tag===0&&(6&jt)==0&&Ms();var u=jt;jt|=1;var _=mr.transition,E=Ut;try{if(mr.transition=null,Ut=1,l)return l()}finally{Ut=E,mr.transition=_,(6&(jt=u))==0&&Mn()}}function cl(){Yr=Ro.current,Wt(Ro)}function Oo(l,u){l.finishedWork=null,l.finishedLanes=0;var _=l.timeoutHandle;if(_!==st&&(l.timeoutHandle=st,Ke(_)),Hr!==null)for(_=Hr.return;_!==null;){var E=_;switch(qa(E),E.tag){case 1:(E=E.type.childContextTypes)!=null&&Gs();break;case 3:P(),Wt(bn),Wt(rn),me();break;case 5:F(E);break;case 4:P();break;case 13:case 19:Wt(j);break;case 10:fa(E.type._context);break;case 22:case 23:cl()}_=_.return}if(Kr=l,Hr=l=Do(l.current,null),Tr=Yr=u,Qr=0,ba=null,hs=Ea=Sa=0,Tn=ko=null,Qs!==null){for(u=0;u<Qs.length;u++)if((E=(_=Qs[u]).interleaved)!==null){_.interleaved=null;var C=E.next,O=_.pending;if(O!==null){var $=O.next;O.next=C,E.next=$}_.pending=E}Qs=null}return l}function kc(l,u){for(;;){var _=Hr;try{if(da(),oe.current=Ul,xe){for(var E=ne.memoizedState;E!==null;){var C=E.queue;C!==null&&(C.pending=null),E=E.next}xe=!1}if(ue=0,ee=re=ne=null,Ee=!1,ge=0,Pc.current=null,_===null||_.return===null){Qr=1,ba=u,Hr=null;break}e:{var O=l,$=_.return,ce=_,Te=u;if(u=Tr,ce.flags|=32768,Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var Le=Te,Ue=ce,lt=Ue.tag;if((1&Ue.mode)==0&&(lt===0||lt===11||lt===15)){var Be=Ue.alternate;Be?(Ue.updateQueue=Be.updateQueue,Ue.memoizedState=Be.memoizedState,Ue.lanes=Be.lanes):(Ue.updateQueue=null,Ue.memoizedState=null)}var Ze=el($);if(Ze!==null){Ze.flags&=-257,Is(Ze,$,ce,0,u),1&Ze.mode&&xh(O,Le,u),Te=Le;var xt=(u=Ze).updateQueue;if(xt===null){var Ht=new Set;Ht.add(Te),u.updateQueue=Ht}else xt.add(Te);break e}if((1&u)==0){xh(O,Le,u),Mc();break e}Te=Error(a(426))}else if(ir&&1&ce.mode){var je=el($);if(je!==null){(65536&je.flags)==0&&(je.flags|=256),Is(je,$,ce,0,u),ca(jl(Te,ce));break e}}O=Te=jl(Te,ce),Qr!==4&&(Qr=2),ko===null?ko=[O]:ko.push(O),O=$;do{switch(O.tag){case 3:O.flags|=65536,u&=-u,O.lanes|=u,Ol(O,Ec(0,Te,u));break e;case 1:ce=Te;var ye=O.type,ke=O.stateNode;if((128&O.flags)==0&&(typeof ye.getDerivedStateFromError=="function"||ke!==null&&typeof ke.componentDidCatch=="function"&&(to===null||!to.has(ke)))){O.flags|=65536,u&=-u,O.lanes|=u,Ol(O,To(O,ce,u));break e}}O=O.return}while(O!==null)}Ih(_)}catch($e){u=$e,Hr===_&&_!==null&&(Hr=_=_.return);continue}break}}function Ah(){var l=Kl.current;return Kl.current=Ul,l===null?Ul:l}function Mc(){Qr!==0&&Qr!==3&&Qr!==2||(Qr=4),Kr===null||(268435455&Sa)==0&&(268435455&Ea)==0||ro(Kr,Tr)}function zu(l,u){var _=jt;jt|=2;var E=Ah();for(Kr===l&&Tr===u||(Ri=null,Oo(l,u));;)try{_d();break}catch(C){kc(l,C)}if(da(),jt=_,Kl.current=E,Hr!==null)throw Error(a(261));return Kr=null,Tr=0,Qr}function _d(){for(;Hr!==null;)Ch(Hr)}function xd(){for(;Hr!==null&&!ia();)Ch(Hr)}function Ch(l){var u=Rc(l.alternate,l,Yr);l.memoizedProps=l.pendingProps,u===null?Ih(l):Hr=u,Pc.current=null}function Ih(l){var u=l;do{var _=u.alternate;if(l=u.return,(32768&u.flags)==0){if((_=Wl(_,u,Yr))!==null)return void(Hr=_)}else{if((_=Ac(_,u))!==null)return _.flags&=32767,void(Hr=_);if(l===null)return Qr=6,void(Hr=null);l.flags|=32768,l.subtreeFlags=0,l.deletions=null}if((u=u.sibling)!==null)return void(Hr=u);Hr=u=l}while(u!==null);Qr===0&&(Qr=5)}function hl(l,u,_){var E=Ut,C=mr.transition;try{mr.transition=null,Ut=1,(function(O,$,ce,Te){do Ms();while(Ps!==null);if((6&jt)!=0)throw Error(a(327));ce=O.finishedWork;var Le=O.finishedLanes;if(ce===null)return null;if(O.finishedWork=null,O.finishedLanes=0,ce===O.current)throw Error(a(177));O.callbackNode=null,O.callbackPriority=0;var Ue=ce.lanes|ce.childLanes;if((function(Ze,xt){var Ht=Ze.pendingLanes&~xt;Ze.pendingLanes=xt,Ze.suspendedLanes=0,Ze.pingedLanes=0,Ze.expiredLanes&=xt,Ze.mutableReadLanes&=xt,Ze.entangledLanes&=xt,xt=Ze.entanglements;var je=Ze.eventTimes;for(Ze=Ze.expirationTimes;0<Ht;){var ye=31-sn(Ht),ke=1<<ye;xt[ye]=0,je[ye]=-1,Ze[ye]=-1,Ht&=~ke}})(O,Ue),O===Kr&&(Hr=Kr=null,Tr=0),(2064&ce.subtreeFlags)==0&&(2064&ce.flags)==0||Ql||(Ql=!0,Mh(Vs,(function(){return Ms(),null}))),Ue=(15990&ce.flags)!=0,(15990&ce.subtreeFlags)!=0||Ue){Ue=mr.transition,mr.transition=null;var lt=Ut;Ut=1;var Be=jt;jt|=4,Pc.current=null,(function(Ze,xt){for(Y(Ze.containerInfo),dt=xt;dt!==null;)if(xt=(Ze=dt).child,(1028&Ze.subtreeFlags)!=0&&xt!==null)xt.return=Ze,dt=xt;else for(;dt!==null;){Ze=dt;try{var Ht=Ze.alternate;if((1024&Ze.flags)!=0)switch(Ze.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(Ht!==null){var je=Ht.memoizedProps,ye=Ht.memoizedState,ke=Ze.stateNode,$e=ke.getSnapshotBeforeUpdate(Ze.elementType===Ze.type?je:On(Ze.type,je),ye);ke.__reactInternalSnapshotBeforeUpdate=$e}break;case 3:at&&yn(Ze.stateNode.containerInfo);break;default:throw Error(a(163))}}catch(It){_r(Ze,Ze.return,It)}if((xt=Ze.sibling)!==null){xt.return=Ze.return,dt=xt;break}dt=Ze.return}Ht=wa,wa=!1})(O,ce),nl(ce,O),G(O.containerInfo),O.current=ce,hp(ce),Ir(),jt=Be,Ut=lt,mr.transition=Ue}else O.current=ce;if(Ql&&(Ql=!1,Ps=O,Zl=Le),Ue=O.pendingLanes,Ue===0&&(to=null),(function(Ze){if(Pr&&typeof Pr.onCommitFiberRoot=="function")try{Pr.onCommitFiberRoot($a,Ze,void 0,(128&Ze.current.flags)==128)}catch{}})(ce.stateNode),mi(O,Kt()),$!==null)for(Te=O.onRecoverableError,ce=0;ce<$.length;ce++)Le=$[ce],Te(Le.value,{componentStack:Le.stack,digest:Le.digest});if(br)throw br=!1,O=Yl,Yl=null,O;(1&Zl)!=0&&O.tag!==0&&Ms(),Ue=O.pendingLanes,(1&Ue)!=0?O===Ar?Rs++:(Rs=0,Ar=O):Rs=0,Mn()})(l,u,_,E)}finally{mr.transition=C,Ut=E}return null}function Ms(){if(Ps!==null){var l=ai(Zl),u=mr.transition,_=Ut;try{if(mr.transition=null,Ut=16>l?16:l,Ps===null)var E=!1;else{if(l=Ps,Ps=null,Zl=0,(6&jt)!=0)throw Error(a(331));var C=jt;for(jt|=4,dt=l.current;dt!==null;){var O=dt,$=O.child;if((16&dt.flags)!=0){var ce=O.deletions;if(ce!==null){for(var Te=0;Te<ce.length;Te++){var Le=ce[Te];for(dt=Le;dt!==null;){var Ue=dt;switch(Ue.tag){case 0:case 11:case 15:$l(8,Ue,O)}var lt=Ue.child;if(lt!==null)lt.return=Ue,dt=lt;else for(;dt!==null;){var Be=(Ue=dt).sibling,Ze=Ue.return;if(di(Ue),Ue===Le){dt=null;break}if(Be!==null){Be.return=Ze,dt=Be;break}dt=Ze}}}var xt=O.alternate;if(xt!==null){var Ht=xt.child;if(Ht!==null){xt.child=null;do{var je=Ht.sibling;Ht.sibling=null,Ht=je}while(Ht!==null)}}dt=O}}if((2064&O.subtreeFlags)!=0&&$!==null)$.return=O,dt=$;else e:for(;dt!==null;){if((2048&(O=dt).flags)!=0)switch(O.tag){case 0:case 11:case 15:$l(9,O,O.return)}var ye=O.sibling;if(ye!==null){ye.return=O.return,dt=ye;break e}dt=O.return}}var ke=l.current;for(dt=ke;dt!==null;){var $e=($=dt).child;if((2064&$.subtreeFlags)!=0&&$e!==null)$e.return=$,dt=$e;else e:for($=ke;dt!==null;){if((2048&(ce=dt).flags)!=0)try{switch(ce.tag){case 0:case 11:case 15:ql(9,ce)}}catch(sr){_r(ce,ce.return,sr)}if(ce===$){dt=null;break e}var It=ce.sibling;if(It!==null){It.return=ce.return,dt=It;break e}dt=ce.return}}if(jt=C,Mn(),Pr&&typeof Pr.onPostCommitFiberRoot=="function")try{Pr.onPostCommitFiberRoot($a,l)}catch{}E=!0}return E}finally{Ut=_,mr.transition=u}}return!1}function Ph(l,u,_){l=Yi(l,u=Ec(0,u=jl(_,u),1),1),u=cn(),l!==null&&(na(l,1,u),mi(l,u))}function _r(l,u,_){if(l.tag===3)Ph(l,l,_);else for(;u!==null;){if(u.tag===3){Ph(u,l,_);break}if(u.tag===1){var E=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(to===null||!to.has(E))){u=Yi(u,l=To(u,l=jl(_,l),1),1),l=cn(),u!==null&&(na(u,1,l),mi(u,l));break}}u=u.return}}function Oc(l,u,_){var E=l.pingCache;E!==null&&E.delete(u),u=cn(),l.pingedLanes|=l.suspendedLanes&_,Kr===l&&(Tr&_)===_&&(Qr===4||Qr===3&&(130023424&Tr)===Tr&&500>Kt()-Mo?Oo(l,0):hs|=_),mi(l,u)}function Rh(l,u){u===0&&((1&l.mode)==0?u=1:(u=ta,(130023424&(ta<<=1))==0&&(ta=4194304)));var _=cn();(l=Xi(l,u))!==null&&(na(l,u,_),mi(l,_))}function kh(l){var u=l.memoizedState,_=0;u!==null&&(_=u.retryLane),Rh(l,_)}function wd(l,u){var _=0;switch(l.tag){case 13:var E=l.stateNode,C=l.memoizedState;C!==null&&(_=C.retryLane);break;case 19:E=l.stateNode;break;default:throw Error(a(314))}E!==null&&E.delete(u),Rh(l,_)}function Mh(l,u){return an(l,u)}function bd(l,u,_,E){this.tag=l,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mi(l,u,_,E){return new bd(l,u,_,E)}function Hu(l){return!(!(l=l.prototype)||!l.isReactComponent)}function Do(l,u){var _=l.alternate;return _===null?((_=Mi(l.tag,u,l.key,l.mode)).elementType=l.elementType,_.type=l.type,_.stateNode=l.stateNode,_.alternate=l,l.alternate=_):(_.pendingProps=u,_.type=l.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=14680064&l.flags,_.childLanes=l.childLanes,_.lanes=l.lanes,_.child=l.child,_.memoizedProps=l.memoizedProps,_.memoizedState=l.memoizedState,_.updateQueue=l.updateQueue,u=l.dependencies,_.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},_.sibling=l.sibling,_.index=l.index,_.ref=l.ref,_}function Vu(l,u,_,E,C,O){var $=2;if(E=l,typeof l=="function")Hu(l)&&($=1);else if(typeof l=="string")$=5;else e:switch(l){case v:return Ta(_.children,C,O,u);case w:$=8,C|=8;break;case f:return(l=Mi(12,_,u,2|C)).elementType=f,l.lanes=O,l;case R:return(l=Mi(13,_,u,C)).elementType=R,l.lanes=O,l;case k:return(l=Mi(19,_,u,C)).elementType=k,l.lanes=O,l;case z:return Dc(_,C,O,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case y:$=10;break e;case b:$=9;break e;case T:$=11;break e;case L:$=14;break e;case V:$=16,E=null;break e}throw Error(a(130,l==null?l:typeof l,""))}return(u=Mi($,_,u,C)).elementType=l,u.type=E,u.lanes=O,u}function Ta(l,u,_,E){return(l=Mi(7,l,E,u)).lanes=_,l}function Dc(l,u,_,E){return(l=Mi(22,l,E,u)).elementType=z,l.lanes=_,l.stateNode={isHidden:!1},l}function Lc(l,u,_){return(l=Mi(6,l,null,u)).lanes=_,l}function Oh(l,u,_){return(u=Mi(4,l.children!==null?l.children:[],l.key,u)).lanes=_,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function dp(l,u,_,E,C){this.tag=u,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=st,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pl(0),this.expirationTimes=Pl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pl(0),this.identifierPrefix=E,this.onRecoverableError=C,yt&&(this.mutableSourceEagerHydrationData=null)}function Dh(l,u,_,E,C,O,$,ce,Te){return l=new dp(l,u,_,ce,Te),u===1?(u=1,O===!0&&(u|=8)):u=0,O=Mi(3,null,null,u),l.current=O,O.stateNode=l,O.memoizedState={element:E,isDehydrated:_,cache:null,transitions:null,pendingSuspenseBoundaries:null},bu(O),l}function Lh(l){if(!l)return Rt;e:{if(te(l=l._reactInternals)!==l||l.tag!==1)throw Error(a(170));var u=l;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(nn(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(a(171))}if(l.tag===1){var _=l.type;if(nn(_))return pr(l,_,u)}return u}function Nh(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(a(188)):(l=Object.keys(l).join(","),Error(a(268,l)));return(l=Pe(u))===null?null:l.stateNode}function Wu(l,u){if((l=l.memoizedState)!==null&&l.dehydrated!==null){var _=l.retryLane;l.retryLane=_!==0&&_<u?_:u}}function Nc(l,u){Wu(l,u),(l=l.alternate)&&Wu(l,u)}function fp(l){return(l=Pe(l))===null?null:l.stateNode}function pp(){return null}return Rc=function(l,u,_){if(l!==null)if(l.memoizedProps!==u.pendingProps||bn.current)Ur=!0;else{if((l.lanes&_)==0&&(128&u.flags)==0)return Ur=!1,(function(lt,Be,Ze){switch(Be.tag){case 3:Ao(Be),qi();break;case 5:M(Be);break;case 1:nn(Be.type)&&zs(Be);break;case 4:A(Be,Be.stateNode.containerInfo);break;case 10:kl(0,Be.type._context,Be.memoizedProps.value);break;case 13:var xt=Be.memoizedState;if(xt!==null)return xt.dehydrated!==null?(fr(j,1&j.current),Be.flags|=128,null):(Ze&Be.child.childLanes)!=0?Xn(lt,Be,Ze):(fr(j,1&j.current),(lt=ns(lt,Be,Ze))!==null?lt.sibling:null);fr(j,1&j.current);break;case 19:if(xt=(Ze&Be.childLanes)!=0,(128&lt.flags)!=0){if(xt)return bh(lt,Be,Ze);Be.flags|=128}var Ht=Be.memoizedState;if(Ht!==null&&(Ht.rendering=null,Ht.tail=null,Ht.lastEffect=null),fr(j,j.current),xt)break;return null;case 22:case 23:return Be.lanes=0,Gl(lt,Be,Ze)}return ns(lt,Be,Ze)})(l,u,_);Ur=(131072&l.flags)!=0}else Ur=!1,ir&&(1048576&u.flags)!=0&&bo(u,wo,u.index);switch(u.lanes=0,u.tag){case 2:var E=u.type;rs(l,u),l=u.pendingProps;var C=qn(u,rn.current);Ys(u,_),C=rt(null,u,E,l,C,_);var O=He();return u.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,nn(E)?(O=!0,zs(u)):O=!1,u.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,bu(u),C.updater=Za,u.stateNode=C,C._reactInternals=u,ma(u,E,l,_),u=_a(null,u,E,!0,O,_)):(u.tag=0,ir&&O&&qs(u),Ln(null,u,C,_),u=u.child),u;case 16:E=u.elementType;e:{switch(rs(l,u),l=u.pendingProps,E=(C=E._init)(E._payload),u.type=E,C=u.tag=(function(lt){if(typeof lt=="function")return Hu(lt)?1:0;if(lt!=null){if((lt=lt.$$typeof)===T)return 11;if(lt===L)return 14}return 2})(E),l=On(E,l),C){case 0:u=zl(null,u,E,l,_);break e;case 1:u=Tc(null,u,E,l,_);break e;case 11:u=gd(null,u,E,l,_);break e;case 14:u=yd(null,u,E,On(E.type,l),_);break e}throw Error(a(306,E,""))}return u;case 0:return E=u.type,C=u.pendingProps,zl(l,u,E,C=u.elementType===E?C:On(E,C),_);case 1:return E=u.type,C=u.pendingProps,Tc(l,u,E,C=u.elementType===E?C:On(E,C),_);case 3:e:{if(Ao(u),l===null)throw Error(a(387));E=u.pendingProps,C=(O=u.memoizedState).element,Su(l,u),pa(u,E,null,_);var $=u.memoizedState;if(E=$.element,yt&&O.isDehydrated){if(O={element:E,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},u.updateQueue.baseState=O,u.memoizedState=O,256&u.flags){u=wr(l,u,E,_,C=jl(Error(a(423)),u));break e}if(E!==C){u=wr(l,u,E,_,C=jl(Error(a(424)),u));break e}for(yt&&(Fr=ii(u.stateNode.containerInfo),ur=u,ir=!0,Ai=null,$i=!1),_=Eo(u,null,E,_),u.child=_;_;)_.flags=-3&_.flags|4096,_=_.sibling}else{if(qi(),E===C){u=ns(l,u,_);break e}Ln(l,u,E,_)}u=u.child}return u;case 5:return M(u),l===null&&Xs(u),E=u.type,C=u.pendingProps,O=l!==null?l.memoizedProps:null,$=C.children,Oe(E,C)?$=null:O!==null&&Oe(E,O)&&(u.flags|=32),tl(l,u),Ln(l,u,$,_),u.child;case 6:return l===null&&Xs(u),null;case 13:return Xn(l,u,_);case 4:return A(u,u.stateNode.containerInfo),E=u.pendingProps,l===null?u.child=ci(u,null,E,_):Ln(l,u,E,_),u.child;case 11:return E=u.type,C=u.pendingProps,gd(l,u,E,C=u.elementType===E?C:On(E,C),_);case 7:return Ln(l,u,u.pendingProps,_),u.child;case 8:case 12:return Ln(l,u,u.pendingProps.children,_),u.child;case 10:e:{if(E=u.type._context,C=u.pendingProps,O=u.memoizedProps,kl(0,E,$=C.value),O!==null)if(kn(O.value,$)){if(O.children===C.children&&!bn.current){u=ns(l,u,_);break e}}else for((O=u.child)!==null&&(O.return=u);O!==null;){var ce=O.dependencies;if(ce!==null){$=O.child;for(var Te=ce.firstContext;Te!==null;){if(Te.context===E){if(O.tag===1){(Te=Ki(-1,_&-_)).tag=2;var Le=O.updateQueue;if(Le!==null){var Ue=(Le=Le.shared).pending;Ue===null?Te.next=Te:(Te.next=Ue.next,Ue.next=Te),Le.pending=Te}}O.lanes|=_,(Te=O.alternate)!==null&&(Te.lanes|=_),wu(O.return,_,u),ce.lanes|=_;break}Te=Te.next}}else if(O.tag===10)$=O.type===u.type?null:O.child;else if(O.tag===18){if(($=O.return)===null)throw Error(a(341));$.lanes|=_,(ce=$.alternate)!==null&&(ce.lanes|=_),wu($,_,u),$=O.sibling}else $=O.child;if($!==null)$.return=O;else for($=O;$!==null;){if($===u){$=null;break}if((O=$.sibling)!==null){O.return=$.return,$=O;break}$=$.return}O=$}Ln(l,u,C.children,_),u=u.child}return u;case 9:return C=u.type,E=u.pendingProps.children,Ys(u,_),E=E(C=Sn(C)),u.flags|=1,Ln(l,u,E,_),u.child;case 14:return C=On(E=u.type,u.pendingProps),yd(l,u,E,C=On(E.type,C),_);case 15:return va(l,u,u.type,u.pendingProps,_);case 17:return E=u.type,C=u.pendingProps,C=u.elementType===E?C:On(E,C),rs(l,u),u.tag=1,nn(E)?(l=!0,zs(u)):l=!1,Ys(u,_),Zi(u,E,C),ma(u,E,C,_),_a(null,u,E,!0,l,_);case 19:return bh(l,u,_);case 22:return Gl(l,u,_)}throw Error(a(156,u.tag))},e.attemptContinuousHydration=function(l){if(l.tag===13){var u=Xi(l,134217728);u!==null&&Fn(u,l,134217728,cn()),Nc(l,134217728)}},e.attemptDiscreteHydration=function(l){if(l.tag===13){var u=Xi(l,1);u!==null&&Fn(u,l,1,cn()),Nc(l,1)}},e.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var u=ds(l),_=Xi(l,u);_!==null&&Fn(_,l,u,cn()),Nc(l,u)}},e.attemptSynchronousHydration=function(l){switch(l.tag){case 3:var u=l.stateNode;if(u.current.memoizedState.isDehydrated){var _=$t(u.pendingLanes);_!==0&&(on(u,1|_),mi(u,Kt()),(6&jt)==0&&(ul(),Mn()))}break;case 13:ki((function(){var E=Xi(l,1);if(E!==null){var C=cn();Fn(E,l,1,C)}})),Nc(l,1)}},e.batchedUpdates=function(l,u){var _=jt;jt|=1;try{return l(u)}finally{(jt=_)===0&&(ul(),Vi&&Mn())}},e.createComponentSelector=function(l){return{$$typeof:Io,value:l}},e.createContainer=function(l,u,_,E,C,O,$){return Dh(l,u,!1,null,0,E,0,O,$)},e.createHasPseudoClassSelector=function(l){return{$$typeof:Lu,value:l}},e.createHydrationContainer=function(l,u,_,E,C,O,$,ce,Te){return(l=Dh(_,E,!0,l,0,O,0,ce,Te)).context=Lh(null),_=l.current,(O=Ki(E=cn(),C=ds(_))).callback=u??null,Yi(_,O,C),l.current.lanes=C,na(l,C,E),mi(l,E),l},e.createPortal=function(l,u,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:E==null?null:""+E,children:l,containerInfo:u,implementation:_}},e.createRoleSelector=function(l){return{$$typeof:il,value:l}},e.createTestNameSelector=function(l){return{$$typeof:sl,value:l}},e.createTextSelector=function(l){return{$$typeof:Po,value:l}},e.deferredUpdates=function(l){var u=Ut,_=mr.transition;try{return mr.transition=null,Ut=16,l()}finally{Ut=u,mr.transition=_}},e.discreteUpdates=function(l,u,_,E,C){var O=Ut,$=mr.transition;try{return mr.transition=null,Ut=1,l(u,_,E,C)}finally{Ut=O,mr.transition=$,jt===0&&ul()}},e.findAllNodes=pi,e.findBoundingRects=function(l,u){if(!Nr)throw Error(a(363));u=pi(l,u),l=[];for(var _=0;_<u.length;_++)l.push(vi(u[_]));for(u=l.length-1;0<u;u--)for(var E=(_=l[u]).x,C=E+_.width,O=_.y,$=O+_.height,ce=u-1;0<=ce;ce--)if(u!==ce){var Te=l[ce],Le=Te.x,Ue=Le+Te.width,lt=Te.y,Be=lt+Te.height;if(E>=Le&&O>=lt&&C<=Ue&&$<=Be){l.splice(u,1);break}if(!(E!==Le||_.width!==Te.width||Be<O||lt>$)){lt>O&&(Te.height+=lt-O,Te.y=O),Be<$&&(Te.height=$-lt),l.splice(u,1);break}if(!(O!==lt||_.height!==Te.height||Ue<E||Le>C)){Le>E&&(Te.width+=Le-E,Te.x=E),Ue<C&&(Te.width=C-Le),l.splice(u,1);break}}return l},e.findHostInstance=Nh,e.findHostInstanceWithNoPortals=function(l){return(l=(l=Me(l))!==null?_e(l):null)===null?null:l.stateNode},e.findHostInstanceWithWarning=function(l){return Nh(l)},e.flushControlled=function(l){var u=jt;jt|=1;var _=mr.transition,E=Ut;try{mr.transition=null,Ut=1,l()}finally{Ut=E,mr.transition=_,(jt=u)===0&&(ul(),Mn())}},e.flushPassiveEffects=Ms,e.flushSync=ki,e.focusWithin=function(l,u){if(!Nr)throw Error(a(363));for(u=al(l=Nu(l),u),u=Array.from(u),l=0;l<u.length;){var _=u[l++];if(!Pn(_)){if(_.tag===5&&gn(_.stateNode))return!0;for(_=_.child;_!==null;)u.push(_),_=_.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Ut},e.getFindAllNodesFailureDescription=function(l,u){if(!Nr)throw Error(a(363));var _=0,E=[];l=[Nu(l),0];for(var C=0;C<l.length;){var O=l[C++],$=l[C++],ce=u[$];if((O.tag!==5||!Pn(O))&&(Fu(O,ce)&&(E.push(Bu(ce)),++$>_&&(_=$)),$<u.length))for(O=O.child;O!==null;)l.push(O,$),O=O.sibling}if(_<u.length){for(l=[];_<u.length;_++)l.push(Bu(u[_]));return`findAllNodes was able to match part of the selector:
  `+E.join(" > ")+`

No matching component was found for:
  `+l.join(" > ")}return null},e.getPublicRootInstance=function(l){return(l=l.current).child?l.child.tag===5?H(l.child.stateNode):l.child.stateNode:null},e.injectIntoDevTools=function(l){if(l={bundleType:l.bundleType,version:l.version,rendererPackageName:l.rendererPackageName,rendererConfig:l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:c.ReactCurrentDispatcher,findHostInstanceByFiber:fp,findFiberByHostInstance:l.findFiberByHostInstance||pp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)l=!0;else{try{$a=u.inject(l),Pr=u}catch{}l=!!u.checkDCE}}return l},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(l,u,_,E){if(!Nr)throw Error(a(363));l=pi(l,u);var C=Jn(l,_,E).disconnect;return{disconnect:function(){C()}}},e.registerMutableSourceForHydration=function(l,u){var _=u._getVersion;_=_(u._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[u,_]:l.mutableSourceEagerHydrationData.push(u,_)},e.runWithPriority=function(l,u){var _=Ut;try{return Ut=l,u()}finally{Ut=_}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(l,u,_,E){var C=u.current,O=cn(),$=ds(C);return _=Lh(_),u.context===null?u.context=_:u.pendingContext=_,(u=Ki(O,$)).payload={element:l},(E=E===void 0?null:E)!==null&&(u.callback=E),(l=Yi(C,u,$))!==null&&(Fn(l,C,$,O),Cs(l,C,$)),$},e}),j_}({get exports(){return dy},set exports(n){dy=n}}).exports=qC();var XC=xC(dy),Fw={name:"root",dependencies:{"react-dom":"^18.0.0"}},py={},mf={get exports(){return py},set exports(n){py=n}};(function(){var n,e,t,r,s,a;typeof performance<"u"&&performance!==null&&performance.now?mf.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(mf.exports=function(){return(n()-s)/1e6},e=process.hrtime,r=(n=function(){var c;return 1e9*(c=e())[0]+c[1]})(),a=1e9*process.uptime(),s=r-a):Date.now?(mf.exports=function(){return Date.now()-t},t=Date.now()):(mf.exports=function(){return new Date().getTime()-t},t=new Date().getTime())}).call(_C);var H_,Zc={},ec={};({get exports(){return Zc},set exports(n){Zc=n}}).exports=(H_||(H_=1,ec.ConcurrentRoot=1,ec.ContinuousEventPriority=4,ec.DefaultEventPriority=16,ec.DiscreteEventPriority=1,ec.IdleEventPriority=536870912,ec.LegacyRoot=0),ec);var KC={};function xg(n,e){n.addChild&&(n.addChild(e),typeof e.didMount=="function"&&e.didMount(e,n))}function Bw(n,e){var t,r,s;(t=n.willUnmount)===null||t===void 0||t.call(n,n,e),((r=n.config)===null||r===void 0?void 0:r.destroyChildren)!==!1&&(s=n.children)!==null&&s!==void 0&&s.length&&Tl(n.children).forEach((function(a){Bw(a,n)}))}function V_(n,e){var t;Bw(e,n),n.removeChild(e);var r=(t=e.config)!==null&&t!==void 0?t:{},s=r.destroy,a=s===void 0||s,c=r.destroyChildren,d=c===void 0||c,m=r.destroyTexture,v=m!==void 0&&m,w=r.destroyBaseTexture,f=w!==void 0&&w;a&&e.destroy({children:d,texture:v,baseTexture:f})}function W_(n,e,t){var r,s;en(e!==t,"Cannot insert node before itself"),n.children.indexOf(e)!==-1&&n.removeChild(e);var a=n.getChildIndex(t);n.addChildAt(e,a),(r=n.__reactpixi)===null||r===void 0||(s=r.root)===null||s===void 0||s.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertBefore"})}var $_=null,Wo=XC({getRootHostContext:function(){return KC},getChildHostContext:function(n){return n},getChildHostContextForEventComponent:function(n){return n},getPublicInstance:function(n){return n},getCurrentEventPriority:function(){return(function(){var n,e;if(typeof window>"u")return Zc.DefaultEventPriority;switch((n=window)===null||n===void 0||(e=n.event)===null||e===void 0?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Zc.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Zc.ContinuousEventPriority;default:return Zc.DefaultEventPriority}})()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=HC[n];if(typeof a=="function"&&(e=a(s,r)),!e){var c=Nw[n];c&&((e=c.create(r,{root:s})).didMount=c.didMount?c.didMount.bind(e):void 0,e.willUnmount=c.willUnmount?c.willUnmount.bind(e):void 0,e.applyProps=c.applyProps?c.applyProps.bind(e):void 0,e.config=c.config)}return e&&(e.__reactpixi={root:s},(typeof((t=e)===null||t===void 0?void 0:t.applyProps)=="function"?e.applyProps:Ga)(e,{},r)),e},hideInstance:function(n){n.visible=!1},unhideInstance:function(n,e){var t=e==null||!e.hasOwnProperty("visible")||e.visible;n.visible=t},finalizeInitialChildren:function(n,e,t){return!1},prepareUpdate:function(n,e,t,r,s,a){return $_=(function(c,d,m,v){var w=null;for(var f in m)!v.hasOwnProperty(f)&&m.hasOwnProperty(f)&&m[f]!==null&&(f===cy||(w||(w=[]),w.push(f,null)));for(var y in v){var b=v[y],T=m!==null?m[y]:void 0;!v.hasOwnProperty(y)||b===T||b===null&&T===null||y===cy||(w||(w=[]),w.push(y,b))}return w})(0,0,t,r)},shouldSetTextContent:function(n,e){return!1},shouldDeprioritizeSubtree:function(n,e){var t=e.alpha===void 0||e.alpha>0,r=e.renderable===void 0||e.renderable===!0,s=e.visible===void 0||e.visible===!0;return!(t&&r&&s)},createTextInstance:function(n,e,t){en(!1,'Error trying to add text node "'.concat(n,'"'),"text strings as children of a Pixi component is not supported. To add some text, use &lt;Text text={string} /&gt;")},unhideTextInstance:function(n,e){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:py,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var n,e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=xg.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),a},appendChild:function(){for(var n,e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=xg.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),a},appendChildToContainer:function(){for(var n,e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=xg.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),a},removeChild:function(){for(var n,e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=V_.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),a},removeChildFromContainer:function(){for(var n,e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=V_.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),a},insertBefore:W_,insertInContainerBefore:function(){for(var n,e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=W_.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),a},commitUpdate:function(n,e,t,r,s){var a,c,d=n&&n.applyProps;typeof d!="function"&&(d=Ga),(d(n,r,s)||$_)&&((a=n.__reactpixi)===null||a===void 0||(c=a.root)===null||c===void 0||c.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(n,e,t,r,s){},commitTextUpdate:function(n,e,t){},resetTextContent:function(n){},clearContainer:function(n){},getFundamentalComponentInstance:function(n){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(n){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(n){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(n){throw new Error("Not yet implemented.")},getInstanceFromNode:function(n){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(n){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(n){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(n){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(n){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(n){}}),YC=Fw.dependencies["react-dom"].replace(/[^0-9.]/g,""),QC=Fw.name;Wo.injectIntoDevTools({bundleType:0,version:YC,rendererPackageName:QC,findHostInstanceByFiber:Wo.findHostInstance});var pu=new Map;function Uw(n){if(en(Ni.prototype.isPrototypeOf(n),"Invalid argument `container`, expected instance of `Container`."),pu.has(n)){var e=pu.get(n).pixiFiberContainer;Wo.updateContainer(null,e,void 0,(function(){pu.delete(n)}))}}function jw(n){en(Ni.prototype.isPrototypeOf(n),"Invalid argument `container`, expected instance of `Container`.");var e=pu.get(n);if(en(!e,"createRoot should only be called once"),!e){var t=Wo.createContainer(n);e={pixiFiberContainer:t,reactRoot:{render:function(r){return Wo.updateContainer(r,t,void 0),Wo.getPublicRootInstance(t)},unmount:function(){Uw(n),pu.delete(n)}}},pu.set(n,e)}return e.reactRoot}function ZC(n,e,t){var r;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),t!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),pu.has(e)?r=pu.get(e).reactRoot:r=jw(e),r.render(n)}function JC(n){Uw(n)}function hd(){return hd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hd.apply(this,arguments)}function eI(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function tI(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Ow(r.key),r)}}function gl(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Wf(n,e){return Wf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Wf(n,e)}function rI(n,e){if(e&&(Ns(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gl(n)}function $f(n){return $f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$f(n)}var ap=Jr.createContext(null),Gw=ap.Provider,zw=ap.Consumer,nI=function(n){var e=Jr.forwardRef((function(t,r){return Jr.createElement(zw,null,(function(s){return Jr.createElement(n,hd({},t,{ref:r,app:s}))}))}));return e.displayName="withPIXIApp(".concat(n.displayName||n.name,")"),e};function iI(n){var e=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})();return function(){var t,r=$f(n);if(e){var s=$f(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return rI(this,t)}}function q_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.push.apply(t,r)}return t}function gf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?q_(Object(t),!0).forEach((function(r){fn(n,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):q_(Object(t)).forEach((function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))}))}return n}var X_=function(){},Hw={width:Dr.number,height:Dr.number,onMount:Dr.func,onUnmount:Dr.func,raf:Dr.bool,renderOnComponentChange:Dr.bool,children:Dr.node,options:Dr.shape({autoStart:Dr.bool,width:Dr.number,height:Dr.number,useContextAlpha:Dr.bool,backgroundAlpha:Dr.number,autoDensity:Dr.bool,antialias:Dr.bool,preserveDrawingBuffer:Dr.bool,resolution:Dr.number,forceCanvas:Dr.bool,backgroundColor:Dr.number,clearBeforeRender:Dr.bool,powerPreference:Dr.string,sharedTicker:Dr.bool,sharedLoader:Dr.bool,resizeTo:function(n,e){var t=n[e];t&&en(t===window||t instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(Ns(t),", expect `window` or an `HTMLElement`."))},view:function(n,e,t){var r=n[e];r&&en(r instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(Ns(r),", supplied to ").concat(t,", expected `<canvas> Element`"))}})},sI={width:800,height:600,onMount:X_,onUnmount:X_,raf:!0,renderOnComponentChange:!0},my=(function(n){(function(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),c&&Wf(a,c)})(s,Jr.Component);var e,t,r=iI(s);function s(){var a;eI(this,s);for(var c=arguments.length,d=new Array(c),m=0;m<c;m++)d[m]=arguments[m];return fn(gl(a=r.call.apply(r,[this].concat(d))),"_canvas",null),fn(gl(a),"_mediaQuery",null),fn(gl(a),"_ticker",null),fn(gl(a),"_needsUpdate",!0),fn(gl(a),"app",null),fn(gl(a),"updateSize",(function(){var v=a.props,w=v.width,f=v.height,y=v.options;y!=null&&y.resolution||(a.app.renderer.resolution=window.devicePixelRatio,a.resetInteractionManager()),a.app.renderer.resize(w,f)})),fn(gl(a),"needsRenderUpdate",(function(){a._needsUpdate=!0})),fn(gl(a),"renderStage",(function(){var v=a.props,w=v.renderOnComponentChange;!v.raf&&w&&a._needsUpdate&&(a._needsUpdate=!1,a.app.renderer.render(a.app.stage))})),a}return e=s,(t=[{key:"componentDidMount",value:function(){var a=this.props,c=a.onMount,d=a.width,m=a.height,v=a.options,w=a.raf,f=a.renderOnComponentChange;this.app=new rp(gf(gf({width:d,height:m,view:this._canvas},v),{},{autoDensity:v?.autoDensity!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[w?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=Wo.createContainer(this.app.stage),Wo.updateContainer(this.getChildren(),this.mountNode,this),c(this.app),v!=null&&v.autoDensity&&window.matchMedia&&v?.resolution===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),f&&!w&&(this._ticker=new Gn,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(a,c,d){var m,v=this.props,w=v.width,f=v.height,y=v.raf,b=v.renderOnComponentChange,T=v.options;T?.resolution!==void 0&&a?.options.resolution!==T?.resolution&&(this.app.renderer.resolution=T.resolution,this.resetInteractionManager()),a.height===f&&a.width===w&&((m=a.options)===null||m===void 0?void 0:m.resolution)===T?.resolution||this.updateSize(),a.raf!==y&&this.app.ticker[y?"start":"stop"](),Wo.updateContainer(this.getChildren(),this.mountNode,this),a.width===w&&a.height===f&&a.raf===y&&a.renderOnComponentChange===b&&a.options===T||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var a=this.app.renderer.plugins.interaction;a!=null&&a.resolution&&(a.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var a=this.props.children;return Jr.createElement(Gw,{value:this.app},a)}},{key:"componentDidCatch",value:function(a,c){console.error("Error occurred in `Stage`."),console.error(a),console.error(c)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),Wo.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var a,c,d=this,m=this.props.options;return m&&m.view?(en(m.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):Jr.createElement("canvas",hd({},(a=this.props,c=[].concat(Tl(Object.keys(Hw)),Tl(Object.keys(hy))),Object.keys(a).filter((function(v){return!c.includes(v)})).reduce((function(v,w){return gf(gf({},v),{},fn({},w,a[w]))}),{})),{ref:function(v){return d._canvas=v}}))}}])&&tI(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),s})();my.propTypes=Hw,my.defaultProps=sI;var oI=my;function Vw(){var n=it.useContext(ap);return en(n instanceof rp,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider"),n}function aI(n){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],t=Vw();en(typeof n=="function","`useTick` needs a callback function."),en(t instanceof rp,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider");var r=it.useRef(null);it.useEffect((function(){r.current=n}),[n]),it.useEffect((function(){if(e){var s=function(a){return r.current.apply(t.ticker,[a,t.ticker])};return t.ticker.add(s),function(){t.ticker&&t.ticker.remove(s)}}}),[e])}function lI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}function gy(n,e,t){return gy=lI()?Reflect.construct.bind():function(r,s,a){var c=[null];c.push.apply(c,s);var d=new(Function.bind.apply(r,c));return a&&Wf(d,a.prototype),d},gy.apply(null,arguments)}var uI=["children","apply"];function K_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.push.apply(t,r)}return t}function yf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?K_(Object(t),!0).forEach((function(r){fn(n,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):K_(Object(t)).forEach((function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))}))}return n}var cI=function(n,e){en(Ns(e)==="object","Second argument needs to be an indexed object with { prop: Filter }");var t=Object.keys(e),r=function(s){var a=s.children,c=s.apply,d=xu(s,uI),m=it.useRef(it.useMemo((function(){return t.map((function(f){var y,b=(d==null||(y=d[f])===null||y===void 0?void 0:y.construct)||[];return gy(e[f],Tl(b))}))}),[t])),v=it.useMemo((function(){return t.reduce((function(f,y,b){return yf(yf({},f),{},fn({},y,m.current[b]))}),{})}),[t]),w=it.useMemo((function(){return Object.keys(d).filter(Lw(Dw(t))).reduce((function(f,y){return yf(yf({},f),{},fn({},y,d[y]))}),{})}),[d,t]);return t.forEach((function(f,y){return Object.assign(m.current[y],d[f])})),c&&(function(){for(var f=arguments.length,y=new Array(f),b=0;b<f;b++)y[b]=arguments[b];return y.every((function(T){return typeof T=="function"}))})(c)&&c.call(n,v),Jr.createElement(n,hd({},w,{filters:m.current}),a)};return r.displayName="FilterWrapper",r.propTypes={children:Dr.node,apply:Dr.func},r},hI=_s.BitmapText,dI=_s.Container,fI=_s.Graphics,pI=_s.NineSlicePlane,mI=_s.ParticleContainer,gI=_s.Sprite,yI=_s.AnimatedSprite,vI=_s.Text,_I=_s.TilingSprite,xI=_s.SimpleMesh,wI=_s.SimpleRope;const bI=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:yI,AppConsumer:zw,AppContext:ap,AppProvider:Gw,BitmapText:hI,Container:dI,Graphics:fI,NineSlicePlane:pI,ParticleContainer:mI,PixiComponent:VC,PixiFiber:Wo,SimpleMesh:xI,SimpleRope:wI,Sprite:gI,Stage:oI,TYPES:_s,Text:vI,TilingSprite:_I,applyDefaultProps:Ga,createRoot:jw,eventHandlers:Vf,render:ZC,unmountComponentAtNode:JC,useApp:Vw,useTick:aI,withFilters:cI,withPixiApp:nI},Symbol.toStringTag,{value:"Module"})),SI=nx(bI);var Y_;function EI(){return Y_||(Y_=1,fg.exports=SI),fg.exports}var tn=EI();const Ww=({sheetName:n,animationName:e,imageName:t,x:r,y:s,scale:a=1,rotation:c=0,anchor:d=.5,isPlaying:m=!0,currentFrame:v=0})=>{const w=El.getInstance(),f=it.useRef(null),y=Jr.useMemo(()=>t?w.getTexture(t):null,[t,w]),b=Jr.useMemo(()=>{if(t)return null;const T=`${n}_${e}`;return w.getAnimation(T)},[n,e,t,w]);return it.useEffect(()=>{if(f.current&&b&&b.length>0){const T=Math.floor(v)%b.length;f.current.gotoAndStop(T)}},[v,b]),t&&y?Q.jsx(tn.Sprite,{texture:y,x:r,y:s,scale:a,rotation:c,anchor:d}):b&&b.length>0?Q.jsx(tn.AnimatedSprite,{ref:f,textures:b,isPlaying:!1,x:r,y:s,scale:a,rotation:c,anchor:d}):null},TI=({w:n,h:e})=>{const t=tn.useApp();return it.useEffect(()=>{t?.renderer&&(t.renderer.resize(n,e),t.view instanceof HTMLCanvasElement&&(t.view.width=n,t.view.height=e))},[t,n,e]),null},AI=({paused:n,w:e,h:t})=>{const r=it.useRef(null),s=it.useRef(0);return it.useEffect(()=>{r.current?.clear().beginFill(16777215).drawRect(0,0,e,t).endFill()},[e,t]),tn.useTick(a=>{if(!r.current||n)return;s.current+=Math.PI/60*a;const c=(Math.sin(s.current)+1)/2,d=Math.round(26+c*4),m=Math.round(26+c*54),v=Math.round(46+c*104);r.current.tint=(d<<16)+(m<<8)+v}),Q.jsx(tn.Graphics,{ref:r})},CI=({vm:n,paused:e})=>{const t=it.useRef(null),r=it.useRef([]),s=El.getInstance();return it.useEffect(()=>()=>{r.current.forEach(a=>{a&&!a.destroyed&&a.destroy()}),r.current=[]},[]),tn.useTick(()=>{if(!t.current)return;const a=n.entityCount,c=r.current;if(a>c.length)for(let d=c.length;d<a;d++){const m=s.getTexture("static_rock");if(m){const v=new po(m);v.anchor.set(.5),v.scale.set(.8),t.current.addChild(v),c.push(v)}}else if(a<c.length)for(let d=c.length-1;d>=a;d--){const m=c.pop();m&&(t.current.removeChild(m),m.destroy())}for(let d=0;d<a;d++){const m=c[d],v=n.getRockViewData(d);if(!v||e){m&&(m.visible=!1);continue}m.visible=!0,m.x=v.x,m.y=v.y,m.rotation=v.rotation}}),Q.jsx(tn.Container,{ref:t})},II=({vm:n,paused:e,width:t,height:r,scale:s,heroPos:a,hp:c})=>{const d=it.useRef(null),[m,v]=it.useState(n.heroVisuals);return tn.useTick(()=>{const w=n.heroVisuals;d.current&&(d.current.x=w.x,d.current.y=w.y,d.current.rotation=w.rotation,d.current.scale.set(w.scale),a.current.x=w.x,a.current.y=w.y,m.currentFrame!==w.currentFrame&&v(w))}),Q.jsxs(Q.Fragment,{children:[Q.jsx(TI,{w:t,h:r}),Q.jsx(AI,{paused:e,w:t,h:r}),Q.jsxs(tn.Container,{scale:s,children:[Q.jsx(CI,{vm:n,paused:e}),Q.jsx(tn.Container,{ref:d,children:Q.jsx(Ww,{sheetName:"hero_sheet",animationName:"idle",x:0,y:0,scale:1,anchor:.5,currentFrame:m.currentFrame})})]})]})},PI=({hp:n,rockCount:e,shieldBarRef:t,shieldTextRef:r,damageBtnRef:s,onDamage:a,onJumpToG2:c,onLevel1:d,onLevel2:m,onLevel3:v,onResetG1:w,onNextLevel:f,onFailLevel:y})=>{const b={padding:"0.6cqw 1cqw",cursor:"pointer",color:"#fff",border:"none",borderRadius:"0.4cqw",fontWeight:"bold",fontFamily:"monospace",fontSize:"0.8cqw",pointerEvents:"auto",textAlign:"center"};return Q.jsxs("div",{style:{position:"absolute",inset:0,pointerEvents:"none",containerType:"size"},children:[Q.jsxs("div",{style:{position:"absolute",top:"5cqh",left:"50%",transform:"translateX(-50%)",width:"35cqw"},children:[Q.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#fff",marginBottom:"0.5cqh",fontWeight:"bold",fontFamily:"monospace",fontSize:"1.2cqw"},children:[Q.jsx("span",{children:"SHIELD ENERGY"}),Q.jsxs("span",{ref:r,children:[Math.round(n),"%"]})]}),Q.jsx("div",{style:{width:"100%",height:"2cqh",backgroundColor:"#222",borderRadius:"1cqw",border:"0.2cqw solid #fff",overflow:"hidden"},children:Q.jsx("div",{ref:t,style:{width:`${Math.max(0,n)}%`,height:"100%",backgroundColor:n<30?"#c0392b":"#27ae60"}})})]}),Q.jsxs("div",{style:{position:"absolute",top:"3cqh",right:"3cqw",color:"#00ff00",fontFamily:"monospace",textAlign:"right",fontSize:"1.2cqw"},children:["ROCKS_ACTIVE: ",e]}),Q.jsxs("div",{style:{position:"absolute",top:"3cqh",left:"3cqw",display:"flex",flexDirection:"column",gap:"1cqh"},children:[Q.jsx("button",{ref:s,onClick:a,style:{...b,background:"#333",border:"0.1cqw solid #fff"},children:"TAKE DAMAGE (-15)"}),Q.jsxs("div",{style:{display:"flex",gap:"0.5cqw"},children:[Q.jsx("button",{onClick:d,style:{...b,background:"#408240",flex:1},children:"LVL 1"}),Q.jsx("button",{onClick:m,style:{...b,background:"#C29F19",flex:1},children:"LVL 2"}),Q.jsx("button",{onClick:v,style:{...b,background:"#C21919",flex:1},children:"LVL 3"})]}),Q.jsx("div",{style:{display:"flex",gap:"0.5cqw"},children:Q.jsx("button",{onClick:f,style:{...b,background:"#67ad44",flex:2},children:"Next Level (Campaign)"})}),Q.jsx("div",{style:{display:"flex",gap:"0.5cqw"},children:Q.jsx("button",{onClick:y,style:{...b,background:"#ad4444",flex:2},children:"Fail Level (Campaign)"})}),Q.jsx("button",{onClick:c,style:{...b,background:"#2980b9"},children:"Go to Game 2"}),Q.jsx("div",{style:{display:"flex",gap:"0.5cqw"},children:Q.jsx("button",{onClick:w,style:{...b,background:"#c0392b",flex:1},children:"Quick Load"})})]})]})},RI=({vm:n,controller:e,width:t=960,height:r=540})=>{const[s,a]=it.useState(n.hp),[c,d]=it.useState(n.entityCount),[m,v]=it.useState(!1),w=it.useRef(null),f=it.useRef(null),y=it.useRef(null),b=it.useRef({x:n.pos.x,y:n.pos.y});it.useEffect(()=>{const L=n.subscribe(()=>{const J=lr.getInstance().getActiveState()?.name!=="Game1";m!==J&&v(J);const X=n.hp;b.current.x=n.pos.x,b.current.y=n.pos.y,w.current&&(w.current.style.width=`${Math.max(0,X)}%`),f.current&&(f.current.innerText=`${Math.round(X)}%`),Math.abs(s-X)>1&&a(X),c!==n.entityCount&&d(n.entityCount)});return()=>L()},[n,s,c,m]);const T=it.useMemo(()=>t/960,[t]),R=it.useMemo(()=>({backgroundColor:0,antialias:!0,resolution:1,autoDensity:!1}),[]),k=it.useMemo(()=>({display:"block",width:"100%",height:"100%",objectFit:"contain",imageRendering:"pixelated"}),[]);return Q.jsxs("div",{style:{position:"absolute",inset:0,background:"#000",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:[Q.jsx("div",{style:{position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:Q.jsx(tn.Stage,{width:t,height:r,options:R,style:k,children:Q.jsx(II,{vm:n,paused:m,width:t,height:r,scale:T,heroPos:b,hp:s})},`stage-${t}-${r}`)}),Q.jsx(PI,{hp:s,rockCount:c,shieldBarRef:w,shieldTextRef:f,damageBtnRef:y,onDamage:()=>e.takeDamage(),onJumpToG2:()=>e.jumpToGame2(),onLevel1:()=>e.loadLevel(fo.Level1),onLevel2:()=>e.loadLevel(fo.Level2),onLevel3:()=>e.loadLevel(fo.Level3),onResetG1:()=>e.resetLevel(),onNextLevel:()=>e.nextLevel(),onFailLevel:()=>e.failLevel()})]})},kI={HERO_HP:0,HERO_X:1,HERO_Y:2,TICK_COUNT:3,FRAME_COUNT:4,FPS:5,REVISION:6,LAST_HIT_FRAME:7,ENTITY_COUNT:8,BUFFER_SIZE:128},MI={START_INDEX:0,STRIDE:3,BUFFER_SIZE:3e3},OI={main:kI,rocks:MI};class Na extends My{constructor(e=!1,t=fo.Level1){super(e),this.currentLevel=t}name="Game1";logicSchema=OI;viewSchema=fC;viewComponent=RI;getConfig(){return hC(this.currentLevel)}getSessionOverrides(e){const t=e.get(cd.hp);return t!==void 0?{initialHP:t}:{}}initMVC(){this.vm=new pC,this.controller=new dC(this.vm)}async init(){ys.getInstance().refreshBindings(this.name),await super.init()}}const yy=Object.freeze(Object.defineProperty({__proto__:null,Game1State:Na},Symbol.toStringTag,{value:"Module"})),DI={HERO_HP:0,ENERGY:1,SCRAP_COUNT:2,TICK_COUNT:3,FRAME_COUNT:4,FPS:5,REVISION:6,BUFFER_SIZE:1024},lc={HERO_HP_DISPLAY:0,ENERGY_DISPLAY:1,SCRAP_DISPLAY:2,UI_BOUNCE:3,GLITCH_INTENSITY:4,VIGNETTE_PULSE:5,BUFFER_SIZE:1024},LI=({stats:n,onAction:e,onJumpG1:t,onLevel1:r,onLevel2:s,onLevel3:a,onQuickLoad:c,onNextLevel:d,onFailLevel:m})=>{const v={padding:"1.5cqw",border:"0.1cqw solid",borderRadius:"0.5cqw",display:"flex",flexDirection:"column",gap:"1cqh"},w={padding:"0.5cqw 1cqw",cursor:"pointer",background:"#222",color:"#eee",border:"0.1cqw solid #444",fontSize:"0.8cqw",pointerEvents:"auto"};return Q.jsxs("div",{style:{position:"absolute",inset:0,pointerEvents:"none",containerType:"size",padding:"2cqw"},children:[Q.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#00ff00",fontFamily:"monospace"},children:[Q.jsx("h2",{style:{fontSize:"1.5cqw",margin:0},children:"SYSTEM_DIAGNOSTICS"}),Q.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5cqh",alignItems:"flex-end"},children:[Q.jsxs("div",{style:{display:"flex",gap:"0.5cqw"},children:[Q.jsx("button",{onClick:r,style:{...w,background:"#1b4d1b"},children:"LVL 1"}),Q.jsx("button",{onClick:s,style:{...w,background:"#4d431b"},children:"LVL 2"}),Q.jsx("button",{onClick:a,style:{...w,background:"#4d1b1b"},children:"LVL 3"})]}),Q.jsxs("div",{style:{display:"flex",gap:"0.5cqw"},children:[Q.jsx("button",{onClick:d,style:{...w,borderColor:"#8e44ad",color:"#67ad44"},children:"NEXT_STEP"}),Q.jsx("button",{onClick:m,style:{...w,borderColor:"#8e44ad",color:"#ad4444"},children:"FAIL_STEP"}),Q.jsx("button",{onClick:t,style:{...w,borderColor:"#3498db"},children:"GOTO_G1"}),Q.jsx("button",{onClick:c,style:{...w,borderColor:"#c0392b"},children:"RELOAD"})]})]})]}),Q.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"2cqw",marginTop:"2cqh",pointerEvents:"auto"},children:[Q.jsxs("div",{style:{...v,borderColor:"#00ff00",color:"#00ff00"},children:[Q.jsx("span",{children:"GLOBAL_HP"}),Q.jsx("b",{style:{fontSize:"2cqw"},children:n.hp.toFixed(1)}),Q.jsxs("div",{style:{display:"flex",gap:"0.5cqw"},children:[Q.jsx("button",{onClick:()=>e("MOD_HP",10),style:w,children:"+10"}),Q.jsx("button",{onClick:()=>e("MOD_HP",-10),style:w,children:"-10"})]})]}),Q.jsxs("div",{style:{...v,borderColor:"#3498db",color:"#3498db"},children:[Q.jsx("span",{children:"GLOBAL_ENERGY"}),Q.jsx("b",{style:{fontSize:"2cqw"},children:n.energy}),Q.jsx("button",{onClick:()=>e("MOD_ENERGY",5),style:w,children:"RECHARGE"})]}),Q.jsxs("div",{style:{...v,borderColor:"#f1c40f",color:"#f1c40f"},children:[Q.jsx("span",{children:"LOCAL_SCRAP"}),Q.jsx("b",{style:{fontSize:"2cqw"},children:n.scrap}),Q.jsx("button",{onClick:()=>e("ADD_SCRAP"),style:w,children:"COLLECT"})]})]})]})},Q_={"Level 1":{initialHP:100,initialEnergy:50,initialScrap:0,maxEnergy:100,regenRate:60,manifestPath:"res/manifest.json",bgmKey:"bgm_level1"},"Level 2":{initialHP:80,initialEnergy:30,initialScrap:40,maxEnergy:80,regenRate:90,manifestPath:"res/manifest.json",bgmKey:"bgm_level1"},"Level 3":{initialHP:50,initialEnergy:10,initialScrap:10,maxEnergy:50,regenRate:120,manifestPath:"res/manifest.json",bgmKey:"bgm_level1"}};var Xo=(n=>(n.Level1="Level 1",n.Level2="Level 2",n.Level3="Level 3",n))(Xo||{});const NI=n=>Q_[n]||Q_["Level 1"],FI=({vm:n,controller:e})=>{const[t,r]=it.useState({hp:n.hp,energy:n.energy,scrap:n.scrap}),[s,a]=it.useState({uiOffset:0,glitch:0,pulse:0});it.useEffect(()=>{const m=n.subscribe(()=>{r({hp:n.hp,energy:n.energy,scrap:n.scrap});const v=n.visualEffects;a({uiOffset:v.uiOffset,glitch:v.glitchIntensity,pulse:v.vignettePulse})});return()=>m()},[n]);const c=(Math.random()-.5)*20*s.glitch,d=(Math.random()-.5)*20*s.glitch;return Q.jsx("div",{style:{position:"absolute",inset:0,background:"#000",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:Q.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",maxWidth:"calc(100vh * (16 / 9))",maxHeight:"calc(100vw * (9 / 16))",aspectRatio:"16 / 9",background:"#adadad",overflow:"hidden",transform:`translate(${c}px, ${d}px)`,textShadow:s.glitch>.1?`${s.glitch*5}px 0 #f00, -${s.glitch*5}px 0 #0ff`:"none"},children:[Q.jsx("div",{style:{position:"absolute",inset:0,background:`radial-gradient(circle, transparent 40%, rgba(0,0,0,${.8*s.pulse}))`,pointerEvents:"none",zIndex:1}}),Q.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:"#050505",fontSize:"10cqw",fontWeight:"bold",transform:`translateY(${s.uiOffset}px)`,opacity:.3+s.glitch*.7},children:"LAB_02"}),Q.jsx(LI,{stats:t,onAction:(m,v)=>e.modifyStat(m,v),onJumpG1:e.jumpToGame1,onLevel1:()=>e.loadLevel(Xo.Level1),onLevel2:()=>e.loadLevel(Xo.Level2),onLevel3:()=>e.loadLevel(Xo.Level3),onQuickLoad:()=>e.resetLevel(),onNextLevel:()=>e.nextLevel(),onFailLevel:()=>e.failLevel()})]})})};class BI extends Dy{get hp(){return this.sharedView[lc.HERO_HP_DISPLAY]||0}get energy(){return this.sharedView[lc.ENERGY_DISPLAY]||0}get scrap(){return this.sharedView[lc.SCRAP_DISPLAY]||0}get visualEffects(){return{uiOffset:this.sharedView[lc.UI_BOUNCE]||0,glitchIntensity:this.sharedView[lc.GLITCH_INTENSITY]||0,vignettePulse:this.sharedView[lc.VIGNETTE_PULSE]||0}}}class UI extends Oy{constructor(e){super(e,"Game2")}modifyStat(e,t){this.send(e,{amount:t})}async jumpToGame1(){const{Game1State:e}=await ho(async()=>{const{Game1State:t}=await Promise.resolve().then(()=>yy);return{Game1State:t}},void 0);lr.getInstance().replace(new e(!1))}async loadLevel(e){const{Game2State:t}=await ho(async()=>{const{Game2State:r}=await Promise.resolve().then(()=>qf);return{Game2State:r}},void 0);lr.getInstance().replace(new t(!1,e))}async resetLevel(){await Vo.getInstance().performLoad(this.RESET_SLOT);const{Game2State:e}=await ho(async()=>{const{Game2State:r}=await Promise.resolve().then(()=>qf);return{Game2State:r}},void 0),t=this.vm.currentLevel||Xo.Level1;lr.getInstance().replace(new e(!1,t))}onKeyDown(e){ys.getInstance().isKeyAction(e.key,"PAUSE")&&this.handleEscape()}onWorkerEvent(e){}async handleEscape(){const{PauseMenuState:e}=await ho(async()=>{const{PauseMenuState:t}=await import("./PauseMenuState-BjDlRTfM.js");return{PauseMenuState:t}},[]);lr.getInstance().push(new e)}nextLevel(){Ls.getInstance().completeCurrentStep()}failLevel(){Ls.getInstance().failCurrentStep()}}class mu extends My{constructor(e=!1,t=Xo.Level1){super(e),this.currentLevel=t}name="Game2";logicSchema=DI;viewSchema=lc;viewComponent=FI;getConfig(){return NI(this.currentLevel)}getSessionOverrides(e){const t={},r=e.get(cd.hp);r!==void 0&&(t.initialHP=r);const s=e.get(cd.energy);return s!==void 0&&(t.initialEnergy=s),t}initMVC(){this.vm=new BI,this.controller=new UI(this.vm)}}const qf=Object.freeze(Object.defineProperty({__proto__:null,Game2State:mu},Symbol.toStringTag,{value:"Module"})),Z_={"Level 1":{width:960,height:540,initialHP:100,spawnCount:10,heroStartX:480,heroStartY:270,moveSpeed:5,manifestPath:"res/manifest.json",bgmKey:"bgm_level1",levelLabel:"Level 1"},"Level 2":{width:960,height:540,initialHP:80,spawnCount:20,heroStartX:100,heroStartY:100,moveSpeed:6,manifestPath:"res/manifest.json",bgmKey:"bgm_level1",levelLabel:"Level 2"},"Level 3":{width:960,height:540,initialHP:50,spawnCount:35,heroStartX:800,heroStartY:450,moveSpeed:8,manifestPath:"res/manifest.json",bgmKey:"bgm_level1",levelLabel:"Level 3"}};var wl=(n=>(n.Level1="Level 1",n.Level2="Level 2",n.Level3="Level 3",n))(wl||{});const jI=n=>{const e=Z_[n];return e||(console.warn(`Config for ${n} not found, falling back to Level 1`),Z_["Level 1"])};class GI extends Oy{constructor(e){super(e,"BHTest")}takeDamage(){this.send("TAKE_DAMAGE",{amount:15})}async jumpToGame2(){const{Game2State:e}=await ho(async()=>{const{Game2State:t}=await Promise.resolve().then(()=>qf);return{Game2State:t}},void 0);await lr.getInstance().replace(new e(!1))}async loadLevel(e){const{BHState:t}=await ho(async()=>{const{BHState:r}=await Promise.resolve().then(()=>J_);return{BHState:r}},void 0);await lr.getInstance().replace(new t(!1,e))}async resetLevel(){await Vo.getInstance().performLoad(this.RESET_SLOT);const{BHState:e}=await ho(async()=>{const{BHState:r}=await Promise.resolve().then(()=>J_);return{BHState:r}},void 0),t=this.vm.currentLevel||wl.Level1;await lr.getInstance().replace(new e(!1,t))}onKeyDown(e){ys.getInstance().isKeyAction(e.key,"PAUSE")&&this.openPauseMenu()}onWorkerEvent(e){e==="EXPLOSION_REQ"&&co.getInstance().play("sfx_explosion")}async openPauseMenu(){const{PauseMenuState:e}=await ho(async()=>{const{PauseMenuState:r}=await import("./PauseMenuState-BjDlRTfM.js");return{PauseMenuState:r}},[]),t=lr.getInstance();t.getCurrentStateName()===this.stateName&&await t.push(new e)}}const gs={HERO_X:0,HERO_Y:1,HERO_ROTATION:2,HERO_SCALE:3,HERO_HP_DISPLAY:4,HERO_FRAME:5,ACTIVE_ROCK_COUNT:8,ROCKS_START_INDEX:10,ROCK_STRIDE:8,BUFFER_SIZE:4096};class zI extends Dy{get pos(){return{x:this.sharedView[gs.HERO_X]||0,y:this.sharedView[gs.HERO_Y]||0}}get hp(){return this.sharedView[gs.HERO_HP_DISPLAY]||0}get entityCount(){return Math.floor(this.sharedView[gs.ACTIVE_ROCK_COUNT]||0)}get heroVisuals(){return{x:this.sharedView[gs.HERO_X]||0,y:this.sharedView[gs.HERO_Y]||0,rotation:this.sharedView[gs.HERO_ROTATION]||0,scale:this.sharedView[gs.HERO_SCALE]||1,currentFrame:this.sharedView[gs.HERO_FRAME]||0}}getRockViewData(e){const t=gs.ROCKS_START_INDEX+e*gs.ROCK_STRIDE;return{x:this.sharedView[t]||0,y:this.sharedView[t+1]||0,rotation:this.sharedView[t+2]||0}}getRockAttackData(e){const t=gs.ROCKS_START_INDEX+e*gs.ROCK_STRIDE;return{primedMode:this.sharedView[t+3]||0,startX:this.sharedView[t+4]||0,startY:this.sharedView[t+5]||0,endX:this.sharedView[t+6]||0,endY:this.sharedView[t+7]||0}}}const HI=({w:n,h:e})=>{const t=tn.useApp();return it.useEffect(()=>{t?.renderer&&(t.renderer.resize(n,e),t.view instanceof HTMLCanvasElement&&(t.view.width=n,t.view.height=e))},[t,n,e]),null},VI=({paused:n,w:e,h:t})=>{const r=it.useRef(null),s=it.useRef(0);return it.useEffect(()=>{r.current?.clear().beginFill(16777215).drawRect(0,0,e,t).endFill()},[e,t]),tn.useTick(a=>{if(!r.current||n)return;s.current+=Math.PI/60*a;const c=(Math.sin(s.current)+1)/2,d=Math.round(26+c*4),m=Math.round(26+c*54),v=Math.round(46+c*104);r.current.tint=(d<<16)+(m<<8)+v}),Q.jsx(tn.Graphics,{ref:r})},WI=({vm:n,paused:e})=>{const t=it.useRef(null),r=it.useRef([]),s=El.getInstance();return it.useEffect(()=>()=>{r.current.forEach(a=>{a&&!a.destroyed&&a.destroy()}),r.current=[]},[]),tn.useTick(()=>{if(!t.current)return;const a=n.entityCount,c=r.current;if(a>c.length)for(let d=c.length;d<a;d++){const m=s.getTexture("static_rock");if(m){const v=new po(m);v.anchor.set(.5),v.scale.set(.8),t.current.addChild(v),c.push(v)}}else if(a<c.length)for(let d=c.length-1;d>=a;d--){const m=c.pop();m&&(t.current.removeChild(m),m.destroy())}for(let d=0;d<a;d++){const m=c[d],v=n.getRockViewData(d);if(!v||e){m&&(m.visible=!1);continue}m.visible=!0,m.x=v.x,m.y=v.y,m.rotation=v.rotation}}),Q.jsx(tn.Container,{ref:t})},$I=({vm:n,paused:e})=>{const t=it.useRef(null),r=it.useRef([]);return it.useEffect(()=>()=>{r.current.forEach(s=>{s&&!s.destroyed&&s.destroy()}),r.current=[]},[]),tn.useTick(()=>{if(!t.current)return;const s=n.entityCount,a=r.current;if(s>a.length)for(let c=a.length;c<s;c++){const d=new sh;d.visible=!1,t.current.addChild(d),a.push(d)}else if(s<a.length)for(let c=a.length-1;c>=s;c--){const d=a.pop();d&&(t.current.removeChild(d),d.destroy())}for(let c=0;c<s;c++){const d=a[c],m=n.getRockAttackData(c);if(!m||e){d&&(d.visible=!1);continue}m.primedMode===1?(d.visible=!0,d.clear(),d.lineStyle(30,16711680),d.moveTo(m.startX,m.startY),d.lineTo(m.endX,m.endY)):d.visible=!1}}),Q.jsx(tn.Container,{ref:t})},qI=({vm:n,paused:e,width:t,height:r,scale:s,heroPos:a,hp:c})=>{const d=it.useRef(null),[m,v]=it.useState(n.heroVisuals);return tn.useTick(()=>{const w=n.heroVisuals;d.current&&(d.current.x=w.x,d.current.y=w.y,d.current.rotation=w.rotation,d.current.scale.set(w.scale),a.current.x=w.x,a.current.y=w.y,v(w))}),Q.jsxs(Q.Fragment,{children:[Q.jsx(HI,{w:t,h:r}),Q.jsx(VI,{paused:e,w:t,h:r}),Q.jsxs(tn.Container,{scale:s,children:[Q.jsx($I,{vm:n,paused:e}),Q.jsx(WI,{vm:n,paused:e}),Q.jsx(tn.Container,{ref:d,children:Q.jsx(Ww,{sheetName:"hero_sheet",animationName:"idle",x:0,y:0,scale:1,anchor:.5,currentFrame:m.currentFrame})})]})]})},XI=({hp:n,rockCount:e,shieldBarRef:t,shieldTextRef:r,damageBtnRef:s,onDamage:a,onJumpToG2:c,onLevel1:d,onLevel2:m,onLevel3:v,onResetG1:w})=>{const f={padding:"0.6cqw 1cqw",cursor:"pointer",color:"#fff",border:"none",borderRadius:"0.4cqw",fontWeight:"bold",fontFamily:"monospace",fontSize:"0.8cqw",pointerEvents:"auto",textAlign:"center"};return Q.jsxs("div",{style:{position:"absolute",inset:0,pointerEvents:"none",containerType:"size"},children:[Q.jsxs("div",{style:{position:"absolute",top:"5cqh",left:"50%",transform:"translateX(-50%)",width:"35cqw"},children:[Q.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#fff",marginBottom:"0.5cqh",fontWeight:"bold",fontFamily:"monospace",fontSize:"1.2cqw"},children:[Q.jsx("span",{children:"SHIELD ENERGY"}),Q.jsxs("span",{ref:r,children:[Math.round(n),"%"]})]}),Q.jsx("div",{style:{width:"100%",height:"2cqh",backgroundColor:"#222",borderRadius:"1cqw",border:"0.2cqw solid #fff",overflow:"hidden"},children:Q.jsx("div",{ref:t,style:{width:`${Math.max(0,n)}%`,height:"100%",backgroundColor:n<30?"#c0392b":"#27ae60"}})})]}),Q.jsxs("div",{style:{position:"absolute",top:"3cqh",right:"3cqw",color:"#fff",fontFamily:"monospace",textAlign:"right",fontSize:"1.2cqw"},children:["ROCKS_ACTIVE: ",e]}),Q.jsxs("div",{style:{position:"absolute",top:"3cqh",left:"3cqw",display:"flex",flexDirection:"column",gap:"1cqh"},children:[Q.jsx("button",{ref:s,onClick:a,style:{...f,background:"#333",border:"0.1cqw solid #fff"},children:"TAKE DAMAGE (-15)"}),Q.jsxs("div",{style:{display:"flex",gap:"0.5cqw"},children:[Q.jsx("button",{onClick:d,style:{...f,background:"#408240",flex:1},children:"LVL 1"}),Q.jsx("button",{onClick:m,style:{...f,background:"#C29F19",flex:1},children:"LVL 2"}),Q.jsx("button",{onClick:v,style:{...f,background:"#C21919",flex:1},children:"LVL 3"})]}),Q.jsx("button",{onClick:c,style:{...f,background:"#2980b9"},children:"Go to Game 2"}),Q.jsx("div",{style:{display:"flex",gap:"0.5cqw"},children:Q.jsx("button",{onClick:w,style:{...f,background:"#c0392b",flex:1},children:"Quick Load"})})]})]})},KI=({vm:n,controller:e,width:t=960,height:r=540})=>{const[s,a]=it.useState(n.hp),[c,d]=it.useState(n.entityCount),[m,v]=it.useState(!1),w=it.useRef(null),f=it.useRef(null),y=it.useRef(null),b=it.useRef({x:n.pos.x,y:n.pos.y});it.useEffect(()=>{const R=n.subscribe(()=>{const V=lr.getInstance().getActiveState()?.name!=="BHTest";m!==V&&v(V);const z=n.hp;b.current.x=n.pos.x,b.current.y=n.pos.y,w.current&&(w.current.style.width=`${Math.max(0,z)}%`),f.current&&(f.current.innerText=`${Math.round(z)}%`),Math.abs(s-z)>1&&a(z),c!==n.entityCount&&d(n.entityCount)});return()=>R()},[n,s,c,m]);const T=it.useMemo(()=>t/960,[t]);return Q.jsxs("div",{style:{position:"absolute",inset:0,background:"#000",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:[Q.jsx("div",{style:{position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:Q.jsx(tn.Stage,{width:t,height:r,options:{backgroundColor:0,antialias:!0,resolution:1,autoDensity:!1},style:{display:"block",width:"100%",height:"100%",objectFit:"contain",imageRendering:"pixelated"},children:Q.jsx(qI,{vm:n,paused:m,width:t,height:r,scale:T,heroPos:b,hp:s})},`stage-${t}-${r}`)}),Q.jsx(XI,{hp:s,rockCount:c,shieldBarRef:w,shieldTextRef:f,damageBtnRef:y,onDamage:()=>e.takeDamage(),onJumpToG2:()=>e.jumpToGame2(),onLevel1:()=>e.loadLevel(wl.Level1),onLevel2:()=>e.loadLevel(wl.Level2),onLevel3:()=>e.loadLevel(wl.Level3),onResetG1:()=>e.resetLevel()})]})},YI={HERO_HP:0,HERO_X:1,HERO_Y:2,TICK_COUNT:3,FRAME_COUNT:4,FPS:5,REVISION:6,LAST_HIT_FRAME:7,ENTITY_COUNT:8,ROCKS_START_INDEX:10,ROCK_STRIDE:8,MAX_ROCKS:1e3,BUFFER_SIZE:4096};class If extends My{constructor(e=!1,t=wl.Level1){super(e),this.currentLevel=t}name="BHTest";logicSchema=YI;viewSchema=gs;viewComponent=KI;getConfig(){return jI(this.currentLevel)}getSessionOverrides(e){const t=e.get(cd.hp);return t!==void 0?{initialHP:t}:{}}initMVC(){this.vm=new zI,this.controller=new GI(this.vm)}async init(){ys.getInstance().refreshBindings(this.name),await super.init()}}const J_=Object.freeze(Object.defineProperty({__proto__:null,BHState:If},Symbol.toStringTag,{value:"Module"}));class $w extends ch{constructor(){super(),this.handleKeyDown=this.handleKeyDown.bind(this)}async init(){this.isRendering=!0,window.addEventListener("keydown",this.handleKeyDown,!0)}destroy(){window.removeEventListener("keydown",this.handleKeyDown,!0)}onClose(){lr.getInstance().pop()}handleKeyDown(e){e.key==="Escape"&&(e.stopImmediatePropagation(),e.preventDefault(),this.onClose())}}function QI(n,e,t){var r,s;typeof n=="function"?(r=e||[],s=t):(r=[],s=e);var a=Jr.useRef({hasResult:!1,result:s,error:null}),c=Jr.useReducer(function(v){return v+1},0);c[0];var d=c[1],m=Jr.useMemo(function(){var v=typeof n=="function"?n():n;if(!v||typeof v.subscribe!="function")throw n===v?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!a.current.hasResult&&typeof window<"u"&&(typeof v.hasValue!="function"||v.hasValue()))if(typeof v.getValue=="function")a.current.result=v.getValue(),a.current.hasResult=!0;else{var w=v.subscribe(function(f){a.current.result=f,a.current.hasResult=!0});typeof w=="function"?w():w.unsubscribe()}return v},r);if(Jr.useDebugValue(a.current.result),Jr.useEffect(function(){var v=m.subscribe(function(w){var f=a.current;(f.error!==null||f.result!==w)&&(f.error=null,f.result=w,f.hasResult=!0,d())},function(w){var f=a.current;f.error!==w&&(f.error=w,d())});return typeof v=="function"?v:v.unsubscribe.bind(v)},r),a.current.error)throw a.current.error;return a.current.result}function ZI(n,e,t){return QI(function(){return lh.liveQuery(n)},[],t)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(n){var e=lh.DexieYProvider;e&&e.release(n)});const JI=({activeStateName:n,onSave:e,onLoad:t,onBack:r})=>{const s=ZI(()=>uy.saves.toArray()),a=[1,2,3];return Q.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center"},children:Q.jsxs("div",{style:eP,children:[Q.jsx("h2",{style:{fontSize:"2.5cqw",color:"#0f0",letterSpacing:"0.2cqw"},children:"DATA_STORAGE_INTERFACE"}),Q.jsx("div",{style:{display:"flex",gap:"2cqw"},children:a.map(c=>{const d=s?.find(m=>m.id===c);return Q.jsxs("div",{style:tP,children:[Q.jsxs("div",{style:{color:"#888",fontSize:"0.8cqw"},children:["SLOT_0",c]}),Q.jsx("div",{style:{margin:"1.5cqw 0",height:"4cqw",borderBottom:"1px solid #222"},children:d?Q.jsxs(Q.Fragment,{children:[Q.jsx("div",{style:{color:"#fff",fontSize:"1.1cqw"},children:d.stateName}),Q.jsx("div",{style:{color:"#444",fontSize:"0.7cqw",marginTop:"0.4cqw"},children:new Date(d.timestamp).toLocaleString()})]}):Q.jsx("div",{style:{color:"#333",fontSize:"0.9cqw"},children:"--- EMPTY_SECTOR ---"})}),Q.jsx("button",{onClick:()=>e(c),style:wg("#27ae60"),children:"OVERWRITE"}),d&&Q.jsx("button",{onClick:()=>t(c),style:wg("#2980b9"),children:"RESTORE"})]},c)})}),Q.jsx("button",{onClick:r,style:{...wg("#c0392b"),marginTop:"3cqw",width:"12cqw"},children:"RETURN_TO_SYSTEM"})]})})},eP={position:"relative",width:"100%",height:"100%",maxWidth:"calc(100vh * (16 / 9))",maxHeight:"calc(100vw * (9 / 16))",aspectRatio:"16 / 9",backgroundColor:"rgba(5, 5, 5, 0.95)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:"monospace",zIndex:3e3,containerType:"size"},tP={width:"18cqw",padding:"1.5cqw",border:"1px solid #333",backgroundColor:"#0a0a0a",borderRadius:"0.4cqw",boxShadow:"0 0 1cqw rgba(0,0,0,0.5)"},wg=n=>({width:"100%",padding:"0.8cqw",marginBottom:"0.5cqw",backgroundColor:n,color:"white",border:"none",cursor:"pointer",fontFamily:"monospace",fontWeight:"bold",fontSize:"0.8cqw",borderRadius:"0.2cqw",transition:"filter 0.1s"});class rP extends $w{name="SaveMenu";stateRegistry={Game1:Na,Game2:mu};getView(){const e=lr.getInstance(),t=e.getUnderlyingStateName()||"Unknown";return Jr.createElement(JI,{activeStateName:t,onBack:()=>e.pop(),onSave:async r=>{const s=e.getUnderlyingStateName();s&&await Vo.getInstance().performSave(r,s)},onLoad:async r=>{const s=await Vo.getInstance().performLoad(r),a=this.stateRegistry[s.stateName];if(a){const c=new a(!1);a.loadingConfig,e.pop(),e.replace(c)}}})}}const vf={padding:"0.8cqw 2cqw",cursor:"pointer",border:"1px solid #00ff00",background:"#000",color:"#00ff00",fontWeight:"bold",fontFamily:"monospace"},tc={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1cqw 1.5cqw",borderBottom:"1px solid #1a1a1a"},bg={display:"flex",alignItems:"center",gap:"1.5cqw",minWidth:"20cqw",justifyContent:"flex-end"},Sg={cursor:"pointer",accentColor:"#00ff00",width:"12cqw"},ex={backgroundColor:"#000",color:"#00ff00",border:"1px solid #00ff00",padding:"0.5cqw",fontFamily:"monospace",outline:"none"},nP=({onBack:n,res:e,setRes:t})=>{const r=mn.getInstance(),s=co.getInstance(),a=ys.getInstance(),[c,d]=it.useState("system"),[m,v]=it.useState(!!document.fullscreenElement),[w,f]=it.useState({master:r.get("master_volume")??.5,ost:r.get("ost_volume")??.5,sfx:r.get("sfx_volume")??.5}),[y,b]=it.useState("Shared"),[T,R]=it.useState(null),[k,L]=it.useState({}),V=it.useCallback(()=>{const N=y,te={...Pf[N]},pe=r.get(`bind_${N}`)||{},Me={...te,...pe};L(Me)},[y,r]);it.useEffect(()=>{V()},[V]),it.useEffect(()=>{if(!T)return;const N=te=>{te.preventDefault();const pe=te.key.toUpperCase();a.setBinding(T.action,pe,y,T.slot),R(null),V()};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[T,a,V,y]);const z=(N,te)=>{f(pe=>({...pe,[N]:te})),r.set(`${N}_volume`,te),s.setVolume(N,te)},J=N=>{t?.(N),r.set("resolution",N)},X=async()=>{document.fullscreenElement?document.exitFullscreen&&(await document.exitFullscreen(),v(!1)):(await document.documentElement.requestFullscreen().catch(()=>{}),v(!0))},fe=()=>{a.resetBindings(y),V()};return Q.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1200},children:Q.jsxs("div",{style:{width:"85%",height:"80%",background:"#050505",border:"2px solid #00ff00",padding:"2cqw",display:"flex",flexDirection:"column",color:"#00ff00",fontFamily:"monospace",containerType:"size"},children:[Q.jsxs("div",{style:{display:"flex",gap:"2cqw",borderBottom:"2px solid #00ff00",marginBottom:"1cqw"},children:[Q.jsx("h2",{onClick:()=>d("system"),style:{cursor:"pointer",opacity:c==="system"?1:.4,paddingBottom:"0.5cqw"},children:"[ SYSTEM_CONFIGURATION ]"}),Q.jsx("h2",{onClick:()=>d("controls"),style:{cursor:"pointer",opacity:c==="controls"?1:.4,paddingBottom:"0.5cqw"},children:"[ INPUT_BINDINGS ]"})]}),Q.jsx("div",{style:{flex:1,overflowY:"auto",paddingRight:"1cqw"},children:c==="system"?Q.jsxs(Q.Fragment,{children:[Q.jsxs("div",{style:tc,children:[Q.jsx("span",{children:"MASTER_OUTPUT_LEVEL"}),Q.jsxs("div",{style:bg,children:[Q.jsxs("span",{children:[Math.round(w.master*100),"%"]}),Q.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:w.master,onChange:N=>z("master",parseFloat(N.target.value)),style:Sg})]})]}),Q.jsxs("div",{style:tc,children:[Q.jsx("span",{children:"OST_SEQUENCE_LEVEL"}),Q.jsxs("div",{style:bg,children:[Q.jsxs("span",{children:[Math.round(w.ost*100),"%"]}),Q.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:w.ost,onChange:N=>z("ost",parseFloat(N.target.value)),style:Sg})]})]}),Q.jsxs("div",{style:tc,children:[Q.jsx("span",{children:"SFX_IMPULSE_LEVEL"}),Q.jsxs("div",{style:bg,children:[Q.jsxs("span",{children:[Math.round(w.sfx*100),"%"]}),Q.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:w.sfx,onChange:N=>z("sfx",parseFloat(N.target.value)),style:Sg})]})]}),Q.jsxs("div",{style:tc,children:[Q.jsx("span",{children:"DISPLAY_RESOLUTION"}),Q.jsx("select",{value:e,onChange:N=>J(N.target.value),style:ex,children:["540p","720p","1080p","1440p","4k","fit"].map(N=>Q.jsx("option",{value:N,children:N.toUpperCase()},N))})]}),Q.jsxs("div",{style:tc,children:[Q.jsx("span",{children:"WINDOW_MODE"}),Q.jsx("button",{onClick:X,style:vf,children:m?"[ FULLSCREEN ]":"[ WINDOWED ]"})]})]}):Q.jsxs("div",{children:[Q.jsxs("div",{style:{...tc,borderBottom:"2px solid #333",marginBottom:"1.5cqw"},children:[Q.jsx("span",{style:{color:"#888"},children:"SELECT_REGISTRY_CONTEXT:"}),Q.jsx("select",{value:y,onChange:N=>b(N.target.value),style:{...ex,width:"25cqw"},children:Object.keys(Pf).map(N=>Q.jsx("option",{value:N,children:N.toUpperCase()},N))})]}),Q.jsxs("p",{style:{color:"#888",marginBottom:"1cqw",fontSize:"0.8em"},children:["CONFIGURING: ",y.toUpperCase()]}),Object.entries(k).map(([N,te])=>Q.jsxs("div",{style:tc,children:[Q.jsx("span",{style:{flex:1},children:N.toUpperCase().replace("_"," ")}),Q.jsx("div",{style:{display:"flex",gap:"1cqw"},children:[0,1].map(pe=>{const Me=T?.action===N&&T?.slot===pe;return Q.jsx("button",{onClick:()=>R({action:N,slot:pe}),style:{...vf,width:"12cqw",borderColor:Me?"#fff":"#00ff00",color:Me?"#fff":"#00ff00"},children:Me?"???":`[ ${te[pe]||"---"} ]`},pe)})})]},N))]})}),Q.jsxs("div",{style:{marginTop:"auto",textAlign:"right",paddingTop:"1cqw",borderTop:"1px solid #00ff00",display:"flex",justifyContent:"flex-end",gap:"1cqw"},children:[c==="controls"&&Q.jsxs("button",{onClick:fe,style:{...vf,borderColor:"#ff4444",color:"#ff4444",background:"rgba(255, 0, 0, 0.1)"},children:["RESET_DEFAULTS_[",y.toUpperCase(),"]"]}),Q.jsx("button",{onClick:n,style:{...vf,background:"#111",borderColor:"#444",color:"#888"},children:"EXIT_CONFIG"})]})]})})};class iP extends $w{constructor(e){super(),this.props=e}name="SettingsMenu";getView(){return Jr.createElement(nP,{onBack:()=>this.onClose(),res:this.props?.res,setRes:this.props?.setRes})}}const qw=({isFinished:n,onTransitionComplete:e})=>{const[t,r]=it.useState(1),[s,a]=it.useState("");return it.useEffect(()=>{if(n)return;const c=setInterval(()=>{a(d=>d.length>=3?"":d+".")},400);return()=>clearInterval(c)},[n]),it.useEffect(()=>{if(n){const c=setTimeout(()=>{r(0)},600);return()=>clearTimeout(c)}},[n]),it.useEffect(()=>{if(t===0){const c=setTimeout(e,500);return()=>clearTimeout(c)}},[t,e]),Q.jsx("div",{style:{position:"absolute",inset:0,background:"#000",display:"flex",alignItems:"center",justifyContent:"center"},children:Q.jsx("div",{style:{width:"100%",height:"100%",maxWidth:"calc(100vh * (16 / 9))",maxHeight:"calc(100vw * (9 / 16))",aspectRatio:"16 / 9",backgroundColor:"#000",opacity:t,transition:"opacity 0.5s ease-in-out",display:"flex",alignItems:"center",justifyContent:"center",color:"#00ff00",fontFamily:"monospace",textTransform:"uppercase"},children:Q.jsx("div",{style:{fontSize:"1.5cqw",letterSpacing:"0.2cqw",textAlign:"center"},children:n?Q.jsx("span",{style:{color:"#fff"},children:"Loaded"}):Q.jsxs("span",{children:["Loading",s]})})})})},Di=({label:n,onClick:e,active:t,color:r="#444",subLabel:s})=>Q.jsxs("button",{onClick:e,disabled:!e,style:{padding:"1cqw",backgroundColor:t?"#4f4":e?r:"#222",color:t?"#000":e?"#fff":"#666",border:"0.1cqw solid #555",borderRadius:"0.4cqw",cursor:e?"pointer":"default",fontSize:"0.8cqw",fontWeight:"bold",textAlign:"center",transition:"all 0.1s",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Q.jsx("span",{children:n}),s&&Q.jsx("span",{style:{fontSize:"0.6cqw",fontWeight:"normal",opacity:.8},children:s})]}),Eg=({label:n,value:e,onChange:t})=>Q.jsxs("div",{style:{marginBottom:"1.2cqw"},children:[Q.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.7cqw",color:"#00ff00",marginBottom:"0.4cqw"},children:[Q.jsx("span",{children:n}),Q.jsxs("span",{children:[Math.round(e*100),"%"]})]}),Q.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:e,onChange:r=>t(parseFloat(r.target.value)),style:{width:"100%",cursor:"pointer",accentColor:"#00ff00",height:"0.8cqh"}})]}),sP=({onNavigate:n,res:e,setRes:t})=>{const r=mn.getInstance(),s=co.getInstance(),[a,c]=it.useState({master:r.get("master_volume")??.5,ost:r.get("ost_volume")??.5,sfx:r.get("sfx_volume")??.5}),d=()=>{lr.getInstance().push(new rP)},m=()=>{lr.getInstance().push(new iP({res:e,setRes:t}))},v=(T,R)=>{s.setVolume(T,R),r.set(`${T}_volume`,R),c(k=>({...k,[T]:R}))},w=T=>{t?.(T),r.set("resolution",T)},f=()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()},y=(T,R)=>{r.clearSavableKeys(),r.set("campaign_id",null),r.set("campaign_step_index",0);const k=new T(!1,R),L=T===Na?{view:qw}:{};lr.getInstance().replace(k,L)},b=T=>{Ls.getInstance().startCampaign(T)};return Q.jsx("div",{style:{position:"absolute",inset:0,background:"#000",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:Q.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",maxWidth:"calc(100vh * (16 / 9))",maxHeight:"calc(100vw * (9 / 16))",aspectRatio:"16 / 9",backgroundColor:"#0a0a0a",color:"#00ff00",padding:"2cqw",boxSizing:"border-box",fontFamily:"monospace",border:"0.2cqw solid #333",display:"flex",gap:"2cqw",containerType:"size"},children:[Q.jsxs("div",{style:{flex:2},children:[Q.jsx("h2",{style:{fontSize:"2cqw",letterSpacing:"0.2cqw",borderBottom:"0.1cqw solid #333",paddingBottom:"1cqw",margin:0,display:"flex",justifyContent:"space-between",alignItems:"center"},children:Q.jsx("span",{children:"DEV_SWITCHBOARD_V1"})}),Q.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1.5cqw",marginTop:"2cqw"},children:[Q.jsxs("div",{style:{gridColumn:"span 2",display:"flex",flexDirection:"column",gap:"0.5cqw"},children:[Q.jsx("div",{style:{fontSize:"0.8cqw",color:"#e74c3c",marginBottom:"0.5cqw"},children:"CAMPAIGN_MODES"}),Q.jsxs("div",{style:{display:"flex",gap:"1cqw"},children:[Q.jsx("div",{style:{flex:1},children:Q.jsx(Di,{label:"STORY MODE",subLabel:"Full Progression",onClick:()=>b("story_mode"),color:"#e74c3c"})}),Q.jsx("div",{style:{flex:1},children:Q.jsx(Di,{label:"ARCADE MODE",subLabel:"Quick Action",onClick:()=>b("arcade_mode"),color:"#f39c12"})})]})]}),Q.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5cqw"},children:[Q.jsx("div",{style:{fontSize:"0.8cqw",color:"#888",marginBottom:"0.5cqw"},children:"MODULE: GAME_01"}),Q.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.5cqw"},children:[Q.jsx(Di,{label:"LVL 1",onClick:()=>y(Na,fo.Level1),color:"#27ae60"}),Q.jsx(Di,{label:"LVL 2",onClick:()=>y(Na,fo.Level2),color:"#2980b9"}),Q.jsx(Di,{label:"LVL 3",onClick:()=>y(Na,fo.Level3),color:"#8e44ad"})]})]}),Q.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5cqw"},children:[Q.jsx("div",{style:{fontSize:"0.8cqw",color:"#888",marginBottom:"0.5cqw"},children:"MODULE: GAME_02"}),Q.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.5cqw"},children:[Q.jsx(Di,{label:"LVL 1",onClick:()=>y(mu,Xo.Level1),color:"#c0392b"}),Q.jsx(Di,{label:"LVL 2",onClick:()=>y(mu,Xo.Level2),color:"#d35400"}),Q.jsx(Di,{label:"LVL 3",onClick:()=>y(mu,Xo.Level3),color:"#f39c12"})]})]}),Q.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5cqw"},children:[Q.jsx("div",{style:{fontSize:"0.8cqw",color:"#888",marginBottom:"0.5cqw"},children:"MODULE: Bullet Hell"}),Q.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.5cqw"},children:[Q.jsx(Di,{label:"LVL 1",onClick:()=>y(If,wl.Level1),color:"#8e44ad"}),Q.jsx(Di,{label:"LVL 2",onClick:()=>y(If,wl.Level2),color:"#2980b9"}),Q.jsx(Di,{label:"LVL 3",onClick:()=>y(If,wl.Level3),color:"#27ae60"})]})]}),Q.jsxs("div",{style:{gridColumn:"span 2",marginTop:"1cqw"},children:[Q.jsx("div",{style:{fontSize:"0.8cqw",color:"#888",marginBottom:"0.5cqw"},children:"SYSTEM_NAVIGATION"}),Q.jsx(Di,{label:"OPEN SAVE / LOAD MENU",onClick:d,color:"#d35400"})]})]})]}),Q.jsxs("div",{style:{flex:1,backgroundColor:"#111",padding:"1.5cqw",borderRadius:"0.4cqw",borderLeft:"0.1cqw solid #333",display:"flex",flexDirection:"column"},children:[Q.jsx("h3",{style:{fontSize:"1.2cqw",margin:"0 0 2cqw 0",borderBottom:"0.1cqw solid #333",paddingBottom:"0.5cqw"},children:"GLOBAL_CONFIG"}),Q.jsx(Eg,{label:"MASTER_VOLUME",value:a.master,onChange:T=>v("master",T)}),Q.jsx(Eg,{label:"OST_VOLUME",value:a.ost,onChange:T=>v("ost",T)}),Q.jsx(Eg,{label:"SFX_VOLUME",value:a.sfx,onChange:T=>v("sfx",T)}),Q.jsxs("div",{style:{marginTop:"1cqw",marginBottom:"1.5cqw"},children:[Q.jsx("div",{style:{fontSize:"0.7cqw",color:"#888",marginBottom:"0.6cqw"},children:"DISPLAY_RESOLUTION"}),Q.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.4cqw"},children:["540p","720p","1080p","1440p","4k","fit"].map(T=>Q.jsx(Di,{label:T.toUpperCase(),active:e===T,onClick:()=>w(T)},T))})]}),Q.jsxs("div",{style:{marginBottom:"1.5cqw"},children:[Q.jsx("div",{style:{fontSize:"0.7cqw",color:"#888",marginBottom:"0.6cqw"},children:"WINDOW_MODE"}),Q.jsx(Di,{label:"TOGGLE FULLSCREEN",onClick:f,color:"#b33939"})]}),Q.jsx("div",{style:{marginTop:"0.5cqw"},children:Q.jsx(Di,{label:"[ SETTINGS_PANEL ]",subLabel:"INPUTS & OVERRIDES",onClick:m,color:"#000"})}),Q.jsxs("div",{style:{marginTop:"auto",fontSize:"0.7cqw",color:"#444",lineHeight:"1.4"},children:["PERSISTENCE: ACTIVE",Q.jsx("br",{}),"SETTINGS_SYNC: LOCAL_STORAGE",Q.jsx("br",{}),"ACTIVE_RES: ",e?.toUpperCase()]})]})]})})};class Xw extends ch{name="DevMenu";async init(){this.isRendering=!0}update(e,t){}getView(){return Jr.createElement(sP,{key:this.name,onNavigate:(e,...t)=>{const r=new e(...t);lr.getInstance().replace(r)}})}destroy(){}}class tx{static states=new Map;static register(e,t){this.states.set(e,t)}static get(e){return this.states.get(e)}}class oP extends ch{name="ContinueScreen";async init(){this.isInitialized=!0,this.isRendering=!0,this.isUpdating=!0}update(e,t){}destroy(){}getView(){return Q.jsx(aP,{},"continue-view")}}const aP=()=>{const[n,e]=it.useState(9);it.useEffect(()=>{const s=setInterval(()=>{e(c=>c<=0?(clearInterval(s),r(),0):c-1)},1e3),a=c=>{c.key==="Enter"&&t(),c.key==="Escape"&&r()};return window.addEventListener("keydown",a),()=>{clearInterval(s),window.removeEventListener("keydown",a)}},[]);const t=()=>{Ls.getInstance().retryCurrentStep()},r=()=>{Ls.getInstance().quitCampaign()};return Q.jsxs("div",{style:{width:"100%",height:"100%",background:"#000",color:"#fff",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:"Impact, sans-serif",textTransform:"uppercase"},children:[Q.jsx("h1",{style:{fontSize:"4rem",marginBottom:"20px",letterSpacing:"2px"},children:"CONTINUE?"}),Q.jsx("div",{style:{fontSize:"6rem",color:n<4?"#e74c3c":"#f1c40f",marginBottom:"40px"},children:n}),Q.jsxs("div",{style:{display:"flex",gap:"40px"},children:[Q.jsx("button",{onClick:t,style:{padding:"15px 30px",fontSize:"1.5rem",background:"transparent",border:"3px solid white",color:"white",cursor:"pointer"},children:"YES (ENTER)"}),Q.jsx("button",{onClick:r,style:{padding:"15px 30px",fontSize:"1.5rem",background:"transparent",border:"3px solid #666",color:"#666",cursor:"pointer"},children:"NO (ESC)"})]})]})};class lP extends ch{name="GameOverScreen";async init(){this.isInitialized=!0,this.isRendering=!0}update(e,t){}destroy(){}getView(){return Q.jsx(uP,{},"game-over-view")}}const uP=()=>(it.useEffect(()=>{const n=()=>{Ls.getInstance().quitCampaign()},e=setTimeout(()=>{window.addEventListener("keydown",n),window.addEventListener("click",n)},500);return()=>{clearTimeout(e),window.removeEventListener("keydown",n),window.removeEventListener("click",n)}},[]),Q.jsxs("div",{style:{width:"100%",height:"100%",background:"#000",color:"#e74c3c",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:"monospace"},children:[Q.jsx("h1",{style:{fontSize:"5rem",margin:0},children:"GAME OVER"}),Q.jsx("p",{style:{marginTop:"20px",color:"#666",animation:"blink 1s infinite"},children:"PRESS ANY KEY"}),Q.jsx("style",{children:`
                @keyframes blink { 50% { opacity: 0; } }
            `})]})),cP=()=>{tx.register("Game1",Na),tx.register("Game2",mu)},rx=n=>Q.jsxs("div",{style:{width:"100%",height:"100%",background:"#111",color:"#ccc",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:"monospace"},children:[Q.jsx("h1",{style:{color:"#e74c3c"},children:"MISSION BRIEFING"}),Q.jsx("p",{style:{maxWidth:"60%",textAlign:"center",lineHeight:"1.6"},children:n.message}),n.isFinished&&Q.jsx("button",{onClick:n.onTransitionComplete,style:{marginTop:"20px",padding:"10px 20px",background:"#e74c3c",border:"none",color:"white",cursor:"pointer"},children:"DEPLOY"})]}),hP=[{name:"Prologue: The Awakening",factory:n=>new Na(!1,n),config:fo.Level1,loadingConfig:{view:rx,props:{message:"System initializing. Hostiles detected in Sector 7. Engage immediately."}}},{name:"Chapter 1: The Descent",factory:n=>new Na(!1,n),config:fo.Level2,loadingConfig:{view:rx,props:{message:"Surface cleared. Descending into the sub-levels. Energy signatures rising."}}},{name:"Intermission: Resupply",factory:n=>new mu(!1,n),config:Xo.Level1,loadingConfig:{view:qw,props:{message:"Returning to Base..."}}}],dP=[{name:"Stage 1",factory:n=>new mu(!1,n),config:Xo.Level1,loadingConfig:{props:{message:"Arcade Mode: Stage 1"}}},{name:"Stage 2",factory:n=>new Na(!1,n),config:fo.Level3,loadingConfig:{props:{message:"Arcade Mode: Stage 2"}}}],fP=()=>{Qc.register({id:"story_mode",steps:hP,failFactory:()=>new oP}),Qc.register({id:"arcade_mode",steps:dP,failFactory:()=>new lP})},pP=()=>{const[n,e]=it.useState([]),[t,r]=it.useState(!1),[s,a]=it.useState("fit"),[c,d]=it.useState(1),[m,v]=it.useState(window.devicePixelRatio||1),w=it.useRef(!1);it.useEffect(()=>{const y=lr.getInstance(),b=V=>e([...V]),T=()=>v(window.devicePixelRatio||1),R=window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);R.addEventListener("change",T);const k=V=>{V.key==="F3"&&(V.preventDefault(),r(z=>!z))};window.addEventListener("keydown",k);const L=y.subscribe(b);return w.current||(y.replace(new Xw),cP(),fP(),w.current=!0),()=>{window.removeEventListener("keydown",k),R.removeEventListener("change",T),L()}},[]),it.useEffect(()=>{let y=document.querySelector("link[rel~='icon']");y||(y=document.createElement("link"),y.rel="icon",document.head.appendChild(y)),y.href="res/sprite/icon/icon.png"},[]);const f=it.useMemo(()=>{switch(s){case"540p":return{w:960,h:540};case"720p":return{w:1280,h:720};case"1080p":return{w:1920,h:1080};case"1440p":return{w:2560,h:1440};case"4k":return{w:3840,h:2160};default:return null}},[s]);return Q.jsx("div",{className:"engine-wrapper",style:{width:"100vw",height:"100vh",backgroundColor:"#000",display:"flex",alignItems:"center",justifyContent:"center",overflow:"auto"},children:Q.jsxs("div",{className:"engine-root",style:{width:f?`${f.w/m}px`:"100%",height:f?`${f.h/m}px`:"auto",maxWidth:s==="fit"?"100vw":"none",maxHeight:s==="fit"?"100vh":"none",aspectRatio:"16 / 9",position:"relative",backgroundColor:"#111",imageRendering:"pixelated",containerType:"size",flexShrink:0,margin:"auto"},children:[n.map((y,b)=>Q.jsx("div",{style:{position:"absolute",inset:0,zIndex:b,pointerEvents:b===n.length-1?"auto":"none"},children:it.cloneElement(y,{width:f?.w||960,height:f?.h||540,res:s,setRes:a,uiScale:c,setUiScale:d})},b)),t&&Q.jsx(iC,{})]})})},Kw=document.getElementById("root");if(!Kw)throw new Error("Failed to find the root element.");hu.getInstance().start();P1.createRoot(Kw).render(Q.jsx(Jr.StrictMode,{children:Q.jsx(pP,{})}));export{Xw as D,$w as M,Jr as R,lr as S,iP as a,rP as b,Q as j};
