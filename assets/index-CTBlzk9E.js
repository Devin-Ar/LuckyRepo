(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var Aa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function U0(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var Mp={exports:{}},Lh={},Op={exports:{}},Qt={};var tv;function e1(){if(tv)return Qt;tv=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),d=Symbol.iterator;function y(U){return U===null||typeof U!="object"?null:(U=d&&U[d]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,I={};function k(U,q,le){this.props=U,this.context=q,this.refs=I,this.updater=le||b}k.prototype.isReactComponent={},k.prototype.setState=function(U,q){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,q,"setState")},k.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function N(){}N.prototype=k.prototype;function W(U,q,le){this.props=U,this.context=q,this.refs=I,this.updater=le||b}var j=W.prototype=new N;j.constructor=W,T(j,k.prototype),j.isPureReactComponent=!0;var ee=Array.isArray,X=Object.prototype.hasOwnProperty,de={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function ie(U,q,le){var Te,Oe={},Fe=null,He=null;if(q!=null)for(Te in q.ref!==void 0&&(He=q.ref),q.key!==void 0&&(Fe=""+q.key),q)X.call(q,Te)&&!F.hasOwnProperty(Te)&&(Oe[Te]=q[Te]);var Je=arguments.length-2;if(Je===1)Oe.children=le;else if(1<Je){for(var Re=Array(Je),je=0;je<Je;je++)Re[je]=arguments[je+2];Oe.children=Re}if(U&&U.defaultProps)for(Te in Je=U.defaultProps,Je)Oe[Te]===void 0&&(Oe[Te]=Je[Te]);return{$$typeof:n,type:U,key:Fe,ref:He,props:Oe,_owner:de.current}}function ye(U,q){return{$$typeof:n,type:U.type,key:q,ref:U.ref,props:U.props,_owner:U._owner}}function Ne(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function Ce(U){var q={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(le){return q[le]})}var ge=/\/+/g;function _e(U,q){return typeof U=="object"&&U!==null&&U.key!=null?Ce(""+U.key):q.toString(36)}function xe(U,q,le,Te,Oe){var Fe=typeof U;(Fe==="undefined"||Fe==="boolean")&&(U=null);var He=!1;if(U===null)He=!0;else switch(Fe){case"string":case"number":He=!0;break;case"object":switch(U.$$typeof){case n:case e:He=!0}}if(He)return He=U,Oe=Oe(He),U=Te===""?"."+_e(He,0):Te,ee(Oe)?(le="",U!=null&&(le=U.replace(ge,"$&/")+"/"),xe(Oe,q,le,"",function(je){return je})):Oe!=null&&(Ne(Oe)&&(Oe=ye(Oe,le+(!Oe.key||He&&He.key===Oe.key?"":(""+Oe.key).replace(ge,"$&/")+"/")+U)),q.push(Oe)),1;if(He=0,Te=Te===""?".":Te+":",ee(U))for(var Je=0;Je<U.length;Je++){Fe=U[Je];var Re=Te+_e(Fe,Je);He+=xe(Fe,q,le,Re,Oe)}else if(Re=y(U),typeof Re=="function")for(U=Re.call(U),Je=0;!(Fe=U.next()).done;)Fe=Fe.value,Re=Te+_e(Fe,Je++),He+=xe(Fe,q,le,Re,Oe);else if(Fe==="object")throw q=String(U),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return He}function Ke(U,q,le){if(U==null)return U;var Te=[],Oe=0;return xe(U,Te,"","",function(Fe){return q.call(le,Fe,Oe++)}),Te}function H(U){if(U._status===-1){var q=U._result;q=q(),q.then(function(le){(U._status===0||U._status===-1)&&(U._status=1,U._result=le)},function(le){(U._status===0||U._status===-1)&&(U._status=2,U._result=le)}),U._status===-1&&(U._status=0,U._result=q)}if(U._status===1)return U._result.default;throw U._result}var V={current:null},D={transition:null},K={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:D,ReactCurrentOwner:de};function G(){throw Error("act(...) is not supported in production builds of React.")}return Qt.Children={map:Ke,forEach:function(U,q,le){Ke(U,function(){q.apply(this,arguments)},le)},count:function(U){var q=0;return Ke(U,function(){q++}),q},toArray:function(U){return Ke(U,function(q){return q})||[]},only:function(U){if(!Ne(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Qt.Component=k,Qt.Fragment=t,Qt.Profiler=s,Qt.PureComponent=W,Qt.StrictMode=r,Qt.Suspense=m,Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,Qt.act=G,Qt.cloneElement=function(U,q,le){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Te=T({},U.props),Oe=U.key,Fe=U.ref,He=U._owner;if(q!=null){if(q.ref!==void 0&&(Fe=q.ref,He=de.current),q.key!==void 0&&(Oe=""+q.key),U.type&&U.type.defaultProps)var Je=U.type.defaultProps;for(Re in q)X.call(q,Re)&&!F.hasOwnProperty(Re)&&(Te[Re]=q[Re]===void 0&&Je!==void 0?Je[Re]:q[Re])}var Re=arguments.length-2;if(Re===1)Te.children=le;else if(1<Re){Je=Array(Re);for(var je=0;je<Re;je++)Je[je]=arguments[je+2];Te.children=Je}return{$$typeof:n,type:U.type,key:Oe,ref:Fe,props:Te,_owner:He}},Qt.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},Qt.createElement=ie,Qt.createFactory=function(U){var q=ie.bind(null,U);return q.type=U,q},Qt.createRef=function(){return{current:null}},Qt.forwardRef=function(U){return{$$typeof:f,render:U}},Qt.isValidElement=Ne,Qt.lazy=function(U){return{$$typeof:w,_payload:{_status:-1,_result:U},_init:H}},Qt.memo=function(U,q){return{$$typeof:_,type:U,compare:q===void 0?null:q}},Qt.startTransition=function(U){var q=D.transition;D.transition={};try{U()}finally{D.transition=q}},Qt.unstable_act=G,Qt.useCallback=function(U,q){return V.current.useCallback(U,q)},Qt.useContext=function(U){return V.current.useContext(U)},Qt.useDebugValue=function(){},Qt.useDeferredValue=function(U){return V.current.useDeferredValue(U)},Qt.useEffect=function(U,q){return V.current.useEffect(U,q)},Qt.useId=function(){return V.current.useId()},Qt.useImperativeHandle=function(U,q,le){return V.current.useImperativeHandle(U,q,le)},Qt.useInsertionEffect=function(U,q){return V.current.useInsertionEffect(U,q)},Qt.useLayoutEffect=function(U,q){return V.current.useLayoutEffect(U,q)},Qt.useMemo=function(U,q){return V.current.useMemo(U,q)},Qt.useReducer=function(U,q,le){return V.current.useReducer(U,q,le)},Qt.useRef=function(U){return V.current.useRef(U)},Qt.useState=function(U){return V.current.useState(U)},Qt.useSyncExternalStore=function(U,q,le){return V.current.useSyncExternalStore(U,q,le)},Qt.useTransition=function(){return V.current.useTransition()},Qt.version="18.3.1",Qt}var rv;function ly(){return rv||(rv=1,Op.exports=e1()),Op.exports}var nv;function t1(){if(nv)return Lh;nv=1;var n=ly(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(f,m,_){var w,d={},y=null,b=null;_!==void 0&&(y=""+_),m.key!==void 0&&(y=""+m.key),m.ref!==void 0&&(b=m.ref);for(w in m)r.call(m,w)&&!a.hasOwnProperty(w)&&(d[w]=m[w]);if(f&&f.defaultProps)for(w in m=f.defaultProps,m)d[w]===void 0&&(d[w]=m[w]);return{$$typeof:e,type:f,key:y,ref:b,props:d,_owner:s.current}}return Lh.Fragment=t,Lh.jsx=c,Lh.jsxs=c,Lh}var iv;function r1(){return iv||(iv=1,Mp.exports=t1()),Mp.exports}var ke=r1(),It=ly();const mn=nh(It);var Fd={},Dp={exports:{}},fs={},Np={exports:{}},Lp={};var sv;function n1(){return sv||(sv=1,(function(n){function e(D,K){var G=D.length;D.push(K);e:for(;0<G;){var U=G-1>>>1,q=D[U];if(0<s(q,K))D[U]=K,D[G]=q,G=U;else break e}}function t(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var K=D[0],G=D.pop();if(G!==K){D[0]=G;e:for(var U=0,q=D.length,le=q>>>1;U<le;){var Te=2*(U+1)-1,Oe=D[Te],Fe=Te+1,He=D[Fe];if(0>s(Oe,G))Fe<q&&0>s(He,Oe)?(D[U]=He,D[Fe]=G,U=Fe):(D[U]=Oe,D[Te]=G,U=Te);else if(Fe<q&&0>s(He,G))D[U]=He,D[Fe]=G,U=Fe;else break e}}return K}function s(D,K){var G=D.sortIndex-K.sortIndex;return G!==0?G:D.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],_=[],w=1,d=null,y=3,b=!1,T=!1,I=!1,k=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(D){for(var K=t(_);K!==null;){if(K.callback===null)r(_);else if(K.startTime<=D)r(_),K.sortIndex=K.expirationTime,e(m,K);else break;K=t(_)}}function ee(D){if(I=!1,j(D),!T)if(t(m)!==null)T=!0,H(X);else{var K=t(_);K!==null&&V(ee,K.startTime-D)}}function X(D,K){T=!1,I&&(I=!1,N(ie),ie=-1),b=!0;var G=y;try{for(j(K),d=t(m);d!==null&&(!(d.expirationTime>K)||D&&!Ce());){var U=d.callback;if(typeof U=="function"){d.callback=null,y=d.priorityLevel;var q=U(d.expirationTime<=K);K=n.unstable_now(),typeof q=="function"?d.callback=q:d===t(m)&&r(m),j(K)}else r(m);d=t(m)}if(d!==null)var le=!0;else{var Te=t(_);Te!==null&&V(ee,Te.startTime-K),le=!1}return le}finally{d=null,y=G,b=!1}}var de=!1,F=null,ie=-1,ye=5,Ne=-1;function Ce(){return!(n.unstable_now()-Ne<ye)}function ge(){if(F!==null){var D=n.unstable_now();Ne=D;var K=!0;try{K=F(!0,D)}finally{K?_e():(de=!1,F=null)}}else de=!1}var _e;if(typeof W=="function")_e=function(){W(ge)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,Ke=xe.port2;xe.port1.onmessage=ge,_e=function(){Ke.postMessage(null)}}else _e=function(){k(ge,0)};function H(D){F=D,de||(de=!0,_e())}function V(D,K){ie=k(function(){D(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){T||b||(T=!0,H(X))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ye=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(D){switch(y){case 1:case 2:case 3:var K=3;break;default:K=y}var G=y;y=K;try{return D()}finally{y=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,K){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var G=y;y=D;try{return K()}finally{y=G}},n.unstable_scheduleCallback=function(D,K,G){var U=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?U+G:U):G=U,D){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=G+q,D={id:w++,callback:K,priorityLevel:D,startTime:G,expirationTime:q,sortIndex:-1},G>U?(D.sortIndex=G,e(_,D),t(m)===null&&D===t(_)&&(I?(N(ie),ie=-1):I=!0,V(ee,G-U))):(D.sortIndex=q,e(m,D),T||b||(T=!0,H(X))),D},n.unstable_shouldYield=Ce,n.unstable_wrapCallback=function(D){var K=y;return function(){var G=y;y=K;try{return D.apply(this,arguments)}finally{y=G}}}})(Lp)),Lp}var ov;function i1(){return ov||(ov=1,Np.exports=n1()),Np.exports}var av;function s1(){if(av)return fs;av=1;var n=ly(),e=i1();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,h=1;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){c(i,o),c(i+"Capture",o)}function c(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},d={};function y(i){return m.call(d,i)?!0:m.call(w,i)?!1:_.test(i)?d[i]=!0:(w[i]=!0,!1)}function b(i,o,h,g){if(h!==null&&h.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function T(i,o,h,g){if(o===null||typeof o>"u"||b(i,o,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function I(i,o,h,g,S,P,B){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=g,this.attributeNamespace=S,this.mustUseProperty=h,this.propertyName=i,this.type=o,this.sanitizeURL=P,this.removeEmptyString=B}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){k[i]=new I(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];k[o]=new I(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){k[i]=new I(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){k[i]=new I(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){k[i]=new I(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){k[i]=new I(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){k[i]=new I(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){k[i]=new I(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){k[i]=new I(i,5,!1,i.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function W(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(N,W);k[o]=new I(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(N,W);k[o]=new I(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(N,W);k[o]=new I(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){k[i]=new I(i,1,!1,i.toLowerCase(),null,!1,!1)}),k.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){k[i]=new I(i,1,!1,i.toLowerCase(),null,!0,!0)});function j(i,o,h,g){var S=k.hasOwnProperty(o)?k[o]:null;(S!==null?S.type!==0:g||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(T(o,h,S,g)&&(h=null),g||S===null?y(o)&&(h===null?i.removeAttribute(o):i.setAttribute(o,""+h)):S.mustUseProperty?i[S.propertyName]=h===null?S.type===3?!1:"":h:(o=S.attributeName,g=S.attributeNamespace,h===null?i.removeAttribute(o):(S=S.type,h=S===3||S===4&&h===!0?"":""+h,g?i.setAttributeNS(g,o,h):i.setAttribute(o,h))))}var ee=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),de=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),ye=Symbol.for("react.profiler"),Ne=Symbol.for("react.provider"),Ce=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),_e=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),Ke=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),V=Symbol.for("react.offscreen"),D=Symbol.iterator;function K(i){return i===null||typeof i!="object"?null:(i=D&&i[D]||i["@@iterator"],typeof i=="function"?i:null)}var G=Object.assign,U;function q(i){if(U===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);U=o&&o[1]||""}return`
`+U+i}var le=!1;function Te(i,o){if(!i||le)return"";le=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Pe){var g=Pe}Reflect.construct(i,[],o)}else{try{o.call()}catch(Pe){g=Pe}i.call(o.prototype)}else{try{throw Error()}catch(Pe){g=Pe}i()}}catch(Pe){if(Pe&&g&&typeof Pe.stack=="string"){for(var S=Pe.stack.split(`
`),P=g.stack.split(`
`),B=S.length-1,Q=P.length-1;1<=B&&0<=Q&&S[B]!==P[Q];)Q--;for(;1<=B&&0<=Q;B--,Q--)if(S[B]!==P[Q]){if(B!==1||Q!==1)do if(B--,Q--,0>Q||S[B]!==P[Q]){var ae=`
`+S[B].replace(" at new "," at ");return i.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",i.displayName)),ae}while(1<=B&&0<=Q);break}}}finally{le=!1,Error.prepareStackTrace=h}return(i=i?i.displayName||i.name:"")?q(i):""}function Oe(i){switch(i.tag){case 5:return q(i.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return i=Te(i.type,!1),i;case 11:return i=Te(i.type.render,!1),i;case 1:return i=Te(i.type,!0),i;default:return""}}function Fe(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case F:return"Fragment";case de:return"Portal";case ye:return"Profiler";case ie:return"StrictMode";case _e:return"Suspense";case xe:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Ce:return(i.displayName||"Context")+".Consumer";case Ne:return(i._context.displayName||"Context")+".Provider";case ge:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ke:return o=i.displayName||null,o!==null?o:Fe(i.type)||"Memo";case H:o=i._payload,i=i._init;try{return Fe(i(o))}catch{}}return null}function He(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fe(o);case 8:return o===ie?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Je(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Re(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function je(i){var o=Re(i)?"checked":"value",h=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),g=""+i[o];if(!i.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var S=h.get,P=h.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return S.call(this)},set:function(B){g=""+B,P.call(this,B)}}),Object.defineProperty(i,o,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(B){g=""+B},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function ot(i){i._valueTracker||(i._valueTracker=je(i))}function et(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var h=o.getValue(),g="";return i&&(g=Re(i)?i.checked?"true":"false":i.value),i=g,i!==h?(o.setValue(i),!0):!1}function gt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ut(i,o){var h=o.checked;return G({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??i._wrapperState.initialChecked})}function dt(i,o){var h=o.defaultValue==null?"":o.defaultValue,g=o.checked!=null?o.checked:o.defaultChecked;h=Je(o.value!=null?o.value:h),i._wrapperState={initialChecked:g,initialValue:h,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function vt(i,o){o=o.checked,o!=null&&j(i,"checked",o,!1)}function pr(i,o){vt(i,o);var h=Je(o.value),g=o.type;if(h!=null)g==="number"?(h===0&&i.value===""||i.value!=h)&&(i.value=""+h):i.value!==""+h&&(i.value=""+h);else if(g==="submit"||g==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Ni(i,o.type,h):o.hasOwnProperty("defaultValue")&&Ni(i,o.type,Je(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Tr(i,o,h){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var g=o.type;if(!(g!=="submit"&&g!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,h||o===i.value||(i.value=o),i.defaultValue=o}h=i.name,h!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,h!==""&&(i.name=h)}function Ni(i,o,h){(o!=="number"||gt(i.ownerDocument)!==i)&&(h==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+h&&(i.defaultValue=""+h))}var Dr=Array.isArray;function cr(i,o,h,g){if(i=i.options,o){o={};for(var S=0;S<h.length;S++)o["$"+h[S]]=!0;for(h=0;h<i.length;h++)S=o.hasOwnProperty("$"+i[h].value),i[h].selected!==S&&(i[h].selected=S),S&&g&&(i[h].defaultSelected=!0)}else{for(h=""+Je(h),o=null,S=0;S<i.length;S++){if(i[S].value===h){i[S].selected=!0,g&&(i[S].defaultSelected=!0);return}o!==null||i[S].disabled||(o=i[S])}o!==null&&(o.selected=!0)}}function yi(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return G({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function zn(i,o){var h=o.value;if(h==null){if(h=o.children,o=o.defaultValue,h!=null){if(o!=null)throw Error(t(92));if(Dr(h)){if(1<h.length)throw Error(t(93));h=h[0]}o=h}o==null&&(o=""),h=o}i._wrapperState={initialValue:Je(h)}}function In(i,o){var h=Je(o.value),g=Je(o.defaultValue);h!=null&&(h=""+h,h!==i.value&&(i.value=h),o.defaultValue==null&&i.defaultValue!==h&&(i.defaultValue=h)),g!=null&&(i.defaultValue=""+g)}function Ms(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Li(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zn(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Li(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Os,Jn=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,h,g,S){MSApp.execUnsafeLocalFunction(function(){return i(o,h,g,S)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Os=Os||document.createElement("div"),Os.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Os.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function vi(i,o){if(o){var h=i.firstChild;if(h&&h===i.lastChild&&h.nodeType===3){h.nodeValue=o;return}}i.textContent=o}var _i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gs=["Webkit","ms","Moz","O"];Object.keys(_i).forEach(function(i){gs.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),_i[o]=_i[i]})});function oo(i,o,h){return o==null||typeof o=="boolean"||o===""?"":h||typeof o!="number"||o===0||_i.hasOwnProperty(i)&&_i[i]?(""+o).trim():o+"px"}function Ds(i,o){i=i.style;for(var h in o)if(o.hasOwnProperty(h)){var g=h.indexOf("--")===0,S=oo(h,o[h],g);h==="float"&&(h="cssFloat"),g?i.setProperty(h,S):i[h]=S}}var Hn=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function te(i,o){if(o){if(Hn[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Ae(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bt=null;function Zt(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ze=null,Rt=null,gn=null;function ei(i){if(i=Ll(i)){if(typeof ze!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Fl(o),ze(i.stateNode,i.type,o))}}function Wr(i){Rt?gn?gn.push(i):gn=[i]:Rt=i}function Rn(){if(Rt){var i=Rt,o=gn;if(gn=Rt=null,ei(i),o)for(i=0;i<o.length;i++)ei(o[i])}}function Vo(i,o){return i(o)}function xi(){}var Rr=!1;function wi(i,o,h){if(Rr)return i(o,h);Rr=!0;try{return Vo(i,o,h)}finally{Rr=!1,(Rt!==null||gn!==null)&&(xi(),Rn())}}function Fi(i,o){var h=i.stateNode;if(h===null)return null;var g=Fl(h);if(g===null)return null;h=g[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(i=i.type,g=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!g;break e;default:i=!1}if(i)return null;if(h&&typeof h!="function")throw Error(t(231,o,typeof h));return h}var ys=!1;if(f)try{var Kt={};Object.defineProperty(Kt,"passive",{get:function(){ys=!0}}),window.addEventListener("test",Kt,Kt),window.removeEventListener("test",Kt,Kt)}catch{ys=!1}function wr(i,o,h,g,S,P,B,Q,ae){var Pe=Array.prototype.slice.call(arguments,3);try{o.apply(h,Pe)}catch($e){this.onError($e)}}var ti=!1,bi=null,Si=!1,ri=null,xl={onError:function(i){ti=!0,bi=i}};function ni(i,o,h,g,S,P,B,Q,ae){ti=!1,bi=null,wr.apply(xl,arguments)}function vs(i,o,h,g,S,P,B,Q,ae){if(ni.apply(this,arguments),ti){if(ti){var Pe=bi;ti=!1,bi=null}else throw Error(t(198));Si||(Si=!0,ri=Pe)}}function $r(i){var o=i,h=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(h=o.return),i=o.return;while(i)}return o.tag===3?h:null}function Ns(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function wl(i){if($r(i)!==i)throw Error(t(188))}function ii(i){var o=i.alternate;if(!o){if(o=$r(i),o===null)throw Error(t(188));return o!==i?null:i}for(var h=i,g=o;;){var S=h.return;if(S===null)break;var P=S.alternate;if(P===null){if(g=S.return,g!==null){h=g;continue}break}if(S.child===P.child){for(P=S.child;P;){if(P===h)return wl(S),i;if(P===g)return wl(S),o;P=P.sibling}throw Error(t(188))}if(h.return!==g.return)h=S,g=P;else{for(var B=!1,Q=S.child;Q;){if(Q===h){B=!0,h=S,g=P;break}if(Q===g){B=!0,g=S,h=P;break}Q=Q.sibling}if(!B){for(Q=P.child;Q;){if(Q===h){B=!0,h=P,g=S;break}if(Q===g){B=!0,g=P,h=S;break}Q=Q.sibling}if(!B)throw Error(t(189))}}if(h.alternate!==g)throw Error(t(190))}if(h.tag!==3)throw Error(t(188));return h.stateNode.current===h?i:o}function Bi(i){return i=ii(i),i!==null?Vn(i):null}function Vn(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Vn(i);if(o!==null)return o;i=i.sibling}return null}var La=e.unstable_scheduleCallback,ao=e.unstable_cancelCallback,kr=e.unstable_shouldYield,lo=e.unstable_requestPaint,rr=e.unstable_now,Wo=e.unstable_getCurrentPriorityLevel,Ui=e.unstable_ImmediatePriority,uo=e.unstable_UserBlockingPriority,$o=e.unstable_NormalPriority,Fa=e.unstable_LowPriority,Wn=e.unstable_IdlePriority,si=null,$t=null;function hr(i){if($t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(si,i,void 0,(i.current.flags&128)===128)}catch{}}var Pt=Math.clz32?Math.clz32:Gi,tn=Math.log,wn=Math.LN2;function Gi(i){return i>>>=0,i===0?32:31-(tn(i)/wn|0)|0}var $n=64,rn=4194304;function Ls(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Xo(i,o){var h=i.pendingLanes;if(h===0)return 0;var g=0,S=i.suspendedLanes,P=i.pingedLanes,B=h&268435455;if(B!==0){var Q=B&~S;Q!==0?g=Ls(Q):(P&=B,P!==0&&(g=Ls(P)))}else B=h&~S,B!==0?g=Ls(B):P!==0&&(g=Ls(P));if(g===0)return 0;if(o!==0&&o!==g&&(o&S)===0&&(S=g&-g,P=o&-o,S>=P||S===16&&(P&4194240)!==0))return o;if((g&4)!==0&&(g|=h&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=g;0<o;)h=31-Pt(o),S=1<<h,g|=i[h],o&=~S;return g}function dr(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fs(i,o){for(var h=i.suspendedLanes,g=i.pingedLanes,S=i.expirationTimes,P=i.pendingLanes;0<P;){var B=31-Pt(P),Q=1<<B,ae=S[B];ae===-1?((Q&h)===0||(Q&g)!==0)&&(S[B]=dr(Q,o)):ae<=o&&(i.expiredLanes|=Q),P&=~Q}}function Bs(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function nn(){var i=$n;return $n<<=1,($n&4194240)===0&&($n=64),i}function Ba(i){for(var o=[],h=0;31>h;h++)o.push(i);return o}function co(i,o,h){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Pt(o),i[o]=h}function qo(i,o){var h=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var g=i.eventTimes;for(i=i.expirationTimes;0<h;){var S=31-Pt(h),P=1<<S;o[S]=0,g[S]=-1,i[S]=-1,h&=~P}}function Ko(i,o){var h=i.entangledLanes|=o;for(i=i.entanglements;h;){var g=31-Pt(h),S=1<<g;S&o|i[g]&o&&(i[g]|=o),h&=~S}}var Xt=0;function Yo(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var hc,qt,bl,Sl,Qo,sn=!1,Gt=[],oi=null,on=null,ji=null,Zo=new Map,Ar=new Map,Yt=[],ho="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jo(i,o){switch(i){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":on=null;break;case"mouseover":case"mouseout":ji=null;break;case"pointerover":case"pointerout":Zo.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ar.delete(o.pointerId)}}function Us(i,o,h,g,S,P){return i===null||i.nativeEvent!==P?(i={blockedOn:o,domEventName:h,eventSystemFlags:g,nativeEvent:P,targetContainers:[S]},o!==null&&(o=Ll(o),o!==null&&qt(o)),i):(i.eventSystemFlags|=g,o=i.targetContainers,S!==null&&o.indexOf(S)===-1&&o.push(S),i)}function Gs(i,o,h,g,S){switch(o){case"focusin":return oi=Us(oi,i,o,h,g,S),!0;case"dragenter":return on=Us(on,i,o,h,g,S),!0;case"mouseover":return ji=Us(ji,i,o,h,g,S),!0;case"pointerover":var P=S.pointerId;return Zo.set(P,Us(Zo.get(P)||null,i,o,h,g,S)),!0;case"gotpointercapture":return P=S.pointerId,Ar.set(P,Us(Ar.get(P)||null,i,o,h,g,S)),!0}return!1}function Ua(i){var o=ha(i.target);if(o!==null){var h=$r(o);if(h!==null){if(o=h.tag,o===13){if(o=Ns(h),o!==null){i.blockedOn=o,Qo(i.priority,function(){bl(h)});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){i.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Cr(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var h=an(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(h===null){h=i.nativeEvent;var g=new h.constructor(h.type,h);Bt=g,h.target.dispatchEvent(g),Bt=null}else return o=Ll(h),o!==null&&qt(o),i.blockedOn=h,!1;o.shift()}return!0}function kn(i,o,h){Cr(i)&&h.delete(o)}function zi(){sn=!1,oi!==null&&Cr(oi)&&(oi=null),on!==null&&Cr(on)&&(on=null),ji!==null&&Cr(ji)&&(ji=null),Zo.forEach(kn),Ar.forEach(kn)}function Hi(i,o){i.blockedOn===o&&(i.blockedOn=null,sn||(sn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,zi)))}function Ei(i){function o(S){return Hi(S,i)}if(0<Gt.length){Hi(Gt[0],i);for(var h=1;h<Gt.length;h++){var g=Gt[h];g.blockedOn===i&&(g.blockedOn=null)}}for(oi!==null&&Hi(oi,i),on!==null&&Hi(on,i),ji!==null&&Hi(ji,i),Zo.forEach(o),Ar.forEach(o),h=0;h<Yt.length;h++)g=Yt[h],g.blockedOn===i&&(g.blockedOn=null);for(;0<Yt.length&&(h=Yt[0],h.blockedOn===null);)Ua(h),h.blockedOn===null&&Yt.shift()}var _s=ee.ReactCurrentBatchConfig,Mn=!0;function ea(i,o,h,g){var S=Xt,P=_s.transition;_s.transition=null;try{Xt=1,ta(i,o,h,g)}finally{Xt=S,_s.transition=P}}function Vi(i,o,h,g){var S=Xt,P=_s.transition;_s.transition=null;try{Xt=4,ta(i,o,h,g)}finally{Xt=S,_s.transition=P}}function ta(i,o,h,g){if(Mn){var S=an(i,o,h,g);if(S===null)yc(i,o,g,fo,h),Jo(i,g);else if(Gs(S,i,o,h,g))g.stopPropagation();else if(Jo(i,g),o&4&&-1<ho.indexOf(i)){for(;S!==null;){var P=Ll(S);if(P!==null&&hc(P),P=an(i,o,h,g),P===null&&yc(i,o,g,fo,h),P===S)break;S=P}S!==null&&g.stopPropagation()}else yc(i,o,g,null,h)}}var fo=null;function an(i,o,h,g){if(fo=null,i=Zt(g),i=ha(i),i!==null)if(o=$r(i),o===null)i=null;else if(h=o.tag,h===13){if(i=Ns(o),i!==null)return i;i=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return fo=i,null}function yn(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wo()){case Ui:return 1;case uo:return 4;case $o:case Fa:return 16;case Wn:return 536870912;default:return 16}default:return 16}}var vn=null,ai=null,li=null;function js(){if(li)return li;var i,o=ai,h=o.length,g,S="value"in vn?vn.value:vn.textContent,P=S.length;for(i=0;i<h&&o[i]===S[i];i++);var B=h-i;for(g=1;g<=B&&o[h-g]===S[P-g];g++);return li=S.slice(i,1<g?1-g:void 0)}function po(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function zs(){return!0}function Ga(){return!1}function ar(i){function o(h,g,S,P,B){this._reactName=h,this._targetInst=S,this.type=g,this.nativeEvent=P,this.target=B,this.currentTarget=null;for(var Q in i)i.hasOwnProperty(Q)&&(h=i[Q],this[Q]=h?h(P):P[Q]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?zs:Ga,this.isPropagationStopped=Ga,this}return G(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=zs)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=zs)},persist:function(){},isPersistent:zs}),o}var Nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nr=ar(Nr),Wi=G({},Nr,{view:0,detail:0}),Ti=ar(Wi),xs,ra,ws,Hs=G({},Wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aa,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ws&&(ws&&i.type==="mousemove"?(xs=i.screenX-ws.screenX,ra=i.screenY-ws.screenY):ra=xs=0,ws=i),xs)},movementY:function(i){return"movementY"in i?i.movementY:ra}}),ja=ar(Hs),jr=G({},Hs,{dataTransfer:0}),na=ar(jr),$i=G({},Wi,{relatedTarget:0}),ia=ar($i),El=G({},Nr,{animationName:0,elapsedTime:0,pseudoElement:0}),za=ar(El),dc=G({},Nr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),On=ar(dc),sa=G({},Nr,{data:0}),Ai=ar(sa),Vs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ha={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tl(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=oa[i])?!!o[i]:!1}function aa(){return Tl}var vu=G({},Wi,{key:function(i){if(i.key){var o=Vs[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=po(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ha[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aa,charCode:function(i){return i.type==="keypress"?po(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?po(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ws=ar(vu),bn=G({},Hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$s=ar(bn),Va=G({},Wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aa}),Al=ar(Va),Xi=G({},Nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),bs=ar(Xi),_u=G({},Hs,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),xu=ar(_u),qi=[9,13,27,32],Ki=f&&"CompositionEvent"in window,Ss=null;f&&"documentMode"in document&&(Ss=document.documentMode);var Cl=f&&"TextEvent"in window&&!Ss,la=f&&(!Ki||Ss&&8<Ss&&11>=Ss),Pl=" ",wu=!1;function Il(i,o){switch(i){case"keyup":return qi.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wa(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Yi=!1;function Qi(i,o){switch(i){case"compositionend":return Wa(o);case"keypress":return o.which!==32?null:(wu=!0,Pl);case"textInput":return i=o.data,i===Pl&&wu?null:i;default:return null}}function Pr(i,o){if(Yi)return i==="compositionend"||!Ki&&Il(i,o)?(i=js(),li=ai=vn=null,Yi=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return la&&o.locale!=="ko"?null:o.data;default:return null}}var ua={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ln(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!ua[i.type]:o==="textarea"}function $a(i,o,h,g){Wr(g),o=Su(o,"onChange"),0<o.length&&(h=new nr("onChange","change",null,h,g),i.push({event:h,listeners:o}))}var Xs=null,mo=null;function ui(i){pc(i,0)}function go(i){var o=qa(i);if(et(o))return i}function Zi(i,o){if(i==="change")return o}var Lr=!1;if(f){var qs;if(f){var p="oninput"in document;if(!p){var x=document.createElement("div");x.setAttribute("oninput","return;"),p=typeof x.oninput=="function"}qs=p}else qs=!1;Lr=qs&&(!document.documentMode||9<document.documentMode)}function A(){Xs&&(Xs.detachEvent("onpropertychange",R),mo=Xs=null)}function R(i){if(i.propertyName==="value"&&go(mo)){var o=[];$a(o,mo,i,Zt(i)),wi(ui,o)}}function O(i,o,h){i==="focusin"?(A(),Xs=o,mo=h,Xs.attachEvent("onpropertychange",R)):i==="focusout"&&A()}function L(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return go(mo)}function z(i,o){if(i==="click")return go(o)}function Y(i,o){if(i==="input"||i==="change")return go(o)}function ne(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var re=typeof Object.is=="function"?Object.is:ne;function he(i,o){if(re(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var h=Object.keys(i),g=Object.keys(o);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var S=h[g];if(!m.call(o,S)||!re(i[S],o[S]))return!1}return!0}function Z(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function fe(i,o){var h=Z(i);i=0;for(var g;h;){if(h.nodeType===3){if(g=i+h.textContent.length,i<=o&&g>=o)return{node:h,offset:o-i};i=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Z(h)}}function J(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?J(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function oe(){for(var i=window,o=gt();o instanceof i.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)i=o.contentWindow;else break;o=gt(i.document)}return o}function se(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function me(i){var o=oe(),h=i.focusedElem,g=i.selectionRange;if(o!==h&&h&&h.ownerDocument&&J(h.ownerDocument.documentElement,h)){if(g!==null&&se(h)){if(o=g.start,i=g.end,i===void 0&&(i=o),"selectionStart"in h)h.selectionStart=o,h.selectionEnd=Math.min(i,h.value.length);else if(i=(o=h.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var S=h.textContent.length,P=Math.min(g.start,S);g=g.end===void 0?P:Math.min(g.end,S),!i.extend&&P>g&&(S=g,g=P,P=S),S=fe(h,P);var B=fe(h,g);S&&B&&(i.rangeCount!==1||i.anchorNode!==S.node||i.anchorOffset!==S.offset||i.focusNode!==B.node||i.focusOffset!==B.offset)&&(o=o.createRange(),o.setStart(S.node,S.offset),i.removeAllRanges(),P>g?(i.addRange(o),i.extend(B.node,B.offset)):(o.setEnd(B.node,B.offset),i.addRange(o)))}}for(o=[],i=h;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<o.length;h++)i=o[h],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var ve=f&&"documentMode"in document&&11>=document.documentMode,be=null,De=null,Me=null,Qe=!1;function st(i,o,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Qe||be==null||be!==gt(g)||(g=be,"selectionStart"in g&&se(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Me&&he(Me,g)||(Me=g,g=Su(De,"onSelect"),0<g.length&&(o=new nr("onSelect","select",null,o,h),i.push({event:o,listeners:g}),o.target=be)))}function Xe(i,o){var h={};return h[i.toLowerCase()]=o.toLowerCase(),h["Webkit"+i]="webkit"+o,h["Moz"+i]="moz"+o,h}var We={animationend:Xe("Animation","AnimationEnd"),animationiteration:Xe("Animation","AnimationIteration"),animationstart:Xe("Animation","AnimationStart"),transitionend:Xe("Transition","TransitionEnd")},Ze={},rt={};f&&(rt=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function ut(i){if(Ze[i])return Ze[i];if(!We[i])return i;var o=We[i],h;for(h in o)if(o.hasOwnProperty(h)&&h in rt)return Ze[i]=o[h];return i}var Dt=ut("animationend"),Ft=ut("animationiteration"),jt=ut("animationstart"),Sn=ut("transitionend"),Nt=new Map,Xr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yr(i,o){Nt.set(i,o),a(o,[i])}for(var yo=0;yo<Xr.length;yo++){var qr=Xr[yo],Ci=qr.toLowerCase(),Rl=qr[0].toUpperCase()+qr.slice(1);yr(Ci,"on"+Rl)}yr(Dt,"onAnimationEnd"),yr(Ft,"onAnimationIteration"),yr(jt,"onAnimationStart"),yr("dblclick","onDoubleClick"),yr("focusin","onFocus"),yr("focusout","onBlur"),yr(Sn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fc=new Set("cancel close invalid load scroll toggle".split(" ").concat(ca));function oh(i,o,h){var g=i.type||"unknown-event";i.currentTarget=h,vs(g,o,void 0,i),i.currentTarget=null}function pc(i,o){o=(o&4)!==0;for(var h=0;h<i.length;h++){var g=i[h],S=g.event;g=g.listeners;e:{var P=void 0;if(o)for(var B=g.length-1;0<=B;B--){var Q=g[B],ae=Q.instance,Pe=Q.currentTarget;if(Q=Q.listener,ae!==P&&S.isPropagationStopped())break e;oh(S,Q,Pe),P=ae}else for(B=0;B<g.length;B++){if(Q=g[B],ae=Q.instance,Pe=Q.currentTarget,Q=Q.listener,ae!==P&&S.isPropagationStopped())break e;oh(S,Q,Pe),P=ae}}}if(Si)throw i=ri,Si=!1,ri=null,i}function vr(i,o){var h=o[Dn];h===void 0&&(h=o[Dn]=new Set);var g=i+"__bubble";h.has(g)||(gc(o,i,2,!1),h.add(g))}function mc(i,o,h){var g=0;o&&(g|=4),gc(h,i,g,o)}var bu="_reactListening"+Math.random().toString(36).slice(2);function kl(i){if(!i[bu]){i[bu]=!0,r.forEach(function(h){h!=="selectionchange"&&(fc.has(h)||mc(h,!1,i),mc(h,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[bu]||(o[bu]=!0,mc("selectionchange",!1,o))}}function gc(i,o,h,g){switch(yn(o)){case 1:var S=ea;break;case 4:S=Vi;break;default:S=ta}h=S.bind(null,o,h,i),S=void 0,!ys||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(S=!0),g?S!==void 0?i.addEventListener(o,h,{capture:!0,passive:S}):i.addEventListener(o,h,!0):S!==void 0?i.addEventListener(o,h,{passive:S}):i.addEventListener(o,h,!1)}function yc(i,o,h,g,S){var P=g;if((o&1)===0&&(o&2)===0&&g!==null)e:for(;;){if(g===null)return;var B=g.tag;if(B===3||B===4){var Q=g.stateNode.containerInfo;if(Q===S||Q.nodeType===8&&Q.parentNode===S)break;if(B===4)for(B=g.return;B!==null;){var ae=B.tag;if((ae===3||ae===4)&&(ae=B.stateNode.containerInfo,ae===S||ae.nodeType===8&&ae.parentNode===S))return;B=B.return}for(;Q!==null;){if(B=ha(Q),B===null)return;if(ae=B.tag,ae===5||ae===6){g=P=B;continue e}Q=Q.parentNode}}g=g.return}wi(function(){var Pe=P,$e=Zt(h),Ye=[];e:{var Ve=Nt.get(i);if(Ve!==void 0){var ft=nr,xt=i;switch(i){case"keypress":if(po(h)===0)break e;case"keydown":case"keyup":ft=Ws;break;case"focusin":xt="focus",ft=ia;break;case"focusout":xt="blur",ft=ia;break;case"beforeblur":case"afterblur":ft=ia;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=ja;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=na;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=Al;break;case Dt:case Ft:case jt:ft=za;break;case Sn:ft=bs;break;case"scroll":ft=Ti;break;case"wheel":ft=xu;break;case"copy":case"cut":case"paste":ft=On;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=$s}var bt=(o&4)!==0,dn=!bt&&i==="scroll",we=bt?Ve!==null?Ve+"Capture":null:Ve;bt=[];for(var ce=Pe,Ee;ce!==null;){Ee=ce;var it=Ee.stateNode;if(Ee.tag===5&&it!==null&&(Ee=it,we!==null&&(it=Fi(ce,we),it!=null&&bt.push(Ml(ce,it,Ee)))),dn)break;ce=ce.return}0<bt.length&&(Ve=new ft(Ve,xt,null,h,$e),Ye.push({event:Ve,listeners:bt}))}}if((o&7)===0){e:{if(Ve=i==="mouseover"||i==="pointerover",ft=i==="mouseout"||i==="pointerout",Ve&&h!==Bt&&(xt=h.relatedTarget||h.fromElement)&&(ha(xt)||xt[Fr]))break e;if((ft||Ve)&&(Ve=$e.window===$e?$e:(Ve=$e.ownerDocument)?Ve.defaultView||Ve.parentWindow:window,ft?(xt=h.relatedTarget||h.toElement,ft=Pe,xt=xt?ha(xt):null,xt!==null&&(dn=$r(xt),xt!==dn||xt.tag!==5&&xt.tag!==6)&&(xt=null)):(ft=null,xt=Pe),ft!==xt)){if(bt=ja,it="onMouseLeave",we="onMouseEnter",ce="mouse",(i==="pointerout"||i==="pointerover")&&(bt=$s,it="onPointerLeave",we="onPointerEnter",ce="pointer"),dn=ft==null?Ve:qa(ft),Ee=xt==null?Ve:qa(xt),Ve=new bt(it,ce+"leave",ft,h,$e),Ve.target=dn,Ve.relatedTarget=Ee,it=null,ha($e)===Pe&&(bt=new bt(we,ce+"enter",xt,h,$e),bt.target=Ee,bt.relatedTarget=dn,it=bt),dn=it,ft&&xt)t:{for(bt=ft,we=xt,ce=0,Ee=bt;Ee;Ee=Ol(Ee))ce++;for(Ee=0,it=we;it;it=Ol(it))Ee++;for(;0<ce-Ee;)bt=Ol(bt),ce--;for(;0<Ee-ce;)we=Ol(we),Ee--;for(;ce--;){if(bt===we||we!==null&&bt===we.alternate)break t;bt=Ol(bt),we=Ol(we)}bt=null}else bt=null;ft!==null&&ah(Ye,Ve,ft,bt,!1),xt!==null&&dn!==null&&ah(Ye,dn,xt,bt,!0)}}e:{if(Ve=Pe?qa(Pe):window,ft=Ve.nodeName&&Ve.nodeName.toLowerCase(),ft==="select"||ft==="input"&&Ve.type==="file")var Et=Zi;else if(ln(Ve))if(Lr)Et=Y;else{Et=L;var kt=O}else(ft=Ve.nodeName)&&ft.toLowerCase()==="input"&&(Ve.type==="checkbox"||Ve.type==="radio")&&(Et=z);if(Et&&(Et=Et(i,Pe))){$a(Ye,Et,h,$e);break e}kt&&kt(i,Ve,Pe),i==="focusout"&&(kt=Ve._wrapperState)&&kt.controlled&&Ve.type==="number"&&Ni(Ve,"number",Ve.value)}switch(kt=Pe?qa(Pe):window,i){case"focusin":(ln(kt)||kt.contentEditable==="true")&&(be=kt,De=Pe,Me=null);break;case"focusout":Me=De=be=null;break;case"mousedown":Qe=!0;break;case"contextmenu":case"mouseup":case"dragend":Qe=!1,st(Ye,h,$e);break;case"selectionchange":if(ve)break;case"keydown":case"keyup":st(Ye,h,$e)}var Mt;if(Ki)e:{switch(i){case"compositionstart":var Lt="onCompositionStart";break e;case"compositionend":Lt="onCompositionEnd";break e;case"compositionupdate":Lt="onCompositionUpdate";break e}Lt=void 0}else Yi?Il(i,h)&&(Lt="onCompositionEnd"):i==="keydown"&&h.keyCode===229&&(Lt="onCompositionStart");Lt&&(la&&h.locale!=="ko"&&(Yi||Lt!=="onCompositionStart"?Lt==="onCompositionEnd"&&Yi&&(Mt=js()):(vn=$e,ai="value"in vn?vn.value:vn.textContent,Yi=!0)),kt=Su(Pe,Lt),0<kt.length&&(Lt=new Ai(Lt,i,null,h,$e),Ye.push({event:Lt,listeners:kt}),Mt?Lt.data=Mt:(Mt=Wa(h),Mt!==null&&(Lt.data=Mt)))),(Mt=Cl?Qi(i,h):Pr(i,h))&&(Pe=Su(Pe,"onBeforeInput"),0<Pe.length&&($e=new Ai("onBeforeInput","beforeinput",null,h,$e),Ye.push({event:$e,listeners:Pe}),$e.data=Mt))}pc(Ye,o)})}function Ml(i,o,h){return{instance:i,listener:o,currentTarget:h}}function Su(i,o){for(var h=o+"Capture",g=[];i!==null;){var S=i,P=S.stateNode;S.tag===5&&P!==null&&(S=P,P=Fi(i,h),P!=null&&g.unshift(Ml(i,P,S)),P=Fi(i,o),P!=null&&g.push(Ml(i,P,S))),i=i.return}return g}function Ol(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function ah(i,o,h,g,S){for(var P=o._reactName,B=[];h!==null&&h!==g;){var Q=h,ae=Q.alternate,Pe=Q.stateNode;if(ae!==null&&ae===g)break;Q.tag===5&&Pe!==null&&(Q=Pe,S?(ae=Fi(h,P),ae!=null&&B.unshift(Ml(h,ae,Q))):S||(ae=Fi(h,P),ae!=null&&B.push(Ml(h,ae,Q)))),h=h.return}B.length!==0&&i.push({event:o,listeners:B})}var Jf=/\r\n?/g,ep=/\u0000|\uFFFD/g;function lh(i){return(typeof i=="string"?i:""+i).replace(Jf,`
`).replace(ep,"")}function Eu(i,o,h){if(o=lh(o),lh(i)!==o&&h)throw Error(t(425))}function Tu(){}var Dl=null,uh=null;function ch(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var hh=typeof setTimeout=="function"?setTimeout:void 0,Nl=typeof clearTimeout=="function"?clearTimeout:void 0,vc=typeof Promise=="function"?Promise:void 0,dh=typeof queueMicrotask=="function"?queueMicrotask:typeof vc<"u"?function(i){return vc.resolve(null).then(i).catch(tp)}:hh;function tp(i){setTimeout(function(){throw i})}function _c(i,o){var h=o,g=0;do{var S=h.nextSibling;if(i.removeChild(h),S&&S.nodeType===8)if(h=S.data,h==="/$"){if(g===0){i.removeChild(S),Ei(o);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=S}while(h);Ei(o)}function vo(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function fh(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var h=i.data;if(h==="$"||h==="$!"||h==="$?"){if(o===0)return i;o--}else h==="/$"&&o++}i=i.previousSibling}return null}var Xa=Math.random().toString(36).slice(2),Es="__reactFiber$"+Xa,Au="__reactProps$"+Xa,Fr="__reactContainer$"+Xa,Dn="__reactEvents$"+Xa,ud="__reactListeners$"+Xa,cd="__reactHandles$"+Xa;function ha(i){var o=i[Es];if(o)return o;for(var h=i.parentNode;h;){if(o=h[Fr]||h[Es]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(i=fh(i);i!==null;){if(h=i[Es])return h;i=fh(i)}return o}i=h,h=i.parentNode}return null}function Ll(i){return i=i[Es]||i[Fr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function qa(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Fl(i){return i[Au]||null}var xc=[],da=-1;function _o(i){return{current:i}}function _r(i){0>da||(i.current=xc[da],xc[da]=null,da--)}function lr(i,o){da++,xc[da]=i.current,i.current=o}var Ji={},un=_o(Ji),En=_o(!1),xo=Ji;function fa(i,o){var h=i.type.contextTypes;if(!h)return Ji;var g=i.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===o)return g.__reactInternalMemoizedMaskedChildContext;var S={},P;for(P in h)S[P]=o[P];return g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=S),S}function Xn(i){return i=i.childContextTypes,i!=null}function Bl(){_r(En),_r(un)}function Cu(i,o,h){if(un.current!==Ji)throw Error(t(168));lr(un,o),lr(En,h)}function ph(i,o,h){var g=i.stateNode;if(o=o.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var S in g)if(!(S in o))throw Error(t(108,He(i)||"Unknown",S));return G({},h,g)}function Ul(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ji,xo=un.current,lr(un,i),lr(En,En.current),!0}function mh(i,o,h){var g=i.stateNode;if(!g)throw Error(t(169));h?(i=ph(i,o,xo),g.__reactInternalMemoizedMergedChildContext=i,_r(En),_r(un),lr(un,i)):_r(En),lr(En,h)}var es=null,ts=!1,rs=!1;function gh(i){es===null?es=[i]:es.push(i)}function hd(i){ts=!0,gh(i)}function ns(){if(!rs&&es!==null){rs=!0;var i=0,o=Xt;try{var h=es;for(Xt=1;i<h.length;i++){var g=h[i];do g=g(!0);while(g!==null)}es=null,ts=!1}catch(S){throw es!==null&&(es=es.slice(i+1)),La(Ui,ns),S}finally{Xt=o,rs=!1}}return null}var Kr=[],Gl=0,wc=null,Ka=0,mr=[],is=0,ht=null,ci=1,Ks="";function pa(i,o){Kr[Gl++]=Ka,Kr[Gl++]=wc,wc=i,Ka=o}function jl(i,o,h){mr[is++]=ci,mr[is++]=Ks,mr[is++]=ht,ht=i;var g=ci;i=Ks;var S=32-Pt(g)-1;g&=~(1<<S),h+=1;var P=32-Pt(o)+S;if(30<P){var B=S-S%5;P=(g&(1<<B)-1).toString(32),g>>=B,S-=B,ci=1<<32-Pt(o)+S|h<<S|g,Ks=P+i}else ci=1<<P|h<<S|g,Ks=i}function zl(i){i.return!==null&&(pa(i,1),jl(i,1,0))}function Pu(i){for(;i===wc;)wc=Kr[--Gl],Kr[Gl]=null,Ka=Kr[--Gl],Kr[Gl]=null;for(;i===ht;)ht=mr[--is],mr[is]=null,Ks=mr[--is],mr[is]=null,ci=mr[--is],mr[is]=null}var hi=null,di=null,br=!1,Pi=null;function bc(i,o){var h=eo(5,null,null,0);h.elementType="DELETED",h.stateNode=o,h.return=i,o=i.deletions,o===null?(i.deletions=[h],i.flags|=16):o.push(h)}function Nn(i,o){switch(i.tag){case 5:var h=i.type;return o=o.nodeType!==1||h.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,hi=i,di=vo(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,hi=i,di=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(h=ht!==null?{id:ci,overflow:Ks}:null,i.memoizedState={dehydrated:o,treeContext:h,retryLane:1073741824},h=eo(18,null,null,0),h.stateNode=o,h.return=i,i.child=h,hi=i,di=null,!0):!1;default:return!1}}function ss(i){return(i.mode&1)!==0&&(i.flags&128)===0}function os(i){if(br){var o=di;if(o){var h=o;if(!Nn(i,o)){if(ss(i))throw Error(t(418));o=vo(h.nextSibling);var g=hi;o&&Nn(i,o)?bc(g,h):(i.flags=i.flags&-4097|2,br=!1,hi=i)}}else{if(ss(i))throw Error(t(418));i.flags=i.flags&-4097|2,br=!1,hi=i}}}function Sc(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;hi=i}function Iu(i){if(i!==hi)return!1;if(!br)return Sc(i),br=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!ch(i.type,i.memoizedProps)),o&&(o=di)){if(ss(i))throw as(),Error(t(418));for(;o;)bc(i,o),o=vo(o.nextSibling)}if(Sc(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var h=i.data;if(h==="/$"){if(o===0){di=vo(i.nextSibling);break e}o--}else h!=="$"&&h!=="$!"&&h!=="$?"||o++}i=i.nextSibling}di=null}}else di=hi?vo(i.stateNode.nextSibling):null;return!0}function as(){for(var i=di;i;)i=vo(i.nextSibling)}function Ya(){di=hi=null,br=!1}function ls(i){Pi===null?Pi=[i]:Pi.push(i)}var rp=ee.ReactCurrentBatchConfig;function Hl(i,o,h){if(i=h.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(t(309));var g=h.stateNode}if(!g)throw Error(t(147,i));var S=g,P=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===P?o.ref:(o=function(B){var Q=S.refs;B===null?delete Q[P]:Q[P]=B},o._stringRef=P,o)}if(typeof i!="string")throw Error(t(284));if(!h._owner)throw Error(t(290,i))}return i}function Ru(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function yh(i){var o=i._init;return o(i._payload)}function vh(i){function o(we,ce){if(i){var Ee=we.deletions;Ee===null?(we.deletions=[ce],we.flags|=16):Ee.push(ce)}}function h(we,ce){if(!i)return null;for(;ce!==null;)o(we,ce),ce=ce.sibling;return null}function g(we,ce){for(we=new Map;ce!==null;)ce.key!==null?we.set(ce.key,ce):we.set(ce.index,ce),ce=ce.sibling;return we}function S(we,ce){return we=Jl(we,ce),we.index=0,we.sibling=null,we}function P(we,ce,Ee){return we.index=Ee,i?(Ee=we.alternate,Ee!==null?(Ee=Ee.index,Ee<ce?(we.flags|=2,ce):Ee):(we.flags|=2,ce)):(we.flags|=1048576,ce)}function B(we){return i&&we.alternate===null&&(we.flags|=2),we}function Q(we,ce,Ee,it){return ce===null||ce.tag!==6?(ce=Ap(Ee,we.mode,it),ce.return=we,ce):(ce=S(ce,Ee),ce.return=we,ce)}function ae(we,ce,Ee,it){var Et=Ee.type;return Et===F?$e(we,ce,Ee.props.children,it,Ee.key):ce!==null&&(ce.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===H&&yh(Et)===ce.type)?(it=S(ce,Ee.props),it.ref=Hl(we,ce,Ee),it.return=we,it):(it=Id(Ee.type,Ee.key,Ee.props,null,we.mode,it),it.ref=Hl(we,ce,Ee),it.return=we,it)}function Pe(we,ce,Ee,it){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==Ee.containerInfo||ce.stateNode.implementation!==Ee.implementation?(ce=Cp(Ee,we.mode,it),ce.return=we,ce):(ce=S(ce,Ee.children||[]),ce.return=we,ce)}function $e(we,ce,Ee,it,Et){return ce===null||ce.tag!==7?(ce=$u(Ee,we.mode,it,Et),ce.return=we,ce):(ce=S(ce,Ee),ce.return=we,ce)}function Ye(we,ce,Ee){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ce=Ap(""+ce,we.mode,Ee),ce.return=we,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case X:return Ee=Id(ce.type,ce.key,ce.props,null,we.mode,Ee),Ee.ref=Hl(we,null,ce),Ee.return=we,Ee;case de:return ce=Cp(ce,we.mode,Ee),ce.return=we,ce;case H:var it=ce._init;return Ye(we,it(ce._payload),Ee)}if(Dr(ce)||K(ce))return ce=$u(ce,we.mode,Ee,null),ce.return=we,ce;Ru(we,ce)}return null}function Ve(we,ce,Ee,it){var Et=ce!==null?ce.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return Et!==null?null:Q(we,ce,""+Ee,it);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case X:return Ee.key===Et?ae(we,ce,Ee,it):null;case de:return Ee.key===Et?Pe(we,ce,Ee,it):null;case H:return Et=Ee._init,Ve(we,ce,Et(Ee._payload),it)}if(Dr(Ee)||K(Ee))return Et!==null?null:$e(we,ce,Ee,it,null);Ru(we,Ee)}return null}function ft(we,ce,Ee,it,Et){if(typeof it=="string"&&it!==""||typeof it=="number")return we=we.get(Ee)||null,Q(ce,we,""+it,Et);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case X:return we=we.get(it.key===null?Ee:it.key)||null,ae(ce,we,it,Et);case de:return we=we.get(it.key===null?Ee:it.key)||null,Pe(ce,we,it,Et);case H:var kt=it._init;return ft(we,ce,Ee,kt(it._payload),Et)}if(Dr(it)||K(it))return we=we.get(Ee)||null,$e(ce,we,it,Et,null);Ru(ce,it)}return null}function xt(we,ce,Ee,it){for(var Et=null,kt=null,Mt=ce,Lt=ce=0,Bn=null;Mt!==null&&Lt<Ee.length;Lt++){Mt.index>Lt?(Bn=Mt,Mt=null):Bn=Mt.sibling;var ur=Ve(we,Mt,Ee[Lt],it);if(ur===null){Mt===null&&(Mt=Bn);break}i&&Mt&&ur.alternate===null&&o(we,Mt),ce=P(ur,ce,Lt),kt===null?Et=ur:kt.sibling=ur,kt=ur,Mt=Bn}if(Lt===Ee.length)return h(we,Mt),br&&pa(we,Lt),Et;if(Mt===null){for(;Lt<Ee.length;Lt++)Mt=Ye(we,Ee[Lt],it),Mt!==null&&(ce=P(Mt,ce,Lt),kt===null?Et=Mt:kt.sibling=Mt,kt=Mt);return br&&pa(we,Lt),Et}for(Mt=g(we,Mt);Lt<Ee.length;Lt++)Bn=ft(Mt,we,Lt,Ee[Lt],it),Bn!==null&&(i&&Bn.alternate!==null&&Mt.delete(Bn.key===null?Lt:Bn.key),ce=P(Bn,ce,Lt),kt===null?Et=Bn:kt.sibling=Bn,kt=Bn);return i&&Mt.forEach(function(eu){return o(we,eu)}),br&&pa(we,Lt),Et}function bt(we,ce,Ee,it){var Et=K(Ee);if(typeof Et!="function")throw Error(t(150));if(Ee=Et.call(Ee),Ee==null)throw Error(t(151));for(var kt=Et=null,Mt=ce,Lt=ce=0,Bn=null,ur=Ee.next();Mt!==null&&!ur.done;Lt++,ur=Ee.next()){Mt.index>Lt?(Bn=Mt,Mt=null):Bn=Mt.sibling;var eu=Ve(we,Mt,ur.value,it);if(eu===null){Mt===null&&(Mt=Bn);break}i&&Mt&&eu.alternate===null&&o(we,Mt),ce=P(eu,ce,Lt),kt===null?Et=eu:kt.sibling=eu,kt=eu,Mt=Bn}if(ur.done)return h(we,Mt),br&&pa(we,Lt),Et;if(Mt===null){for(;!ur.done;Lt++,ur=Ee.next())ur=Ye(we,ur.value,it),ur!==null&&(ce=P(ur,ce,Lt),kt===null?Et=ur:kt.sibling=ur,kt=ur);return br&&pa(we,Lt),Et}for(Mt=g(we,Mt);!ur.done;Lt++,ur=Ee.next())ur=ft(Mt,we,Lt,ur.value,it),ur!==null&&(i&&ur.alternate!==null&&Mt.delete(ur.key===null?Lt:ur.key),ce=P(ur,ce,Lt),kt===null?Et=ur:kt.sibling=ur,kt=ur);return i&&Mt.forEach(function(Jw){return o(we,Jw)}),br&&pa(we,Lt),Et}function dn(we,ce,Ee,it){if(typeof Ee=="object"&&Ee!==null&&Ee.type===F&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case X:e:{for(var Et=Ee.key,kt=ce;kt!==null;){if(kt.key===Et){if(Et=Ee.type,Et===F){if(kt.tag===7){h(we,kt.sibling),ce=S(kt,Ee.props.children),ce.return=we,we=ce;break e}}else if(kt.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===H&&yh(Et)===kt.type){h(we,kt.sibling),ce=S(kt,Ee.props),ce.ref=Hl(we,kt,Ee),ce.return=we,we=ce;break e}h(we,kt);break}else o(we,kt);kt=kt.sibling}Ee.type===F?(ce=$u(Ee.props.children,we.mode,it,Ee.key),ce.return=we,we=ce):(it=Id(Ee.type,Ee.key,Ee.props,null,we.mode,it),it.ref=Hl(we,ce,Ee),it.return=we,we=it)}return B(we);case de:e:{for(kt=Ee.key;ce!==null;){if(ce.key===kt)if(ce.tag===4&&ce.stateNode.containerInfo===Ee.containerInfo&&ce.stateNode.implementation===Ee.implementation){h(we,ce.sibling),ce=S(ce,Ee.children||[]),ce.return=we,we=ce;break e}else{h(we,ce);break}else o(we,ce);ce=ce.sibling}ce=Cp(Ee,we.mode,it),ce.return=we,we=ce}return B(we);case H:return kt=Ee._init,dn(we,ce,kt(Ee._payload),it)}if(Dr(Ee))return xt(we,ce,Ee,it);if(K(Ee))return bt(we,ce,Ee,it);Ru(we,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"?(Ee=""+Ee,ce!==null&&ce.tag===6?(h(we,ce.sibling),ce=S(ce,Ee),ce.return=we,we=ce):(h(we,ce),ce=Ap(Ee,we.mode,it),ce.return=we,we=ce),B(we)):h(we,ce)}return dn}var wo=vh(!0),ku=vh(!1),Qa=_o(null),Za=null,bo=null,Ja=null;function Mu(){Ja=bo=Za=null}function Ou(i){var o=Qa.current;_r(Qa),i._currentValue=o}function Du(i,o,h){for(;i!==null;){var g=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,g!==null&&(g.childLanes|=o)):g!==null&&(g.childLanes&o)!==o&&(g.childLanes|=o),i===h)break;i=i.return}}function el(i,o){Za=i,Ja=bo=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(pe=!0),i.firstContext=null)}function fi(i){var o=i._currentValue;if(Ja!==i)if(i={context:i,memoizedValue:o,next:null},bo===null){if(Za===null)throw Error(t(308));bo=i,Za.dependencies={lanes:0,firstContext:i}}else bo=bo.next=i;return o}var tl=null;function Vl(i){tl===null?tl=[i]:tl.push(i)}function Ec(i,o,h,g){var S=o.interleaved;return S===null?(h.next=h,Vl(o)):(h.next=S.next,S.next=h),o.interleaved=h,fr(i,g)}function fr(i,o){i.lanes|=o;var h=i.alternate;for(h!==null&&(h.lanes|=o),h=i,i=i.return;i!==null;)i.childLanes|=o,h=i.alternate,h!==null&&(h.childLanes|=o),h=i,i=i.return;return h.tag===3?h.stateNode:null}var zt=!1;function Yr(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zr(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Sr(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Qr(i,o,h){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,(or&2)!==0){var S=g.pending;return S===null?o.next=o:(o.next=S.next,S.next=o),g.pending=o,fr(i,h)}return S=g.interleaved,S===null?(o.next=o,Vl(g)):(o.next=S.next,S.next=o),g.interleaved=o,fr(i,h)}function So(i,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194240)!==0)){var g=o.lanes;g&=i.pendingLanes,h|=g,o.lanes=h,Ko(i,h)}}function Zr(i,o){var h=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var S=null,P=null;if(h=h.firstBaseUpdate,h!==null){do{var B={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};P===null?S=P=B:P=P.next=B,h=h.next}while(h!==null);P===null?S=P=o:P=P.next=o}else S=P=o;h={baseState:g.baseState,firstBaseUpdate:S,lastBaseUpdate:P,shared:g.shared,effects:g.effects},i.updateQueue=h;return}i=h.lastBaseUpdate,i===null?h.firstBaseUpdate=o:i.next=o,h.lastBaseUpdate=o}function ma(i,o,h,g){var S=i.updateQueue;zt=!1;var P=S.firstBaseUpdate,B=S.lastBaseUpdate,Q=S.shared.pending;if(Q!==null){S.shared.pending=null;var ae=Q,Pe=ae.next;ae.next=null,B===null?P=Pe:B.next=Pe,B=ae;var $e=i.alternate;$e!==null&&($e=$e.updateQueue,Q=$e.lastBaseUpdate,Q!==B&&(Q===null?$e.firstBaseUpdate=Pe:Q.next=Pe,$e.lastBaseUpdate=ae))}if(P!==null){var Ye=S.baseState;B=0,$e=Pe=ae=null,Q=P;do{var Ve=Q.lane,ft=Q.eventTime;if((g&Ve)===Ve){$e!==null&&($e=$e.next={eventTime:ft,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var xt=i,bt=Q;switch(Ve=o,ft=h,bt.tag){case 1:if(xt=bt.payload,typeof xt=="function"){Ye=xt.call(ft,Ye,Ve);break e}Ye=xt;break e;case 3:xt.flags=xt.flags&-65537|128;case 0:if(xt=bt.payload,Ve=typeof xt=="function"?xt.call(ft,Ye,Ve):xt,Ve==null)break e;Ye=G({},Ye,Ve);break e;case 2:zt=!0}}Q.callback!==null&&Q.lane!==0&&(i.flags|=64,Ve=S.effects,Ve===null?S.effects=[Q]:Ve.push(Q))}else ft={eventTime:ft,lane:Ve,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},$e===null?(Pe=$e=ft,ae=Ye):$e=$e.next=ft,B|=Ve;if(Q=Q.next,Q===null){if(Q=S.shared.pending,Q===null)break;Ve=Q,Q=Ve.next,Ve.next=null,S.lastBaseUpdate=Ve,S.shared.pending=null}}while(!0);if($e===null&&(ae=Ye),S.baseState=ae,S.firstBaseUpdate=Pe,S.lastBaseUpdate=$e,o=S.shared.interleaved,o!==null){S=o;do B|=S.lane,S=S.next;while(S!==o)}else P===null&&(S.shared.lanes=0);zu|=B,i.lanes=B,i.memoizedState=Ye}}function ga(i,o,h){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var g=i[o],S=g.callback;if(S!==null){if(g.callback=null,g=h,typeof S!="function")throw Error(t(191,S));S.call(g)}}}var ya={},us=_o(ya),Eo=_o(ya),Tn=_o(ya);function To(i){if(i===ya)throw Error(t(174));return i}function Nu(i,o){switch(lr(Tn,o),lr(Eo,i),lr(us,ya),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Zn(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Zn(o,i)}_r(us),lr(us,o)}function Ii(){_r(us),_r(Eo),_r(Tn)}function rl(i){To(Tn.current);var o=To(us.current),h=Zn(o,i.type);o!==h&&(lr(Eo,i),lr(us,h))}function Tc(i){Eo.current===i&&(_r(us),_r(Eo))}var xr=_o(0);function Wl(i){for(var o=i;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ys=[];function $l(){for(var i=0;i<Ys.length;i++)Ys[i]._workInProgressVersionPrimary=null;Ys.length=0}var Ts=ee.ReactCurrentDispatcher,Xl=ee.ReactCurrentBatchConfig,As=0,Er=null,Br=null,Hr=null,cn=!1,cs=!1,Ln=0,pi=0;function An(){throw Error(t(321))}function Lu(i,o){if(o===null)return!1;for(var h=0;h<o.length&&h<i.length;h++)if(!re(i[h],o[h]))return!1;return!0}function Fu(i,o,h,g,S,P){if(As=P,Er=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ts.current=i===null||i.memoizedState===null?kc:ip,i=h(g,S),cs){P=0;do{if(cs=!1,Ln=0,25<=P)throw Error(t(301));P+=1,Hr=Br=null,o.updateQueue=null,Ts.current=sp,i=h(g,S)}while(cs)}if(Ts.current=ju,o=Br!==null&&Br.next!==null,As=0,Hr=Br=Er=null,cn=!1,o)throw Error(t(300));return i}function Qs(){var i=Ln!==0;return Ln=0,i}function Cs(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hr===null?Er.memoizedState=Hr=i:Hr=Hr.next=i,Hr}function Ri(){if(Br===null){var i=Er.alternate;i=i!==null?i.memoizedState:null}else i=Br.next;var o=Hr===null?Er.memoizedState:Hr.next;if(o!==null)Hr=o,Br=i;else{if(i===null)throw Error(t(310));Br=i,i={memoizedState:Br.memoizedState,baseState:Br.baseState,baseQueue:Br.baseQueue,queue:Br.queue,next:null},Hr===null?Er.memoizedState=Hr=i:Hr=Hr.next=i}return Hr}function nl(i,o){return typeof o=="function"?o(i):o}function Ao(i){var o=Ri(),h=o.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=i;var g=Br,S=g.baseQueue,P=h.pending;if(P!==null){if(S!==null){var B=S.next;S.next=P.next,P.next=B}g.baseQueue=S=P,h.pending=null}if(S!==null){P=S.next,g=g.baseState;var Q=B=null,ae=null,Pe=P;do{var $e=Pe.lane;if((As&$e)===$e)ae!==null&&(ae=ae.next={lane:0,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),g=Pe.hasEagerState?Pe.eagerState:i(g,Pe.action);else{var Ye={lane:$e,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null};ae===null?(Q=ae=Ye,B=g):ae=ae.next=Ye,Er.lanes|=$e,zu|=$e}Pe=Pe.next}while(Pe!==null&&Pe!==P);ae===null?B=g:ae.next=Q,re(g,o.memoizedState)||(pe=!0),o.memoizedState=g,o.baseState=B,o.baseQueue=ae,h.lastRenderedState=g}if(i=h.interleaved,i!==null){S=i;do P=S.lane,Er.lanes|=P,zu|=P,S=S.next;while(S!==i)}else S===null&&(h.lanes=0);return[o.memoizedState,h.dispatch]}function Ac(i){var o=Ri(),h=o.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=i;var g=h.dispatch,S=h.pending,P=o.memoizedState;if(S!==null){h.pending=null;var B=S=S.next;do P=i(P,B.action),B=B.next;while(B!==S);re(P,o.memoizedState)||(pe=!0),o.memoizedState=P,o.baseQueue===null&&(o.baseState=P),h.lastRenderedState=P}return[P,g]}function _h(){}function Cc(i,o){var h=Er,g=Ri(),S=o(),P=!re(g.memoizedState,S);if(P&&(g.memoizedState=S,pe=!0),g=g.queue,Eh(fd.bind(null,h,g,i),[i]),g.getSnapshot!==o||P||Hr!==null&&Hr.memoizedState.tag&1){if(h.flags|=2048,Ps(9,dd.bind(null,h,g,S,o),void 0,null),Fn===null)throw Error(t(349));(As&30)!==0||Bu(h,o,S)}return S}function Bu(i,o,h){i.flags|=16384,i={getSnapshot:o,value:h},o=Er.updateQueue,o===null?(o={lastEffect:null,stores:null},Er.updateQueue=o,o.stores=[i]):(h=o.stores,h===null?o.stores=[i]:h.push(i))}function dd(i,o,h,g){o.value=h,o.getSnapshot=g,xh(o)&&wh(i)}function fd(i,o,h){return h(function(){xh(o)&&wh(i)})}function xh(i){var o=i.getSnapshot;i=i.value;try{var h=o();return!re(i,h)}catch{return!0}}function wh(i){var o=fr(i,1);o!==null&&Ro(o,i,1,-1)}function il(i){var o=Cs();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nl,lastRenderedState:i},o.queue=i,i=i.dispatch=np.bind(null,Er,i),[o.memoizedState,i]}function Ps(i,o,h,g){return i={tag:i,create:o,destroy:h,deps:g,next:null},o=Er.updateQueue,o===null?(o={lastEffect:null,stores:null},Er.updateQueue=o,o.lastEffect=i.next=i):(h=o.lastEffect,h===null?o.lastEffect=i.next=i:(g=h.next,h.next=i,i.next=g,o.lastEffect=i)),i}function bh(){return Ri().memoizedState}function gr(i,o,h,g){var S=Cs();Er.flags|=i,S.memoizedState=Ps(1|o,h,void 0,g===void 0?null:g)}function Pc(i,o,h,g){var S=Ri();g=g===void 0?null:g;var P=void 0;if(Br!==null){var B=Br.memoizedState;if(P=B.destroy,g!==null&&Lu(g,B.deps)){S.memoizedState=Ps(o,h,P,g);return}}Er.flags|=i,S.memoizedState=Ps(1|o,h,P,g)}function Sh(i,o){return gr(8390656,8,i,o)}function Eh(i,o){return Pc(2048,8,i,o)}function pd(i,o){return Pc(4,2,i,o)}function Th(i,o){return Pc(4,4,i,o)}function md(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function ki(i,o,h){return h=h!=null?h.concat([i]):null,Pc(4,4,md.bind(null,o,i),h)}function Uu(){}function Co(i,o){var h=Ri();o=o===void 0?null:o;var g=h.memoizedState;return g!==null&&o!==null&&Lu(o,g[1])?g[0]:(h.memoizedState=[i,o],i)}function Gu(i,o){var h=Ri();o=o===void 0?null:o;var g=h.memoizedState;return g!==null&&o!==null&&Lu(o,g[1])?g[0]:(i=i(),h.memoizedState=[i,o],i)}function va(i,o,h){return(As&21)===0?(i.baseState&&(i.baseState=!1,pe=!0),i.memoizedState=h):(re(h,o)||(h=nn(),Er.lanes|=h,zu|=h,i.baseState=!0),o)}function Ic(i,o){var h=Xt;Xt=h!==0&&4>h?h:4,i(!0);var g=Xl.transition;Xl.transition={};try{i(!1),o()}finally{Xt=h,Xl.transition=g}}function Rc(){return Ri().memoizedState}function Ah(i,o,h){var g=Ql(i);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},Ch(i))Ph(o,h);else if(h=Ec(i,o,h,g),h!==null){var S=Mi();Ro(h,i,g,S),Ih(h,o,g)}}function np(i,o,h){var g=Ql(i),S={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(Ch(i))Ph(o,S);else{var P=i.alternate;if(i.lanes===0&&(P===null||P.lanes===0)&&(P=o.lastRenderedReducer,P!==null))try{var B=o.lastRenderedState,Q=P(B,h);if(S.hasEagerState=!0,S.eagerState=Q,re(Q,B)){var ae=o.interleaved;ae===null?(S.next=S,Vl(o)):(S.next=ae.next,ae.next=S),o.interleaved=S;return}}catch{}h=Ec(i,o,S,g),h!==null&&(S=Mi(),Ro(h,i,g,S),Ih(h,o,g))}}function Ch(i){var o=i.alternate;return i===Er||o!==null&&o===Er}function Ph(i,o){cs=cn=!0;var h=i.pending;h===null?o.next=o:(o.next=h.next,h.next=o),i.pending=o}function Ih(i,o,h){if((h&4194240)!==0){var g=o.lanes;g&=i.pendingLanes,h|=g,o.lanes=h,Ko(i,h)}}var ju={readContext:fi,useCallback:An,useContext:An,useEffect:An,useImperativeHandle:An,useInsertionEffect:An,useLayoutEffect:An,useMemo:An,useReducer:An,useRef:An,useState:An,useDebugValue:An,useDeferredValue:An,useTransition:An,useMutableSource:An,useSyncExternalStore:An,useId:An,unstable_isNewReconciler:!1},kc={readContext:fi,useCallback:function(i,o){return Cs().memoizedState=[i,o===void 0?null:o],i},useContext:fi,useEffect:Sh,useImperativeHandle:function(i,o,h){return h=h!=null?h.concat([i]):null,gr(4194308,4,md.bind(null,o,i),h)},useLayoutEffect:function(i,o){return gr(4194308,4,i,o)},useInsertionEffect:function(i,o){return gr(4,2,i,o)},useMemo:function(i,o){var h=Cs();return o=o===void 0?null:o,i=i(),h.memoizedState=[i,o],i},useReducer:function(i,o,h){var g=Cs();return o=h!==void 0?h(o):o,g.memoizedState=g.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},g.queue=i,i=i.dispatch=Ah.bind(null,Er,i),[g.memoizedState,i]},useRef:function(i){var o=Cs();return i={current:i},o.memoizedState=i},useState:il,useDebugValue:Uu,useDeferredValue:function(i){return Cs().memoizedState=i},useTransition:function(){var i=il(!1),o=i[0];return i=Ic.bind(null,i[1]),Cs().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,h){var g=Er,S=Cs();if(br){if(h===void 0)throw Error(t(407));h=h()}else{if(h=o(),Fn===null)throw Error(t(349));(As&30)!==0||Bu(g,o,h)}S.memoizedState=h;var P={value:h,getSnapshot:o};return S.queue=P,Sh(fd.bind(null,g,P,i),[i]),g.flags|=2048,Ps(9,dd.bind(null,g,P,h,o),void 0,null),h},useId:function(){var i=Cs(),o=Fn.identifierPrefix;if(br){var h=Ks,g=ci;h=(g&~(1<<32-Pt(g)-1)).toString(32)+h,o=":"+o+"R"+h,h=Ln++,0<h&&(o+="H"+h.toString(32)),o+=":"}else h=pi++,o=":"+o+"r"+h.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},ip={readContext:fi,useCallback:Co,useContext:fi,useEffect:Eh,useImperativeHandle:ki,useInsertionEffect:pd,useLayoutEffect:Th,useMemo:Gu,useReducer:Ao,useRef:bh,useState:function(){return Ao(nl)},useDebugValue:Uu,useDeferredValue:function(i){var o=Ri();return va(o,Br.memoizedState,i)},useTransition:function(){var i=Ao(nl)[0],o=Ri().memoizedState;return[i,o]},useMutableSource:_h,useSyncExternalStore:Cc,useId:Rc,unstable_isNewReconciler:!1},sp={readContext:fi,useCallback:Co,useContext:fi,useEffect:Eh,useImperativeHandle:ki,useInsertionEffect:pd,useLayoutEffect:Th,useMemo:Gu,useReducer:Ac,useRef:bh,useState:function(){return Ac(nl)},useDebugValue:Uu,useDeferredValue:function(i){var o=Ri();return Br===null?o.memoizedState=i:va(o,Br.memoizedState,i)},useTransition:function(){var i=Ac(nl)[0],o=Ri().memoizedState;return[i,o]},useMutableSource:_h,useSyncExternalStore:Cc,useId:Rc,unstable_isNewReconciler:!1};function l(i,o){if(i&&i.defaultProps){o=G({},o),i=i.defaultProps;for(var h in i)o[h]===void 0&&(o[h]=i[h]);return o}return o}function u(i,o,h,g){o=i.memoizedState,h=h(g,o),h=h==null?o:G({},o,h),i.memoizedState=h,i.lanes===0&&(i.updateQueue.baseState=h)}var v={isMounted:function(i){return(i=i._reactInternals)?$r(i)===i:!1},enqueueSetState:function(i,o,h){i=i._reactInternals;var g=Mi(),S=Ql(i),P=Sr(g,S);P.payload=o,h!=null&&(P.callback=h),o=Qr(i,P,S),o!==null&&(Ro(o,i,S,g),So(o,i,S))},enqueueReplaceState:function(i,o,h){i=i._reactInternals;var g=Mi(),S=Ql(i),P=Sr(g,S);P.tag=1,P.payload=o,h!=null&&(P.callback=h),o=Qr(i,P,S),o!==null&&(Ro(o,i,S,g),So(o,i,S))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var h=Mi(),g=Ql(i),S=Sr(h,g);S.tag=2,o!=null&&(S.callback=o),o=Qr(i,S,g),o!==null&&(Ro(o,i,g,h),So(o,i,g))}};function E(i,o,h,g,S,P,B){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,P,B):o.prototype&&o.prototype.isPureReactComponent?!he(h,g)||!he(S,P):!0}function C(i,o,h){var g=!1,S=Ji,P=o.contextType;return typeof P=="object"&&P!==null?P=fi(P):(S=Xn(o)?xo:un.current,g=o.contextTypes,P=(g=g!=null)?fa(i,S):Ji),o=new o(h,P),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=v,i.stateNode=o,o._reactInternals=i,g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=S,i.__reactInternalMemoizedMaskedChildContext=P),o}function M(i,o,h,g){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,g),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,g),o.state!==i&&v.enqueueReplaceState(o,o.state,null)}function $(i,o,h,g){var S=i.stateNode;S.props=h,S.state=i.memoizedState,S.refs={},Yr(i);var P=o.contextType;typeof P=="object"&&P!==null?S.context=fi(P):(P=Xn(o)?xo:un.current,S.context=fa(i,P)),S.state=i.memoizedState,P=o.getDerivedStateFromProps,typeof P=="function"&&(u(i,o,P,h),S.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(o=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),o!==S.state&&v.enqueueReplaceState(S,S.state,null),ma(i,h,S,g),S.state=i.memoizedState),typeof S.componentDidMount=="function"&&(i.flags|=4194308)}function ue(i,o){try{var h="",g=o;do h+=Oe(g),g=g.return;while(g);var S=h}catch(P){S=`
Error generating stack: `+P.message+`
`+P.stack}return{value:i,source:o,stack:S,digest:null}}function Se(i,o,h){return{value:i,source:null,stack:h??null,digest:o??null}}function Le(i,o){try{console.error(o.value)}catch(h){setTimeout(function(){throw h})}}var Ue=typeof WeakMap=="function"?WeakMap:Map;function at(i,o,h){h=Sr(-1,h),h.tag=3,h.payload={element:null};var g=o.value;return h.callback=function(){Sd||(Sd=!0,vp=g),Le(i,o)},h}function Be(i,o,h){h=Sr(-1,h),h.tag=3;var g=i.type.getDerivedStateFromError;if(typeof g=="function"){var S=o.value;h.payload=function(){return g(S)},h.callback=function(){Le(i,o)}}var P=i.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(h.callback=function(){Le(i,o),typeof g!="function"&&(Kl===null?Kl=new Set([this]):Kl.add(this));var B=o.stack;this.componentDidCatch(o.value,{componentStack:B!==null?B:""})}),h}function tt(i,o,h){var g=i.pingCache;if(g===null){g=i.pingCache=new Ue;var S=new Set;g.set(o,S)}else S=g.get(o),S===void 0&&(S=new Set,g.set(o,S));S.has(h)||(S.add(h),i=zw.bind(null,i,o,h),o.then(i,i))}function _t(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Wt(i,o,h,g,S){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(o=Sr(-1,1),o.tag=2,Qr(h,o,1))),h.lanes|=1),i):(i.flags|=65536,i.lanes=S,i)}var Ge=ee.ReactCurrentOwner,pe=!1;function Ie(i,o,h,g){o.child=i===null?ku(o,null,h,g):wo(o,i.child,h,g)}function qe(i,o,h,g,S){h=h.render;var P=o.ref;return el(o,S),g=Fu(i,o,h,g,P,S),h=Qs(),i!==null&&!pe?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~S,sl(i,o,S)):(br&&h&&zl(o),o.flags|=1,Ie(i,o,g,S),o.child)}function At(i,o,h,g,S){if(i===null){var P=h.type;return typeof P=="function"&&!Tp(P)&&P.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(o.tag=15,o.type=P,ir(i,o,P,g,S)):(i=Id(h.type,null,g,o,o.mode,S),i.ref=o.ref,i.return=o,o.child=i)}if(P=i.child,(i.lanes&S)===0){var B=P.memoizedProps;if(h=h.compare,h=h!==null?h:he,h(B,g)&&i.ref===o.ref)return sl(i,o,S)}return o.flags|=1,i=Jl(P,g),i.ref=o.ref,i.return=o,o.child=i}function ir(i,o,h,g,S){if(i!==null){var P=i.memoizedProps;if(he(P,g)&&i.ref===o.ref)if(pe=!1,o.pendingProps=g=P,(i.lanes&S)!==0)(i.flags&131072)!==0&&(pe=!0);else return o.lanes=i.lanes,sl(i,o,S)}return hn(i,o,h,g,S)}function wt(i,o,h){var g=o.pendingProps,S=g.children,P=i!==null?i.memoizedState:null;if(g.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},lr(Oc,Is),Is|=h;else{if((h&1073741824)===0)return i=P!==null?P.baseLanes|h:h,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,lr(Oc,Is),Is|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=P!==null?P.baseLanes:h,lr(Oc,Is),Is|=g}else P!==null?(g=P.baseLanes|h,o.memoizedState=null):g=h,lr(Oc,Is),Is|=g;return Ie(i,o,S,h),o.child}function tr(i,o){var h=o.ref;(i===null&&h!==null||i!==null&&i.ref!==h)&&(o.flags|=512,o.flags|=2097152)}function hn(i,o,h,g,S){var P=Xn(h)?xo:un.current;return P=fa(o,P),el(o,S),h=Fu(i,o,h,g,P,S),g=Qs(),i!==null&&!pe?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~S,sl(i,o,S)):(br&&g&&zl(o),o.flags|=1,Ie(i,o,h,S),o.child)}function sr(i,o,h,g,S){if(Xn(h)){var P=!0;Ul(o)}else P=!1;if(el(o,S),o.stateNode===null)vd(i,o),C(o,h,g),$(o,h,g,S),g=!0;else if(i===null){var B=o.stateNode,Q=o.memoizedProps;B.props=Q;var ae=B.context,Pe=h.contextType;typeof Pe=="object"&&Pe!==null?Pe=fi(Pe):(Pe=Xn(h)?xo:un.current,Pe=fa(o,Pe));var $e=h.getDerivedStateFromProps,Ye=typeof $e=="function"||typeof B.getSnapshotBeforeUpdate=="function";Ye||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(Q!==g||ae!==Pe)&&M(o,B,g,Pe),zt=!1;var Ve=o.memoizedState;B.state=Ve,ma(o,g,B,S),ae=o.memoizedState,Q!==g||Ve!==ae||En.current||zt?(typeof $e=="function"&&(u(o,h,$e,g),ae=o.memoizedState),(Q=zt||E(o,h,Q,g,Ve,ae,Pe))?(Ye||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(o.flags|=4194308)):(typeof B.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=g,o.memoizedState=ae),B.props=g,B.state=ae,B.context=Pe,g=Q):(typeof B.componentDidMount=="function"&&(o.flags|=4194308),g=!1)}else{B=o.stateNode,zr(i,o),Q=o.memoizedProps,Pe=o.type===o.elementType?Q:l(o.type,Q),B.props=Pe,Ye=o.pendingProps,Ve=B.context,ae=h.contextType,typeof ae=="object"&&ae!==null?ae=fi(ae):(ae=Xn(h)?xo:un.current,ae=fa(o,ae));var ft=h.getDerivedStateFromProps;($e=typeof ft=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(Q!==Ye||Ve!==ae)&&M(o,B,g,ae),zt=!1,Ve=o.memoizedState,B.state=Ve,ma(o,g,B,S);var xt=o.memoizedState;Q!==Ye||Ve!==xt||En.current||zt?(typeof ft=="function"&&(u(o,h,ft,g),xt=o.memoizedState),(Pe=zt||E(o,h,Pe,g,Ve,xt,ae)||!1)?($e||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(g,xt,ae),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(g,xt,ae)),typeof B.componentDidUpdate=="function"&&(o.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof B.componentDidUpdate!="function"||Q===i.memoizedProps&&Ve===i.memoizedState||(o.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||Q===i.memoizedProps&&Ve===i.memoizedState||(o.flags|=1024),o.memoizedProps=g,o.memoizedState=xt),B.props=g,B.state=xt,B.context=ae,g=Pe):(typeof B.componentDidUpdate!="function"||Q===i.memoizedProps&&Ve===i.memoizedState||(o.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||Q===i.memoizedProps&&Ve===i.memoizedState||(o.flags|=1024),g=!1)}return Zs(i,o,h,g,P,S)}function Zs(i,o,h,g,S,P){tr(i,o);var B=(o.flags&128)!==0;if(!g&&!B)return S&&mh(o,h,!1),sl(i,o,P);g=o.stateNode,Ge.current=o;var Q=B&&typeof h.getDerivedStateFromError!="function"?null:g.render();return o.flags|=1,i!==null&&B?(o.child=wo(o,i.child,null,P),o.child=wo(o,null,Q,P)):Ie(i,o,Q,P),o.memoizedState=g.state,S&&mh(o,h,!0),o.child}function gd(i){var o=i.stateNode;o.pendingContext?Cu(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Cu(i,o.context,!1),Nu(i,o.containerInfo)}function by(i,o,h,g,S){return Ya(),ls(S),o.flags|=256,Ie(i,o,h,g),o.child}var op={dehydrated:null,treeContext:null,retryLane:0};function ap(i){return{baseLanes:i,cachePool:null,transitions:null}}function Sy(i,o,h){var g=o.pendingProps,S=xr.current,P=!1,B=(o.flags&128)!==0,Q;if((Q=B)||(Q=i!==null&&i.memoizedState===null?!1:(S&2)!==0),Q?(P=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(S|=1),lr(xr,S&1),i===null)return os(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(B=g.children,i=g.fallback,P?(g=o.mode,P=o.child,B={mode:"hidden",children:B},(g&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=B):P=Rd(B,g,0,null),i=$u(i,g,h,null),P.return=o,i.return=o,P.sibling=i,o.child=P,o.child.memoizedState=ap(h),o.memoizedState=op,i):lp(o,B));if(S=i.memoizedState,S!==null&&(Q=S.dehydrated,Q!==null))return Rw(i,o,B,g,Q,S,h);if(P){P=g.fallback,B=o.mode,S=i.child,Q=S.sibling;var ae={mode:"hidden",children:g.children};return(B&1)===0&&o.child!==S?(g=o.child,g.childLanes=0,g.pendingProps=ae,o.deletions=null):(g=Jl(S,ae),g.subtreeFlags=S.subtreeFlags&14680064),Q!==null?P=Jl(Q,P):(P=$u(P,B,h,null),P.flags|=2),P.return=o,g.return=o,g.sibling=P,o.child=g,g=P,P=o.child,B=i.child.memoizedState,B=B===null?ap(h):{baseLanes:B.baseLanes|h,cachePool:null,transitions:B.transitions},P.memoizedState=B,P.childLanes=i.childLanes&~h,o.memoizedState=op,g}return P=i.child,i=P.sibling,g=Jl(P,{mode:"visible",children:g.children}),(o.mode&1)===0&&(g.lanes=h),g.return=o,g.sibling=null,i!==null&&(h=o.deletions,h===null?(o.deletions=[i],o.flags|=16):h.push(i)),o.child=g,o.memoizedState=null,g}function lp(i,o){return o=Rd({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function yd(i,o,h,g){return g!==null&&ls(g),wo(o,i.child,null,h),i=lp(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Rw(i,o,h,g,S,P,B){if(h)return o.flags&256?(o.flags&=-257,g=Se(Error(t(422))),yd(i,o,B,g)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(P=g.fallback,S=o.mode,g=Rd({mode:"visible",children:g.children},S,0,null),P=$u(P,S,B,null),P.flags|=2,g.return=o,P.return=o,g.sibling=P,o.child=g,(o.mode&1)!==0&&wo(o,i.child,null,B),o.child.memoizedState=ap(B),o.memoizedState=op,P);if((o.mode&1)===0)return yd(i,o,B,null);if(S.data==="$!"){if(g=S.nextSibling&&S.nextSibling.dataset,g)var Q=g.dgst;return g=Q,P=Error(t(419)),g=Se(P,g,void 0),yd(i,o,B,g)}if(Q=(B&i.childLanes)!==0,pe||Q){if(g=Fn,g!==null){switch(B&-B){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(g.suspendedLanes|B))!==0?0:S,S!==0&&S!==P.retryLane&&(P.retryLane=S,fr(i,S),Ro(g,i,S,-1))}return Ep(),g=Se(Error(t(421))),yd(i,o,B,g)}return S.data==="$?"?(o.flags|=128,o.child=i.child,o=Hw.bind(null,i),S._reactRetry=o,null):(i=P.treeContext,di=vo(S.nextSibling),hi=o,br=!0,Pi=null,i!==null&&(mr[is++]=ci,mr[is++]=Ks,mr[is++]=ht,ci=i.id,Ks=i.overflow,ht=o),o=lp(o,g.children),o.flags|=4096,o)}function Ey(i,o,h){i.lanes|=o;var g=i.alternate;g!==null&&(g.lanes|=o),Du(i.return,o,h)}function up(i,o,h,g,S){var P=i.memoizedState;P===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:S}:(P.isBackwards=o,P.rendering=null,P.renderingStartTime=0,P.last=g,P.tail=h,P.tailMode=S)}function Ty(i,o,h){var g=o.pendingProps,S=g.revealOrder,P=g.tail;if(Ie(i,o,g.children,h),g=xr.current,(g&2)!==0)g=g&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ey(i,h,o);else if(i.tag===19)Ey(i,h,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}g&=1}if(lr(xr,g),(o.mode&1)===0)o.memoizedState=null;else switch(S){case"forwards":for(h=o.child,S=null;h!==null;)i=h.alternate,i!==null&&Wl(i)===null&&(S=h),h=h.sibling;h=S,h===null?(S=o.child,o.child=null):(S=h.sibling,h.sibling=null),up(o,!1,S,h,P);break;case"backwards":for(h=null,S=o.child,o.child=null;S!==null;){if(i=S.alternate,i!==null&&Wl(i)===null){o.child=S;break}i=S.sibling,S.sibling=h,h=S,S=i}up(o,!0,h,null,P);break;case"together":up(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function vd(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function sl(i,o,h){if(i!==null&&(o.dependencies=i.dependencies),zu|=o.lanes,(h&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,h=Jl(i,i.pendingProps),o.child=h,h.return=o;i.sibling!==null;)i=i.sibling,h=h.sibling=Jl(i,i.pendingProps),h.return=o;h.sibling=null}return o.child}function kw(i,o,h){switch(o.tag){case 3:gd(o),Ya();break;case 5:rl(o);break;case 1:Xn(o.type)&&Ul(o);break;case 4:Nu(o,o.stateNode.containerInfo);break;case 10:var g=o.type._context,S=o.memoizedProps.value;lr(Qa,g._currentValue),g._currentValue=S;break;case 13:if(g=o.memoizedState,g!==null)return g.dehydrated!==null?(lr(xr,xr.current&1),o.flags|=128,null):(h&o.child.childLanes)!==0?Sy(i,o,h):(lr(xr,xr.current&1),i=sl(i,o,h),i!==null?i.sibling:null);lr(xr,xr.current&1);break;case 19:if(g=(h&o.childLanes)!==0,(i.flags&128)!==0){if(g)return Ty(i,o,h);o.flags|=128}if(S=o.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),lr(xr,xr.current),g)break;return null;case 22:case 23:return o.lanes=0,wt(i,o,h)}return sl(i,o,h)}var Ay,cp,Cy,Py;Ay=function(i,o){for(var h=o.child;h!==null;){if(h.tag===5||h.tag===6)i.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},cp=function(){},Cy=function(i,o,h,g){var S=i.memoizedProps;if(S!==g){i=o.stateNode,To(us.current);var P=null;switch(h){case"input":S=Ut(i,S),g=Ut(i,g),P=[];break;case"select":S=G({},S,{value:void 0}),g=G({},g,{value:void 0}),P=[];break;case"textarea":S=yi(i,S),g=yi(i,g),P=[];break;default:typeof S.onClick!="function"&&typeof g.onClick=="function"&&(i.onclick=Tu)}te(h,g);var B;h=null;for(Pe in S)if(!g.hasOwnProperty(Pe)&&S.hasOwnProperty(Pe)&&S[Pe]!=null)if(Pe==="style"){var Q=S[Pe];for(B in Q)Q.hasOwnProperty(B)&&(h||(h={}),h[B]="")}else Pe!=="dangerouslySetInnerHTML"&&Pe!=="children"&&Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&Pe!=="autoFocus"&&(s.hasOwnProperty(Pe)?P||(P=[]):(P=P||[]).push(Pe,null));for(Pe in g){var ae=g[Pe];if(Q=S?.[Pe],g.hasOwnProperty(Pe)&&ae!==Q&&(ae!=null||Q!=null))if(Pe==="style")if(Q){for(B in Q)!Q.hasOwnProperty(B)||ae&&ae.hasOwnProperty(B)||(h||(h={}),h[B]="");for(B in ae)ae.hasOwnProperty(B)&&Q[B]!==ae[B]&&(h||(h={}),h[B]=ae[B])}else h||(P||(P=[]),P.push(Pe,h)),h=ae;else Pe==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,Q=Q?Q.__html:void 0,ae!=null&&Q!==ae&&(P=P||[]).push(Pe,ae)):Pe==="children"?typeof ae!="string"&&typeof ae!="number"||(P=P||[]).push(Pe,""+ae):Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&(s.hasOwnProperty(Pe)?(ae!=null&&Pe==="onScroll"&&vr("scroll",i),P||Q===ae||(P=[])):(P=P||[]).push(Pe,ae))}h&&(P=P||[]).push("style",h);var Pe=P;(o.updateQueue=Pe)&&(o.flags|=4)}},Py=function(i,o,h,g){h!==g&&(o.flags|=4)};function Rh(i,o){if(!br)switch(i.tailMode){case"hidden":o=i.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?i.tail=null:h.sibling=null;break;case"collapsed":h=i.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function mi(i){var o=i.alternate!==null&&i.alternate.child===i.child,h=0,g=0;if(o)for(var S=i.child;S!==null;)h|=S.lanes|S.childLanes,g|=S.subtreeFlags&14680064,g|=S.flags&14680064,S.return=i,S=S.sibling;else for(S=i.child;S!==null;)h|=S.lanes|S.childLanes,g|=S.subtreeFlags,g|=S.flags,S.return=i,S=S.sibling;return i.subtreeFlags|=g,i.childLanes=h,o}function Mw(i,o,h){var g=o.pendingProps;switch(Pu(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mi(o),null;case 1:return Xn(o.type)&&Bl(),mi(o),null;case 3:return g=o.stateNode,Ii(),_r(En),_r(un),$l(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(i===null||i.child===null)&&(Iu(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Pi!==null&&(wp(Pi),Pi=null))),cp(i,o),mi(o),null;case 5:Tc(o);var S=To(Tn.current);if(h=o.type,i!==null&&o.stateNode!=null)Cy(i,o,h,g,S),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!g){if(o.stateNode===null)throw Error(t(166));return mi(o),null}if(i=To(us.current),Iu(o)){g=o.stateNode,h=o.type;var P=o.memoizedProps;switch(g[Es]=o,g[Au]=P,i=(o.mode&1)!==0,h){case"dialog":vr("cancel",g),vr("close",g);break;case"iframe":case"object":case"embed":vr("load",g);break;case"video":case"audio":for(S=0;S<ca.length;S++)vr(ca[S],g);break;case"source":vr("error",g);break;case"img":case"image":case"link":vr("error",g),vr("load",g);break;case"details":vr("toggle",g);break;case"input":dt(g,P),vr("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!P.multiple},vr("invalid",g);break;case"textarea":zn(g,P),vr("invalid",g)}te(h,P),S=null;for(var B in P)if(P.hasOwnProperty(B)){var Q=P[B];B==="children"?typeof Q=="string"?g.textContent!==Q&&(P.suppressHydrationWarning!==!0&&Eu(g.textContent,Q,i),S=["children",Q]):typeof Q=="number"&&g.textContent!==""+Q&&(P.suppressHydrationWarning!==!0&&Eu(g.textContent,Q,i),S=["children",""+Q]):s.hasOwnProperty(B)&&Q!=null&&B==="onScroll"&&vr("scroll",g)}switch(h){case"input":ot(g),Tr(g,P,!0);break;case"textarea":ot(g),Ms(g);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(g.onclick=Tu)}g=S,o.updateQueue=g,g!==null&&(o.flags|=4)}else{B=S.nodeType===9?S:S.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Li(h)),i==="http://www.w3.org/1999/xhtml"?h==="script"?(i=B.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof g.is=="string"?i=B.createElement(h,{is:g.is}):(i=B.createElement(h),h==="select"&&(B=i,g.multiple?B.multiple=!0:g.size&&(B.size=g.size))):i=B.createElementNS(i,h),i[Es]=o,i[Au]=g,Ay(i,o,!1,!1),o.stateNode=i;e:{switch(B=Ae(h,g),h){case"dialog":vr("cancel",i),vr("close",i),S=g;break;case"iframe":case"object":case"embed":vr("load",i),S=g;break;case"video":case"audio":for(S=0;S<ca.length;S++)vr(ca[S],i);S=g;break;case"source":vr("error",i),S=g;break;case"img":case"image":case"link":vr("error",i),vr("load",i),S=g;break;case"details":vr("toggle",i),S=g;break;case"input":dt(i,g),S=Ut(i,g),vr("invalid",i);break;case"option":S=g;break;case"select":i._wrapperState={wasMultiple:!!g.multiple},S=G({},g,{value:void 0}),vr("invalid",i);break;case"textarea":zn(i,g),S=yi(i,g),vr("invalid",i);break;default:S=g}te(h,S),Q=S;for(P in Q)if(Q.hasOwnProperty(P)){var ae=Q[P];P==="style"?Ds(i,ae):P==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,ae!=null&&Jn(i,ae)):P==="children"?typeof ae=="string"?(h!=="textarea"||ae!=="")&&vi(i,ae):typeof ae=="number"&&vi(i,""+ae):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(s.hasOwnProperty(P)?ae!=null&&P==="onScroll"&&vr("scroll",i):ae!=null&&j(i,P,ae,B))}switch(h){case"input":ot(i),Tr(i,g,!1);break;case"textarea":ot(i),Ms(i);break;case"option":g.value!=null&&i.setAttribute("value",""+Je(g.value));break;case"select":i.multiple=!!g.multiple,P=g.value,P!=null?cr(i,!!g.multiple,P,!1):g.defaultValue!=null&&cr(i,!!g.multiple,g.defaultValue,!0);break;default:typeof S.onClick=="function"&&(i.onclick=Tu)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return mi(o),null;case 6:if(i&&o.stateNode!=null)Py(i,o,i.memoizedProps,g);else{if(typeof g!="string"&&o.stateNode===null)throw Error(t(166));if(h=To(Tn.current),To(us.current),Iu(o)){if(g=o.stateNode,h=o.memoizedProps,g[Es]=o,(P=g.nodeValue!==h)&&(i=hi,i!==null))switch(i.tag){case 3:Eu(g.nodeValue,h,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Eu(g.nodeValue,h,(i.mode&1)!==0)}P&&(o.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[Es]=o,o.stateNode=g}return mi(o),null;case 13:if(_r(xr),g=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(br&&di!==null&&(o.mode&1)!==0&&(o.flags&128)===0)as(),Ya(),o.flags|=98560,P=!1;else if(P=Iu(o),g!==null&&g.dehydrated!==null){if(i===null){if(!P)throw Error(t(318));if(P=o.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(t(317));P[Es]=o}else Ya(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;mi(o),P=!1}else Pi!==null&&(wp(Pi),Pi=null),P=!0;if(!P)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=h,o):(g=g!==null,g!==(i!==null&&i.memoizedState!==null)&&g&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(xr.current&1)!==0?Cn===0&&(Cn=3):Ep())),o.updateQueue!==null&&(o.flags|=4),mi(o),null);case 4:return Ii(),cp(i,o),i===null&&kl(o.stateNode.containerInfo),mi(o),null;case 10:return Ou(o.type._context),mi(o),null;case 17:return Xn(o.type)&&Bl(),mi(o),null;case 19:if(_r(xr),P=o.memoizedState,P===null)return mi(o),null;if(g=(o.flags&128)!==0,B=P.rendering,B===null)if(g)Rh(P,!1);else{if(Cn!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(B=Wl(i),B!==null){for(o.flags|=128,Rh(P,!1),g=B.updateQueue,g!==null&&(o.updateQueue=g,o.flags|=4),o.subtreeFlags=0,g=h,h=o.child;h!==null;)P=h,i=g,P.flags&=14680066,B=P.alternate,B===null?(P.childLanes=0,P.lanes=i,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=B.childLanes,P.lanes=B.lanes,P.child=B.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=B.memoizedProps,P.memoizedState=B.memoizedState,P.updateQueue=B.updateQueue,P.type=B.type,i=B.dependencies,P.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),h=h.sibling;return lr(xr,xr.current&1|2),o.child}i=i.sibling}P.tail!==null&&rr()>Dc&&(o.flags|=128,g=!0,Rh(P,!1),o.lanes=4194304)}else{if(!g)if(i=Wl(B),i!==null){if(o.flags|=128,g=!0,h=i.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),Rh(P,!0),P.tail===null&&P.tailMode==="hidden"&&!B.alternate&&!br)return mi(o),null}else 2*rr()-P.renderingStartTime>Dc&&h!==1073741824&&(o.flags|=128,g=!0,Rh(P,!1),o.lanes=4194304);P.isBackwards?(B.sibling=o.child,o.child=B):(h=P.last,h!==null?h.sibling=B:o.child=B,P.last=B)}return P.tail!==null?(o=P.tail,P.rendering=o,P.tail=o.sibling,P.renderingStartTime=rr(),o.sibling=null,h=xr.current,lr(xr,g?h&1|2:h&1),o):(mi(o),null);case 22:case 23:return Sp(),g=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==g&&(o.flags|=8192),g&&(o.mode&1)!==0?(Is&1073741824)!==0&&(mi(o),o.subtreeFlags&6&&(o.flags|=8192)):mi(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function Ow(i,o){switch(Pu(o),o.tag){case 1:return Xn(o.type)&&Bl(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Ii(),_r(En),_r(un),$l(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Tc(o),null;case 13:if(_r(xr),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Ya()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return _r(xr),null;case 4:return Ii(),null;case 10:return Ou(o.type._context),null;case 22:case 23:return Sp(),null;case 24:return null;default:return null}}var _d=!1,gi=!1,Dw=typeof WeakSet=="function"?WeakSet:Set,yt=null;function Mc(i,o){var h=i.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){Jr(i,o,g)}else h.current=null}function hp(i,o,h){try{h()}catch(g){Jr(i,o,g)}}var Iy=!1;function Nw(i,o){if(Dl=Mn,i=oe(),se(i)){if("selectionStart"in i)var h={start:i.selectionStart,end:i.selectionEnd};else e:{h=(h=i.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var S=g.anchorOffset,P=g.focusNode;g=g.focusOffset;try{h.nodeType,P.nodeType}catch{h=null;break e}var B=0,Q=-1,ae=-1,Pe=0,$e=0,Ye=i,Ve=null;t:for(;;){for(var ft;Ye!==h||S!==0&&Ye.nodeType!==3||(Q=B+S),Ye!==P||g!==0&&Ye.nodeType!==3||(ae=B+g),Ye.nodeType===3&&(B+=Ye.nodeValue.length),(ft=Ye.firstChild)!==null;)Ve=Ye,Ye=ft;for(;;){if(Ye===i)break t;if(Ve===h&&++Pe===S&&(Q=B),Ve===P&&++$e===g&&(ae=B),(ft=Ye.nextSibling)!==null)break;Ye=Ve,Ve=Ye.parentNode}Ye=ft}h=Q===-1||ae===-1?null:{start:Q,end:ae}}else h=null}h=h||{start:0,end:0}}else h=null;for(uh={focusedElem:i,selectionRange:h},Mn=!1,yt=o;yt!==null;)if(o=yt,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,yt=i;else for(;yt!==null;){o=yt;try{var xt=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(xt!==null){var bt=xt.memoizedProps,dn=xt.memoizedState,we=o.stateNode,ce=we.getSnapshotBeforeUpdate(o.elementType===o.type?bt:l(o.type,bt),dn);we.__reactInternalSnapshotBeforeUpdate=ce}break;case 3:var Ee=o.stateNode.containerInfo;Ee.nodeType===1?Ee.textContent="":Ee.nodeType===9&&Ee.documentElement&&Ee.removeChild(Ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(it){Jr(o,o.return,it)}if(i=o.sibling,i!==null){i.return=o.return,yt=i;break}yt=o.return}return xt=Iy,Iy=!1,xt}function kh(i,o,h){var g=o.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var S=g=g.next;do{if((S.tag&i)===i){var P=S.destroy;S.destroy=void 0,P!==void 0&&hp(o,h,P)}S=S.next}while(S!==g)}}function xd(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var h=o=o.next;do{if((h.tag&i)===i){var g=h.create;h.destroy=g()}h=h.next}while(h!==o)}}function dp(i){var o=i.ref;if(o!==null){var h=i.stateNode;i.tag,i=h,typeof o=="function"?o(i):o.current=i}}function Ry(i){var o=i.alternate;o!==null&&(i.alternate=null,Ry(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Es],delete o[Au],delete o[Dn],delete o[ud],delete o[cd])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function ky(i){return i.tag===5||i.tag===3||i.tag===4}function My(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||ky(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function fp(i,o,h){var g=i.tag;if(g===5||g===6)i=i.stateNode,o?h.nodeType===8?h.parentNode.insertBefore(i,o):h.insertBefore(i,o):(h.nodeType===8?(o=h.parentNode,o.insertBefore(i,h)):(o=h,o.appendChild(i)),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=Tu));else if(g!==4&&(i=i.child,i!==null))for(fp(i,o,h),i=i.sibling;i!==null;)fp(i,o,h),i=i.sibling}function pp(i,o,h){var g=i.tag;if(g===5||g===6)i=i.stateNode,o?h.insertBefore(i,o):h.appendChild(i);else if(g!==4&&(i=i.child,i!==null))for(pp(i,o,h),i=i.sibling;i!==null;)pp(i,o,h),i=i.sibling}var qn=null,Po=!1;function ql(i,o,h){for(h=h.child;h!==null;)Oy(i,o,h),h=h.sibling}function Oy(i,o,h){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(si,h)}catch{}switch(h.tag){case 5:gi||Mc(h,o);case 6:var g=qn,S=Po;qn=null,ql(i,o,h),qn=g,Po=S,qn!==null&&(Po?(i=qn,h=h.stateNode,i.nodeType===8?i.parentNode.removeChild(h):i.removeChild(h)):qn.removeChild(h.stateNode));break;case 18:qn!==null&&(Po?(i=qn,h=h.stateNode,i.nodeType===8?_c(i.parentNode,h):i.nodeType===1&&_c(i,h),Ei(i)):_c(qn,h.stateNode));break;case 4:g=qn,S=Po,qn=h.stateNode.containerInfo,Po=!0,ql(i,o,h),qn=g,Po=S;break;case 0:case 11:case 14:case 15:if(!gi&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){S=g=g.next;do{var P=S,B=P.destroy;P=P.tag,B!==void 0&&((P&2)!==0||(P&4)!==0)&&hp(h,o,B),S=S.next}while(S!==g)}ql(i,o,h);break;case 1:if(!gi&&(Mc(h,o),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(Q){Jr(h,o,Q)}ql(i,o,h);break;case 21:ql(i,o,h);break;case 22:h.mode&1?(gi=(g=gi)||h.memoizedState!==null,ql(i,o,h),gi=g):ql(i,o,h);break;default:ql(i,o,h)}}function Dy(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var h=i.stateNode;h===null&&(h=i.stateNode=new Dw),o.forEach(function(g){var S=Vw.bind(null,i,g);h.has(g)||(h.add(g),g.then(S,S))})}}function Io(i,o){var h=o.deletions;if(h!==null)for(var g=0;g<h.length;g++){var S=h[g];try{var P=i,B=o,Q=B;e:for(;Q!==null;){switch(Q.tag){case 5:qn=Q.stateNode,Po=!1;break e;case 3:qn=Q.stateNode.containerInfo,Po=!0;break e;case 4:qn=Q.stateNode.containerInfo,Po=!0;break e}Q=Q.return}if(qn===null)throw Error(t(160));Oy(P,B,S),qn=null,Po=!1;var ae=S.alternate;ae!==null&&(ae.return=null),S.return=null}catch(Pe){Jr(S,o,Pe)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Ny(o,i),o=o.sibling}function Ny(i,o){var h=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Io(o,i),_a(i),g&4){try{kh(3,i,i.return),xd(3,i)}catch(bt){Jr(i,i.return,bt)}try{kh(5,i,i.return)}catch(bt){Jr(i,i.return,bt)}}break;case 1:Io(o,i),_a(i),g&512&&h!==null&&Mc(h,h.return);break;case 5:if(Io(o,i),_a(i),g&512&&h!==null&&Mc(h,h.return),i.flags&32){var S=i.stateNode;try{vi(S,"")}catch(bt){Jr(i,i.return,bt)}}if(g&4&&(S=i.stateNode,S!=null)){var P=i.memoizedProps,B=h!==null?h.memoizedProps:P,Q=i.type,ae=i.updateQueue;if(i.updateQueue=null,ae!==null)try{Q==="input"&&P.type==="radio"&&P.name!=null&&vt(S,P),Ae(Q,B);var Pe=Ae(Q,P);for(B=0;B<ae.length;B+=2){var $e=ae[B],Ye=ae[B+1];$e==="style"?Ds(S,Ye):$e==="dangerouslySetInnerHTML"?Jn(S,Ye):$e==="children"?vi(S,Ye):j(S,$e,Ye,Pe)}switch(Q){case"input":pr(S,P);break;case"textarea":In(S,P);break;case"select":var Ve=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!P.multiple;var ft=P.value;ft!=null?cr(S,!!P.multiple,ft,!1):Ve!==!!P.multiple&&(P.defaultValue!=null?cr(S,!!P.multiple,P.defaultValue,!0):cr(S,!!P.multiple,P.multiple?[]:"",!1))}S[Au]=P}catch(bt){Jr(i,i.return,bt)}}break;case 6:if(Io(o,i),_a(i),g&4){if(i.stateNode===null)throw Error(t(162));S=i.stateNode,P=i.memoizedProps;try{S.nodeValue=P}catch(bt){Jr(i,i.return,bt)}}break;case 3:if(Io(o,i),_a(i),g&4&&h!==null&&h.memoizedState.isDehydrated)try{Ei(o.containerInfo)}catch(bt){Jr(i,i.return,bt)}break;case 4:Io(o,i),_a(i);break;case 13:Io(o,i),_a(i),S=i.child,S.flags&8192&&(P=S.memoizedState!==null,S.stateNode.isHidden=P,!P||S.alternate!==null&&S.alternate.memoizedState!==null||(yp=rr())),g&4&&Dy(i);break;case 22:if($e=h!==null&&h.memoizedState!==null,i.mode&1?(gi=(Pe=gi)||$e,Io(o,i),gi=Pe):Io(o,i),_a(i),g&8192){if(Pe=i.memoizedState!==null,(i.stateNode.isHidden=Pe)&&!$e&&(i.mode&1)!==0)for(yt=i,$e=i.child;$e!==null;){for(Ye=yt=$e;yt!==null;){switch(Ve=yt,ft=Ve.child,Ve.tag){case 0:case 11:case 14:case 15:kh(4,Ve,Ve.return);break;case 1:Mc(Ve,Ve.return);var xt=Ve.stateNode;if(typeof xt.componentWillUnmount=="function"){g=Ve,h=Ve.return;try{o=g,xt.props=o.memoizedProps,xt.state=o.memoizedState,xt.componentWillUnmount()}catch(bt){Jr(g,h,bt)}}break;case 5:Mc(Ve,Ve.return);break;case 22:if(Ve.memoizedState!==null){By(Ye);continue}}ft!==null?(ft.return=Ve,yt=ft):By(Ye)}$e=$e.sibling}e:for($e=null,Ye=i;;){if(Ye.tag===5){if($e===null){$e=Ye;try{S=Ye.stateNode,Pe?(P=S.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(Q=Ye.stateNode,ae=Ye.memoizedProps.style,B=ae!=null&&ae.hasOwnProperty("display")?ae.display:null,Q.style.display=oo("display",B))}catch(bt){Jr(i,i.return,bt)}}}else if(Ye.tag===6){if($e===null)try{Ye.stateNode.nodeValue=Pe?"":Ye.memoizedProps}catch(bt){Jr(i,i.return,bt)}}else if((Ye.tag!==22&&Ye.tag!==23||Ye.memoizedState===null||Ye===i)&&Ye.child!==null){Ye.child.return=Ye,Ye=Ye.child;continue}if(Ye===i)break e;for(;Ye.sibling===null;){if(Ye.return===null||Ye.return===i)break e;$e===Ye&&($e=null),Ye=Ye.return}$e===Ye&&($e=null),Ye.sibling.return=Ye.return,Ye=Ye.sibling}}break;case 19:Io(o,i),_a(i),g&4&&Dy(i);break;case 21:break;default:Io(o,i),_a(i)}}function _a(i){var o=i.flags;if(o&2){try{e:{for(var h=i.return;h!==null;){if(ky(h)){var g=h;break e}h=h.return}throw Error(t(160))}switch(g.tag){case 5:var S=g.stateNode;g.flags&32&&(vi(S,""),g.flags&=-33);var P=My(i);pp(i,P,S);break;case 3:case 4:var B=g.stateNode.containerInfo,Q=My(i);fp(i,Q,B);break;default:throw Error(t(161))}}catch(ae){Jr(i,i.return,ae)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Lw(i,o,h){yt=i,Ly(i)}function Ly(i,o,h){for(var g=(i.mode&1)!==0;yt!==null;){var S=yt,P=S.child;if(S.tag===22&&g){var B=S.memoizedState!==null||_d;if(!B){var Q=S.alternate,ae=Q!==null&&Q.memoizedState!==null||gi;Q=_d;var Pe=gi;if(_d=B,(gi=ae)&&!Pe)for(yt=S;yt!==null;)B=yt,ae=B.child,B.tag===22&&B.memoizedState!==null?Uy(S):ae!==null?(ae.return=B,yt=ae):Uy(S);for(;P!==null;)yt=P,Ly(P),P=P.sibling;yt=S,_d=Q,gi=Pe}Fy(i)}else(S.subtreeFlags&8772)!==0&&P!==null?(P.return=S,yt=P):Fy(i)}}function Fy(i){for(;yt!==null;){var o=yt;if((o.flags&8772)!==0){var h=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:gi||xd(5,o);break;case 1:var g=o.stateNode;if(o.flags&4&&!gi)if(h===null)g.componentDidMount();else{var S=o.elementType===o.type?h.memoizedProps:l(o.type,h.memoizedProps);g.componentDidUpdate(S,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var P=o.updateQueue;P!==null&&ga(o,P,g);break;case 3:var B=o.updateQueue;if(B!==null){if(h=null,o.child!==null)switch(o.child.tag){case 5:h=o.child.stateNode;break;case 1:h=o.child.stateNode}ga(o,B,h)}break;case 5:var Q=o.stateNode;if(h===null&&o.flags&4){h=Q;var ae=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":ae.autoFocus&&h.focus();break;case"img":ae.src&&(h.src=ae.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Pe=o.alternate;if(Pe!==null){var $e=Pe.memoizedState;if($e!==null){var Ye=$e.dehydrated;Ye!==null&&Ei(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}gi||o.flags&512&&dp(o)}catch(Ve){Jr(o,o.return,Ve)}}if(o===i){yt=null;break}if(h=o.sibling,h!==null){h.return=o.return,yt=h;break}yt=o.return}}function By(i){for(;yt!==null;){var o=yt;if(o===i){yt=null;break}var h=o.sibling;if(h!==null){h.return=o.return,yt=h;break}yt=o.return}}function Uy(i){for(;yt!==null;){var o=yt;try{switch(o.tag){case 0:case 11:case 15:var h=o.return;try{xd(4,o)}catch(ae){Jr(o,h,ae)}break;case 1:var g=o.stateNode;if(typeof g.componentDidMount=="function"){var S=o.return;try{g.componentDidMount()}catch(ae){Jr(o,S,ae)}}var P=o.return;try{dp(o)}catch(ae){Jr(o,P,ae)}break;case 5:var B=o.return;try{dp(o)}catch(ae){Jr(o,B,ae)}}}catch(ae){Jr(o,o.return,ae)}if(o===i){yt=null;break}var Q=o.sibling;if(Q!==null){Q.return=o.return,yt=Q;break}yt=o.return}}var Fw=Math.ceil,wd=ee.ReactCurrentDispatcher,mp=ee.ReactCurrentOwner,Js=ee.ReactCurrentBatchConfig,or=0,Fn=null,_n=null,Kn=0,Is=0,Oc=_o(0),Cn=0,Mh=null,zu=0,bd=0,gp=0,Oh=null,hs=null,yp=0,Dc=1/0,ol=null,Sd=!1,vp=null,Kl=null,Ed=!1,Yl=null,Td=0,Dh=0,_p=null,Ad=-1,Cd=0;function Mi(){return(or&6)!==0?rr():Ad!==-1?Ad:Ad=rr()}function Ql(i){return(i.mode&1)===0?1:(or&2)!==0&&Kn!==0?Kn&-Kn:rp.transition!==null?(Cd===0&&(Cd=nn()),Cd):(i=Xt,i!==0||(i=window.event,i=i===void 0?16:yn(i.type)),i)}function Ro(i,o,h,g){if(50<Dh)throw Dh=0,_p=null,Error(t(185));co(i,h,g),((or&2)===0||i!==Fn)&&(i===Fn&&((or&2)===0&&(bd|=h),Cn===4&&Zl(i,Kn)),ds(i,g),h===1&&or===0&&(o.mode&1)===0&&(Dc=rr()+500,ts&&ns()))}function ds(i,o){var h=i.callbackNode;Fs(i,o);var g=Xo(i,i===Fn?Kn:0);if(g===0)h!==null&&ao(h),i.callbackNode=null,i.callbackPriority=0;else if(o=g&-g,i.callbackPriority!==o){if(h!=null&&ao(h),o===1)i.tag===0?hd(jy.bind(null,i)):gh(jy.bind(null,i)),dh(function(){(or&6)===0&&ns()}),h=null;else{switch(Yo(g)){case 1:h=Ui;break;case 4:h=uo;break;case 16:h=$o;break;case 536870912:h=Wn;break;default:h=$o}h=Ky(h,Gy.bind(null,i))}i.callbackPriority=o,i.callbackNode=h}}function Gy(i,o){if(Ad=-1,Cd=0,(or&6)!==0)throw Error(t(327));var h=i.callbackNode;if(Nc()&&i.callbackNode!==h)return null;var g=Xo(i,i===Fn?Kn:0);if(g===0)return null;if((g&30)!==0||(g&i.expiredLanes)!==0||o)o=Pd(i,g);else{o=g;var S=or;or|=2;var P=Hy();(Fn!==i||Kn!==o)&&(ol=null,Dc=rr()+500,Vu(i,o));do try{Gw();break}catch(Q){zy(i,Q)}while(!0);Mu(),wd.current=P,or=S,_n!==null?o=0:(Fn=null,Kn=0,o=Cn)}if(o!==0){if(o===2&&(S=Bs(i),S!==0&&(g=S,o=xp(i,S))),o===1)throw h=Mh,Vu(i,0),Zl(i,g),ds(i,rr()),h;if(o===6)Zl(i,g);else{if(S=i.current.alternate,(g&30)===0&&!Bw(S)&&(o=Pd(i,g),o===2&&(P=Bs(i),P!==0&&(g=P,o=xp(i,P))),o===1))throw h=Mh,Vu(i,0),Zl(i,g),ds(i,rr()),h;switch(i.finishedWork=S,i.finishedLanes=g,o){case 0:case 1:throw Error(t(345));case 2:Wu(i,hs,ol);break;case 3:if(Zl(i,g),(g&130023424)===g&&(o=yp+500-rr(),10<o)){if(Xo(i,0)!==0)break;if(S=i.suspendedLanes,(S&g)!==g){Mi(),i.pingedLanes|=i.suspendedLanes&S;break}i.timeoutHandle=hh(Wu.bind(null,i,hs,ol),o);break}Wu(i,hs,ol);break;case 4:if(Zl(i,g),(g&4194240)===g)break;for(o=i.eventTimes,S=-1;0<g;){var B=31-Pt(g);P=1<<B,B=o[B],B>S&&(S=B),g&=~P}if(g=S,g=rr()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Fw(g/1960))-g,10<g){i.timeoutHandle=hh(Wu.bind(null,i,hs,ol),g);break}Wu(i,hs,ol);break;case 5:Wu(i,hs,ol);break;default:throw Error(t(329))}}}return ds(i,rr()),i.callbackNode===h?Gy.bind(null,i):null}function xp(i,o){var h=Oh;return i.current.memoizedState.isDehydrated&&(Vu(i,o).flags|=256),i=Pd(i,o),i!==2&&(o=hs,hs=h,o!==null&&wp(o)),i}function wp(i){hs===null?hs=i:hs.push.apply(hs,i)}function Bw(i){for(var o=i;;){if(o.flags&16384){var h=o.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var S=h[g],P=S.getSnapshot;S=S.value;try{if(!re(P(),S))return!1}catch{return!1}}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Zl(i,o){for(o&=~gp,o&=~bd,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var h=31-Pt(o),g=1<<h;i[h]=-1,o&=~g}}function jy(i){if((or&6)!==0)throw Error(t(327));Nc();var o=Xo(i,0);if((o&1)===0)return ds(i,rr()),null;var h=Pd(i,o);if(i.tag!==0&&h===2){var g=Bs(i);g!==0&&(o=g,h=xp(i,g))}if(h===1)throw h=Mh,Vu(i,0),Zl(i,o),ds(i,rr()),h;if(h===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Wu(i,hs,ol),ds(i,rr()),null}function bp(i,o){var h=or;or|=1;try{return i(o)}finally{or=h,or===0&&(Dc=rr()+500,ts&&ns())}}function Hu(i){Yl!==null&&Yl.tag===0&&(or&6)===0&&Nc();var o=or;or|=1;var h=Js.transition,g=Xt;try{if(Js.transition=null,Xt=1,i)return i()}finally{Xt=g,Js.transition=h,or=o,(or&6)===0&&ns()}}function Sp(){Is=Oc.current,_r(Oc)}function Vu(i,o){i.finishedWork=null,i.finishedLanes=0;var h=i.timeoutHandle;if(h!==-1&&(i.timeoutHandle=-1,Nl(h)),_n!==null)for(h=_n.return;h!==null;){var g=h;switch(Pu(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Bl();break;case 3:Ii(),_r(En),_r(un),$l();break;case 5:Tc(g);break;case 4:Ii();break;case 13:_r(xr);break;case 19:_r(xr);break;case 10:Ou(g.type._context);break;case 22:case 23:Sp()}h=h.return}if(Fn=i,_n=i=Jl(i.current,null),Kn=Is=o,Cn=0,Mh=null,gp=bd=zu=0,hs=Oh=null,tl!==null){for(o=0;o<tl.length;o++)if(h=tl[o],g=h.interleaved,g!==null){h.interleaved=null;var S=g.next,P=h.pending;if(P!==null){var B=P.next;P.next=S,g.next=B}h.pending=g}tl=null}return i}function zy(i,o){do{var h=_n;try{if(Mu(),Ts.current=ju,cn){for(var g=Er.memoizedState;g!==null;){var S=g.queue;S!==null&&(S.pending=null),g=g.next}cn=!1}if(As=0,Hr=Br=Er=null,cs=!1,Ln=0,mp.current=null,h===null||h.return===null){Cn=1,Mh=o,_n=null;break}e:{var P=i,B=h.return,Q=h,ae=o;if(o=Kn,Q.flags|=32768,ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var Pe=ae,$e=Q,Ye=$e.tag;if(($e.mode&1)===0&&(Ye===0||Ye===11||Ye===15)){var Ve=$e.alternate;Ve?($e.updateQueue=Ve.updateQueue,$e.memoizedState=Ve.memoizedState,$e.lanes=Ve.lanes):($e.updateQueue=null,$e.memoizedState=null)}var ft=_t(B);if(ft!==null){ft.flags&=-257,Wt(ft,B,Q,P,o),ft.mode&1&&tt(P,Pe,o),o=ft,ae=Pe;var xt=o.updateQueue;if(xt===null){var bt=new Set;bt.add(ae),o.updateQueue=bt}else xt.add(ae);break e}else{if((o&1)===0){tt(P,Pe,o),Ep();break e}ae=Error(t(426))}}else if(br&&Q.mode&1){var dn=_t(B);if(dn!==null){(dn.flags&65536)===0&&(dn.flags|=256),Wt(dn,B,Q,P,o),ls(ue(ae,Q));break e}}P=ae=ue(ae,Q),Cn!==4&&(Cn=2),Oh===null?Oh=[P]:Oh.push(P),P=B;do{switch(P.tag){case 3:P.flags|=65536,o&=-o,P.lanes|=o;var we=at(P,ae,o);Zr(P,we);break e;case 1:Q=ae;var ce=P.type,Ee=P.stateNode;if((P.flags&128)===0&&(typeof ce.getDerivedStateFromError=="function"||Ee!==null&&typeof Ee.componentDidCatch=="function"&&(Kl===null||!Kl.has(Ee)))){P.flags|=65536,o&=-o,P.lanes|=o;var it=Be(P,Q,o);Zr(P,it);break e}}P=P.return}while(P!==null)}Wy(h)}catch(Et){o=Et,_n===h&&h!==null&&(_n=h=h.return);continue}break}while(!0)}function Hy(){var i=wd.current;return wd.current=ju,i===null?ju:i}function Ep(){(Cn===0||Cn===3||Cn===2)&&(Cn=4),Fn===null||(zu&268435455)===0&&(bd&268435455)===0||Zl(Fn,Kn)}function Pd(i,o){var h=or;or|=2;var g=Hy();(Fn!==i||Kn!==o)&&(ol=null,Vu(i,o));do try{Uw();break}catch(S){zy(i,S)}while(!0);if(Mu(),or=h,wd.current=g,_n!==null)throw Error(t(261));return Fn=null,Kn=0,Cn}function Uw(){for(;_n!==null;)Vy(_n)}function Gw(){for(;_n!==null&&!kr();)Vy(_n)}function Vy(i){var o=qy(i.alternate,i,Is);i.memoizedProps=i.pendingProps,o===null?Wy(i):_n=o,mp.current=null}function Wy(i){var o=i;do{var h=o.alternate;if(i=o.return,(o.flags&32768)===0){if(h=Mw(h,o,Is),h!==null){_n=h;return}}else{if(h=Ow(h,o),h!==null){h.flags&=32767,_n=h;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Cn=6,_n=null;return}}if(o=o.sibling,o!==null){_n=o;return}_n=o=i}while(o!==null);Cn===0&&(Cn=5)}function Wu(i,o,h){var g=Xt,S=Js.transition;try{Js.transition=null,Xt=1,jw(i,o,h,g)}finally{Js.transition=S,Xt=g}return null}function jw(i,o,h,g){do Nc();while(Yl!==null);if((or&6)!==0)throw Error(t(327));h=i.finishedWork;var S=i.finishedLanes;if(h===null)return null;if(i.finishedWork=null,i.finishedLanes=0,h===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var P=h.lanes|h.childLanes;if(qo(i,P),i===Fn&&(_n=Fn=null,Kn=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Ed||(Ed=!0,Ky($o,function(){return Nc(),null})),P=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||P){P=Js.transition,Js.transition=null;var B=Xt;Xt=1;var Q=or;or|=4,mp.current=null,Nw(i,h),Ny(h,i),me(uh),Mn=!!Dl,uh=Dl=null,i.current=h,Lw(h),lo(),or=Q,Xt=B,Js.transition=P}else i.current=h;if(Ed&&(Ed=!1,Yl=i,Td=S),P=i.pendingLanes,P===0&&(Kl=null),hr(h.stateNode),ds(i,rr()),o!==null)for(g=i.onRecoverableError,h=0;h<o.length;h++)S=o[h],g(S.value,{componentStack:S.stack,digest:S.digest});if(Sd)throw Sd=!1,i=vp,vp=null,i;return(Td&1)!==0&&i.tag!==0&&Nc(),P=i.pendingLanes,(P&1)!==0?i===_p?Dh++:(Dh=0,_p=i):Dh=0,ns(),null}function Nc(){if(Yl!==null){var i=Yo(Td),o=Js.transition,h=Xt;try{if(Js.transition=null,Xt=16>i?16:i,Yl===null)var g=!1;else{if(i=Yl,Yl=null,Td=0,(or&6)!==0)throw Error(t(331));var S=or;for(or|=4,yt=i.current;yt!==null;){var P=yt,B=P.child;if((yt.flags&16)!==0){var Q=P.deletions;if(Q!==null){for(var ae=0;ae<Q.length;ae++){var Pe=Q[ae];for(yt=Pe;yt!==null;){var $e=yt;switch($e.tag){case 0:case 11:case 15:kh(8,$e,P)}var Ye=$e.child;if(Ye!==null)Ye.return=$e,yt=Ye;else for(;yt!==null;){$e=yt;var Ve=$e.sibling,ft=$e.return;if(Ry($e),$e===Pe){yt=null;break}if(Ve!==null){Ve.return=ft,yt=Ve;break}yt=ft}}}var xt=P.alternate;if(xt!==null){var bt=xt.child;if(bt!==null){xt.child=null;do{var dn=bt.sibling;bt.sibling=null,bt=dn}while(bt!==null)}}yt=P}}if((P.subtreeFlags&2064)!==0&&B!==null)B.return=P,yt=B;else e:for(;yt!==null;){if(P=yt,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:kh(9,P,P.return)}var we=P.sibling;if(we!==null){we.return=P.return,yt=we;break e}yt=P.return}}var ce=i.current;for(yt=ce;yt!==null;){B=yt;var Ee=B.child;if((B.subtreeFlags&2064)!==0&&Ee!==null)Ee.return=B,yt=Ee;else e:for(B=ce;yt!==null;){if(Q=yt,(Q.flags&2048)!==0)try{switch(Q.tag){case 0:case 11:case 15:xd(9,Q)}}catch(Et){Jr(Q,Q.return,Et)}if(Q===B){yt=null;break e}var it=Q.sibling;if(it!==null){it.return=Q.return,yt=it;break e}yt=Q.return}}if(or=S,ns(),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(si,i)}catch{}g=!0}return g}finally{Xt=h,Js.transition=o}}return!1}function $y(i,o,h){o=ue(h,o),o=at(i,o,1),i=Qr(i,o,1),o=Mi(),i!==null&&(co(i,1,o),ds(i,o))}function Jr(i,o,h){if(i.tag===3)$y(i,i,h);else for(;o!==null;){if(o.tag===3){$y(o,i,h);break}else if(o.tag===1){var g=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Kl===null||!Kl.has(g))){i=ue(h,i),i=Be(o,i,1),o=Qr(o,i,1),i=Mi(),o!==null&&(co(o,1,i),ds(o,i));break}}o=o.return}}function zw(i,o,h){var g=i.pingCache;g!==null&&g.delete(o),o=Mi(),i.pingedLanes|=i.suspendedLanes&h,Fn===i&&(Kn&h)===h&&(Cn===4||Cn===3&&(Kn&130023424)===Kn&&500>rr()-yp?Vu(i,0):gp|=h),ds(i,o)}function Xy(i,o){o===0&&((i.mode&1)===0?o=1:(o=rn,rn<<=1,(rn&130023424)===0&&(rn=4194304)));var h=Mi();i=fr(i,o),i!==null&&(co(i,o,h),ds(i,h))}function Hw(i){var o=i.memoizedState,h=0;o!==null&&(h=o.retryLane),Xy(i,h)}function Vw(i,o){var h=0;switch(i.tag){case 13:var g=i.stateNode,S=i.memoizedState;S!==null&&(h=S.retryLane);break;case 19:g=i.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(o),Xy(i,h)}var qy;qy=function(i,o,h){if(i!==null)if(i.memoizedProps!==o.pendingProps||En.current)pe=!0;else{if((i.lanes&h)===0&&(o.flags&128)===0)return pe=!1,kw(i,o,h);pe=(i.flags&131072)!==0}else pe=!1,br&&(o.flags&1048576)!==0&&jl(o,Ka,o.index);switch(o.lanes=0,o.tag){case 2:var g=o.type;vd(i,o),i=o.pendingProps;var S=fa(o,un.current);el(o,h),S=Fu(null,o,g,i,S,h);var P=Qs();return o.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Xn(g)?(P=!0,Ul(o)):P=!1,o.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Yr(o),S.updater=v,o.stateNode=S,S._reactInternals=o,$(o,g,i,h),o=Zs(null,o,g,!0,P,h)):(o.tag=0,br&&P&&zl(o),Ie(null,o,S,h),o=o.child),o;case 16:g=o.elementType;e:{switch(vd(i,o),i=o.pendingProps,S=g._init,g=S(g._payload),o.type=g,S=o.tag=$w(g),i=l(g,i),S){case 0:o=hn(null,o,g,i,h);break e;case 1:o=sr(null,o,g,i,h);break e;case 11:o=qe(null,o,g,i,h);break e;case 14:o=At(null,o,g,l(g.type,i),h);break e}throw Error(t(306,g,""))}return o;case 0:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:l(g,S),hn(i,o,g,S,h);case 1:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:l(g,S),sr(i,o,g,S,h);case 3:e:{if(gd(o),i===null)throw Error(t(387));g=o.pendingProps,P=o.memoizedState,S=P.element,zr(i,o),ma(o,g,null,h);var B=o.memoizedState;if(g=B.element,P.isDehydrated)if(P={element:g,isDehydrated:!1,cache:B.cache,pendingSuspenseBoundaries:B.pendingSuspenseBoundaries,transitions:B.transitions},o.updateQueue.baseState=P,o.memoizedState=P,o.flags&256){S=ue(Error(t(423)),o),o=by(i,o,g,h,S);break e}else if(g!==S){S=ue(Error(t(424)),o),o=by(i,o,g,h,S);break e}else for(di=vo(o.stateNode.containerInfo.firstChild),hi=o,br=!0,Pi=null,h=ku(o,null,g,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Ya(),g===S){o=sl(i,o,h);break e}Ie(i,o,g,h)}o=o.child}return o;case 5:return rl(o),i===null&&os(o),g=o.type,S=o.pendingProps,P=i!==null?i.memoizedProps:null,B=S.children,ch(g,S)?B=null:P!==null&&ch(g,P)&&(o.flags|=32),tr(i,o),Ie(i,o,B,h),o.child;case 6:return i===null&&os(o),null;case 13:return Sy(i,o,h);case 4:return Nu(o,o.stateNode.containerInfo),g=o.pendingProps,i===null?o.child=wo(o,null,g,h):Ie(i,o,g,h),o.child;case 11:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:l(g,S),qe(i,o,g,S,h);case 7:return Ie(i,o,o.pendingProps,h),o.child;case 8:return Ie(i,o,o.pendingProps.children,h),o.child;case 12:return Ie(i,o,o.pendingProps.children,h),o.child;case 10:e:{if(g=o.type._context,S=o.pendingProps,P=o.memoizedProps,B=S.value,lr(Qa,g._currentValue),g._currentValue=B,P!==null)if(re(P.value,B)){if(P.children===S.children&&!En.current){o=sl(i,o,h);break e}}else for(P=o.child,P!==null&&(P.return=o);P!==null;){var Q=P.dependencies;if(Q!==null){B=P.child;for(var ae=Q.firstContext;ae!==null;){if(ae.context===g){if(P.tag===1){ae=Sr(-1,h&-h),ae.tag=2;var Pe=P.updateQueue;if(Pe!==null){Pe=Pe.shared;var $e=Pe.pending;$e===null?ae.next=ae:(ae.next=$e.next,$e.next=ae),Pe.pending=ae}}P.lanes|=h,ae=P.alternate,ae!==null&&(ae.lanes|=h),Du(P.return,h,o),Q.lanes|=h;break}ae=ae.next}}else if(P.tag===10)B=P.type===o.type?null:P.child;else if(P.tag===18){if(B=P.return,B===null)throw Error(t(341));B.lanes|=h,Q=B.alternate,Q!==null&&(Q.lanes|=h),Du(B,h,o),B=P.sibling}else B=P.child;if(B!==null)B.return=P;else for(B=P;B!==null;){if(B===o){B=null;break}if(P=B.sibling,P!==null){P.return=B.return,B=P;break}B=B.return}P=B}Ie(i,o,S.children,h),o=o.child}return o;case 9:return S=o.type,g=o.pendingProps.children,el(o,h),S=fi(S),g=g(S),o.flags|=1,Ie(i,o,g,h),o.child;case 14:return g=o.type,S=l(g,o.pendingProps),S=l(g.type,S),At(i,o,g,S,h);case 15:return ir(i,o,o.type,o.pendingProps,h);case 17:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:l(g,S),vd(i,o),o.tag=1,Xn(g)?(i=!0,Ul(o)):i=!1,el(o,h),C(o,g,S),$(o,g,S,h),Zs(null,o,g,!0,i,h);case 19:return Ty(i,o,h);case 22:return wt(i,o,h)}throw Error(t(156,o.tag))};function Ky(i,o){return La(i,o)}function Ww(i,o,h,g){this.tag=i,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function eo(i,o,h,g){return new Ww(i,o,h,g)}function Tp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function $w(i){if(typeof i=="function")return Tp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===ge)return 11;if(i===Ke)return 14}return 2}function Jl(i,o){var h=i.alternate;return h===null?(h=eo(i.tag,o,i.key,i.mode),h.elementType=i.elementType,h.type=i.type,h.stateNode=i.stateNode,h.alternate=i,i.alternate=h):(h.pendingProps=o,h.type=i.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=i.flags&14680064,h.childLanes=i.childLanes,h.lanes=i.lanes,h.child=i.child,h.memoizedProps=i.memoizedProps,h.memoizedState=i.memoizedState,h.updateQueue=i.updateQueue,o=i.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=i.sibling,h.index=i.index,h.ref=i.ref,h}function Id(i,o,h,g,S,P){var B=2;if(g=i,typeof i=="function")Tp(i)&&(B=1);else if(typeof i=="string")B=5;else e:switch(i){case F:return $u(h.children,S,P,o);case ie:B=8,S|=8;break;case ye:return i=eo(12,h,o,S|2),i.elementType=ye,i.lanes=P,i;case _e:return i=eo(13,h,o,S),i.elementType=_e,i.lanes=P,i;case xe:return i=eo(19,h,o,S),i.elementType=xe,i.lanes=P,i;case V:return Rd(h,S,P,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Ne:B=10;break e;case Ce:B=9;break e;case ge:B=11;break e;case Ke:B=14;break e;case H:B=16,g=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=eo(B,h,o,S),o.elementType=i,o.type=g,o.lanes=P,o}function $u(i,o,h,g){return i=eo(7,i,g,o),i.lanes=h,i}function Rd(i,o,h,g){return i=eo(22,i,g,o),i.elementType=V,i.lanes=h,i.stateNode={isHidden:!1},i}function Ap(i,o,h){return i=eo(6,i,null,o),i.lanes=h,i}function Cp(i,o,h){return o=eo(4,i.children!==null?i.children:[],i.key,o),o.lanes=h,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function Xw(i,o,h,g,S){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ba(0),this.expirationTimes=Ba(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ba(0),this.identifierPrefix=g,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function Pp(i,o,h,g,S,P,B,Q,ae){return i=new Xw(i,o,h,Q,ae),o===1?(o=1,P===!0&&(o|=8)):o=0,P=eo(3,null,null,o),i.current=P,P.stateNode=i,P.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yr(P),i}function qw(i,o,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:de,key:g==null?null:""+g,children:i,containerInfo:o,implementation:h}}function Yy(i){if(!i)return Ji;i=i._reactInternals;e:{if($r(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Xn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var h=i.type;if(Xn(h))return ph(i,h,o)}return o}function Qy(i,o,h,g,S,P,B,Q,ae){return i=Pp(h,g,!0,i,S,P,B,Q,ae),i.context=Yy(null),h=i.current,g=Mi(),S=Ql(h),P=Sr(g,S),P.callback=o??null,Qr(h,P,S),i.current.lanes=S,co(i,S,g),ds(i,g),i}function kd(i,o,h,g){var S=o.current,P=Mi(),B=Ql(S);return h=Yy(h),o.context===null?o.context=h:o.pendingContext=h,o=Sr(P,B),o.payload={element:i},g=g===void 0?null:g,g!==null&&(o.callback=g),i=Qr(S,o,B),i!==null&&(Ro(i,S,B,P),So(i,S,B)),B}function Md(i){return i=i.current,i.child?(i.child.tag===5,i.child.stateNode):null}function Zy(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var h=i.retryLane;i.retryLane=h!==0&&h<o?h:o}}function Ip(i,o){Zy(i,o),(i=i.alternate)&&Zy(i,o)}function Kw(){return null}var Jy=typeof reportError=="function"?reportError:function(i){console.error(i)};function Rp(i){this._internalRoot=i}Od.prototype.render=Rp.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));kd(i,o,null,null)},Od.prototype.unmount=Rp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Hu(function(){kd(null,i,null,null)}),o[Fr]=null}};function Od(i){this._internalRoot=i}Od.prototype.unstable_scheduleHydration=function(i){if(i){var o=Sl();i={blockedOn:null,target:i,priority:o};for(var h=0;h<Yt.length&&o!==0&&o<Yt[h].priority;h++);Yt.splice(h,0,i),h===0&&Ua(i)}};function kp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Dd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function ev(){}function Yw(i,o,h,g,S){if(S){if(typeof g=="function"){var P=g;g=function(){var Pe=Md(B);P.call(Pe)}}var B=Qy(o,g,i,0,null,!1,!1,"",ev);return i._reactRootContainer=B,i[Fr]=B.current,kl(i.nodeType===8?i.parentNode:i),Hu(),B}for(;S=i.lastChild;)i.removeChild(S);if(typeof g=="function"){var Q=g;g=function(){var Pe=Md(ae);Q.call(Pe)}}var ae=Pp(i,0,!1,null,null,!1,!1,"",ev);return i._reactRootContainer=ae,i[Fr]=ae.current,kl(i.nodeType===8?i.parentNode:i),Hu(function(){kd(o,ae,h,g)}),ae}function Nd(i,o,h,g,S){var P=h._reactRootContainer;if(P){var B=P;if(typeof S=="function"){var Q=S;S=function(){var ae=Md(B);Q.call(ae)}}kd(o,B,i,S)}else B=Yw(h,o,i,S,g);return Md(B)}hc=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var h=Ls(o.pendingLanes);h!==0&&(Ko(o,h|1),ds(o,rr()),(or&6)===0&&(Dc=rr()+500,ns()))}break;case 13:Hu(function(){var g=fr(i,1);if(g!==null){var S=Mi();Ro(g,i,1,S)}}),Ip(i,1)}},qt=function(i){if(i.tag===13){var o=fr(i,134217728);if(o!==null){var h=Mi();Ro(o,i,134217728,h)}Ip(i,134217728)}},bl=function(i){if(i.tag===13){var o=Ql(i),h=fr(i,o);if(h!==null){var g=Mi();Ro(h,i,o,g)}Ip(i,o)}},Sl=function(){return Xt},Qo=function(i,o){var h=Xt;try{return Xt=i,o()}finally{Xt=h}},ze=function(i,o,h){switch(o){case"input":if(pr(i,h),o=h.name,h.type==="radio"&&o!=null){for(h=i;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<h.length;o++){var g=h[o];if(g!==i&&g.form===i.form){var S=Fl(g);if(!S)throw Error(t(90));et(g),pr(g,S)}}}break;case"textarea":In(i,h);break;case"select":o=h.value,o!=null&&cr(i,!!h.multiple,o,!1)}},Vo=bp,xi=Hu;var Qw={usingClientEntryPoint:!1,Events:[Ll,qa,Fl,Wr,Rn,bp]},Nh={findFiberByHostInstance:ha,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zw={bundleType:Nh.bundleType,version:Nh.version,rendererPackageName:Nh.rendererPackageName,rendererConfig:Nh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Bi(i),i===null?null:i.stateNode},findFiberByHostInstance:Nh.findFiberByHostInstance||Kw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ld.isDisabled&&Ld.supportsFiber)try{si=Ld.inject(Zw),$t=Ld}catch{}}return fs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qw,fs.createPortal=function(i,o){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kp(o))throw Error(t(200));return qw(i,o,null,h)},fs.createRoot=function(i,o){if(!kp(i))throw Error(t(299));var h=!1,g="",S=Jy;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),o=Pp(i,1,!1,null,null,h,!1,g,S),i[Fr]=o.current,kl(i.nodeType===8?i.parentNode:i),new Rp(o)},fs.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Bi(o),i=i===null?null:i.stateNode,i},fs.flushSync=function(i){return Hu(i)},fs.hydrate=function(i,o,h){if(!Dd(o))throw Error(t(200));return Nd(null,i,o,!0,h)},fs.hydrateRoot=function(i,o,h){if(!kp(i))throw Error(t(405));var g=h!=null&&h.hydratedSources||null,S=!1,P="",B=Jy;if(h!=null&&(h.unstable_strictMode===!0&&(S=!0),h.identifierPrefix!==void 0&&(P=h.identifierPrefix),h.onRecoverableError!==void 0&&(B=h.onRecoverableError)),o=Qy(o,null,i,1,h??null,S,!1,P,B),i[Fr]=o.current,kl(i),g)for(i=0;i<g.length;i++)h=g[i],S=h._getVersion,S=S(h._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[h,S]:o.mutableSourceEagerHydrationData.push(h,S);return new Od(o)},fs.render=function(i,o,h){if(!Dd(o))throw Error(t(200));return Nd(null,i,o,!1,h)},fs.unmountComponentAtNode=function(i){if(!Dd(i))throw Error(t(40));return i._reactRootContainer?(Hu(function(){Nd(null,null,i,!1,function(){i._reactRootContainer=null,i[Fr]=null})}),!0):!1},fs.unstable_batchedUpdates=bp,fs.unstable_renderSubtreeIntoContainer=function(i,o,h,g){if(!Dd(h))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Nd(i,o,h,!1,g)},fs.version="18.3.1-next-f1338f8080-20240426",fs}var lv;function o1(){if(lv)return Dp.exports;lv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Dp.exports=s1(),Dp.exports}var uv;function a1(){if(uv)return Fd;uv=1;var n=o1();return Fd.createRoot=n.createRoot,Fd.hydrateRoot=n.hydrateRoot,Fd}var l1=a1();const u1=nh(l1);function c1(n){return new Worker("/LuckyRepo/assets/logic.worker-B7OYqbrk.js",{name:n?.name})}let eh=class zh{static instance;logic;sharedBuffer;sharedView;isInitialized=!1;activeStateName=null;activeInstanceId=null;constructor(){if(this.logic=new c1,typeof SharedArrayBuffer>"u")throw new Error("COOP/COEP headers missing for SharedArrayBuffer.");this.logic.onerror=e=>console.error("Logic Worker Error:",e)}static getInstance(){return zh.instance||(zh.instance=new zh),zh.instance}setupBuffer(e,t=!1){this.isInitialized=!1;const r=e.BUFFER_SIZE*4;this.sharedBuffer=new SharedArrayBuffer(r),new Float32Array(this.sharedBuffer).fill(0),this.sharedView=new Float32Array(this.sharedBuffer),this.logic.postMessage({type:"INIT_SAB",payload:{buffer:this.sharedBuffer}}),this.isInitialized=!0}prepareForState(e){const t=crypto.randomUUID();return this.activeStateName!==e&&(this.isInitialized=!1),this.activeInstanceId=t,this.activeStateName=e,t}createState(e,t=!1){this.logic.postMessage({type:"CREATE_STATE",stateName:e,payload:{force:t}})}terminateState(e,t){t&&t!==this.activeInstanceId||(this.activeStateName===e&&(this.activeStateName=null,this.activeInstanceId=null,this.isInitialized=!1),this.logic.postMessage({type:"TERMINATE_STATE",stateName:e}))}sendInput(e,t,r={}){this.logic.postMessage({type:"INPUT",stateName:e,payload:{action:t,...r}})}tick(e,t,r){!this.isInitialized||!this.sharedView||e!==this.activeStateName||this.logic.postMessage({type:"TICK",stateName:e,frameCount:t,fps:r})}forceClearWorker(){this.isInitialized=!1,this.activeStateName=null,this.activeInstanceId=null,this.logic.postMessage({type:"TERMINATE_ALL"})}};function h1(n){return new Worker("/LuckyRepo/assets/view.worker-C-6Y4eVh.js",{name:n?.name})}class Lo{static instance;worker;sharedBuffer;sharedView;isInitialized=!1;activeStateName=null;activeInstanceId=null;constructor(){this.worker=new h1,this.worker.onerror=e=>console.error("View Worker Error:",e)}static getInstance(){return Lo.instance||(Lo.instance=new Lo),Lo.instance}setupBuffers(e,t){this.isInitialized=!1;const r=t.BUFFER_SIZE*4;this.sharedBuffer=new SharedArrayBuffer(r),this.sharedView=new Float32Array(this.sharedBuffer),this.sharedView.fill(0),this.worker.postMessage({type:"INIT_SABS",payload:{inputBuffer:e,outputBuffer:this.sharedBuffer}}),this.isInitialized=!0}prepareForState(e){const t=crypto.randomUUID();return this.activeStateName!==e&&(this.isInitialized=!1),this.activeInstanceId=t,this.activeStateName=e,t}createState(e){this.worker.postMessage({type:"CREATE_STATE",stateName:e})}terminateState(e,t){t&&t!==this.activeInstanceId||(this.activeStateName===e&&(this.activeStateName=null,this.activeInstanceId=null,this.isInitialized=!1),this.worker.postMessage({type:"TERMINATE_STATE",stateName:e}))}tick(e,t,r){!this.isInitialized||!this.sharedView||e!==this.activeStateName||this.worker.postMessage({type:"TICK",stateName:e,dt:t,frameCount:r})}forceClearWorker(){this.isInitialized=!1,this.activeStateName=null,this.activeInstanceId=null,this.worker.postMessage({type:"TERMINATE_ALL"})}sendInput(e,t,r={}){this.worker.postMessage({type:"INPUT",stateName:e,payload:{action:t,...r}})}loadSnapshot(e,t){this.worker.postMessage({type:"INPUT",stateName:e,payload:{action:"LOAD_SNAPSHOT",data:t}})}}class ou{static instance;isHoveringButton=!1;isMouseDown=!1;activeKeys=new Set;constructor(){this.setupGlobalListeners()}static getInstance(){return ou.instance||(ou.instance=new ou),ou.instance}getSnapshot(){return{isHoveringButton:this.isHoveringButton,isMouseDown:this.isMouseDown,keys:new Set(this.activeKeys)}}isKeyDown(e){return this.activeKeys.has(e.toUpperCase())}reset(){this.activeKeys.clear(),this.isMouseDown=!1,this.isHoveringButton=!1}setupGlobalListeners(){window.addEventListener("keydown",e=>{this.activeKeys.add(e.key.toUpperCase())}),window.addEventListener("keyup",e=>{this.activeKeys.delete(e.key.toUpperCase())}),window.addEventListener("mousedown",()=>{this.isMouseDown=!0}),window.addEventListener("mouseup",()=>{this.isMouseDown=!1}),window.addEventListener("mouseover",e=>{const t=e.target;this.isHoveringButton=!!t.closest("button, .interactable")}),window.addEventListener("blur",()=>{this.reset()})}}class au{static instance;TARGET_FPS=60;MS_PER_FRAME=1e3/this.TARGET_FPS;lastFrameTime=0;isRunning=!1;requestRef=0;frameCount=0;fps=0;lastFpsUpdate=0;framesSinceLastUpdate=0;constructor(){}static getInstance(){return au.instance||(au.instance=new au),au.instance}start(){this.isRunning||(this.isRunning=!0,this.lastFrameTime=performance.now(),this.lastFpsUpdate=performance.now(),ou.getInstance(),this.requestRef=requestAnimationFrame(this.loop),console.log("[Engine] Core Loop Started"))}stop(){this.isRunning=!1,cancelAnimationFrame(this.requestRef),console.log("[Engine] Core Loop Stopped")}loop=e=>{if(!this.isRunning)return;const t=e-this.lastFrameTime;if(t<this.MS_PER_FRAME){this.requestRef=requestAnimationFrame(this.loop);return}this.lastFrameTime=e-t%this.MS_PER_FRAME;const r=Ur.getInstance();if(r.stack.length===0){this.requestRef=requestAnimationFrame(this.loop);return}this.framesSinceLastUpdate++,e>this.lastFpsUpdate+1e3&&(this.fps=Math.round(this.framesSinceLastUpdate*1e3/(e-this.lastFpsUpdate)),this.lastFpsUpdate=e,this.framesSinceLastUpdate=0),this.dispatchLogicTick(r),this.dispatchViewTick(r,this.MS_PER_FRAME),r.updateAll(this.MS_PER_FRAME,this.frameCount),this.frameCount++,this.requestRef=requestAnimationFrame(this.loop)};dispatchLogicTick(e){const t=eh.getInstance(),r=t.activeStateName;if(!r)return;const a=e.stack.find(m=>m.name===r);if(!a||!a.isUpdating)return;const f=ou.getInstance().getSnapshot();t.sendInput(r,"SYNC_INPUT",{keys:Array.from(f.keys),isMouseDown:f.isMouseDown,isHovering:f.isHoveringButton}),t.tick(r,this.frameCount,this.fps||60)}dispatchViewTick(e,t){const r=Lo.getInstance(),s=r.activeStateName;if(!s)return;const c=e.stack.find(m=>m.name===s);if(!c||!c.isRendering)return;const f=c.isUpdating?t:0;r.tick(s,f,this.frameCount)}}let Bf=class{isUpdating=!1;isRendering=!1;priority=0;isInitialized=!1;update(e,t){}};const d1=({isFinished:n,onTransitionComplete:e})=>(It.useEffect(()=>{n&&e()},[n,e]),ke.jsx("div",{style:{position:"absolute",inset:0,background:"#000",display:"flex",alignItems:"center",justifyContent:"center"},children:ke.jsx("div",{style:{width:"100%",height:"100%",maxWidth:"calc(100vh * (16 / 9))",maxHeight:"calc(100vw * (9 / 16))",aspectRatio:"16 / 9",backgroundColor:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center"},children:ke.jsx("div",{style:{color:"#000",fontFamily:"monospace",fontWeight:"bold"},children:"LOADING..."})})}));var uc=(n=>(n[n.WEBGL_LEGACY=0]="WEBGL_LEGACY",n[n.WEBGL=1]="WEBGL",n[n.WEBGL2=2]="WEBGL2",n))(uc||{}),G0=(n=>(n[n.UNKNOWN=0]="UNKNOWN",n[n.WEBGL=1]="WEBGL",n[n.CANVAS=2]="CANVAS",n))(G0||{}),pg=(n=>(n[n.COLOR=16384]="COLOR",n[n.DEPTH=256]="DEPTH",n[n.STENCIL=1024]="STENCIL",n))(pg||{}),Ot=(n=>(n[n.NORMAL=0]="NORMAL",n[n.ADD=1]="ADD",n[n.MULTIPLY=2]="MULTIPLY",n[n.SCREEN=3]="SCREEN",n[n.OVERLAY=4]="OVERLAY",n[n.DARKEN=5]="DARKEN",n[n.LIGHTEN=6]="LIGHTEN",n[n.COLOR_DODGE=7]="COLOR_DODGE",n[n.COLOR_BURN=8]="COLOR_BURN",n[n.HARD_LIGHT=9]="HARD_LIGHT",n[n.SOFT_LIGHT=10]="SOFT_LIGHT",n[n.DIFFERENCE=11]="DIFFERENCE",n[n.EXCLUSION=12]="EXCLUSION",n[n.HUE=13]="HUE",n[n.SATURATION=14]="SATURATION",n[n.COLOR=15]="COLOR",n[n.LUMINOSITY=16]="LUMINOSITY",n[n.NORMAL_NPM=17]="NORMAL_NPM",n[n.ADD_NPM=18]="ADD_NPM",n[n.SCREEN_NPM=19]="SCREEN_NPM",n[n.NONE=20]="NONE",n[n.SRC_OVER=0]="SRC_OVER",n[n.SRC_IN=21]="SRC_IN",n[n.SRC_OUT=22]="SRC_OUT",n[n.SRC_ATOP=23]="SRC_ATOP",n[n.DST_OVER=24]="DST_OVER",n[n.DST_IN=25]="DST_IN",n[n.DST_OUT=26]="DST_OUT",n[n.DST_ATOP=27]="DST_ATOP",n[n.ERASE=26]="ERASE",n[n.SUBTRACT=28]="SUBTRACT",n[n.XOR=29]="XOR",n))(Ot||{}),Fo=(n=>(n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",n))(Fo||{}),nt=(n=>(n[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.RG=33319]="RG",n[n.RED=6403]="RED",n[n.RGBA_INTEGER=36249]="RGBA_INTEGER",n[n.RGB_INTEGER=36248]="RGB_INTEGER",n[n.RG_INTEGER=33320]="RG_INTEGER",n[n.RED_INTEGER=36244]="RED_INTEGER",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n))(nt||{}),qc=(n=>(n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n))(qc||{}),Ct=(n=>(n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",n[n.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",n[n.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",n[n.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",n[n.BYTE=5120]="BYTE",n[n.SHORT=5122]="SHORT",n[n.INT=5124]="INT",n[n.FLOAT=5126]="FLOAT",n[n.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",n[n.HALF_FLOAT=36193]="HALF_FLOAT",n))(Ct||{}),pt=(n=>(n[n.FLOAT=0]="FLOAT",n[n.INT=1]="INT",n[n.UINT=2]="UINT",n))(pt||{}),hl=(n=>(n[n.NEAREST=0]="NEAREST",n[n.LINEAR=1]="LINEAR",n))(hl||{}),pl=(n=>(n[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n))(pl||{}),Ma=(n=>(n[n.OFF=0]="OFF",n[n.POW2=1]="POW2",n[n.ON=2]="ON",n[n.ON_MANUAL=3]="ON_MANUAL",n))(Ma||{}),ps=(n=>(n[n.NPM=0]="NPM",n[n.UNPACK=1]="UNPACK",n[n.PMA=2]="PMA",n[n.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",n[n.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",n[n.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",n))(ps||{}),Ta=(n=>(n[n.NO=0]="NO",n[n.YES=1]="YES",n[n.AUTO=2]="AUTO",n[n.BLEND=0]="BLEND",n[n.CLEAR=1]="CLEAR",n[n.BLIT=2]="BLIT",n))(Ta||{}),uy=(n=>(n[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL",n))(uy||{}),no=(n=>(n.LOW="lowp",n.MEDIUM="mediump",n.HIGH="highp",n))(no||{}),Pn=(n=>(n[n.NONE=0]="NONE",n[n.SCISSOR=1]="SCISSOR",n[n.STENCIL=2]="STENCIL",n[n.SPRITE=3]="SPRITE",n[n.COLOR=4]="COLOR",n))(Pn||{}),xn=(n=>(n[n.NONE=0]="NONE",n[n.LOW=2]="LOW",n[n.MEDIUM=4]="MEDIUM",n[n.HIGH=8]="HIGH",n))(xn||{}),Ra=(n=>(n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",n))(Ra||{});const f1={createCanvas:(n,e)=>{const t=document.createElement("canvas");return t.width=n,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,e)=>fetch(n,e),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")},mt={ADAPTER:f1,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Fp=/iPhone/i,cv=/iPod/i,hv=/iPad/i,dv=/\biOS-universal(?:.+)Mac\b/i,Bp=/\bAndroid(?:.+)Mobile\b/i,fv=/Android/i,Lc=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Bd=/Silk/i,al=/Windows Phone/i,pv=/\bWindows(?:.+)ARM\b/i,mv=/BlackBerry/i,gv=/BB10/i,yv=/Opera Mini/i,vv=/\b(CriOS|Chrome)(?:.+)Mobile/i,_v=/Mobile(?:.+)Firefox\b/i,xv=function(n){return typeof n<"u"&&n.platform==="MacIntel"&&typeof n.maxTouchPoints=="number"&&n.maxTouchPoints>1&&typeof MSStream>"u"};function p1(n){return function(e){return e.test(n)}}function wv(n){var e={userAgent:"",platform:"",maxTouchPoints:0};!n&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof n=="string"?e.userAgent=n:n&&n.userAgent&&(e={userAgent:n.userAgent,platform:n.platform,maxTouchPoints:n.maxTouchPoints||0});var t=e.userAgent,r=t.split("[FBAN");typeof r[1]<"u"&&(t=r[0]),r=t.split("Twitter"),typeof r[1]<"u"&&(t=r[0]);var s=p1(t),a={apple:{phone:s(Fp)&&!s(al),ipod:s(cv),tablet:!s(Fp)&&(s(hv)||xv(e))&&!s(al),universal:s(dv),device:(s(Fp)||s(cv)||s(hv)||s(dv)||xv(e))&&!s(al)},amazon:{phone:s(Lc),tablet:!s(Lc)&&s(Bd),device:s(Lc)||s(Bd)},android:{phone:!s(al)&&s(Lc)||!s(al)&&s(Bp),tablet:!s(al)&&!s(Lc)&&!s(Bp)&&(s(Bd)||s(fv)),device:!s(al)&&(s(Lc)||s(Bd)||s(Bp)||s(fv))||s(/\bokhttp\b/i)},windows:{phone:s(al),tablet:s(pv),device:s(al)||s(pv)},other:{blackberry:s(mv),blackberry10:s(gv),opera:s(yv),firefox:s(_v),chrome:s(vv),device:s(mv)||s(gv)||s(yv)||s(_v)||s(vv)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}const m1=wv.default??wv,dl=m1(globalThis.navigator);mt.RETINA_PREFIX=/@([0-9\.]+)x/;mt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Up={exports:{}},bv;function g1(){return bv||(bv=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function s(m,_,w){this.fn=m,this.context=_,this.once=w||!1}function a(m,_,w,d,y){if(typeof w!="function")throw new TypeError("The listener must be a function");var b=new s(w,d||m,y),T=t?t+_:_;return m._events[T]?m._events[T].fn?m._events[T]=[m._events[T],b]:m._events[T].push(b):(m._events[T]=b,m._eventsCount++),m}function c(m,_){--m._eventsCount===0?m._events=new r:delete m._events[_]}function f(){this._events=new r,this._eventsCount=0}f.prototype.eventNames=function(){var _=[],w,d;if(this._eventsCount===0)return _;for(d in w=this._events)e.call(w,d)&&_.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(w)):_},f.prototype.listeners=function(_){var w=t?t+_:_,d=this._events[w];if(!d)return[];if(d.fn)return[d.fn];for(var y=0,b=d.length,T=new Array(b);y<b;y++)T[y]=d[y].fn;return T},f.prototype.listenerCount=function(_){var w=t?t+_:_,d=this._events[w];return d?d.fn?1:d.length:0},f.prototype.emit=function(_,w,d,y,b,T){var I=t?t+_:_;if(!this._events[I])return!1;var k=this._events[I],N=arguments.length,W,j;if(k.fn){switch(k.once&&this.removeListener(_,k.fn,void 0,!0),N){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,w),!0;case 3:return k.fn.call(k.context,w,d),!0;case 4:return k.fn.call(k.context,w,d,y),!0;case 5:return k.fn.call(k.context,w,d,y,b),!0;case 6:return k.fn.call(k.context,w,d,y,b,T),!0}for(j=1,W=new Array(N-1);j<N;j++)W[j-1]=arguments[j];k.fn.apply(k.context,W)}else{var ee=k.length,X;for(j=0;j<ee;j++)switch(k[j].once&&this.removeListener(_,k[j].fn,void 0,!0),N){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,w);break;case 3:k[j].fn.call(k[j].context,w,d);break;case 4:k[j].fn.call(k[j].context,w,d,y);break;default:if(!W)for(X=1,W=new Array(N-1);X<N;X++)W[X-1]=arguments[X];k[j].fn.apply(k[j].context,W)}}return!0},f.prototype.on=function(_,w,d){return a(this,_,w,d,!1)},f.prototype.once=function(_,w,d){return a(this,_,w,d,!0)},f.prototype.removeListener=function(_,w,d,y){var b=t?t+_:_;if(!this._events[b])return this;if(!w)return c(this,b),this;var T=this._events[b];if(T.fn)T.fn===w&&(!y||T.once)&&(!d||T.context===d)&&c(this,b);else{for(var I=0,k=[],N=T.length;I<N;I++)(T[I].fn!==w||y&&!T[I].once||d&&T[I].context!==d)&&k.push(T[I]);k.length?this._events[b]=k.length===1?k[0]:k:c(this,b)}return this},f.prototype.removeAllListeners=function(_){var w;return _?(w=t?t+_:_,this._events[w]&&c(this,w)):(this._events=new r,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=t,f.EventEmitter=f,n.exports=f})(Up)),Up.exports}var y1=g1();const od=nh(y1);var Ud={exports:{}},Sv;function v1(){if(Sv)return Ud.exports;Sv=1,Ud.exports=n,Ud.exports.default=n;function n(H,V,D){D=D||2;var K=V&&V.length,G=K?V[0]*D:H.length,U=e(H,0,G,D,!0),q=[];if(!U||U.next===U.prev)return q;var le,Te,Oe,Fe,He,Je,Re;if(K&&(U=m(H,V,U,D)),H.length>80*D){le=Oe=H[0],Te=Fe=H[1];for(var je=D;je<G;je+=D)He=H[je],Je=H[je+1],He<le&&(le=He),Je<Te&&(Te=Je),He>Oe&&(Oe=He),Je>Fe&&(Fe=Je);Re=Math.max(Oe-le,Fe-Te),Re=Re!==0?32767/Re:0}return r(U,q,D,le,Te,Re,0),q}function e(H,V,D,K,G){var U,q;if(G===Ke(H,V,D,K)>0)for(U=V;U<D;U+=K)q=ge(U,H[U],H[U+1],q);else for(U=D-K;U>=V;U-=K)q=ge(U,H[U],H[U+1],q);return q&&ee(q,q.next)&&(_e(q),q=q.next),q}function t(H,V){if(!H)return H;V||(V=H);var D=H,K;do if(K=!1,!D.steiner&&(ee(D,D.next)||j(D.prev,D,D.next)===0)){if(_e(D),D=V=D.prev,D===D.next)break;K=!0}else D=D.next;while(K||D!==V);return V}function r(H,V,D,K,G,U,q){if(H){!q&&U&&b(H,K,G,U);for(var le=H,Te,Oe;H.prev!==H.next;){if(Te=H.prev,Oe=H.next,U?a(H,K,G,U):s(H)){V.push(Te.i/D|0),V.push(H.i/D|0),V.push(Oe.i/D|0),_e(H),H=Oe.next,le=Oe.next;continue}if(H=Oe,H===le){q?q===1?(H=c(t(H),V,D),r(H,V,D,K,G,U,2)):q===2&&f(H,V,D,K,G,U):r(t(H),V,D,K,G,U,1);break}}}}function s(H){var V=H.prev,D=H,K=H.next;if(j(V,D,K)>=0)return!1;for(var G=V.x,U=D.x,q=K.x,le=V.y,Te=D.y,Oe=K.y,Fe=G<U?G<q?G:q:U<q?U:q,He=le<Te?le<Oe?le:Oe:Te<Oe?Te:Oe,Je=G>U?G>q?G:q:U>q?U:q,Re=le>Te?le>Oe?le:Oe:Te>Oe?Te:Oe,je=K.next;je!==V;){if(je.x>=Fe&&je.x<=Je&&je.y>=He&&je.y<=Re&&N(G,le,U,Te,q,Oe,je.x,je.y)&&j(je.prev,je,je.next)>=0)return!1;je=je.next}return!0}function a(H,V,D,K){var G=H.prev,U=H,q=H.next;if(j(G,U,q)>=0)return!1;for(var le=G.x,Te=U.x,Oe=q.x,Fe=G.y,He=U.y,Je=q.y,Re=le<Te?le<Oe?le:Oe:Te<Oe?Te:Oe,je=Fe<He?Fe<Je?Fe:Je:He<Je?He:Je,ot=le>Te?le>Oe?le:Oe:Te>Oe?Te:Oe,et=Fe>He?Fe>Je?Fe:Je:He>Je?He:Je,gt=I(Re,je,V,D,K),Ut=I(ot,et,V,D,K),dt=H.prevZ,vt=H.nextZ;dt&&dt.z>=gt&&vt&&vt.z<=Ut;){if(dt.x>=Re&&dt.x<=ot&&dt.y>=je&&dt.y<=et&&dt!==G&&dt!==q&&N(le,Fe,Te,He,Oe,Je,dt.x,dt.y)&&j(dt.prev,dt,dt.next)>=0||(dt=dt.prevZ,vt.x>=Re&&vt.x<=ot&&vt.y>=je&&vt.y<=et&&vt!==G&&vt!==q&&N(le,Fe,Te,He,Oe,Je,vt.x,vt.y)&&j(vt.prev,vt,vt.next)>=0))return!1;vt=vt.nextZ}for(;dt&&dt.z>=gt;){if(dt.x>=Re&&dt.x<=ot&&dt.y>=je&&dt.y<=et&&dt!==G&&dt!==q&&N(le,Fe,Te,He,Oe,Je,dt.x,dt.y)&&j(dt.prev,dt,dt.next)>=0)return!1;dt=dt.prevZ}for(;vt&&vt.z<=Ut;){if(vt.x>=Re&&vt.x<=ot&&vt.y>=je&&vt.y<=et&&vt!==G&&vt!==q&&N(le,Fe,Te,He,Oe,Je,vt.x,vt.y)&&j(vt.prev,vt,vt.next)>=0)return!1;vt=vt.nextZ}return!0}function c(H,V,D){var K=H;do{var G=K.prev,U=K.next.next;!ee(G,U)&&X(G,K,K.next,U)&&ye(G,U)&&ye(U,G)&&(V.push(G.i/D|0),V.push(K.i/D|0),V.push(U.i/D|0),_e(K),_e(K.next),K=H=U),K=K.next}while(K!==H);return t(K)}function f(H,V,D,K,G,U){var q=H;do{for(var le=q.next.next;le!==q.prev;){if(q.i!==le.i&&W(q,le)){var Te=Ce(q,le);q=t(q,q.next),Te=t(Te,Te.next),r(q,V,D,K,G,U,0),r(Te,V,D,K,G,U,0);return}le=le.next}q=q.next}while(q!==H)}function m(H,V,D,K){var G=[],U,q,le,Te,Oe;for(U=0,q=V.length;U<q;U++)le=V[U]*K,Te=U<q-1?V[U+1]*K:H.length,Oe=e(H,le,Te,K,!1),Oe===Oe.next&&(Oe.steiner=!0),G.push(k(Oe));for(G.sort(_),U=0;U<G.length;U++)D=w(G[U],D);return D}function _(H,V){return H.x-V.x}function w(H,V){var D=d(H,V);if(!D)return V;var K=Ce(D,H);return t(K,K.next),t(D,D.next)}function d(H,V){var D=V,K=H.x,G=H.y,U=-1/0,q;do{if(G<=D.y&&G>=D.next.y&&D.next.y!==D.y){var le=D.x+(G-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if(le<=K&&le>U&&(U=le,q=D.x<D.next.x?D:D.next,le===K))return q}D=D.next}while(D!==V);if(!q)return null;var Te=q,Oe=q.x,Fe=q.y,He=1/0,Je;D=q;do K>=D.x&&D.x>=Oe&&K!==D.x&&N(G<Fe?K:U,G,Oe,Fe,G<Fe?U:K,G,D.x,D.y)&&(Je=Math.abs(G-D.y)/(K-D.x),ye(D,H)&&(Je<He||Je===He&&(D.x>q.x||D.x===q.x&&y(q,D)))&&(q=D,He=Je)),D=D.next;while(D!==Te);return q}function y(H,V){return j(H.prev,H,V.prev)<0&&j(V.next,H,H.next)<0}function b(H,V,D,K){var G=H;do G.z===0&&(G.z=I(G.x,G.y,V,D,K)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==H);G.prevZ.nextZ=null,G.prevZ=null,T(G)}function T(H){var V,D,K,G,U,q,le,Te,Oe=1;do{for(D=H,H=null,U=null,q=0;D;){for(q++,K=D,le=0,V=0;V<Oe&&(le++,K=K.nextZ,!!K);V++);for(Te=Oe;le>0||Te>0&&K;)le!==0&&(Te===0||!K||D.z<=K.z)?(G=D,D=D.nextZ,le--):(G=K,K=K.nextZ,Te--),U?U.nextZ=G:H=G,G.prevZ=U,U=G;D=K}U.nextZ=null,Oe*=2}while(q>1);return H}function I(H,V,D,K,G){return H=(H-D)*G|0,V=(V-K)*G|0,H=(H|H<<8)&16711935,H=(H|H<<4)&252645135,H=(H|H<<2)&858993459,H=(H|H<<1)&1431655765,V=(V|V<<8)&16711935,V=(V|V<<4)&252645135,V=(V|V<<2)&858993459,V=(V|V<<1)&1431655765,H|V<<1}function k(H){var V=H,D=H;do(V.x<D.x||V.x===D.x&&V.y<D.y)&&(D=V),V=V.next;while(V!==H);return D}function N(H,V,D,K,G,U,q,le){return(G-q)*(V-le)>=(H-q)*(U-le)&&(H-q)*(K-le)>=(D-q)*(V-le)&&(D-q)*(U-le)>=(G-q)*(K-le)}function W(H,V){return H.next.i!==V.i&&H.prev.i!==V.i&&!ie(H,V)&&(ye(H,V)&&ye(V,H)&&Ne(H,V)&&(j(H.prev,H,V.prev)||j(H,V.prev,V))||ee(H,V)&&j(H.prev,H,H.next)>0&&j(V.prev,V,V.next)>0)}function j(H,V,D){return(V.y-H.y)*(D.x-V.x)-(V.x-H.x)*(D.y-V.y)}function ee(H,V){return H.x===V.x&&H.y===V.y}function X(H,V,D,K){var G=F(j(H,V,D)),U=F(j(H,V,K)),q=F(j(D,K,H)),le=F(j(D,K,V));return!!(G!==U&&q!==le||G===0&&de(H,D,V)||U===0&&de(H,K,V)||q===0&&de(D,H,K)||le===0&&de(D,V,K))}function de(H,V,D){return V.x<=Math.max(H.x,D.x)&&V.x>=Math.min(H.x,D.x)&&V.y<=Math.max(H.y,D.y)&&V.y>=Math.min(H.y,D.y)}function F(H){return H>0?1:H<0?-1:0}function ie(H,V){var D=H;do{if(D.i!==H.i&&D.next.i!==H.i&&D.i!==V.i&&D.next.i!==V.i&&X(D,D.next,H,V))return!0;D=D.next}while(D!==H);return!1}function ye(H,V){return j(H.prev,H,H.next)<0?j(H,V,H.next)>=0&&j(H,H.prev,V)>=0:j(H,V,H.prev)<0||j(H,H.next,V)<0}function Ne(H,V){var D=H,K=!1,G=(H.x+V.x)/2,U=(H.y+V.y)/2;do D.y>U!=D.next.y>U&&D.next.y!==D.y&&G<(D.next.x-D.x)*(U-D.y)/(D.next.y-D.y)+D.x&&(K=!K),D=D.next;while(D!==H);return K}function Ce(H,V){var D=new xe(H.i,H.x,H.y),K=new xe(V.i,V.x,V.y),G=H.next,U=V.prev;return H.next=V,V.prev=H,D.next=G,G.prev=D,K.next=D,D.prev=K,U.next=K,K.prev=U,K}function ge(H,V,D,K){var G=new xe(H,V,D);return K?(G.next=K.next,G.prev=K,K.next.prev=G,K.next=G):(G.prev=G,G.next=G),G}function _e(H){H.next.prev=H.prev,H.prev.next=H.next,H.prevZ&&(H.prevZ.nextZ=H.nextZ),H.nextZ&&(H.nextZ.prevZ=H.prevZ)}function xe(H,V,D){this.i=H,this.x=V,this.y=D,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}n.deviation=function(H,V,D,K){var G=V&&V.length,U=G?V[0]*D:H.length,q=Math.abs(Ke(H,0,U,D));if(G)for(var le=0,Te=V.length;le<Te;le++){var Oe=V[le]*D,Fe=le<Te-1?V[le+1]*D:H.length;q-=Math.abs(Ke(H,Oe,Fe,D))}var He=0;for(le=0;le<K.length;le+=3){var Je=K[le]*D,Re=K[le+1]*D,je=K[le+2]*D;He+=Math.abs((H[Je]-H[je])*(H[Re+1]-H[Je+1])-(H[Je]-H[Re])*(H[je+1]-H[Je+1]))}return q===0&&He===0?0:Math.abs((He-q)/q)};function Ke(H,V,D,K){for(var G=0,U=V,q=D-K;U<D;U+=K)G+=(H[q]-H[U])*(H[U+1]+H[q+1]),q=U;return G}return n.flatten=function(H){for(var V=H[0][0].length,D={vertices:[],holes:[],dimensions:V},K=0,G=0;G<H.length;G++){for(var U=0;U<H[G].length;U++)for(var q=0;q<V;q++)D.vertices.push(H[G][U][q]);G>0&&(K+=H[G-1].length,D.holes.push(K))}return D},Ud.exports}var _1=v1();const x1=nh(_1);var Xu={},Hh={exports:{}};var w1=Hh.exports,Ev;function b1(){return Ev||(Ev=1,(function(n,e){(function(t){var r=e&&!e.nodeType&&e,s=n&&!n.nodeType&&n,a=typeof Aa=="object"&&Aa;(a.global===a||a.window===a||a.self===a)&&(t=a);var c,f=2147483647,m=36,_=1,w=26,d=38,y=700,b=72,T=128,I="-",k=/^xn--/,N=/[^\x20-\x7E]/,W=/[\x2E\u3002\uFF0E\uFF61]/g,j={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ee=m-_,X=Math.floor,de=String.fromCharCode,F;function ie(G){throw new RangeError(j[G])}function ye(G,U){for(var q=G.length,le=[];q--;)le[q]=U(G[q]);return le}function Ne(G,U){var q=G.split("@"),le="";q.length>1&&(le=q[0]+"@",G=q[1]),G=G.replace(W,".");var Te=G.split("."),Oe=ye(Te,U).join(".");return le+Oe}function Ce(G){for(var U=[],q=0,le=G.length,Te,Oe;q<le;)Te=G.charCodeAt(q++),Te>=55296&&Te<=56319&&q<le?(Oe=G.charCodeAt(q++),(Oe&64512)==56320?U.push(((Te&1023)<<10)+(Oe&1023)+65536):(U.push(Te),q--)):U.push(Te);return U}function ge(G){return ye(G,function(U){var q="";return U>65535&&(U-=65536,q+=de(U>>>10&1023|55296),U=56320|U&1023),q+=de(U),q}).join("")}function _e(G){return G-48<10?G-22:G-65<26?G-65:G-97<26?G-97:m}function xe(G,U){return G+22+75*(G<26)-((U!=0)<<5)}function Ke(G,U,q){var le=0;for(G=q?X(G/y):G>>1,G+=X(G/U);G>ee*w>>1;le+=m)G=X(G/ee);return X(le+(ee+1)*G/(G+d))}function H(G){var U=[],q=G.length,le,Te=0,Oe=T,Fe=b,He,Je,Re,je,ot,et,gt,Ut,dt;for(He=G.lastIndexOf(I),He<0&&(He=0),Je=0;Je<He;++Je)G.charCodeAt(Je)>=128&&ie("not-basic"),U.push(G.charCodeAt(Je));for(Re=He>0?He+1:0;Re<q;){for(je=Te,ot=1,et=m;Re>=q&&ie("invalid-input"),gt=_e(G.charCodeAt(Re++)),(gt>=m||gt>X((f-Te)/ot))&&ie("overflow"),Te+=gt*ot,Ut=et<=Fe?_:et>=Fe+w?w:et-Fe,!(gt<Ut);et+=m)dt=m-Ut,ot>X(f/dt)&&ie("overflow"),ot*=dt;le=U.length+1,Fe=Ke(Te-je,le,je==0),X(Te/le)>f-Oe&&ie("overflow"),Oe+=X(Te/le),Te%=le,U.splice(Te++,0,Oe)}return ge(U)}function V(G){var U,q,le,Te,Oe,Fe,He,Je,Re,je,ot,et=[],gt,Ut,dt,vt;for(G=Ce(G),gt=G.length,U=T,q=0,Oe=b,Fe=0;Fe<gt;++Fe)ot=G[Fe],ot<128&&et.push(de(ot));for(le=Te=et.length,Te&&et.push(I);le<gt;){for(He=f,Fe=0;Fe<gt;++Fe)ot=G[Fe],ot>=U&&ot<He&&(He=ot);for(Ut=le+1,He-U>X((f-q)/Ut)&&ie("overflow"),q+=(He-U)*Ut,U=He,Fe=0;Fe<gt;++Fe)if(ot=G[Fe],ot<U&&++q>f&&ie("overflow"),ot==U){for(Je=q,Re=m;je=Re<=Oe?_:Re>=Oe+w?w:Re-Oe,!(Je<je);Re+=m)vt=Je-je,dt=m-je,et.push(de(xe(je+vt%dt,0))),Je=X(vt/dt);et.push(de(xe(Je,0))),Oe=Ke(q,Ut,le==Te),q=0,++le}++q,++U}return et.join("")}function D(G){return Ne(G,function(U){return k.test(U)?H(U.slice(4).toLowerCase()):U})}function K(G){return Ne(G,function(U){return N.test(U)?"xn--"+V(U):U})}if(c={version:"1.4.1",ucs2:{decode:Ce,encode:ge},decode:H,encode:V,toASCII:K,toUnicode:D},r&&s)if(n.exports==r)s.exports=c;else for(F in c)c.hasOwnProperty(F)&&(r[F]=c[F]);else t.punycode=c})(w1)})(Hh,Hh.exports)),Hh.exports}var Gp,Tv;function ih(){return Tv||(Tv=1,Gp=TypeError),Gp}const S1={},E1=Object.freeze(Object.defineProperty({__proto__:null,default:S1},Symbol.toStringTag,{value:"Module"})),T1=U0(E1);var jp,Av;function Uf(){if(Av)return jp;Av=1;var n=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=n&&e&&typeof e.get=="function"?e.get:null,r=n&&Map.prototype.forEach,s=typeof Set=="function"&&Set.prototype,a=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=s&&a&&typeof a.get=="function"?a.get:null,f=s&&Set.prototype.forEach,m=typeof WeakMap=="function"&&WeakMap.prototype,_=m?WeakMap.prototype.has:null,w=typeof WeakSet=="function"&&WeakSet.prototype,d=w?WeakSet.prototype.has:null,y=typeof WeakRef=="function"&&WeakRef.prototype,b=y?WeakRef.prototype.deref:null,T=Boolean.prototype.valueOf,I=Object.prototype.toString,k=Function.prototype.toString,N=String.prototype.match,W=String.prototype.slice,j=String.prototype.replace,ee=String.prototype.toUpperCase,X=String.prototype.toLowerCase,de=RegExp.prototype.test,F=Array.prototype.concat,ie=Array.prototype.join,ye=Array.prototype.slice,Ne=Math.floor,Ce=typeof BigInt=="function"?BigInt.prototype.valueOf:null,ge=Object.getOwnPropertySymbols,_e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,xe=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ke=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===xe||!0)?Symbol.toStringTag:null,H=Object.prototype.propertyIsEnumerable,V=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(te){return te.__proto__}:null);function D(te,Ae){if(te===1/0||te===-1/0||te!==te||te&&te>-1e3&&te<1e3||de.call(/e/,Ae))return Ae;var Bt=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof te=="number"){var Zt=te<0?-Ne(-te):Ne(te);if(Zt!==te){var ze=String(Zt),Rt=W.call(Ae,ze.length+1);return j.call(ze,Bt,"$&_")+"."+j.call(j.call(Rt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return j.call(Ae,Bt,"$&_")}var K=T1,G=K.custom,U=Ut(G)?G:null,q={__proto__:null,double:'"',single:"'"},le={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};jp=function te(Ae,Bt,Zt,ze){var Rt=Bt||{};if(pr(Rt,"quoteStyle")&&!pr(q,Rt.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(pr(Rt,"maxStringLength")&&(typeof Rt.maxStringLength=="number"?Rt.maxStringLength<0&&Rt.maxStringLength!==1/0:Rt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var gn=pr(Rt,"customInspect")?Rt.customInspect:!0;if(typeof gn!="boolean"&&gn!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(pr(Rt,"indent")&&Rt.indent!==null&&Rt.indent!=="	"&&!(parseInt(Rt.indent,10)===Rt.indent&&Rt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(pr(Rt,"numericSeparator")&&typeof Rt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var ei=Rt.numericSeparator;if(typeof Ae>"u")return"undefined";if(Ae===null)return"null";if(typeof Ae=="boolean")return Ae?"true":"false";if(typeof Ae=="string")return Zn(Ae,Rt);if(typeof Ae=="number"){if(Ae===0)return 1/0/Ae>0?"0":"-0";var Wr=String(Ae);return ei?D(Ae,Wr):Wr}if(typeof Ae=="bigint"){var Rn=String(Ae)+"n";return ei?D(Ae,Rn):Rn}var Vo=typeof Rt.depth>"u"?5:Rt.depth;if(typeof Zt>"u"&&(Zt=0),Zt>=Vo&&Vo>0&&typeof Ae=="object")return He(Ae)?"[Array]":"[Object]";var xi=oo(Rt,Zt);if(typeof ze>"u")ze=[];else if(Dr(ze,Ae)>=0)return"[Circular]";function Rr(Bi,Vn,La){if(Vn&&(ze=ye.call(ze),ze.push(Vn)),La){var ao={depth:Rt.depth};return pr(Rt,"quoteStyle")&&(ao.quoteStyle=Rt.quoteStyle),te(Bi,ao,Zt+1,ze)}return te(Bi,Rt,Zt+1,ze)}if(typeof Ae=="function"&&!Re(Ae)){var wi=Ni(Ae),Fi=Hn(Ae,Rr);return"[Function"+(wi?": "+wi:" (anonymous)")+"]"+(Fi.length>0?" { "+ie.call(Fi,", ")+" }":"")}if(Ut(Ae)){var ys=xe?j.call(String(Ae),/^(Symbol\(.*\))_[^)]*$/,"$1"):_e.call(Ae);return typeof Ae=="object"&&!xe?Jn(ys):ys}if(Li(Ae)){for(var Kt="<"+X.call(String(Ae.nodeName)),wr=Ae.attributes||[],ti=0;ti<wr.length;ti++)Kt+=" "+wr[ti].name+"="+Te(Oe(wr[ti].value),"double",Rt);return Kt+=">",Ae.childNodes&&Ae.childNodes.length&&(Kt+="..."),Kt+="</"+X.call(String(Ae.nodeName))+">",Kt}if(He(Ae)){if(Ae.length===0)return"[]";var bi=Hn(Ae,Rr);return xi&&!gs(bi)?"["+Ds(bi,xi)+"]":"[ "+ie.call(bi,", ")+" ]"}if(je(Ae)){var Si=Hn(Ae,Rr);return!("cause"in Error.prototype)&&"cause"in Ae&&!H.call(Ae,"cause")?"{ ["+String(Ae)+"] "+ie.call(F.call("[cause]: "+Rr(Ae.cause),Si),", ")+" }":Si.length===0?"["+String(Ae)+"]":"{ ["+String(Ae)+"] "+ie.call(Si,", ")+" }"}if(typeof Ae=="object"&&gn){if(U&&typeof Ae[U]=="function"&&K)return K(Ae,{depth:Vo-Zt});if(gn!=="symbol"&&typeof Ae.inspect=="function")return Ae.inspect()}if(cr(Ae)){var ri=[];return r&&r.call(Ae,function(Bi,Vn){ri.push(Rr(Vn,Ae,!0)+" => "+Rr(Bi,Ae))}),_i("Map",t.call(Ae),ri,xi)}if(In(Ae)){var xl=[];return f&&f.call(Ae,function(Bi){xl.push(Rr(Bi,Ae))}),_i("Set",c.call(Ae),xl,xi)}if(yi(Ae))return vi("WeakMap");if(Ms(Ae))return vi("WeakSet");if(zn(Ae))return vi("WeakRef");if(et(Ae))return Jn(Rr(Number(Ae)));if(dt(Ae))return Jn(Rr(Ce.call(Ae)));if(gt(Ae))return Jn(T.call(Ae));if(ot(Ae))return Jn(Rr(String(Ae)));if(typeof window<"u"&&Ae===window)return"{ [object Window] }";if(typeof globalThis<"u"&&Ae===globalThis||typeof Aa<"u"&&Ae===Aa)return"{ [object globalThis] }";if(!Je(Ae)&&!Re(Ae)){var ni=Hn(Ae,Rr),vs=V?V(Ae)===Object.prototype:Ae instanceof Object||Ae.constructor===Object,$r=Ae instanceof Object?"":"null prototype",Ns=!vs&&Ke&&Object(Ae)===Ae&&Ke in Ae?W.call(Tr(Ae),8,-1):$r?"Object":"",wl=vs||typeof Ae.constructor!="function"?"":Ae.constructor.name?Ae.constructor.name+" ":"",ii=wl+(Ns||$r?"["+ie.call(F.call([],Ns||[],$r||[]),": ")+"] ":"");return ni.length===0?ii+"{}":xi?ii+"{"+Ds(ni,xi)+"}":ii+"{ "+ie.call(ni,", ")+" }"}return String(Ae)};function Te(te,Ae,Bt){var Zt=Bt.quoteStyle||Ae,ze=q[Zt];return ze+te+ze}function Oe(te){return j.call(String(te),/"/g,"&quot;")}function Fe(te){return!Ke||!(typeof te=="object"&&(Ke in te||typeof te[Ke]<"u"))}function He(te){return Tr(te)==="[object Array]"&&Fe(te)}function Je(te){return Tr(te)==="[object Date]"&&Fe(te)}function Re(te){return Tr(te)==="[object RegExp]"&&Fe(te)}function je(te){return Tr(te)==="[object Error]"&&Fe(te)}function ot(te){return Tr(te)==="[object String]"&&Fe(te)}function et(te){return Tr(te)==="[object Number]"&&Fe(te)}function gt(te){return Tr(te)==="[object Boolean]"&&Fe(te)}function Ut(te){if(xe)return te&&typeof te=="object"&&te instanceof Symbol;if(typeof te=="symbol")return!0;if(!te||typeof te!="object"||!_e)return!1;try{return _e.call(te),!0}catch{}return!1}function dt(te){if(!te||typeof te!="object"||!Ce)return!1;try{return Ce.call(te),!0}catch{}return!1}var vt=Object.prototype.hasOwnProperty||function(te){return te in this};function pr(te,Ae){return vt.call(te,Ae)}function Tr(te){return I.call(te)}function Ni(te){if(te.name)return te.name;var Ae=N.call(k.call(te),/^function\s*([\w$]+)/);return Ae?Ae[1]:null}function Dr(te,Ae){if(te.indexOf)return te.indexOf(Ae);for(var Bt=0,Zt=te.length;Bt<Zt;Bt++)if(te[Bt]===Ae)return Bt;return-1}function cr(te){if(!t||!te||typeof te!="object")return!1;try{t.call(te);try{c.call(te)}catch{return!0}return te instanceof Map}catch{}return!1}function yi(te){if(!_||!te||typeof te!="object")return!1;try{_.call(te,_);try{d.call(te,d)}catch{return!0}return te instanceof WeakMap}catch{}return!1}function zn(te){if(!b||!te||typeof te!="object")return!1;try{return b.call(te),!0}catch{}return!1}function In(te){if(!c||!te||typeof te!="object")return!1;try{c.call(te);try{t.call(te)}catch{return!0}return te instanceof Set}catch{}return!1}function Ms(te){if(!d||!te||typeof te!="object")return!1;try{d.call(te,d);try{_.call(te,_)}catch{return!0}return te instanceof WeakSet}catch{}return!1}function Li(te){return!te||typeof te!="object"?!1:typeof HTMLElement<"u"&&te instanceof HTMLElement?!0:typeof te.nodeName=="string"&&typeof te.getAttribute=="function"}function Zn(te,Ae){if(te.length>Ae.maxStringLength){var Bt=te.length-Ae.maxStringLength,Zt="... "+Bt+" more character"+(Bt>1?"s":"");return Zn(W.call(te,0,Ae.maxStringLength),Ae)+Zt}var ze=le[Ae.quoteStyle||"single"];ze.lastIndex=0;var Rt=j.call(j.call(te,ze,"\\$1"),/[\x00-\x1f]/g,Os);return Te(Rt,"single",Ae)}function Os(te){var Ae=te.charCodeAt(0),Bt={8:"b",9:"t",10:"n",12:"f",13:"r"}[Ae];return Bt?"\\"+Bt:"\\x"+(Ae<16?"0":"")+ee.call(Ae.toString(16))}function Jn(te){return"Object("+te+")"}function vi(te){return te+" { ? }"}function _i(te,Ae,Bt,Zt){var ze=Zt?Ds(Bt,Zt):ie.call(Bt,", ");return te+" ("+Ae+") {"+ze+"}"}function gs(te){for(var Ae=0;Ae<te.length;Ae++)if(Dr(te[Ae],`
`)>=0)return!1;return!0}function oo(te,Ae){var Bt;if(te.indent==="	")Bt="	";else if(typeof te.indent=="number"&&te.indent>0)Bt=ie.call(Array(te.indent+1)," ");else return null;return{base:Bt,prev:ie.call(Array(Ae+1),Bt)}}function Ds(te,Ae){if(te.length===0)return"";var Bt=`
`+Ae.prev+Ae.base;return Bt+ie.call(te,","+Bt)+`
`+Ae.prev}function Hn(te,Ae){var Bt=He(te),Zt=[];if(Bt){Zt.length=te.length;for(var ze=0;ze<te.length;ze++)Zt[ze]=pr(te,ze)?Ae(te[ze],te):""}var Rt=typeof ge=="function"?ge(te):[],gn;if(xe){gn={};for(var ei=0;ei<Rt.length;ei++)gn["$"+Rt[ei]]=Rt[ei]}for(var Wr in te)pr(te,Wr)&&(Bt&&String(Number(Wr))===Wr&&Wr<te.length||xe&&gn["$"+Wr]instanceof Symbol||(de.call(/[^\w$]/,Wr)?Zt.push(Ae(Wr,te)+": "+Ae(te[Wr],te)):Zt.push(Wr+": "+Ae(te[Wr],te))));if(typeof ge=="function")for(var Rn=0;Rn<Rt.length;Rn++)H.call(te,Rt[Rn])&&Zt.push("["+Ae(Rt[Rn])+"]: "+Ae(te[Rt[Rn]],te));return Zt}return jp}var zp,Cv;function A1(){if(Cv)return zp;Cv=1;var n=Uf(),e=ih(),t=function(f,m,_){for(var w=f,d;(d=w.next)!=null;w=d)if(d.key===m)return w.next=d.next,_||(d.next=f.next,f.next=d),d},r=function(f,m){if(f){var _=t(f,m);return _&&_.value}},s=function(f,m,_){var w=t(f,m);w?w.value=_:f.next={key:m,next:f.next,value:_}},a=function(f,m){return f?!!t(f,m):!1},c=function(f,m){if(f)return t(f,m,!0)};return zp=function(){var m,_={assert:function(w){if(!_.has(w))throw new e("Side channel does not contain "+n(w))},delete:function(w){var d=m&&m.next,y=c(m,w);return y&&d&&d===y&&(m=void 0),!!y},get:function(w){return r(m,w)},has:function(w){return a(m,w)},set:function(w,d){m||(m={next:void 0}),s(m,w,d)}};return _},zp}var Hp,Pv;function j0(){return Pv||(Pv=1,Hp=Object),Hp}var Vp,Iv;function C1(){return Iv||(Iv=1,Vp=Error),Vp}var Wp,Rv;function P1(){return Rv||(Rv=1,Wp=EvalError),Wp}var $p,kv;function I1(){return kv||(kv=1,$p=RangeError),$p}var Xp,Mv;function R1(){return Mv||(Mv=1,Xp=ReferenceError),Xp}var qp,Ov;function k1(){return Ov||(Ov=1,qp=SyntaxError),qp}var Kp,Dv;function M1(){return Dv||(Dv=1,Kp=URIError),Kp}var Yp,Nv;function O1(){return Nv||(Nv=1,Yp=Math.abs),Yp}var Qp,Lv;function D1(){return Lv||(Lv=1,Qp=Math.floor),Qp}var Zp,Fv;function N1(){return Fv||(Fv=1,Zp=Math.max),Zp}var Jp,Bv;function L1(){return Bv||(Bv=1,Jp=Math.min),Jp}var em,Uv;function F1(){return Uv||(Uv=1,em=Math.pow),em}var tm,Gv;function B1(){return Gv||(Gv=1,tm=Math.round),tm}var rm,jv;function U1(){return jv||(jv=1,rm=Number.isNaN||function(e){return e!==e}),rm}var nm,zv;function G1(){if(zv)return nm;zv=1;var n=U1();return nm=function(t){return n(t)||t===0?t:t<0?-1:1},nm}var im,Hv;function j1(){return Hv||(Hv=1,im=Object.getOwnPropertyDescriptor),im}var sm,Vv;function z0(){if(Vv)return sm;Vv=1;var n=j1();if(n)try{n([],"length")}catch{n=null}return sm=n,sm}var om,Wv;function z1(){if(Wv)return om;Wv=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return om=n,om}var am,$v;function H1(){return $v||($v=1,am=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var s=42;e[t]=s;for(var a in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var c=Object.getOwnPropertySymbols(e);if(c.length!==1||c[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var f=Object.getOwnPropertyDescriptor(e,t);if(f.value!==s||f.enumerable!==!0)return!1}return!0}),am}var lm,Xv;function V1(){if(Xv)return lm;Xv=1;var n=typeof Symbol<"u"&&Symbol,e=H1();return lm=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},lm}var um,qv;function H0(){return qv||(qv=1,um=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),um}var cm,Kv;function V0(){if(Kv)return cm;Kv=1;var n=j0();return cm=n.getPrototypeOf||null,cm}var hm,Yv;function W1(){if(Yv)return hm;Yv=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",s=function(m,_){for(var w=[],d=0;d<m.length;d+=1)w[d]=m[d];for(var y=0;y<_.length;y+=1)w[y+m.length]=_[y];return w},a=function(m,_){for(var w=[],d=_,y=0;d<m.length;d+=1,y+=1)w[y]=m[d];return w},c=function(f,m){for(var _="",w=0;w<f.length;w+=1)_+=f[w],w+1<f.length&&(_+=m);return _};return hm=function(m){var _=this;if(typeof _!="function"||e.apply(_)!==r)throw new TypeError(n+_);for(var w=a(arguments,1),d,y=function(){if(this instanceof d){var N=_.apply(this,s(w,arguments));return Object(N)===N?N:this}return _.apply(m,s(w,arguments))},b=t(0,_.length-w.length),T=[],I=0;I<b;I++)T[I]="$"+I;if(d=Function("binder","return function ("+c(T,",")+"){ return binder.apply(this,arguments); }")(y),_.prototype){var k=function(){};k.prototype=_.prototype,d.prototype=new k,k.prototype=null}return d},hm}var dm,Qv;function Gf(){if(Qv)return dm;Qv=1;var n=W1();return dm=Function.prototype.bind||n,dm}var fm,Zv;function cy(){return Zv||(Zv=1,fm=Function.prototype.call),fm}var pm,Jv;function W0(){return Jv||(Jv=1,pm=Function.prototype.apply),pm}var mm,e_;function $1(){return e_||(e_=1,mm=typeof Reflect<"u"&&Reflect&&Reflect.apply),mm}var gm,t_;function X1(){if(t_)return gm;t_=1;var n=Gf(),e=W0(),t=cy(),r=$1();return gm=r||n.call(t,e),gm}var ym,r_;function $0(){if(r_)return ym;r_=1;var n=Gf(),e=ih(),t=cy(),r=X1();return ym=function(a){if(a.length<1||typeof a[0]!="function")throw new e("a function is required");return r(n,t,a)},ym}var vm,n_;function q1(){if(n_)return vm;n_=1;var n=$0(),e=z0(),t;try{t=[].__proto__===Array.prototype}catch(c){if(!c||typeof c!="object"||!("code"in c)||c.code!=="ERR_PROTO_ACCESS")throw c}var r=!!t&&e&&e(Object.prototype,"__proto__"),s=Object,a=s.getPrototypeOf;return vm=r&&typeof r.get=="function"?n([r.get]):typeof a=="function"?function(f){return a(f==null?f:s(f))}:!1,vm}var _m,i_;function K1(){if(i_)return _m;i_=1;var n=H0(),e=V0(),t=q1();return _m=n?function(s){return n(s)}:e?function(s){if(!s||typeof s!="object"&&typeof s!="function")throw new TypeError("getProto: not an object");return e(s)}:t?function(s){return t(s)}:null,_m}var xm,s_;function Y1(){if(s_)return xm;s_=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=Gf();return xm=t.call(n,e),xm}var wm,o_;function hy(){if(o_)return wm;o_=1;var n,e=j0(),t=C1(),r=P1(),s=I1(),a=R1(),c=k1(),f=ih(),m=M1(),_=O1(),w=D1(),d=N1(),y=L1(),b=F1(),T=B1(),I=G1(),k=Function,N=function(Re){try{return k('"use strict"; return ('+Re+").constructor;")()}catch{}},W=z0(),j=z1(),ee=function(){throw new f},X=W?(function(){try{return arguments.callee,ee}catch{try{return W(arguments,"callee").get}catch{return ee}}})():ee,de=V1()(),F=K1(),ie=V0(),ye=H0(),Ne=W0(),Ce=cy(),ge={},_e=typeof Uint8Array>"u"||!F?n:F(Uint8Array),xe={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":de&&F?F([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":ge,"%AsyncGenerator%":ge,"%AsyncGeneratorFunction%":ge,"%AsyncIteratorPrototype%":ge,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":r,"%Float16Array%":typeof Float16Array>"u"?n:Float16Array,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":k,"%GeneratorFunction%":ge,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":de&&F?F(F([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!de||!F?n:F(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":W,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":s,"%ReferenceError%":a,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!de||!F?n:F(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":de&&F?F(""[Symbol.iterator]()):n,"%Symbol%":de?Symbol:n,"%SyntaxError%":c,"%ThrowTypeError%":X,"%TypedArray%":_e,"%TypeError%":f,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":m,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":Ce,"%Function.prototype.apply%":Ne,"%Object.defineProperty%":j,"%Object.getPrototypeOf%":ie,"%Math.abs%":_,"%Math.floor%":w,"%Math.max%":d,"%Math.min%":y,"%Math.pow%":b,"%Math.round%":T,"%Math.sign%":I,"%Reflect.getPrototypeOf%":ye};if(F)try{null.error}catch(Re){var Ke=F(F(Re));xe["%Error.prototype%"]=Ke}var H=function Re(je){var ot;if(je==="%AsyncFunction%")ot=N("async function () {}");else if(je==="%GeneratorFunction%")ot=N("function* () {}");else if(je==="%AsyncGeneratorFunction%")ot=N("async function* () {}");else if(je==="%AsyncGenerator%"){var et=Re("%AsyncGeneratorFunction%");et&&(ot=et.prototype)}else if(je==="%AsyncIteratorPrototype%"){var gt=Re("%AsyncGenerator%");gt&&F&&(ot=F(gt.prototype))}return xe[je]=ot,ot},V={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},D=Gf(),K=Y1(),G=D.call(Ce,Array.prototype.concat),U=D.call(Ne,Array.prototype.splice),q=D.call(Ce,String.prototype.replace),le=D.call(Ce,String.prototype.slice),Te=D.call(Ce,RegExp.prototype.exec),Oe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Fe=/\\(\\)?/g,He=function(je){var ot=le(je,0,1),et=le(je,-1);if(ot==="%"&&et!=="%")throw new c("invalid intrinsic syntax, expected closing `%`");if(et==="%"&&ot!=="%")throw new c("invalid intrinsic syntax, expected opening `%`");var gt=[];return q(je,Oe,function(Ut,dt,vt,pr){gt[gt.length]=vt?q(pr,Fe,"$1"):dt||Ut}),gt},Je=function(je,ot){var et=je,gt;if(K(V,et)&&(gt=V[et],et="%"+gt[0]+"%"),K(xe,et)){var Ut=xe[et];if(Ut===ge&&(Ut=H(et)),typeof Ut>"u"&&!ot)throw new f("intrinsic "+je+" exists, but is not available. Please file an issue!");return{alias:gt,name:et,value:Ut}}throw new c("intrinsic "+je+" does not exist!")};return wm=function(je,ot){if(typeof je!="string"||je.length===0)throw new f("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof ot!="boolean")throw new f('"allowMissing" argument must be a boolean');if(Te(/^%?[^%]*%?$/,je)===null)throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var et=He(je),gt=et.length>0?et[0]:"",Ut=Je("%"+gt+"%",ot),dt=Ut.name,vt=Ut.value,pr=!1,Tr=Ut.alias;Tr&&(gt=Tr[0],U(et,G([0,1],Tr)));for(var Ni=1,Dr=!0;Ni<et.length;Ni+=1){var cr=et[Ni],yi=le(cr,0,1),zn=le(cr,-1);if((yi==='"'||yi==="'"||yi==="`"||zn==='"'||zn==="'"||zn==="`")&&yi!==zn)throw new c("property names with quotes must have matching quotes");if((cr==="constructor"||!Dr)&&(pr=!0),gt+="."+cr,dt="%"+gt+"%",K(xe,dt))vt=xe[dt];else if(vt!=null){if(!(cr in vt)){if(!ot)throw new f("base intrinsic for "+je+" exists, but the property is not available.");return}if(W&&Ni+1>=et.length){var In=W(vt,cr);Dr=!!In,Dr&&"get"in In&&!("originalValue"in In.get)?vt=In.get:vt=vt[cr]}else Dr=K(vt,cr),vt=vt[cr];Dr&&!pr&&(xe[dt]=vt)}}return vt},wm}var bm,a_;function X0(){if(a_)return bm;a_=1;var n=hy(),e=$0(),t=e([n("%String.prototype.indexOf%")]);return bm=function(s,a){var c=n(s,!!a);return typeof c=="function"&&t(s,".prototype.")>-1?e([c]):c},bm}var Sm,l_;function q0(){if(l_)return Sm;l_=1;var n=hy(),e=X0(),t=Uf(),r=ih(),s=n("%Map%",!0),a=e("Map.prototype.get",!0),c=e("Map.prototype.set",!0),f=e("Map.prototype.has",!0),m=e("Map.prototype.delete",!0),_=e("Map.prototype.size",!0);return Sm=!!s&&function(){var d,y={assert:function(b){if(!y.has(b))throw new r("Side channel does not contain "+t(b))},delete:function(b){if(d){var T=m(d,b);return _(d)===0&&(d=void 0),T}return!1},get:function(b){if(d)return a(d,b)},has:function(b){return d?f(d,b):!1},set:function(b,T){d||(d=new s),c(d,b,T)}};return y},Sm}var Em,u_;function Q1(){if(u_)return Em;u_=1;var n=hy(),e=X0(),t=Uf(),r=q0(),s=ih(),a=n("%WeakMap%",!0),c=e("WeakMap.prototype.get",!0),f=e("WeakMap.prototype.set",!0),m=e("WeakMap.prototype.has",!0),_=e("WeakMap.prototype.delete",!0);return Em=a?function(){var d,y,b={assert:function(T){if(!b.has(T))throw new s("Side channel does not contain "+t(T))},delete:function(T){if(a&&T&&(typeof T=="object"||typeof T=="function")){if(d)return _(d,T)}else if(r&&y)return y.delete(T);return!1},get:function(T){return a&&T&&(typeof T=="object"||typeof T=="function")&&d?c(d,T):y&&y.get(T)},has:function(T){return a&&T&&(typeof T=="object"||typeof T=="function")&&d?m(d,T):!!y&&y.has(T)},set:function(T,I){a&&T&&(typeof T=="object"||typeof T=="function")?(d||(d=new a),f(d,T,I)):r&&(y||(y=r()),y.set(T,I))}};return b}:r,Em}var Tm,c_;function K0(){if(c_)return Tm;c_=1;var n=ih(),e=Uf(),t=A1(),r=q0(),s=Q1(),a=s||r||t;return Tm=function(){var f,m={assert:function(_){if(!m.has(_))throw new n("Side channel does not contain "+e(_))},delete:function(_){return!!f&&f.delete(_)},get:function(_){return f&&f.get(_)},has:function(_){return!!f&&f.has(_)},set:function(_,w){f||(f=a()),f.set(_,w)}};return m},Tm}var Am,h_;function dy(){if(h_)return Am;h_=1;var n=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Am={default:t.RFC3986,formatters:{RFC1738:function(r){return n.call(r,e,"+")},RFC3986:function(r){return String(r)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},Am}var Cm,d_;function Y0(){if(d_)return Cm;d_=1;var n=dy(),e=K0(),t=Object.prototype.hasOwnProperty,r=Array.isArray,s=e(),a=function(F,ie){return s.set(F,ie),F},c=function(F){return s.has(F)},f=function(F){return s.get(F)},m=function(F,ie){s.set(F,ie)},_=(function(){for(var de=[],F=0;F<256;++F)de.push("%"+((F<16?"0":"")+F.toString(16)).toUpperCase());return de})(),w=function(F){for(;F.length>1;){var ie=F.pop(),ye=ie.obj[ie.prop];if(r(ye)){for(var Ne=[],Ce=0;Ce<ye.length;++Ce)typeof ye[Ce]<"u"&&Ne.push(ye[Ce]);ie.obj[ie.prop]=Ne}}},d=function(F,ie){for(var ye=ie&&ie.plainObjects?{__proto__:null}:{},Ne=0;Ne<F.length;++Ne)typeof F[Ne]<"u"&&(ye[Ne]=F[Ne]);return ye},y=function de(F,ie,ye){if(!ie)return F;if(typeof ie!="object"&&typeof ie!="function"){if(r(F))F.push(ie);else if(F&&typeof F=="object")if(c(F)){var Ne=f(F)+1;F[Ne]=ie,m(F,Ne)}else(ye&&(ye.plainObjects||ye.allowPrototypes)||!t.call(Object.prototype,ie))&&(F[ie]=!0);else return[F,ie];return F}if(!F||typeof F!="object"){if(c(ie)){for(var Ce=Object.keys(ie),ge=ye&&ye.plainObjects?{__proto__:null,0:F}:{0:F},_e=0;_e<Ce.length;_e++){var xe=parseInt(Ce[_e],10);ge[xe+1]=ie[Ce[_e]]}return a(ge,f(ie)+1)}return[F].concat(ie)}var Ke=F;return r(F)&&!r(ie)&&(Ke=d(F,ye)),r(F)&&r(ie)?(ie.forEach(function(H,V){if(t.call(F,V)){var D=F[V];D&&typeof D=="object"&&H&&typeof H=="object"?F[V]=de(D,H,ye):F.push(H)}else F[V]=H}),F):Object.keys(ie).reduce(function(H,V){var D=ie[V];return t.call(H,V)?H[V]=de(H[V],D,ye):H[V]=D,H},Ke)},b=function(F,ie){return Object.keys(ie).reduce(function(ye,Ne){return ye[Ne]=ie[Ne],ye},F)},T=function(de,F,ie){var ye=de.replace(/\+/g," ");if(ie==="iso-8859-1")return ye.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(ye)}catch{return ye}},I=1024,k=function(F,ie,ye,Ne,Ce){if(F.length===0)return F;var ge=F;if(typeof F=="symbol"?ge=Symbol.prototype.toString.call(F):typeof F!="string"&&(ge=String(F)),ye==="iso-8859-1")return escape(ge).replace(/%u[0-9a-f]{4}/gi,function(K){return"%26%23"+parseInt(K.slice(2),16)+"%3B"});for(var _e="",xe=0;xe<ge.length;xe+=I){for(var Ke=ge.length>=I?ge.slice(xe,xe+I):ge,H=[],V=0;V<Ke.length;++V){var D=Ke.charCodeAt(V);if(D===45||D===46||D===95||D===126||D>=48&&D<=57||D>=65&&D<=90||D>=97&&D<=122||Ce===n.RFC1738&&(D===40||D===41)){H[H.length]=Ke.charAt(V);continue}if(D<128){H[H.length]=_[D];continue}if(D<2048){H[H.length]=_[192|D>>6]+_[128|D&63];continue}if(D<55296||D>=57344){H[H.length]=_[224|D>>12]+_[128|D>>6&63]+_[128|D&63];continue}V+=1,D=65536+((D&1023)<<10|Ke.charCodeAt(V)&1023),H[H.length]=_[240|D>>18]+_[128|D>>12&63]+_[128|D>>6&63]+_[128|D&63]}_e+=H.join("")}return _e},N=function(F){for(var ie=[{obj:{o:F},prop:"o"}],ye=[],Ne=0;Ne<ie.length;++Ne)for(var Ce=ie[Ne],ge=Ce.obj[Ce.prop],_e=Object.keys(ge),xe=0;xe<_e.length;++xe){var Ke=_e[xe],H=ge[Ke];typeof H=="object"&&H!==null&&ye.indexOf(H)===-1&&(ie.push({obj:ge,prop:Ke}),ye.push(H))}return w(ie),F},W=function(F){return Object.prototype.toString.call(F)==="[object RegExp]"},j=function(F){return!F||typeof F!="object"?!1:!!(F.constructor&&F.constructor.isBuffer&&F.constructor.isBuffer(F))},ee=function(F,ie,ye,Ne){if(c(F)){var Ce=f(F)+1;return F[Ce]=ie,m(F,Ce),F}var ge=[].concat(F,ie);return ge.length>ye?a(d(ge,{plainObjects:Ne}),ge.length-1):ge},X=function(F,ie){if(r(F)){for(var ye=[],Ne=0;Ne<F.length;Ne+=1)ye.push(ie(F[Ne]));return ye}return ie(F)};return Cm={arrayToObject:d,assign:b,combine:ee,compact:N,decode:T,encode:k,isBuffer:j,isOverflow:c,isRegExp:W,maybeMap:X,merge:y},Cm}var Pm,f_;function Z1(){if(f_)return Pm;f_=1;var n=K0(),e=Y0(),t=dy(),r=Object.prototype.hasOwnProperty,s={brackets:function(k){return k+"[]"},comma:"comma",indices:function(k,N){return k+"["+N+"]"},repeat:function(k){return k}},a=Array.isArray,c=Array.prototype.push,f=function(I,k){c.apply(I,a(k)?k:[k])},m=Date.prototype.toISOString,_=t.default,w={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:_,formatter:t.formatters[_],indices:!1,serializeDate:function(k){return m.call(k)},skipNulls:!1,strictNullHandling:!1},d=function(k){return typeof k=="string"||typeof k=="number"||typeof k=="boolean"||typeof k=="symbol"||typeof k=="bigint"},y={},b=function I(k,N,W,j,ee,X,de,F,ie,ye,Ne,Ce,ge,_e,xe,Ke,H,V){for(var D=k,K=V,G=0,U=!1;(K=K.get(y))!==void 0&&!U;){var q=K.get(k);if(G+=1,typeof q<"u"){if(q===G)throw new RangeError("Cyclic object value");U=!0}typeof K.get(y)>"u"&&(G=0)}if(typeof ye=="function"?D=ye(N,D):D instanceof Date?D=ge(D):W==="comma"&&a(D)&&(D=e.maybeMap(D,function(dt){return dt instanceof Date?ge(dt):dt})),D===null){if(X)return ie&&!Ke?ie(N,w.encoder,H,"key",_e):N;D=""}if(d(D)||e.isBuffer(D)){if(ie){var le=Ke?N:ie(N,w.encoder,H,"key",_e);return[xe(le)+"="+xe(ie(D,w.encoder,H,"value",_e))]}return[xe(N)+"="+xe(String(D))]}var Te=[];if(typeof D>"u")return Te;var Oe;if(W==="comma"&&a(D))Ke&&ie&&(D=e.maybeMap(D,ie)),Oe=[{value:D.length>0?D.join(",")||null:void 0}];else if(a(ye))Oe=ye;else{var Fe=Object.keys(D);Oe=Ne?Fe.sort(Ne):Fe}var He=F?String(N).replace(/\./g,"%2E"):String(N),Je=j&&a(D)&&D.length===1?He+"[]":He;if(ee&&a(D)&&D.length===0)return Je+"[]";for(var Re=0;Re<Oe.length;++Re){var je=Oe[Re],ot=typeof je=="object"&&je&&typeof je.value<"u"?je.value:D[je];if(!(de&&ot===null)){var et=Ce&&F?String(je).replace(/\./g,"%2E"):String(je),gt=a(D)?typeof W=="function"?W(Je,et):Je:Je+(Ce?"."+et:"["+et+"]");V.set(k,G);var Ut=n();Ut.set(y,V),f(Te,I(ot,gt,W,j,ee,X,de,F,W==="comma"&&Ke&&a(D)?null:ie,ye,Ne,Ce,ge,_e,xe,Ke,H,Ut))}}return Te},T=function(k){if(!k)return w;if(typeof k.allowEmptyArrays<"u"&&typeof k.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof k.encodeDotInKeys<"u"&&typeof k.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(k.encoder!==null&&typeof k.encoder<"u"&&typeof k.encoder!="function")throw new TypeError("Encoder has to be a function.");var N=k.charset||w.charset;if(typeof k.charset<"u"&&k.charset!=="utf-8"&&k.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var W=t.default;if(typeof k.format<"u"){if(!r.call(t.formatters,k.format))throw new TypeError("Unknown format option provided.");W=k.format}var j=t.formatters[W],ee=w.filter;(typeof k.filter=="function"||a(k.filter))&&(ee=k.filter);var X;if(k.arrayFormat in s?X=k.arrayFormat:"indices"in k?X=k.indices?"indices":"repeat":X=w.arrayFormat,"commaRoundTrip"in k&&typeof k.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var de=typeof k.allowDots>"u"?k.encodeDotInKeys===!0?!0:w.allowDots:!!k.allowDots;return{addQueryPrefix:typeof k.addQueryPrefix=="boolean"?k.addQueryPrefix:w.addQueryPrefix,allowDots:de,allowEmptyArrays:typeof k.allowEmptyArrays=="boolean"?!!k.allowEmptyArrays:w.allowEmptyArrays,arrayFormat:X,charset:N,charsetSentinel:typeof k.charsetSentinel=="boolean"?k.charsetSentinel:w.charsetSentinel,commaRoundTrip:!!k.commaRoundTrip,delimiter:typeof k.delimiter>"u"?w.delimiter:k.delimiter,encode:typeof k.encode=="boolean"?k.encode:w.encode,encodeDotInKeys:typeof k.encodeDotInKeys=="boolean"?k.encodeDotInKeys:w.encodeDotInKeys,encoder:typeof k.encoder=="function"?k.encoder:w.encoder,encodeValuesOnly:typeof k.encodeValuesOnly=="boolean"?k.encodeValuesOnly:w.encodeValuesOnly,filter:ee,format:W,formatter:j,serializeDate:typeof k.serializeDate=="function"?k.serializeDate:w.serializeDate,skipNulls:typeof k.skipNulls=="boolean"?k.skipNulls:w.skipNulls,sort:typeof k.sort=="function"?k.sort:null,strictNullHandling:typeof k.strictNullHandling=="boolean"?k.strictNullHandling:w.strictNullHandling}};return Pm=function(I,k){var N=I,W=T(k),j,ee;typeof W.filter=="function"?(ee=W.filter,N=ee("",N)):a(W.filter)&&(ee=W.filter,j=ee);var X=[];if(typeof N!="object"||N===null)return"";var de=s[W.arrayFormat],F=de==="comma"&&W.commaRoundTrip;j||(j=Object.keys(N)),W.sort&&j.sort(W.sort);for(var ie=n(),ye=0;ye<j.length;++ye){var Ne=j[ye],Ce=N[Ne];W.skipNulls&&Ce===null||f(X,b(Ce,Ne,de,F,W.allowEmptyArrays,W.strictNullHandling,W.skipNulls,W.encodeDotInKeys,W.encode?W.encoder:null,W.filter,W.sort,W.allowDots,W.serializeDate,W.format,W.formatter,W.encodeValuesOnly,W.charset,ie))}var ge=X.join(W.delimiter),_e=W.addQueryPrefix===!0?"?":"";return W.charsetSentinel&&(W.charset==="iso-8859-1"?_e+="utf8=%26%2310003%3B&":_e+="utf8=%E2%9C%93&"),ge.length>0?_e+ge:""},Pm}var Im,p_;function J1(){if(p_)return Im;p_=1;var n=Y0(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},s=function(b){return b.replace(/&#(\d+);/g,function(T,I){return String.fromCharCode(parseInt(I,10))})},a=function(b,T,I){if(b&&typeof b=="string"&&T.comma&&b.indexOf(",")>-1)return b.split(",");if(T.throwOnLimitExceeded&&I>=T.arrayLimit)throw new RangeError("Array limit exceeded. Only "+T.arrayLimit+" element"+(T.arrayLimit===1?"":"s")+" allowed in an array.");return b},c="utf8=%26%2310003%3B",f="utf8=%E2%9C%93",m=function(T,I){var k={__proto__:null},N=I.ignoreQueryPrefix?T.replace(/^\?/,""):T;N=N.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var W=I.parameterLimit===1/0?void 0:I.parameterLimit,j=N.split(I.delimiter,I.throwOnLimitExceeded?W+1:W);if(I.throwOnLimitExceeded&&j.length>W)throw new RangeError("Parameter limit exceeded. Only "+W+" parameter"+(W===1?"":"s")+" allowed.");var ee=-1,X,de=I.charset;if(I.charsetSentinel)for(X=0;X<j.length;++X)j[X].indexOf("utf8=")===0&&(j[X]===f?de="utf-8":j[X]===c&&(de="iso-8859-1"),ee=X,X=j.length);for(X=0;X<j.length;++X)if(X!==ee){var F=j[X],ie=F.indexOf("]="),ye=ie===-1?F.indexOf("="):ie+1,Ne,Ce;if(ye===-1?(Ne=I.decoder(F,r.decoder,de,"key"),Ce=I.strictNullHandling?null:""):(Ne=I.decoder(F.slice(0,ye),r.decoder,de,"key"),Ne!==null&&(Ce=n.maybeMap(a(F.slice(ye+1),I,t(k[Ne])?k[Ne].length:0),function(_e){return I.decoder(_e,r.decoder,de,"value")}))),Ce&&I.interpretNumericEntities&&de==="iso-8859-1"&&(Ce=s(String(Ce))),F.indexOf("[]=")>-1&&(Ce=t(Ce)?[Ce]:Ce),Ne!==null){var ge=e.call(k,Ne);ge&&I.duplicates==="combine"?k[Ne]=n.combine(k[Ne],Ce,I.arrayLimit,I.plainObjects):(!ge||I.duplicates==="last")&&(k[Ne]=Ce)}}return k},_=function(b,T,I,k){var N=0;if(b.length>0&&b[b.length-1]==="[]"){var W=b.slice(0,-1).join("");N=Array.isArray(T)&&T[W]?T[W].length:0}for(var j=k?T:a(T,I,N),ee=b.length-1;ee>=0;--ee){var X,de=b[ee];if(de==="[]"&&I.parseArrays)n.isOverflow(j)?X=j:X=I.allowEmptyArrays&&(j===""||I.strictNullHandling&&j===null)?[]:n.combine([],j,I.arrayLimit,I.plainObjects);else{X=I.plainObjects?{__proto__:null}:{};var F=de.charAt(0)==="["&&de.charAt(de.length-1)==="]"?de.slice(1,-1):de,ie=I.decodeDotInKeys?F.replace(/%2E/g,"."):F,ye=parseInt(ie,10);!I.parseArrays&&ie===""?X={0:j}:!isNaN(ye)&&de!==ie&&String(ye)===ie&&ye>=0&&I.parseArrays&&ye<=I.arrayLimit?(X=[],X[ye]=j):ie!=="__proto__"&&(X[ie]=j)}j=X}return j},w=function(T,I){var k=I.allowDots?T.replace(/\.([^.[]+)/g,"[$1]"):T;if(I.depth<=0)return!I.plainObjects&&e.call(Object.prototype,k)&&!I.allowPrototypes?void 0:[k];var N=/(\[[^[\]]*])/,W=/(\[[^[\]]*])/g,j=N.exec(k),ee=j?k.slice(0,j.index):k,X=[];if(ee){if(!I.plainObjects&&e.call(Object.prototype,ee)&&!I.allowPrototypes)return;X.push(ee)}for(var de=0;(j=W.exec(k))!==null&&de<I.depth;){de+=1;var F=j[1].slice(1,-1);if(!I.plainObjects&&e.call(Object.prototype,F)&&!I.allowPrototypes)return;X.push(j[1])}if(j){if(I.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+I.depth+" and strictDepth is true");X.push("["+k.slice(j.index)+"]")}return X},d=function(T,I,k,N){if(T){var W=w(T,k);if(W)return _(W,I,k,N)}},y=function(T){if(!T)return r;if(typeof T.allowEmptyArrays<"u"&&typeof T.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof T.decodeDotInKeys<"u"&&typeof T.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(T.decoder!==null&&typeof T.decoder<"u"&&typeof T.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof T.charset<"u"&&T.charset!=="utf-8"&&T.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof T.throwOnLimitExceeded<"u"&&typeof T.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var I=typeof T.charset>"u"?r.charset:T.charset,k=typeof T.duplicates>"u"?r.duplicates:T.duplicates;if(k!=="combine"&&k!=="first"&&k!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var N=typeof T.allowDots>"u"?T.decodeDotInKeys===!0?!0:r.allowDots:!!T.allowDots;return{allowDots:N,allowEmptyArrays:typeof T.allowEmptyArrays=="boolean"?!!T.allowEmptyArrays:r.allowEmptyArrays,allowPrototypes:typeof T.allowPrototypes=="boolean"?T.allowPrototypes:r.allowPrototypes,allowSparse:typeof T.allowSparse=="boolean"?T.allowSparse:r.allowSparse,arrayLimit:typeof T.arrayLimit=="number"?T.arrayLimit:r.arrayLimit,charset:I,charsetSentinel:typeof T.charsetSentinel=="boolean"?T.charsetSentinel:r.charsetSentinel,comma:typeof T.comma=="boolean"?T.comma:r.comma,decodeDotInKeys:typeof T.decodeDotInKeys=="boolean"?T.decodeDotInKeys:r.decodeDotInKeys,decoder:typeof T.decoder=="function"?T.decoder:r.decoder,delimiter:typeof T.delimiter=="string"||n.isRegExp(T.delimiter)?T.delimiter:r.delimiter,depth:typeof T.depth=="number"||T.depth===!1?+T.depth:r.depth,duplicates:k,ignoreQueryPrefix:T.ignoreQueryPrefix===!0,interpretNumericEntities:typeof T.interpretNumericEntities=="boolean"?T.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof T.parameterLimit=="number"?T.parameterLimit:r.parameterLimit,parseArrays:T.parseArrays!==!1,plainObjects:typeof T.plainObjects=="boolean"?T.plainObjects:r.plainObjects,strictDepth:typeof T.strictDepth=="boolean"?!!T.strictDepth:r.strictDepth,strictNullHandling:typeof T.strictNullHandling=="boolean"?T.strictNullHandling:r.strictNullHandling,throwOnLimitExceeded:typeof T.throwOnLimitExceeded=="boolean"?T.throwOnLimitExceeded:!1}};return Im=function(b,T){var I=y(T);if(b===""||b===null||typeof b>"u")return I.plainObjects?{__proto__:null}:{};for(var k=typeof b=="string"?m(b,I):b,N=I.plainObjects?{__proto__:null}:{},W=Object.keys(k),j=0;j<W.length;++j){var ee=W[j],X=d(ee,k[ee],I,typeof b=="string");N=n.merge(N,X,I)}return I.allowSparse===!0?N:n.compact(N)},Im}var Rm,m_;function eb(){if(m_)return Rm;m_=1;var n=Z1(),e=J1(),t=dy();return Rm={formats:t,parse:e,stringify:n},Rm}var g_;function tb(){if(g_)return Xu;g_=1;var n=b1();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,a=["<",">",'"',"`"," ","\r",`
`,"	"],c=["{","}","|","\\","^","`"].concat(a),f=["'"].concat(c),m=["%","/","?",";","#"].concat(f),_=["/","?","#"],w=255,d=/^[+a-z0-9A-Z_-]{0,63}$/,y=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,b={javascript:!0,"javascript:":!0},T={javascript:!0,"javascript:":!0},I={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},k=eb();function N(X,de,F){if(X&&typeof X=="object"&&X instanceof e)return X;var ie=new e;return ie.parse(X,de,F),ie}e.prototype.parse=function(X,de,F){if(typeof X!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof X);var ie=X.indexOf("?"),ye=ie!==-1&&ie<X.indexOf("#")?"?":"#",Ne=X.split(ye),Ce=/\\/g;Ne[0]=Ne[0].replace(Ce,"/"),X=Ne.join(ye);var ge=X;if(ge=ge.trim(),!F&&X.split("#").length===1){var _e=s.exec(ge);if(_e)return this.path=ge,this.href=ge,this.pathname=_e[1],_e[2]?(this.search=_e[2],de?this.query=k.parse(this.search.substr(1)):this.query=this.search.substr(1)):de&&(this.search="",this.query={}),this}var xe=t.exec(ge);if(xe){xe=xe[0];var Ke=xe.toLowerCase();this.protocol=Ke,ge=ge.substr(xe.length)}if(F||xe||ge.match(/^\/\/[^@/]+@[^@/]+/)){var H=ge.substr(0,2)==="//";H&&!(xe&&T[xe])&&(ge=ge.substr(2),this.slashes=!0)}if(!T[xe]&&(H||xe&&!I[xe])){for(var V=-1,D=0;D<_.length;D++){var K=ge.indexOf(_[D]);K!==-1&&(V===-1||K<V)&&(V=K)}var G,U;V===-1?U=ge.lastIndexOf("@"):U=ge.lastIndexOf("@",V),U!==-1&&(G=ge.slice(0,U),ge=ge.slice(U+1),this.auth=decodeURIComponent(G)),V=-1;for(var D=0;D<m.length;D++){var K=ge.indexOf(m[D]);K!==-1&&(V===-1||K<V)&&(V=K)}V===-1&&(V=ge.length),this.host=ge.slice(0,V),ge=ge.slice(V),this.parseHost(),this.hostname=this.hostname||"";var q=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!q)for(var le=this.hostname.split(/\./),D=0,Te=le.length;D<Te;D++){var Oe=le[D];if(Oe&&!Oe.match(d)){for(var Fe="",He=0,Je=Oe.length;He<Je;He++)Oe.charCodeAt(He)>127?Fe+="x":Fe+=Oe[He];if(!Fe.match(d)){var Re=le.slice(0,D),je=le.slice(D+1),ot=Oe.match(y);ot&&(Re.push(ot[1]),je.unshift(ot[2])),je.length&&(ge="/"+je.join(".")+ge),this.hostname=Re.join(".");break}}}this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),q||(this.hostname=n.toASCII(this.hostname));var et=this.port?":"+this.port:"",gt=this.hostname||"";this.host=gt+et,this.href+=this.host,q&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),ge[0]!=="/"&&(ge="/"+ge))}if(!b[Ke])for(var D=0,Te=f.length;D<Te;D++){var Ut=f[D];if(ge.indexOf(Ut)!==-1){var dt=encodeURIComponent(Ut);dt===Ut&&(dt=escape(Ut)),ge=ge.split(Ut).join(dt)}}var vt=ge.indexOf("#");vt!==-1&&(this.hash=ge.substr(vt),ge=ge.slice(0,vt));var pr=ge.indexOf("?");if(pr!==-1?(this.search=ge.substr(pr),this.query=ge.substr(pr+1),de&&(this.query=k.parse(this.query)),ge=ge.slice(0,pr)):de&&(this.search="",this.query={}),ge&&(this.pathname=ge),I[Ke]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var et=this.pathname||"",Tr=this.search||"";this.path=et+Tr}return this.href=this.format(),this};function W(X){return typeof X=="string"&&(X=N(X)),X instanceof e?X.format():e.prototype.format.call(X)}e.prototype.format=function(){var X=this.auth||"";X&&(X=encodeURIComponent(X),X=X.replace(/%3A/i,":"),X+="@");var de=this.protocol||"",F=this.pathname||"",ie=this.hash||"",ye=!1,Ne="";this.host?ye=X+this.host:this.hostname&&(ye=X+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(ye+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(Ne=k.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var Ce=this.search||Ne&&"?"+Ne||"";return de&&de.substr(-1)!==":"&&(de+=":"),this.slashes||(!de||I[de])&&ye!==!1?(ye="//"+(ye||""),F&&F.charAt(0)!=="/"&&(F="/"+F)):ye||(ye=""),ie&&ie.charAt(0)!=="#"&&(ie="#"+ie),Ce&&Ce.charAt(0)!=="?"&&(Ce="?"+Ce),F=F.replace(/[?#]/g,function(ge){return encodeURIComponent(ge)}),Ce=Ce.replace("#","%23"),de+ye+F+Ce+ie};function j(X,de){return N(X,!1,!0).resolve(de)}e.prototype.resolve=function(X){return this.resolveObject(N(X,!1,!0)).format()};function ee(X,de){return X?N(X,!1,!0).resolveObject(de):de}return e.prototype.resolveObject=function(X){if(typeof X=="string"){var de=new e;de.parse(X,!1,!0),X=de}for(var F=new e,ie=Object.keys(this),ye=0;ye<ie.length;ye++){var Ne=ie[ye];F[Ne]=this[Ne]}if(F.hash=X.hash,X.href==="")return F.href=F.format(),F;if(X.slashes&&!X.protocol){for(var Ce=Object.keys(X),ge=0;ge<Ce.length;ge++){var _e=Ce[ge];_e!=="protocol"&&(F[_e]=X[_e])}return I[F.protocol]&&F.hostname&&!F.pathname&&(F.pathname="/",F.path=F.pathname),F.href=F.format(),F}if(X.protocol&&X.protocol!==F.protocol){if(!I[X.protocol]){for(var xe=Object.keys(X),Ke=0;Ke<xe.length;Ke++){var H=xe[Ke];F[H]=X[H]}return F.href=F.format(),F}if(F.protocol=X.protocol,!X.host&&!T[X.protocol]){for(var Te=(X.pathname||"").split("/");Te.length&&!(X.host=Te.shift()););X.host||(X.host=""),X.hostname||(X.hostname=""),Te[0]!==""&&Te.unshift(""),Te.length<2&&Te.unshift(""),F.pathname=Te.join("/")}else F.pathname=X.pathname;if(F.search=X.search,F.query=X.query,F.host=X.host||"",F.auth=X.auth,F.hostname=X.hostname||X.host,F.port=X.port,F.pathname||F.search){var V=F.pathname||"",D=F.search||"";F.path=V+D}return F.slashes=F.slashes||X.slashes,F.href=F.format(),F}var K=F.pathname&&F.pathname.charAt(0)==="/",G=X.host||X.pathname&&X.pathname.charAt(0)==="/",U=G||K||F.host&&X.pathname,q=U,le=F.pathname&&F.pathname.split("/")||[],Te=X.pathname&&X.pathname.split("/")||[],Oe=F.protocol&&!I[F.protocol];if(Oe&&(F.hostname="",F.port=null,F.host&&(le[0]===""?le[0]=F.host:le.unshift(F.host)),F.host="",X.protocol&&(X.hostname=null,X.port=null,X.host&&(Te[0]===""?Te[0]=X.host:Te.unshift(X.host)),X.host=null),U=U&&(Te[0]===""||le[0]==="")),G)F.host=X.host||X.host===""?X.host:F.host,F.hostname=X.hostname||X.hostname===""?X.hostname:F.hostname,F.search=X.search,F.query=X.query,le=Te;else if(Te.length)le||(le=[]),le.pop(),le=le.concat(Te),F.search=X.search,F.query=X.query;else if(X.search!=null){if(Oe){F.host=le.shift(),F.hostname=F.host;var Fe=F.host&&F.host.indexOf("@")>0?F.host.split("@"):!1;Fe&&(F.auth=Fe.shift(),F.hostname=Fe.shift(),F.host=F.hostname)}return F.search=X.search,F.query=X.query,(F.pathname!==null||F.search!==null)&&(F.path=(F.pathname?F.pathname:"")+(F.search?F.search:"")),F.href=F.format(),F}if(!le.length)return F.pathname=null,F.search?F.path="/"+F.search:F.path=null,F.href=F.format(),F;for(var He=le.slice(-1)[0],Je=(F.host||X.host||le.length>1)&&(He==="."||He==="..")||He==="",Re=0,je=le.length;je>=0;je--)He=le[je],He==="."?le.splice(je,1):He===".."?(le.splice(je,1),Re++):Re&&(le.splice(je,1),Re--);if(!U&&!q)for(;Re--;Re)le.unshift("..");U&&le[0]!==""&&(!le[0]||le[0].charAt(0)!=="/")&&le.unshift(""),Je&&le.join("/").substr(-1)!=="/"&&le.push("");var ot=le[0]===""||le[0]&&le[0].charAt(0)==="/";if(Oe){F.hostname=ot?"":le.length?le.shift():"",F.host=F.hostname;var Fe=F.host&&F.host.indexOf("@")>0?F.host.split("@"):!1;Fe&&(F.auth=Fe.shift(),F.hostname=Fe.shift(),F.host=F.hostname)}return U=U||F.host&&le.length,U&&!ot&&le.unshift(""),le.length>0?F.pathname=le.join("/"):(F.pathname=null,F.path=null),(F.pathname!==null||F.search!==null)&&(F.path=(F.pathname?F.pathname:"")+(F.search?F.search:"")),F.auth=X.auth||F.auth,F.slashes=F.slashes||X.slashes,F.href=F.format(),F},e.prototype.parseHost=function(){var X=this.host,de=r.exec(X);de&&(de=de[0],de!==":"&&(this.port=de.substr(1)),X=X.substr(0,X.length-de.length)),X&&(this.hostname=X)},Xu.parse=N,Xu.resolve=j,Xu.resolveObject=ee,Xu.format=W,Xu.Url=e,Xu}tb();const y_={};function Jt(n,e,t=3){if(y_[e])return;let r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${n}`):(r=r.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${n}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${n}`),console.warn(r))),y_[e]=!0}function ko(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function Fh(n){return n.split("?")[0].split("#")[0]}function rb(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function nb(n,e,t){return n.replace(new RegExp(rb(e),"g"),t)}function ib(n,e){let t="",r=0,s=-1,a=0,c=-1;for(let f=0;f<=n.length;++f){if(f<n.length)c=n.charCodeAt(f);else{if(c===47)break;c=47}if(c===47){if(!(s===f-1||a===1))if(s!==f-1&&a===2){if(t.length<2||r!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const m=t.lastIndexOf("/");if(m!==t.length-1){m===-1?(t="",r=0):(t=t.slice(0,m),r=t.length-1-t.lastIndexOf("/")),s=f,a=0;continue}}else if(t.length===2||t.length===1){t="",r=0,s=f,a=0;continue}}}else t.length>0?t+=`/${n.slice(s+1,f)}`:t=n.slice(s+1,f),r=f-s-1;s=f,a=0}else c===46&&a!==-1?++a:a=-1}return t}const jn={toPosix(n){return nb(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){ko(n),n=this.toPosix(n);const e=/^file:\/\/\//.exec(n);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(n);return t?t[0]:""},toAbsolute(n,e,t){if(ko(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const r=Fh(this.toPosix(e??mt.ADAPTER.getBaseUrl())),s=Fh(this.toPosix(t??this.rootname(r)));return n=this.toPosix(n),n.startsWith("/")?jn.join(s,n.slice(1)):this.isAbsolute(n)?n:this.join(r,n)},normalize(n){if(ko(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let e="";const t=n.startsWith("/");this.hasProtocol(n)&&(e=this.rootname(n),n=n.slice(e.length));const r=n.endsWith("/");return n=ib(n),n.length>0&&r&&(n+="/"),t?`/${n}`:e+n},isAbsolute(n){return ko(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let e;for(let t=0;t<n.length;++t){const r=n[t];if(ko(r),r.length>0)if(e===void 0)e=r;else{const s=n[t-1]??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?e+=`/../${r}`:e+=`/${r}`}}return e===void 0?".":this.normalize(e)},dirname(n){if(ko(n),n.length===0)return".";n=this.toPosix(n);let e=n.charCodeAt(0);const t=e===47;let r=-1,s=!0;const a=this.getProtocol(n),c=n;n=n.slice(a.length);for(let f=n.length-1;f>=1;--f)if(e=n.charCodeAt(f),e===47){if(!s){r=f;break}}else s=!1;return r===-1?t?"/":this.isUrl(c)?a+n:a:t&&r===1?"//":a+n.slice(0,r)},rootname(n){ko(n),n=this.toPosix(n);let e="";if(n.startsWith("/")?e="/":e=this.getProtocol(n),this.isUrl(n)){const t=n.indexOf("/",e.length);t!==-1?e=n.slice(0,t):e=n,e.endsWith("/")||(e+="/")}return e},basename(n,e){ko(n),e&&ko(e),n=Fh(this.toPosix(n));let t=0,r=-1,s=!0,a;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e.length===n.length&&e===n)return"";let c=e.length-1,f=-1;for(a=n.length-1;a>=0;--a){const m=n.charCodeAt(a);if(m===47){if(!s){t=a+1;break}}else f===-1&&(s=!1,f=a+1),c>=0&&(m===e.charCodeAt(c)?--c===-1&&(r=a):(c=-1,r=f))}return t===r?r=f:r===-1&&(r=n.length),n.slice(t,r)}for(a=n.length-1;a>=0;--a)if(n.charCodeAt(a)===47){if(!s){t=a+1;break}}else r===-1&&(s=!1,r=a+1);return r===-1?"":n.slice(t,r)},extname(n){ko(n),n=Fh(this.toPosix(n));let e=-1,t=0,r=-1,s=!0,a=0;for(let c=n.length-1;c>=0;--c){const f=n.charCodeAt(c);if(f===47){if(!s){t=c+1;break}continue}r===-1&&(s=!1,r=c+1),f===46?e===-1?e=c:a!==1&&(a=1):e!==-1&&(a=-1)}return e===-1||r===-1||a===0||a===1&&e===r-1&&e===t+1?"":n.slice(e,r)},parse(n){ko(n);const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;n=Fh(this.toPosix(n));let t=n.charCodeAt(0);const r=this.isAbsolute(n);let s;e.root=this.rootname(n),r||this.hasProtocol(n)?s=1:s=0;let a=-1,c=0,f=-1,m=!0,_=n.length-1,w=0;for(;_>=s;--_){if(t=n.charCodeAt(_),t===47){if(!m){c=_+1;break}continue}f===-1&&(m=!1,f=_+1),t===46?a===-1?a=_:w!==1&&(w=1):a!==-1&&(w=-1)}return a===-1||f===-1||w===0||w===1&&a===f-1&&a===c+1?f!==-1&&(c===0&&r?e.base=e.name=n.slice(1,f):e.base=e.name=n.slice(c,f)):(c===0&&r?(e.name=n.slice(1,a),e.base=n.slice(1,f)):(e.name=n.slice(c,a),e.base=n.slice(c,f)),e.ext=n.slice(a,f)),e.dir=this.dirname(n),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let km;async function sb(){return km??(km=(async()=>{const n=document.createElement("canvas").getContext("webgl");if(!n)return ps.UNPACK;const e=await new Promise(a=>{const c=document.createElement("video");c.onloadeddata=()=>a(c),c.onerror=()=>a(null),c.autoplay=!1,c.crossOrigin="anonymous",c.preload="auto",c.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",c.load()});if(!e)return ps.UNPACK;const t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t);const r=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,r),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e);const s=new Uint8Array(4);return n.readPixels(0,0,1,1,n.RGBA,n.UNSIGNED_BYTE,s),n.deleteFramebuffer(r),n.deleteTexture(t),n.getExtension("WEBGL_lose_context")?.loseContext(),s[0]<=s[3]?ps.PMA:ps.UNPACK})()),km}let Mm;function ob(){return typeof Mm>"u"&&(Mm=(function(){const n={stencil:!0,failIfMajorPerformanceCaveat:mt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!mt.ADAPTER.getWebGLRenderingContext())return!1;const e=mt.ADAPTER.createCanvas();let t=e.getContext("webgl",n)||e.getContext("experimental-webgl",n);const r=!!t?.getContextAttributes()?.stencil;if(t){const s=t.getExtension("WEBGL_lose_context");s&&s.loseContext()}return t=null,r}catch{return!1}})()),Mm}var ab={grad:.9,turn:360,rad:360/(2*Math.PI)},ll=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Un=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},io=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},Q0=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},v_=function(n){return{r:io(n.r,0,255),g:io(n.g,0,255),b:io(n.b,0,255),a:io(n.a)}},Om=function(n){return{r:Un(n.r),g:Un(n.g),b:Un(n.b),a:Un(n.a,3)}},lb=/^#([0-9a-f]{3,8})$/i,Gd=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},Z0=function(n){var e=n.r,t=n.g,r=n.b,s=n.a,a=Math.max(e,t,r),c=a-Math.min(e,t,r),f=c?a===e?(t-r)/c:a===t?2+(r-e)/c:4+(e-t)/c:0;return{h:60*(f<0?f+6:f),s:a?c/a*100:0,v:a/255*100,a:s}},J0=function(n){var e=n.h,t=n.s,r=n.v,s=n.a;e=e/360*6,t/=100,r/=100;var a=Math.floor(e),c=r*(1-t),f=r*(1-(e-a)*t),m=r*(1-(1-e+a)*t),_=a%6;return{r:255*[r,f,c,c,m,r][_],g:255*[m,r,r,f,c,c][_],b:255*[c,c,m,r,r,f][_],a:s}},__=function(n){return{h:Q0(n.h),s:io(n.s,0,100),l:io(n.l,0,100),a:io(n.a)}},x_=function(n){return{h:Un(n.h),s:Un(n.s),l:Un(n.l),a:Un(n.a,3)}},w_=function(n){return J0((t=(e=n).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},Zh=function(n){return{h:(e=Z0(n)).h,s:(s=(200-(t=e.s))*(r=e.v)/100)>0&&s<200?t*r/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,t,r,s},ub=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,cb=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,hb=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,db=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,mg={string:[[function(n){var e=lb.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Un(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Un(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=hb.exec(n)||db.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:v_({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=ub.exec(n)||cb.exec(n);if(!e)return null;var t,r,s=__({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(ab[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return w_(s)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,r=n.b,s=n.a,a=s===void 0?1:s;return ll(e)&&ll(t)&&ll(r)?v_({r:Number(e),g:Number(t),b:Number(r),a:Number(a)}):null},"rgb"],[function(n){var e=n.h,t=n.s,r=n.l,s=n.a,a=s===void 0?1:s;if(!ll(e)||!ll(t)||!ll(r))return null;var c=__({h:Number(e),s:Number(t),l:Number(r),a:Number(a)});return w_(c)},"hsl"],[function(n){var e=n.h,t=n.s,r=n.v,s=n.a,a=s===void 0?1:s;if(!ll(e)||!ll(t)||!ll(r))return null;var c=(function(f){return{h:Q0(f.h),s:io(f.s,0,100),v:io(f.v,0,100),a:io(f.a)}})({h:Number(e),s:Number(t),v:Number(r),a:Number(a)});return J0(c)},"hsv"]]},b_=function(n,e){for(var t=0;t<e.length;t++){var r=e[t][0](n);if(r)return[r,e[t][1]]}return[null,void 0]},fb=function(n){return typeof n=="string"?b_(n.trim(),mg.string):typeof n=="object"&&n!==null?b_(n,mg.object):[null,void 0]},Dm=function(n,e){var t=Zh(n);return{h:t.h,s:io(t.s+100*e,0,100),l:t.l,a:t.a}},Nm=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},S_=function(n,e){var t=Zh(n);return{h:t.h,s:t.s,l:io(t.l+100*e,0,100),a:t.a}},gg=(function(){function n(e){this.parsed=fb(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Un(Nm(this.rgba),2)},n.prototype.isDark=function(){return Nm(this.rgba)<.5},n.prototype.isLight=function(){return Nm(this.rgba)>=.5},n.prototype.toHex=function(){return e=Om(this.rgba),t=e.r,r=e.g,s=e.b,c=(a=e.a)<1?Gd(Un(255*a)):"","#"+Gd(t)+Gd(r)+Gd(s)+c;var e,t,r,s,a,c},n.prototype.toRgb=function(){return Om(this.rgba)},n.prototype.toRgbString=function(){return e=Om(this.rgba),t=e.r,r=e.g,s=e.b,(a=e.a)<1?"rgba("+t+", "+r+", "+s+", "+a+")":"rgb("+t+", "+r+", "+s+")";var e,t,r,s,a},n.prototype.toHsl=function(){return x_(Zh(this.rgba))},n.prototype.toHslString=function(){return e=x_(Zh(this.rgba)),t=e.h,r=e.s,s=e.l,(a=e.a)<1?"hsla("+t+", "+r+"%, "+s+"%, "+a+")":"hsl("+t+", "+r+"%, "+s+"%)";var e,t,r,s,a},n.prototype.toHsv=function(){return e=Z0(this.rgba),{h:Un(e.h),s:Un(e.s),v:Un(e.v),a:Un(e.a,3)};var e},n.prototype.invert=function(){return xa({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),xa(Dm(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),xa(Dm(this.rgba,-e))},n.prototype.grayscale=function(){return xa(Dm(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),xa(S_(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),xa(S_(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?xa({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Un(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=Zh(this.rgba);return typeof e=="number"?xa({h:e,s:t.s,l:t.l,a:t.a}):Un(t.h)},n.prototype.isEqual=function(e){return this.toHex()===xa(e).toHex()},n})(),xa=function(n){return n instanceof gg?n:new gg(n)},E_=[],pb=function(n){n.forEach(function(e){E_.indexOf(e)<0&&(e(gg,mg),E_.push(e))})};function mb(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var s in t)r[t[s]]=s;var a={};n.prototype.toName=function(c){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var f,m,_=r[this.toHex()];if(_)return _;if(c?.closest){var w=this.toRgb(),d=1/0,y="black";if(!a.length)for(var b in t)a[b]=new n(t[b]).toRgb();for(var T in t){var I=(f=w,m=a[T],Math.pow(f.r-m.r,2)+Math.pow(f.g-m.g,2)+Math.pow(f.b-m.b,2));I<d&&(d=I,y=T)}return y}},e.string.push([function(c){var f=c.toLowerCase(),m=f==="transparent"?"#0000":t[f];return m?new n(m).toRgb():null},"name"])}pb([mb]);const Uc=class hf{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof hf)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const r=typeof e;if(r!==typeof t)return!1;if(r==="number"||r==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((s,a)=>s===t[a]);if(e!==null&&t!==null){const s=Object.keys(e),a=Object.keys(t);return s.length!==a.length?!1:s.every(c=>e[c]===t[c])}return e===t}toRgba(){const[e,t,r,s]=this._components;return{r:e,g:t,b:r,a:s}}toRgb(){const[e,t,r]=this._components;return{r:e,g:t,b:r}}toRgbaString(){const[e,t,r]=this.toUint8RgbArray();return`rgba(${e},${t},${r},${this.alpha})`}toUint8RgbArray(e){const[t,r,s]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(r*255),e[2]=Math.round(s*255),e}toRgbArray(e){e=e??[];const[t,r,s]=this._components;return e[0]=t,e[1]=r,e[2]=s,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,r,s,a]=hf.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=r,this._components[2]*=s,this._components[3]*=a,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let r=this._int>>16&255,s=this._int>>8&255,a=this._int&255;return t&&(r=r*e+.5|0,s=s*e+.5|0,a=a*e+.5|0),(e*255<<24)+(r<<16)+(s<<8)+a}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,r,s]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(r*e)/e,this._components[2]=Math.round(s*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,r,s,a]=this._components;return e[0]=t,e[1]=r,e[2]=s,e[3]=a,e}normalize(e){let t,r,s,a;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const c=e;t=(c>>16&255)/255,r=(c>>8&255)/255,s=(c&255)/255,a=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,r,s,a=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,r,s,a=255]=e,t/=255,r/=255,s/=255,a/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const f=hf.HEX_PATTERN.exec(e);f&&(e=`#${f[2]}`)}const c=xa(e);c.isValid()&&({r:t,g:r,b:s,a}=c.rgba,t/=255,r/=255,s/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=r,this._components[2]=s,this._components[3]=a,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,r]=this._components;this._int=(e*255<<16)+(t*255<<8)+(r*255|0)}_clamp(e,t=0,r=1){return typeof e=="number"?Math.min(Math.max(e,t),r):(e.forEach((s,a)=>{e[a]=Math.min(Math.max(s,t),r)}),e)}};Uc.shared=new Uc,Uc.temp=new Uc,Uc.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Ir=Uc;function gb(n){return Jt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Ir.shared.setValue(n).toHex()}function yb(n){return Jt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Ir.shared.setValue(n).toNumber()}function vb(){const n=[],e=[];for(let r=0;r<32;r++)n[r]=r,e[r]=r;n[Ot.NORMAL_NPM]=Ot.NORMAL,n[Ot.ADD_NPM]=Ot.ADD,n[Ot.SCREEN_NPM]=Ot.SCREEN,e[Ot.NORMAL]=Ot.NORMAL_NPM,e[Ot.ADD]=Ot.ADD_NPM,e[Ot.SCREEN]=Ot.SCREEN_NPM;const t=[];return t.push(e),t.push(n),t}const ex=vb();function tx(n,e){return ex[e?1:0][n]}function _b(n,e=null){const t=n*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let r=0,s=0;r<t;r+=6,s+=4)e[r+0]=s+0,e[r+1]=s+1,e[r+2]=s+2,e[r+3]=s+0,e[r+4]=s+2,e[r+5]=s+3;return e}function rx(n){if(n.BYTES_PER_ELEMENT===4)return n instanceof Float32Array?"Float32Array":n instanceof Uint32Array?"Uint32Array":"Int32Array";if(n.BYTES_PER_ELEMENT===2){if(n instanceof Uint16Array)return"Uint16Array"}else if(n.BYTES_PER_ELEMENT===1&&n instanceof Uint8Array)return"Uint8Array";return null}function xf(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function T_(n){return!(n&n-1)&&!!n}function A_(n){let e=(n>65535?1:0)<<4;n>>>=e;let t=(n>255?1:0)<<3;return n>>>=t,e|=t,t=(n>15?1:0)<<2,n>>>=t,e|=t,t=(n>3?1:0)<<1,n>>>=t,e|=t,e|n>>1}function Kc(n,e,t){const r=n.length;let s;if(e>=r||t===0)return;t=e+t>r?r-e:t;const a=r-t;for(s=e;s<a;++s)n[s]=n[s+t];n.length=a}function lu(n){return n===0?0:n<0?-1:1}let xb=0;function lc(){return++xb}const yg=class{constructor(n,e,t,r){this.left=n,this.top=e,this.right=t,this.bottom=r}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};yg.EMPTY=new yg(0,0,0,0);let C_=yg;const P_={},wa=Object.create(null),tu=Object.create(null);class wb{constructor(e,t,r){this._canvas=mt.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||mt.RESOLUTION,this.resize(e,t)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function I_(n,e,t){for(let r=0,s=4*t*e;r<e;++r,s+=4)if(n[s+3]!==0)return!1;return!0}function R_(n,e,t,r,s){const a=4*e;for(let c=r,f=r*a+4*t;c<=s;++c,f+=a)if(n[f+3]!==0)return!1;return!0}function bb(n){const{width:e,height:t}=n,r=n.getContext("2d",{willReadFrequently:!0});if(r===null)throw new TypeError("Failed to get canvas 2D context");const s=r.getImageData(0,0,e,t).data;let a=0,c=0,f=e-1,m=t-1;for(;c<t&&I_(s,e,c);)++c;if(c===t)return C_.EMPTY;for(;I_(s,e,m);)--m;for(;R_(s,e,a,c,m);)++a;for(;R_(s,e,f,c,m);)--f;return++f,++m,new C_(a,c,f,m)}function Sb(n){const e=bb(n),{width:t,height:r}=e;let s=null;if(!e.isEmpty()){const a=n.getContext("2d");if(a===null)throw new TypeError("Failed to get canvas 2D context");s=a.getImageData(e.left,e.top,t,r)}return{width:t,height:r,data:s}}function Eb(n,e=globalThis.location){if(n.startsWith("data:"))return"";e=e||globalThis.location;const t=new URL(n,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function yl(n,e=1){const t=mt.RETINA_PREFIX?.exec(n);return t?parseFloat(t[1]):e}var ct=(n=>(n.Renderer="renderer",n.Application="application",n.RendererSystem="renderer-webgl-system",n.RendererPlugin="renderer-webgl-plugin",n.CanvasRendererSystem="renderer-canvas-system",n.CanvasRendererPlugin="renderer-canvas-plugin",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n))(ct||{});const vg=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},k_=(n,e)=>vg(n).priority??e,St={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(vg).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...n){return n.map(vg).forEach(e=>{e.type.forEach(t=>{const r=this._addHandlers,s=this._queue;r[t]?r[t]?.(e):(s[t]=s[t]||[],s[t]?.push(e))})}),this},handle(n,e,t){const r=this._addHandlers,s=this._removeHandlers;if(r[n]||s[n])throw new Error(`Extension type ${n} already has a handler`);r[n]=e,s[n]=t;const a=this._queue;return a[n]&&(a[n]?.forEach(c=>e(c)),delete a[n]),this},handleByMap(n,e){return this.handle(n,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByList(n,e,t=-1){return this.handle(n,r=>{e.includes(r.ref)||(e.push(r.ref),e.sort((s,a)=>k_(a,t)-k_(s,t)))},r=>{const s=e.indexOf(r.ref);s!==-1&&e.splice(s,1)})}};class _g{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const Tb=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Ab(n){let e="";for(let t=0;t<n;++t)t>0&&(e+=`
else `),t<n-1&&(e+=`if(test == ${t}.0){}`);return e}function Cb(n,e){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);for(;;){const r=Tb.replace(/%forloop%/gi,Ab(n));if(e.shaderSource(t,r),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))n=n/2|0;else break}return n}const Lm=0,Fm=1,Bm=2,Um=3,Gm=4,jm=5;class Na{constructor(){this.data=0,this.blendMode=Ot.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Lm)}set blend(e){!!(this.data&1<<Lm)!==e&&(this.data^=1<<Lm)}get offsets(){return!!(this.data&1<<Fm)}set offsets(e){!!(this.data&1<<Fm)!==e&&(this.data^=1<<Fm)}get culling(){return!!(this.data&1<<Bm)}set culling(e){!!(this.data&1<<Bm)!==e&&(this.data^=1<<Bm)}get depthTest(){return!!(this.data&1<<Um)}set depthTest(e){!!(this.data&1<<Um)!==e&&(this.data^=1<<Um)}get depthMask(){return!!(this.data&1<<jm)}set depthMask(e){!!(this.data&1<<jm)!==e&&(this.data^=1<<jm)}get clockwiseFrontFace(){return!!(this.data&1<<Gm)}set clockwiseFrontFace(e){!!(this.data&1<<Gm)!==e&&(this.data^=1<<Gm)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Ot.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new Na;return e.depthTest=!1,e.blend=!0,e}}Na.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const xg=[];function nx(n,e){if(!n)return null;let t="";if(typeof n=="string"){const r=/\.(\w{3,4})(?:$|\?|#)/i.exec(n);r&&(t=r[1].toLowerCase())}for(let r=xg.length-1;r>=0;--r){const s=xg[r];if(s.test&&s.test(n,t))return new s(n,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Uo{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,r,s,a,c,f,m){if(arguments.length>8)throw new Error("max arguments reached");const{name:_,items:w}=this;this._aliasCount++;for(let d=0,y=w.length;d<y;d++)w[d][_](e,t,r,s,a,c,f,m);return w===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Uo.prototype,{dispatch:{value:Uo.prototype.emit},run:{value:Uo.prototype.emit}});class td{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Uo("setRealSize"),this.onUpdate=new Uo("update"),this.onError=new Uo("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class jf extends td{constructor(e,t){const{width:r,height:s}=t||{};if(!r||!s)throw new Error("BufferResource width or height invalid");super(r,s),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,r){const s=e.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,this.unpackAlignment),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===ps.UNPACK);const a=t.realWidth,c=t.realHeight;return r.width===a&&r.height===c?s.texSubImage2D(t.target,0,0,0,a,c,t.format,r.type,this.data):(r.width=a,r.height=c,s.texImage2D(t.target,0,r.internalFormat,a,c,0,t.format,r.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const Pb={scaleMode:hl.NEAREST,alphaMode:ps.NPM},wg=class Gc extends od{constructor(e=null,t=null){super(),t=Object.assign({},Gc.defaultOptions,t);const{alphaMode:r,mipmap:s,anisotropicLevel:a,scaleMode:c,width:f,height:m,wrapMode:_,format:w,type:d,target:y,resolution:b,resourceOptions:T}=t;e&&!(e instanceof td)&&(e=nx(e,T),e.internal=!0),this.resolution=b||mt.RESOLUTION,this.width=Math.round((f||0)*this.resolution)/this.resolution,this.height=Math.round((m||0)*this.resolution)/this.resolution,this._mipmap=s,this.anisotropicLevel=a,this._wrapMode=_,this._scaleMode=c,this.format=w,this.type=d,this.target=y,this.alphaMode=r,this.uid=lc(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=f>0&&m>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let r;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,r=!0),r&&this.dirtyStyleId++,this}setSize(e,t,r){return r=r||this.resolution,this.setRealSize(e*r,t*r,r)}setRealSize(e,t,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=T_(this.realWidth)&&T_(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete tu[this.cacheId],delete wa[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Gc.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,r=mt.STRICT_TEXTURE_CACHE){const s=typeof e=="string";let a=null;if(s)a=e;else{if(!e._pixiId){const f=t?.pixiIdPrefix||"pixiid";e._pixiId=`${f}_${lc()}`}a=e._pixiId}let c=tu[a];if(s&&r&&!c)throw new Error(`The cacheId "${a}" does not exist in BaseTextureCache.`);return c||(c=new Gc(e,t),c.cacheId=a,Gc.addToCache(c,a)),c}static fromBuffer(e,t,r,s){e=e||new Float32Array(t*r*4);const a=new jf(e,{width:t,height:r,...s?.resourceOptions});let c,f;return e instanceof Float32Array?(c=nt.RGBA,f=Ct.FLOAT):e instanceof Int32Array?(c=nt.RGBA_INTEGER,f=Ct.INT):e instanceof Uint32Array?(c=nt.RGBA_INTEGER,f=Ct.UNSIGNED_INT):e instanceof Int16Array?(c=nt.RGBA_INTEGER,f=Ct.SHORT):e instanceof Uint16Array?(c=nt.RGBA_INTEGER,f=Ct.UNSIGNED_SHORT):e instanceof Int8Array?(c=nt.RGBA,f=Ct.BYTE):(c=nt.RGBA,f=Ct.UNSIGNED_BYTE),a.internal=!0,new Gc(a,Object.assign({},Pb,{type:f,format:c},s))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),tu[t]&&tu[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),tu[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=tu[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete tu[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete tu[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};wg.defaultOptions={mipmap:Ma.POW2,anisotropicLevel:0,scaleMode:hl.LINEAR,wrapMode:pl.CLAMP,alphaMode:ps.UNPACK,target:qc.TEXTURE_2D,format:nt.RGBA,type:Ct.UNSIGNED_BYTE},wg._globalBatch=0;let Ht=wg;class bg{constructor(){this.texArray=null,this.blend=0,this.type=Fo.TRIANGLES,this.start=0,this.size=0,this.data=null}}let Ib=0;class pn{constructor(e,t=!0,r=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=t,this.id=Ib++,this.disposeRunner=new Uo("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?Ra.ELEMENT_ARRAY_BUFFER:Ra.ARRAY_BUFFER}get index(){return this.type===Ra.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new pn(e)}}class wf{constructor(e,t=0,r=!1,s=Ct.FLOAT,a,c,f,m=1){this.buffer=e,this.size=t,this.normalized=r,this.type=s,this.stride=a,this.start=c,this.instance=f,this.divisor=m}destroy(){this.buffer=null}static from(e,t,r,s,a){return new wf(e,t,r,s,a)}}const Rb={Float32Array,Uint32Array,Int32Array,Uint8Array};function kb(n,e){let t=0,r=0;const s={};for(let m=0;m<n.length;m++)r+=e[m],t+=n[m].length;const a=new ArrayBuffer(t*4);let c=null,f=0;for(let m=0;m<n.length;m++){const _=e[m],w=n[m],d=rx(w);s[d]||(s[d]=new Rb[d](a)),c=s[d];for(let y=0;y<w.length;y++){const b=(y/_|0)*r+f,T=y%_;c[b+T]=w[y]}f+=_}return new Float32Array(a)}const M_={5126:4,5123:2,5121:1};let Mb=0;const Ob={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class du{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=Mb++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Uo("disposeGeometry"),this.refCount=0}addAttribute(e,t,r=0,s=!1,a,c,f,m=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof pn||(t instanceof Array&&(t=new Float32Array(t)),t=new pn(t));const _=e.split("|");if(_.length>1){for(let d=0;d<_.length;d++)this.addAttribute(_[d],t,r,s,a);return this}let w=this.buffers.indexOf(t);return w===-1&&(this.buffers.push(t),w=this.buffers.length-1),this.attributes[e]=new wf(w,r,s,a,c,f,m),this.instanced=this.instanced||m,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof pn||(e instanceof Array&&(e=new Uint16Array(e)),e=new pn(e)),e.type=Ra.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],t=[],r=new pn;let s;for(s in this.attributes){const a=this.attributes[s],c=this.buffers[a.buffer];e.push(c.data),t.push(a.size*M_[a.type]/4),a.buffer=0}for(r.data=kb(e,t),s=0;s<this.buffers.length;s++)this.buffers[s]!==this.indexBuffer&&this.buffers[s].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new du;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new pn(this.buffers[t].data.slice(0));for(const t in this.attributes){const r=this.attributes[t];e.attributes[t]=new wf(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Ra.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new du,r=[],s=[],a=[];let c;for(let f=0;f<e.length;f++){c=e[f];for(let m=0;m<c.buffers.length;m++)s[m]=s[m]||0,s[m]+=c.buffers[m].data.length,a[m]=0}for(let f=0;f<c.buffers.length;f++)r[f]=new Ob[rx(c.buffers[f].data)](s[f]),t.buffers[f]=new pn(r[f]);for(let f=0;f<e.length;f++){c=e[f];for(let m=0;m<c.buffers.length;m++)r[m].set(c.buffers[m].data,a[m]),a[m]+=c.buffers[m].data.length}if(t.attributes=c.attributes,c.indexBuffer){t.indexBuffer=t.buffers[c.buffers.indexOf(c.indexBuffer)],t.indexBuffer.type=Ra.ELEMENT_ARRAY_BUFFER;let f=0,m=0,_=0,w=0;for(let d=0;d<c.buffers.length;d++)if(c.buffers[d]!==c.indexBuffer){w=d;break}for(const d in c.attributes){const y=c.attributes[d];(y.buffer|0)===w&&(m+=y.size*M_[y.type]/4)}for(let d=0;d<e.length;d++){const y=e[d].indexBuffer.data;for(let b=0;b<y.length;b++)t.indexBuffer.data[b+_]+=f;f+=e[d].buffers[w].data.length/m,_+=y.length}}return t}}class ix extends du{constructor(e=!1){super(),this._buffer=new pn(null,e,!1),this._indexBuffer=new pn(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Ct.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Ct.FLOAT).addAttribute("aColor",this._buffer,4,!0,Ct.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Ct.FLOAT).addIndex(this._indexBuffer)}}const bf=Math.PI*2,Db=180/Math.PI,Nb=Math.PI/180;var Qn=(n=>(n[n.POLY=0]="POLY",n[n.RECT=1]="RECT",n[n.CIRC=2]="CIRC",n[n.ELIP=3]="ELIP",n[n.RREC=4]="RREC",n))(Qn||{});class er{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new er(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}}er.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const jd=[new er,new er,new er,new er];class Vt{constructor(e=0,t=0,r=0,s=0){this.x=Number(e),this.y=Number(t),this.width=Number(r),this.height=Number(s),this.type=Qn.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Vt(0,0,0,0)}clone(){return new Vt(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t){const ie=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=ie)return!1;const ye=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>ye}const r=this.left,s=this.right,a=this.top,c=this.bottom;if(s<=r||c<=a)return!1;const f=jd[0].set(e.left,e.top),m=jd[1].set(e.left,e.bottom),_=jd[2].set(e.right,e.top),w=jd[3].set(e.right,e.bottom);if(_.x<=f.x||m.y<=f.y)return!1;const d=Math.sign(t.a*t.d-t.b*t.c);if(d===0||(t.apply(f,f),t.apply(m,m),t.apply(_,_),t.apply(w,w),Math.max(f.x,m.x,_.x,w.x)<=r||Math.min(f.x,m.x,_.x,w.x)>=s||Math.max(f.y,m.y,_.y,w.y)<=a||Math.min(f.y,m.y,_.y,w.y)>=c))return!1;const y=d*(m.y-f.y),b=d*(f.x-m.x),T=y*r+b*a,I=y*s+b*a,k=y*r+b*c,N=y*s+b*c;if(Math.max(T,I,k,N)<=y*f.x+b*f.y||Math.min(T,I,k,N)>=y*w.x+b*w.y)return!1;const W=d*(f.y-_.y),j=d*(_.x-f.x),ee=W*r+j*a,X=W*s+j*a,de=W*r+j*c,F=W*s+j*c;return!(Math.max(ee,X,de,F)<=W*f.x+j*f.y||Math.min(ee,X,de,F)>=W*w.x+j*w.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),s=Math.max(this.y,e.y),a=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(r-t,0),this.y=s,this.height=Math.max(a-s,0),this}ceil(e=1,t=.001){const r=Math.ceil((this.x+this.width-t)*e)/e,s=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=r-this.x,this.height=s-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),s=Math.min(this.y,e.y),a=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=r-t,this.y=s,this.height=a-s,this}}Vt.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class zf{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.radius=r,this.type=Qn.CIRC}clone(){return new zf(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const r=this.radius*this.radius;let s=this.x-e,a=this.y-t;return s*=s,a*=a,s+a<=r}getBounds(){return new Vt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}zf.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Hf{constructor(e=0,t=0,r=0,s=0){this.x=e,this.y=t,this.width=r,this.height=s,this.type=Qn.ELIP}clone(){return new Hf(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let r=(e-this.x)/this.width,s=(t-this.y)/this.height;return r*=r,s*=s,r+s<=1}getBounds(){return new Vt(this.x-this.width,this.y-this.height,this.width,this.height)}}Hf.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class oc{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const r=[];for(let s=0,a=t.length;s<a;s++)r.push(t[s].x,t[s].y);t=r}this.points=t,this.type=Qn.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),t=new oc(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let r=!1;const s=this.points.length/2;for(let a=0,c=s-1;a<s;c=a++){const f=this.points[a*2],m=this.points[a*2+1],_=this.points[c*2],w=this.points[c*2+1];m>t!=w>t&&e<(_-f)*((t-m)/(w-m))+f&&(r=!r)}return r}}oc.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((n,e)=>`${n}, ${e}`,"")}]`};class Vf{constructor(e=0,t=0,r=0,s=0,a=20){this.x=e,this.y=t,this.width=r,this.height=s,this.radius=a,this.type=Qn.RREC}clone(){return new Vf(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+r&&t<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;let s=e-(this.x+r),a=t-(this.y+r);const c=r*r;if(s*s+a*a<=c||(s=e-(this.x+this.width-r),s*s+a*a<=c)||(a=t-(this.y+this.height-r),s*s+a*a<=c)||(s=e-(this.x+r),s*s+a*a<=c))return!0}return!1}}Vf.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Or{constructor(e=1,t=0,r=0,s=1,a=0,c=0){this.array=null,this.a=e,this.b=t,this.c=r,this.d=s,this.tx=a,this.ty=c}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,r,s,a,c){return this.a=e,this.b=t,this.c=r,this.d=s,this.tx=a,this.ty=c,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,t){t=t||new er;const r=e.x,s=e.y;return t.x=this.a*r+this.c*s+this.tx,t.y=this.b*r+this.d*s+this.ty,t}applyInverse(e,t){t=t||new er;const r=1/(this.a*this.d+this.c*-this.b),s=e.x,a=e.y;return t.x=this.d*r*s+-this.c*r*a+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*a+-this.b*r*s+(-this.ty*this.a+this.tx*this.b)*r,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),s=this.a,a=this.c,c=this.tx;return this.a=s*t-this.b*r,this.b=s*r+this.b*t,this.c=a*t-this.d*r,this.d=a*r+this.d*t,this.tx=c*t-this.ty*r,this.ty=c*r+this.ty*t,this}append(e){const t=this.a,r=this.b,s=this.c,a=this.d;return this.a=e.a*t+e.b*s,this.b=e.a*r+e.b*a,this.c=e.c*t+e.d*s,this.d=e.c*r+e.d*a,this.tx=e.tx*t+e.ty*s+this.tx,this.ty=e.tx*r+e.ty*a+this.ty,this}setTransform(e,t,r,s,a,c,f,m,_){return this.a=Math.cos(f+_)*a,this.b=Math.sin(f+_)*a,this.c=-Math.sin(f-m)*c,this.d=Math.cos(f-m)*c,this.tx=e-(r*this.a+s*this.c),this.ty=t-(r*this.b+s*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const r=this.a,s=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,r=this.b,s=this.c,a=this.d,c=e.pivot,f=-Math.atan2(-s,a),m=Math.atan2(r,t),_=Math.abs(f+m);return _<1e-5||Math.abs(bf-_)<1e-5?(e.rotation=m,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=f,e.skew.y=m),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(s*s+a*a),e.position.x=this.tx+(c.x*t+c.y*s),e.position.y=this.ty+(c.x*r+c.y*a),e}invert(){const e=this.a,t=this.b,r=this.c,s=this.d,a=this.tx,c=e*s-t*r;return this.a=s/c,this.b=-t/c,this.c=-r/c,this.d=e/c,this.tx=(r*this.ty-s*a)/c,this.ty=-(e*this.ty-t*a)/c,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Or;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new Or}static get TEMP_MATRIX(){return new Or}}Or.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Qu=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Zu=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ju=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ec=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Sg=[],sx=[],zd=Math.sign;function Lb(){for(let n=0;n<16;n++){const e=[];Sg.push(e);for(let t=0;t<16;t++){const r=zd(Qu[n]*Qu[t]+Ju[n]*Zu[t]),s=zd(Zu[n]*Qu[t]+ec[n]*Zu[t]),a=zd(Qu[n]*Ju[t]+Ju[n]*ec[t]),c=zd(Zu[n]*Ju[t]+ec[n]*ec[t]);for(let f=0;f<16;f++)if(Qu[f]===r&&Zu[f]===s&&Ju[f]===a&&ec[f]===c){e.push(f);break}}}for(let n=0;n<16;n++){const e=new Or;e.set(Qu[n],Zu[n],Ju[n],ec[n],0,0),sx.push(e)}}Lb();const Vr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>Qu[n],uY:n=>Zu[n],vX:n=>Ju[n],vY:n=>ec[n],inv:n=>n&8?n&15:-n&7,add:(n,e)=>Sg[n][e],sub:(n,e)=>Sg[n][Vr.inv(e)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,e)=>Math.abs(n)*2<=Math.abs(e)?e>=0?Vr.S:Vr.N:Math.abs(e)*2<=Math.abs(n)?n>0?Vr.E:Vr.W:e>0?n>0?Vr.SE:Vr.SW:n>0?Vr.NE:Vr.NW,matrixAppendRotationInv:(n,e,t=0,r=0)=>{const s=sx[Vr.inv(e)];s.tx=t,s.ty=r,n.append(s)}};class Ca{constructor(e,t,r=0,s=0){this._x=r,this._y=s,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new Ca(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}Ca.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const Eg=class{constructor(){this.worldTransform=new Or,this.localTransform=new Or,this.position=new Ca(this.onChange,this,0,0),this.scale=new Ca(this.onChange,this,1,1),this.pivot=new Ca(this.onChange,this,0,0),this.skew=new Ca(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const n=this.localTransform;this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale.x,n.b=this._sx*this.scale.x,n.c=this._cy*this.scale.y,n.d=this._sy*this.scale.y,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(n){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==n._worldID){const t=n.worldTransform,r=this.worldTransform;r.a=e.a*t.a+e.b*t.c,r.b=e.a*t.b+e.b*t.d,r.c=e.c*t.a+e.d*t.c,r.d=e.c*t.b+e.d*t.d,r.tx=e.tx*t.a+e.ty*t.c+t.tx,r.ty=e.tx*t.b+e.ty*t.d+t.ty,this._parentID=n._worldID,this._worldID++}}setFromMatrix(n){n.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(n){this._rotation!==n&&(this._rotation=n,this.updateSkew())}};Eg.IDENTITY=new Eg;let Wf=Eg;Wf.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var Fb=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,Bb=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function O_(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}function zm(n){const e=new Array(n);for(let t=0;t<e.length;t++)e[t]=!1;return e}function ox(n,e){switch(n){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return zm(2*e);case"bvec3":return zm(3*e);case"bvec4":return zm(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Yc=[{test:n=>n.type==="float"&&n.size===1&&!n.isArray,code:n=>`
            if(uv["${n}"] !== ud["${n}"].value)
            {
                ud["${n}"].value = uv["${n}"]
                gl.uniform1f(ud["${n}"].location, uv["${n}"])
            }
            `},{test:(n,e)=>(n.type==="sampler2D"||n.type==="samplerCube"||n.type==="sampler2DArray")&&n.size===1&&!n.isArray&&(e==null||e.castToBaseTexture!==void 0),code:n=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${n}"], t);

            if(ud["${n}"].value !== t)
            {
                ud["${n}"].value = t;
                gl.uniform1i(ud["${n}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(n,e)=>n.type==="mat3"&&n.size===1&&!n.isArray&&e.a!==void 0,code:n=>`
            gl.uniformMatrix3fv(ud["${n}"].location, false, uv["${n}"].toArray(true));
            `,codeUbo:n=>`
                var ${n}_matrix = uv.${n}.toArray(true);

                data[offset] = ${n}_matrix[0];
                data[offset+1] = ${n}_matrix[1];
                data[offset+2] = ${n}_matrix[2];
        
                data[offset + 4] = ${n}_matrix[3];
                data[offset + 5] = ${n}_matrix[4];
                data[offset + 6] = ${n}_matrix[5];
        
                data[offset + 8] = ${n}_matrix[6];
                data[offset + 9] = ${n}_matrix[7];
                data[offset + 10] = ${n}_matrix[8];
            `},{test:(n,e)=>n.type==="vec2"&&n.size===1&&!n.isArray&&e.x!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${n}"].location, v.x, v.y);
                }`,codeUbo:n=>`
                v = uv.${n};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:n=>n.type==="vec2"&&n.size===1&&!n.isArray,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${n}"].location, v[0], v[1]);
                }
            `},{test:(n,e)=>n.type==="vec4"&&n.size===1&&!n.isArray&&e.width!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${n}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(n,e)=>n.type==="vec4"&&n.size===1&&!n.isArray&&e.red!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${n}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(n,e)=>n.type==="vec3"&&n.size===1&&!n.isArray&&e.red!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${n}"].location, v.red, v.green, v.blue)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:n=>n.type==="vec4"&&n.size===1&&!n.isArray,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${n}"].location, v[0], v[1], v[2], v[3])
                }`}],Ub={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},Gb={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function jb(n,e){const t=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const r in n.uniforms){const s=e[r];if(!s){n.uniforms[r]?.group===!0&&(n.uniforms[r].ubo?t.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${r}, '${r}');
                    `):t.push(`
                        renderer.shader.syncUniformGroup(uv.${r}, syncData);
                    `));continue}const a=n.uniforms[r];let c=!1;for(let f=0;f<Yc.length;f++)if(Yc[f].test(s,a)){t.push(Yc[f].code(r,a)),c=!0;break}if(!c){const f=(s.size===1&&!s.isArray?Ub:Gb)[s.type].replace("location",`ud["${r}"].location`);t.push(`
            cu = ud["${r}"];
            cv = cu.value;
            v = uv["${r}"];
            ${f};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}const ax={};let Hd=ax;function zb(){if(Hd===ax||Hd?.isContextLost()){const n=mt.ADAPTER.createCanvas();let e;mt.PREFER_ENV>=uc.WEBGL2&&(e=n.getContext("webgl2",{})),e||(e=n.getContext("webgl",{})||n.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Hd=e}return Hd}let Vd;function Hb(){if(!Vd){Vd=no.MEDIUM;const n=zb();if(n&&n.getShaderPrecisionFormat){const e=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);e&&(Vd=e.precision?no.HIGH:no.MEDIUM)}}return Vd}function D_(n,e){const t=n.getShaderSource(e).split(`
`).map((_,w)=>`${w}: ${_}`),r=n.getShaderInfoLog(e),s=r.split(`
`),a={},c=s.map(_=>parseFloat(_.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(_=>_&&!a[_]?(a[_]=!0,!0):!1),f=[""];c.forEach(_=>{t[_-1]=`%c${t[_-1]}%c`,f.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const m=t.join(`
`);f[0]=m,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn(...f),console.groupEnd()}function Vb(n,e,t,r){n.getProgramParameter(e,n.LINK_STATUS)||(n.getShaderParameter(t,n.COMPILE_STATUS)||D_(n,t),n.getShaderParameter(r,n.COMPILE_STATUS)||D_(n,r),console.error("PixiJS Error: Could not initialize shader."),n.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",n.getProgramInfoLog(e)))}const Wb={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function lx(n){return Wb[n]}let Wd=null;const N_={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function ux(n,e){if(!Wd){const t=Object.keys(N_);Wd={};for(let r=0;r<t.length;++r){const s=t[r];Wd[n[s]]=N_[s]}}return Wd[e]}function L_(n,e,t){if(n.substring(0,9)!=="precision"){let r=e;return e===no.HIGH&&t!==no.HIGH&&(r=no.MEDIUM),`precision ${r} float;
${n}`}else if(t!==no.HIGH&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}let Bh;function $b(){if(typeof Bh=="boolean")return Bh;try{Bh=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Bh=!1}return Bh}let Xb=0;const $d={},Tg=class jc{constructor(e,t,r="pixi-shader",s={}){this.extra={},this.id=Xb++,this.vertexSrc=e||jc.defaultVertexSrc,this.fragmentSrc=t||jc.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=s,this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),$d[r]?($d[r]++,r+=`-${$d[r]}`):$d[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}
${this.fragmentSrc}`,this.vertexSrc=L_(this.vertexSrc,jc.defaultVertexPrecision,no.HIGH),this.fragmentSrc=L_(this.fragmentSrc,jc.defaultFragmentPrecision,Hb())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return Bb}static get defaultFragmentSrc(){return Fb}static from(e,t,r){const s=e+t;let a=P_[s];return a||(P_[s]=a=new jc(e,t,r)),a}};Tg.defaultVertexPrecision=no.HIGH,Tg.defaultFragmentPrecision=dl.apple.device?no.HIGH:no.MEDIUM;let fl=Tg,qb=0;class Go{constructor(e,t,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=qb++,this.static=!!t,this.ubo=!!r,e instanceof pn?(this.buffer=e,this.buffer.type=Ra.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new pn(new Float32Array(1)),this.buffer.type=Ra.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,r){if(!this.ubo)this.uniforms[e]=new Go(t,r);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,t,r){return new Go(e,t,r)}static uboFrom(e,t){return new Go(e,t??!0,!0)}}class ka{constructor(e,t){this.uniformBindCount=0,this.program=e,t?t instanceof Go?this.uniformGroup=t:this.uniformGroup=new Go(t):this.uniformGroup=new Go({}),this.disposeRunner=new Uo("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const r in t.uniforms){const s=t.uniforms[r];if(s.group===!0&&this.checkUniformExists(e,s))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,r){const s=fl.from(e,t);return new ka(s,r)}}class Kb{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const r=new Int32Array(e);for(let a=0;a<e;a++)r[a]=a;this.defaultGroupCache[e]=Go.from({uSamplers:r},!0);let s=this.fragTemplate;s=s.replace(/%count%/gi,`${e}`),s=s.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new fl(this.vertexSrc,s)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new Or,default:this.defaultGroupCache[e]};return new ka(this.programCache[e],t)}generateSampleSrc(e){let t="";t+=`
`,t+=`
`;for(let r=0;r<e;r++)r>0&&(t+=`
else `),r<e-1&&(t+=`if(vTextureId < ${r}.5)`),t+=`
{`,t+=`
	color = texture2D(uSamplers[${r}], vTextureCoord);`,t+=`
}`;return t+=`
`,t+=`
`,t}}class Ag{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function Yb(){return!dl.apple.device}function Qb(n){let e=!0;const t=mt.ADAPTER.getNavigator();if(dl.tablet||dl.phone){if(dl.apple.device){const r=t.userAgent.match(/OS (\d+)_(\d+)?/);r&&parseInt(r[1],10)<11&&(e=!1)}if(dl.android.device){const r=t.userAgent.match(/Android\s([0-9.]*)/);r&&parseInt(r[1],10)<7&&(e=!1)}}return e?n:4}class $f{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var Zb=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,Jb=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Vh=class Oo extends $f{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=ix,this.vertexSize=6,this.state=Na.for2d(),this.size=Oo.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??Qb(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??Yb(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return Jt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return Jb}static get defaultFragmentTemplate(){return Zb}setShaderGenerator({vertex:e=Oo.defaultVertexSrc,fragment:t=Oo.defaultFragmentTemplate}={}){this.shaderGenerator=new Kb(e,t)}contextChange(){const e=this.renderer.gl;mt.PREFER_ENV===uc.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Oo.defaultMaxTextures),this.maxTextures=Cb(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=Oo,r=this.size/4,s=Math.floor(r/this.maxTextures)+1;for(;e.length<r;)e.push(new bg);for(;t.length<s;)t.push(new Ag);for(let a=0;a<this.maxTextures;a++)this._tempBoundTextures[a]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,r=Oo._textureArrayPool,s=this.renderer.batch,a=this._tempBoundTextures,c=this.renderer.textureGC.count;let f=++Ht._globalBatch,m=0,_=r[0],w=0;s.copyBoundTextures(a,t);for(let d=0;d<this._bufferSize;++d){const y=e[d];e[d]=null,y._batchEnabled!==f&&(_.count>=t&&(s.boundArray(_,a,f,t),this.buildDrawCalls(_,w,d),w=d,_=r[++m],++f),y._batchEnabled=f,y.touched=c,_.elements[_.count++]=y)}_.count>0&&(s.boundArray(_,a,f,t),this.buildDrawCalls(_,w,this._bufferSize),++m,++f);for(let d=0;d<a.length;d++)a[d]=null;Ht._globalBatch=f}buildDrawCalls(e,t,r){const{_bufferedElements:s,_attributeBuffer:a,_indexBuffer:c,vertexSize:f}=this,m=Oo._drawCallPool;let _=this._dcIndex,w=this._aIndex,d=this._iIndex,y=m[_];y.start=this._iIndex,y.texArray=e;for(let b=t;b<r;++b){const T=s[b],I=T._texture.baseTexture,k=ex[I.alphaMode?1:0][T.blendMode];s[b]=null,t<b&&y.blend!==k&&(y.size=d-y.start,t=b,y=m[++_],y.texArray=e,y.start=d),this.packInterleavedGeometry(T,a,c,w,d),w+=T.vertexData.length/2*f,d+=T.indices.length,y.blend=k}t<r&&(y.size=d-y.start,++_),this._dcIndex=_,this._aIndex=w,this._iIndex=d}bindAndClearTexArray(e){const t=this.renderer.texture;for(let r=0;r<e.count;r++)t.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:r}=this;Oo.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:r}=this.renderer,s=Oo._drawCallPool;let a=null;for(let c=0;c<e;c++){const{texArray:f,type:m,size:_,start:w,blend:d}=s[c];a!==f&&(a=f,this.bindAndClearTexArray(f)),this.state.blendMode=d,r.set(this.state),t.drawElements(m,_,t.UNSIGNED_SHORT,w*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Oo.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=xf(Math.ceil(e/8)),r=A_(t),s=t*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new _g(s*this.vertexSize*4)),a}getIndexBuffer(e){const t=xf(Math.ceil(e/12)),r=A_(t),s=t*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let a=this._iBuffers[r];return a||(this._iBuffers[r]=a=new Uint16Array(s)),a}packInterleavedGeometry(e,t,r,s,a){const{uint32View:c,float32View:f}=t,m=s/this.vertexSize,_=e.uvs,w=e.indices,d=e.vertexData,y=e._texture.baseTexture._batchLocation,b=Math.min(e.worldAlpha,1),T=Ir.shared.setValue(e._tintRGB).toPremultiplied(b,e._texture.baseTexture.alphaMode>0);for(let I=0;I<d.length;I+=2)f[s++]=d[I],f[s++]=d[I+1],f[s++]=_[I],f[s++]=_[I+1],c[s++]=T,f[s++]=y;for(let I=0;I<w.length;I++)r[a++]=m+w[I]}};Vh.defaultBatchSize=4096,Vh.extension={name:"batch",type:ct.RendererPlugin},Vh._drawCallPool=[],Vh._textureArrayPool=[];let tc=Vh;St.add(tc);var eS=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,tS=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Cg=class Wh extends ka{constructor(e,t,r){const s=fl.from(e||Wh.defaultVertexSrc,t||Wh.defaultFragmentSrc);super(s,r),this.padding=0,this.resolution=Wh.defaultResolution,this.multisample=Wh.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Na}apply(e,t,r,s,a){e.applyFilter(this,t,r,s)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return tS}static get defaultFragmentSrc(){return eS}};Cg.defaultResolution=1,Cg.defaultMultisample=xn.NONE;let Oi=Cg;class Sf{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Ir(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:t,background:r,backgroundAlpha:s}=e,a=r??t;a!==void 0&&(this.color=a),this.alpha=s}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}Sf.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Sf.extension={type:[ct.RendererSystem,ct.CanvasRendererSystem],name:"background"};St.add(Sf);class cx{constructor(e){this.renderer=e,this.emptyRenderer=new $f(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:r}=this.renderer.texture;for(let s=t-1;s>=0;--s)e[s]=r[s]||null,e[s]&&(e[s]._batchLocation=s)}boundArray(e,t,r,s){const{elements:a,ids:c,count:f}=e;let m=0;for(let _=0;_<f;_++){const w=a[_],d=w._batchLocation;if(d>=0&&d<s&&t[d]===w){c[_]=d;continue}for(;m<s;){const y=t[m];if(y&&y._batchEnabled===r&&y._batchLocation===m){m++;continue}c[_]=m,w._batchLocation=m,t[m]=w;break}}}destroy(){this.renderer=null}}cx.extension={type:ct.RendererSystem,name:"batch"};St.add(cx);let F_=0;class Ef{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=F_++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,r=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:r,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=F_++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;t.addEventListener!==void 0&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let r;if(mt.PREFER_ENV>=uc.WEBGL2&&(r=e.getContext("webgl2",t)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const s=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Ef.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Ef.extension={type:ct.RendererSystem,name:"context"};St.add(Ef);class Pg{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Uo("disposeFramebuffer"),this.multisample=xn.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new Ht(null,{scaleMode:hl.NEAREST,resolution:1,mipmap:Ma.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new Ht(null,{scaleMode:hl.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Ma.OFF,format:nt.DEPTH_COMPONENT,type:Ct.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const s=this.colorTextures[r],a=s.resolution;s.setSize(e/a,t/a)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(e/r,t/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class hx extends Ht{constructor(e={}){if(typeof e=="number"){const t=arguments[0],r=arguments[1],s=arguments[2],a=arguments[3];e={width:t,height:r,scaleMode:s,resolution:a}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=xn.NONE),super(null,e),this.mipmap=Ma.OFF,this.valid=!0,this._clear=new Ir([0,0,0,0]),this.framebuffer=new Pg(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class vl extends td{constructor(e){const t=e,r=t.naturalWidth||t.videoWidth||t.displayWidth||t.width,s=t.naturalHeight||t.videoHeight||t.displayHeight||t.height;super(r,s),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,r){r===void 0&&!t.startsWith("data:")?e.crossOrigin=Eb(t):r!==!1&&(e.crossOrigin=typeof r=="string"?r:"anonymous")}upload(e,t,r,s){const a=e.gl,c=t.realWidth,f=t.realHeight;if(s=s||this.source,typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement&&s.readyState<=1)return!1;return a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===ps.UNPACK),!this.noSubImage&&t.target===a.TEXTURE_2D&&r.width===c&&r.height===f?a.texSubImage2D(a.TEXTURE_2D,0,0,0,t.format,r.type,s):(r.width=c,r.height=f,a.texImage2D(t.target,0,r.internalFormat,t.format,r.type,s)),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(t,r),super.update()}dispose(){this.source=null}}class dx extends vl{constructor(e,t){if(t=t||{},typeof e=="string"){const r=new Image;vl.crossOrigin(r,e,t.crossorigin),r.src=e,e=r}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??mt.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.bitmap=null,this._load=null,t.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((t,r)=>{const s=this.source;this.url=s.src;const a=()=>{this.destroyed||(s.onload=null,s.onerror=null,this.update(),this._load=null,this.createBitmap?t(this.process()):t(this))};s.complete&&s.src?a():(s.onload=a,s.onerror=c=>{r(c),this.onError.emit(c)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,r=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then(s=>s.blob()).then(s=>t(s,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ps.UNPACK?"premultiply":"none"})).then(s=>this.destroyed?Promise.reject():(this.bitmap=s,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,r){if(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,r,this.bitmap),!this.preserveBitmap){let s=!0;const a=t._glTextures;for(const c in a){const f=a[c];if(f!==r&&f.dirtyId!==t.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class fy{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,r){const s=t.width,a=t.height;if(r){const c=e.width/2/s,f=e.height/2/a,m=e.x/s+c,_=e.y/a+f;r=Vr.add(r,Vr.NW),this.x0=m+c*Vr.uX(r),this.y0=_+f*Vr.uY(r),r=Vr.add(r,2),this.x1=m+c*Vr.uX(r),this.y1=_+f*Vr.uY(r),r=Vr.add(r,2),this.x2=m+c*Vr.uX(r),this.y2=_+f*Vr.uY(r),r=Vr.add(r,2),this.x3=m+c*Vr.uX(r),this.y3=_+f*Vr.uY(r)}else this.x0=e.x/s,this.y0=e.y/a,this.x1=(e.x+e.width)/s,this.y1=e.y/a,this.x2=(e.x+e.width)/s,this.y2=(e.y+e.height)/a,this.x3=e.x/s,this.y3=(e.y+e.height)/a;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}fy.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const B_=new fy;function Xd(n){n.destroy=function(){},n.on=function(){},n.once=function(){},n.emit=function(){}}class lt extends od{constructor(e,t,r,s,a,c,f){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new Vt(0,0,1,1)),e instanceof lt&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=s,this.valid=!1,this.destroyed=!1,this._uvs=B_,this.uvMatrix=null,this.orig=r||t,this._rotate=Number(a||0),a===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=c?new er(c.x,c.y):new er(0,0),this.defaultBorders=f,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:t}=this.baseTexture;t?.url&&wa[t.url]&&lt.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,lt.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),r=new lt(this.baseTexture,!this.noFrame&&e,t,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=e),r}updateUvs(){this._uvs===B_&&(this._uvs=new fy),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},r=mt.STRICT_TEXTURE_CACHE){const s=typeof e=="string";let a=null;if(s)a=e;else if(e instanceof Ht){if(!e.cacheId){const f=t?.pixiIdPrefix||"pixiid";e.cacheId=`${f}-${lc()}`,Ht.addToCache(e,e.cacheId)}a=e.cacheId}else{if(!e._pixiId){const f=t?.pixiIdPrefix||"pixiid";e._pixiId=`${f}_${lc()}`}a=e._pixiId}let c=wa[a];if(s&&r&&!c)throw new Error(`The cacheId "${a}" does not exist in TextureCache.`);return!c&&!(e instanceof Ht)?(t.resolution||(t.resolution=yl(e)),c=new lt(new Ht(e,t)),c.baseTexture.cacheId=a,Ht.addToCache(c.baseTexture,a),lt.addToCache(c,a)):!c&&e instanceof Ht&&(c=new lt(e),lt.addToCache(c,a)),c}static fromURL(e,t){const r=Object.assign({autoLoad:!1},t?.resourceOptions),s=lt.from(e,Object.assign({resourceOptions:r},t),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(()=>Promise.resolve(s))}static fromBuffer(e,t,r,s){return new lt(Ht.fromBuffer(e,t,r,s))}static fromLoader(e,t,r,s){const a=new Ht(e,Object.assign({scaleMode:Ht.defaultOptions.scaleMode,resolution:yl(t)},s)),{resource:c}=a;c instanceof dx&&(c.url=t);const f=new lt(a);return r||(r=t),Ht.addToCache(f.baseTexture,r),lt.addToCache(f,r),r!==t&&(Ht.addToCache(f.baseTexture,t),lt.addToCache(f,t)),f.baseTexture.valid?Promise.resolve(f):new Promise(m=>{f.baseTexture.once("loaded",()=>m(f))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),wa[t]&&wa[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),wa[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=wa[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete wa[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)wa[e.textureCacheIds[t]]===e&&delete wa[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:r,width:s,height:a}=e,c=t+s>this.baseTexture.width,f=r+a>this.baseTexture.height;if(c||f){const m=c&&f?"and":"or",_=`X: ${t} + ${s} = ${t+s} > ${this.baseTexture.width}`,w=`Y: ${r} + ${a} = ${r+a} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${_} ${m} ${w}`)}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return lt._EMPTY||(lt._EMPTY=new lt(new Ht),Xd(lt._EMPTY),Xd(lt._EMPTY.baseTexture)),lt._EMPTY}static get WHITE(){if(!lt._WHITE){const e=mt.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),lt._WHITE=new lt(Ht.from(e)),Xd(lt._WHITE),Xd(lt._WHITE.baseTexture)}return lt._WHITE}}class cc extends lt{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,r=!0){const s=this.baseTexture.resolution,a=Math.round(e*s)/s,c=Math.round(t*s)/s;this.valid=a>0&&c>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=c,r&&this.baseTexture.resize(a,c),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new cc(new hx(e))}}class fx{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t,r=xn.NONE){const s=new hx(Object.assign({width:e,height:t,resolution:1,multisample:r},this.textureOptions));return new cc(s)}getOptimalTexture(e,t,r=1,s=xn.NONE){let a;e=Math.max(Math.ceil(e*r-1e-6),1),t=Math.max(Math.ceil(t*r-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||t!==this._pixelsHeight?(e=xf(e),t=xf(t),a=((e&65535)<<16|t&65535)>>>0,s>1&&(a+=s*4294967296)):a=s>1?-s:-1,this.texturePool[a]||(this.texturePool[a]=[]);let c=this.texturePool[a].pop();return c||(c=this.createTexture(e,t,s)),c.filterPoolKey=a,c.setResolution(r),c}getFilterTexture(e,t,r){const s=this.getOptimalTexture(e.width,e.height,t||e.resolution,r||xn.NONE);return s.filterFrame=e.filterFrame,s}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const t in this.texturePool){const r=this.texturePool[t];if(r)for(let s=0;s<r.length;s++)r[s].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const t in this.texturePool){if(!(Number(t)<0))continue;const r=this.texturePool[t];if(r)for(let s=0;s<r.length;s++)r[s].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}fx.SCREEN_KEY=-1;class rS extends du{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class px extends du{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new pn(this.vertices),this.uvBuffer=new pn(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let r=0,s=0;return this.uvs[0]=r,this.uvs[1]=s,this.uvs[2]=r+t.width/e.width,this.uvs[3]=s,this.uvs[4]=r+t.width/e.width,this.uvs[5]=s+t.height/e.height,this.uvs[6]=r,this.uvs[7]=s+t.height/e.height,r=t.x,s=t.y,this.vertices[0]=r,this.vertices[1]=s,this.vertices[2]=r+t.width,this.vertices[3]=s,this.vertices[4]=r+t.width,this.vertices[5]=s+t.height,this.vertices[6]=r,this.vertices[7]=s+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class nS{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=xn.NONE,this.sourceFrame=new Vt,this.destinationFrame=new Vt,this.bindingSourceFrame=new Vt,this.bindingDestinationFrame=new Vt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const qd=[new er,new er,new er,new er],Hm=new Or;class mx{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new fx,this.statePool=[],this.quad=new rS,this.quadUv=new px,this.tempRect=new Vt,this.activeState={},this.globalUniforms=new Go({outputFrame:new Vt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const r=this.renderer,s=this.defaultFilterStack,a=this.statePool.pop()||new nS,c=r.renderTexture;let f,m;if(c.current){const k=c.current;f=k.resolution,m=k.multisample}else f=r.resolution,m=r.multisample;let _=t[0].resolution||f,w=t[0].multisample??m,d=t[0].padding,y=t[0].autoFit,b=t[0].legacy??!0;for(let k=1;k<t.length;k++){const N=t[k];_=Math.min(_,N.resolution||f),w=Math.min(w,N.multisample??m),d=this.useMaxPadding?Math.max(d,N.padding):d+N.padding,y=y&&N.autoFit,b=b||(N.legacy??!0)}s.length===1&&(this.defaultFilterStack[0].renderTexture=c.current),s.push(a),a.resolution=_,a.multisample=w,a.legacy=b,a.target=e,a.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),a.sourceFrame.pad(d);const T=this.tempRect.copyFrom(c.sourceFrame);r.projection.transform&&this.transformAABB(Hm.copyFrom(r.projection.transform).invert(),T),y?(a.sourceFrame.fit(T),(a.sourceFrame.width<=0||a.sourceFrame.height<=0)&&(a.sourceFrame.width=0,a.sourceFrame.height=0)):a.sourceFrame.intersects(T)||(a.sourceFrame.width=0,a.sourceFrame.height=0),this.roundFrame(a.sourceFrame,c.current?c.current.resolution:r.resolution,c.sourceFrame,c.destinationFrame,r.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,_,w),a.filters=t,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;const I=this.tempRect;I.x=0,I.y=0,I.width=a.sourceFrame.width,I.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(c.sourceFrame),a.bindingDestinationFrame.copyFrom(c.destinationFrame),a.transform=r.projection.transform,r.projection.transform=null,c.bind(a.renderTexture,a.sourceFrame,I),r.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),r=t.filters;this.activeState=t;const s=this.globalUniforms.uniforms;s.outputFrame=t.sourceFrame,s.resolution=t.resolution;const a=s.inputSize,c=s.inputPixel,f=s.inputClamp;if(a[0]=t.destinationFrame.width,a[1]=t.destinationFrame.height,a[2]=1/a[0],a[3]=1/a[1],c[0]=Math.round(a[0]*t.resolution),c[1]=Math.round(a[1]*t.resolution),c[2]=1/c[0],c[3]=1/c[1],f[0]=.5*c[2],f[1]=.5*c[3],f[2]=t.sourceFrame.width*a[2]-.5*c[2],f[3]=t.sourceFrame.height*a[3]-.5*c[3],t.legacy){const _=s.filterArea;_[0]=t.destinationFrame.width,_[1]=t.destinationFrame.height,_[2]=t.sourceFrame.x,_[3]=t.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();const m=e[e.length-1];if(this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,t.renderTexture,m.renderTexture,Ta.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let _=t.renderTexture,w=this.getOptimalFilterTexture(_.width,_.height,t.resolution);w.filterFrame=_.filterFrame;let d=0;for(d=0;d<r.length-1;++d){d===1&&t.multisample>1&&(w=this.getOptimalFilterTexture(_.width,_.height,t.resolution),w.filterFrame=_.filterFrame),r[d].apply(this,_,w,Ta.CLEAR,t);const y=_;_=w,w=y}r[d].apply(this,_,m.renderTexture,Ta.BLEND,t),d>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(_),this.returnFilterTexture(w)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=Ta.CLEAR){const{renderTexture:r,state:s}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e?.filterFrame){const c=this.tempRect;c.x=0,c.y=0,c.width=e.filterFrame.width,c.height=e.filterFrame.height,r.bind(e,e.filterFrame,c)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const a=s.stateId&1||this.forceClear;(t===Ta.CLEAR||t===Ta.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,r,s){const a=this.renderer;a.state.set(e.state),this.bindAndClear(r,s),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,a.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),a.geometry.bind(this.quadUv),a.geometry.draw(Fo.TRIANGLES)):(a.geometry.bind(this.quad),a.geometry.draw(Fo.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:r,destinationFrame:s}=this.activeState,{orig:a}=t._texture,c=e.set(s.width,0,0,s.height,r.x,r.y),f=t.worldTransform.copyTo(Or.TEMP_MATRIX);return f.invert(),c.prepend(f),c.scale(1/a.width,1/a.height),c.translate(t.anchor.x,t.anchor.y),c}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,r=1,s=xn.NONE){return this.texturePool.getOptimalTexture(e,t,r,s)}getFilterTexture(e,t,r){if(typeof e=="number"){const a=e;e=t,t=a}e=e||this.activeState.renderTexture;const s=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,r||xn.NONE);return s.filterFrame=e.filterFrame,s}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const r=qd[0],s=qd[1],a=qd[2],c=qd[3];r.set(t.left,t.top),s.set(t.left,t.bottom),a.set(t.right,t.top),c.set(t.right,t.bottom),e.apply(r,r),e.apply(s,s),e.apply(a,a),e.apply(c,c);const f=Math.min(r.x,s.x,a.x,c.x),m=Math.min(r.y,s.y,a.y,c.y),_=Math.max(r.x,s.x,a.x,c.x),w=Math.max(r.y,s.y,a.y,c.y);t.x=f,t.y=m,t.width=_-f,t.height=w-m}roundFrame(e,t,r,s,a){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(a){const{a:c,b:f,c:m,d:_}=a;if((Math.abs(f)>1e-4||Math.abs(m)>1e-4)&&(Math.abs(c)>1e-4||Math.abs(_)>1e-4))return}a=a?Hm.copyFrom(a):Hm.identity(),a.translate(-r.x,-r.y).scale(s.width/r.width,s.height/r.height).translate(s.x,s.y),this.transformAABB(a,e),e.ceil(t),this.transformAABB(a.invert(),e)}}}mx.extension={type:ct.RendererSystem,name:"filter"};St.add(mx);class iS{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=xn.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const sS=new Vt;class gx{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new Pg(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Vt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let t=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;mt.PREFER_ENV===uc.WEBGL_LEGACY&&(t=null,r=null),t?e.drawBuffers=s=>t.drawBuffersWEBGL(s):(this.hasMRT=!1,e.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,r=0){const{gl:s}=this;if(e){const a=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,s.bindFramebuffer(s.FRAMEBUFFER,a.framebuffer)),a.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,a.mipLevel=r),a.dirtyId!==e.dirtyId&&(a.dirtyId=e.dirtyId,a.dirtyFormat!==e.dirtyFormat?(a.dirtyFormat=e.dirtyFormat,a.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):a.dirtySize!==e.dirtySize&&(a.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let c=0;c<e.colorTextures.length;c++){const f=e.colorTextures[c];this.renderer.texture.unbind(f.parentTextureArray||f)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const c=t.width>>r,f=t.height>>r,m=c/t.width;this.setViewport(t.x*m,t.y*m,c,f)}else{const c=e.width>>r,f=e.height>>r;this.setViewport(0,0,c,f)}}else this.current&&(this.current=null,s.bindFramebuffer(s.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,r,s){const a=this.viewport;e=Math.round(e),t=Math.round(t),r=Math.round(r),s=Math.round(s),(a.width!==r||a.height!==s||a.x!==e||a.y!==t)&&(a.x=e,a.y=t,a.width=r,a.height=s,this.gl.viewport(e,t,r,s))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,r,s,a=pg.COLOR|pg.DEPTH){const{gl:c}=this;c.clearColor(e,t,r,s),c.clear(a)}initFramebuffer(e){const{gl:t}=this,r=new iS(t.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r}resizeFramebuffer(e){const{gl:t}=this,r=e.glFramebuffers[this.CONTEXT_UID];if(r.stencil){t.bindRenderbuffer(t.RENDERBUFFER,r.stencil);let c;this.renderer.context.webGLVersion===1?c=t.DEPTH_STENCIL:e.depth&&e.stencil?c=t.DEPTH24_STENCIL8:e.depth?c=t.DEPTH_COMPONENT24:c=t.STENCIL_INDEX8,r.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,c,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,c,e.width,e.height)}const s=e.colorTextures;let a=s.length;t.drawBuffers||(a=Math.min(a,1));for(let c=0;c<a;c++){const f=s[c],m=f.parentTextureArray||f;this.renderer.texture.bind(m,0),c===0&&r.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,m._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:r}=this,s=e.glFramebuffers[this.CONTEXT_UID],a=e.colorTextures;let c=a.length;r.drawBuffers||(c=Math.min(c,1)),s.multisample>1&&this.canMultisampleFramebuffer(e)?s.msaaBuffer=s.msaaBuffer||r.createRenderbuffer():s.msaaBuffer&&(r.deleteRenderbuffer(s.msaaBuffer),s.msaaBuffer=null,s.blitFramebuffer&&(s.blitFramebuffer.dispose(),s.blitFramebuffer=null));const f=[];for(let m=0;m<c;m++){const _=a[m],w=_.parentTextureArray||_;this.renderer.texture.bind(w,0),m===0&&s.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,s.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,s.multisample,w._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,s.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+m,_.target,w._glTextures[this.CONTEXT_UID].texture,t),f.push(r.COLOR_ATTACHMENT0+m))}if(f.length>1&&r.drawBuffers(f),e.depthTexture&&this.writeDepthTexture){const m=e.depthTexture;this.renderer.texture.bind(m,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,m._glTextures[this.CONTEXT_UID].texture,t)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){s.stencil=s.stencil||r.createRenderbuffer();let m,_;this.renderer.context.webGLVersion===1?(m=r.DEPTH_STENCIL_ATTACHMENT,_=r.DEPTH_STENCIL):e.depth&&e.stencil?(m=r.DEPTH_STENCIL_ATTACHMENT,_=r.DEPTH24_STENCIL8):e.depth?(m=r.DEPTH_ATTACHMENT,_=r.DEPTH_COMPONENT24):(m=r.STENCIL_ATTACHMENT,_=r.STENCIL_INDEX8),r.bindRenderbuffer(r.RENDERBUFFER,s.stencil),s.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,s.multisample,_,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,_,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,m,r.RENDERBUFFER,s.stencil)}else s.stencil&&(r.deleteRenderbuffer(s.stencil),s.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let r=xn.NONE;if(e<=1||t===null)return r;for(let s=0;s<t.length;s++)if(t[s]<=e){r=t[s];break}return r===1&&(r=xn.NONE),r}blit(e,t,r){const{current:s,renderer:a,gl:c,CONTEXT_UID:f}=this;if(a.context.webGLVersion!==2||!s)return;const m=s.glFramebuffers[f];if(!m)return;if(!e){if(!m.msaaBuffer)return;const w=s.colorTextures[0];if(!w)return;m.blitFramebuffer||(m.blitFramebuffer=new Pg(s.width,s.height),m.blitFramebuffer.addColorTexture(0,w)),e=m.blitFramebuffer,e.colorTextures[0]!==w&&(e.colorTextures[0]=w,e.dirtyId++,e.dirtyFormat++),(e.width!==s.width||e.height!==s.height)&&(e.width=s.width,e.height=s.height,e.dirtyId++,e.dirtySize++)}t||(t=sS,t.width=s.width,t.height=s.height),r||(r=t);const _=t.width===r.width&&t.height===r.height;this.bind(e),c.bindFramebuffer(c.READ_FRAMEBUFFER,m.framebuffer),c.blitFramebuffer(t.left,t.top,t.right,t.bottom,r.left,r.top,r.right,r.bottom,c.COLOR_BUFFER_BIT,_?c.NEAREST:c.LINEAR),c.bindFramebuffer(c.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){const r=e.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(!r)return;delete e.glFramebuffers[this.CONTEXT_UID];const a=this.managedFramebuffers.indexOf(e);a>=0&&this.managedFramebuffers.splice(a,1),e.disposeRunner.remove(this),t||(s.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&s.deleteRenderbuffer(r.msaaBuffer),r.stencil&&s.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,t)}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<t.length;r++)this.disposeFramebuffer(t[r],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;const r=e.width,s=e.height,a=this.gl,c=t.stencil=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,c);let f,m;this.renderer.context.webGLVersion===1?(f=a.DEPTH_STENCIL_ATTACHMENT,m=a.DEPTH_STENCIL):e.depth?(f=a.DEPTH_STENCIL_ATTACHMENT,m=a.DEPTH24_STENCIL8):(f=a.STENCIL_ATTACHMENT,m=a.STENCIL_INDEX8),t.msaaBuffer?a.renderbufferStorageMultisample(a.RENDERBUFFER,t.multisample,m,r,s):a.renderbufferStorage(a.RENDERBUFFER,m,r,s),a.framebufferRenderbuffer(a.FRAMEBUFFER,f,a.RENDERBUFFER,c)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Vt}destroy(){this.renderer=null}}gx.extension={type:ct.RendererSystem,name:"framebuffer"};St.add(gx);const Vm={5126:4,5123:2,5121:1};class yx{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){let r=this.renderer.context.extensions.vertexArrayObject;mt.PREFER_ENV===uc.WEBGL_LEGACY&&(r=null),r?(e.createVertexArray=()=>r.createVertexArrayOES(),e.bindVertexArray=s=>r.bindVertexArrayOES(s),e.deleteVertexArray=s=>r.deleteVertexArrayOES(s)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(t.webGLVersion!==2){const r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=(s,a)=>r.vertexAttribDivisorANGLE(s,a),e.drawElementsInstanced=(s,a,c,f,m)=>r.drawElementsInstancedANGLE(s,a,c,f,m),e.drawArraysInstanced=(s,a,c,f)=>r.drawArraysInstancedANGLE(s,a,c,f)):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:r}=this;let s=e.glVertexArrayObjects[this.CONTEXT_UID],a=!1;s||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=s={},a=!0);const c=s[t.program.id]||this.initGeometryVao(e,t,a);this._activeGeometry=e,this._activeVao!==c&&(this._activeVao=c,this.hasVao?r.bindVertexArray(c):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let r=0;r<e.buffers.length;r++){const s=e.buffers[r];t.update(s)}}checkCompatibility(e,t){const r=e.attributes,s=t.attributeData;for(const a in s)if(!r[a])throw new Error(`shader and geometry incompatible, geometry missing the "${a}" attribute`)}getSignature(e,t){const r=e.attributes,s=t.attributeData,a=["g",e.id];for(const c in r)s[c]&&a.push(c,s[c].location);return a.join("-")}initGeometryVao(e,t,r=!0){const s=this.gl,a=this.CONTEXT_UID,c=this.renderer.buffer,f=t.program;f.glPrograms[a]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,f);const m=this.getSignature(e,f),_=e.glVertexArrayObjects[this.CONTEXT_UID];let w=_[m];if(w)return _[f.id]=w,w;const d=e.buffers,y=e.attributes,b={},T={};for(const I in d)b[I]=0,T[I]=0;for(const I in y)!y[I].size&&f.attributeData[I]?y[I].size=f.attributeData[I].size:y[I].size||console.warn(`PIXI Geometry attribute '${I}' size cannot be determined (likely the bound shader does not have the attribute)`),b[y[I].buffer]+=y[I].size*Vm[y[I].type];for(const I in y){const k=y[I],N=k.size;k.stride===void 0&&(b[k.buffer]===N*Vm[k.type]?k.stride=0:k.stride=b[k.buffer]),k.start===void 0&&(k.start=T[k.buffer],T[k.buffer]+=N*Vm[k.type])}w=s.createVertexArray(),s.bindVertexArray(w);for(let I=0;I<d.length;I++){const k=d[I];c.bind(k),r&&k._glBuffers[a].refCount++}return this.activateVao(e,f),_[f.id]=w,_[m]=w,s.bindVertexArray(null),c.unbind(Ra.ARRAY_BUFFER),w}disposeGeometry(e,t){if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const r=e.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=e.buffers,c=this.renderer?.buffer;if(e.disposeRunner.remove(this),!!r){if(c)for(let f=0;f<a.length;f++){const m=a[f]._glBuffers[this.CONTEXT_UID];m&&(m.refCount--,m.refCount===0&&!t&&c.dispose(a[f],t))}if(!t){for(const f in r)if(f[0]==="g"){const m=r[f];this._activeVao===m&&this.unbind(),s.deleteVertexArray(m)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let r=0;r<t.length;r++)this.disposeGeometry(this.managedGeometries[t[r]],e)}activateVao(e,t){const r=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,c=e.buffers,f=e.attributes;e.indexBuffer&&a.bind(e.indexBuffer);let m=null;for(const _ in f){const w=f[_],d=c[w.buffer],y=d._glBuffers[s];if(t.attributeData[_]){m!==y&&(a.bind(d),m=y);const b=t.attributeData[_].location;if(r.enableVertexAttribArray(b),r.vertexAttribPointer(b,w.size,w.type||r.FLOAT,w.normalized,w.stride,w.start),w.instance)if(this.hasInstance)r.vertexAttribDivisor(b,w.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,r,s){const{gl:a}=this,c=this._activeGeometry;if(c.indexBuffer){const f=c.indexBuffer.data.BYTES_PER_ELEMENT,m=f===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;f===2||f===4&&this.canUseUInt32ElementIndex?c.instanced?a.drawElementsInstanced(e,t||c.indexBuffer.data.length,m,(r||0)*f,s||1):a.drawElements(e,t||c.indexBuffer.data.length,m,(r||0)*f):console.warn("unsupported index buffer type: uint32")}else c.instanced?a.drawArraysInstanced(e,r,t||c.getSize(),s||1):a.drawArrays(e,r,t||c.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}yx.extension={type:ct.RendererSystem,name:"geometry"};St.add(yx);const U_=new Or;class py{constructor(e,t){this._texture=e,this.mapCoord=new Or,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){t===void 0&&(t=e);const r=this.mapCoord;for(let s=0;s<e.length;s+=2){const a=e[s],c=e[s+1];t[s]=a*r.a+c*r.c+r.tx,t[s+1]=a*r.b+c*r.d+r.ty}return t}update(e){const t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const s=t.orig,a=t.trim;a&&(U_.set(s.width/a.width,0,0,s.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(U_));const c=t.baseTexture,f=this.uClampFrame,m=this.clampMargin/c.resolution,_=this.clampOffset;return f[0]=(t._frame.x+m+_)/c.width,f[1]=(t._frame.y+m+_)/c.height,f[2]=(t._frame.x+t._frame.width-m+_)/c.width,f[3]=(t._frame.y+t._frame.height-m+_)/c.height,this.uClampOffset[0]=_/c.realWidth,this.uClampOffset[1]=_/c.realHeight,this.isSimple=t._frame.width===c.width&&t._frame.height===c.height&&t.rotate===0,!0}}var oS=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,aS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class lS extends Oi{constructor(e,t,r){let s=null;typeof e!="string"&&t===void 0&&r===void 0&&(s=e,e=void 0,t=void 0,r=void 0),super(e||aS,t||oS,r),this.maskSprite=s,this.maskMatrix=new Or}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,r,s){const a=this._maskSprite,c=a._texture;c.valid&&(c.uvMatrix||(c.uvMatrix=new py(c,0)),c.uvMatrix.update(),this.uniforms.npmAlpha=c.baseTexture.alphaMode?0:1,this.uniforms.mask=c,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(c.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=c.uvMatrix.uClampFrame,e.applyFilter(this,t,r,s))}}class uS{constructor(e=null){this.type=Pn.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Oi.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Pn.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class vx{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let r=t;if(!r.isMaskData){const a=this.maskDataPool.pop()||new uS;a.pooled=!0,a.maskObject=t,r=a}const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(s),r._colorMask=s?s._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==Pn.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case Pn.SCISSOR:this.renderer.scissor.push(r);break;case Pn.STENCIL:this.renderer.stencil.push(r);break;case Pn.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case Pn.COLOR:this.pushColorMask(r);break}r.type===Pn.SPRITE&&this.maskStack.push(r)}pop(e){const t=this.maskStack.pop();if(!(!t||t._target!==e)){if(t.enabled)switch(t.type){case Pn.SCISSOR:this.renderer.scissor.pop(t);break;case Pn.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case Pn.SPRITE:this.popSpriteMask(t);break;case Pn.COLOR:this.popColorMask(t);break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){const r=this.maskStack[this.maskStack.length-1];r.type===Pn.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=Pn.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Pn.SCISSOR:e.type=Pn.STENCIL:e.type=Pn.COLOR}pushSpriteMask(e){const{maskObject:t}=e,r=e._target;let s=e._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex],s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new lS])),s[0].resolution=e.resolution,s[0].multisample=e.multisample,s[0].maskSprite=t;const a=r.filterArea;r.filterArea=t.getBounds(!0),this.renderer.filter.push(r,s),r.filterArea=a,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,r=e._colorMask=t&e.colorMask;r!==t&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}popColorMask(e){const t=e._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==t&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}destroy(){this.renderer=null}}vx.extension={type:ct.RendererSystem,name:"mask"};St.add(vx);class _x{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,r=this.getStackLength();this.maskStack=e;const s=this.getStackLength();s!==r&&(s===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const G_=new Or,j_=[],xx=class df extends _x{constructor(e){super(e),this.glConst=mt.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:r}=e,{renderer:s}=this,a=s.renderTexture,c=r.getBounds(!0,j_.pop()??new Vt);this.roundFrameToPixels(c,a.current?a.current.resolution:s.resolution,a.sourceFrame,a.destinationFrame,s.projection.transform),t&&c.fit(t),e._scissorRectLocal=c}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:r,c:s,d:a}=e;return(Math.abs(r)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(a)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||df.isMatrixRotated(t.worldTransform)||df.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const r=e._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(e,t,r,s,a){df.isMatrixRotated(a)||(a=a?G_.copyFrom(a):G_.identity(),a.translate(-r.x,-r.y).scale(s.width/r.width,s.height/r.height).translate(s.x,s.y),this.renderer.filter.transformAABB(a,e),e.fit(s),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&j_.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};xx.extension={type:ct.RendererSystem,name:"scissor"};let cS=xx;St.add(cS);class wx extends _x{constructor(e){super(e),this.glConst=mt.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:r}=this.renderer,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++;const a=e._colorMask;a!==0&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,s,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,a!==0&&(e._colorMask=a,r.colorMask((a&1)!==0,(a&2)!==0,(a&4)!==0,(a&8)!==0)),this._useCurrent()}pop(e){const t=this.renderer.gl;if(this.getStackLength()===0)t.disable(t.STENCIL_TEST);else{const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=r?r._colorMask:15;s!==0&&(r._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,s!==0&&(r._colorMask=s,t.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}wx.extension={type:ct.RendererSystem,name:"stencil"};St.add(wx);class bx{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return Jt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return Jt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return Jt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}bx.extension={type:[ct.RendererSystem,ct.CanvasRendererSystem],name:"_plugin"};St.add(bx);class Sx{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Or,this.transform=null}update(e,t,r,s){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,s),this.transform&&this.projectionMatrix.append(this.transform);const a=this.renderer;a.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,a.globalUniforms.update(),a.shader.shader&&a.shader.syncUniformGroup(a.shader.shader.uniforms.globals)}calculateProjection(e,t,r,s){const a=this.projectionMatrix,c=s?-1:1;a.identity(),a.a=1/t.width*2,a.d=c*(1/t.height*2),a.tx=-1-t.x*a.a,a.ty=-c-t.y*a.d}setTransform(e){}destroy(){this.renderer=null}}Sx.extension={type:ct.RendererSystem,name:"projection"};St.add(Sx);const hS=new Wf,z_=new Vt;class Ex{constructor(e){this.renderer=e,this._tempMatrix=new Or}generateTexture(e,t){const{region:r,...s}=t||{},a=r?.copyTo(z_)||e.getLocalBounds(z_,!0),c=s.resolution||this.renderer.resolution;a.width=Math.max(a.width,1/c),a.height=Math.max(a.height,1/c),s.width=a.width,s.height=a.height,s.resolution=c,s.multisample??(s.multisample=this.renderer.multisample);const f=cc.create(s);this._tempMatrix.tx=-a.x,this._tempMatrix.ty=-a.y;const m=e.transform;return e.transform=hS,this.renderer.render(e,{renderTexture:f,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=m,f}destroy(){}}Ex.extension={type:[ct.RendererSystem,ct.CanvasRendererSystem],name:"textureGenerator"};St.add(Ex);const qu=new Vt,Uh=new Vt;class Tx{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Vt,this.destinationFrame=new Vt,this.viewportFrame=new Vt}contextChange(){const e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,r){const s=this.renderer;this.current=e;let a,c,f;e?(a=e.baseTexture,f=a.resolution,t||(qu.width=e.frame.width,qu.height=e.frame.height,t=qu),r||(Uh.x=e.frame.x,Uh.y=e.frame.y,Uh.width=t.width,Uh.height=t.height,r=Uh),c=a.framebuffer):(f=s.resolution,t||(qu.width=s._view.screen.width,qu.height=s._view.screen.height,t=qu),r||(r=qu,r.width=t.width,r.height=t.height));const m=this.viewportFrame;m.x=r.x*f,m.y=r.y*f,m.width=r.width*f,m.height=r.height*f,e||(m.y=s.view.height-(m.y+m.height)),m.ceil(),this.renderer.framebuffer.bind(c,m),this.renderer.projection.update(r,t,f,!c),e?this.renderer.mask.setMaskStack(a.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(r)}clear(e,t){const r=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,s=Ir.shared.setValue(e||r);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&s.premultiply(s.alpha);const a=this.destinationFrame,c=this.current?this.current.baseTexture:this.renderer._view.screen,f=a.width!==c.width||a.height!==c.height;if(f){let{x:m,y:_,width:w,height:d}=this.viewportFrame;m=Math.round(m),_=Math.round(_),w=Math.round(w),d=Math.round(d),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(m,_,w,d)}this.renderer.framebuffer.clear(s.red,s.green,s.blue,s.alpha,t),f&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}Tx.extension={type:ct.RendererSystem,name:"renderTexture"};St.add(Tx);class dS{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function fS(n,e){const t={},r=e.getProgramParameter(n,e.ACTIVE_ATTRIBUTES);for(let s=0;s<r;s++){const a=e.getActiveAttrib(n,s);if(a.name.startsWith("gl_"))continue;const c=ux(e,a.type),f={type:c,name:a.name,size:lx(c),location:e.getAttribLocation(n,a.name)};t[a.name]=f}return t}function pS(n,e){const t={},r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let s=0;s<r;s++){const a=e.getActiveUniform(n,s),c=a.name.replace(/\[.*?\]$/,""),f=!!a.name.match(/\[.*?\]$/),m=ux(e,a.type);t[c]={name:c,index:s,type:m,size:a.size,isArray:f,value:ox(m,a.size)}}return t}function mS(n,e){const t=O_(n,n.VERTEX_SHADER,e.vertexSrc),r=O_(n,n.FRAGMENT_SHADER,e.fragmentSrc),s=n.createProgram();n.attachShader(s,t),n.attachShader(s,r);const a=e.extra?.transformFeedbackVaryings;if(a&&(typeof n.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):n.transformFeedbackVaryings(s,a.names,a.bufferMode==="separate"?n.SEPARATE_ATTRIBS:n.INTERLEAVED_ATTRIBS)),n.linkProgram(s),n.getProgramParameter(s,n.LINK_STATUS)||Vb(n,s,t,r),e.attributeData=fS(s,n),e.uniformData=pS(s,n),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const f=Object.keys(e.attributeData);f.sort((m,_)=>m>_?1:-1);for(let m=0;m<f.length;m++)e.attributeData[f[m]].location=m,n.bindAttribLocation(s,m,f[m]);n.linkProgram(s)}n.deleteShader(t),n.deleteShader(r);const c={};for(const f in e.uniformData){const m=e.uniformData[f];c[f]={location:n.getUniformLocation(s,f),value:ox(m.type,m.size)}}return new dS(s,c)}function gS(n,e,t,r,s){t.buffer.update(s)}const yS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Ax={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function vS(n){const e=n.map(a=>({data:a,offset:0,dataLen:0,dirty:0}));let t=0,r=0,s=0;for(let a=0;a<e.length;a++){const c=e[a];if(t=Ax[c.data.type],c.data.size>1&&(t=Math.max(t,16)*c.data.size),c.dataLen=t,r%t!==0&&r<16){const f=r%t%16;r+=f,s+=f}r+t>16?(s=Math.ceil(s/16)*16,c.offset=s,s+=t,r=t):(c.offset=s,r+=t,s+=t)}return s=Math.ceil(s/16)*16,{uboElements:e,size:s}}function _S(n,e){const t=[];for(const r in n)e[r]&&t.push(e[r]);return t.sort((r,s)=>r.index-s.index),t}function xS(n,e){if(!n.autoManage)return{size:0,syncFunc:gS};const t=_S(n.uniforms,e),{uboElements:r,size:s}=vS(t),a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let c=0;c<r.length;c++){const f=r[c],m=n.uniforms[f.data.name],_=f.data.name;let w=!1;for(let d=0;d<Yc.length;d++){const y=Yc[d];if(y.codeUbo&&y.test(f.data,m)){a.push(`offset = ${f.offset/4};`,Yc[d].codeUbo(f.data.name,m)),w=!0;break}}if(!w)if(f.data.size>1){const d=lx(f.data.type),y=Math.max(Ax[f.data.type]/16,1),b=d/y,T=(4-b%4)%4;a.push(`
                cv = ud.${_}.value;
                v = uv.${_};
                offset = ${f.offset/4};

                t = 0;

                for(var i=0; i < ${f.data.size*y}; i++)
                {
                    for(var j = 0; j < ${b}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${T};
                }

                `)}else{const d=yS[f.data.type];a.push(`
                cv = ud.${_}.value;
                v = uv.${_};
                offset = ${f.offset/4};
                ${d};
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}let wS=0;const Kd={textureCount:0,uboCount:0};class Cx{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=wS++}systemCheck(){if(!$b())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const r=e.program,s=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(s.program)),t||(Kd.textureCount=0,Kd.uboCount=0,this.syncUniformGroup(e.uniformGroup,Kd)),s}setUniforms(e){const t=this.shader.program,r=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(r.uniformData,e,this.renderer)}syncUniformGroup(e,t){const r=this.getGlProgram();(!e.static||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,t))}syncUniforms(e,t,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,r)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=jb(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const r=this.getGlProgram();if(!e.static||e.dirtyId!==0||!r.uniformGroups[e.id]){e.dirtyId=0;const s=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,t);e.buffer.update(),s(r.uniformData,e.uniforms,this.renderer,Kd,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[t])}createSyncBufferGroup(e,t,r){const{gl:s}=this.renderer;this.renderer.buffer.bind(e.buffer);const a=this.gl.getUniformBlockIndex(t.program,r);t.uniformBufferBindings[r]=this.shader.uniformBindCount,s.uniformBlockBinding(t.program,a,this.shader.uniformBindCount),this.shader.uniformBindCount++;const c=this.getSignature(e,this.shader.program.uniformData,"ubo");let f=this._uboCache[c];if(f||(f=this._uboCache[c]=xS(e,this.shader.program.uniformData)),e.autoManage){const m=new Float32Array(f.size/4);e.buffer.update(m)}return t.uniformGroups[e.id]=f.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,r){const s=e.uniforms,a=[`${r}-`];for(const c in s)a.push(c),t[c]&&a.push(t[c].type);return a.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,r=e.program,s=mS(t,r);return r.glPrograms[this.renderer.CONTEXT_UID]=s,s}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}Cx.extension={type:ct.RendererSystem,name:"shader"};St.add(Cx);class Tf{constructor(e){this.renderer=e}run(e){const{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&console.log(`PixiJS 7.4.3 - ${t.rendererLogId} - https://pixijs.com`),t.resize(t.screen.width,t.screen.height)}destroy(){}}Tf.defaultOptions={hello:!1},Tf.extension={type:[ct.RendererSystem,ct.CanvasRendererSystem],name:"startup"};St.add(Tf);function bS(n,e=[]){return e[Ot.NORMAL]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ot.ADD]=[n.ONE,n.ONE],e[Ot.MULTIPLY]=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ot.SCREEN]=[n.ONE,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ot.OVERLAY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ot.DARKEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ot.LIGHTEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ot.COLOR_DODGE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ot.COLOR_BURN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ot.HARD_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ot.SOFT_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ot.DIFFERENCE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ot.EXCLUSION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ot.HUE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ot.SATURATION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ot.COLOR]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ot.LUMINOSITY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ot.NONE]=[0,0],e[Ot.NORMAL_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ot.ADD_NPM]=[n.SRC_ALPHA,n.ONE,n.ONE,n.ONE],e[Ot.SCREEN_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ot.SRC_IN]=[n.DST_ALPHA,n.ZERO],e[Ot.SRC_OUT]=[n.ONE_MINUS_DST_ALPHA,n.ZERO],e[Ot.SRC_ATOP]=[n.DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[Ot.DST_OVER]=[n.ONE_MINUS_DST_ALPHA,n.ONE],e[Ot.DST_IN]=[n.ZERO,n.SRC_ALPHA],e[Ot.DST_OUT]=[n.ZERO,n.ONE_MINUS_SRC_ALPHA],e[Ot.DST_ATOP]=[n.ONE_MINUS_DST_ALPHA,n.SRC_ALPHA],e[Ot.XOR]=[n.ONE_MINUS_DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[Ot.SUBTRACT]=[n.ONE,n.ONE,n.ONE,n.ONE,n.FUNC_REVERSE_SUBTRACT,n.FUNC_ADD],e}const SS=0,ES=1,TS=2,AS=3,CS=4,PS=5,Px=class Ig{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Ot.NONE,this._blendEq=!1,this.map=[],this.map[SS]=this.setBlend,this.map[ES]=this.setOffset,this.map[TS]=this.setCullFace,this.map[AS]=this.setDepthTest,this.map[CS]=this.setFrontFace,this.map[PS]=this.setDepthMask,this.checks=[],this.defaultState=new Na,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=bS(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,r=0;for(;t;)t&1&&this.map[r].call(this,!!(e.data&1<<r)),t=t>>1,r++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(Ig.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(Ig.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],r=this.gl;t.length===2?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const r=this.checks.indexOf(e);t&&r===-1?this.checks.push(e):!t&&r!==-1&&this.checks.splice(r,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};Px.extension={type:ct.RendererSystem,name:"state"};let IS=Px;St.add(IS);class RS extends od{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter(s=>e.systems[s]),r=[...t,...Object.keys(e.systems).filter(s=>!t.includes(s))];for(const s of r)this.addSystem(e.systems[s],s)}addRunners(...e){e.forEach(t=>{this.runners[t]=new Uo(t)})}addSystem(e,t){const r=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=r,this._systemsHash[t]=r;for(const s in this.runners)this.runners[s].add(r);return this}emitWithCustomOptions(e,t){const r=Object.keys(this._systemsHash);e.items.forEach(s=>{const a=r.find(c=>this._systemsHash[c]===s);s[e.name](t[a])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const $h=class ff{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=ff.defaultMaxIdle,this.checkCountMax=ff.defaultCheckCountMax,this.mode=ff.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==uy.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let r=!1;for(let s=0;s<t.length;s++){const a=t[s];a.resource&&this.count-a.touched>this.maxIdle&&(e.destroyTexture(a,!0),t[s]=null,r=!0)}if(r){let s=0;for(let a=0;a<t.length;a++)t[a]!==null&&(t[s++]=t[a]);t.length=s}}unload(e){const t=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(let s=e.children.length-1;s>=0;s--)this.unload(e.children[s])}destroy(){this.renderer=null}};$h.defaultMode=uy.AUTO,$h.defaultMaxIdle=3600,$h.defaultCheckCountMax=600,$h.extension={type:ct.RendererSystem,name:"textureGC"};let rc=$h;St.add(rc);class Wm{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Ct.UNSIGNED_BYTE,this.internalFormat=nt.RGBA,this.samplerType=0}}function kS(n){let e;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?e={[n.RGB]:pt.FLOAT,[n.RGBA]:pt.FLOAT,[n.ALPHA]:pt.FLOAT,[n.LUMINANCE]:pt.FLOAT,[n.LUMINANCE_ALPHA]:pt.FLOAT,[n.R8]:pt.FLOAT,[n.R8_SNORM]:pt.FLOAT,[n.RG8]:pt.FLOAT,[n.RG8_SNORM]:pt.FLOAT,[n.RGB8]:pt.FLOAT,[n.RGB8_SNORM]:pt.FLOAT,[n.RGB565]:pt.FLOAT,[n.RGBA4]:pt.FLOAT,[n.RGB5_A1]:pt.FLOAT,[n.RGBA8]:pt.FLOAT,[n.RGBA8_SNORM]:pt.FLOAT,[n.RGB10_A2]:pt.FLOAT,[n.RGB10_A2UI]:pt.FLOAT,[n.SRGB8]:pt.FLOAT,[n.SRGB8_ALPHA8]:pt.FLOAT,[n.R16F]:pt.FLOAT,[n.RG16F]:pt.FLOAT,[n.RGB16F]:pt.FLOAT,[n.RGBA16F]:pt.FLOAT,[n.R32F]:pt.FLOAT,[n.RG32F]:pt.FLOAT,[n.RGB32F]:pt.FLOAT,[n.RGBA32F]:pt.FLOAT,[n.R11F_G11F_B10F]:pt.FLOAT,[n.RGB9_E5]:pt.FLOAT,[n.R8I]:pt.INT,[n.R8UI]:pt.UINT,[n.R16I]:pt.INT,[n.R16UI]:pt.UINT,[n.R32I]:pt.INT,[n.R32UI]:pt.UINT,[n.RG8I]:pt.INT,[n.RG8UI]:pt.UINT,[n.RG16I]:pt.INT,[n.RG16UI]:pt.UINT,[n.RG32I]:pt.INT,[n.RG32UI]:pt.UINT,[n.RGB8I]:pt.INT,[n.RGB8UI]:pt.UINT,[n.RGB16I]:pt.INT,[n.RGB16UI]:pt.UINT,[n.RGB32I]:pt.INT,[n.RGB32UI]:pt.UINT,[n.RGBA8I]:pt.INT,[n.RGBA8UI]:pt.UINT,[n.RGBA16I]:pt.INT,[n.RGBA16UI]:pt.UINT,[n.RGBA32I]:pt.INT,[n.RGBA32UI]:pt.UINT,[n.DEPTH_COMPONENT16]:pt.FLOAT,[n.DEPTH_COMPONENT24]:pt.FLOAT,[n.DEPTH_COMPONENT32F]:pt.FLOAT,[n.DEPTH_STENCIL]:pt.FLOAT,[n.DEPTH24_STENCIL8]:pt.FLOAT,[n.DEPTH32F_STENCIL8]:pt.FLOAT}:e={[n.RGB]:pt.FLOAT,[n.RGBA]:pt.FLOAT,[n.ALPHA]:pt.FLOAT,[n.LUMINANCE]:pt.FLOAT,[n.LUMINANCE_ALPHA]:pt.FLOAT,[n.DEPTH_STENCIL]:pt.FLOAT},e}function MS(n){let e;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?e={[Ct.UNSIGNED_BYTE]:{[nt.RGBA]:n.RGBA8,[nt.RGB]:n.RGB8,[nt.RG]:n.RG8,[nt.RED]:n.R8,[nt.RGBA_INTEGER]:n.RGBA8UI,[nt.RGB_INTEGER]:n.RGB8UI,[nt.RG_INTEGER]:n.RG8UI,[nt.RED_INTEGER]:n.R8UI,[nt.ALPHA]:n.ALPHA,[nt.LUMINANCE]:n.LUMINANCE,[nt.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[Ct.BYTE]:{[nt.RGBA]:n.RGBA8_SNORM,[nt.RGB]:n.RGB8_SNORM,[nt.RG]:n.RG8_SNORM,[nt.RED]:n.R8_SNORM,[nt.RGBA_INTEGER]:n.RGBA8I,[nt.RGB_INTEGER]:n.RGB8I,[nt.RG_INTEGER]:n.RG8I,[nt.RED_INTEGER]:n.R8I},[Ct.UNSIGNED_SHORT]:{[nt.RGBA_INTEGER]:n.RGBA16UI,[nt.RGB_INTEGER]:n.RGB16UI,[nt.RG_INTEGER]:n.RG16UI,[nt.RED_INTEGER]:n.R16UI,[nt.DEPTH_COMPONENT]:n.DEPTH_COMPONENT16},[Ct.SHORT]:{[nt.RGBA_INTEGER]:n.RGBA16I,[nt.RGB_INTEGER]:n.RGB16I,[nt.RG_INTEGER]:n.RG16I,[nt.RED_INTEGER]:n.R16I},[Ct.UNSIGNED_INT]:{[nt.RGBA_INTEGER]:n.RGBA32UI,[nt.RGB_INTEGER]:n.RGB32UI,[nt.RG_INTEGER]:n.RG32UI,[nt.RED_INTEGER]:n.R32UI,[nt.DEPTH_COMPONENT]:n.DEPTH_COMPONENT24},[Ct.INT]:{[nt.RGBA_INTEGER]:n.RGBA32I,[nt.RGB_INTEGER]:n.RGB32I,[nt.RG_INTEGER]:n.RG32I,[nt.RED_INTEGER]:n.R32I},[Ct.FLOAT]:{[nt.RGBA]:n.RGBA32F,[nt.RGB]:n.RGB32F,[nt.RG]:n.RG32F,[nt.RED]:n.R32F,[nt.DEPTH_COMPONENT]:n.DEPTH_COMPONENT32F},[Ct.HALF_FLOAT]:{[nt.RGBA]:n.RGBA16F,[nt.RGB]:n.RGB16F,[nt.RG]:n.RG16F,[nt.RED]:n.R16F},[Ct.UNSIGNED_SHORT_5_6_5]:{[nt.RGB]:n.RGB565},[Ct.UNSIGNED_SHORT_4_4_4_4]:{[nt.RGBA]:n.RGBA4},[Ct.UNSIGNED_SHORT_5_5_5_1]:{[nt.RGBA]:n.RGB5_A1},[Ct.UNSIGNED_INT_2_10_10_10_REV]:{[nt.RGBA]:n.RGB10_A2,[nt.RGBA_INTEGER]:n.RGB10_A2UI},[Ct.UNSIGNED_INT_10F_11F_11F_REV]:{[nt.RGB]:n.R11F_G11F_B10F},[Ct.UNSIGNED_INT_5_9_9_9_REV]:{[nt.RGB]:n.RGB9_E5},[Ct.UNSIGNED_INT_24_8]:{[nt.DEPTH_STENCIL]:n.DEPTH24_STENCIL8},[Ct.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[nt.DEPTH_STENCIL]:n.DEPTH32F_STENCIL8}}:e={[Ct.UNSIGNED_BYTE]:{[nt.RGBA]:n.RGBA,[nt.RGB]:n.RGB,[nt.ALPHA]:n.ALPHA,[nt.LUMINANCE]:n.LUMINANCE,[nt.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[Ct.UNSIGNED_SHORT_5_6_5]:{[nt.RGB]:n.RGB},[Ct.UNSIGNED_SHORT_4_4_4_4]:{[nt.RGBA]:n.RGBA},[Ct.UNSIGNED_SHORT_5_5_5_1]:{[nt.RGBA]:n.RGBA}},e}class Ix{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Ht,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=MS(e),this.samplerTypes=kS(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let s=0;s<t;s++)this.boundTextures[s]=null;this.emptyTextures={};const r=new Wm(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Wm(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let s=0;s<6;s++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let s=0;s<this.boundTextures.length;s++)this.bind(null,s)}bind(e,t=0){const{gl:r}=this;if(e=e?.castToBaseTexture(),e?.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const s=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(e.target,s.texture)),s.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),this.updateTexture(e)):s.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let s=0;s<r.length;s++)r[s]===this.unknownTexture&&this.bind(null,s)}for(let s=0;s<r.length;s++)r[s]===e&&(this.currentLocation!==s&&(t.activeTexture(t.TEXTURE0+s),this.currentLocation=s),t.bindTexture(e.target,this.emptyTextures[e.target].texture),r[s]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:r,CONTEXT_UID:s}=this;if(r)for(let a=e-1;a>=0;--a){const c=t[a];c&&c._glTextures[s].samplerType!==pt.FLOAT&&this.renderer.texture.unbind(c)}}initTexture(e){const t=new Wm(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){t.internalFormat=this.internalFormats[e.type]?.[e.format]??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??pt.FLOAT,this.webGLVersion===2&&e.type===Ct.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const r=this.renderer;if(this.initTextureType(e,t),e.resource?.upload(r,e,t))t.samplerType!==pt.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,a=e.realHeight,c=r.gl;(t.width!==s||t.height!==a||t.dirtyId<0)&&(t.width=s,t.height=a,c.texImage2D(e.target,0,t.internalFormat,s,a,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:r}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const s=this.managedTextures.indexOf(e);s!==-1&&Kc(this.managedTextures,s,1)}}updateTextureStyle(e){const t=e._glTextures[this.CONTEXT_UID];t&&((e.mipmap===Ma.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?t.mipmap=!1:t.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?t.wrapMode=pl.CLAMP:t.wrapMode=e.wrapMode,e.resource?.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const r=this.gl;if(t.mipmap&&e.mipmap!==Ma.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===hl.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const s=this.renderer.context.extensions.anisotropicFiltering;if(s&&e.anisotropicLevel>0&&e.scaleMode===hl.LINEAR){const a=Math.min(e.anisotropicLevel,r.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,s.TEXTURE_MAX_ANISOTROPY_EXT,a)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===hl.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===hl.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}Ix.extension={type:ct.RendererSystem,name:"texture"};St.add(Ix);class Rx{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:r}=this,s=e._glTransformFeedbacks[r]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,s)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:r,renderer:s}=this;t&&s.shader.bind(t),r.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:r,CONTEXT_UID:s}=this,a=t.createTransformFeedback();e._glTransformFeedbacks[s]=a,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,a);for(let c=0;c<e.buffers.length;c++){const f=e.buffers[c];f&&(r.buffer.update(f),f._glBuffers[s].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,c,f._glBuffers[s].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),a}disposeTransformFeedback(e,t){const r=e._glTransformFeedbacks[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this);const a=this.renderer.buffer;if(a)for(let c=0;c<e.buffers.length;c++){const f=e.buffers[c];if(!f)continue;const m=f._glBuffers[this.CONTEXT_UID];m&&(m.refCount--,m.refCount===0&&!t&&a.dispose(f,t))}r&&(t||s.deleteTransformFeedback(r),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Rx.extension={type:ct.RendererSystem,name:"transformFeedback"};St.add(Rx);class Af{constructor(e){this.renderer=e}init(e){this.screen=new Vt(0,0,e.width,e.height),this.element=e.view||mt.ADAPTER.createCanvas(),this.resolution=e.resolution||mt.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const r=this.element.width/this.resolution,s=this.element.height/this.resolution;this.screen.width=r,this.screen.height=s,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${s}px`),this.renderer.emit("resize",r,s),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){e&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}Af.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},Af.extension={type:[ct.RendererSystem,ct.CanvasRendererSystem],name:"_view"};St.add(Af);mt.PREFER_ENV=uc.WEBGL2;mt.STRICT_TEXTURE_CACHE=!1;mt.RENDER_OPTIONS={...Ef.defaultOptions,...Sf.defaultOptions,...Af.defaultOptions,...Tf.defaultOptions};Object.defineProperties(mt,{WRAP_MODE:{get(){return Ht.defaultOptions.wrapMode},set(n){Jt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Ht.defaultOptions.wrapMode=n}},SCALE_MODE:{get(){return Ht.defaultOptions.scaleMode},set(n){Jt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Ht.defaultOptions.scaleMode=n}},MIPMAP_TEXTURES:{get(){return Ht.defaultOptions.mipmap},set(n){Jt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Ht.defaultOptions.mipmap=n}},ANISOTROPIC_LEVEL:{get(){return Ht.defaultOptions.anisotropicLevel},set(n){Jt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Ht.defaultOptions.anisotropicLevel=n}},FILTER_RESOLUTION:{get(){return Jt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Oi.defaultResolution},set(n){Oi.defaultResolution=n}},FILTER_MULTISAMPLE:{get(){return Jt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Oi.defaultMultisample},set(n){Oi.defaultMultisample=n}},SPRITE_MAX_TEXTURES:{get(){return tc.defaultMaxTextures},set(n){Jt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),tc.defaultMaxTextures=n}},SPRITE_BATCH_SIZE:{get(){return tc.defaultBatchSize},set(n){Jt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),tc.defaultBatchSize=n}},CAN_UPLOAD_SAME_BUFFER:{get(){return tc.canUploadSameBuffer},set(n){Jt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),tc.canUploadSameBuffer=n}},GC_MODE:{get(){return rc.defaultMode},set(n){Jt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),rc.defaultMode=n}},GC_MAX_IDLE:{get(){return rc.defaultMaxIdle},set(n){Jt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),rc.defaultMaxIdle=n}},GC_MAX_CHECK_COUNT:{get(){return rc.defaultCheckCountMax},set(n){Jt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),rc.defaultCheckCountMax=n}},PRECISION_VERTEX:{get(){return fl.defaultVertexPrecision},set(n){Jt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),fl.defaultVertexPrecision=n}},PRECISION_FRAGMENT:{get(){return fl.defaultFragmentPrecision},set(n){Jt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),fl.defaultFragmentPrecision=n}}});var fu=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(fu||{});class $m{constructor(e,t=null,r=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=r,this.once=s}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const kx=class Rs{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new $m(null,null,1/0),this.deltaMS=1/Rs.targetFPMS,this.elapsedMS=1/Rs.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,r=fu.NORMAL){return this._addListener(new $m(e,t,r))}addOnce(e,t,r=fu.NORMAL){return this._addListener(new $m(e,t,r,!0))}_addListener(e){let t=this._head.next,r=this._head;if(!t)e.connect(r);else{for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}return this._startIfPossible(),this}remove(e,t){let r=this._head.next;for(;r;)r.match(e,t)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const a=e-this._lastFrame|0;if(a<this._minElapsedMS)return;this._lastFrame=e-a%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Rs.targetFPMS;const r=this._head;let s=r.next;for(;s;)s=s.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,t)/1e3,Rs.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Rs._shared){const e=Rs._shared=new Rs;e.autoStart=!0,e._protected=!0}return Rs._shared}static get system(){if(!Rs._system){const e=Rs._system=new Rs;e.autoStart=!0,e._protected=!0}return Rs._system}};kx.targetFPMS=.06;let Gn=kx;Object.defineProperties(mt,{TARGET_FPMS:{get(){return Gn.targetFPMS},set(n){Jt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Gn.targetFPMS=n}}});class Mx{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,fu.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Gn.shared:new Gn,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}Mx.extension=ct.Application;St.add(Mx);const Ox=[];St.handleByList(ct.Renderer,Ox);function OS(n){for(const e of Ox)if(e.test(n))return new e(n);throw new Error("Unable to auto-detect a suitable renderer.")}var DS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,NS=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const LS=DS,Dx=NS;class Nx{constructor(e){this.renderer=e}contextChange(e){let t;if(this.renderer.context.webGLVersion===1){const r=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,r)}else{const r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}t>=xn.HIGH?this.multisample=xn.HIGH:t>=xn.MEDIUM?this.multisample=xn.MEDIUM:t>=xn.LOW?this.multisample=xn.LOW:this.multisample=xn.NONE}destroy(){}}Nx.extension={type:ct.RendererSystem,name:"_multisample"};St.add(Nx);class FS{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class Lx{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:r}=this,s=e._glBuffers[r]||this.createGLBuffer(e);t.bindBuffer(e.type,s.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:r,CONTEXT_UID:s}=this;if(this.boundBufferBases[t]!==e){const a=e._glBuffers[s]||this.createGLBuffer(e);this.boundBufferBases[t]=e,r.bindBufferBase(r.UNIFORM_BUFFER,t,a.buffer)}}bindBufferRange(e,t,r){const{gl:s,CONTEXT_UID:a}=this;r=r||0;const c=e._glBuffers[a]||this.createGLBuffer(e);s.bindBufferRange(s.UNIFORM_BUFFER,t||0,c.buffer,r*256,256)}update(e){const{gl:t,CONTEXT_UID:r}=this,s=e._glBuffers[r]||this.createGLBuffer(e);if(e._updateID!==s.updateID)if(s.updateID=e._updateID,t.bindBuffer(e.type,s.buffer),s.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const a=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;s.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,a)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const r=e._glBuffers[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this),r&&(t||s.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let r=0;r<t.length;r++)this.dispose(this.managedBuffers[t[r]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:r}=this;return e._glBuffers[t]=new FS(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}Lx.extension={type:ct.RendererSystem,name:"buffer"};St.add(Lx);class Fx{constructor(e){this.renderer=e}render(e,t){const r=this.renderer;let s,a,c,f;if(t&&(s=t.renderTexture,a=t.clear,c=t.transform,f=t.skipUpdateTransform),this.renderingToScreen=!s,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=c,!r.context.isLost){if(s||(this.lastObjectRendered=e),!f){const m=e.enableTempParent();e.updateTransform(),e.disableTempParent(m)}r.renderTexture.bind(s),r.batch.currentRenderer.start(),(a??r.background.clearBeforeRender)&&r.renderTexture.clear(),e.render(r),r.batch.currentRenderer.flush(),s&&(t.blit&&r.framebuffer.blit(),s.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}Fx.extension={type:ct.RendererSystem,name:"objectRenderer"};St.add(Fx);const pf=class Rg extends RS{constructor(e){super(),this.type=G0.WEBGL,e=Object.assign({},mt.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Go({projectionMatrix:new Or},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Rg.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(Jt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=Rg.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e?.forceCanvas?!1:ob()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Jt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Jt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Jt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Jt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){Jt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return Jt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){Jt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return Jt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};pf.extension={type:ct.Renderer,priority:1},pf.__plugins={},pf.__systems={};let my=pf;St.handleByMap(ct.RendererPlugin,my.__plugins);St.handleByMap(ct.RendererSystem,my.__systems);St.add(my);class Bx extends td{constructor(e,t){const{width:r,height:s}=t||{};super(r,s),this.items=[],this.itemDirtyIds=[];for(let a=0;a<e;a++){const c=new Ht;this.items.push(c),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):e[r]instanceof td?this.addResourceAt(e[r],r):this.addResourceAt(nx(e[r],t),r))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(t=>t.resource).filter(t=>t).map(t=>t.load());return this._load=Promise.all(e).then(()=>{const{realWidth:t,realHeight:r}=this.items[0];return this.resize(t,r),this.update(),Promise.resolve(this)}),this._load}}class BS extends Bx{constructor(e,t){const{width:r,height:s}=t||{};let a,c;Array.isArray(e)?(a=e,c=e.length):c=e,super(c,{width:r,height:s}),a&&this.initFromArray(a,t)}addBaseTextureAt(e,t){if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=qc.TEXTURE_2D_ARRAY}upload(e,t,r){const{length:s,itemDirtyIds:a,items:c}=this,{gl:f}=e;r.dirtyId<0&&f.texImage3D(f.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,s,0,t.format,r.type,null);for(let m=0;m<s;m++){const _=c[m];a[m]<_.dirtyId&&(a[m]=_.dirtyId,_.valid&&f.texSubImage3D(f.TEXTURE_2D_ARRAY,0,0,0,m,_.resource.width,_.resource.height,1,t.format,r.type,_.resource.source))}return!0}}class US extends vl{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return t&&e instanceof t?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const Ux=class Xh extends Bx{constructor(e,t){const{width:r,height:s,autoLoad:a,linkBaseTexture:c}=t||{};if(e&&e.length!==Xh.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:r,height:s});for(let f=0;f<Xh.SIDES;f++)this.items[f].target=qc.TEXTURE_CUBE_MAP_POSITIVE_X+f;this.linkBaseTexture=c!==!1,e&&this.initFromArray(e,t),a!==!1&&this.load()}bind(e){super.bind(e),e.target=qc.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=qc.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,r){const s=this.itemDirtyIds;for(let a=0;a<Xh.SIDES;a++){const c=this.items[a];(s[a]<c.dirtyId||r.dirtyId<t.dirtyId)&&(c.valid&&c.resource?(c.resource.upload(e,c,r),s[a]=c.dirtyId):s[a]<-1&&(e.gl.texImage2D(c.target,0,r.internalFormat,t.realWidth,t.realHeight,0,t.format,r.type,null),s[a]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Xh.SIDES}};Ux.SIDES=6;let GS=Ux;class Wc extends vl{constructor(e,t){t=t||{};let r,s,a;typeof e=="string"?(r=Wc.EMPTY,s=e,a=!0):(r=e,s=null,a=!1),super(r),this.url=s,this.crossOrigin=t.crossOrigin??!0,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??a,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,t)=>{if(this.url===null){e(this);return}try{const r=await mt.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const s=await r.blob();if(this.destroyed)return;const a=await createImageBitmap(s,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ps.UNPACK?"premultiply":"none"});if(this.destroyed){a.close();return}this.source=a,this.update(),e(this)}catch(r){if(this.destroyed)return;t(r),this.onError.emit(r)}}),this._load)}upload(e,t,r){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),super.upload(e,t,r)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return Wc._EMPTY=Wc._EMPTY??mt.ADAPTER.createCanvas(0,0),Wc._EMPTY}}const kg=class mf extends vl{constructor(e,t){t=t||{},super(mt.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},mf.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;vl.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,r=e.height;if(!t||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let s=t*this.scale,a=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(s=this._overrideWidth||this._overrideHeight/r*t,a=this._overrideHeight||this._overrideWidth/t*r),s=Math.round(s),a=Math.round(a);const c=this.source;c.width=s,c.height=a,c._pixiId=`canvas_${lc()}`,c.getContext("2d").drawImage(e,0,0,t,r,0,0,s,a),this._resolve(),this._resolve=null}}static getSize(e){const t=mf.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&mf.SVG_XML.test(e)}};kg.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,kg.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let Mg=kg;class jS extends vl{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const Og=class Dg extends vl{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const r=document.createElement("video");t.autoLoad!==!1&&r.setAttribute("preload","auto"),t.playsinline!==!1&&(r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline","")),t.muted===!0&&(r.setAttribute("muted",""),r.muted=!0),t.loop===!0&&r.setAttribute("loop",""),t.autoPlay!==!1&&r.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const s=e[0].src||e[0];vl.crossOrigin(r,s,t.crossorigin);for(let a=0;a<e.length;++a){const c=document.createElement("source");let{src:f,mime:m}=e[a];if(f=f||e[a],f.startsWith("data:"))m=f.slice(5,f.indexOf(";"));else if(!f.startsWith("blob:")){const _=f.split("?").shift().toLowerCase(),w=_.slice(_.lastIndexOf(".")+1);m=m||Dg.MIME_TYPES[w]||`video/${w}`}c.src=f,m&&(c.type=m),r.appendChild(c)}e=r}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const t=Gn.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t,r)=>{this.valid?t(this):(this._resolve=t,this._reject=r,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Gn.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Gn.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Gn.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||Dg.TYPES.includes(t)}};Og.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],Og.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Gx=Og;xg.push(Wc,dx,US,Gx,jS,Mg,jf,GS,BS);class Cf{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Vt.EMPTY:(e=e||new Vt(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:r,b:s,c:a,d:c,tx:f,ty:m}=e,_=r*t.x+a*t.y+f,w=s*t.x+c*t.y+m;this.minX=Math.min(this.minX,_),this.maxX=Math.max(this.maxX,_),this.minY=Math.min(this.minY,w),this.maxY=Math.max(this.maxY,w)}addQuad(e){let t=this.minX,r=this.minY,s=this.maxX,a=this.maxY,c=e[0],f=e[1];t=c<t?c:t,r=f<r?f:r,s=c>s?c:s,a=f>a?f:a,c=e[2],f=e[3],t=c<t?c:t,r=f<r?f:r,s=c>s?c:s,a=f>a?f:a,c=e[4],f=e[5],t=c<t?c:t,r=f<r?f:r,s=c>s?c:s,a=f>a?f:a,c=e[6],f=e[7],t=c<t?c:t,r=f<r?f:r,s=c>s?c:s,a=f>a?f:a,this.minX=t,this.minY=r,this.maxX=s,this.maxY=a}addFrame(e,t,r,s,a){this.addFrameMatrix(e.worldTransform,t,r,s,a)}addFrameMatrix(e,t,r,s,a){const c=e.a,f=e.b,m=e.c,_=e.d,w=e.tx,d=e.ty;let y=this.minX,b=this.minY,T=this.maxX,I=this.maxY,k=c*t+m*r+w,N=f*t+_*r+d;y=k<y?k:y,b=N<b?N:b,T=k>T?k:T,I=N>I?N:I,k=c*s+m*r+w,N=f*s+_*r+d,y=k<y?k:y,b=N<b?N:b,T=k>T?k:T,I=N>I?N:I,k=c*t+m*a+w,N=f*t+_*a+d,y=k<y?k:y,b=N<b?N:b,T=k>T?k:T,I=N>I?N:I,k=c*s+m*a+w,N=f*s+_*a+d,y=k<y?k:y,b=N<b?N:b,T=k>T?k:T,I=N>I?N:I,this.minX=y,this.minY=b,this.maxX=T,this.maxY=I}addVertexData(e,t,r){let s=this.minX,a=this.minY,c=this.maxX,f=this.maxY;for(let m=t;m<r;m+=2){const _=e[m],w=e[m+1];s=_<s?_:s,a=w<a?w:a,c=_>c?_:c,f=w>f?w:f}this.minX=s,this.minY=a,this.maxX=c,this.maxY=f}addVertices(e,t,r,s){this.addVerticesMatrix(e.worldTransform,t,r,s)}addVerticesMatrix(e,t,r,s,a=0,c=a){const f=e.a,m=e.b,_=e.c,w=e.d,d=e.tx,y=e.ty;let b=this.minX,T=this.minY,I=this.maxX,k=this.maxY;for(let N=r;N<s;N+=2){const W=t[N],j=t[N+1],ee=f*W+_*j+d,X=w*j+m*W+y;b=Math.min(b,ee-a),I=Math.max(I,ee+a),T=Math.min(T,X-c),k=Math.max(k,X+c)}this.minX=b,this.minY=T,this.maxX=I,this.maxY=k}addBounds(e){const t=this.minX,r=this.minY,s=this.maxX,a=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>s?e.maxX:s,this.maxY=e.maxY>a?e.maxY:a}addBoundsMask(e,t){const r=e.minX>t.minX?e.minX:t.minX,s=e.minY>t.minY?e.minY:t.minY,a=e.maxX<t.maxX?e.maxX:t.maxX,c=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=a&&s<=c){const f=this.minX,m=this.minY,_=this.maxX,w=this.maxY;this.minX=r<f?r:f,this.minY=s<m?s:m,this.maxX=a>_?a:_,this.maxY=c>w?c:w}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const r=e.minX>t.x?e.minX:t.x,s=e.minY>t.y?e.minY:t.y,a=e.maxX<t.x+t.width?e.maxX:t.x+t.width,c=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=a&&s<=c){const f=this.minX,m=this.minY,_=this.maxX,w=this.maxY;this.minX=r<f?r:f,this.minY=s<m?s:m,this.maxX=a>_?a:_,this.maxY=c>w?c:w}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,r,s,a,c){e-=a,t-=c,r+=a,s+=c,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>s?this.maxY:s}}class Gr extends od{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Wf,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Cf,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let r=0;r<t.length;++r){const s=t[r];Object.defineProperty(Gr.prototype,s,Object.getOwnPropertyDescriptor(e,s))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new Vt),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new Vt),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Cf);const t=this.transform,r=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=r?.worldAlpha??1,this.transform=this._tempDisplayObjectParent.transform;const s=this._bounds,a=this._boundsID;this._bounds=this._localBounds;const c=this.getBounds(!1,e);return this.parent=r,this.transform=t,this._bounds=s,this._bounds.updateID+=this._boundsID-a,c}toGlobal(e,t,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,r,s){return t&&(e=t.toGlobal(e,r,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){this.parent?.removeChild(this)}setTransform(e=0,t=0,r=1,s=1,a=0,c=0,f=0,m=0,_=0){return this.position.x=e,this.position.y=t,this.scale.x=r||1,this.scale.y=s||1,this.rotation=a,this.skew.x=c,this.skew.y=f,this.pivot.x=m,this.pivot.y=_,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new zS),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*Db}set angle(e){this.transform.rotation=e*Nb}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,t._maskRefCount===0&&(t.renderable=!0,t.isMask=!1))}if(this._mask=e,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount===0&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class zS extends Gr{constructor(){super(...arguments),this.sortDirty=null}}Gr.prototype.displayObjectUpdateTransform=Gr.prototype.updateTransform;const HS=new Or;function VS(n,e){return n.zIndex===e.zIndex?n._lastSortedIndex-e._lastSortedIndex:n.zIndex-e.zIndex}const jx=class Ng extends Gr{constructor(){super(),this.children=[],this.sortableChildren=Ng.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const r=this.getChildIndex(e),s=this.getChildIndex(t);this.children[r]=t,this.children[s]=e,this.onChildrenChange(r<s?r:s)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(e);Kc(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],r=this.children.indexOf(t);if(r===-1)return null;t.parent=null,t.transform._parentID=-1,Kc(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),this.emit("childRemoved",t,this,r)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Kc(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const r=e,s=t,a=s-r;let c;if(a>0&&a<=s){c=this.children.splice(r,a);for(let f=0;f<c.length;++f)c[f].parent=null,c[f].transform&&(c[f].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let f=0;f<c.length;++f)c[f].emit("removed",this),this.emit("childRemoved",c[f],this,f);return c}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,r=this.children.length;t<r;++t){const s=this.children[t];s._lastSortedIndex=t,!e&&s.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(VS),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const r=this.children[e];r.visible&&r.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const r=t._mask.isMaskData?t._mask.maskObject:t._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(t._bounds,r._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const r=super.getLocalBounds(e);if(!t)for(let s=0,a=this.children.length;s<a;++s){const c=this.children[s];c.visible&&c.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let r,s;this.cullArea?(r=this.cullArea,s=this.worldTransform):this._render!==Ng.prototype._render&&(r=this.getBounds(!0));const a=e.projection.transform;if(a&&(s?(s=HS.copyFrom(s),s.prepend(a)):s=a),r&&t.intersects(r,s))this._render(e);else if(this.cullArea)return;for(let c=0,f=this.children.length;c<f;++c){const m=this.children[c],_=m.cullable;m.cullable=_||!this.cullArea,m.render(e),m.cullable=_}}render(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,r=this.children.length;t<r;++t)this.children[t].render(e)}}renderAdvanced(e){const t=this.filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let a=0;a<t.length;a++)t[a].enabled&&this._enabledFilters.push(t[a])}const s=t&&this._enabledFilters?.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==Pn.NONE));if(s&&e.batch.flush(),t&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let a=0,c=this.children.length;a<c;++a)this.children[a].render(e)}s&&e.batch.flush(),r&&e.mask.pop(this),t&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e?.children,r=this.removeChildren(0,this.children.length);if(t)for(let s=0;s<r.length;++s)r[s].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};jx.defaultSortableChildren=!1;let Di=jx;Di.prototype.containerUpdateTransform=Di.prototype.updateTransform;Object.defineProperties(mt,{SORTABLE_CHILDREN:{get(){return Di.defaultSortableChildren},set(n){Jt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Di.defaultSortableChildren=n}}});const Gh=new er,WS=new Uint16Array([0,1,2,0,2,3]);class zo extends Di{constructor(e){super(),this._anchor=new Ca(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Ir(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Ot.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||lt.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=WS,this.pluginName="batch",this.isSprite=!0,this._roundPixels=mt.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=lu(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=lu(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const t=this.transform.worldTransform,r=t.a,s=t.b,a=t.c,c=t.d,f=t.tx,m=t.ty,_=this.vertexData,w=e.trim,d=e.orig,y=this._anchor;let b=0,T=0,I=0,k=0;if(w?(T=w.x-y._x*d.width,b=T+w.width,k=w.y-y._y*d.height,I=k+w.height):(T=-y._x*d.width,b=T+d.width,k=-y._y*d.height,I=k+d.height),_[0]=r*T+a*k+f,_[1]=c*k+s*T+m,_[2]=r*b+a*k+f,_[3]=c*k+s*b+m,_[4]=r*b+a*I+f,_[5]=c*I+s*b+m,_[6]=r*T+a*I+f,_[7]=c*I+s*T+m,this._roundPixels){const N=mt.RESOLUTION;for(let W=0;W<_.length;++W)_[W]=Math.round(_[W]*N)/N}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,t=this.vertexTrimmedData,r=e.orig,s=this._anchor,a=this.transform.worldTransform,c=a.a,f=a.b,m=a.c,_=a.d,w=a.tx,d=a.ty,y=-s._x*r.width,b=y+r.width,T=-s._y*r.height,I=T+r.height;if(t[0]=c*y+m*T+w,t[1]=_*T+f*y+d,t[2]=c*b+m*T+w,t[3]=_*T+f*b+d,t[4]=c*b+m*I+w,t[5]=_*I+f*b+d,t[6]=c*y+m*I+w,t[7]=_*I+f*y+d,this._roundPixels){const k=mt.RESOLUTION;for(let N=0;N<t.length;++N)t[N]=Math.round(t[N]*k)/k}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new Cf),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Vt),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Gh);const t=this._texture.orig.width,r=this._texture.orig.height,s=-t*this.anchor.x;let a=0;return Gh.x>=s&&Gh.x<s+t&&(a=-r*this.anchor.y,Gh.y>=a&&Gh.y<a+r)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e?.texture){const t=typeof e=="boolean"?e:e?.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){const r=e instanceof lt?e:lt.from(e,t);return new zo(r)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const t=lu(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const t=lu(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||lt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const zx=new Or;Gr.prototype._cacheAsBitmap=!1;Gr.prototype._cacheData=null;Gr.prototype._cacheAsBitmapResolution=null;Gr.prototype._cacheAsBitmapMultisample=null;class $S{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Gr.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(n){n!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(n){n!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(n){if(this._cacheAsBitmap===n)return;this._cacheAsBitmap=n;let e;n?(this._cacheData||(this._cacheData=new $S),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});Gr.prototype._renderCached=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(n),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(n))};Gr.prototype._initCachedDisplayObject=function(n){if(this._cacheData?.sprite)return;const e=this.alpha;this.alpha=1,n.batch.flush();const t=this.getLocalBounds(new Vt,!0);if(this.filters?.length){const y=this.filters[0].padding;t.pad(y)}const r=this.cacheAsBitmapResolution||n.resolution;t.ceil(r),t.width=Math.max(t.width,1/r),t.height=Math.max(t.height,1/r);const s=n.renderTexture.current,a=n.renderTexture.sourceFrame.clone(),c=n.renderTexture.destinationFrame.clone(),f=n.projection.transform,m=cc.create({width:t.width,height:t.height,resolution:r,multisample:this.cacheAsBitmapMultisample??n.multisample}),_=`cacheAsBitmap_${lc()}`;this._cacheData.textureCacheId=_,Ht.addToCache(m.baseTexture,_),lt.addToCache(m,_);const w=this.transform.localTransform.copyTo(zx).invert().translate(-t.x,-t.y);this.render=this._cacheData.originalRender,n.render(this,{renderTexture:m,clear:!0,transform:w,skipUpdateTransform:!1}),n.framebuffer.blit(),n.projection.transform=f,n.renderTexture.bind(s,a,c),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const d=new zo(m);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(t.x/t.width),d.anchor.y=-(t.y/t.height),d.alpha=e,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)};Gr.prototype._renderCachedCanvas=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(n),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(n))};Gr.prototype._initCachedDisplayObjectCanvas=function(n){if(this._cacheData?.sprite)return;const e=this.getLocalBounds(new Vt,!0),t=this.alpha;this.alpha=1;const r=n.canvasContext.activeContext,s=n._projTransform,a=this.cacheAsBitmapResolution||n.resolution;e.ceil(a),e.width=Math.max(e.width,1/a),e.height=Math.max(e.height,1/a);const c=cc.create({width:e.width,height:e.height,resolution:a}),f=`cacheAsBitmap_${lc()}`;this._cacheData.textureCacheId=f,Ht.addToCache(c.baseTexture,f),lt.addToCache(c,f);const m=zx;this.transform.localTransform.copyTo(m),m.invert(),m.tx-=e.x,m.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,n.render(this,{renderTexture:c,clear:!0,transform:m,skipUpdateTransform:!1}),n.canvasContext.activeContext=r,n._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const _=new zo(c);_.transform.worldTransform=this.transform.worldTransform,_.anchor.x=-(e.x/e.width),_.anchor.y=-(e.y/e.height),_.alpha=t,_._bounds=this._bounds,this._cacheData.sprite=_,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=n._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=_.containsPoint.bind(_)};Gr.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Gr.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Gr.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Ht.removeFromCache(this._cacheData.textureCacheId),lt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Gr.prototype._cacheAsBitmapDestroy=function(n){this.cacheAsBitmap=!1,this.destroy(n)};Gr.prototype.name=null;Di.prototype.getChildByName=function(n,e){for(let t=0,r=this.children.length;t<r;t++)if(this.children[t].name===n)return this.children[t];if(e)for(let t=0,r=this.children.length;t<r;t++){const s=this.children[t];if(!s.getChildByName)continue;const a=s.getChildByName(n,!0);if(a)return a}return null};Gr.prototype.getGlobalPosition=function(n=new er,e=!1){return this.parent?this.parent.toGlobal(this.position,n,e):(n.x=this.position.x,n.y=this.position.y),n};var XS=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class qS extends Oi{constructor(e=1){super(LS,XS,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const KS={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},YS=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function QS(n){const e=KS[n],t=e.length;let r=YS,s="";const a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let c;for(let f=0;f<n;f++){let m=a.replace("%index%",f.toString());c=f,f>=t&&(c=n-f-1),m=m.replace("%value%",e[c].toString()),s+=m,s+=`
`}return r=r.replace("%blur%",s),r=r.replace("%size%",n.toString()),r}const ZS=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function JS(n,e){const t=Math.ceil(n/2);let r=ZS,s="",a;e?a="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":a="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let c=0;c<n;c++){let f=a.replace("%index%",c.toString());f=f.replace("%sampleIndex%",`${c-(t-1)}.0`),s+=f,s+=`
`}return r=r.replace("%blur%",s),r=r.replace("%size%",n.toString()),r}class Lg extends Oi{constructor(e,t=8,r=4,s=Oi.defaultResolution,a=5){const c=JS(a,e),f=QS(a);super(c,f),this.horizontal=e,this.resolution=s,this._quality=0,this.quality=r,this.blur=t}apply(e,t,r,s){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/t.width):this.uniforms.strength=1/r.height*(r.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,t,r,s);else{const a=e.getFilterTexture(),c=e.renderer;let f=t,m=a;this.state.blend=!1,e.applyFilter(this,f,m,Ta.CLEAR);for(let _=1;_<this.passes-1;_++){e.bindAndClear(f,Ta.BLIT),this.uniforms.uSampler=m;const w=m;m=f,f=w,c.shader.bind(this),c.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,m,r,s),e.returnFilterTexture(a)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class eE extends Oi{constructor(e=8,t=4,r=Oi.defaultResolution,s=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new Lg(!0,e,t,r,s),this.blurYFilter=new Lg(!1,e,t,r,s),this.resolution=r,this.quality=t,this.blur=e,this.repeatEdgePixels=!1}apply(e,t,r,s){const a=Math.abs(this.blurXFilter.strength),c=Math.abs(this.blurYFilter.strength);if(a&&c){const f=e.getFilterTexture();this.blurXFilter.apply(e,t,f,Ta.CLEAR),this.blurYFilter.apply(e,f,r,s),e.returnFilterTexture(f)}else c?this.blurYFilter.apply(e,t,r,s):this.blurXFilter.apply(e,t,r,s)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var tE=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class Fg extends Oi{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(Dx,tE,e),this.alpha=1}_loadMatrix(e,t=!1){let r=e;t&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(e,t,r){return e[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15],e[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16],e[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17],e[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18],e[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19]+t[4],e[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15],e[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16],e[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17],e[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18],e[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19]+t[9],e[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15],e[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16],e[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17],e[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18],e[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19]+t[14],e[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15],e[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16],e[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17],e[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18],e[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}tint(e,t){const[r,s,a]=Ir.shared.setValue(e).toArray(),c=[r,0,0,0,0,0,s,0,0,0,0,0,a,0,0,0,0,0,1,0];this._loadMatrix(c,t)}greyscale(e,t){const r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}blackAndWhite(e){const t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)}hue(e,t){e=(e||0)/180*Math.PI;const r=Math.cos(e),s=Math.sin(e),a=Math.sqrt,c=1/3,f=a(c),m=r+(1-r)*c,_=c*(1-r)-f*s,w=c*(1-r)+f*s,d=c*(1-r)+f*s,y=r+c*(1-r),b=c*(1-r)-f*s,T=c*(1-r)-f*s,I=c*(1-r)+f*s,k=r+c*(1-r),N=[m,_,w,0,0,d,y,b,0,0,T,I,k,0,0,0,0,0,1,0];this._loadMatrix(N,t)}contrast(e,t){const r=(e||0)+1,s=-.5*(r-1),a=[r,0,0,0,s,0,r,0,0,s,0,0,r,0,s,0,0,0,1,0];this._loadMatrix(a,t)}saturate(e=0,t){const r=e*2/3+1,s=(r-1)*-.5,a=[r,s,s,0,0,s,r,s,0,0,s,s,r,0,0,0,0,0,1,0];this._loadMatrix(a,t)}desaturate(){this.saturate(-1)}negative(e){const t=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(t,e)}sepia(e){const t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)}technicolor(e){const t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)}polaroid(e){const t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)}toBGR(e){const t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)}kodachrome(e){const t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)}browni(e){const t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)}vintage(e){const t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)}colorTone(e,t,r,s,a){e=e||.2,t=t||.15,r=r||16770432,s=s||3375104;const c=Ir.shared,[f,m,_]=c.setValue(r).toArray(),[w,d,y]=c.setValue(s).toArray(),b=[.3,.59,.11,0,0,f,m,_,e,0,w,d,y,t,0,f-w,m-d,_-y,0,0];this._loadMatrix(b,a)}night(e,t){e=e||.1;const r=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(r,t)}predator(e,t){const r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,t)}lsd(e){const t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}Fg.prototype.grayscale=Fg.prototype.greyscale;var rE=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,nE=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class iE extends Oi{constructor(e,t){const r=new Or;e.renderable=!1,super(nE,rE,{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=r,t==null&&(t=20),this.scale=new er(t,t)}apply(e,t,r,s){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const a=this.maskSprite.worldTransform,c=Math.sqrt(a.a*a.a+a.b*a.b),f=Math.sqrt(a.c*a.c+a.d*a.d);c!==0&&f!==0&&(this.uniforms.rotation[0]=a.a/c,this.uniforms.rotation[1]=a.b/c,this.uniforms.rotation[2]=a.c/f,this.uniforms.rotation[3]=a.d/f),e.applyFilter(this,t,r,s)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var sE=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,oE=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class aE extends Oi{constructor(){super(oE,sE)}}var lE=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class uE extends Oi{constructor(e=.5,t=Math.random()){super(Dx,lE,{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const H_={AlphaFilter:qS,BlurFilter:eE,BlurFilterPass:Lg,ColorMatrixFilter:Fg,DisplacementFilter:iE,FXAAFilter:aE,NoiseFilter:uE};Object.entries(H_).forEach(([n,e])=>{Object.defineProperty(H_,n,{get(){return Jt("7.1.0",`filters.${n} has moved to ${n}`),e}})});class cE{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(Gn.system.add(this.tickerUpdate,this,fu.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Gn.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const su=new cE;class ad{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=ad.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new er,this.page=new er,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,r,s,a){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Pf extends ad{constructor(){super(...arguments),this.client=new er,this.movement=new er,this.offset=new er,this.global=new er,this.screen=new er}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,r,s,a,c,f,m,_,w,d,y,b,T,I){throw new Error("Method not implemented.")}}class Do extends Pf{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Qc extends Pf{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Qc.DOM_DELTA_PIXEL=0,Qc.DOM_DELTA_LINE=1,Qc.DOM_DELTA_PAGE=2;const hE=2048,dE=new er,Xm=new er;class fE{constructor(e){this.dispatch=new od,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((r,s)=>r.priority-s.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let r=0,s=t.length;r<s;r++)t[r].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){su.pauseUpdate=!0;const r=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[r](this.rootTarget,this.rootTarget.eventMode,dE.set(e,t),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(e,t){if(!e.target)return;const r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let s=0,a=r.length-1;s<a;s++)if(e.currentTarget=r[s],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let s=r.length-2;s>=0;s--)if(e.currentTarget=r[s],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,r=this._allInteractiveElements){if(r.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const s=Array.isArray(t)?t:[t];for(let a=r.length-1;a>=0;a--)s.forEach(c=>{e.currentTarget=r[a],this.notifyTarget(e,c)})}propagationPath(e){const t=[e];for(let r=0;r<hE&&e!==this.rootTarget;r++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,r,s,a,c=!1){let f=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(su.pauseUpdate=!1),e.interactiveChildren&&e.children){const w=e.children;for(let d=w.length-1;d>=0;d--){const y=w[d],b=this.hitTestMoveRecursive(y,this._isInteractive(t)?t:y.eventMode,r,s,a,c||a(e,r));if(b){if(b.length>0&&!b[b.length-1].parent)continue;const T=e.isInteractive();(b.length>0||T)&&(T&&this._allInteractiveElements.push(e),b.push(e)),this._hitElements.length===0&&(this._hitElements=b),f=!0}}}const m=this._isInteractive(t),_=e.isInteractive();return m&&_&&this._allInteractiveElements.push(e),c||this._hitElements.length>0?null:f?this._hitElements:m&&!a(e,r)&&s(e,r)?_?[e]:[]:null}hitTestRecursive(e,t,r,s,a){if(this._interactivePrune(e)||a(e,r))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(su.pauseUpdate=!1),e.interactiveChildren&&e.children){const m=e.children;for(let _=m.length-1;_>=0;_--){const w=m[_],d=this.hitTestRecursive(w,this._isInteractive(t)?t:w.eventMode,r,s,a);if(d){if(d.length>0&&!d[d.length-1].parent)continue;const y=e.isInteractive();return(d.length>0||y)&&d.push(e),d}}}const c=this._isInteractive(t),f=e.isInteractive();return c&&s(e,r)?f?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,Xm),!e.hitArea.contains(Xm.x,Xm.y)))return!0;if(e._mask){const r=e._mask.isMaskData?e._mask.maskObject:e._mask;if(r&&!r.containsPoint?.(t))return!0}return!1}hitTestFn(e,t){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(t):!1}notifyTarget(e,t){t=t??e.type;const r=`on${t}`;e.currentTarget[r]?.(e);const s=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,s),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof Do)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){const s=t.button===2;this.dispatchEvent(t,s?"rightdown":"mousedown")}const r=this.trackingData(e.pointerId);r.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){if(!(e instanceof Do)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const r=t.pointerType==="mouse"||t.pointerType==="pen",s=this.trackingData(e.pointerId),a=this.findMountedTarget(s.overTargets);if(s.overTargets?.length>0&&a!==t.target){const m=e.type==="mousemove"?"mouseout":"pointerout",_=this.createPointerEvent(e,m,a);if(this.dispatchEvent(_,"pointerout"),r&&this.dispatchEvent(_,"mouseout"),!t.composedPath().includes(a)){const w=this.createPointerEvent(e,"pointerleave",a);for(w.eventPhase=w.AT_TARGET;w.target&&!t.composedPath().includes(w.target);)w.currentTarget=w.target,this.notifyTarget(w),r&&this.notifyTarget(w,"mouseleave"),w.target=w.target.parent;this.freeEvent(w)}this.freeEvent(_)}if(a!==t.target){const m=e.type==="mousemove"?"mouseover":"pointerover",_=this.clonePointerEvent(t,m);this.dispatchEvent(_,"pointerover"),r&&this.dispatchEvent(_,"mouseover");let w=a?.parent;for(;w&&w!==this.rootTarget.parent&&w!==t.target;)w=w.parent;if(!w||w===this.rootTarget.parent){const d=this.clonePointerEvent(t,"pointerenter");for(d.eventPhase=d.AT_TARGET;d.target&&d.target!==a&&d.target!==this.rootTarget.parent;)d.currentTarget=d.target,this.notifyTarget(d),r&&this.notifyTarget(d,"mouseenter"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(_)}const c=[],f=this.enableGlobalMoveEvents??!0;this.moveOnAll?c.push("pointermove"):this.dispatchEvent(t,"pointermove"),f&&c.push("globalpointermove"),t.pointerType==="touch"&&(this.moveOnAll?c.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),f&&c.push("globaltouchmove")),r&&(this.moveOnAll?c.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),f&&c.push("globalmousemove"),this.cursor=t.target?.cursor),c.length>0&&this.all(t,c),this._allInteractiveElements.length=0,this._hitElements.length=0,s.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){if(!(e instanceof Do)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),r=this.createPointerEvent(e),s=r.pointerType==="mouse"||r.pointerType==="pen";this.dispatchEvent(r,"pointerover"),s&&this.dispatchEvent(r,"mouseover"),r.pointerType==="mouse"&&(this.cursor=r.target?.cursor);const a=this.clonePointerEvent(r,"pointerenter");for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),s&&this.notifyTarget(a,"mouseenter"),a.target=a.target.parent;t.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(a)}mapPointerOut(e){if(!(e instanceof Do)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId);if(t.overTargets){const r=e.pointerType==="mouse"||e.pointerType==="pen",s=this.findMountedTarget(t.overTargets),a=this.createPointerEvent(e,"pointerout",s);this.dispatchEvent(a),r&&this.dispatchEvent(a,"mouseout");const c=this.createPointerEvent(e,"pointerleave",s);for(c.eventPhase=c.AT_TARGET;c.target&&c.target!==this.rootTarget.parent;)c.currentTarget=c.target,this.notifyTarget(c),r&&this.notifyTarget(c,"mouseleave"),c.target=c.target.parent;t.overTargets=null,this.freeEvent(a),this.freeEvent(c)}this.cursor=null}mapPointerUp(e){if(!(e instanceof Do)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=performance.now(),r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerup"),r.pointerType==="touch")this.dispatchEvent(r,"touchend");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const f=r.button===2;this.dispatchEvent(r,f?"rightup":"mouseup")}const s=this.trackingData(e.pointerId),a=this.findMountedTarget(s.pressTargetsByButton[e.button]);let c=a;if(a&&!r.composedPath().includes(a)){let f=a;for(;f&&!r.composedPath().includes(f);){if(r.currentTarget=f,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch")this.notifyTarget(r,"touchendoutside");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const m=r.button===2;this.notifyTarget(r,m?"rightupoutside":"mouseupoutside")}f=f.parent}delete s.pressTargetsByButton[e.button],c=f}if(c){const f=this.clonePointerEvent(r,"click");f.target=c,f.path=null,s.clicksByButton[e.button]||(s.clicksByButton[e.button]={clickCount:0,target:f.target,timeStamp:t});const m=s.clicksByButton[e.button];if(m.target===f.target&&t-m.timeStamp<200?++m.clickCount:m.clickCount=1,m.target=f.target,m.timeStamp=t,f.detail=m.clickCount,f.pointerType==="mouse"){const _=f.button===2;this.dispatchEvent(f,_?"rightclick":"click")}else f.pointerType==="touch"&&this.dispatchEvent(f,"tap");this.dispatchEvent(f,"pointertap"),this.freeEvent(f)}this.freeEvent(r)}mapPointerUpOutside(e){if(!(e instanceof Do)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),r=this.findMountedTarget(t.pressTargetsByButton[e.button]),s=this.createPointerEvent(e);if(r){let a=r;for(;a;)s.currentTarget=a,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"?this.notifyTarget(s,"touchendoutside"):(s.pointerType==="mouse"||s.pointerType==="pen")&&this.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),a=a.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(s)}mapWheel(e){if(!(e instanceof Qc)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let r=1;r<e.length&&e[r].parent===t;r++)t=e[r];return t}createPointerEvent(e,t,r){const s=this.allocateEvent(Do);return this.copyPointerData(e,s),this.copyMouseData(e,s),this.copyData(e,s),s.nativeEvent=e.nativeEvent,s.originalEvent=e,s.target=r??this.hitTest(s.global.x,s.global.y)??this._hitElements[0],typeof t=="string"&&(s.type=t),s}createWheelEvent(e){const t=this.allocateEvent(Qc);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const r=this.allocateEvent(Do);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=t??r.type,r}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof Do&&t instanceof Do&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof Pf&&t instanceof Pf&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){const r=e.currentTarget._events[t];if(r&&e.currentTarget.isInteractive())if("fn"in r)r.once&&e.currentTarget.removeListener(t,r.fn,void 0,!0),r.fn.call(r.context,e);else for(let s=0,a=r.length;s<a&&!e.propagationImmediatelyStopped;s++)r[s].once&&e.currentTarget.removeListener(t,r[s].fn,void 0,!0),r[s].fn.call(r[s].context,e)}}const pE=1,mE={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Bg=class Ug{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new fE(null),su.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Do(null),this.rootWheelEvent=new Qc(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Ug.defaultEventFeatures},{set:(t,r,s)=>(r==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=s),t[r]=s,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:r}=this.renderer;this.setTargetElement(t),this.resolution=r,Ug._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const r=this.cursorStyles[e];if(r)switch(typeof r){case"string":t&&(this.domElement.style.cursor=r);break;case"function":r(e);break;case"object":t&&Object.assign(this.domElement.style,r);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let r=0,s=t.length;r<s;r++){const a=t[r],c=this.bootstrapEvent(this.rootPointerEvent,a);this.rootBoundary.mapEvent(c)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,su.pointerMoved();const t=this.normalizeToPointerData(e);for(let r=0,s=t.length;r<s;r++){const a=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const r=t!==this.domElement?"outside":"",s=this.normalizeToPointerData(e);for(let a=0,c=s.length;a<c;a++){const f=this.bootstrapEvent(this.rootPointerEvent,s[a]);f.type+=r,this.rootBoundary.mapEvent(f)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);for(let r=0,s=t.length;r<s;r++){const a=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,su.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;su.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;su.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,r){const s=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},a=1/this.resolution;e.x=(t-s.left)*(this.domElement.width/s.width)*a,e.y=(r-s.top)*(this.domElement.height/s.height)*a}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let r=0,s=e.changedTouches.length;r<s;r++){const a=e.changedTouches[r];typeof a.button>"u"&&(a.button=0),typeof a.buttons>"u"&&(a.buttons=1),typeof a.isPrimary>"u"&&(a.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof a.width>"u"&&(a.width=a.radiusX||1),typeof a.height>"u"&&(a.height=a.radiusY||1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="touch"),typeof a.pointerId>"u"&&(a.pointerId=a.identifier||0),typeof a.pressure>"u"&&(a.pressure=a.force||.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),typeof a.layerX>"u"&&(a.layerX=a.offsetX=a.clientX),typeof a.layerY>"u"&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,a.type=e.type,t.push(a)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const r=e;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=pE),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,t.push(r)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=mE[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};Bg.extension={name:"events",type:[ct.RendererSystem,ct.CanvasRendererSystem]},Bg.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let Gg=Bg;St.add(Gg);function V_(n){return n==="dynamic"||n==="static"}const gE={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??V_(Gg.defaultEventMode)},set interactive(n){Jt("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=n,this.eventMode=n?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Gg.defaultEventMode},set eventMode(n){this._internalInteractive=V_(n),this._internalEventMode=n},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(n,e,t){const r=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,s=typeof t=="object"?t.signal:void 0,a=typeof t=="object"?t.once===!0:!1,c=typeof e=="function"?void 0:e;n=r?`${n}capture`:n;const f=typeof e=="function"?e:e.handleEvent,m=this;s&&s.addEventListener("abort",()=>{m.off(n,f,c)}),a?m.once(n,f,c):m.on(n,f,c)},removeEventListener(n,e,t){const r=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,s=typeof e=="function"?void 0:e;n=r?`${n}capture`:n,e=typeof e=="function"?e:e.handleEvent,this.off(n,e,s)},dispatchEvent(n){if(!(n instanceof ad))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return n.defaultPrevented=!1,n.path=null,n.target=this,n.manager.dispatchEvent(n),!n.defaultPrevented}};Gr.mixin(gE);const yE={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Gr.mixin(yE);const vE=9,Yd=100,_E=0,xE=0,W_=2,$_=1,wE=-1e3,bE=-1e3,SE=2;class Hx{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(dl.tablet||dl.phone)&&this.createTouchHook();const t=document.createElement("div");t.style.width=`${Yd}px`,t.style.height=`${Yd}px`,t.style.position="absolute",t.style.top=`${_E}px`,t.style.left=`${xE}px`,t.style.zIndex=W_.toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${$_}px`,e.style.height=`${$_}px`,e.style.position="absolute",e.style.top=`${wE}px`,e.style.left=`${bE}px`,e.style.zIndex=SE.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const t=e.children;if(t)for(let r=0;r<t.length;r++)this.updateAccessibleObjects(t[r])}update(){const e=performance.now();if(dl.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:t,y:r,width:s,height:a}=this.renderer.view.getBoundingClientRect(),{width:c,height:f,resolution:m}=this.renderer,_=s/c*m,w=a/f*m;let d=this.div;d.style.left=`${t}px`,d.style.top=`${r}px`,d.style.width=`${c}px`,d.style.height=`${f}px`;for(let y=0;y<this.children.length;y++){const b=this.children[y];if(b.renderId!==this.renderId)b._accessibleActive=!1,Kc(this.children,y,1),this.div.removeChild(b._accessibleDiv),this.pool.push(b._accessibleDiv),b._accessibleDiv=null,y--;else{d=b._accessibleDiv;let T=b.hitArea;const I=b.worldTransform;b.hitArea?(d.style.left=`${(I.tx+T.x*I.a)*_}px`,d.style.top=`${(I.ty+T.y*I.d)*w}px`,d.style.width=`${T.width*I.a*_}px`,d.style.height=`${T.height*I.d*w}px`):(T=b.getBounds(),this.capHitArea(T),d.style.left=`${T.x*_}px`,d.style.top=`${T.y*w}px`,d.style.width=`${T.width*_}px`,d.style.height=`${T.height*w}px`,d.title!==b.accessibleTitle&&b.accessibleTitle!==null&&(d.title=b.accessibleTitle),d.getAttribute("aria-label")!==b.accessibleHint&&b.accessibleHint!==null&&d.setAttribute("aria-label",b.accessibleHint)),(b.accessibleTitle!==d.title||b.tabIndex!==d.tabIndex)&&(d.title=b.accessibleTitle,d.tabIndex=b.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:r}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>r&&(e.height=r-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=`${Yd}px`,t.style.height=`${Yd}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=W_.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){const{displayObject:r}=e.target,s=this.renderer.events.rootBoundary,a=Object.assign(new ad(s),{target:r});s.rootTarget=this.renderer.lastObjectRendered,t.forEach(c=>s.dispatchEvent(a,c))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===vE&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}Hx.extension={name:"accessibility",type:[ct.RendererPlugin,ct.CanvasRendererPlugin]};St.add(Hx);const Vx=class jg{constructor(e){this.stage=new Di,e=Object.assign({forceCanvas:!1},e),this.renderer=OS(e),jg._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer?.view}get screen(){return this.renderer?.screen}destroy(e,t){const r=jg._plugins.slice(0);r.reverse(),r.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};Vx._plugins=[];let Xf=Vx;St.handleByList(ct.Application,Xf._plugins);class Wx{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let t,r;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,r=globalThis.innerHeight;else{const{clientWidth:s,clientHeight:a}=this._resizeTo;t=s,r=a}this.renderer.resize(t,r),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Wx.extension=ct.Application;St.add(Wx);const X_={loader:ct.LoadParser,resolver:ct.ResolveParser,cache:ct.CacheParser,detection:ct.DetectionParser};St.handle(ct.Asset,n=>{const e=n.ref;Object.entries(X_).filter(([t])=>!!e[t]).forEach(([t,r])=>St.add(Object.assign(e[t],{extension:e[t].extension??r})))},n=>{const e=n.ref;Object.keys(X_).filter(t=>!!e[t]).forEach(t=>St.remove(e[t]))});class EE{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<t;r++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function sh(n,e){if(Array.isArray(e)){for(const t of e)if(n.startsWith(`data:${t}`))return!0;return!1}return n.startsWith(`data:${e}`)}function gu(n,e){const t=n.split("?")[0],r=jn.extname(t).toLowerCase();return Array.isArray(e)?e.includes(r):r===e}const No=(n,e,t=!1)=>(Array.isArray(n)||(n=[n]),e?n.map(r=>typeof r=="string"||t?e(r):r):n),zg=(n,e)=>{const t=e.split("?")[1];return t&&(n+=`?${t}`),n};function $x(n,e,t,r,s){const a=e[t];for(let c=0;c<a.length;c++){const f=a[c];t<e.length-1?$x(n.replace(r[t],f),e,t+1,r,s):s.push(n.replace(r[t],f))}}function TE(n){const e=/\{(.*?)\}/g,t=n.match(e),r=[];if(t){const s=[];t.forEach(a=>{const c=a.substring(1,a.length-1).split(",");s.push(c)}),$x(n,s,0,t,r)}else r.push(n);return r}const If=n=>!Array.isArray(n);class AE{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const r=No(e);let s;for(let f=0;f<this.parsers.length;f++){const m=this.parsers[f];if(m.test(t)){s=m.getCacheableAssets(r,t);break}}s||(s={},r.forEach(f=>{s[f]=t}));const a=Object.keys(s),c={cacheKeys:a,keys:r};if(r.forEach(f=>{this._cacheMap.set(f,c)}),a.forEach(f=>{const m=s?s[f]:t;this._cache.has(f)&&this._cache.get(f)!==m&&console.warn("[Cache] already has key:",f),this._cache.set(f,s[f])}),t instanceof lt){const f=t;r.forEach(m=>{f.baseTexture!==lt.EMPTY.baseTexture&&Ht.addToCache(f.baseTexture,m),lt.addToCache(f,m)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(r=>{this._cache.delete(r)}),t.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const ic=new AE;class CE{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,r)=>(this._parsersValidated=!1,e[t]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const r={promise:null,parser:null};return r.promise=(async()=>{let s=null,a=null;if(t.loadParser&&(a=this._parserHash[t.loadParser],a||console.warn(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!a){for(let c=0;c<this.parsers.length;c++){const f=this.parsers[c];if(f.load&&f.test?.(e,t,this)){a=f;break}}if(!a)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=await a.load(e,t,this),r.parser=a;for(let c=0;c<this.parsers.length;c++){const f=this.parsers[c];f.parse&&f.parse&&await f.testParse?.(s,t,this)&&(s=await f.parse(s,t,this)||s,r.parser=f)}return s})(),r}async load(e,t){this._parsersValidated||this._validateParsers();let r=0;const s={},a=If(e),c=No(e,_=>({alias:[_],src:_})),f=c.length,m=c.map(async _=>{const w=jn.toAbsolute(_.src);if(!s[_.src])try{this.promiseCache[w]||(this.promiseCache[w]=this._getLoadPromiseAndParser(w,_)),s[_.src]=await this.promiseCache[w].promise,t&&t(++r/f)}catch(d){throw delete this.promiseCache[w],delete s[_.src],new Error(`[Loader.load] Failed to load ${w}.
${d}`)}});return await Promise.all(m),a?s[c[0].src]:s}async unload(e){const t=No(e,r=>({alias:[r],src:r})).map(async r=>{const s=jn.toAbsolute(r.src),a=this.promiseCache[s];if(a){const c=await a.promise;delete this.promiseCache[s],a.parser?.unload?.(c,r,this)}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(e[t.name]&&console.warn(`[Assets] loadParser name conflict "${t.name}"`),{...e,[t.name]:t}),{})}}var Ho=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(Ho||{});const PE=".json",IE="application/json",RE={extension:{type:ct.LoadParser,priority:Ho.Low},name:"loadJson",test(n){return sh(n,IE)||gu(n,PE)},async load(n){return await(await mt.ADAPTER.fetch(n)).json()}};St.add(RE);const kE=".txt",ME="text/plain",OE={name:"loadTxt",extension:{type:ct.LoadParser,priority:Ho.Low},test(n){return sh(n,ME)||gu(n,kE)},async load(n){return await(await mt.ADAPTER.fetch(n)).text()}};St.add(OE);const DE=["normal","bold","100","200","300","400","500","600","700","800","900"],NE=[".ttf",".otf",".woff",".woff2"],LE=["font/ttf","font/otf","font/woff","font/woff2"],FE=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function BE(n){const e=jn.extname(n),t=jn.basename(n,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1));let r=t.length>0;for(const a of t)if(!a.match(FE)){r=!1;break}let s=t.join(" ");return r||(s=`"${s.replace(/[\\"]/g,"\\$&")}"`),s}const UE=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function GE(n){return UE.test(n)?n:encodeURI(n)}const jE={extension:{type:ct.LoadParser,priority:Ho.Low},name:"loadWebFont",test(n){return sh(n,LE)||gu(n,NE)},async load(n,e){const t=mt.ADAPTER.getFontFaceSet();if(t){const r=[],s=e.data?.family??BE(n),a=e.data?.weights?.filter(f=>DE.includes(f))??["normal"],c=e.data??{};for(let f=0;f<a.length;f++){const m=a[f],_=new FontFace(s,`url(${GE(n)})`,{...c,weight:m});await _.load(),t.add(_),r.push(_)}return r.length===1?r[0]:r}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(n){(Array.isArray(n)?n:[n]).forEach(e=>mt.ADAPTER.getFontFaceSet().delete(e))}};St.add(jE);const zE=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let Zc=null,Hg=class{constructor(){Zc||(Zc=URL.createObjectURL(new Blob([zE],{type:"application/javascript"}))),this.worker=new Worker(Zc)}};Hg.revokeObjectURL=function(){Zc&&(URL.revokeObjectURL(Zc),Zc=null)};const HE=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let Jc=null;class Xx{constructor(){Jc||(Jc=URL.createObjectURL(new Blob([HE],{type:"application/javascript"}))),this.worker=new Worker(Jc)}}Xx.revokeObjectURL=function(){Jc&&(URL.revokeObjectURL(Jc),Jc=null)};let q_=0,qm;class VE{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new Hg;t.addEventListener("message",r=>{t.terminate(),Hg.revokeObjectURL(),e(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){qm===void 0&&(qm=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<qm&&(this._createdWorkers++,e=new Xx().worker,e.addEventListener("message",t=>{this.complete(t.data),this.returnWorker(t.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const r=new Promise((s,a)=>{this.queue.push({id:e,arguments:t,resolve:s,reject:a})});return this.next(),r}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const t=this.queue.pop(),r=t.id;this.resolveHash[q_]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:q_++,id:r})}}const K_=new VE;function ld(n,e,t){n.resource.internal=!0;const r=new lt(n),s=()=>{delete e.promiseCache[t],ic.has(t)&&ic.remove(t)};return r.baseTexture.once("destroyed",()=>{t in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),s())}),r.once("destroyed",()=>{n.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),s())}),r}const WE=[".jpeg",".jpg",".png",".webp",".avif"],$E=["image/jpeg","image/png","image/webp","image/avif"];async function XE(n){const e=await mt.ADAPTER.fetch(n);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${e.status} ${e.statusText}`);const t=await e.blob();return await createImageBitmap(t)}const qf={name:"loadTextures",extension:{type:ct.LoadParser,priority:Ho.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(n){return sh(n,$E)||gu(n,WE)},async load(n,e,t){const r=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let s;r?this.config.preferWorkers&&await K_.isImageBitmapSupported()?s=await K_.loadImageBitmap(n):s=await XE(n):s=await new Promise((f,m)=>{const _=new Image;_.crossOrigin=this.config.crossOrigin,_.src=n,_.complete?f(_):(_.onload=()=>f(_),_.onerror=w=>m(w))});const a={...e.data};a.resolution??(a.resolution=yl(n)),r&&a.resourceOptions?.ownsImageBitmap===void 0&&(a.resourceOptions={...a.resourceOptions},a.resourceOptions.ownsImageBitmap=!0);const c=new Ht(s,a);return c.resource.src=n,ld(c,t,n)},unload(n){n.destroy(!0)}};St.add(qf);const qE=".svg",KE="image/svg+xml",YE={extension:{type:ct.LoadParser,priority:Ho.High},name:"loadSVG",test(n){return sh(n,KE)||gu(n,qE)},async testParse(n){return Mg.test(n)},async parse(n,e,t){const r=new Mg(n,e?.data?.resourceOptions);await r.load();const s=new Ht(r,{resolution:yl(n),...e?.data});return s.resource.src=e.src,ld(s,t,e.src)},async load(n,e){return(await mt.ADAPTER.fetch(n)).text()},unload:qf.unload};St.add(YE);const QE=[".mp4",".m4v",".webm",".ogv"],ZE=["video/mp4","video/webm","video/ogg"],JE={name:"loadVideo",extension:{type:ct.LoadParser,priority:Ho.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(n){return sh(n,ZE)||gu(n,QE)},async load(n,e,t){let r;const s=await(await mt.ADAPTER.fetch(n)).blob(),a=URL.createObjectURL(s);try{const c={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...e?.data?.resourceOptions,autoLoad:!0},f=new Gx(a,c);await f.load();const m=new Ht(f,{alphaMode:await sb(),resolution:yl(n),...e?.data});m.resource.src=n,r=ld(m,t,n),r.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(a)})}catch(c){throw URL.revokeObjectURL(a),c}return r},unload(n){n.destroy(!0)}};St.add(JE);class eT{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(t[r])}`).join("&")}}getAlias(e){const{alias:t,name:r,src:s,srcs:a}=e;return No(t||r||s||a,c=>typeof c=="string"?c:Array.isArray(c)?c.map(f=>f?.src??f?.srcs??f):c?.src||c?.srcs?c.src??c.srcs:c,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const r=[];Array.isArray(t)?t.forEach(s=>{const a=s.src??s.srcs,c=s.alias??s.name;let f;if(typeof c=="string"){const m=this._createBundleAssetId(e,c);r.push(m),f=[c,m]}else{const m=c.map(_=>this._createBundleAssetId(e,_));r.push(...m),f=[...c,...m]}this.add({...s,alias:f,src:a})}):Object.keys(t).forEach(s=>{const a=[s,this._createBundleAssetId(e,s)];if(typeof t[s]=="string")this.add({alias:a,src:t[s]});else if(Array.isArray(t[s]))this.add({alias:a,src:t[s]});else{const c=t[s],f=c.src??c.srcs;this.add({...c,alias:a,src:Array.isArray(f)?f:[f]})}r.push(...a)}),this._bundles[e]=r}add(e,t,r,s,a){const c=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(Jt("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),c.push({alias:e,src:t,data:r,format:s,loadParser:a})):Array.isArray(e)?c.push(...e):c.push(e);let f;f=m=>{this.hasKey(m)&&console.warn(`[Resolver] already has key: ${m} overwriting`)},No(c).forEach(m=>{const{src:_,srcs:w}=m;let{data:d,format:y,loadParser:b}=m;const T=No(_||w).map(N=>typeof N=="string"?TE(N):Array.isArray(N)?N:[N]),I=this.getAlias(m);Array.isArray(I)?I.forEach(f):f(I);const k=[];T.forEach(N=>{N.forEach(W=>{let j={};if(typeof W!="object"){j.src=W;for(let ee=0;ee<this._parsers.length;ee++){const X=this._parsers[ee];if(X.test(W)){j=X.parse(W);break}}}else d=W.data??d,y=W.format??y,b=W.loadParser??b,j={...j,...W};if(!I)throw new Error(`[Resolver] alias is undefined for this asset: ${j.src}`);j=this.buildResolvedAsset(j,{aliases:I,data:d,format:y,loadParser:b}),k.push(j)})}),I.forEach(N=>{this._assetMap[N]=k})})}resolveBundle(e){const t=If(e);e=No(e);const r={};return e.forEach(s=>{const a=this._bundles[s];if(a){const c=this.resolve(a),f={};for(const m in c){const _=c[m];f[this._extractAssetIdFromBundle(s,m)]=_}r[s]=f}}),t?r[e[0]]:r}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const r={};for(const s in t)r[s]=t[s].src;return r}return t.src}resolve(e){const t=If(e);e=No(e);const r={};return e.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let a=this._assetMap[s];const c=a[0],f=this._getPreferredOrder(a);f?.priority.forEach(m=>{f.params[m].forEach(_=>{const w=a.filter(d=>d[m]?d[m]===_:!1);w.length&&(a=w)})}),this._resolverHash[s]=a[0]??c}else this._resolverHash[s]=this.buildResolvedAsset({alias:[s],src:s},{});r[s]=this._resolverHash[s]}),t?r[e[0]]:r}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const r=e[0],s=this._preferredOrder.find(a=>a.params.format.includes(r.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}buildResolvedAsset(e,t){const{aliases:r,data:s,loadParser:a,format:c}=t;return(this._basePath||this._rootPath)&&(e.src=jn.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=r??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...s||{},...e.data},e.loadParser=a??e.loadParser,e.format=c??e.format??jn.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class tT{constructor(){this._detections=[],this._initialized=!1,this.resolver=new eT,this.loader=new CE,this.cache=ic,this._backgroundLoader=new EE(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const t=e.texturePreference?.resolution??1,r=typeof t=="number"?[t]:t,s=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:s,resolution:r}}),e.preferences&&this.setPreferences(e.preferences)}add(e,t,r,s,a){this.resolver.add(e,t,r,s,a)}async load(e,t){this._initialized||await this.init();const r=If(e),s=No(e).map(f=>{if(typeof f!="string"){const m=this.resolver.getAlias(f);return m.some(_=>!this.resolver.hasKey(_))&&this.add(f),Array.isArray(m)?m[0]:m}return this.resolver.hasKey(f)||this.add({alias:f,src:f}),f}),a=this.resolver.resolve(s),c=await this._mapLoadToResolve(a,t);return r?c[s[0]]:c}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let r=!1;typeof e=="string"&&(r=!0,e=[e]);const s=this.resolver.resolveBundle(e),a={},c=Object.keys(s);let f=0,m=0;const _=()=>{t?.(++f/m)},w=c.map(d=>{const y=s[d];return m+=Object.keys(y).length,this._mapLoadToResolve(y,_).then(b=>{a[d]=b})});return await Promise.all(w),r?a[e[0]]:a}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(r=>{this._backgroundLoader.add(Object.values(r))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return ic.get(e);const t={};for(let r=0;r<e.length;r++)t[r]=ic.get(e[r]);return t}async _mapLoadToResolve(e,t){const r=Object.values(e),s=Object.keys(e);this._backgroundLoader.active=!1;const a=await this.loader.load(r,t);this._backgroundLoader.active=!0;const c={};return r.forEach((f,m)=>{const _=a[f.src],w=[f.src];f.alias&&w.push(...f.alias),c[s[m]]=_,ic.set(w,_)}),c}async unload(e){this._initialized||await this.init();const t=No(e).map(s=>typeof s!="string"?s.src:s),r=this.resolver.resolve(t);await this._unloadFromResolved(r)}async unloadBundle(e){this._initialized||await this.init(),e=No(e);const t=this.resolver.resolveBundle(e),r=Object.keys(t).map(s=>this._unloadFromResolved(t[s]));await Promise.all(r)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(r=>{ic.remove(r.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const r of e.detections)e.skipDetections||await r.test()?t=await r.add(t):e.skipDetections||(t=await r.remove(t));return t=t.filter((r,s)=>t.indexOf(r)===s),t}get detections(){return this._detections}get preferWorkers(){return qf.config.preferWorkers}set preferWorkers(e){Jt("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(r=>r in e).forEach(r=>{t.config[r]=e[r]})})}}const sc=new tT;St.handleByList(ct.LoadParser,sc.loader.parsers).handleByList(ct.ResolveParser,sc.resolver.parsers).handleByList(ct.CacheParser,sc.cache.parsers).handleByList(ct.DetectionParser,sc.detections);const rT={extension:ct.CacheParser,test:n=>Array.isArray(n)&&n.every(e=>e instanceof lt),getCacheableAssets:(n,e)=>{const t={};return n.forEach(r=>{e.forEach((s,a)=>{t[r+(a===0?"":a+1)]=s})}),t}};St.add(rT);async function qx(n){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=n});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(n)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const nT={extension:{type:ct.DetectionParser,priority:1},test:async()=>qx("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async n=>[...n,"avif"],remove:async n=>n.filter(e=>e!=="avif")};St.add(nT);const iT={extension:{type:ct.DetectionParser,priority:0},test:async()=>qx("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async n=>[...n,"webp"],remove:async n=>n.filter(e=>e!=="webp")};St.add(iT);const Y_=["png","jpg","jpeg"],sT={extension:{type:ct.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async n=>[...n,...Y_],remove:async n=>n.filter(e=>!Y_.includes(e))};St.add(sT);const oT="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function gy(n){return oT?!1:document.createElement("video").canPlayType(n)!==""}const aT={extension:{type:ct.DetectionParser,priority:0},test:async()=>gy("video/webm"),add:async n=>[...n,"webm"],remove:async n=>n.filter(e=>e!=="webm")};St.add(aT);const lT={extension:{type:ct.DetectionParser,priority:0},test:async()=>gy("video/mp4"),add:async n=>[...n,"mp4","m4v"],remove:async n=>n.filter(e=>e!=="mp4"&&e!=="m4v")};St.add(lT);const uT={extension:{type:ct.DetectionParser,priority:0},test:async()=>gy("video/ogg"),add:async n=>[...n,"ogv"],remove:async n=>n.filter(e=>e!=="ogv")};St.add(uT);const cT={extension:ct.ResolveParser,test:qf.test,parse:n=>({resolution:parseFloat(mt.RETINA_PREFIX.exec(n)?.[1]??"1"),format:jn.extname(n).slice(1),src:n})};St.add(cT);var Yn=(n=>(n[n.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",n[n.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",n[n.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",n[n.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",n[n.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",n[n.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",n[n.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",n[n.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",n[n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",n[n.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",n[n.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",n[n.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",n[n.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",n[n.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",n[n.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",n[n.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",n))(Yn||{});const Rf={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let ba,zc;function Q_(){zc={bptc:ba.getExtension("EXT_texture_compression_bptc"),astc:ba.getExtension("WEBGL_compressed_texture_astc"),etc:ba.getExtension("WEBGL_compressed_texture_etc"),s3tc:ba.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:ba.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:ba.getExtension("WEBGL_compressed_texture_pvrtc")||ba.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:ba.getExtension("WEBGL_compressed_texture_etc1"),atc:ba.getExtension("WEBGL_compressed_texture_atc")}}const hT={extension:{type:ct.DetectionParser,priority:2},test:async()=>{const n=mt.ADAPTER.createCanvas().getContext("webgl");return n?(ba=n,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async n=>{zc||Q_();const e=[];for(const t in zc)zc[t]&&e.push(t);return[...e,...n]},remove:async n=>(zc||Q_(),n.filter(e=>!(e in zc)))};St.add(hT);class dT extends jf{constructor(e,t={width:1,height:1,autoLoad:!0}){let r,s;typeof e=="string"?(r=e,s=new Uint8Array):(r=null,s=e),super(s,t),this.origin=r,this.buffer=s?new _g(s):null,this._load=null,this.loaded=!1,this.origin!==null&&t.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new _g(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class ac extends dT{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=ac._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||ac._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,r){const s=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;s.pixelStorei(s.UNPACK_ALIGNMENT,4);for(let a=0,c=this.levels;a<c;a++){const{levelID:f,levelWidth:m,levelHeight:_,levelBuffer:w}=this._levelBuffers[a];s.compressedTexImage2D(s.TEXTURE_2D,f,this.format,m,_,0,w)}return!0}onBlobLoaded(){this._levelBuffers=ac._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,t,r,s,a,c,f){const m=new Array(r);let _=e.byteOffset,w=c,d=f,y=w+s-1&~(s-1),b=d+a-1&~(a-1),T=y*b*Rf[t];for(let I=0;I<r;I++)m[I]={levelID:I,levelWidth:r>1?w:y,levelHeight:r>1?d:b,levelBuffer:new Uint8Array(e.buffer,_,T)},_+=T,w=w>>1||1,d=d>>1||1,y=w+s-1&~(s-1),b=d+a-1&~(a-1),T=y*b*Rf[t];return m}}const Km=4,Qd=124,fT=32,Z_=20,pT=542327876,Zd={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},mT={FOURCC:2},Jd={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},gT=1,yT=2,vT=4,_T=64,xT=512,wT=131072,bT=827611204,ST=861165636,ET=894720068,TT=808540228,AT=4,CT={[bT]:Yn.COMPRESSED_RGBA_S3TC_DXT1_EXT,[ST]:Yn.COMPRESSED_RGBA_S3TC_DXT3_EXT,[ET]:Yn.COMPRESSED_RGBA_S3TC_DXT5_EXT},PT={70:Yn.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Yn.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Yn.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Yn.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Yn.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Yn.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Yn.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Yn.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Yn.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:Yn.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:Yn.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:Yn.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:Yn.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function IT(n){const e=new Uint32Array(n);if(e[0]!==pT)throw new Error("Invalid DDS file magic word");const t=new Uint32Array(n,0,Qd/Uint32Array.BYTES_PER_ELEMENT),r=t[Zd.HEIGHT],s=t[Zd.WIDTH],a=t[Zd.MIPMAP_COUNT],c=new Uint32Array(n,Zd.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,fT/Uint32Array.BYTES_PER_ELEMENT),f=c[gT];if(f&vT){const m=c[mT.FOURCC];if(m!==TT){const W=CT[m],j=Km+Qd,ee=new Uint8Array(n,j);return[new ac(ee,{format:W,width:s,height:r,levels:a})]}const _=Km+Qd,w=new Uint32Array(e.buffer,_,Z_/Uint32Array.BYTES_PER_ELEMENT),d=w[Jd.DXGI_FORMAT],y=w[Jd.RESOURCE_DIMENSION],b=w[Jd.MISC_FLAG],T=w[Jd.ARRAY_SIZE],I=PT[d];if(I===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${d}`);if(b===AT)throw new Error("DDSParser does not support cubemap textures");if(y===6)throw new Error("DDSParser does not supported 3D texture data");const k=new Array,N=Km+Qd+Z_;if(T===1)k.push(new Uint8Array(n,N));else{const W=Rf[I];let j=0,ee=s,X=r;for(let F=0;F<a;F++){const ie=Math.max(1,ee+3&-4),ye=Math.max(1,X+3&-4),Ne=ie*ye*W;j+=Ne,ee=ee>>>1,X=X>>>1}let de=N;for(let F=0;F<T;F++)k.push(new Uint8Array(n,de,j)),de+=j}return k.map(W=>new ac(W,{format:I,width:s,height:r,levels:a}))}throw f&_T?new Error("DDSParser does not support uncompressed texture data."):f&xT?new Error("DDSParser does not supported YUV uncompressed texture data."):f&wT?new Error("DDSParser does not support single-channel (lumninance) texture data!"):f&yT?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const J_=[171,75,84,88,32,49,49,187,13,10,26,10],RT=67305985,Mo={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Vg=64,e0={[Ct.UNSIGNED_BYTE]:1,[Ct.UNSIGNED_SHORT]:2,[Ct.INT]:4,[Ct.UNSIGNED_INT]:4,[Ct.FLOAT]:4,[Ct.HALF_FLOAT]:8},kT={[nt.RGBA]:4,[nt.RGB]:3,[nt.RG]:2,[nt.RED]:1,[nt.LUMINANCE]:1,[nt.LUMINANCE_ALPHA]:2,[nt.ALPHA]:1},MT={[Ct.UNSIGNED_SHORT_4_4_4_4]:2,[Ct.UNSIGNED_SHORT_5_5_5_1]:2,[Ct.UNSIGNED_SHORT_5_6_5]:2};function OT(n,e,t=!1){const r=new DataView(e);if(!DT(n,r))return null;const s=r.getUint32(Mo.ENDIANNESS,!0)===RT,a=r.getUint32(Mo.GL_TYPE,s),c=r.getUint32(Mo.GL_FORMAT,s),f=r.getUint32(Mo.GL_INTERNAL_FORMAT,s),m=r.getUint32(Mo.PIXEL_WIDTH,s),_=r.getUint32(Mo.PIXEL_HEIGHT,s)||1,w=r.getUint32(Mo.PIXEL_DEPTH,s)||1,d=r.getUint32(Mo.NUMBER_OF_ARRAY_ELEMENTS,s)||1,y=r.getUint32(Mo.NUMBER_OF_FACES,s),b=r.getUint32(Mo.NUMBER_OF_MIPMAP_LEVELS,s),T=r.getUint32(Mo.BYTES_OF_KEY_VALUE_DATA,s);if(_===0||w!==1)throw new Error("Only 2D textures are supported");if(y!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(d!==1)throw new Error("WebGL does not support array textures");const I=4,k=4,N=m+3&-4,W=_+3&-4,j=new Array(d);let ee=m*_;a===0&&(ee=N*W);let X;if(a!==0?e0[a]?X=e0[a]*kT[c]:X=MT[a]:X=Rf[f],X===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const de=t?LT(r,T,s):null;let F=ee*X,ie=m,ye=_,Ne=N,Ce=W,ge=Vg+T;for(let _e=0;_e<b;_e++){const xe=r.getUint32(ge,s);let Ke=ge+4;for(let H=0;H<d;H++){let V=j[H];V||(V=j[H]=new Array(b)),V[_e]={levelID:_e,levelWidth:b>1||a!==0?ie:Ne,levelHeight:b>1||a!==0?ye:Ce,levelBuffer:new Uint8Array(e,Ke,F)},Ke+=F}ge+=xe+4,ge=ge%4!==0?ge+4-ge%4:ge,ie=ie>>1||1,ye=ye>>1||1,Ne=ie+I-1&-4,Ce=ye+k-1&-4,F=Ne*Ce*X}return a!==0?{uncompressed:j.map(_e=>{let xe=_e[0].levelBuffer,Ke=!1;return a===Ct.FLOAT?xe=new Float32Array(_e[0].levelBuffer.buffer,_e[0].levelBuffer.byteOffset,_e[0].levelBuffer.byteLength/4):a===Ct.UNSIGNED_INT?(Ke=!0,xe=new Uint32Array(_e[0].levelBuffer.buffer,_e[0].levelBuffer.byteOffset,_e[0].levelBuffer.byteLength/4)):a===Ct.INT&&(Ke=!0,xe=new Int32Array(_e[0].levelBuffer.buffer,_e[0].levelBuffer.byteOffset,_e[0].levelBuffer.byteLength/4)),{resource:new jf(xe,{width:_e[0].levelWidth,height:_e[0].levelHeight}),type:a,format:Ke?NT(c):c}}),kvData:de}:{compressed:j.map(_e=>new ac(null,{format:f,width:m,height:_,levels:b,levelBuffers:_e})),kvData:de}}function DT(n,e){for(let t=0;t<J_.length;t++)if(e.getUint8(t)!==J_[t])return console.error(`${n} is not a valid *.ktx file!`),!1;return!0}function NT(n){switch(n){case nt.RGBA:return nt.RGBA_INTEGER;case nt.RGB:return nt.RGB_INTEGER;case nt.RG:return nt.RG_INTEGER;case nt.RED:return nt.RED_INTEGER;default:return n}}function LT(n,e,t){const r=new Map;let s=0;for(;s<e;){const a=n.getUint32(Vg+s,t),c=Vg+s+4,f=3-(a+3)%4;if(a===0||a>e-s){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let m=0;for(;m<a&&n.getUint8(c+m)!==0;m++);if(m===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const _=new TextDecoder().decode(new Uint8Array(n.buffer,c,m)),w=new DataView(n.buffer,c+m+1,a-m-1);r.set(_,w),s+=4+a+f}return r}const FT={extension:{type:ct.LoadParser,priority:Ho.High},name:"loadDDS",test(n){return gu(n,".dds")},async load(n,e,t){const r=await(await mt.ADAPTER.fetch(n)).arrayBuffer(),s=IT(r).map(a=>{const c=new Ht(a,{mipmap:Ma.OFF,alphaMode:ps.NO_PREMULTIPLIED_ALPHA,resolution:yl(n),...e.data});return ld(c,t,n)});return s.length===1?s[0]:s},unload(n){Array.isArray(n)?n.forEach(e=>e.destroy(!0)):n.destroy(!0)}};St.add(FT);const BT={extension:{type:ct.LoadParser,priority:Ho.High},name:"loadKTX",test(n){return gu(n,".ktx")},async load(n,e,t){const r=await(await mt.ADAPTER.fetch(n)).arrayBuffer(),{compressed:s,uncompressed:a,kvData:c}=OT(n,r),f=s??a,m={mipmap:Ma.OFF,alphaMode:ps.NO_PREMULTIPLIED_ALPHA,resolution:yl(n),...e.data},_=f.map(w=>{f===a&&Object.assign(m,{type:w.type,format:w.format});const d=w.resource??w,y=new Ht(d,m);return y.ktxKeyValueData=c,ld(y,t,n)});return _.length===1?_[0]:_},unload(n){Array.isArray(n)?n.forEach(e=>e.destroy(!0)):n.destroy(!0)}};St.add(BT);const UT=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],GT={extension:ct.ResolveParser,test:n=>{const e=jn.extname(n).slice(1);return["basis","ktx","dds"].includes(e)},parse:n=>{const e=n.split("."),t=e.pop();if(["ktx","dds"].includes(t)){const r=e.pop();if(UT.includes(r))return{resolution:parseFloat(mt.RETINA_PREFIX.exec(n)?.[1]??"1"),format:r,src:n}}return{resolution:parseFloat(mt.RETINA_PREFIX.exec(n)?.[1]??"1"),format:t,src:n}}};St.add(GT);const ef=new Vt,jT=4,Kx=class qh{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){const e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,t,r,s){const a=new Image;return a.src=await this.base64(e,t,r,s),a}async base64(e,t,r,s){const a=this.canvas(e,s);if(a.toBlob!==void 0)return new Promise((c,f)=>{a.toBlob(m=>{if(!m){f(new Error("ICanvas.toBlob failed!"));return}const _=new FileReader;_.onload=()=>c(_.result),_.onerror=f,_.readAsDataURL(m)},t,r)});if(a.toDataURL!==void 0)return a.toDataURL(t,r);if(a.convertToBlob!==void 0){const c=await a.convertToBlob({type:t,quality:r});return new Promise((f,m)=>{const _=new FileReader;_.onload=()=>f(_.result),_.onerror=m,_.readAsDataURL(c)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:r,width:s,height:a,flipY:c,premultipliedAlpha:f}=this._rawPixels(e,t);c&&qh._flipY(r,s,a),f&&qh._unpremultiplyAlpha(r);const m=new wb(s,a,1),_=new ImageData(new Uint8ClampedArray(r.buffer),s,a);return m.context.putImageData(_,0,0),m.canvas}pixels(e,t){const{pixels:r,width:s,height:a,flipY:c,premultipliedAlpha:f}=this._rawPixels(e,t);return c&&qh._flipY(r,s,a),f&&qh._unpremultiplyAlpha(r),r}_rawPixels(e,t){const r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");let s,a=!1,c=!1,f,m=!1;e&&(e instanceof cc?f=e:(f=r.generateTexture(e,{region:t,resolution:r.resolution,multisample:r.multisample}),m=!0,t&&(ef.width=t.width,ef.height=t.height,t=ef)));const _=r.gl;if(f){if(s=f.baseTexture.resolution,t=t??f.frame,a=!1,c=f.baseTexture.alphaMode>0&&f.baseTexture.format===nt.RGBA,!m){r.renderTexture.bind(f);const b=f.framebuffer.glFramebuffers[r.CONTEXT_UID];b.blitFramebuffer&&r.framebuffer.bind(b.blitFramebuffer)}}else s=r.resolution,t||(t=ef,t.width=r.width/s,t.height=r.height/s),a=!0,c=this._rendererPremultipliedAlpha,r.renderTexture.bind();const w=Math.max(Math.round(t.width*s),1),d=Math.max(Math.round(t.height*s),1),y=new Uint8Array(jT*w*d);return _.readPixels(Math.round(t.x*s),Math.round(t.y*s),w,d,_.RGBA,_.UNSIGNED_BYTE,y),m&&f?.destroy(!0),{pixels:y,width:w,height:d,flipY:a,premultipliedAlpha:c}}destroy(){this.renderer=null}static _flipY(e,t,r){const s=t<<2,a=r>>1,c=new Uint8Array(s);for(let f=0;f<a;f++){const m=f*s,_=(r-f-1)*s;c.set(e.subarray(m,m+s)),e.copyWithin(m,_,_+s),e.set(c,_)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let r=0;r<t;r+=4){const s=e[r+3];if(s!==0){const a=255.001/s;e[r]=e[r]*a+.5,e[r+1]=e[r+1]*a+.5,e[r+2]=e[r+2]*a+.5}}}};Kx.extension={name:"extract",type:ct.RendererSystem};let zT=Kx;St.add(zT);const kf={build(n){const e=n.points;let t,r,s,a,c,f;if(n.type===Qn.CIRC){const T=n.shape;t=T.x,r=T.y,c=f=T.radius,s=a=0}else if(n.type===Qn.ELIP){const T=n.shape;t=T.x,r=T.y,c=T.width,f=T.height,s=a=0}else{const T=n.shape,I=T.width/2,k=T.height/2;t=T.x+I,r=T.y+k,c=f=Math.max(0,Math.min(T.radius,Math.min(I,k))),s=I-c,a=k-f}if(!(c>=0&&f>=0&&s>=0&&a>=0)){e.length=0;return}const m=Math.ceil(2.3*Math.sqrt(c+f)),_=m*8+(s?4:0)+(a?4:0);if(e.length=_,_===0)return;if(m===0){e.length=8,e[0]=e[6]=t+s,e[1]=e[3]=r+a,e[2]=e[4]=t-s,e[5]=e[7]=r-a;return}let w=0,d=m*4+(s?2:0)+2,y=d,b=_;{const T=s+c,I=a,k=t+T,N=t-T,W=r+I;if(e[w++]=k,e[w++]=W,e[--d]=W,e[--d]=N,a){const j=r-I;e[y++]=N,e[y++]=j,e[--b]=j,e[--b]=k}}for(let T=1;T<m;T++){const I=Math.PI/2*(T/m),k=s+Math.cos(I)*c,N=a+Math.sin(I)*f,W=t+k,j=t-k,ee=r+N,X=r-N;e[w++]=W,e[w++]=ee,e[--d]=ee,e[--d]=j,e[y++]=j,e[y++]=X,e[--b]=X,e[--b]=W}{const T=s,I=a+f,k=t+T,N=t-T,W=r+I,j=r-I;e[w++]=k,e[w++]=W,e[--b]=j,e[--b]=k,s&&(e[w++]=N,e[w++]=W,e[--b]=j,e[--b]=N)}},triangulate(n,e){const t=n.points,r=e.points,s=e.indices;if(t.length===0)return;let a=r.length/2;const c=a;let f,m;if(n.type!==Qn.RREC){const w=n.shape;f=w.x,m=w.y}else{const w=n.shape;f=w.x+w.width/2,m=w.y+w.height/2}const _=n.matrix;r.push(n.matrix?_.a*f+_.c*m+_.tx:f,n.matrix?_.b*f+_.d*m+_.ty:m),a++,r.push(t[0],t[1]);for(let w=2;w<t.length;w+=2)r.push(t[w],t[w+1]),s.push(a++,c,a);s.push(c+1,c,a)}};function t0(n,e=!1){const t=n.length;if(t<6)return;let r=0;for(let s=0,a=n[t-2],c=n[t-1];s<t;s+=2){const f=n[s],m=n[s+1];r+=(f-a)*(m+c),a=f,c=m}if(!e&&r>0||e&&r<=0){const s=t/2;for(let a=s+s%2;a<t;a+=2){const c=t-a-2,f=t-a-1,m=a,_=a+1;[n[c],n[m]]=[n[m],n[c]],[n[f],n[_]]=[n[_],n[f]]}}}const Yx={build(n){n.points=n.shape.points.slice()},triangulate(n,e){let t=n.points;const r=n.holes,s=e.points,a=e.indices;if(t.length>=6){t0(t,!1);const c=[];for(let _=0;_<r.length;_++){const w=r[_];t0(w.points,!0),c.push(t.length/2),t=t.concat(w.points)}const f=x1(t,c,2);if(!f)return;const m=s.length/2;for(let _=0;_<f.length;_+=3)a.push(f[_]+m),a.push(f[_+1]+m),a.push(f[_+2]+m);for(let _=0;_<t.length;_++)s.push(t[_])}}},HT={build(n){const e=n.shape,t=e.x,r=e.y,s=e.width,a=e.height,c=n.points;c.length=0,s>=0&&a>=0&&c.push(t,r,t+s,r,t+s,r+a,t,r+a)},triangulate(n,e){const t=n.points,r=e.points;if(t.length===0)return;const s=r.length/2;r.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(s,s+1,s+2,s+1,s+2,s+3)}},VT={build(n){kf.build(n)},triangulate(n,e){kf.triangulate(n,e)}};var ro=(n=>(n.MITER="miter",n.BEVEL="bevel",n.ROUND="round",n))(ro||{}),uu=(n=>(n.BUTT="butt",n.ROUND="round",n.SQUARE="square",n))(uu||{});const th={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(n,e=20){if(!this.adaptive||!n||isNaN(n))return e;let t=Math.ceil(n/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}};class r0{static curveTo(e,t,r,s,a,c){const f=c[c.length-2],m=c[c.length-1]-t,_=f-e,w=s-t,d=r-e,y=Math.abs(m*d-_*w);if(y<1e-8||a===0)return(c[c.length-2]!==e||c[c.length-1]!==t)&&c.push(e,t),null;const b=m*m+_*_,T=w*w+d*d,I=m*w+_*d,k=a*Math.sqrt(b)/y,N=a*Math.sqrt(T)/y,W=k*I/b,j=N*I/T,ee=k*d+N*_,X=k*w+N*m,de=_*(N+W),F=m*(N+W),ie=d*(k+j),ye=w*(k+j),Ne=Math.atan2(F-X,de-ee),Ce=Math.atan2(ye-X,ie-ee);return{cx:ee+e,cy:X+t,radius:a,startAngle:Ne,endAngle:Ce,anticlockwise:_*w>d*m}}static arc(e,t,r,s,a,c,f,m,_){const w=f-c,d=th._segmentsCount(Math.abs(w)*a,Math.ceil(Math.abs(w)/bf)*40),y=w/(d*2),b=y*2,T=Math.cos(y),I=Math.sin(y),k=d-1,N=k%1/k;for(let W=0;W<=k;++W){const j=W+N*W,ee=y+c+b*j,X=Math.cos(ee),de=-Math.sin(ee);_.push((T*X+I*de)*a+r,(T*-de+I*X)*a+s)}}}class WT{constructor(){this.reset()}begin(e,t,r){this.reset(),this.style=e,this.start=t,this.attribStart=r}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class yy{static curveLength(e,t,r,s,a,c,f,m){let _=0,w=0,d=0,y=0,b=0,T=0,I=0,k=0,N=0,W=0,j=0,ee=e,X=t;for(let de=1;de<=10;++de)w=de/10,d=w*w,y=d*w,b=1-w,T=b*b,I=T*b,k=I*e+3*T*w*r+3*b*d*a+y*f,N=I*t+3*T*w*s+3*b*d*c+y*m,W=ee-k,j=X-N,ee=k,X=N,_+=Math.sqrt(W*W+j*j);return _}static curveTo(e,t,r,s,a,c,f){const m=f[f.length-2],_=f[f.length-1];f.length-=2;const w=th._segmentsCount(yy.curveLength(m,_,e,t,r,s,a,c));let d=0,y=0,b=0,T=0,I=0;f.push(m,_);for(let k=1,N=0;k<=w;++k)N=k/w,d=1-N,y=d*d,b=y*d,T=N*N,I=T*N,f.push(b*m+3*y*N*e+3*d*T*r+I*a,b*_+3*y*N*t+3*d*T*s+I*c)}}function n0(n,e,t,r,s,a,c,f){const m=n-t*s,_=e-r*s,w=n+t*a,d=e+r*a;let y,b;c?(y=r,b=-t):(y=-r,b=t);const T=m+y,I=_+b,k=w+y,N=d+b;return f.push(T,I,k,N),2}function Ku(n,e,t,r,s,a,c,f){const m=t-n,_=r-e;let w=Math.atan2(m,_),d=Math.atan2(s-n,a-e);f&&w<d?w+=Math.PI*2:!f&&w>d&&(d+=Math.PI*2);let y=w;const b=d-w,T=Math.abs(b),I=Math.sqrt(m*m+_*_),k=(15*T*Math.sqrt(I)/Math.PI>>0)+1,N=b/k;if(y+=N,f){c.push(n,e,t,r);for(let W=1,j=y;W<k;W++,j+=N)c.push(n,e,n+Math.sin(j)*I,e+Math.cos(j)*I);c.push(n,e,s,a)}else{c.push(t,r,n,e);for(let W=1,j=y;W<k;W++,j+=N)c.push(n+Math.sin(j)*I,e+Math.cos(j)*I,n,e);c.push(s,a,n,e)}return k*2}function $T(n,e){const t=n.shape;let r=n.points||t.points.slice();const s=e.closePointEps;if(r.length===0)return;const a=n.lineStyle,c=new er(r[0],r[1]),f=new er(r[r.length-2],r[r.length-1]),m=t.type!==Qn.POLY||t.closeStroke,_=Math.abs(c.x-f.x)<s&&Math.abs(c.y-f.y)<s;if(m){r=r.slice(),_&&(r.pop(),r.pop(),f.set(r[r.length-2],r[r.length-1]));const V=(c.x+f.x)*.5,D=(f.y+c.y)*.5;r.unshift(V,D),r.push(V,D)}const w=e.points,d=r.length/2;let y=r.length;const b=w.length/2,T=a.width/2,I=T*T,k=a.miterLimit*a.miterLimit;let N=r[0],W=r[1],j=r[2],ee=r[3],X=0,de=0,F=-(W-ee),ie=N-j,ye=0,Ne=0,Ce=Math.sqrt(F*F+ie*ie);F/=Ce,ie/=Ce,F*=T,ie*=T;const ge=a.alignment,_e=(1-ge)*2,xe=ge*2;m||(a.cap===uu.ROUND?y+=Ku(N-F*(_e-xe)*.5,W-ie*(_e-xe)*.5,N-F*_e,W-ie*_e,N+F*xe,W+ie*xe,w,!0)+2:a.cap===uu.SQUARE&&(y+=n0(N,W,F,ie,_e,xe,!0,w))),w.push(N-F*_e,W-ie*_e,N+F*xe,W+ie*xe);for(let V=1;V<d-1;++V){N=r[(V-1)*2],W=r[(V-1)*2+1],j=r[V*2],ee=r[V*2+1],X=r[(V+1)*2],de=r[(V+1)*2+1],F=-(W-ee),ie=N-j,Ce=Math.sqrt(F*F+ie*ie),F/=Ce,ie/=Ce,F*=T,ie*=T,ye=-(ee-de),Ne=j-X,Ce=Math.sqrt(ye*ye+Ne*Ne),ye/=Ce,Ne/=Ce,ye*=T,Ne*=T;const D=j-N,K=W-ee,G=j-X,U=de-ee,q=D*G+K*U,le=K*G-U*D,Te=le<0;if(Math.abs(le)<.001*Math.abs(q)){w.push(j-F*_e,ee-ie*_e,j+F*xe,ee+ie*xe),q>=0&&(a.join===ro.ROUND?y+=Ku(j,ee,j-F*_e,ee-ie*_e,j-ye*_e,ee-Ne*_e,w,!1)+4:y+=2,w.push(j-ye*xe,ee-Ne*xe,j+ye*_e,ee+Ne*_e));continue}const Oe=(-F+N)*(-ie+ee)-(-F+j)*(-ie+W),Fe=(-ye+X)*(-Ne+ee)-(-ye+j)*(-Ne+de),He=(D*Fe-G*Oe)/le,Je=(U*Oe-K*Fe)/le,Re=(He-j)*(He-j)+(Je-ee)*(Je-ee),je=j+(He-j)*_e,ot=ee+(Je-ee)*_e,et=j-(He-j)*xe,gt=ee-(Je-ee)*xe,Ut=Math.min(D*D+K*K,G*G+U*U),dt=Te?_e:xe,vt=Ut+dt*dt*I,pr=Re<=vt;let Tr=a.join;if(Tr===ro.MITER&&Re/I>k&&(Tr=ro.BEVEL),pr)switch(Tr){case ro.MITER:{w.push(je,ot,et,gt);break}case ro.BEVEL:{Te?w.push(je,ot,j+F*xe,ee+ie*xe,je,ot,j+ye*xe,ee+Ne*xe):w.push(j-F*_e,ee-ie*_e,et,gt,j-ye*_e,ee-Ne*_e,et,gt),y+=2;break}case ro.ROUND:{Te?(w.push(je,ot,j+F*xe,ee+ie*xe),y+=Ku(j,ee,j+F*xe,ee+ie*xe,j+ye*xe,ee+Ne*xe,w,!0)+4,w.push(je,ot,j+ye*xe,ee+Ne*xe)):(w.push(j-F*_e,ee-ie*_e,et,gt),y+=Ku(j,ee,j-F*_e,ee-ie*_e,j-ye*_e,ee-Ne*_e,w,!1)+4,w.push(j-ye*_e,ee-Ne*_e,et,gt));break}}else{switch(w.push(j-F*_e,ee-ie*_e,j+F*xe,ee+ie*xe),Tr){case ro.MITER:{Te?w.push(et,gt,et,gt):w.push(je,ot,je,ot),y+=2;break}case ro.ROUND:{Te?y+=Ku(j,ee,j+F*xe,ee+ie*xe,j+ye*xe,ee+Ne*xe,w,!0)+2:y+=Ku(j,ee,j-F*_e,ee-ie*_e,j-ye*_e,ee-Ne*_e,w,!1)+2;break}}w.push(j-ye*_e,ee-Ne*_e,j+ye*xe,ee+Ne*xe),y+=2}}N=r[(d-2)*2],W=r[(d-2)*2+1],j=r[(d-1)*2],ee=r[(d-1)*2+1],F=-(W-ee),ie=N-j,Ce=Math.sqrt(F*F+ie*ie),F/=Ce,ie/=Ce,F*=T,ie*=T,w.push(j-F*_e,ee-ie*_e,j+F*xe,ee+ie*xe),m||(a.cap===uu.ROUND?y+=Ku(j-F*(_e-xe)*.5,ee-ie*(_e-xe)*.5,j-F*_e,ee-ie*_e,j+F*xe,ee+ie*xe,w,!1)+2:a.cap===uu.SQUARE&&(y+=n0(j,ee,F,ie,_e,xe,!1,w)));const Ke=e.indices,H=th.epsilon*th.epsilon;for(let V=b;V<y+b-2;++V)N=w[V*2],W=w[V*2+1],j=w[(V+1)*2],ee=w[(V+1)*2+1],X=w[(V+2)*2],de=w[(V+2)*2+1],!(Math.abs(N*(ee-de)+j*(de-W)+X*(W-ee))<H)&&Ke.push(V,V+1,V+2)}function XT(n,e){let t=0;const r=n.shape,s=n.points||r.points,a=r.type!==Qn.POLY||r.closeStroke;if(s.length===0)return;const c=e.points,f=e.indices,m=s.length/2,_=c.length/2;let w=_;for(c.push(s[0],s[1]),t=1;t<m;t++)c.push(s[t*2],s[t*2+1]),f.push(w,w+1),w++;a&&f.push(w,_)}function i0(n,e){n.lineStyle.native?XT(n,e):$T(n,e)}class vy{static curveLength(e,t,r,s,a,c){const f=e-2*r+a,m=t-2*s+c,_=2*r-2*e,w=2*s-2*t,d=4*(f*f+m*m),y=4*(f*_+m*w),b=_*_+w*w,T=2*Math.sqrt(d+y+b),I=Math.sqrt(d),k=2*d*I,N=2*Math.sqrt(b),W=y/I;return(k*T+I*y*(T-N)+(4*b*d-y*y)*Math.log((2*I+W+T)/(W+N)))/(4*k)}static curveTo(e,t,r,s,a){const c=a[a.length-2],f=a[a.length-1],m=th._segmentsCount(vy.curveLength(c,f,e,t,r,s));let _=0,w=0;for(let d=1;d<=m;++d){const y=d/m;_=c+(e-c)*y,w=f+(t-f)*y,a.push(_+(e+(r-e)*y-_)*y,w+(t+(s-t)*y-w)*y)}}}const Ym={[Qn.POLY]:Yx,[Qn.CIRC]:kf,[Qn.ELIP]:kf,[Qn.RECT]:HT,[Qn.RREC]:VT},s0=[],tf=[];class Mf{constructor(e,t=null,r=null,s=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=t,this.matrix=s,this.type=e.type}clone(){return new Mf(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Fc=new er,Qx=class Zx extends ix{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Cf,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),tf.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),s0.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,r=null,s=null){const a=new Mf(e,t,r,s);return this.graphicsData.push(a),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const r=new Mf(e,null,null,t),s=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=s.lineStyle,s.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let r=0;r<t.length;++r){const s=t[r];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(e,Fc):Fc.copyFrom(e),s.shape.contains(Fc.x,Fc.y))){let a=!1;if(s.holes){for(let c=0;c<s.holes.length;c++)if(s.holes[c].shape.contains(Fc.x,Fc.y)){a=!0;break}}if(!a)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let r=null,s=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],s=r.style);for(let m=this.shapeIndex;m<t.length;m++){this.shapeIndex++;const _=t[m],w=_.fillStyle,d=_.lineStyle;Ym[_.type].build(_),_.matrix&&this.transformPoints(_.points,_.matrix),(w.visible||d.visible)&&this.processHoles(_.holes);for(let y=0;y<2;y++){const b=y===0?w:d;if(!b.visible)continue;const T=b.texture.baseTexture,I=this.indices.length,k=this.points.length/2;T.wrapMode=pl.REPEAT,y===0?this.processFill(_):this.processLine(_);const N=this.points.length/2-k;N!==0&&(r&&!this._compareStyles(s,b)&&(r.end(I,k),r=null),r||(r=s0.pop()||new WT,r.begin(b,I,k),this.batches.push(r),s=b),this.addUvs(this.points,e,b.texture,k,N,b.matrix))}}const a=this.indices.length,c=this.points.length/2;if(r&&r.end(a,c),this.batches.length===0){this.batchable=!0;return}const f=c>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&f===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=f?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const r=this.graphicsData[e],s=r.fillStyle,a=r.lineStyle;if(s&&!s.texture.baseTexture.valid||a&&!a.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,r=e.length;t<r;t++){const s=e[t];for(let a=0;a<s.size;a++){const c=s.start+a;this.indicesUint16[c]=this.indicesUint16[c]-s.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<Zx.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++Ht._globalBatch;for(let d=0;d<this.drawCalls.length;d++)this.drawCalls[d].texArray.clear(),tf.push(this.drawCalls[d]);this.drawCalls.length=0;const t=this.colors,r=this.textureIds;let s=tf.pop();s||(s=new bg,s.texArray=new Ag),s.texArray.count=0,s.start=0,s.size=0,s.type=Fo.TRIANGLES;let a=0,c=null,f=0,m=!1,_=Fo.TRIANGLES,w=0;this.drawCalls.push(s);for(let d=0;d<this.batches.length;d++){const y=this.batches[d],b=8,T=y.style,I=T.texture.baseTexture;m!==!!T.native&&(m=!!T.native,_=m?Fo.LINES:Fo.TRIANGLES,c=null,a=b,e++),c!==I&&(c=I,I._batchEnabled!==e&&(a===b&&(e++,a=0,s.size>0&&(s=tf.pop(),s||(s=new bg,s.texArray=new Ag),this.drawCalls.push(s)),s.start=w,s.size=0,s.texArray.count=0,s.type=_),I.touched=1,I._batchEnabled=e,I._batchLocation=a,I.wrapMode=pl.REPEAT,s.texArray.elements[s.texArray.count++]=I,a++)),s.size+=y.size,w+=y.size,f=I._batchLocation,this.addColors(t,T.color,T.alpha,y.attribSize,y.attribStart),this.addTextureIds(r,f,y.attribSize,y.attribStart)}Ht._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,r=this.colors,s=this.textureIds,a=new ArrayBuffer(e.length*3*4),c=new Float32Array(a),f=new Uint32Array(a);let m=0;for(let _=0;_<e.length/2;_++)c[m++]=e[_*2],c[m++]=e[_*2+1],c[m++]=t[_*2],c[m++]=t[_*2+1],f[m++]=r[_],c[m++]=s[_];this._buffer.update(a),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?Yx.triangulate(e,this):Ym[e.type].triangulate(e,this)}processLine(e){i0(e,this);for(let t=0;t<e.holes.length;t++)i0(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const r=e[t];Ym[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let r=0;r<e.length/2;r++){const s=e[r*2],a=e[r*2+1];e[r*2]=t.a*s+t.c*a+t.tx,e[r*2+1]=t.b*s+t.d*a+t.ty}}addColors(e,t,r,s,a=0){const c=Ir.shared.setValue(t).toLittleEndianNumber(),f=Ir.shared.setValue(c).toPremultiplied(r);e.length=Math.max(e.length,a+s);for(let m=0;m<s;m++)e[a+m]=f}addTextureIds(e,t,r,s=0){e.length=Math.max(e.length,s+r);for(let a=0;a<r;a++)e[s+a]=t}addUvs(e,t,r,s,a,c=null){let f=0;const m=t.length,_=r.frame;for(;f<a;){let d=e[(s+f)*2],y=e[(s+f)*2+1];if(c){const b=c.a*d+c.c*y+c.tx;y=c.b*d+c.d*y+c.ty,d=b}f++,t.push(d/_.width,y/_.height)}const w=r.baseTexture;(_.width<w.width||_.height<w.height)&&this.adjustUvs(t,r,m,a)}adjustUvs(e,t,r,s){const a=t.baseTexture,c=1e-6,f=r+s*2,m=t.frame,_=m.width/a.width,w=m.height/a.height;let d=m.x/m.width,y=m.y/m.height,b=Math.floor(e[r]+c),T=Math.floor(e[r+1]+c);for(let I=r+2;I<f;I+=2)b=Math.min(b,Math.floor(e[I]+c)),T=Math.min(T,Math.floor(e[I+1]+c));d-=b,y-=T;for(let I=r;I<f;I+=2)e[I]=(e[I]+d)*_,e[I+1]=(e[I+1]+y)*w}};Qx.BATCHABLE_SIZE=100;let qT=Qx;class Kf{constructor(){this.color=16777215,this.alpha=1,this.texture=lt.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new Kf;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=lt.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class _y extends Kf{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=uu.BUTT,this.join=ro.MITER,this.miterLimit=10}clone(){const e=new _y;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=uu.BUTT,this.join=ro.MITER,this.miterLimit=10}}const Qm={},Wg=class gf extends Di{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Kf,this._lineStyle=new _y,this._matrix=null,this._holeMode=!1,this.state=Na.for2d(),this._geometry=e||new qT,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Ir(16777215),this.blendMode=Ot.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new gf(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,r,s=.5,a=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:r,alignment:s,native:a}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:lt.WHITE,color:e?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:uu.BUTT,join:ro.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new oc,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new oc,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,s=r[r.length-2],a=r[r.length-1];return(s!==e||a!==t)&&r.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,r,s){this._initCurve();const a=this.currentPath.points;return a.length===0&&this.moveTo(0,0),vy.curveTo(e,t,r,s,a),this}bezierCurveTo(e,t,r,s,a,c){return this._initCurve(),yy.curveTo(e,t,r,s,a,c,this.currentPath.points),this}arcTo(e,t,r,s,a){this._initCurve(e,t);const c=this.currentPath.points,f=r0.curveTo(e,t,r,s,a,c);if(f){const{cx:m,cy:_,radius:w,startAngle:d,endAngle:y,anticlockwise:b}=f;this.arc(m,_,w,d,y,b)}return this}arc(e,t,r,s,a,c=!1){if(s===a)return this;if(!c&&a<=s?a+=bf:c&&s<=a&&(s+=bf),a-s===0)return this;const f=e+Math.cos(s)*r,m=t+Math.sin(s)*r,_=this._geometry.closePointEps;let w=this.currentPath?this.currentPath.points:null;if(w){const d=Math.abs(w[w.length-2]-f),y=Math.abs(w[w.length-1]-m);d<_&&y<_||w.push(f,m)}else this.moveTo(f,m),w=this.currentPath.points;return r0.arc(f,m,e,t,r,s,a,c,w),this}beginFill(e=0,t){return this.beginTextureFill({texture:lt.WHITE,color:e,alpha:t})}normalizeColor(e){const t=Ir.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:lt.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:r},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,r,s){return this.drawShape(new Vt(e,t,r,s))}drawRoundedRect(e,t,r,s,a){return this.drawShape(new Vf(e,t,r,s,a))}drawCircle(e,t,r){return this.drawShape(new zf(e,t,r))}drawEllipse(e,t,r,s){return this.drawShape(new Hf(e,t,r,s))}drawPolygon(...e){let t,r=!0;const s=e[0];s.points?(r=s.closeStroke,t=s.points):Array.isArray(e[0])?t=e[0]:t=e;const a=new oc(t);return a.closeStroke=r,this.drawShape(a),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Qn.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,r=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(e.points);for(let s=0;s<r;s++){const a=e.batches[s],c=a.style.color,f=new Float32Array(this.vertexData.buffer,a.attribStart*4*2,a.attribSize*2),m=new Float32Array(e.uvsFloat32.buffer,a.attribStart*4*2,a.attribSize*2),_=new Uint16Array(e.indicesUint16.buffer,a.start*2,a.size),w={vertexData:f,blendMode:t,indices:_,uvs:m,_batchRGB:Ir.shared.setValue(c).toRgbArray(),_tintRGB:c,_texture:a.style.texture,alpha:a.style.alpha,worldAlpha:1};this.batches[s]=w}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,r=this.batches.length;t<r;t++){const s=this.batches[t];s.worldAlpha=this.worldAlpha*s.alpha,e.plugins[this.pluginName].render(s)}}}_renderDirect(e){const t=this._resolveDirectShader(e),r=this._geometry,s=this.worldAlpha,a=t.uniforms,c=r.drawCalls;a.translationMatrix=this.transform.worldTransform,Ir.shared.setValue(this._tintColor).premultiply(s).toArray(a.tint),e.shader.bind(t),e.geometry.bind(r,t),e.state.set(this.state);for(let f=0,m=c.length;f<m;f++)this._renderDrawCallDirect(e,r.drawCalls[f])}_renderDrawCallDirect(e,t){const{texArray:r,type:s,size:a,start:c}=t,f=r.count;for(let m=0;m<f;m++)e.texture.bind(r.elements[m],m);e.geometry.draw(s,a,c)}_resolveDirectShader(e){let t=this.shader;const r=this.pluginName;if(!t){if(!Qm[r]){const{maxTextures:s}=e.plugins[r],a=new Int32Array(s);for(let m=0;m<s;m++)a[m]=m;const c={tint:new Float32Array([1,1,1,1]),translationMatrix:new Or,default:Go.from({uSamplers:a},!0)},f=e.plugins[r]._shader.program;Qm[r]=new ka(f,c)}t=Qm[r]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:r,maxX:s,maxY:a}=e.bounds;this._bounds.addFrame(this.transform,t,r,s,a)}containsPoint(e){return this.worldTransform.applyInverse(e,gf._TEMP_POINT),this._geometry.containsPoint(gf._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=Ir.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,r=t.a,s=t.b,a=t.c,c=t.d,f=t.tx,m=t.ty,_=this._geometry.points,w=this.vertexData;let d=0;for(let y=0;y<_.length;y+=2){const b=_[y],T=_[y+1];w[d++]=r*b+a*T+f,w[d++]=c*T+s*b+m}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};Wg.curves=th,Wg._TEMP_POINT=new er;let Jh=Wg;class KT{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}const Zm=new er,o0=new oc,Jx=class ew extends Di{constructor(e,t,r,s=Fo.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=r||Na.for2d(),this.drawMode=s,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=mt.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Fo.TRIANGLES&&t.length<ew.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const s=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[s]),e.plugins[s].render(this)}calculateVertices(){const e=this.geometry.buffers[0],t=e.data,r=e._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));const s=this.transform.worldTransform,a=s.a,c=s.b,f=s.c,m=s.d,_=s.tx,w=s.ty,d=this.vertexData;for(let y=0;y<d.length/2;y++){const b=t[y*2],T=t[y*2+1];d[y*2]=a*b+f*T+_,d[y*2+1]=c*b+m*T+w}if(this._roundPixels){const y=mt.RESOLUTION;for(let b=0;b<d.length;++b)d[b]=Math.round(d[b]*y)/y}this.vertexDirty=r}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new KT(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,Zm);const t=this.geometry.getBuffer("aVertexPosition").data,r=o0.points,s=this.geometry.getIndex().data,a=s.length,c=this.drawMode===4?3:1;for(let f=0;f+2<a;f+=c){const m=s[f]*2,_=s[f+1]*2,w=s[f+2]*2;if(r[0]=t[m],r[1]=t[m+1],r[2]=t[_],r[3]=t[_+1],r[4]=t[w],r[5]=t[w+1],o0.contains(Zm.x,Zm.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};Jx.BATCHABLE_SIZE=100;let rd=Jx;class Yf extends du{constructor(e,t,r){super();const s=new pn(e),a=new pn(t,!0),c=new pn(r,!0,!0);this.addAttribute("aVertexPosition",s,2,!1,Ct.FLOAT).addAttribute("aTextureCoord",a,2,!1,Ct.FLOAT).addIndex(c),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var YT=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,QT=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class nd extends ka{constructor(e,t){const r={uSampler:e,alpha:1,uTextureMatrix:Or.IDENTITY,uColor:new Float32Array([1,1,1,1])};t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t),t.uniforms&&Object.assign(r,t.uniforms),super(t.program||fl.from(QT,YT),r),this._colorDirty=!1,this.uvMatrix=new py(e),this.batchable=t.program===void 0,this.pluginName=t.pluginName,this._tintColor=new Ir(t.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;Ir.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class ZT extends Yf{constructor(e=100,t=100,r=10,s=10){super(),this.segWidth=r,this.segHeight=s,this.width=e,this.height=t,this.build()}build(){const e=this.segWidth*this.segHeight,t=[],r=[],s=[],a=this.segWidth-1,c=this.segHeight-1,f=this.width/a,m=this.height/c;for(let w=0;w<e;w++){const d=w%this.segWidth,y=w/this.segWidth|0;t.push(d*f,y*m),r.push(d/a,y/c)}const _=a*c;for(let w=0;w<_;w++){const d=w%a,y=w/a|0,b=y*this.segWidth+d,T=y*this.segWidth+d+1,I=(y+1)*this.segWidth+d,k=(y+1)*this.segWidth+d+1;s.push(b,T,I,T,k,I)}this.buffers[0].data=new Float32Array(t),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class JT extends Yf{constructor(e=200,t,r=0){super(new Float32Array(t.length*4),new Float32Array(t.length*4),new Uint16Array((t.length-1)*6)),this.points=t,this._width=e,this.textureScale=r,this.build()}get width(){return this._width}build(){const e=this.points;if(!e)return;const t=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),s=this.getIndex();if(e.length<1)return;t.data.length/4!==e.length&&(t.data=new Float32Array(e.length*4),r.data=new Float32Array(e.length*4),s.data=new Uint16Array((e.length-1)*6));const a=r.data,c=s.data;a[0]=0,a[1]=0,a[2]=0,a[3]=1;let f=0,m=e[0];const _=this._width*this.textureScale,w=e.length;for(let y=0;y<w;y++){const b=y*4;if(this.textureScale>0){const T=m.x-e[y].x,I=m.y-e[y].y,k=Math.sqrt(T*T+I*I);m=e[y],f+=k/_}else f=y/(w-1);a[b]=f,a[b+1]=0,a[b+2]=f,a[b+3]=1}let d=0;for(let y=0;y<w-1;y++){const b=y*2;c[d++]=b,c[d++]=b+1,c[d++]=b+2,c[d++]=b+2,c[d++]=b+1,c[d++]=b+3}r.update(),s.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let t=e[0],r,s=0,a=0;const c=this.buffers[0].data,f=e.length,m=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let _=0;_<f;_++){const w=e[_],d=_*4;_<e.length-1?r=e[_+1]:r=w,a=-(r.x-t.x),s=r.y-t.y;const y=Math.sqrt(s*s+a*a);y<1e-6?(s=0,a=0):(s/=y,a/=y,s*=m,a*=m),c[d]=w.x+s,c[d+1]=w.y+a,c[d+2]=w.x-s,c[d+3]=w.y-a,t=w}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class eA extends rd{constructor(e,t,r){const s=new ZT(e.width,e.height,t,r),a=new nd(lt.WHITE);super(s,a),this.texture=e,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const e=this.geometry,{width:t,height:r}=this.shader.texture;this.autoResize&&(e.width!==t||e.height!==r)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())}set texture(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(e)}destroy(e){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const rf=10;class tA extends eA{constructor(e,t,r,s,a){super(lt.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=t??e.defaultBorders?.left??rf,this._rightWidth=s??e.defaultBorders?.right??rf,this._topHeight=r??e.defaultBorders?.top??rf,this._bottomHeight=a??e.defaultBorders?.bottom??rf,this.texture=e}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}updateHorizontalVertices(){const e=this.vertices,t=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*t,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*t,e[25]=e[27]=e[29]=e[31]=this._height}updateVerticalVertices(){const e=this.vertices,t=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*t,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*t,e[6]=e[14]=e[22]=e[30]=this._width}_getMinScale(){const e=this._leftWidth+this._rightWidth,t=this._width>e?1:this._width/e,r=this._topHeight+this._bottomHeight,s=this._height>r?1:this._height/r;return Math.min(t,s)}get width(){return this._width}set width(e){this._width=e,this._refresh()}get height(){return this._height}set height(e){this._height=e,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this._refresh()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this._refresh()}_refresh(){const e=this.texture,t=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;const r=1/this._origWidth,s=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=r*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-r*this._rightWidth,t[9]=t[11]=t[13]=t[15]=s*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-s*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class rA extends rd{constructor(e=lt.EMPTY,t,r,s,a){const c=new Yf(t,r,s);c.getBuffer("aVertexPosition").static=!1;const f=new nd(e);super(c,f,null,a),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}_render(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(e)}}class nA extends rd{constructor(e,t,r=0){const s=new JT(e.height,t,r),a=new nd(e);r>0&&(e.baseTexture.wrapMode=pl.REPEAT),super(s,a),this.autoUpdate=!0}_render(e){const t=this.geometry;(this.autoUpdate||t._width!==this.shader.texture.height)&&(t._width=this.shader.texture.height,t.update()),super._render(e)}}class iA extends Di{constructor(e=1500,t,r=16384,s=!1){super();const a=16384;r>a&&(r=a),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=r,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=Ot.NORMAL,this.autoResize=s,this.roundPixels=!0,this.baseTexture=null,this.setProperties(t),this._tintColor=new Ir(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb)}render(e){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))}onChildrenChange(e){const t=Math.floor(e/this._batchSize);for(;this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID}dispose(){if(this._buffers){for(let e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}}destroy(e){super.destroy(e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class a0{constructor(e,t,r){this.geometry=new du,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let s=0;s<e.length;++s){let a=e[s];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||Ct.FLOAT,offset:a.offset},t[s]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let t=0;this.indexBuffer=new pn(_b(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let c=0;c<this.dynamicProperties.length;++c){const f=this.dynamicProperties[c];f.offset=t,t+=f.size,this.dynamicStride+=f.size}const r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new pn(this.dynamicData,!1,!1);let s=0;this.staticStride=0;for(let c=0;c<this.staticProperties.length;++c){const f=this.staticProperties[c];f.offset=s,s+=f.size,this.staticStride+=f.size}const a=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(a),this.staticDataUint32=new Uint32Array(a),this.staticBuffer=new pn(this.staticData,!0,!1);for(let c=0;c<this.dynamicProperties.length;++c){const f=this.dynamicProperties[c];e.addAttribute(f.attributeName,this.dynamicBuffer,0,f.type===Ct.UNSIGNED_BYTE,f.type,this.dynamicStride*4,f.offset*4)}for(let c=0;c<this.staticProperties.length;++c){const f=this.staticProperties[c];e.addAttribute(f.attributeName,this.staticBuffer,0,f.type===Ct.UNSIGNED_BYTE,f.type,this.staticStride*4,f.offset*4)}}uploadDynamic(e,t,r){for(let s=0;s<this.dynamicProperties.length;s++){const a=this.dynamicProperties[s];a.uploadFunction(e,t,r,a.type===Ct.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,r){for(let s=0;s<this.staticProperties.length;s++){const a=this.staticProperties[s];a.uploadFunction(e,t,r,a.type===Ct.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var sA=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,oA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class tw extends $f{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new Or,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Ct.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=ka.from(oA,sA,{}),this.state=Na.for2d()}render(e){const t=e.children,r=e._maxSize,s=e._batchSize,a=this.renderer;let c=t.length;if(c===0)return;c>r&&!e.autoResize&&(c=r);let f=e._buffers;f||(f=e._buffers=this.generateBuffers(e));const m=t[0]._texture.baseTexture,_=m.alphaMode>0;this.state.blendMode=tx(e.blendMode,_),a.state.set(this.state);const w=a.gl,d=e.worldTransform.copyTo(this.tempMatrix);d.prepend(a.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=d.toArray(!0),this.shader.uniforms.uColor=Ir.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,_).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=m,this.renderer.shader.bind(this.shader);let y=!1;for(let b=0,T=0;b<c;b+=s,T+=1){let I=c-b;I>s&&(I=s),T>=f.length&&f.push(this._generateOneMoreBuffer(e));const k=f[T];k.uploadDynamic(t,b,I);const N=e._bufferUpdateIDs[T]||0;y=y||k._updateID<N,y&&(k._updateID=e._updateID,k.uploadStatic(t,b,I)),a.geometry.bind(k.geometry),w.drawElements(w.TRIANGLES,I*6,w.UNSIGNED_SHORT,0)}}generateBuffers(e){const t=[],r=e._maxSize,s=e._batchSize,a=e._properties;for(let c=0;c<r;c+=s)t.push(new a0(this.properties,a,s));return t}_generateOneMoreBuffer(e){const t=e._batchSize,r=e._properties;return new a0(this.properties,r,t)}uploadVertices(e,t,r,s,a,c){let f=0,m=0,_=0,w=0;for(let d=0;d<r;++d){const y=e[t+d],b=y._texture,T=y.scale.x,I=y.scale.y,k=b.trim,N=b.orig;k?(m=k.x-y.anchor.x*N.width,f=m+k.width,w=k.y-y.anchor.y*N.height,_=w+k.height):(f=N.width*(1-y.anchor.x),m=N.width*-y.anchor.x,_=N.height*(1-y.anchor.y),w=N.height*-y.anchor.y),s[c]=m*T,s[c+1]=w*I,s[c+a]=f*T,s[c+a+1]=w*I,s[c+a*2]=f*T,s[c+a*2+1]=_*I,s[c+a*3]=m*T,s[c+a*3+1]=_*I,c+=a*4}}uploadPosition(e,t,r,s,a,c){for(let f=0;f<r;f++){const m=e[t+f].position;s[c]=m.x,s[c+1]=m.y,s[c+a]=m.x,s[c+a+1]=m.y,s[c+a*2]=m.x,s[c+a*2+1]=m.y,s[c+a*3]=m.x,s[c+a*3+1]=m.y,c+=a*4}}uploadRotation(e,t,r,s,a,c){for(let f=0;f<r;f++){const m=e[t+f].rotation;s[c]=m,s[c+a]=m,s[c+a*2]=m,s[c+a*3]=m,c+=a*4}}uploadUvs(e,t,r,s,a,c){for(let f=0;f<r;++f){const m=e[t+f]._texture._uvs;m?(s[c]=m.x0,s[c+1]=m.y0,s[c+a]=m.x1,s[c+a+1]=m.y1,s[c+a*2]=m.x2,s[c+a*2+1]=m.y2,s[c+a*3]=m.x3,s[c+a*3+1]=m.y3,c+=a*4):(s[c]=0,s[c+1]=0,s[c+a]=0,s[c+a+1]=0,s[c+a*2]=0,s[c+a*2+1]=0,s[c+a*3]=0,s[c+a*3+1]=0,c+=a*4)}}uploadTint(e,t,r,s,a,c){for(let f=0;f<r;++f){const m=e[t+f],_=Ir.shared.setValue(m._tintRGB).toPremultiplied(m.alpha,m.texture.baseTexture.alphaMode>0);s[c]=_,s[c+a]=_,s[c+a*2]=_,s[c+a*3]=_,c+=a*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}tw.extension={name:"particle",type:ct.RendererPlugin};St.add(tw);var Qf=(n=>(n[n.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",n[n.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",n))(Qf||{});const nf={willReadFrequently:!0},Sa=class Tt{static get experimentalLetterSpacingSupported(){let e=Tt._experimentalLetterSpacingSupported;if(e!==void 0){const t=mt.ADAPTER.getCanvasRenderingContext2D().prototype;e=Tt._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,r,s,a,c,f,m,_){this.text=e,this.style=t,this.width=r,this.height=s,this.lines=a,this.lineWidths=c,this.lineHeight=f,this.maxLineWidth=m,this.fontProperties=_}static measureText(e,t,r,s=Tt._canvas){r=r??t.wordWrap;const a=t.toFontString(),c=Tt.measureFont(a);c.fontSize===0&&(c.fontSize=t.fontSize,c.ascent=t.fontSize);const f=s.getContext("2d",nf);f.font=a;const m=(r?Tt.wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),_=new Array(m.length);let w=0;for(let T=0;T<m.length;T++){const I=Tt._measureText(m[T],t.letterSpacing,f);_[T]=I,w=Math.max(w,I)}let d=w+t.strokeThickness;t.dropShadow&&(d+=t.dropShadowDistance);const y=t.lineHeight||c.fontSize+t.strokeThickness;let b=Math.max(y,c.fontSize+t.strokeThickness*2)+t.leading+(m.length-1)*(y+t.leading);return t.dropShadow&&(b+=t.dropShadowDistance),new Tt(e,t,d,b,m,_,y+t.leading,w,c)}static _measureText(e,t,r){let s=!1;Tt.experimentalLetterSpacingSupported&&(Tt.experimentalLetterSpacing?(r.letterSpacing=`${t}px`,r.textLetterSpacing=`${t}px`,s=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let a=r.measureText(e).width;return a>0&&(s?a-=t:a+=(Tt.graphemeSegmenter(e).length-1)*t),a}static wordWrap(e,t,r=Tt._canvas){const s=r.getContext("2d",nf);let a=0,c="",f="";const m=Object.create(null),{letterSpacing:_,whiteSpace:w}=t,d=Tt.collapseSpaces(w),y=Tt.collapseNewlines(w);let b=!d;const T=t.wordWrapWidth+_,I=Tt.tokenize(e);for(let k=0;k<I.length;k++){let N=I[k];if(Tt.isNewline(N)){if(!y){f+=Tt.addLine(c),b=!d,c="",a=0;continue}N=" "}if(d){const j=Tt.isBreakingSpace(N),ee=Tt.isBreakingSpace(c[c.length-1]);if(j&&ee)continue}const W=Tt.getFromCache(N,_,m,s);if(W>T)if(c!==""&&(f+=Tt.addLine(c),c="",a=0),Tt.canBreakWords(N,t.breakWords)){const j=Tt.wordWrapSplit(N);for(let ee=0;ee<j.length;ee++){let X=j[ee],de=X,F=1;for(;j[ee+F];){const ye=j[ee+F];if(!Tt.canBreakChars(de,ye,N,ee,t.breakWords))X+=ye;else break;de=ye,F++}ee+=F-1;const ie=Tt.getFromCache(X,_,m,s);ie+a>T&&(f+=Tt.addLine(c),b=!1,c="",a=0),c+=X,a+=ie}}else{c.length>0&&(f+=Tt.addLine(c),c="",a=0);const j=k===I.length-1;f+=Tt.addLine(N,!j),b=!1,c="",a=0}else W+a>T&&(b=!1,f+=Tt.addLine(c),c="",a=0),(c.length>0||!Tt.isBreakingSpace(N)||b)&&(c+=N,a+=W)}return f+=Tt.addLine(c,!1),f}static addLine(e,t=!0){return e=Tt.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,r,s){let a=r[e];return typeof a!="number"&&(a=Tt._measureText(e,t,s)+t,r[e]=a),a}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const r=e[t];if(!Tt.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:Tt._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:Tt._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let r="";if(typeof e!="string")return t;for(let s=0;s<e.length;s++){const a=e[s],c=e[s+1];if(Tt.isBreakingSpace(a,c)||Tt.isNewline(a)){r!==""&&(t.push(r),r=""),t.push(a);continue}r+=a}return r!==""&&t.push(r),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,r,s,a){return!0}static wordWrapSplit(e){return Tt.graphemeSegmenter(e)}static measureFont(e){if(Tt._fonts[e])return Tt._fonts[e];const t={ascent:0,descent:0,fontSize:0},r=Tt._canvas,s=Tt._context;s.font=e;const a=Tt.METRICS_STRING+Tt.BASELINE_SYMBOL,c=Math.ceil(s.measureText(a).width);let f=Math.ceil(s.measureText(Tt.BASELINE_SYMBOL).width);const m=Math.ceil(Tt.HEIGHT_MULTIPLIER*f);if(f=f*Tt.BASELINE_MULTIPLIER|0,c===0||m===0)return Tt._fonts[e]=t,t;r.width=c,r.height=m,s.fillStyle="#f00",s.fillRect(0,0,c,m),s.font=e,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(a,0,f);const _=s.getImageData(0,0,c,m).data,w=_.length,d=c*4;let y=0,b=0,T=!1;for(y=0;y<f;++y){for(let I=0;I<d;I+=4)if(_[b+I]!==255){T=!0;break}if(!T)b+=d;else break}for(t.ascent=f-y,b=w-d,T=!1,y=m;y>f;--y){for(let I=0;I<d;I+=4)if(_[b+I]!==255){T=!0;break}if(!T)b-=d;else break}return t.descent=y-f,t.fontSize=t.ascent+t.descent,Tt._fonts[e]=t,t}static clearMetrics(e=""){e?delete Tt._fonts[e]:Tt._fonts={}}static get _canvas(){if(!Tt.__canvas){let e;try{const t=new OffscreenCanvas(0,0);if(t.getContext("2d",nf)?.measureText)return Tt.__canvas=t,t;e=mt.ADAPTER.createCanvas()}catch{e=mt.ADAPTER.createCanvas()}e.width=e.height=10,Tt.__canvas=e}return Tt.__canvas}static get _context(){return Tt.__context||(Tt.__context=Tt._canvas.getContext("2d",nf)),Tt.__context}};Sa.METRICS_STRING="|q",Sa.BASELINE_SYMBOL="M",Sa.BASELINE_MULTIPLIER=1.4,Sa.HEIGHT_MULTIPLIER=2,Sa.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const n=new Intl.Segmenter;return e=>[...n.segment(e)].map(t=>t.segment)}return n=>[...n]})(),Sa.experimentalLetterSpacing=!1,Sa._fonts={},Sa._newlines=[10,13],Sa._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let iu=Sa;const aA=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],rw=class Kh{constructor(e){this.styleID=0,this.reset(),eg(this,e,e)}clone(){const e={};return eg(e,this,Kh.defaultStyle),new Kh(e)}reset(){eg(this,Kh.defaultStyle,Kh.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=Jm(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=Jm(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){lA(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=Jm(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let r=t.length-1;r>=0;r--){let s=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!aA.includes(s)&&(s=`"${s}"`),t[r]=s}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};rw.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Qf.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let pu=rw;function Jm(n){const e=Ir.shared,t=r=>{const s=e.setValue(r);return s.alpha===1?s.toHex():s.toRgbaString()};return Array.isArray(n)?n.map(t):t(n)}function lA(n,e){if(!Array.isArray(n)||!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(n[t]!==e[t])return!1;return!0}function eg(n,e,t){for(const r in t)Array.isArray(e[r])?n[r]=e[r].slice():n[r]=e[r]}const uA={texture:!0,children:!1,baseTexture:!0},nw=class $g extends zo{constructor(e,t,r){let s=!1;r||(r=mt.ADAPTER.createCanvas(),s=!0),r.width=3,r.height=3;const a=lt.from(r);a.orig=new Vt,a.trim=new Vt,super(a),this._ownCanvas=s,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=$g.defaultResolution??mt.RESOLUTION,this._autoResolution=$g.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return iu.experimentalLetterSpacing}static set experimentalLetterSpacing(e){Jt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),iu.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const r=this.context,s=iu.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=s.width,c=s.height,f=s.lines,m=s.lineHeight,_=s.lineWidths,w=s.maxLineWidth,d=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,a)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,c)+t.padding*2)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=t.strokeThickness,r.textBaseline=t.textBaseline,r.lineJoin=t.lineJoin,r.miterLimit=t.miterLimit;let y,b;const T=t.dropShadow?2:1;for(let I=0;I<T;++I){const k=t.dropShadow&&I===0,N=k?Math.ceil(Math.max(1,c)+t.padding*2):0,W=N*this._resolution;if(k){r.fillStyle="black",r.strokeStyle="black";const ee=t.dropShadowColor,X=t.dropShadowBlur*this._resolution,de=t.dropShadowDistance*this._resolution;r.shadowColor=Ir.shared.setValue(ee).setAlpha(t.dropShadowAlpha).toRgbaString(),r.shadowBlur=X,r.shadowOffsetX=Math.cos(t.dropShadowAngle)*de,r.shadowOffsetY=Math.sin(t.dropShadowAngle)*de+W}else r.fillStyle=this._generateFillStyle(t,f,s),r.strokeStyle=t.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let j=(m-d.fontSize)/2;m-d.fontSize<0&&(j=0);for(let ee=0;ee<f.length;ee++)y=t.strokeThickness/2,b=t.strokeThickness/2+ee*m+d.ascent+j,t.align==="right"?y+=w-_[ee]:t.align==="center"&&(y+=(w-_[ee])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(f[ee],y+t.padding,b+t.padding-N,!0),t.fill&&this.drawLetterSpacing(f[ee],y+t.padding,b+t.padding-N)}this.updateTexture()}drawLetterSpacing(e,t,r,s=!1){const a=this._style.letterSpacing;let c=!1;if(iu.experimentalLetterSpacingSupported&&(iu.experimentalLetterSpacing?(this.context.letterSpacing=`${a}px`,this.context.textLetterSpacing=`${a}px`,c=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),a===0||c){s?this.context.strokeText(e,t,r):this.context.fillText(e,t,r);return}let f=t;const m=iu.graphemeSegmenter(e);let _=this.context.measureText(e).width,w=0;for(let d=0;d<m.length;++d){const y=m[d];s?this.context.strokeText(y,f,r):this.context.fillText(y,f,r);let b="";for(let T=d+1;T<m.length;++T)b+=m[T];w=this.context.measureText(b).width,f+=_-w+a,_=w}}updateTexture(){const e=this.canvas;if(this._style.trim){const c=Sb(e);c.data&&(e.width=c.width,e.height=c.height,this.context.putImageData(c.data,0,0))}const t=this._texture,r=this._style,s=r.trim?0:r.padding,a=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),a.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,r){const s=e.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;let a;const c=e.dropShadow?e.dropShadowDistance:0,f=e.padding||0,m=this.canvas.width/this._resolution-c-f*2,_=this.canvas.height/this._resolution-c-f*2,w=s.slice(),d=e.fillGradientStops.slice();if(!d.length){const y=w.length+1;for(let b=1;b<y;++b)d.push(b/y)}if(w.unshift(s[0]),d.unshift(0),w.push(s[s.length-1]),d.push(1),e.fillGradientType===Qf.LINEAR_VERTICAL){a=this.context.createLinearGradient(m/2,f,m/2,_+f);const y=r.fontProperties.fontSize+e.strokeThickness;for(let b=0;b<t.length;b++){const T=r.lineHeight*(b-1)+y,I=r.lineHeight*b;let k=I;b>0&&T>I&&(k=(I+T)/2);const N=I+y,W=r.lineHeight*(b+1);let j=N;b+1<t.length&&W<N&&(j=(N+W)/2);const ee=(j-k)/_;for(let X=0;X<w.length;X++){let de=0;typeof d[X]=="number"?de=d[X]:de=X/w.length;let F=Math.min(1,Math.max(0,k/_+de*ee));F=Number(F.toFixed(5)),a.addColorStop(F,w[X])}}}else{a=this.context.createLinearGradient(f,_/2,m+f,_/2);const y=w.length+1;let b=1;for(let T=0;T<w.length;T++){let I;typeof d[T]=="number"?I=d[T]:I=b/y,a.addColorStop(I,w[T]),b++}}return a}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},uA,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=lu(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=lu(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof pu?this._style=e:this._style=new pu(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};nw.defaultAutoResolution=!0;let xy=nw;class cA{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function hA(n,e){let t=!1;if(n?._textures?.length){for(let r=0;r<n._textures.length;r++)if(n._textures[r]instanceof lt){const s=n._textures[r].baseTexture;e.includes(s)||(e.push(s),t=!0)}}return t}function dA(n,e){if(n.baseTexture instanceof Ht){const t=n.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function fA(n,e){if(n._texture&&n._texture instanceof lt){const t=n._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function pA(n,e){return e instanceof xy?(e.updateText(!0),!0):!1}function mA(n,e){if(e instanceof pu){const t=e.toFontString();return iu.measureFont(t),!0}return!1}function gA(n,e){if(n instanceof xy){e.includes(n.style)||e.push(n.style),e.includes(n)||e.push(n);const t=n._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function yA(n,e){return n instanceof pu?(e.includes(n)||e.push(n),!0):!1}const iw=class sw{constructor(e){this.limiter=new cA(sw.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(gA),this.registerFindHook(yA),this.registerFindHook(hA),this.registerFindHook(dA),this.registerFindHook(fA),this.registerUploadHook(pA),this.registerUploadHook(mA)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,Gn.system.addOnce(this.tick,this,fu.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let r=0,s=this.uploadHooks.length;r<s;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Gn.system.addOnce(this.tick,this,fu.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,r=e.length;t<r;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Di)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&Gn.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};iw.uploadsPerFrame=4;let Xg=iw;Object.defineProperties(mt,{UPLOADS_PER_FRAME:{get(){return Xg.uploadsPerFrame},set(n){Jt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Xg.uploadsPerFrame=n}}});function ow(n,e){return e instanceof Ht?(e._glTextures[n.CONTEXT_UID]||n.texture.bind(e),!0):!1}function vA(n,e){if(!(e instanceof Jh))return!1;const{geometry:t}=e;e.finishPoly(),t.updateBatches();const{batches:r}=t;for(let s=0;s<r.length;s++){const{texture:a}=r[s].style;a&&ow(n,a.baseTexture)}return t.batchable||n.geometry.bind(t,e._resolveDirectShader(n)),!0}function _A(n,e){return n instanceof Jh?(e.push(n),!0):!1}class aw extends Xg{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(_A),this.registerUploadHook(ow),this.registerUploadHook(vA)}}aw.extension={name:"prepare",type:ct.RendererSystem};St.add(aw);class id extends zo{constructor(e,t=!0){super(e[0]instanceof lt?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=t,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Gn.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Gn.shared.add(this.update,this,fu.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const t=this.animationSpeed*e,r=this.currentFrame;if(this._durations!==null){let s=this._currentTime%1*this._durations[this.currentFrame];for(s+=t/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];const a=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const t=[];for(let r=0;r<e.length;++r)t.push(lt.from(e[r]));return new id(t)}static fromImages(e){const t=[];for(let r=0;r<e.length;++r)t.push(lt.from(e[r]));return new id(t)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof lt)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Gn.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Gn.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const jh=new er;class wy extends zo{constructor(e,t=100,r=100){super(e),this.tileTransform=new Wf,this._width=t,this._height=r,this.uvMatrix=this.texture.uvMatrix||new py(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const t=this._texture;!t||!t.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){const e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),s=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,r,s)}getLocalBounds(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Vt),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,jh);const t=this._width,r=this._height,s=-t*this.anchor._x;if(jh.x>=s&&jh.x<s+t){const a=-r*this.anchor._y;if(jh.y>=a&&jh.y<a+r)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,t){const r=e instanceof lt?e:lt.from(e,t);return new wy(r,t.width,t.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}}var xA=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,wA=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,bA=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,l0=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,SA=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const sf=new Or;class lw extends $f{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new px,this.state=Na.for2d()}contextChange(){const e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=ka.from(l0,SA,t),this.shader=e.context.webGLVersion>1?ka.from(wA,xA,t):ka.from(l0,bA,t)}render(e){const t=this.renderer,r=this.quad;let s=r.vertices;s[0]=s[6]=e._width*-e.anchor.x,s[1]=s[3]=e._height*-e.anchor.y,s[2]=s[4]=e._width*(1-e.anchor.x),s[5]=s[7]=e._height*(1-e.anchor.y);const a=e.uvRespectAnchor?e.anchor.x:0,c=e.uvRespectAnchor?e.anchor.y:0;s=r.uvs,s[0]=s[6]=-a,s[1]=s[3]=-c,s[2]=s[4]=1-a,s[5]=s[7]=1-c,r.invalidate();const f=e._texture,m=f.baseTexture,_=m.alphaMode>0,w=e.tileTransform.localTransform,d=e.uvMatrix;let y=m.isPowerOfTwo&&f.frame.width===m.width&&f.frame.height===m.height;y&&(m._glTextures[t.CONTEXT_UID]?y=m.wrapMode!==pl.CLAMP:m.wrapMode===pl.CLAMP&&(m.wrapMode=pl.REPEAT));const b=y?this.simpleShader:this.shader,T=f.width,I=f.height,k=e._width,N=e._height;sf.set(w.a*T/k,w.b*T/N,w.c*I/k,w.d*I/N,w.tx/k,w.ty/N),sf.invert(),y?sf.prepend(d.mapCoord):(b.uniforms.uMapCoord=d.mapCoord.toArray(!0),b.uniforms.uClampFrame=d.uClampFrame,b.uniforms.uClampOffset=d.uClampOffset),b.uniforms.uTransform=sf.toArray(!0),b.uniforms.uColor=Ir.shared.setValue(e.tint).premultiply(e.worldAlpha,_).toArray(b.uniforms.uColor),b.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),b.uniforms.uSampler=f,t.shader.bind(b),t.geometry.bind(r),this.state.blendMode=tx(e.blendMode,_),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}lw.extension={name:"tilingSprite",type:ct.RendererPlugin};St.add(lw);const uw=class Yh{constructor(e,t,r){this.linkedSheets=[],(e instanceof Ht||e instanceof lt)&&(e={texture:e,data:t,resolutionFilename:r});const{texture:s,data:a,resolutionFilename:c=null,cachePrefix:f=""}=e;this.cachePrefix=f,this._texture=s instanceof lt?s:null,this.baseTexture=s instanceof Ht?s:this._texture.baseTexture,this.textures={},this.animations={},this.data=a;const m=this.baseTexture.resource;this.resolution=this._updateResolution(c||(m?m.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let r=yl(e,null);return r===null&&(r=typeof t=="number"?t:parseFloat(t??"1")),r!==1&&this.baseTexture.setResolution(r),r}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Yh.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const r=Yh.BATCH_SIZE;for(;t-e<r&&t<this._frameKeys.length;){const s=this._frameKeys[t],a=this._frames[s],c=a.frame;if(c){let f=null,m=null;const _=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,w=new Vt(0,0,Math.floor(_.w)/this.resolution,Math.floor(_.h)/this.resolution);a.rotated?f=new Vt(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.h)/this.resolution,Math.floor(c.w)/this.resolution):f=new Vt(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(m=new Vt(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution)),this.textures[s]=new lt(this.baseTexture,f,w,m,a.rotated?2:0,a.anchor,a.borders),lt.addToCache(this.textures[s],this.cachePrefix+s.toString())}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let r=0;r<e[t].length;r++){const s=e[t][r];this.animations[t].push(this.textures[s])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Yh.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Yh.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};uw.BATCH_SIZE=1e3;let u0=uw;const EA=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function cw(n,e,t){const r={};if(n.forEach(s=>{r[s]=e}),Object.keys(e.textures).forEach(s=>{r[`${e.cachePrefix}${s}`]=e.textures[s]}),!t){const s=jn.dirname(n[0]);e.linkedSheets.forEach((a,c)=>{Object.assign(r,cw([`${s}/${e.data.meta.related_multi_packs[c]}`],a,!0))})}return r}const TA={extension:ct.Asset,cache:{test:n=>n instanceof u0,getCacheableAssets:(n,e)=>cw(n,e,!1)},resolver:{test:n=>{const e=n.split("?")[0].split("."),t=e.pop(),r=e.pop();return t==="json"&&EA.includes(r)},parse:n=>{const e=n.split(".");return{resolution:parseFloat(mt.RETINA_PREFIX.exec(n)?.[1]??"1"),format:e[e.length-2],src:n}}},loader:{name:"spritesheetLoader",extension:{type:ct.LoadParser,priority:Ho.Normal},async testParse(n,e){return jn.extname(e.src).toLowerCase()===".json"&&!!n.frames},async parse(n,e,t){const{texture:r,imageFilename:s,cachePrefix:a}=e?.data??{};let c=jn.dirname(e.src);c&&c.lastIndexOf("/")!==c.length-1&&(c+="/");let f;if(r&&r.baseTexture)f=r;else{const w=zg(c+(s??n.meta.image),e.src);f=(await t.load([w]))[w]}const m=new u0({texture:f.baseTexture,data:n,resolutionFilename:e.src,cachePrefix:a});await m.parse();const _=n?.meta?.related_multi_packs;if(Array.isArray(_)){const w=[];for(const y of _){if(typeof y!="string")continue;let b=c+y;e.data?.ignoreMultiPack||(b=zg(b,e.src),w.push(t.load({src:b,data:{ignoreMultiPack:!0}})))}const d=await Promise.all(w);m.linkedSheets=d,d.forEach(y=>{y.linkedSheets=[m].concat(m.linkedSheets.filter(b=>b!==y))})}return m},unload(n){n.destroy(!0)}}};St.add(TA);class Of{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class yf{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const t=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const a in t){const c=t[a].match(/^[a-z]+/gm)[0],f=t[a].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),m={};for(const _ in f){const w=f[_].split("="),d=w[0],y=w[1].replace(/"/gm,""),b=parseFloat(y),T=isNaN(b)?y:b;m[d]=T}r[c].push(m)}const s=new Of;return r.info.forEach(a=>s.info.push({face:a.face,size:parseInt(a.size,10)})),r.common.forEach(a=>s.common.push({lineHeight:parseInt(a.lineHeight,10)})),r.page.forEach(a=>s.page.push({id:parseInt(a.id,10),file:a.file})),r.char.forEach(a=>s.char.push({id:parseInt(a.id,10),page:parseInt(a.page,10),x:parseInt(a.x,10),y:parseInt(a.y,10),width:parseInt(a.width,10),height:parseInt(a.height,10),xoffset:parseInt(a.xoffset,10),yoffset:parseInt(a.yoffset,10),xadvance:parseInt(a.xadvance,10)})),r.kerning.forEach(a=>s.kerning.push({first:parseInt(a.first,10),second:parseInt(a.second,10),amount:parseInt(a.amount,10)})),r.distanceField.forEach(a=>s.distanceField.push({distanceRange:parseInt(a.distanceRange,10),fieldType:a.fieldType})),s}}class qg{static test(e){const t=e;return typeof e!="string"&&"getElementsByTagName"in e&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const t=new Of,r=e.getElementsByTagName("info"),s=e.getElementsByTagName("common"),a=e.getElementsByTagName("page"),c=e.getElementsByTagName("char"),f=e.getElementsByTagName("kerning"),m=e.getElementsByTagName("distanceField");for(let _=0;_<r.length;_++)t.info.push({face:r[_].getAttribute("face"),size:parseInt(r[_].getAttribute("size"),10)});for(let _=0;_<s.length;_++)t.common.push({lineHeight:parseInt(s[_].getAttribute("lineHeight"),10)});for(let _=0;_<a.length;_++)t.page.push({id:parseInt(a[_].getAttribute("id"),10)||0,file:a[_].getAttribute("file")});for(let _=0;_<c.length;_++){const w=c[_];t.char.push({id:parseInt(w.getAttribute("id"),10),page:parseInt(w.getAttribute("page"),10)||0,x:parseInt(w.getAttribute("x"),10),y:parseInt(w.getAttribute("y"),10),width:parseInt(w.getAttribute("width"),10),height:parseInt(w.getAttribute("height"),10),xoffset:parseInt(w.getAttribute("xoffset"),10),yoffset:parseInt(w.getAttribute("yoffset"),10),xadvance:parseInt(w.getAttribute("xadvance"),10)})}for(let _=0;_<f.length;_++)t.kerning.push({first:parseInt(f[_].getAttribute("first"),10),second:parseInt(f[_].getAttribute("second"),10),amount:parseInt(f[_].getAttribute("amount"),10)});for(let _=0;_<m.length;_++)t.distanceField.push({fieldType:m[_].getAttribute("fieldType"),distanceRange:parseInt(m[_].getAttribute("distanceRange"),10)});return t}}class Kg{static test(e){return typeof e=="string"&&e.includes("<font>")?qg.test(mt.ADAPTER.parseXML(e)):!1}static parse(e){return qg.parse(mt.ADAPTER.parseXML(e))}}const tg=[yf,qg,Kg];function AA(n){for(let e=0;e<tg.length;e++)if(tg[e].test(n))return tg[e];return null}function CA(n,e,t,r,s,a){const c=t.fill;if(Array.isArray(c)){if(c.length===1)return c[0]}else return c;let f;const m=t.dropShadow?t.dropShadowDistance:0,_=t.padding||0,w=n.width/r-m-_*2,d=n.height/r-m-_*2,y=c.slice(),b=t.fillGradientStops.slice();if(!b.length){const T=y.length+1;for(let I=1;I<T;++I)b.push(I/T)}if(y.unshift(c[0]),b.unshift(0),y.push(c[c.length-1]),b.push(1),t.fillGradientType===Qf.LINEAR_VERTICAL){f=e.createLinearGradient(w/2,_,w/2,d+_);let T=0;const I=(a.fontProperties.fontSize+t.strokeThickness)/d;for(let k=0;k<s.length;k++){const N=a.lineHeight*k;for(let W=0;W<y.length;W++){let j=0;typeof b[W]=="number"?j=b[W]:j=W/y.length;const ee=N/d+j*I;let X=Math.max(T,ee);X=Math.min(X,1),f.addColorStop(X,y[W]),T=X}}}else{f=e.createLinearGradient(_,d/2,w+_,d/2);const T=y.length+1;let I=1;for(let k=0;k<y.length;k++){let N;typeof b[k]=="number"?N=b[k]:N=I/T,f.addColorStop(N,y[k]),I++}}return f}function PA(n,e,t,r,s,a,c){const f=t.text,m=t.fontProperties;e.translate(r,s),e.scale(a,a);const _=c.strokeThickness/2,w=-(c.strokeThickness/2);if(e.font=c.toFontString(),e.lineWidth=c.strokeThickness,e.textBaseline=c.textBaseline,e.lineJoin=c.lineJoin,e.miterLimit=c.miterLimit,e.fillStyle=CA(n,e,c,a,[f],t),e.strokeStyle=c.stroke,c.dropShadow){const d=c.dropShadowColor,y=c.dropShadowBlur*a,b=c.dropShadowDistance*a;e.shadowColor=Ir.shared.setValue(d).setAlpha(c.dropShadowAlpha).toRgbaString(),e.shadowBlur=y,e.shadowOffsetX=Math.cos(c.dropShadowAngle)*b,e.shadowOffsetY=Math.sin(c.dropShadowAngle)*b}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;c.stroke&&c.strokeThickness&&e.strokeText(f,_,w+t.lineHeight-m.descent),c.fill&&e.fillText(f,_,w+t.lineHeight-m.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function vf(n){return n.codePointAt?n.codePointAt(0):n.charCodeAt(0)}function hw(n){return Array.from?Array.from(n):n.split("")}function IA(n){typeof n=="string"&&(n=[n]);const e=[];for(let t=0,r=n.length;t<r;t++){const s=n[t];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);const a=s[0].charCodeAt(0),c=s[1].charCodeAt(0);if(c<a)throw new Error("[BitmapFont]: Invalid character range.");for(let f=a,m=c;f<=m;f++)e.push(String.fromCharCode(f))}else e.push(...hw(s))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const ru=class Ea{constructor(e,t,r){const[s]=e.info,[a]=e.common,[c]=e.page,[f]=e.distanceField,m=yl(c.file),_={};this._ownsTextures=r,this.font=s.face,this.size=s.size,this.lineHeight=a.lineHeight/m,this.chars={},this.pageTextures=_;for(let w=0;w<e.page.length;w++){const{id:d,file:y}=e.page[w];_[d]=t instanceof Array?t[w]:t[y],f?.fieldType&&f.fieldType!=="none"&&(_[d].baseTexture.alphaMode=ps.NO_PREMULTIPLIED_ALPHA,_[d].baseTexture.mipmap=Ma.OFF)}for(let w=0;w<e.char.length;w++){const{id:d,page:y}=e.char[w];let{x:b,y:T,width:I,height:k,xoffset:N,yoffset:W,xadvance:j}=e.char[w];b/=m,T/=m,I/=m,k/=m,N/=m,W/=m,j/=m;const ee=new Vt(b+_[y].frame.x/m,T+_[y].frame.y/m,I,k);this.chars[d]={xOffset:N,yOffset:W,xAdvance:j,kerning:{},texture:new lt(_[y].baseTexture,ee),page:y}}for(let w=0;w<e.kerning.length;w++){let{first:d,second:y,amount:b}=e.kerning[w];d/=m,y/=m,b/=m,this.chars[y]&&(this.chars[y].kerning[d]=b)}this.distanceFieldRange=f?.distanceRange,this.distanceFieldType=f?.fieldType?.toLowerCase()??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,r){let s;if(e instanceof Of)s=e;else{const c=AA(e);if(!c)throw new Error("Unrecognized data format for font.");s=c.parse(e)}t instanceof lt&&(t=[t]);const a=new Ea(s,t,r);return Ea.available[a.font]=a,a}static uninstall(e){const t=Ea.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete Ea.available[e]}static from(e,t,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:s,padding:a,resolution:c,textureWidth:f,textureHeight:m,..._}=Object.assign({},Ea.defaultOptions,r),w=IA(s),d=t instanceof pu?t:new pu(t),y=f,b=new Of;b.info[0]={face:d.fontFamily,size:d.fontSize},b.common[0]={lineHeight:d.fontSize};let T=0,I=0,k,N,W,j=0;const ee=[];for(let de=0;de<w.length;de++){k||(k=mt.ADAPTER.createCanvas(),k.width=f,k.height=m,N=k.getContext("2d"),W=new Ht(k,{resolution:c,..._}),ee.push(new lt(W)),b.page.push({id:ee.length-1,file:""}));const F=w[de],ie=iu.measureText(F,d,!1,k),ye=ie.width,Ne=Math.ceil(ie.height),Ce=Math.ceil((d.fontStyle==="italic"?2:1)*ye);if(I>=m-Ne*c){if(I===0)throw new Error(`[BitmapFont] textureHeight ${m}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${F}')`);--de,k=null,N=null,W=null,I=0,T=0,j=0;continue}if(j=Math.max(Ne+ie.fontProperties.descent,j),Ce*c+T>=y){if(T===0)throw new Error(`[BitmapFont] textureWidth ${f}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${F}')`);--de,I+=j*c,I=Math.ceil(I),T=0,j=0;continue}PA(k,N,ie,T,I,c,d);const ge=vf(ie.text);b.char.push({id:ge,page:ee.length-1,x:T/c,y:I/c,width:Ce,height:Ne,xoffset:0,yoffset:0,xadvance:ye-(d.dropShadow?d.dropShadowDistance:0)-(d.stroke?d.strokeThickness:0)}),T+=(Ce+2*a)*c,T=Math.ceil(T)}if(!r?.skipKerning)for(let de=0,F=w.length;de<F;de++){const ie=w[de];for(let ye=0;ye<F;ye++){const Ne=w[ye],Ce=N.measureText(ie).width,ge=N.measureText(Ne).width,_e=N.measureText(ie+Ne).width-(Ce+ge);_e&&b.kerning.push({first:vf(ie),second:vf(Ne),amount:_e})}}const X=new Ea(b,ee,!0);return Ea.available[e]!==void 0&&Ea.uninstall(e),Ea.available[e]=X,X}};ru.ALPHA=[["a","z"],["A","Z"]," "],ru.NUMERIC=[["0","9"]],ru.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],ru.ASCII=[[" ","~"]],ru.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:ru.ALPHANUMERIC},ru.available={};let nu=ru;var RA=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,kA=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const c0=[],h0=[],d0=[],dw=class fw extends Di{constructor(e,t={}){super();const{align:r,tint:s,maxWidth:a,letterSpacing:c,fontName:f,fontSize:m}=Object.assign({},fw.styleDefaults,t);if(!nu.available[f])throw new Error(`Missing BitmapFont "${f}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tintColor=new Ir(s),this._font=void 0,this._fontName=f,this._fontSize=m,this.text=e,this._maxWidth=a,this._maxLineHeight=0,this._letterSpacing=c,this._anchor=new Ca(()=>{this.dirty=!0},this,0,0),this._roundPixels=mt.ROUND_PIXELS,this.dirty=!0,this._resolution=mt.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const e=nu.available[this._fontName],t=this.fontSize,r=t/e.size,s=new er,a=[],c=[],f=[],m=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",_=hw(m),w=this._maxWidth*e.size/t,d=e.distanceFieldType==="none"?c0:h0;let y=null,b=0,T=0,I=0,k=-1,N=0,W=0,j=0,ee=0;for(let Ce=0;Ce<_.length;Ce++){const ge=_[Ce],_e=vf(ge);if(/(?:\s)/.test(ge)&&(k=Ce,N=b,ee++),ge==="\r"||ge===`
`){c.push(b),f.push(-1),T=Math.max(T,b),++I,++W,s.x=0,s.y+=e.lineHeight,y=null,ee=0;continue}const xe=e.chars[_e];if(!xe)continue;y&&xe.kerning[y]&&(s.x+=xe.kerning[y]);const Ke=d0.pop()||{texture:lt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new er};Ke.texture=xe.texture,Ke.line=I,Ke.charCode=_e,Ke.position.x=Math.round(s.x+xe.xOffset+this._letterSpacing/2),Ke.position.y=Math.round(s.y+xe.yOffset),Ke.prevSpaces=ee,a.push(Ke),b=Ke.position.x+Math.max(xe.xAdvance-xe.xOffset,xe.texture.orig.width),s.x+=xe.xAdvance+this._letterSpacing,j=Math.max(j,xe.yOffset+xe.texture.height),y=_e,k!==-1&&w>0&&s.x>w&&(++W,Kc(a,1+k-W,1+Ce-k),Ce=k,k=-1,c.push(N),f.push(a.length>0?a[a.length-1].prevSpaces:0),T=Math.max(T,N),I++,s.x=0,s.y+=e.lineHeight,y=null,ee=0)}const X=_[_.length-1];X!=="\r"&&X!==`
`&&(/(?:\s)/.test(X)&&(b=N),c.push(b),T=Math.max(T,b),f.push(-1));const de=[];for(let Ce=0;Ce<=I;Ce++){let ge=0;this._align==="right"?ge=T-c[Ce]:this._align==="center"?ge=(T-c[Ce])/2:this._align==="justify"&&(ge=f[Ce]<0?0:(T-c[Ce])/f[Ce]),de.push(ge)}const F=a.length,ie={},ye=[],Ne=this._activePagesMeshData;d.push(...Ne);for(let Ce=0;Ce<F;Ce++){const ge=a[Ce].texture,_e=ge.baseTexture.uid;if(!ie[_e]){let xe=d.pop();if(!xe){const H=new Yf;let V,D;e.distanceFieldType==="none"?(V=new nd(lt.EMPTY),D=Ot.NORMAL):(V=new nd(lt.EMPTY,{program:fl.from(kA,RA),uniforms:{uFWidth:0}}),D=Ot.NORMAL_NPM);const K=new rd(H,V);K.blendMode=D,xe={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:K,vertices:null,uvs:null,indices:null}}xe.index=0,xe.indexCount=0,xe.vertexCount=0,xe.uvsCount=0,xe.total=0;const{_textureCache:Ke}=this;Ke[_e]=Ke[_e]||new lt(ge.baseTexture),xe.mesh.texture=Ke[_e],xe.mesh.tint=this._tintColor.value,ye.push(xe),ie[_e]=xe}ie[_e].total++}for(let Ce=0;Ce<Ne.length;Ce++)ye.includes(Ne[Ce])||this.removeChild(Ne[Ce].mesh);for(let Ce=0;Ce<ye.length;Ce++)ye[Ce].mesh.parent!==this&&this.addChild(ye[Ce].mesh);this._activePagesMeshData=ye;for(const Ce in ie){const ge=ie[Ce],_e=ge.total;if(!(ge.indices?.length>6*_e)||ge.vertices.length<rd.BATCHABLE_SIZE*2)ge.vertices=new Float32Array(8*_e),ge.uvs=new Float32Array(8*_e),ge.indices=new Uint16Array(6*_e);else{const xe=ge.total,Ke=ge.vertices;for(let H=xe*4*2;H<Ke.length;H++)Ke[H]=0}ge.mesh.size=6*_e}for(let Ce=0;Ce<F;Ce++){const ge=a[Ce];let _e=ge.position.x+de[ge.line]*(this._align==="justify"?ge.prevSpaces:1);this._roundPixels&&(_e=Math.round(_e));const xe=_e*r,Ke=ge.position.y*r,H=ge.texture,V=ie[H.baseTexture.uid],D=H.frame,K=H._uvs,G=V.index++;V.indices[G*6+0]=0+G*4,V.indices[G*6+1]=1+G*4,V.indices[G*6+2]=2+G*4,V.indices[G*6+3]=0+G*4,V.indices[G*6+4]=2+G*4,V.indices[G*6+5]=3+G*4,V.vertices[G*8+0]=xe,V.vertices[G*8+1]=Ke,V.vertices[G*8+2]=xe+D.width*r,V.vertices[G*8+3]=Ke,V.vertices[G*8+4]=xe+D.width*r,V.vertices[G*8+5]=Ke+D.height*r,V.vertices[G*8+6]=xe,V.vertices[G*8+7]=Ke+D.height*r,V.uvs[G*8+0]=K.x0,V.uvs[G*8+1]=K.y0,V.uvs[G*8+2]=K.x1,V.uvs[G*8+3]=K.y1,V.uvs[G*8+4]=K.x2,V.uvs[G*8+5]=K.y2,V.uvs[G*8+6]=K.x3,V.uvs[G*8+7]=K.y3}this._textWidth=T*r,this._textHeight=(s.y+e.lineHeight)*r;for(const Ce in ie){const ge=ie[Ce];if(this.anchor.x!==0||this.anchor.y!==0){let H=0;const V=this._textWidth*this.anchor.x,D=this._textHeight*this.anchor.y;for(let K=0;K<ge.total;K++)ge.vertices[H++]-=V,ge.vertices[H++]-=D,ge.vertices[H++]-=V,ge.vertices[H++]-=D,ge.vertices[H++]-=V,ge.vertices[H++]-=D,ge.vertices[H++]-=V,ge.vertices[H++]-=D}this._maxLineHeight=j*r;const _e=ge.mesh.geometry.getBuffer("aVertexPosition"),xe=ge.mesh.geometry.getBuffer("aTextureCoord"),Ke=ge.mesh.geometry.getIndex();_e.data=ge.vertices,xe.data=ge.uvs,Ke.data=ge.indices,_e.update(),xe.update(),Ke.update()}for(let Ce=0;Ce<a.length;Ce++)d0.push(a[Ce]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:r,size:s}=nu.available[this._fontName];if(r!=="none"){const{a,b:c,c:f,d:m}=this.worldTransform,_=Math.sqrt(a*a+c*c),w=Math.sqrt(f*f+m*m),d=(Math.abs(_)+Math.abs(w))/2,y=this.fontSize/s,b=e._view.resolution;for(const T of this._activePagesMeshData)T.mesh.shader.uniforms.uFWidth=d*t*y*b}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=nu.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!nu.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??nu.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,r=nu.available[this._fontName].distanceFieldType==="none"?c0:h0;r.push(...this._activePagesMeshData);for(const s of this._activePagesMeshData)this.removeChild(s.mesh);this._activePagesMeshData=[],r.filter(s=>t[s.mesh.texture.baseTexture.uid]).forEach(s=>{s.mesh.texture=lt.EMPTY});for(const s in t)t[s].destroy(),delete t[s];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};dw.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let MA=dw;const OA=[".xml",".fnt"],DA={extension:{type:ct.LoadParser,priority:Ho.Normal},name:"loadBitmapFont",test(n){return OA.includes(jn.extname(n).toLowerCase())},async testParse(n){return yf.test(n)||Kg.test(n)},async parse(n,e,t){const r=yf.test(n)?yf.parse(n):Kg.parse(n),{src:s}=e,{page:a}=r,c=[];for(let _=0;_<a.length;++_){const w=a[_].file;let d=jn.join(jn.dirname(s),w);d=zg(d,s),c.push(d)}const f=await t.load(c),m=c.map(_=>f[_]);return nu.install(r,m,!0)},async load(n,e){return(await mt.ADAPTER.fetch(n)).text()},unload(n){n.destroy()}};St.add(DA);const Yg=class Hc extends pu{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new Hc(Object.keys(Hc.defaultOptions).reduce((t,r)=>({...t,[r]:e[r]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete Hc.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:r}=Hc;if(r[e]){const s=r[e];return this._fonts.push(s),s.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return mt.ADAPTER.fetch(e).then(s=>s.blob()).then(async s=>new Promise((a,c)=>{const f=URL.createObjectURL(s),m=new FileReader;m.onload=()=>a([f,m.result]),m.onerror=c,m.readAsDataURL(s)})).then(async([s,a])=>{const c=Object.assign({family:jn.basename(e,jn.extname(e)),weight:"normal",style:"normal",display:"auto",src:s,dataSrc:a,refs:1,originalUrl:e,fontFace:null},t);r[e]=c,this._fonts.push(c),this.styleID++;const f=new FontFace(c.family,`url(${c.src})`,{weight:c.weight,style:c.style,display:c.display});c.fontFace=f,await f.load(),document.fonts.add(f),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(r=>!this._overrides.includes(r));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(r=>this._overrides.includes(r));t.length>0&&(this._overrides=this._overrides.filter(r=>!t.includes(r)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style};
                font-display: ${t.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=yb(e)),typeof e=="number"?gb(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,r=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),s=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const a=`${r}px ${s}px`;return this.dropShadowBlur>0?`text-shadow: ${a} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${a} ${e}`}reset(){Object.assign(this,Hc.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=mt.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};Yg.availableFonts={},Yg.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let rg=Yg;const of=class Vc extends zo{constructor(e="",t={}){super(lt.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const r=new Image,s=lt.from(r,{scaleMode:mt.SCALE_MODE,resourceOptions:{autoLoad:!1}});s.orig=new Vt,s.trim=new Vt,this.texture=s;const a="http://www.w3.org/2000/svg",c="http://www.w3.org/1999/xhtml",f=document.createElementNS(a,"svg"),m=document.createElementNS(a,"foreignObject"),_=document.createElementNS(c,"div"),w=document.createElementNS(c,"style");m.setAttribute("width","10000"),m.setAttribute("height","10000"),m.style.overflow="hidden",f.appendChild(m),this.maxWidth=Vc.defaultMaxWidth,this.maxHeight=Vc.defaultMaxHeight,this._domElement=_,this._styleElement=w,this._svgRoot=f,this._foreignObject=m,this._foreignObject.appendChild(w),this._foreignObject.appendChild(_),this._image=r,this._loadImage=new Image,this._autoResolution=Vc.defaultAutoResolution,this._resolution=Vc.defaultResolution??mt.RESOLUTION,this.text=e,this.style=t}measureText(e){const{text:t,style:r,resolution:s}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:r.toCSS(s)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);const a=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:c,height:f}=a;(c>this.maxWidth||f>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const m=Math.min(this.maxWidth,Math.ceil(c)),_=Math.min(this.maxHeight,Math.ceil(f));return this._svgRoot.setAttribute("width",m.toString()),this._svgRoot.setAttribute("height",_.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(s)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:m+r.padding*2,height:_+r.padding*2}}async updateText(e=!0){const{style:t,_image:r,_loadImage:s}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:a,height:c}=this.measureText();r.width=s.width=Math.ceil(Math.max(1,a)),r.height=s.height=Math.ceil(Math.max(1,c)),this._updateID++;const f=this._updateID;await new Promise(m=>{s.onload=async()=>{if(f<this._updateID){m();return}await t.onBeforeDraw(),r.src=s.src,s.onload=null,s.src="",this.updateTexture(),m()};const _=new XMLSerializer().serializeToString(this._svgRoot);s.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(_)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:r,resolution:s}=this,{padding:a}=e,{baseTexture:c}=t;t.trim.width=t._frame.width=r.width/s,t.trim.height=t._frame.height=r.height/s,t.trim.x=-a,t.trim.y=-a,t.orig.width=t._frame.width-a*2,t.orig.height=t._frame.height-a*2,this._onTextureUpdate(),c.setRealSize(r.width,r.height,s),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},Vc.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=t,this._svgRoot?.remove(),this._svgRoot=t,this._domElement?.remove(),this._domElement=t,this._foreignObject?.remove(),this._foreignObject=t,this._styleElement?.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=lu(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=lu(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof rg?(this.ownsStyle=!1,this._style=e):e instanceof pu?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=rg.from(e)):(this.ownsStyle=!0,this._style=new rg(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};of.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},of.defaultMaxWidth=2024,of.defaultMaxHeight=2024,of.defaultAutoResolution=!0;class mu{static instance;textures=new Map;animations=new Map;stateAssets=new Map;static getInstance(){return this.instance||(this.instance=new mu),this.instance}async loadManifest(e,t,r){if(this.stateAssets.has(t)&&this.stateAssets.get(t).size>0){r&&r(1);return}const a=await(await fetch(e)).json();this.stateAssets.has(t)||this.stateAssets.set(t,new Set);const c=this.stateAssets.get(t),f=Object.keys(a.spritesheets||{}).length+Object.keys(a.images||{}).length;let m=0;const _=()=>{m++,r&&r(m/f)};for(const[w,d]of Object.entries(a.spritesheets)){const y=await sc.load(d.url);c.add(d.url);for(const[b,T]of Object.entries(d.frames)){const I=new lt(y,new Vt(T.x,T.y,T.w,T.h));this.textures.set(b,I),c.add(b)}for(const[b,T]of Object.entries(d.animations)){const I=`${w}_${b}`,k=T.map(N=>this.textures.get(N)).filter(N=>!!N);this.animations.set(I,k),c.add(I)}_()}if(a.images)for(const[w,d]of Object.entries(a.images)){const y=await sc.load(d);this.textures.set(w,y),c.add(w),c.add(d),_()}}uncacheByState(e){const t=this.stateAssets.get(e);t&&(t.forEach(r=>{(r.includes(".")||r.includes("/"))&&sc.unload(r),this.textures.delete(r),this.animations.delete(r)}),this.stateAssets.delete(e))}getTexture(e){return this.textures.get(e)||lt.WHITE}getAnimation(e){return this.animations.get(e)||[]}}var ng={};var f0;function NA(){return f0||(f0=1,(function(n){(function(){var e=function(){this.init()};e.prototype={init:function(){var d=this||t;return d._counter=1e3,d._html5AudioPool=[],d.html5PoolSize=10,d._codecs={},d._howls=[],d._muted=!1,d._volume=1,d._canPlayEvent="canplaythrough",d._navigator=typeof window<"u"&&window.navigator?window.navigator:null,d.masterGain=null,d.noAudio=!1,d.usingWebAudio=!0,d.autoSuspend=!0,d.ctx=null,d.autoUnlock=!0,d._setup(),d},volume:function(d){var y=this||t;if(d=parseFloat(d),y.ctx||w(),typeof d<"u"&&d>=0&&d<=1){if(y._volume=d,y._muted)return y;y.usingWebAudio&&y.masterGain.gain.setValueAtTime(d,t.ctx.currentTime);for(var b=0;b<y._howls.length;b++)if(!y._howls[b]._webAudio)for(var T=y._howls[b]._getSoundIds(),I=0;I<T.length;I++){var k=y._howls[b]._soundById(T[I]);k&&k._node&&(k._node.volume=k._volume*d)}return y}return y._volume},mute:function(d){var y=this||t;y.ctx||w(),y._muted=d,y.usingWebAudio&&y.masterGain.gain.setValueAtTime(d?0:y._volume,t.ctx.currentTime);for(var b=0;b<y._howls.length;b++)if(!y._howls[b]._webAudio)for(var T=y._howls[b]._getSoundIds(),I=0;I<T.length;I++){var k=y._howls[b]._soundById(T[I]);k&&k._node&&(k._node.muted=d?!0:k._muted)}return y},stop:function(){for(var d=this||t,y=0;y<d._howls.length;y++)d._howls[y].stop();return d},unload:function(){for(var d=this||t,y=d._howls.length-1;y>=0;y--)d._howls[y].unload();return d.usingWebAudio&&d.ctx&&typeof d.ctx.close<"u"&&(d.ctx.close(),d.ctx=null,w()),d},codecs:function(d){return(this||t)._codecs[d.replace(/^x-/,"")]},_setup:function(){var d=this||t;if(d.state=d.ctx&&d.ctx.state||"suspended",d._autoSuspend(),!d.usingWebAudio)if(typeof Audio<"u")try{var y=new Audio;typeof y.oncanplaythrough>"u"&&(d._canPlayEvent="canplay")}catch{d.noAudio=!0}else d.noAudio=!0;try{var y=new Audio;y.muted&&(d.noAudio=!0)}catch{}return d.noAudio||d._setupCodecs(),d},_setupCodecs:function(){var d=this||t,y=null;try{y=typeof Audio<"u"?new Audio:null}catch{return d}if(!y||typeof y.canPlayType!="function")return d;var b=y.canPlayType("audio/mpeg;").replace(/^no$/,""),T=d._navigator?d._navigator.userAgent:"",I=T.match(/OPR\/(\d+)/g),k=I&&parseInt(I[0].split("/")[1],10)<33,N=T.indexOf("Safari")!==-1&&T.indexOf("Chrome")===-1,W=T.match(/Version\/(.*?) /),j=N&&W&&parseInt(W[1],10)<15;return d._codecs={mp3:!!(!k&&(b||y.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!b,opus:!!y.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!y.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!y.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(y.canPlayType('audio/wav; codecs="1"')||y.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!y.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!y.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(y.canPlayType("audio/x-m4a;")||y.canPlayType("audio/m4a;")||y.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(y.canPlayType("audio/x-m4b;")||y.canPlayType("audio/m4b;")||y.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(y.canPlayType("audio/x-mp4;")||y.canPlayType("audio/mp4;")||y.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!j&&y.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!j&&y.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!y.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(y.canPlayType("audio/x-flac;")||y.canPlayType("audio/flac;")).replace(/^no$/,"")},d},_unlockAudio:function(){var d=this||t;if(!(d._audioUnlocked||!d.ctx)){d._audioUnlocked=!1,d.autoUnlock=!1,!d._mobileUnloaded&&d.ctx.sampleRate!==44100&&(d._mobileUnloaded=!0,d.unload()),d._scratchBuffer=d.ctx.createBuffer(1,1,22050);var y=function(b){for(;d._html5AudioPool.length<d.html5PoolSize;)try{var T=new Audio;T._unlocked=!0,d._releaseHtml5Audio(T)}catch{d.noAudio=!0;break}for(var I=0;I<d._howls.length;I++)if(!d._howls[I]._webAudio)for(var k=d._howls[I]._getSoundIds(),N=0;N<k.length;N++){var W=d._howls[I]._soundById(k[N]);W&&W._node&&!W._node._unlocked&&(W._node._unlocked=!0,W._node.load())}d._autoResume();var j=d.ctx.createBufferSource();j.buffer=d._scratchBuffer,j.connect(d.ctx.destination),typeof j.start>"u"?j.noteOn(0):j.start(0),typeof d.ctx.resume=="function"&&d.ctx.resume(),j.onended=function(){j.disconnect(0),d._audioUnlocked=!0,document.removeEventListener("touchstart",y,!0),document.removeEventListener("touchend",y,!0),document.removeEventListener("click",y,!0),document.removeEventListener("keydown",y,!0);for(var ee=0;ee<d._howls.length;ee++)d._howls[ee]._emit("unlock")}};return document.addEventListener("touchstart",y,!0),document.addEventListener("touchend",y,!0),document.addEventListener("click",y,!0),document.addEventListener("keydown",y,!0),d}},_obtainHtml5Audio:function(){var d=this||t;if(d._html5AudioPool.length)return d._html5AudioPool.pop();var y=new Audio().play();return y&&typeof Promise<"u"&&(y instanceof Promise||typeof y.then=="function")&&y.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(d){var y=this||t;return d._unlocked&&y._html5AudioPool.push(d),y},_autoSuspend:function(){var d=this;if(!(!d.autoSuspend||!d.ctx||typeof d.ctx.suspend>"u"||!t.usingWebAudio)){for(var y=0;y<d._howls.length;y++)if(d._howls[y]._webAudio){for(var b=0;b<d._howls[y]._sounds.length;b++)if(!d._howls[y]._sounds[b]._paused)return d}return d._suspendTimer&&clearTimeout(d._suspendTimer),d._suspendTimer=setTimeout(function(){if(d.autoSuspend){d._suspendTimer=null,d.state="suspending";var T=function(){d.state="suspended",d._resumeAfterSuspend&&(delete d._resumeAfterSuspend,d._autoResume())};d.ctx.suspend().then(T,T)}},3e4),d}},_autoResume:function(){var d=this;if(!(!d.ctx||typeof d.ctx.resume>"u"||!t.usingWebAudio))return d.state==="running"&&d.ctx.state!=="interrupted"&&d._suspendTimer?(clearTimeout(d._suspendTimer),d._suspendTimer=null):d.state==="suspended"||d.state==="running"&&d.ctx.state==="interrupted"?(d.ctx.resume().then(function(){d.state="running";for(var y=0;y<d._howls.length;y++)d._howls[y]._emit("resume")}),d._suspendTimer&&(clearTimeout(d._suspendTimer),d._suspendTimer=null)):d.state==="suspending"&&(d._resumeAfterSuspend=!0),d}};var t=new e,r=function(d){var y=this;if(!d.src||d.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}y.init(d)};r.prototype={init:function(d){var y=this;return t.ctx||w(),y._autoplay=d.autoplay||!1,y._format=typeof d.format!="string"?d.format:[d.format],y._html5=d.html5||!1,y._muted=d.mute||!1,y._loop=d.loop||!1,y._pool=d.pool||5,y._preload=typeof d.preload=="boolean"||d.preload==="metadata"?d.preload:!0,y._rate=d.rate||1,y._sprite=d.sprite||{},y._src=typeof d.src!="string"?d.src:[d.src],y._volume=d.volume!==void 0?d.volume:1,y._xhr={method:d.xhr&&d.xhr.method?d.xhr.method:"GET",headers:d.xhr&&d.xhr.headers?d.xhr.headers:null,withCredentials:d.xhr&&d.xhr.withCredentials?d.xhr.withCredentials:!1},y._duration=0,y._state="unloaded",y._sounds=[],y._endTimers={},y._queue=[],y._playLock=!1,y._onend=d.onend?[{fn:d.onend}]:[],y._onfade=d.onfade?[{fn:d.onfade}]:[],y._onload=d.onload?[{fn:d.onload}]:[],y._onloaderror=d.onloaderror?[{fn:d.onloaderror}]:[],y._onplayerror=d.onplayerror?[{fn:d.onplayerror}]:[],y._onpause=d.onpause?[{fn:d.onpause}]:[],y._onplay=d.onplay?[{fn:d.onplay}]:[],y._onstop=d.onstop?[{fn:d.onstop}]:[],y._onmute=d.onmute?[{fn:d.onmute}]:[],y._onvolume=d.onvolume?[{fn:d.onvolume}]:[],y._onrate=d.onrate?[{fn:d.onrate}]:[],y._onseek=d.onseek?[{fn:d.onseek}]:[],y._onunlock=d.onunlock?[{fn:d.onunlock}]:[],y._onresume=[],y._webAudio=t.usingWebAudio&&!y._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(y),y._autoplay&&y._queue.push({event:"play",action:function(){y.play()}}),y._preload&&y._preload!=="none"&&y.load(),y},load:function(){var d=this,y=null;if(t.noAudio){d._emit("loaderror",null,"No audio support.");return}typeof d._src=="string"&&(d._src=[d._src]);for(var b=0;b<d._src.length;b++){var T,I;if(d._format&&d._format[b])T=d._format[b];else{if(I=d._src[b],typeof I!="string"){d._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}T=/^data:audio\/([^;,]+);/i.exec(I),T||(T=/\.([^.]+)$/.exec(I.split("?",1)[0])),T&&(T=T[1].toLowerCase())}if(T||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),T&&t.codecs(T)){y=d._src[b];break}}if(!y){d._emit("loaderror",null,"No codec support for selected audio sources.");return}return d._src=y,d._state="loading",window.location.protocol==="https:"&&y.slice(0,5)==="http:"&&(d._html5=!0,d._webAudio=!1),new s(d),d._webAudio&&c(d),d},play:function(d,y){var b=this,T=null;if(typeof d=="number")T=d,d=null;else{if(typeof d=="string"&&b._state==="loaded"&&!b._sprite[d])return null;if(typeof d>"u"&&(d="__default",!b._playLock)){for(var I=0,k=0;k<b._sounds.length;k++)b._sounds[k]._paused&&!b._sounds[k]._ended&&(I++,T=b._sounds[k]._id);I===1?d=null:T=null}}var N=T?b._soundById(T):b._inactiveSound();if(!N)return null;if(T&&!d&&(d=N._sprite||"__default"),b._state!=="loaded"){N._sprite=d,N._ended=!1;var W=N._id;return b._queue.push({event:"play",action:function(){b.play(W)}}),W}if(T&&!N._paused)return y||b._loadQueue("play"),N._id;b._webAudio&&t._autoResume();var j=Math.max(0,N._seek>0?N._seek:b._sprite[d][0]/1e3),ee=Math.max(0,(b._sprite[d][0]+b._sprite[d][1])/1e3-j),X=ee*1e3/Math.abs(N._rate),de=b._sprite[d][0]/1e3,F=(b._sprite[d][0]+b._sprite[d][1])/1e3;N._sprite=d,N._ended=!1;var ie=function(){N._paused=!1,N._seek=j,N._start=de,N._stop=F,N._loop=!!(N._loop||b._sprite[d][2])};if(j>=F){b._ended(N);return}var ye=N._node;if(b._webAudio){var Ne=function(){b._playLock=!1,ie(),b._refreshBuffer(N);var xe=N._muted||b._muted?0:N._volume;ye.gain.setValueAtTime(xe,t.ctx.currentTime),N._playStart=t.ctx.currentTime,typeof ye.bufferSource.start>"u"?N._loop?ye.bufferSource.noteGrainOn(0,j,86400):ye.bufferSource.noteGrainOn(0,j,ee):N._loop?ye.bufferSource.start(0,j,86400):ye.bufferSource.start(0,j,ee),X!==1/0&&(b._endTimers[N._id]=setTimeout(b._ended.bind(b,N),X)),y||setTimeout(function(){b._emit("play",N._id),b._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?Ne():(b._playLock=!0,b.once("resume",Ne),b._clearTimer(N._id))}else{var Ce=function(){ye.currentTime=j,ye.muted=N._muted||b._muted||t._muted||ye.muted,ye.volume=N._volume*t.volume(),ye.playbackRate=N._rate;try{var xe=ye.play();if(xe&&typeof Promise<"u"&&(xe instanceof Promise||typeof xe.then=="function")?(b._playLock=!0,ie(),xe.then(function(){b._playLock=!1,ye._unlocked=!0,y?b._loadQueue():b._emit("play",N._id)}).catch(function(){b._playLock=!1,b._emit("playerror",N._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),N._ended=!0,N._paused=!0})):y||(b._playLock=!1,ie(),b._emit("play",N._id)),ye.playbackRate=N._rate,ye.paused){b._emit("playerror",N._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}d!=="__default"||N._loop?b._endTimers[N._id]=setTimeout(b._ended.bind(b,N),X):(b._endTimers[N._id]=function(){b._ended(N),ye.removeEventListener("ended",b._endTimers[N._id],!1)},ye.addEventListener("ended",b._endTimers[N._id],!1))}catch(Ke){b._emit("playerror",N._id,Ke)}};ye.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(ye.src=b._src,ye.load());var ge=window&&window.ejecta||!ye.readyState&&t._navigator.isCocoonJS;if(ye.readyState>=3||ge)Ce();else{b._playLock=!0,b._state="loading";var _e=function(){b._state="loaded",Ce(),ye.removeEventListener(t._canPlayEvent,_e,!1)};ye.addEventListener(t._canPlayEvent,_e,!1),b._clearTimer(N._id)}}return N._id},pause:function(d){var y=this;if(y._state!=="loaded"||y._playLock)return y._queue.push({event:"pause",action:function(){y.pause(d)}}),y;for(var b=y._getSoundIds(d),T=0;T<b.length;T++){y._clearTimer(b[T]);var I=y._soundById(b[T]);if(I&&!I._paused&&(I._seek=y.seek(b[T]),I._rateSeek=0,I._paused=!0,y._stopFade(b[T]),I._node))if(y._webAudio){if(!I._node.bufferSource)continue;typeof I._node.bufferSource.stop>"u"?I._node.bufferSource.noteOff(0):I._node.bufferSource.stop(0),y._cleanBuffer(I._node)}else(!isNaN(I._node.duration)||I._node.duration===1/0)&&I._node.pause();arguments[1]||y._emit("pause",I?I._id:null)}return y},stop:function(d,y){var b=this;if(b._state!=="loaded"||b._playLock)return b._queue.push({event:"stop",action:function(){b.stop(d)}}),b;for(var T=b._getSoundIds(d),I=0;I<T.length;I++){b._clearTimer(T[I]);var k=b._soundById(T[I]);k&&(k._seek=k._start||0,k._rateSeek=0,k._paused=!0,k._ended=!0,b._stopFade(T[I]),k._node&&(b._webAudio?k._node.bufferSource&&(typeof k._node.bufferSource.stop>"u"?k._node.bufferSource.noteOff(0):k._node.bufferSource.stop(0),b._cleanBuffer(k._node)):(!isNaN(k._node.duration)||k._node.duration===1/0)&&(k._node.currentTime=k._start||0,k._node.pause(),k._node.duration===1/0&&b._clearSound(k._node))),y||b._emit("stop",k._id))}return b},mute:function(d,y){var b=this;if(b._state!=="loaded"||b._playLock)return b._queue.push({event:"mute",action:function(){b.mute(d,y)}}),b;if(typeof y>"u")if(typeof d=="boolean")b._muted=d;else return b._muted;for(var T=b._getSoundIds(y),I=0;I<T.length;I++){var k=b._soundById(T[I]);k&&(k._muted=d,k._interval&&b._stopFade(k._id),b._webAudio&&k._node?k._node.gain.setValueAtTime(d?0:k._volume,t.ctx.currentTime):k._node&&(k._node.muted=t._muted?!0:d),b._emit("mute",k._id))}return b},volume:function(){var d=this,y=arguments,b,T;if(y.length===0)return d._volume;if(y.length===1||y.length===2&&typeof y[1]>"u"){var I=d._getSoundIds(),k=I.indexOf(y[0]);k>=0?T=parseInt(y[0],10):b=parseFloat(y[0])}else y.length>=2&&(b=parseFloat(y[0]),T=parseInt(y[1],10));var N;if(typeof b<"u"&&b>=0&&b<=1){if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"volume",action:function(){d.volume.apply(d,y)}}),d;typeof T>"u"&&(d._volume=b),T=d._getSoundIds(T);for(var W=0;W<T.length;W++)N=d._soundById(T[W]),N&&(N._volume=b,y[2]||d._stopFade(T[W]),d._webAudio&&N._node&&!N._muted?N._node.gain.setValueAtTime(b,t.ctx.currentTime):N._node&&!N._muted&&(N._node.volume=b*t.volume()),d._emit("volume",N._id))}else return N=T?d._soundById(T):d._sounds[0],N?N._volume:0;return d},fade:function(d,y,b,T){var I=this;if(I._state!=="loaded"||I._playLock)return I._queue.push({event:"fade",action:function(){I.fade(d,y,b,T)}}),I;d=Math.min(Math.max(0,parseFloat(d)),1),y=Math.min(Math.max(0,parseFloat(y)),1),b=parseFloat(b),I.volume(d,T);for(var k=I._getSoundIds(T),N=0;N<k.length;N++){var W=I._soundById(k[N]);if(W){if(T||I._stopFade(k[N]),I._webAudio&&!W._muted){var j=t.ctx.currentTime,ee=j+b/1e3;W._volume=d,W._node.gain.setValueAtTime(d,j),W._node.gain.linearRampToValueAtTime(y,ee)}I._startFadeInterval(W,d,y,b,k[N],typeof T>"u")}}return I},_startFadeInterval:function(d,y,b,T,I,k){var N=this,W=y,j=b-y,ee=Math.abs(j/.01),X=Math.max(4,ee>0?T/ee:T),de=Date.now();d._fadeTo=b,d._interval=setInterval(function(){var F=(Date.now()-de)/T;de=Date.now(),W+=j*F,W=Math.round(W*100)/100,j<0?W=Math.max(b,W):W=Math.min(b,W),N._webAudio?d._volume=W:N.volume(W,d._id,!0),k&&(N._volume=W),(b<y&&W<=b||b>y&&W>=b)&&(clearInterval(d._interval),d._interval=null,d._fadeTo=null,N.volume(b,d._id),N._emit("fade",d._id))},X)},_stopFade:function(d){var y=this,b=y._soundById(d);return b&&b._interval&&(y._webAudio&&b._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(b._interval),b._interval=null,y.volume(b._fadeTo,d),b._fadeTo=null,y._emit("fade",d)),y},loop:function(){var d=this,y=arguments,b,T,I;if(y.length===0)return d._loop;if(y.length===1)if(typeof y[0]=="boolean")b=y[0],d._loop=b;else return I=d._soundById(parseInt(y[0],10)),I?I._loop:!1;else y.length===2&&(b=y[0],T=parseInt(y[1],10));for(var k=d._getSoundIds(T),N=0;N<k.length;N++)I=d._soundById(k[N]),I&&(I._loop=b,d._webAudio&&I._node&&I._node.bufferSource&&(I._node.bufferSource.loop=b,b&&(I._node.bufferSource.loopStart=I._start||0,I._node.bufferSource.loopEnd=I._stop,d.playing(k[N])&&(d.pause(k[N],!0),d.play(k[N],!0)))));return d},rate:function(){var d=this,y=arguments,b,T;if(y.length===0)T=d._sounds[0]._id;else if(y.length===1){var I=d._getSoundIds(),k=I.indexOf(y[0]);k>=0?T=parseInt(y[0],10):b=parseFloat(y[0])}else y.length===2&&(b=parseFloat(y[0]),T=parseInt(y[1],10));var N;if(typeof b=="number"){if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"rate",action:function(){d.rate.apply(d,y)}}),d;typeof T>"u"&&(d._rate=b),T=d._getSoundIds(T);for(var W=0;W<T.length;W++)if(N=d._soundById(T[W]),N){d.playing(T[W])&&(N._rateSeek=d.seek(T[W]),N._playStart=d._webAudio?t.ctx.currentTime:N._playStart),N._rate=b,d._webAudio&&N._node&&N._node.bufferSource?N._node.bufferSource.playbackRate.setValueAtTime(b,t.ctx.currentTime):N._node&&(N._node.playbackRate=b);var j=d.seek(T[W]),ee=(d._sprite[N._sprite][0]+d._sprite[N._sprite][1])/1e3-j,X=ee*1e3/Math.abs(N._rate);(d._endTimers[T[W]]||!N._paused)&&(d._clearTimer(T[W]),d._endTimers[T[W]]=setTimeout(d._ended.bind(d,N),X)),d._emit("rate",N._id)}}else return N=d._soundById(T),N?N._rate:d._rate;return d},seek:function(){var d=this,y=arguments,b,T;if(y.length===0)d._sounds.length&&(T=d._sounds[0]._id);else if(y.length===1){var I=d._getSoundIds(),k=I.indexOf(y[0]);k>=0?T=parseInt(y[0],10):d._sounds.length&&(T=d._sounds[0]._id,b=parseFloat(y[0]))}else y.length===2&&(b=parseFloat(y[0]),T=parseInt(y[1],10));if(typeof T>"u")return 0;if(typeof b=="number"&&(d._state!=="loaded"||d._playLock))return d._queue.push({event:"seek",action:function(){d.seek.apply(d,y)}}),d;var N=d._soundById(T);if(N)if(typeof b=="number"&&b>=0){var W=d.playing(T);W&&d.pause(T,!0),N._seek=b,N._ended=!1,d._clearTimer(T),!d._webAudio&&N._node&&!isNaN(N._node.duration)&&(N._node.currentTime=b);var j=function(){W&&d.play(T,!0),d._emit("seek",T)};if(W&&!d._webAudio){var ee=function(){d._playLock?setTimeout(ee,0):j()};setTimeout(ee,0)}else j()}else if(d._webAudio){var X=d.playing(T)?t.ctx.currentTime-N._playStart:0,de=N._rateSeek?N._rateSeek-N._seek:0;return N._seek+(de+X*Math.abs(N._rate))}else return N._node.currentTime;return d},playing:function(d){var y=this;if(typeof d=="number"){var b=y._soundById(d);return b?!b._paused:!1}for(var T=0;T<y._sounds.length;T++)if(!y._sounds[T]._paused)return!0;return!1},duration:function(d){var y=this,b=y._duration,T=y._soundById(d);return T&&(b=y._sprite[T._sprite][1]/1e3),b},state:function(){return this._state},unload:function(){for(var d=this,y=d._sounds,b=0;b<y.length;b++)y[b]._paused||d.stop(y[b]._id),d._webAudio||(d._clearSound(y[b]._node),y[b]._node.removeEventListener("error",y[b]._errorFn,!1),y[b]._node.removeEventListener(t._canPlayEvent,y[b]._loadFn,!1),y[b]._node.removeEventListener("ended",y[b]._endFn,!1),t._releaseHtml5Audio(y[b]._node)),delete y[b]._node,d._clearTimer(y[b]._id);var T=t._howls.indexOf(d);T>=0&&t._howls.splice(T,1);var I=!0;for(b=0;b<t._howls.length;b++)if(t._howls[b]._src===d._src||d._src.indexOf(t._howls[b]._src)>=0){I=!1;break}return a&&I&&delete a[d._src],t.noAudio=!1,d._state="unloaded",d._sounds=[],d=null,null},on:function(d,y,b,T){var I=this,k=I["_on"+d];return typeof y=="function"&&k.push(T?{id:b,fn:y,once:T}:{id:b,fn:y}),I},off:function(d,y,b){var T=this,I=T["_on"+d],k=0;if(typeof y=="number"&&(b=y,y=null),y||b)for(k=0;k<I.length;k++){var N=b===I[k].id;if(y===I[k].fn&&N||!y&&N){I.splice(k,1);break}}else if(d)T["_on"+d]=[];else{var W=Object.keys(T);for(k=0;k<W.length;k++)W[k].indexOf("_on")===0&&Array.isArray(T[W[k]])&&(T[W[k]]=[])}return T},once:function(d,y,b){var T=this;return T.on(d,y,b,1),T},_emit:function(d,y,b){for(var T=this,I=T["_on"+d],k=I.length-1;k>=0;k--)(!I[k].id||I[k].id===y||d==="load")&&(setTimeout((function(N){N.call(this,y,b)}).bind(T,I[k].fn),0),I[k].once&&T.off(d,I[k].fn,I[k].id));return T._loadQueue(d),T},_loadQueue:function(d){var y=this;if(y._queue.length>0){var b=y._queue[0];b.event===d&&(y._queue.shift(),y._loadQueue()),d||b.action()}return y},_ended:function(d){var y=this,b=d._sprite;if(!y._webAudio&&d._node&&!d._node.paused&&!d._node.ended&&d._node.currentTime<d._stop)return setTimeout(y._ended.bind(y,d),100),y;var T=!!(d._loop||y._sprite[b][2]);if(y._emit("end",d._id),!y._webAudio&&T&&y.stop(d._id,!0).play(d._id),y._webAudio&&T){y._emit("play",d._id),d._seek=d._start||0,d._rateSeek=0,d._playStart=t.ctx.currentTime;var I=(d._stop-d._start)*1e3/Math.abs(d._rate);y._endTimers[d._id]=setTimeout(y._ended.bind(y,d),I)}return y._webAudio&&!T&&(d._paused=!0,d._ended=!0,d._seek=d._start||0,d._rateSeek=0,y._clearTimer(d._id),y._cleanBuffer(d._node),t._autoSuspend()),!y._webAudio&&!T&&y.stop(d._id,!0),y},_clearTimer:function(d){var y=this;if(y._endTimers[d]){if(typeof y._endTimers[d]!="function")clearTimeout(y._endTimers[d]);else{var b=y._soundById(d);b&&b._node&&b._node.removeEventListener("ended",y._endTimers[d],!1)}delete y._endTimers[d]}return y},_soundById:function(d){for(var y=this,b=0;b<y._sounds.length;b++)if(d===y._sounds[b]._id)return y._sounds[b];return null},_inactiveSound:function(){var d=this;d._drain();for(var y=0;y<d._sounds.length;y++)if(d._sounds[y]._ended)return d._sounds[y].reset();return new s(d)},_drain:function(){var d=this,y=d._pool,b=0,T=0;if(!(d._sounds.length<y)){for(T=0;T<d._sounds.length;T++)d._sounds[T]._ended&&b++;for(T=d._sounds.length-1;T>=0;T--){if(b<=y)return;d._sounds[T]._ended&&(d._webAudio&&d._sounds[T]._node&&d._sounds[T]._node.disconnect(0),d._sounds.splice(T,1),b--)}}},_getSoundIds:function(d){var y=this;if(typeof d>"u"){for(var b=[],T=0;T<y._sounds.length;T++)b.push(y._sounds[T]._id);return b}else return[d]},_refreshBuffer:function(d){var y=this;return d._node.bufferSource=t.ctx.createBufferSource(),d._node.bufferSource.buffer=a[y._src],d._panner?d._node.bufferSource.connect(d._panner):d._node.bufferSource.connect(d._node),d._node.bufferSource.loop=d._loop,d._loop&&(d._node.bufferSource.loopStart=d._start||0,d._node.bufferSource.loopEnd=d._stop||0),d._node.bufferSource.playbackRate.setValueAtTime(d._rate,t.ctx.currentTime),y},_cleanBuffer:function(d){var y=this,b=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!d.bufferSource)return y;if(t._scratchBuffer&&d.bufferSource&&(d.bufferSource.onended=null,d.bufferSource.disconnect(0),b))try{d.bufferSource.buffer=t._scratchBuffer}catch{}return d.bufferSource=null,y},_clearSound:function(d){var y=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);y||(d.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(d){this._parent=d,this.init()};s.prototype={init:function(){var d=this,y=d._parent;return d._muted=y._muted,d._loop=y._loop,d._volume=y._volume,d._rate=y._rate,d._seek=0,d._paused=!0,d._ended=!0,d._sprite="__default",d._id=++t._counter,y._sounds.push(d),d.create(),d},create:function(){var d=this,y=d._parent,b=t._muted||d._muted||d._parent._muted?0:d._volume;return y._webAudio?(d._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),d._node.gain.setValueAtTime(b,t.ctx.currentTime),d._node.paused=!0,d._node.connect(t.masterGain)):t.noAudio||(d._node=t._obtainHtml5Audio(),d._errorFn=d._errorListener.bind(d),d._node.addEventListener("error",d._errorFn,!1),d._loadFn=d._loadListener.bind(d),d._node.addEventListener(t._canPlayEvent,d._loadFn,!1),d._endFn=d._endListener.bind(d),d._node.addEventListener("ended",d._endFn,!1),d._node.src=y._src,d._node.preload=y._preload===!0?"auto":y._preload,d._node.volume=b*t.volume(),d._node.load()),d},reset:function(){var d=this,y=d._parent;return d._muted=y._muted,d._loop=y._loop,d._volume=y._volume,d._rate=y._rate,d._seek=0,d._rateSeek=0,d._paused=!0,d._ended=!0,d._sprite="__default",d._id=++t._counter,d},_errorListener:function(){var d=this;d._parent._emit("loaderror",d._id,d._node.error?d._node.error.code:0),d._node.removeEventListener("error",d._errorFn,!1)},_loadListener:function(){var d=this,y=d._parent;y._duration=Math.ceil(d._node.duration*10)/10,Object.keys(y._sprite).length===0&&(y._sprite={__default:[0,y._duration*1e3]}),y._state!=="loaded"&&(y._state="loaded",y._emit("load"),y._loadQueue()),d._node.removeEventListener(t._canPlayEvent,d._loadFn,!1)},_endListener:function(){var d=this,y=d._parent;y._duration===1/0&&(y._duration=Math.ceil(d._node.duration*10)/10,y._sprite.__default[1]===1/0&&(y._sprite.__default[1]=y._duration*1e3),y._ended(d)),d._node.removeEventListener("ended",d._endFn,!1)}};var a={},c=function(d){var y=d._src;if(a[y]){d._duration=a[y].duration,_(d);return}if(/^data:[^;]+;base64,/.test(y)){for(var b=atob(y.split(",")[1]),T=new Uint8Array(b.length),I=0;I<b.length;++I)T[I]=b.charCodeAt(I);m(T.buffer,d)}else{var k=new XMLHttpRequest;k.open(d._xhr.method,y,!0),k.withCredentials=d._xhr.withCredentials,k.responseType="arraybuffer",d._xhr.headers&&Object.keys(d._xhr.headers).forEach(function(N){k.setRequestHeader(N,d._xhr.headers[N])}),k.onload=function(){var N=(k.status+"")[0];if(N!=="0"&&N!=="2"&&N!=="3"){d._emit("loaderror",null,"Failed loading audio file with status: "+k.status+".");return}m(k.response,d)},k.onerror=function(){d._webAudio&&(d._html5=!0,d._webAudio=!1,d._sounds=[],delete a[y],d.load())},f(k)}},f=function(d){try{d.send()}catch{d.onerror()}},m=function(d,y){var b=function(){y._emit("loaderror",null,"Decoding audio data failed.")},T=function(I){I&&y._sounds.length>0?(a[y._src]=I,_(y,I)):b()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(d).then(T).catch(b):t.ctx.decodeAudioData(d,T,b)},_=function(d,y){y&&!d._duration&&(d._duration=y.duration),Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue())},w=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var d=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),y=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),b=y?parseInt(y[1],10):null;if(d&&b&&b<9){var T=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!T&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};n.Howler=t,n.Howl=r,typeof Aa<"u"?(Aa.HowlerGlobal=e,Aa.Howler=t,Aa.Howl=r,Aa.Sound=s):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=r,window.Sound=s)})();(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var s=r._howls.length-1;s>=0;s--)r._howls[s].stereo(t);return r},HowlerGlobal.prototype.pos=function(t,r,s){var a=this;if(!a.ctx||!a.ctx.listener)return a;if(r=typeof r!="number"?a._pos[1]:r,s=typeof s!="number"?a._pos[2]:s,typeof t=="number")a._pos=[t,r,s],typeof a.ctx.listener.positionX<"u"?(a.ctx.listener.positionX.setTargetAtTime(a._pos[0],Howler.ctx.currentTime,.1),a.ctx.listener.positionY.setTargetAtTime(a._pos[1],Howler.ctx.currentTime,.1),a.ctx.listener.positionZ.setTargetAtTime(a._pos[2],Howler.ctx.currentTime,.1)):a.ctx.listener.setPosition(a._pos[0],a._pos[1],a._pos[2]);else return a._pos;return a},HowlerGlobal.prototype.orientation=function(t,r,s,a,c,f){var m=this;if(!m.ctx||!m.ctx.listener)return m;var _=m._orientation;if(r=typeof r!="number"?_[1]:r,s=typeof s!="number"?_[2]:s,a=typeof a!="number"?_[3]:a,c=typeof c!="number"?_[4]:c,f=typeof f!="number"?_[5]:f,typeof t=="number")m._orientation=[t,r,s,a,c,f],typeof m.ctx.listener.forwardX<"u"?(m.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),m.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),m.ctx.listener.forwardZ.setTargetAtTime(s,Howler.ctx.currentTime,.1),m.ctx.listener.upX.setTargetAtTime(a,Howler.ctx.currentTime,.1),m.ctx.listener.upY.setTargetAtTime(c,Howler.ctx.currentTime,.1),m.ctx.listener.upZ.setTargetAtTime(f,Howler.ctx.currentTime,.1)):m.ctx.listener.setOrientation(t,r,s,a,c,f);else return _;return m},Howl.prototype.init=(function(t){return function(r){var s=this;return s._orientation=r.orientation||[1,0,0],s._stereo=r.stereo||null,s._pos=r.pos||null,s._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},s._onstereo=r.onstereo?[{fn:r.onstereo}]:[],s._onpos=r.onpos?[{fn:r.onpos}]:[],s._onorientation=r.onorientation?[{fn:r.onorientation}]:[],t.call(this,r)}})(Howl.prototype.init),Howl.prototype.stereo=function(t,r){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"stereo",action:function(){s.stereo(t,r)}}),s;var a=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof t=="number")s._stereo=t,s._pos=[t,0,0];else return s._stereo;for(var c=s._getSoundIds(r),f=0;f<c.length;f++){var m=s._soundById(c[f]);if(m)if(typeof t=="number")m._stereo=t,m._pos=[t,0,0],m._node&&(m._pannerAttr.panningModel="equalpower",(!m._panner||!m._panner.pan)&&e(m,a),a==="spatial"?typeof m._panner.positionX<"u"?(m._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),m._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),m._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):m._panner.setPosition(t,0,0):m._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),s._emit("stereo",m._id);else return m._stereo}return s},Howl.prototype.pos=function(t,r,s,a){var c=this;if(!c._webAudio)return c;if(c._state!=="loaded")return c._queue.push({event:"pos",action:function(){c.pos(t,r,s,a)}}),c;if(r=typeof r!="number"?0:r,s=typeof s!="number"?-.5:s,typeof a>"u")if(typeof t=="number")c._pos=[t,r,s];else return c._pos;for(var f=c._getSoundIds(a),m=0;m<f.length;m++){var _=c._soundById(f[m]);if(_)if(typeof t=="number")_._pos=[t,r,s],_._node&&((!_._panner||_._panner.pan)&&e(_,"spatial"),typeof _._panner.positionX<"u"?(_._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),_._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),_._panner.positionZ.setValueAtTime(s,Howler.ctx.currentTime)):_._panner.setPosition(t,r,s)),c._emit("pos",_._id);else return _._pos}return c},Howl.prototype.orientation=function(t,r,s,a){var c=this;if(!c._webAudio)return c;if(c._state!=="loaded")return c._queue.push({event:"orientation",action:function(){c.orientation(t,r,s,a)}}),c;if(r=typeof r!="number"?c._orientation[1]:r,s=typeof s!="number"?c._orientation[2]:s,typeof a>"u")if(typeof t=="number")c._orientation=[t,r,s];else return c._orientation;for(var f=c._getSoundIds(a),m=0;m<f.length;m++){var _=c._soundById(f[m]);if(_)if(typeof t=="number")_._orientation=[t,r,s],_._node&&(_._panner||(_._pos||(_._pos=c._pos||[0,0,-.5]),e(_,"spatial")),typeof _._panner.orientationX<"u"?(_._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),_._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),_._panner.orientationZ.setValueAtTime(s,Howler.ctx.currentTime)):_._panner.setOrientation(t,r,s)),c._emit("orientation",_._id);else return _._orientation}return c},Howl.prototype.pannerAttr=function(){var t=this,r=arguments,s,a,c;if(!t._webAudio)return t;if(r.length===0)return t._pannerAttr;if(r.length===1)if(typeof r[0]=="object")s=r[0],typeof a>"u"&&(s.pannerAttr||(s.pannerAttr={coneInnerAngle:s.coneInnerAngle,coneOuterAngle:s.coneOuterAngle,coneOuterGain:s.coneOuterGain,distanceModel:s.distanceModel,maxDistance:s.maxDistance,refDistance:s.refDistance,rolloffFactor:s.rolloffFactor,panningModel:s.panningModel}),t._pannerAttr={coneInnerAngle:typeof s.pannerAttr.coneInnerAngle<"u"?s.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof s.pannerAttr.coneOuterAngle<"u"?s.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof s.pannerAttr.coneOuterGain<"u"?s.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof s.pannerAttr.distanceModel<"u"?s.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof s.pannerAttr.maxDistance<"u"?s.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof s.pannerAttr.refDistance<"u"?s.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof s.pannerAttr.rolloffFactor<"u"?s.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof s.pannerAttr.panningModel<"u"?s.pannerAttr.panningModel:t._panningModel});else return c=t._soundById(parseInt(r[0],10)),c?c._pannerAttr:t._pannerAttr;else r.length===2&&(s=r[0],a=parseInt(r[1],10));for(var f=t._getSoundIds(a),m=0;m<f.length;m++)if(c=t._soundById(f[m]),c){var _=c._pannerAttr;_={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:_.coneInnerAngle,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:_.coneOuterAngle,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:_.coneOuterGain,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:_.distanceModel,maxDistance:typeof s.maxDistance<"u"?s.maxDistance:_.maxDistance,refDistance:typeof s.refDistance<"u"?s.refDistance:_.refDistance,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:_.rolloffFactor,panningModel:typeof s.panningModel<"u"?s.panningModel:_.panningModel};var w=c._panner;w||(c._pos||(c._pos=t._pos||[0,0,-.5]),e(c,"spatial"),w=c._panner),w.coneInnerAngle=_.coneInnerAngle,w.coneOuterAngle=_.coneOuterAngle,w.coneOuterGain=_.coneOuterGain,w.distanceModel=_.distanceModel,w.maxDistance=_.maxDistance,w.refDistance=_.refDistance,w.rolloffFactor=_.rolloffFactor,w.panningModel=_.panningModel}return t},Sound.prototype.init=(function(t){return function(){var r=this,s=r._parent;r._orientation=s._orientation,r._stereo=s._stereo,r._pos=s._pos,r._pannerAttr=s._pannerAttr,t.call(this),r._stereo?s.stereo(r._stereo):r._pos&&s.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}})(Sound.prototype.init),Sound.prototype.reset=(function(t){return function(){var r=this,s=r._parent;return r._orientation=s._orientation,r._stereo=s._stereo,r._pos=s._pos,r._pannerAttr=s._pannerAttr,r._stereo?s.stereo(r._stereo):r._pos?s.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,s._refreshBuffer(r)),t.call(this)}})(Sound.prototype.reset);var e=function(t,r){r=r||"spatial",r==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()})(ng)),ng}var LA=NA();class so{static instance;data=new Map;isWriteLocked=!1;STORAGE_KEY="engine_settings_global";PERSISTENT_KEYS=["resolution","master_volume","ost_volume","sfx_volume"];SAVABLE_KEYS=["global_hp","global_energy"];constructor(){this.data.set("master_volume",.5),this.data.set("ost_volume",.5),this.data.set("sfx_volume",.5),this.data.set("resolution","1080p"),this.loadFromLocalStorage()}static getInstance(){return so.instance||(so.instance=new so),so.instance}exportSaveData(){const e={};return this.SAVABLE_KEYS.forEach(t=>{this.data.has(t)&&(e[t]=this.data.get(t))}),e}importSaveData(e){this.SAVABLE_KEYS.forEach(t=>{e[t]!==void 0&&this.forceSet(t,e[t])})}set(e,t){if(this.isWriteLocked&&this.SAVABLE_KEYS.includes(e)){console.warn(`[SharedSession] Blocked stale write to ${e} during lock.`);return}this.data.set(e,t),this.PERSISTENT_KEYS.includes(e)&&this.saveToLocalStorage()}get(e,t){return this.data.has(e)?this.data.get(e):t}clearSavableKeys(){this.SAVABLE_KEYS.forEach(e=>{this.data.delete(e)})}forceSet(e,t){this.data.set(e,t)}lockForLoad(){this.isWriteLocked=!0}unlock(){this.isWriteLocked=!1}loadFromLocalStorage(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(e){const t=JSON.parse(e);Object.entries(t).forEach(([r,s])=>{this.PERSISTENT_KEYS.includes(r)&&this.data.set(r,s)})}}catch(e){console.warn("[SharedSession] Persistence load failed",e)}}saveToLocalStorage(){const e={};this.PERSISTENT_KEYS.forEach(t=>{this.data.has(t)&&(e[t]=this.data.get(t))}),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}}class Pa{static instance;sounds=new Map;stateAssets=new Map;volumes={master:1,ost:.7,sfx:1};constructor(){const e=so.getInstance();this.volumes.master=e.get("master_volume",1)??1,this.volumes.ost=e.get("ost_volume",.7)??.7,this.volumes.sfx=e.get("sfx_volume",1)??1}static getInstance(){return this.instance||(this.instance=new Pa),this.instance}async loadManifest(e,t){const s=await(await fetch(e)).json();if(!s.audio)return;this.stateAssets.has(t)||this.stateAssets.set(t,new Set);const a=this.stateAssets.get(t);Object.entries(s.audio).forEach(([c,f])=>{if(this.sounds.has(c))return;const m=new LA.Howl({src:[f.url],loop:f.loop||!1,volume:f.volume*this.volumes[f.type]*this.volumes.master,html5:f.type==="ost"});this.sounds.set(c,{howl:m,type:f.type,baseVol:f.volume||1}),a.add(c)})}play(e){const t=this.sounds.get(e);t&&t.howl.play()}stop(e){this.sounds.get(e)?.howl.stop()}stopAllByState(e){const t=this.stateAssets.get(e);t&&t.forEach(r=>this.sounds.get(r)?.howl.stop())}uncacheByState(e){const t=this.stateAssets.get(e);t&&(t.forEach(r=>{const s=this.sounds.get(r);s&&(s.howl.stop(),s.howl.unload(),this.sounds.delete(r))}),this.stateAssets.delete(e))}setVolume(e,t){this.volumes[e]=t,so.getInstance().set(`settings_${e}_vol`,t),this.sounds.forEach(r=>{const s=r.type==="ost"?this.volumes.ost:this.volumes.sfx;r.howl.volume(r.baseVol*s*this.volumes.master)})}getVolumes(){return{...this.volumes}}}class FA extends Bf{constructor(e,t){super(),this.targetState=e,this.config=t,this.isRendering=!0}name="LoadingState";isTargetReady=!1;async init(){this.config.manifestPath&&await Promise.all([mu.getInstance().loadManifest(this.config.manifestPath,this.name),Pa.getInstance().loadManifest(this.config.manifestPath,this.name)]),this.startTargetInit()}async startTargetInit(){try{await this.targetState.init(),this.isTargetReady=!0,Ur.getInstance().notify()}catch(e){console.error("Failed to load target state:",e)}}update(e,t){}getView(){const e=this.config.view||d1;return mn.createElement(e,{key:"loading-view",...this.config.props,isFinished:this.isTargetReady,onTransitionComplete:()=>this.finishLoading()})}finishLoading(){Ur.getInstance().replace(this.targetState)}destroy(){mu.getInstance().uncacheByState(this.name),Pa.getInstance().uncacheByState(this.name)}}class Ur{static instance;stack=[];listeners=[];constructor(){}static getInstance(){return Ur.instance||(Ur.instance=new Ur),Ur.instance}async push(e,t=!0){t&&this.stack.length>0&&(this.stack[this.stack.length-1].isUpdating=!1,this.stack[this.stack.length-1].isRendering=!0),await e.init(),this.stack.push(e),this.notify()}pop(){if(this.stack.length<=1)return;const e=this.stack.pop();e&&e.destroy(),this.stack.length>0&&(this.stack[this.stack.length-1].isUpdating=!0,this.stack[this.stack.length-1].isRendering=!0),this.notify()}async replace(e,t){this.stack.forEach(s=>s.destroy()),this.stack=[],this.notify();const r=t?new FA(e,t):e;await r.init(),this.stack.push(r),this.notify(),au.getInstance().start()}updateAll(e,t){this.stack.forEach(r=>{r.isUpdating&&r.update(e,t)})}getActiveUpdateStates(){return this.stack.filter(e=>e.isUpdating)}getCurrentStateName(){return this.stack.length>0?this.stack[this.stack.length-1].name:null}subscribe(e){return this.listeners.push(e),this.notify(),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}getUnderlyingStateName(){if(this.stack.length===0)return null;for(let e=this.stack.length-1;e>=0;e--){const t=this.stack[e];if(t.name!=="PauseMenu"&&t.name!=="SaveMenu"&&t.name!=="SettingsMenu")return t.name}return this.stack[0].name}getActiveState(){return this.stack.length>0?this.stack[this.stack.length-1]:null}notify(){const e=this.stack.filter(t=>t.isRendering).map(t=>t.getView());this.listeners.forEach(t=>t(e))}}const BA=()=>{const n=It.useRef(null),e=au.getInstance(),t=Ur.getInstance(),r=It.useRef(0),s=It.useRef([]),a=It.useRef(new Set);return It.useEffect(()=>{const c=w=>a.current.add(w.key.toUpperCase()),f=w=>a.current.delete(w.key.toUpperCase());window.addEventListener("keydown",c),window.addEventListener("keyup",f);let m;const _=()=>{if(n.current){const w=e.fps||0,d=e.frameCount||0,y=t.stack||[];if(y.length!==r.current){const k=new Date().toLocaleTimeString().split(" ")[0],N=y.length>r.current?"PUSH":"POP",W=y[y.length-1]?.name||"NULL";s.current.unshift(`[${k}] ${N}: ${W}`),s.current.length>3&&s.current.pop(),r.current=y.length}const b=y.map((k,N)=>`${N===y.length-1?" ACTIVE >":"        -"} [${N}] ${k.name}`).reverse().join(`
`),T=Array.from(a.current),I=T.length>0?T.join(" | "):"IDLE";n.current.innerText=`// ENGINE_STATS
FPS:    ${w}
FRAME:  ${d}

// STATE_STACK
${b||"EMPTY"}

// INPUT_MONITOR
KEYS:   ${I}

// RECENT_TRANSITIONS
${s.current.join(`
`)||"NONE"}`}m=requestAnimationFrame(_)};return m=requestAnimationFrame(_),()=>{cancelAnimationFrame(m),window.removeEventListener("keydown",c),window.removeEventListener("keyup",f)}},[e,t]),ke.jsx("div",{ref:n,style:{position:"absolute",top:"1cqw",right:"1cqw",color:"#0f0",fontFamily:"monospace",whiteSpace:"pre",textAlign:"left",fontSize:"0.95cqw",lineHeight:"1.4",textShadow:"0 0 5px rgba(0, 255, 0, 0.5)",backgroundColor:"rgba(5, 5, 5, 0.9)",padding:"1.2cqw",borderRadius:"0.2cqw",pointerEvents:"none",zIndex:9999,borderLeft:"3px solid #0f0",minWidth:"22cqw",boxShadow:"0 10px 30px rgba(0,0,0,0.8)",letterSpacing:"0.05cqw"}})},Df={hp:"global_hp",energy:"global_energy"};class pw extends Bf{constructor(e=!1){super(),this.forceReset=e,this.isRendering=!1,this.isUpdating=!1}vm;controller;instanceId="";isLoadedFromSave=!1;async init(){if(this.isInitialized){this.isUpdating=!0,this.isRendering=!0;return}const e=eh.getInstance(),t=Lo.getInstance(),r=so.getInstance();e.activeStateName===this.name&&(this.isLoadedFromSave=!0),this.instanceId=e.prepareForState(this.name),e.setupBuffer(this.logicSchema,this.forceReset),t.prepareForState(this.name),t.setupBuffers(e.sharedBuffer,this.viewSchema);try{await this.internalLoadResources()}catch(s){console.warn(`[${this.name}] Resource load warning:`,s)}this.initMVC(),e.createState(this.name),t.createState(this.name),await this.internalPostInit(e,r),r.unlock(),this.isInitialized=!0,this.isUpdating=!0,this.isRendering=!0}update(e,t){this.isUpdating&&(this.controller&&this.controller.update(),this.vm&&this.vm.update&&this.vm.update())}getView(){return mn.createElement(this.viewComponent,{key:this.instanceId,vm:this.vm,controller:this.controller})}destroy(){const e=so.getInstance(),t=eh.getInstance(),r=Lo.getInstance();this.isUpdating=!1,this.isRendering=!1,this.isInitialized=!1,this.syncGlobalsToSession(e),Pa.getInstance().stopAllByState(this.name),Pa.getInstance().uncacheByState(this.name),mu.getInstance().uncacheByState(this.name),this.controller&&this.controller.destroy(),this.onBeforeDestroy(e,t),t.terminateState(this.name,this.instanceId),r.terminateState(this.name),ou.getInstance().reset()}async onCustomLoadResources(){}onBeforeDestroy(e,t){}async internalLoadResources(){const e=this.getConfig();e.manifestPath&&await Promise.all([mu.getInstance().loadManifest(e.manifestPath,this.name),Pa.getInstance().loadManifest(e.manifestPath,this.name)]),await this.onCustomLoadResources()}async internalPostInit(e,t){const r=this.getConfig();if(this.isLoadedFromSave)e.isInitialized=!0;else if(this.forceReset)t.clearSavableKeys(),e.sendInput(this.name,"INITIALIZE",r);else{const s=this.getSessionOverrides(t),a={...r,...s};e.sendInput(this.name,"INITIALIZE",a)}this.vm&&this.vm.notify&&this.vm.notify(),r.bgmKey&&Pa.getInstance().play(r.bgmKey)}syncGlobalsToSession(e){this.vm&&Object.entries(Df).forEach(([t,r])=>{t in this.vm&&e.set(r,this.vm[t])})}}const UA="modulepreload",GA=function(n){return"/LuckyRepo/"+n},p0={},cu=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let m=function(_){return Promise.all(_.map(w=>Promise.resolve(w).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=c?.nonce||c?.getAttribute("nonce");s=m(t.map(_=>{if(_=GA(_),_ in p0)return;p0[_]=!0;const w=_.endsWith(".css"),d=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${d}`))return;const y=document.createElement("link");if(y.rel=w?"stylesheet":UA,w||(y.as="script"),y.crossOrigin="",y.href=_,f&&y.setAttribute("nonce",f),document.head.appendChild(y),w)return new Promise((b,T)=>{y.addEventListener("load",b),y.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${_}`)))})}))}function a(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return s.then(c=>{for(const f of c||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};var _f={exports:{}},jA=_f.exports,m0;function zA(){return m0||(m0=1,(function(n,e){(function(t,r){n.exports=r()})(jA,function(){var t=function(p,x){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,R){A.__proto__=R}||function(A,R){for(var O in R)Object.prototype.hasOwnProperty.call(R,O)&&(A[O]=R[O])})(p,x)},r=function(){return(r=Object.assign||function(p){for(var x,A=1,R=arguments.length;A<R;A++)for(var O in x=arguments[A])Object.prototype.hasOwnProperty.call(x,O)&&(p[O]=x[O]);return p}).apply(this,arguments)};function s(p,x,A){for(var R,O=0,L=x.length;O<L;O++)!R&&O in x||((R=R||Array.prototype.slice.call(x,0,O))[O]=x[O]);return p.concat(R||Array.prototype.slice.call(x))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Aa,c=Object.keys,f=Array.isArray;function m(p,x){return typeof x!="object"||c(x).forEach(function(A){p[A]=x[A]}),p}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var _=Object.getPrototypeOf,w={}.hasOwnProperty;function d(p,x){return w.call(p,x)}function y(p,x){typeof x=="function"&&(x=x(_(p))),(typeof Reflect>"u"?c:Reflect.ownKeys)(x).forEach(function(A){T(p,A,x[A])})}var b=Object.defineProperty;function T(p,x,A,R){b(p,x,m(A&&d(A,"get")&&typeof A.get=="function"?{get:A.get,set:A.set,configurable:!0}:{value:A,configurable:!0,writable:!0},R))}function I(p){return{from:function(x){return p.prototype=Object.create(x.prototype),T(p.prototype,"constructor",p),{extend:y.bind(null,p.prototype)}}}}var k=Object.getOwnPropertyDescriptor,N=[].slice;function W(p,x,A){return N.call(p,x,A)}function j(p,x){return x(p)}function ee(p){if(!p)throw new Error("Assertion Failed")}function X(p){a.setImmediate?setImmediate(p):setTimeout(p,0)}function de(p,x){if(typeof x=="string"&&d(p,x))return p[x];if(!x)return p;if(typeof x!="string"){for(var A=[],R=0,O=x.length;R<O;++R){var L=de(p,x[R]);A.push(L)}return A}var z=x.indexOf(".");if(z!==-1){var Y=p[x.substr(0,z)];return Y==null?void 0:de(Y,x.substr(z+1))}}function F(p,x,A){if(p&&x!==void 0&&!("isFrozen"in Object&&Object.isFrozen(p)))if(typeof x!="string"&&"length"in x){ee(typeof A!="string"&&"length"in A);for(var R=0,O=x.length;R<O;++R)F(p,x[R],A[R])}else{var L,z,Y=x.indexOf(".");Y!==-1?(L=x.substr(0,Y),(z=x.substr(Y+1))===""?A===void 0?f(p)&&!isNaN(parseInt(L))?p.splice(L,1):delete p[L]:p[L]=A:F(Y=!(Y=p[L])||!d(p,L)?p[L]={}:Y,z,A)):A===void 0?f(p)&&!isNaN(parseInt(x))?p.splice(x,1):delete p[x]:p[x]=A}}function ie(p){var x,A={};for(x in p)d(p,x)&&(A[x]=p[x]);return A}var ye=[].concat;function Ne(p){return ye.apply([],p)}var Li="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ne([8,16,32,64].map(function(p){return["Int","Uint","Float"].map(function(x){return x+p+"Array"})}))).filter(function(p){return a[p]}),Ce=new Set(Li.map(function(p){return a[p]})),ge=null;function _e(p){return ge=new WeakMap,p=(function x(A){if(!A||typeof A!="object")return A;var R=ge.get(A);if(R)return R;if(f(A)){R=[],ge.set(A,R);for(var O=0,L=A.length;O<L;++O)R.push(x(A[O]))}else if(Ce.has(A.constructor))R=A;else{var z,Y=_(A);for(z in R=Y===Object.prototype?{}:Object.create(Y),ge.set(A,R),A)d(A,z)&&(R[z]=x(A[z]))}return R})(p),ge=null,p}var xe={}.toString;function Ke(p){return xe.call(p).slice(8,-1)}var H=typeof Symbol<"u"?Symbol.iterator:"@@iterator",V=typeof H=="symbol"?function(p){var x;return p!=null&&(x=p[H])&&x.apply(p)}:function(){return null};function D(p,x){return x=p.indexOf(x),0<=x&&p.splice(x,1),0<=x}var K={};function G(p){var x,A,R,O;if(arguments.length===1){if(f(p))return p.slice();if(this===K&&typeof p=="string")return[p];if(O=V(p)){for(A=[];!(R=O.next()).done;)A.push(R.value);return A}if(p==null)return[p];if(typeof(x=p.length)!="number")return[p];for(A=new Array(x);x--;)A[x]=p[x];return A}for(x=arguments.length,A=new Array(x);x--;)A[x]=arguments[x];return A}var U=typeof Symbol<"u"?function(p){return p[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ms=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ln=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ms),q={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function le(p,x){this.name=p,this.message=x}function Te(p,x){return p+". Errors: "+Object.keys(x).map(function(A){return x[A].toString()}).filter(function(A,R,O){return O.indexOf(A)===R}).join(`
`)}function Oe(p,x,A,R){this.failures=x,this.failedKeys=R,this.successCount=A,this.message=Te(p,x)}function Fe(p,x){this.name="BulkError",this.failures=Object.keys(x).map(function(A){return x[A]}),this.failuresByPos=x,this.message=Te(p,this.failures)}I(le).from(Error).extend({toString:function(){return this.name+": "+this.message}}),I(Oe).from(le),I(Fe).from(le);var He=ln.reduce(function(p,x){return p[x]=x+"Error",p},{}),Je=le,Re=ln.reduce(function(p,x){var A=x+"Error";function R(O,L){this.name=A,O?typeof O=="string"?(this.message="".concat(O).concat(L?`
 `+L:""),this.inner=L||null):typeof O=="object"&&(this.message="".concat(O.name," ").concat(O.message),this.inner=O):(this.message=q[x]||A,this.inner=null)}return I(R).from(Je),p[x]=R,p},{});Re.Syntax=SyntaxError,Re.Type=TypeError,Re.Range=RangeError;var je=Ms.reduce(function(p,x){return p[x+"Error"]=Re[x],p},{}),ot=ln.reduce(function(p,x){return["Syntax","Type","Range"].indexOf(x)===-1&&(p[x+"Error"]=Re[x]),p},{});function et(){}function gt(p){return p}function Ut(p,x){return p==null||p===gt?x:function(A){return x(p(A))}}function dt(p,x){return function(){p.apply(this,arguments),x.apply(this,arguments)}}function vt(p,x){return p===et?x:function(){var A=p.apply(this,arguments);A!==void 0&&(arguments[0]=A);var R=this.onsuccess,O=this.onerror;this.onsuccess=null,this.onerror=null;var L=x.apply(this,arguments);return R&&(this.onsuccess=this.onsuccess?dt(R,this.onsuccess):R),O&&(this.onerror=this.onerror?dt(O,this.onerror):O),L!==void 0?L:A}}function pr(p,x){return p===et?x:function(){p.apply(this,arguments);var A=this.onsuccess,R=this.onerror;this.onsuccess=this.onerror=null,x.apply(this,arguments),A&&(this.onsuccess=this.onsuccess?dt(A,this.onsuccess):A),R&&(this.onerror=this.onerror?dt(R,this.onerror):R)}}function Tr(p,x){return p===et?x:function(A){var R=p.apply(this,arguments);m(A,R);var O=this.onsuccess,L=this.onerror;return this.onsuccess=null,this.onerror=null,A=x.apply(this,arguments),O&&(this.onsuccess=this.onsuccess?dt(O,this.onsuccess):O),L&&(this.onerror=this.onerror?dt(L,this.onerror):L),R===void 0?A===void 0?void 0:A:m(R,A)}}function Ni(p,x){return p===et?x:function(){return x.apply(this,arguments)!==!1&&p.apply(this,arguments)}}function Dr(p,x){return p===et?x:function(){var A=p.apply(this,arguments);if(A&&typeof A.then=="function"){for(var R=this,O=arguments.length,L=new Array(O);O--;)L[O]=arguments[O];return A.then(function(){return x.apply(R,L)})}return x.apply(this,arguments)}}ot.ModifyError=Oe,ot.DexieError=le,ot.BulkError=Fe;var cr=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function yi(p){cr=p}var zn={},In=100,Li=typeof Promise>"u"?[]:(function(){var p=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[p,_(p),p];var x=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[x,_(x),p]})(),Ms=Li[0],ln=Li[1],Li=Li[2],ln=ln&&ln.then,Zn=Ms&&Ms.constructor,Os=!!Li,Jn=function(p,x){Ae.push([p,x]),_i&&(queueMicrotask(xi),_i=!1)},vi=!0,_i=!0,gs=[],oo=[],Ds=gt,Hn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:et,pgp:!1,env:{},finalize:et},te=Hn,Ae=[],Bt=0,Zt=[];function ze(p){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var x=this._PSD=te;if(typeof p!="function"){if(p!==zn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ei(this,this._value))}this._state=null,this._value=null,++x.ref,(function A(R,O){try{O(function(L){if(R._state===null){if(L===R)throw new TypeError("A promise cannot be resolved with itself.");var z=R._lib&&Rr();L&&typeof L.then=="function"?A(R,function(Y,ne){L instanceof ze?L._then(Y,ne):L.then(Y,ne)}):(R._state=!0,R._value=L,Wr(R)),z&&wi()}},ei.bind(null,R))}catch(L){ei(R,L)}})(this,p)}var Rt={get:function(){var p=te,x=ri;function A(R,O){var L=this,z=!p.global&&(p!==te||x!==ri),Y=z&&!$r(),ne=new ze(function(re,he){Rn(L,new gn(La(R,p,z,Y),La(O,p,z,Y),re,he,p))});return this._consoleTask&&(ne._consoleTask=this._consoleTask),ne}return A.prototype=zn,A},set:function(p){T(this,"then",p&&p.prototype===zn?Rt:{get:function(){return p},set:Rt.set})}};function gn(p,x,A,R,O){this.onFulfilled=typeof p=="function"?p:null,this.onRejected=typeof x=="function"?x:null,this.resolve=A,this.reject=R,this.psd=O}function ei(p,x){var A,R;oo.push(x),p._state===null&&(A=p._lib&&Rr(),x=Ds(x),p._state=!1,p._value=x,R=p,gs.some(function(O){return O._value===R._value})||gs.push(R),Wr(p),A&&wi())}function Wr(p){var x=p._listeners;p._listeners=[];for(var A=0,R=x.length;A<R;++A)Rn(p,x[A]);var O=p._PSD;--O.ref||O.finalize(),Bt===0&&(++Bt,Jn(function(){--Bt==0&&Fi()},[]))}function Rn(p,x){if(p._state!==null){var A=p._state?x.onFulfilled:x.onRejected;if(A===null)return(p._state?x.resolve:x.reject)(p._value);++x.psd.ref,++Bt,Jn(Vo,[A,p,x])}else p._listeners.push(x)}function Vo(p,x,A){try{var R,O=x._value;!x._state&&oo.length&&(oo=[]),R=cr&&x._consoleTask?x._consoleTask.run(function(){return p(O)}):p(O),x._state||oo.indexOf(O)!==-1||(function(L){for(var z=gs.length;z;)if(gs[--z]._value===L._value)return gs.splice(z,1)})(x),A.resolve(R)}catch(L){A.reject(L)}finally{--Bt==0&&Fi(),--A.psd.ref||A.psd.finalize()}}function xi(){Vn(Hn,function(){Rr()&&wi()})}function Rr(){var p=vi;return _i=vi=!1,p}function wi(){var p,x,A;do for(;0<Ae.length;)for(p=Ae,Ae=[],A=p.length,x=0;x<A;++x){var R=p[x];R[0].apply(null,R[1])}while(0<Ae.length);_i=vi=!0}function Fi(){var p=gs;gs=[],p.forEach(function(R){R._PSD.onunhandled.call(null,R._value,R)});for(var x=Zt.slice(0),A=x.length;A;)x[--A]()}function ys(p){return new ze(zn,!1,p)}function Kt(p,x){var A=te;return function(){var R=Rr(),O=te;try{return ii(A,!0),p.apply(this,arguments)}catch(L){x&&x(L)}finally{ii(O,!1),R&&wi()}}}y(ze.prototype,{then:Rt,_then:function(p,x){Rn(this,new gn(null,null,p,x,te))},catch:function(p){if(arguments.length===1)return this.then(null,p);var x=p,A=arguments[1];return typeof x=="function"?this.then(null,function(R){return(R instanceof x?A:ys)(R)}):this.then(null,function(R){return(R&&R.name===x?A:ys)(R)})},finally:function(p){return this.then(function(x){return ze.resolve(p()).then(function(){return x})},function(x){return ze.resolve(p()).then(function(){return ys(x)})})},timeout:function(p,x){var A=this;return p<1/0?new ze(function(R,O){var L=setTimeout(function(){return O(new Re.Timeout(x))},p);A.then(R,O).finally(clearTimeout.bind(null,L))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&T(ze.prototype,Symbol.toStringTag,"Dexie.Promise"),Hn.env=Bi(),y(ze,{all:function(){var p=G.apply(null,arguments).map(Ns);return new ze(function(x,A){p.length===0&&x([]);var R=p.length;p.forEach(function(O,L){return ze.resolve(O).then(function(z){p[L]=z,--R||x(p)},A)})})},resolve:function(p){return p instanceof ze?p:p&&typeof p.then=="function"?new ze(function(x,A){p.then(x,A)}):new ze(zn,!0,p)},reject:ys,race:function(){var p=G.apply(null,arguments).map(Ns);return new ze(function(x,A){p.map(function(R){return ze.resolve(R).then(x,A)})})},PSD:{get:function(){return te},set:function(p){return te=p}},totalEchoes:{get:function(){return ri}},newPSD:ni,usePSD:Vn,scheduler:{get:function(){return Jn},set:function(p){Jn=p}},rejectionMapper:{get:function(){return Ds},set:function(p){Ds=p}},follow:function(p,x){return new ze(function(A,R){return ni(function(O,L){var z=te;z.unhandleds=[],z.onunhandled=L,z.finalize=dt(function(){var Y,ne=this;Y=function(){ne.unhandleds.length===0?O():L(ne.unhandleds[0])},Zt.push(function re(){Y(),Zt.splice(Zt.indexOf(re),1)}),++Bt,Jn(function(){--Bt==0&&Fi()},[])},z.finalize),p()},x,A,R)})}}),Zn&&(Zn.allSettled&&T(ze,"allSettled",function(){var p=G.apply(null,arguments).map(Ns);return new ze(function(x){p.length===0&&x([]);var A=p.length,R=new Array(A);p.forEach(function(O,L){return ze.resolve(O).then(function(z){return R[L]={status:"fulfilled",value:z}},function(z){return R[L]={status:"rejected",reason:z}}).then(function(){return--A||x(R)})})})}),Zn.any&&typeof AggregateError<"u"&&T(ze,"any",function(){var p=G.apply(null,arguments).map(Ns);return new ze(function(x,A){p.length===0&&A(new AggregateError([]));var R=p.length,O=new Array(R);p.forEach(function(L,z){return ze.resolve(L).then(function(Y){return x(Y)},function(Y){O[z]=Y,--R||A(new AggregateError(O))})})})}),Zn.withResolvers&&(ze.withResolvers=Zn.withResolvers));var wr={awaits:0,echoes:0,id:0},ti=0,bi=[],Si=0,ri=0,xl=0;function ni(p,x,A,R){var O=te,L=Object.create(O);return L.parent=O,L.ref=0,L.global=!1,L.id=++xl,Hn.env,L.env=Os?{Promise:ze,PromiseProp:{value:ze,configurable:!0,writable:!0},all:ze.all,race:ze.race,allSettled:ze.allSettled,any:ze.any,resolve:ze.resolve,reject:ze.reject}:{},x&&m(L,x),++O.ref,L.finalize=function(){--this.parent.ref||this.parent.finalize()},R=Vn(L,p,A,R),L.ref===0&&L.finalize(),R}function vs(){return wr.id||(wr.id=++ti),++wr.awaits,wr.echoes+=In,wr.id}function $r(){return!!wr.awaits&&(--wr.awaits==0&&(wr.id=0),wr.echoes=wr.awaits*In,!0)}function Ns(p){return wr.echoes&&p&&p.constructor===Zn?(vs(),p.then(function(x){return $r(),x},function(x){return $r(),kr(x)})):p}function wl(){var p=bi[bi.length-1];bi.pop(),ii(p,!1)}function ii(p,x){var A,R=te;(x?!wr.echoes||Si++&&p===te:!Si||--Si&&p===te)||queueMicrotask(x?(function(O){++ri,wr.echoes&&--wr.echoes!=0||(wr.echoes=wr.awaits=wr.id=0),bi.push(te),ii(O,!0)}).bind(null,p):wl),p!==te&&(te=p,R===Hn&&(Hn.env=Bi()),Os&&(A=Hn.env.Promise,x=p.env,(R.global||p.global)&&(Object.defineProperty(a,"Promise",x.PromiseProp),A.all=x.all,A.race=x.race,A.resolve=x.resolve,A.reject=x.reject,x.allSettled&&(A.allSettled=x.allSettled),x.any&&(A.any=x.any))))}function Bi(){var p=a.Promise;return Os?{Promise:p,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:p.all,race:p.race,allSettled:p.allSettled,any:p.any,resolve:p.resolve,reject:p.reject}:{}}function Vn(p,x,A,R,O){var L=te;try{return ii(p,!0),x(A,R,O)}finally{ii(L,!1)}}function La(p,x,A,R){return typeof p!="function"?p:function(){var O=te;A&&vs(),ii(x,!0);try{return p.apply(this,arguments)}finally{ii(O,!1),R&&queueMicrotask($r)}}}function ao(p){Promise===Zn&&wr.echoes===0?Si===0?p():enqueueNativeMicroTask(p):setTimeout(p,0)}(""+ln).indexOf("[native code]")===-1&&(vs=$r=et);var kr=ze.reject,lo="",rr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Wo="String expected.",Ui=[],uo="__dbnames",$o="readonly",Fa="readwrite";function Wn(p,x){return p?x?function(){return p.apply(this,arguments)&&x.apply(this,arguments)}:p:x}var si={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function $t(p){return typeof p!="string"||/\./.test(p)?function(x){return x}:function(x){return x[p]===void 0&&p in x&&delete(x=_e(x))[p],x}}function hr(){throw Re.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Pt(p,x){try{var A=tn(p),R=tn(x);if(A!==R)return A==="Array"?1:R==="Array"?-1:A==="binary"?1:R==="binary"?-1:A==="string"?1:R==="string"?-1:A==="Date"?1:R!=="Date"?NaN:-1;switch(A){case"number":case"Date":case"string":return x<p?1:p<x?-1:0;case"binary":return(function(O,L){for(var z=O.length,Y=L.length,ne=z<Y?z:Y,re=0;re<ne;++re)if(O[re]!==L[re])return O[re]<L[re]?-1:1;return z===Y?0:z<Y?-1:1})(wn(p),wn(x));case"Array":return(function(O,L){for(var z=O.length,Y=L.length,ne=z<Y?z:Y,re=0;re<ne;++re){var he=Pt(O[re],L[re]);if(he!==0)return he}return z===Y?0:z<Y?-1:1})(p,x)}}catch{}return NaN}function tn(p){var x=typeof p;return x!="object"?x:ArrayBuffer.isView(p)?"binary":(p=Ke(p),p==="ArrayBuffer"?"binary":p)}function wn(p){return p instanceof Uint8Array?p:ArrayBuffer.isView(p)?new Uint8Array(p.buffer,p.byteOffset,p.byteLength):new Uint8Array(p)}function Gi(p,x,A){var R=p.schema.yProps;return R?(x&&0<A.numFailures&&(x=x.filter(function(O,L){return!A.failures[L]})),Promise.all(R.map(function(O){return O=O.updatesTable,x?p.db.table(O).where("k").anyOf(x).delete():p.db.table(O).clear()})).then(function(){return A})):A}var $n=(rn.prototype.execute=function(p){var x=this["@@propmod"];if(x.add!==void 0){var A=x.add;if(f(A))return s(s([],f(p)?p:[],!0),A).sort();if(typeof A=="number")return(Number(p)||0)+A;if(typeof A=="bigint")try{return BigInt(p)+A}catch{return BigInt(0)+A}throw new TypeError("Invalid term ".concat(A))}if(x.remove!==void 0){var R=x.remove;if(f(R))return f(p)?p.filter(function(O){return!R.includes(O)}).sort():[];if(typeof R=="number")return Number(p)-R;if(typeof R=="bigint")try{return BigInt(p)-R}catch{return BigInt(0)-R}throw new TypeError("Invalid subtrahend ".concat(R))}return A=(A=x.replacePrefix)===null||A===void 0?void 0:A[0],A&&typeof p=="string"&&p.startsWith(A)?x.replacePrefix[1]+p.substring(A.length):p},rn);function rn(p){this["@@propmod"]=p}function Ls(p,x){for(var A=c(x),R=A.length,O=!1,L=0;L<R;++L){var z=A[L],Y=x[z],ne=de(p,z);Y instanceof $n?(F(p,z,Y.execute(ne)),O=!0):ne!==Y&&(F(p,z,Y),O=!0)}return O}var Xo=(dr.prototype._trans=function(p,x,A){var R=this._tx||te.trans,O=this.name,L=cr&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(p==="readonly"?"read":"write"," ").concat(this.name));function z(re,he,Z){if(!Z.schema[O])throw new Re.NotFound("Table "+O+" not part of transaction");return x(Z.idbtrans,Z)}var Y=Rr();try{var ne=R&&R.db._novip===this.db._novip?R===te.trans?R._promise(p,z,A):ni(function(){return R._promise(p,z,A)},{trans:R,transless:te.transless||te}):(function re(he,Z,fe,J){if(he.idbdb&&(he._state.openComplete||te.letThrough||he._vip)){var oe=he._createTransaction(Z,fe,he._dbSchema);try{oe.create(),he._state.PR1398_maxLoop=3}catch(se){return se.name===He.InvalidState&&he.isOpen()&&0<--he._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),he.close({disableAutoOpen:!1}),he.open().then(function(){return re(he,Z,fe,J)})):kr(se)}return oe._promise(Z,function(se,me){return ni(function(){return te.trans=oe,J(se,me,oe)})}).then(function(se){if(Z==="readwrite")try{oe.idbtrans.commit()}catch{}return Z==="readonly"?se:oe._completion.then(function(){return se})})}if(he._state.openComplete)return kr(new Re.DatabaseClosed(he._state.dbOpenError));if(!he._state.isBeingOpened){if(!he._state.autoOpen)return kr(new Re.DatabaseClosed);he.open().catch(et)}return he._state.dbReadyPromise.then(function(){return re(he,Z,fe,J)})})(this.db,p,[this.name],z);return L&&(ne._consoleTask=L,ne=ne.catch(function(re){return console.trace(re),kr(re)})),ne}finally{Y&&wi()}},dr.prototype.get=function(p,x){var A=this;return p&&p.constructor===Object?this.where(p).first(x):p==null?kr(new Re.Type("Invalid argument to Table.get()")):this._trans("readonly",function(R){return A.core.get({trans:R,key:p}).then(function(O){return A.hook.reading.fire(O)})}).then(x)},dr.prototype.where=function(p){if(typeof p=="string")return new this.db.WhereClause(this,p);if(f(p))return new this.db.WhereClause(this,"[".concat(p.join("+"),"]"));var x=c(p);if(x.length===1)return this.where(x[0]).equals(p[x[0]]);var A=this.schema.indexes.concat(this.schema.primKey).filter(function(Y){if(Y.compound&&x.every(function(re){return 0<=Y.keyPath.indexOf(re)})){for(var ne=0;ne<x.length;++ne)if(x.indexOf(Y.keyPath[ne])===-1)return!1;return!0}return!1}).sort(function(Y,ne){return Y.keyPath.length-ne.keyPath.length})[0];if(A&&this.db._maxKey!==lo){var L=A.keyPath.slice(0,x.length);return this.where(L).equals(L.map(function(ne){return p[ne]}))}!A&&cr&&console.warn("The query ".concat(JSON.stringify(p)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(x.join("+"),"]"));var R=this.schema.idxByName;function O(Y,ne){return Pt(Y,ne)===0}var z=x.reduce(function(Z,ne){var re=Z[0],he=Z[1],Z=R[ne],fe=p[ne];return[re||Z,re||!Z?Wn(he,Z&&Z.multi?function(J){return J=de(J,ne),f(J)&&J.some(function(oe){return O(fe,oe)})}:function(J){return O(fe,de(J,ne))}):he]},[null,null]),L=z[0],z=z[1];return L?this.where(L.name).equals(p[L.keyPath]).filter(z):A?this.filter(z):this.where(x).equals("")},dr.prototype.filter=function(p){return this.toCollection().and(p)},dr.prototype.count=function(p){return this.toCollection().count(p)},dr.prototype.offset=function(p){return this.toCollection().offset(p)},dr.prototype.limit=function(p){return this.toCollection().limit(p)},dr.prototype.each=function(p){return this.toCollection().each(p)},dr.prototype.toArray=function(p){return this.toCollection().toArray(p)},dr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},dr.prototype.orderBy=function(p){return new this.db.Collection(new this.db.WhereClause(this,f(p)?"[".concat(p.join("+"),"]"):p))},dr.prototype.reverse=function(){return this.toCollection().reverse()},dr.prototype.mapToClass=function(p){var x,A=this.db,R=this.name;function O(){return x!==null&&x.apply(this,arguments)||this}(this.schema.mappedClass=p).prototype instanceof hr&&((function(ne,re){if(typeof re!="function"&&re!==null)throw new TypeError("Class extends value "+String(re)+" is not a constructor or null");function he(){this.constructor=ne}t(ne,re),ne.prototype=re===null?Object.create(re):(he.prototype=re.prototype,new he)})(O,x=p),Object.defineProperty(O.prototype,"db",{get:function(){return A},enumerable:!1,configurable:!0}),O.prototype.table=function(){return R},p=O);for(var L=new Set,z=p.prototype;z;z=_(z))Object.getOwnPropertyNames(z).forEach(function(ne){return L.add(ne)});function Y(ne){if(!ne)return ne;var re,he=Object.create(p.prototype);for(re in ne)if(!L.has(re))try{he[re]=ne[re]}catch{}return he}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=Y,this.hook("reading",Y),p},dr.prototype.defineClass=function(){return this.mapToClass(function(p){m(this,p)})},dr.prototype.add=function(p,x){var A=this,R=this.schema.primKey,O=R.auto,L=R.keyPath,z=p;return L&&O&&(z=$t(L)(p)),this._trans("readwrite",function(Y){return A.core.mutate({trans:Y,type:"add",keys:x!=null?[x]:null,values:[z]})}).then(function(Y){return Y.numFailures?ze.reject(Y.failures[0]):Y.lastResult}).then(function(Y){if(L)try{F(p,L,Y)}catch{}return Y})},dr.prototype.upsert=function(p,x){var A=this,R=this.schema.primKey.keyPath;return this._trans("readwrite",function(O){return A.core.get({trans:O,key:p}).then(function(L){var z=L??{};return Ls(z,x),R&&F(z,R,p),A.core.mutate({trans:O,type:"put",values:[z],keys:[p],upsert:!0,updates:{keys:[p],changeSpecs:[x]}}).then(function(Y){return Y.numFailures?ze.reject(Y.failures[0]):!!L})})})},dr.prototype.update=function(p,x){return typeof p!="object"||f(p)?this.where(":id").equals(p).modify(x):(p=de(p,this.schema.primKey.keyPath),p===void 0?kr(new Re.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(p).modify(x))},dr.prototype.put=function(p,x){var A=this,R=this.schema.primKey,O=R.auto,L=R.keyPath,z=p;return L&&O&&(z=$t(L)(p)),this._trans("readwrite",function(Y){return A.core.mutate({trans:Y,type:"put",values:[z],keys:x!=null?[x]:null})}).then(function(Y){return Y.numFailures?ze.reject(Y.failures[0]):Y.lastResult}).then(function(Y){if(L)try{F(p,L,Y)}catch{}return Y})},dr.prototype.delete=function(p){var x=this;return this._trans("readwrite",function(A){return x.core.mutate({trans:A,type:"delete",keys:[p]}).then(function(R){return Gi(x,[p],R)}).then(function(R){return R.numFailures?ze.reject(R.failures[0]):void 0})})},dr.prototype.clear=function(){var p=this;return this._trans("readwrite",function(x){return p.core.mutate({trans:x,type:"deleteRange",range:si}).then(function(A){return Gi(p,null,A)})}).then(function(x){return x.numFailures?ze.reject(x.failures[0]):void 0})},dr.prototype.bulkGet=function(p){var x=this;return this._trans("readonly",function(A){return x.core.getMany({keys:p,trans:A}).then(function(R){return R.map(function(O){return x.hook.reading.fire(O)})})})},dr.prototype.bulkAdd=function(p,x,A){var R=this,O=Array.isArray(x)?x:void 0,L=(A=A||(O?void 0:x))?A.allKeys:void 0;return this._trans("readwrite",function(z){var re=R.schema.primKey,Y=re.auto,re=re.keyPath;if(re&&O)throw new Re.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(O&&O.length!==p.length)throw new Re.InvalidArgument("Arguments objects and keys must have the same length");var ne=p.length,re=re&&Y?p.map($t(re)):p;return R.core.mutate({trans:z,type:"add",keys:O,values:re,wantResults:L}).then(function(oe){var Z=oe.numFailures,fe=oe.results,J=oe.lastResult,oe=oe.failures;if(Z===0)return L?fe:J;throw new Fe("".concat(R.name,".bulkAdd(): ").concat(Z," of ").concat(ne," operations failed"),oe)})})},dr.prototype.bulkPut=function(p,x,A){var R=this,O=Array.isArray(x)?x:void 0,L=(A=A||(O?void 0:x))?A.allKeys:void 0;return this._trans("readwrite",function(z){var re=R.schema.primKey,Y=re.auto,re=re.keyPath;if(re&&O)throw new Re.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(O&&O.length!==p.length)throw new Re.InvalidArgument("Arguments objects and keys must have the same length");var ne=p.length,re=re&&Y?p.map($t(re)):p;return R.core.mutate({trans:z,type:"put",keys:O,values:re,wantResults:L}).then(function(oe){var Z=oe.numFailures,fe=oe.results,J=oe.lastResult,oe=oe.failures;if(Z===0)return L?fe:J;throw new Fe("".concat(R.name,".bulkPut(): ").concat(Z," of ").concat(ne," operations failed"),oe)})})},dr.prototype.bulkUpdate=function(p){var x=this,A=this.core,R=p.map(function(z){return z.key}),O=p.map(function(z){return z.changes}),L=[];return this._trans("readwrite",function(z){return A.getMany({trans:z,keys:R,cache:"clone"}).then(function(Y){var ne=[],re=[];p.forEach(function(Z,fe){var J=Z.key,oe=Z.changes,se=Y[fe];if(se){for(var me=0,ve=Object.keys(oe);me<ve.length;me++){var be=ve[me],De=oe[be];if(be===x.schema.primKey.keyPath){if(Pt(De,J)!==0)throw new Re.Constraint("Cannot update primary key in bulkUpdate()")}else F(se,be,De)}L.push(fe),ne.push(J),re.push(se)}});var he=ne.length;return A.mutate({trans:z,type:"put",keys:ne,values:re,updates:{keys:R,changeSpecs:O}}).then(function(Z){var fe=Z.numFailures,J=Z.failures;if(fe===0)return he;for(var oe=0,se=Object.keys(J);oe<se.length;oe++){var me,ve=se[oe],be=L[Number(ve)];be!=null&&(me=J[ve],delete J[ve],J[be]=me)}throw new Fe("".concat(x.name,".bulkUpdate(): ").concat(fe," of ").concat(he," operations failed"),J)})})})},dr.prototype.bulkDelete=function(p){var x=this,A=p.length;return this._trans("readwrite",function(R){return x.core.mutate({trans:R,type:"delete",keys:p}).then(function(O){return Gi(x,p,O)})}).then(function(z){var O=z.numFailures,L=z.lastResult,z=z.failures;if(O===0)return L;throw new Fe("".concat(x.name,".bulkDelete(): ").concat(O," of ").concat(A," operations failed"),z)})},dr);function dr(){}function Fs(p){function x(z,Y){if(Y){for(var ne=arguments.length,re=new Array(ne-1);--ne;)re[ne-1]=arguments[ne];return A[z].subscribe.apply(null,re),p}if(typeof z=="string")return A[z]}var A={};x.addEventType=L;for(var R=1,O=arguments.length;R<O;++R)L(arguments[R]);return x;function L(z,Y,ne){if(typeof z!="object"){var re;Y=Y||Ni;var he={subscribers:[],fire:ne=ne||et,subscribe:function(Z){he.subscribers.indexOf(Z)===-1&&(he.subscribers.push(Z),he.fire=Y(he.fire,Z))},unsubscribe:function(Z){he.subscribers=he.subscribers.filter(function(fe){return fe!==Z}),he.fire=he.subscribers.reduce(Y,ne)}};return A[z]=x[z]=he}c(re=z).forEach(function(Z){var fe=re[Z];if(f(fe))L(Z,re[Z][0],re[Z][1]);else{if(fe!=="asap")throw new Re.InvalidArgument("Invalid event config");var J=L(Z,gt,function(){for(var oe=arguments.length,se=new Array(oe);oe--;)se[oe]=arguments[oe];J.subscribers.forEach(function(me){X(function(){me.apply(null,se)})})})}})}}function Bs(p,x){return I(x).from({prototype:p}),x}function nn(p,x){return!(p.filter||p.algorithm||p.or)&&(x?p.justLimit:!p.replayFilter)}function Ba(p,x){p.filter=Wn(p.filter,x)}function co(p,x,A){var R=p.replayFilter;p.replayFilter=R?function(){return Wn(R(),x())}:x,p.justLimit=A&&!R}function qo(p,x){if(p.isPrimKey)return x.primaryKey;var A=x.getIndexByKeyPath(p.index);if(!A)throw new Re.Schema("KeyPath "+p.index+" on object store "+x.name+" is not indexed");return A}function Ko(p,x,A){var R=qo(p,x.schema);return x.openCursor({trans:A,values:!p.keysOnly,reverse:p.dir==="prev",unique:!!p.unique,query:{index:R,range:p.range}})}function Xt(p,x,A,R){var O=p.replayFilter?Wn(p.filter,p.replayFilter()):p.filter;if(p.or){var L={},z=function(Y,ne,re){var he,Z;O&&!O(ne,re,function(fe){return ne.stop(fe)},function(fe){return ne.fail(fe)})||((Z=""+(he=ne.primaryKey))=="[object ArrayBuffer]"&&(Z=""+new Uint8Array(he)),d(L,Z)||(L[Z]=!0,x(Y,ne,re)))};return Promise.all([p.or._iterate(z,A),Yo(Ko(p,R,A),p.algorithm,z,!p.keysOnly&&p.valueMapper)])}return Yo(Ko(p,R,A),Wn(p.algorithm,O),x,!p.keysOnly&&p.valueMapper)}function Yo(p,x,A,R){var O=Kt(R?function(L,z,Y){return A(R(L),z,Y)}:A);return p.then(function(L){if(L)return L.start(function(){var z=function(){return L.continue()};x&&!x(L,function(Y){return z=Y},function(Y){L.stop(Y),z=et},function(Y){L.fail(Y),z=et})||O(L.value,L,function(Y){return z=Y}),z()})})}var hc=(qt.prototype._read=function(p,x){var A=this._ctx;return A.error?A.table._trans(null,kr.bind(null,A.error)):A.table._trans("readonly",p).then(x)},qt.prototype._write=function(p){var x=this._ctx;return x.error?x.table._trans(null,kr.bind(null,x.error)):x.table._trans("readwrite",p,"locked")},qt.prototype._addAlgorithm=function(p){var x=this._ctx;x.algorithm=Wn(x.algorithm,p)},qt.prototype._iterate=function(p,x){return Xt(this._ctx,p,x,this._ctx.table.core)},qt.prototype.clone=function(p){var x=Object.create(this.constructor.prototype),A=Object.create(this._ctx);return p&&m(A,p),x._ctx=A,x},qt.prototype.raw=function(){return this._ctx.valueMapper=null,this},qt.prototype.each=function(p){var x=this._ctx;return this._read(function(A){return Xt(x,p,A,x.table.core)})},qt.prototype.count=function(p){var x=this;return this._read(function(A){var R=x._ctx,O=R.table.core;if(nn(R,!0))return O.count({trans:A,query:{index:qo(R,O.schema),range:R.range}}).then(function(z){return Math.min(z,R.limit)});var L=0;return Xt(R,function(){return++L,!1},A,O).then(function(){return L})}).then(p)},qt.prototype.sortBy=function(p,x){var A=p.split(".").reverse(),R=A[0],O=A.length-1;function L(ne,re){return re?L(ne[A[re]],re-1):ne[R]}var z=this._ctx.dir==="next"?1:-1;function Y(ne,re){return Pt(L(ne,O),L(re,O))*z}return this.toArray(function(ne){return ne.sort(Y)}).then(x)},qt.prototype.toArray=function(p){var x=this;return this._read(function(A){var R=x._ctx;if(R.dir==="next"&&nn(R,!0)&&0<R.limit){var O=R.valueMapper,L=qo(R,R.table.core.schema);return R.table.core.query({trans:A,limit:R.limit,values:!0,query:{index:L,range:R.range}}).then(function(Y){return Y=Y.result,O?Y.map(O):Y})}var z=[];return Xt(R,function(Y){return z.push(Y)},A,R.table.core).then(function(){return z})},p)},qt.prototype.offset=function(p){var x=this._ctx;return p<=0||(x.offset+=p,nn(x)?co(x,function(){var A=p;return function(R,O){return A===0||(A===1?--A:O(function(){R.advance(A),A=0}),!1)}}):co(x,function(){var A=p;return function(){return--A<0}})),this},qt.prototype.limit=function(p){return this._ctx.limit=Math.min(this._ctx.limit,p),co(this._ctx,function(){var x=p;return function(A,R,O){return--x<=0&&R(O),0<=x}},!0),this},qt.prototype.until=function(p,x){return Ba(this._ctx,function(A,R,O){return!p(A.value)||(R(O),x)}),this},qt.prototype.first=function(p){return this.limit(1).toArray(function(x){return x[0]}).then(p)},qt.prototype.last=function(p){return this.reverse().first(p)},qt.prototype.filter=function(p){var x;return Ba(this._ctx,function(A){return p(A.value)}),(x=this._ctx).isMatch=Wn(x.isMatch,p),this},qt.prototype.and=function(p){return this.filter(p)},qt.prototype.or=function(p){return new this.db.WhereClause(this._ctx.table,p,this)},qt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},qt.prototype.desc=function(){return this.reverse()},qt.prototype.eachKey=function(p){var x=this._ctx;return x.keysOnly=!x.isMatch,this.each(function(A,R){p(R.key,R)})},qt.prototype.eachUniqueKey=function(p){return this._ctx.unique="unique",this.eachKey(p)},qt.prototype.eachPrimaryKey=function(p){var x=this._ctx;return x.keysOnly=!x.isMatch,this.each(function(A,R){p(R.primaryKey,R)})},qt.prototype.keys=function(p){var x=this._ctx;x.keysOnly=!x.isMatch;var A=[];return this.each(function(R,O){A.push(O.key)}).then(function(){return A}).then(p)},qt.prototype.primaryKeys=function(p){var x=this._ctx;if(x.dir==="next"&&nn(x,!0)&&0<x.limit)return this._read(function(R){var O=qo(x,x.table.core.schema);return x.table.core.query({trans:R,values:!1,limit:x.limit,query:{index:O,range:x.range}})}).then(function(R){return R.result}).then(p);x.keysOnly=!x.isMatch;var A=[];return this.each(function(R,O){A.push(O.primaryKey)}).then(function(){return A}).then(p)},qt.prototype.uniqueKeys=function(p){return this._ctx.unique="unique",this.keys(p)},qt.prototype.firstKey=function(p){return this.limit(1).keys(function(x){return x[0]}).then(p)},qt.prototype.lastKey=function(p){return this.reverse().firstKey(p)},qt.prototype.distinct=function(){var p=this._ctx,p=p.index&&p.table.schema.idxByName[p.index];if(!p||!p.multi)return this;var x={};return Ba(this._ctx,function(O){var R=O.primaryKey.toString(),O=d(x,R);return x[R]=!0,!O}),this},qt.prototype.modify=function(p){var x=this,A=this._ctx;return this._write(function(R){var O=typeof p=="function"?p:function(se){return Ls(se,p)},L=A.table.core,re=L.schema.primaryKey,z=re.outbound,Y=re.extractKey,ne=200,re=x.db._options.modifyChunkSize;re&&(ne=typeof re=="object"?re[L.name]||re["*"]||200:re);function he(se,be){var ve=be.failures,be=be.numFailures;fe+=se-be;for(var De=0,Me=c(ve);De<Me.length;De++){var Qe=Me[De];Z.push(ve[Qe])}}var Z=[],fe=0,J=[],oe=p===bl;return x.clone().primaryKeys().then(function(se){function me(be){var De=Math.min(ne,se.length-be),Me=se.slice(be,be+De);return(oe?Promise.resolve([]):L.getMany({trans:R,keys:Me,cache:"immutable"})).then(function(Qe){var st=[],Xe=[],We=z?[]:null,Ze=oe?Me:[];if(!oe)for(var rt=0;rt<De;++rt){var ut=Qe[rt],Dt={value:_e(ut),primKey:se[be+rt]};O.call(Dt,Dt.value,Dt)!==!1&&(Dt.value==null?Ze.push(se[be+rt]):z||Pt(Y(ut),Y(Dt.value))===0?(Xe.push(Dt.value),z&&We.push(se[be+rt])):(Ze.push(se[be+rt]),st.push(Dt.value)))}return Promise.resolve(0<st.length&&L.mutate({trans:R,type:"add",values:st}).then(function(Ft){for(var jt in Ft.failures)Ze.splice(parseInt(jt),1);he(st.length,Ft)})).then(function(){return(0<Xe.length||ve&&typeof p=="object")&&L.mutate({trans:R,type:"put",keys:We,values:Xe,criteria:ve,changeSpec:typeof p!="function"&&p,isAdditionalChunk:0<be}).then(function(Ft){return he(Xe.length,Ft)})}).then(function(){return(0<Ze.length||ve&&oe)&&L.mutate({trans:R,type:"delete",keys:Ze,criteria:ve,isAdditionalChunk:0<be}).then(function(Ft){return Gi(A.table,Ze,Ft)}).then(function(Ft){return he(Ze.length,Ft)})}).then(function(){return se.length>be+De&&me(be+ne)})})}var ve=nn(A)&&A.limit===1/0&&(typeof p!="function"||oe)&&{index:A.index,range:A.range};return me(0).then(function(){if(0<Z.length)throw new Oe("Error modifying one or more objects",Z,fe,J);return se.length})})})},qt.prototype.delete=function(){var p=this._ctx,x=p.range;return!nn(p)||p.table.schema.yProps||!p.isPrimKey&&x.type!==3?this.modify(bl):this._write(function(A){var R=p.table.core.schema.primaryKey,O=x;return p.table.core.count({trans:A,query:{index:R,range:O}}).then(function(L){return p.table.core.mutate({trans:A,type:"deleteRange",range:O}).then(function(ne){var Y=ne.failures,ne=ne.numFailures;if(ne)throw new Oe("Could not delete some values",Object.keys(Y).map(function(re){return Y[re]}),L-ne);return L-ne})})})},qt);function qt(){}var bl=function(p,x){return x.value=null};function Sl(p,x){return p<x?-1:p===x?0:1}function Qo(p,x){return x<p?-1:p===x?0:1}function sn(p,x,A){return p=p instanceof Zo?new p.Collection(p):p,p._ctx.error=new(A||TypeError)(x),p}function Gt(p){return new p.Collection(p,function(){return ji("")}).limit(0)}function oi(p,x,A,R){var O,L,z,Y,ne,re,he,Z=A.length;if(!A.every(function(oe){return typeof oe=="string"}))return sn(p,Wo);function fe(oe){O=oe==="next"?function(me){return me.toUpperCase()}:function(me){return me.toLowerCase()},L=oe==="next"?function(me){return me.toLowerCase()}:function(me){return me.toUpperCase()},z=oe==="next"?Sl:Qo;var se=A.map(function(me){return{lower:L(me),upper:O(me)}}).sort(function(me,ve){return z(me.lower,ve.lower)});Y=se.map(function(me){return me.upper}),ne=se.map(function(me){return me.lower}),he=(re=oe)==="next"?"":R}fe("next"),p=new p.Collection(p,function(){return on(Y[0],ne[Z-1]+R)}),p._ondirectionchange=function(oe){fe(oe)};var J=0;return p._addAlgorithm(function(oe,se,me){var ve=oe.key;if(typeof ve!="string")return!1;var be=L(ve);if(x(be,ne,J))return!0;for(var De=null,Me=J;Me<Z;++Me){var Qe=(function(st,Xe,We,Ze,rt,ut){for(var Dt=Math.min(st.length,Ze.length),Ft=-1,jt=0;jt<Dt;++jt){var Sn=Xe[jt];if(Sn!==Ze[jt])return rt(st[jt],We[jt])<0?st.substr(0,jt)+We[jt]+We.substr(jt+1):rt(st[jt],Ze[jt])<0?st.substr(0,jt)+Ze[jt]+We.substr(jt+1):0<=Ft?st.substr(0,Ft)+Xe[Ft]+We.substr(Ft+1):null;rt(st[jt],Sn)<0&&(Ft=jt)}return Dt<Ze.length&&ut==="next"?st+We.substr(st.length):Dt<st.length&&ut==="prev"?st.substr(0,We.length):Ft<0?null:st.substr(0,Ft)+Ze[Ft]+We.substr(Ft+1)})(ve,be,Y[Me],ne[Me],z,re);Qe===null&&De===null?J=Me+1:(De===null||0<z(De,Qe))&&(De=Qe)}return se(De!==null?function(){oe.continue(De+he)}:me),!1}),p}function on(p,x,A,R){return{type:2,lower:p,upper:x,lowerOpen:A,upperOpen:R}}function ji(p){return{type:1,lower:p,upper:p}}var Zo=(Object.defineProperty(Ar.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ar.prototype.between=function(p,x,A,R){A=A!==!1,R=R===!0;try{return 0<this._cmp(p,x)||this._cmp(p,x)===0&&(A||R)&&(!A||!R)?Gt(this):new this.Collection(this,function(){return on(p,x,!A,!R)})}catch{return sn(this,rr)}},Ar.prototype.equals=function(p){return p==null?sn(this,rr):new this.Collection(this,function(){return ji(p)})},Ar.prototype.above=function(p){return p==null?sn(this,rr):new this.Collection(this,function(){return on(p,void 0,!0)})},Ar.prototype.aboveOrEqual=function(p){return p==null?sn(this,rr):new this.Collection(this,function(){return on(p,void 0,!1)})},Ar.prototype.below=function(p){return p==null?sn(this,rr):new this.Collection(this,function(){return on(void 0,p,!1,!0)})},Ar.prototype.belowOrEqual=function(p){return p==null?sn(this,rr):new this.Collection(this,function(){return on(void 0,p)})},Ar.prototype.startsWith=function(p){return typeof p!="string"?sn(this,Wo):this.between(p,p+lo,!0,!0)},Ar.prototype.startsWithIgnoreCase=function(p){return p===""?this.startsWith(p):oi(this,function(x,A){return x.indexOf(A[0])===0},[p],lo)},Ar.prototype.equalsIgnoreCase=function(p){return oi(this,function(x,A){return x===A[0]},[p],"")},Ar.prototype.anyOfIgnoreCase=function(){var p=G.apply(K,arguments);return p.length===0?Gt(this):oi(this,function(x,A){return A.indexOf(x)!==-1},p,"")},Ar.prototype.startsWithAnyOfIgnoreCase=function(){var p=G.apply(K,arguments);return p.length===0?Gt(this):oi(this,function(x,A){return A.some(function(R){return x.indexOf(R)===0})},p,lo)},Ar.prototype.anyOf=function(){var p=this,x=G.apply(K,arguments),A=this._cmp;try{x.sort(A)}catch{return sn(this,rr)}if(x.length===0)return Gt(this);var R=new this.Collection(this,function(){return on(x[0],x[x.length-1])});R._ondirectionchange=function(L){A=L==="next"?p._ascending:p._descending,x.sort(A)};var O=0;return R._addAlgorithm(function(L,z,Y){for(var ne=L.key;0<A(ne,x[O]);)if(++O===x.length)return z(Y),!1;return A(ne,x[O])===0||(z(function(){L.continue(x[O])}),!1)}),R},Ar.prototype.notEqual=function(p){return this.inAnyRange([[-1/0,p],[p,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ar.prototype.noneOf=function(){var p=G.apply(K,arguments);if(p.length===0)return new this.Collection(this);try{p.sort(this._ascending)}catch{return sn(this,rr)}var x=p.reduce(function(A,R){return A?A.concat([[A[A.length-1][1],R]]):[[-1/0,R]]},null);return x.push([p[p.length-1],this.db._maxKey]),this.inAnyRange(x,{includeLowers:!1,includeUppers:!1})},Ar.prototype.inAnyRange=function(ve,x){var A=this,R=this._cmp,O=this._ascending,L=this._descending,z=this._min,Y=this._max;if(ve.length===0)return Gt(this);if(!ve.every(function(be){return be[0]!==void 0&&be[1]!==void 0&&O(be[0],be[1])<=0}))return sn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Re.InvalidArgument);var ne=!x||x.includeLowers!==!1,re=x&&x.includeUppers===!0,he,Z=O;function fe(be,De){return Z(be[0],De[0])}try{(he=ve.reduce(function(be,De){for(var Me=0,Qe=be.length;Me<Qe;++Me){var st=be[Me];if(R(De[0],st[1])<0&&0<R(De[1],st[0])){st[0]=z(st[0],De[0]),st[1]=Y(st[1],De[1]);break}}return Me===Qe&&be.push(De),be},[])).sort(fe)}catch{return sn(this,rr)}var J=0,oe=re?function(be){return 0<O(be,he[J][1])}:function(be){return 0<=O(be,he[J][1])},se=ne?function(be){return 0<L(be,he[J][0])}:function(be){return 0<=L(be,he[J][0])},me=oe,ve=new this.Collection(this,function(){return on(he[0][0],he[he.length-1][1],!ne,!re)});return ve._ondirectionchange=function(be){Z=be==="next"?(me=oe,O):(me=se,L),he.sort(fe)},ve._addAlgorithm(function(be,De,Me){for(var Qe,st=be.key;me(st);)if(++J===he.length)return De(Me),!1;return!oe(Qe=st)&&!se(Qe)||(A._cmp(st,he[J][1])===0||A._cmp(st,he[J][0])===0||De(function(){Z===O?be.continue(he[J][0]):be.continue(he[J][1])}),!1)}),ve},Ar.prototype.startsWithAnyOf=function(){var p=G.apply(K,arguments);return p.every(function(x){return typeof x=="string"})?p.length===0?Gt(this):this.inAnyRange(p.map(function(x){return[x,x+lo]})):sn(this,"startsWithAnyOf() only works with strings")},Ar);function Ar(){}function Yt(p){return Kt(function(x){return ho(x),p(x.target.error),!1})}function ho(p){p.stopPropagation&&p.stopPropagation(),p.preventDefault&&p.preventDefault()}var Jo="storagemutated",Us="x-storagemutated-1",Gs=Fs(null,Jo),Ua=(Cr.prototype._lock=function(){return ee(!te.global),++this._reculock,this._reculock!==1||te.global||(te.lockOwnerFor=this),this},Cr.prototype._unlock=function(){if(ee(!te.global),--this._reculock==0)for(te.global||(te.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var p=this._blockedFuncs.shift();try{Vn(p[1],p[0])}catch{}}return this},Cr.prototype._locked=function(){return this._reculock&&te.lockOwnerFor!==this},Cr.prototype.create=function(p){var x=this;if(!this.mode)return this;var A=this.db.idbdb,R=this.db._state.dbOpenError;if(ee(!this.idbtrans),!p&&!A)switch(R&&R.name){case"DatabaseClosedError":throw new Re.DatabaseClosed(R);case"MissingAPIError":throw new Re.MissingAPI(R.message,R);default:throw new Re.OpenFailed(R)}if(!this.active)throw new Re.TransactionInactive;return ee(this._completion._state===null),(p=this.idbtrans=p||(this.db.core||A).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Kt(function(O){ho(O),x._reject(p.error)}),p.onabort=Kt(function(O){ho(O),x.active&&x._reject(new Re.Abort(p.error)),x.active=!1,x.on("abort").fire(O)}),p.oncomplete=Kt(function(){x.active=!1,x._resolve(),"mutatedParts"in p&&Gs.storagemutated.fire(p.mutatedParts)}),this},Cr.prototype._promise=function(p,x,A){var R=this;if(p==="readwrite"&&this.mode!=="readwrite")return kr(new Re.ReadOnly("Transaction is readonly"));if(!this.active)return kr(new Re.TransactionInactive);if(this._locked())return new ze(function(L,z){R._blockedFuncs.push([function(){R._promise(p,x,A).then(L,z)},te])});if(A)return ni(function(){var L=new ze(function(z,Y){R._lock();var ne=x(z,Y,R);ne&&ne.then&&ne.then(z,Y)});return L.finally(function(){return R._unlock()}),L._lib=!0,L});var O=new ze(function(L,z){var Y=x(L,z,R);Y&&Y.then&&Y.then(L,z)});return O._lib=!0,O},Cr.prototype._root=function(){return this.parent?this.parent._root():this},Cr.prototype.waitFor=function(p){var x,A=this._root(),R=ze.resolve(p);A._waitingFor?A._waitingFor=A._waitingFor.then(function(){return R}):(A._waitingFor=R,A._waitingQueue=[],x=A.idbtrans.objectStore(A.storeNames[0]),(function L(){for(++A._spinCount;A._waitingQueue.length;)A._waitingQueue.shift()();A._waitingFor&&(x.get(-1/0).onsuccess=L)})());var O=A._waitingFor;return new ze(function(L,z){R.then(function(Y){return A._waitingQueue.push(Kt(L.bind(null,Y)))},function(Y){return A._waitingQueue.push(Kt(z.bind(null,Y)))}).finally(function(){A._waitingFor===O&&(A._waitingFor=null)})})},Cr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Re.Abort))},Cr.prototype.table=function(p){var x=this._memoizedTables||(this._memoizedTables={});if(d(x,p))return x[p];var A=this.schema[p];if(!A)throw new Re.NotFound("Table "+p+" not part of transaction");return A=new this.db.Table(p,A,this),A.core=this.db.core.table(p),x[p]=A},Cr);function Cr(){}function kn(p,x,A,R,O,L,z,Y){return{name:p,keyPath:x,unique:A,multi:R,auto:O,compound:L,src:(A&&!z?"&":"")+(R?"*":"")+(O?"++":"")+zi(x),type:Y}}function zi(p){return typeof p=="string"?p:p?"["+[].join.call(p,"+")+"]":""}function Hi(p,x,A){return{name:p,primKey:x,indexes:A,mappedClass:null,idxByName:(R=function(O){return[O.name,O]},A.reduce(function(O,L,z){return z=R(L,z),z&&(O[z[0]]=z[1]),O},{}))};var R}var Ei=function(p){try{return p.only([[]]),Ei=function(){return[[]]},[[]]}catch{return Ei=function(){return lo},lo}};function _s(p){return p==null?function(){}:typeof p=="string"?(x=p).split(".").length===1?function(A){return A[x]}:function(A){return de(A,x)}:function(A){return de(A,p)};var x}function Mn(p){return[].slice.call(p)}var ea=0;function Vi(p){return p==null?":id":typeof p=="string"?p:"[".concat(p.join("+"),"]")}function ta(p,x,ne){function R(me){if(me.type===3)return null;if(me.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var J=me.lower,oe=me.upper,se=me.lowerOpen,me=me.upperOpen;return J===void 0?oe===void 0?null:x.upperBound(oe,!!me):oe===void 0?x.lowerBound(J,!!se):x.bound(J,oe,!!se,!!me)}function O(fe){var J,oe=fe.name;return{name:oe,schema:fe,mutate:function(se){var me=se.trans,ve=se.type,be=se.keys,De=se.values,Me=se.range;return new Promise(function(Qe,st){Qe=Kt(Qe);var Xe=me.objectStore(oe),We=Xe.keyPath==null,Ze=ve==="put"||ve==="add";if(!Ze&&ve!=="delete"&&ve!=="deleteRange")throw new Error("Invalid operation type: "+ve);var rt,ut=(be||De||{length:1}).length;if(be&&De&&be.length!==De.length)throw new Error("Given keys array must have same length as given values array.");if(ut===0)return Qe({numFailures:0,failures:{},results:[],lastResult:void 0});function Dt(qr){++Sn,ho(qr)}var Ft=[],jt=[],Sn=0;if(ve==="deleteRange"){if(Me.type===4)return Qe({numFailures:Sn,failures:jt,results:[],lastResult:void 0});Me.type===3?Ft.push(rt=Xe.clear()):Ft.push(rt=Xe.delete(R(Me)))}else{var We=Ze?We?[De,be]:[De,null]:[be,null],Nt=We[0],Xr=We[1];if(Ze)for(var yr=0;yr<ut;++yr)Ft.push(rt=Xr&&Xr[yr]!==void 0?Xe[ve](Nt[yr],Xr[yr]):Xe[ve](Nt[yr])),rt.onerror=Dt;else for(yr=0;yr<ut;++yr)Ft.push(rt=Xe[ve](Nt[yr])),rt.onerror=Dt}function yo(qr){qr=qr.target.result,Ft.forEach(function(Ci,Rl){return Ci.error!=null&&(jt[Rl]=Ci.error)}),Qe({numFailures:Sn,failures:jt,results:ve==="delete"?be:Ft.map(function(Ci){return Ci.result}),lastResult:qr})}rt.onerror=function(qr){Dt(qr),yo(qr)},rt.onsuccess=yo})},getMany:function(se){var me=se.trans,ve=se.keys;return new Promise(function(be,De){be=Kt(be);for(var Me,Qe=me.objectStore(oe),st=ve.length,Xe=new Array(st),We=0,Ze=0,rt=function(Ft){Ft=Ft.target,Xe[Ft._pos]=Ft.result,++Ze===We&&be(Xe)},ut=Yt(De),Dt=0;Dt<st;++Dt)ve[Dt]!=null&&((Me=Qe.get(ve[Dt]))._pos=Dt,Me.onsuccess=rt,Me.onerror=ut,++We);We===0&&be(Xe)})},get:function(se){var me=se.trans,ve=se.key;return new Promise(function(be,De){be=Kt(be);var Me=me.objectStore(oe).get(ve);Me.onsuccess=function(Qe){return be(Qe.target.result)},Me.onerror=Yt(De)})},query:(J=re,function(se){return new Promise(function(me,ve){me=Kt(me);var be,De,Me,We=se.trans,Qe=se.values,st=se.limit,rt=se.query,Xe=st===1/0?void 0:st,Ze=rt.index,rt=rt.range,We=We.objectStore(oe),Ze=Ze.isPrimaryKey?We:We.index(Ze.name),rt=R(rt);if(st===0)return me({result:[]});J?((Xe=Qe?Ze.getAll(rt,Xe):Ze.getAllKeys(rt,Xe)).onsuccess=function(ut){return me({result:ut.target.result})},Xe.onerror=Yt(ve)):(be=0,De=!Qe&&"openKeyCursor"in Ze?Ze.openKeyCursor(rt):Ze.openCursor(rt),Me=[],De.onsuccess=function(ut){var Dt=De.result;return Dt?(Me.push(Qe?Dt.value:Dt.primaryKey),++be===st?me({result:Me}):void Dt.continue()):me({result:Me})},De.onerror=Yt(ve))})}),openCursor:function(se){var me=se.trans,ve=se.values,be=se.query,De=se.reverse,Me=se.unique;return new Promise(function(Qe,st){Qe=Kt(Qe);var Ze=be.index,Xe=be.range,We=me.objectStore(oe),We=Ze.isPrimaryKey?We:We.index(Ze.name),Ze=De?Me?"prevunique":"prev":Me?"nextunique":"next",rt=!ve&&"openKeyCursor"in We?We.openKeyCursor(R(Xe),Ze):We.openCursor(R(Xe),Ze);rt.onerror=Yt(st),rt.onsuccess=Kt(function(ut){var Dt,Ft,jt,Sn,Nt=rt.result;Nt?(Nt.___id=++ea,Nt.done=!1,Dt=Nt.continue.bind(Nt),Ft=(Ft=Nt.continuePrimaryKey)&&Ft.bind(Nt),jt=Nt.advance.bind(Nt),Sn=function(){throw new Error("Cursor not stopped")},Nt.trans=me,Nt.stop=Nt.continue=Nt.continuePrimaryKey=Nt.advance=function(){throw new Error("Cursor not started")},Nt.fail=Kt(st),Nt.next=function(){var Xr=this,yr=1;return this.start(function(){return yr--?Xr.continue():Xr.stop()}).then(function(){return Xr})},Nt.start=function(Xr){function yr(){if(rt.result)try{Xr()}catch(qr){Nt.fail(qr)}else Nt.done=!0,Nt.start=function(){throw new Error("Cursor behind last entry")},Nt.stop()}var yo=new Promise(function(qr,Ci){qr=Kt(qr),rt.onerror=Yt(Ci),Nt.fail=Ci,Nt.stop=function(Rl){Nt.stop=Nt.continue=Nt.continuePrimaryKey=Nt.advance=Sn,qr(Rl)}});return rt.onsuccess=Kt(function(qr){rt.onsuccess=yr,yr()}),Nt.continue=Dt,Nt.continuePrimaryKey=Ft,Nt.advance=jt,yr(),yo},Qe(Nt)):Qe(null)},st)})},count:function(se){var me=se.query,ve=se.trans,be=me.index,De=me.range;return new Promise(function(Me,Qe){var st=ve.objectStore(oe),Xe=be.isPrimaryKey?st:st.index(be.name),st=R(De),Xe=st?Xe.count(st):Xe.count();Xe.onsuccess=Kt(function(We){return Me(We.target.result)}),Xe.onerror=Yt(Qe)})}}}var L,z,Y,he=(z=ne,Y=Mn((L=p).objectStoreNames),{schema:{name:L.name,tables:Y.map(function(fe){return z.objectStore(fe)}).map(function(fe){var J=fe.keyPath,me=fe.autoIncrement,oe=f(J),se={},me={name:fe.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:J==null,compound:oe,keyPath:J,autoIncrement:me,unique:!0,extractKey:_s(J)},indexes:Mn(fe.indexNames).map(function(ve){return fe.index(ve)}).map(function(Me){var be=Me.name,De=Me.unique,Qe=Me.multiEntry,Me=Me.keyPath,Qe={name:be,compound:f(Me),keyPath:Me,unique:De,multiEntry:Qe,extractKey:_s(Me)};return se[Vi(Me)]=Qe}),getIndexByKeyPath:function(ve){return se[Vi(ve)]}};return se[":id"]=me.primaryKey,J!=null&&(se[Vi(J)]=me.primaryKey),me})},hasGetAll:0<Y.length&&"getAll"in z.objectStore(Y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),ne=he.schema,re=he.hasGetAll,he=ne.tables.map(O),Z={};return he.forEach(function(fe){return Z[fe.name]=fe}),{stack:"dbcore",transaction:p.transaction.bind(p),table:function(fe){if(!Z[fe])throw new Error("Table '".concat(fe,"' not found"));return Z[fe]},MIN_KEY:-1/0,MAX_KEY:Ei(x),schema:ne}}function fo(p,x,A,R){var O=A.IDBKeyRange;return A.indexedDB,{dbcore:(R=ta(x,O,R),p.dbcore.reduce(function(L,z){return z=z.create,r(r({},L),z(L))},R))}}function an(p,R){var A=R.db,R=fo(p._middlewares,A,p._deps,R);p.core=R.dbcore,p.tables.forEach(function(O){var L=O.name;p.core.schema.tables.some(function(z){return z.name===L})&&(O.core=p.core.table(L),p[L]instanceof p.Table&&(p[L].core=O.core))})}function yn(p,x,A,R){A.forEach(function(O){var L=R[O];x.forEach(function(z){var Y=(function ne(re,he){return k(re,he)||(re=_(re))&&ne(re,he)})(z,O);(!Y||"value"in Y&&Y.value===void 0)&&(z===p.Transaction.prototype||z instanceof p.Transaction?T(z,O,{get:function(){return this.table(O)},set:function(ne){b(this,O,{value:ne,writable:!0,configurable:!0,enumerable:!0})}}):z[O]=new p.Table(O,L))})})}function vn(p,x){x.forEach(function(A){for(var R in A)A[R]instanceof p.Table&&delete A[R]})}function ai(p,x){return p._cfg.version-x._cfg.version}function li(p,x,A,R){var O=p._dbSchema;A.objectStoreNames.contains("$meta")&&!O.$meta&&(O.$meta=Hi("$meta",Wi("")[0],[]),p._storeNames.push("$meta"));var L=p._createTransaction("readwrite",p._storeNames,O);L.create(A),L._completion.catch(R);var z=L._reject.bind(L),Y=te.transless||te;ni(function(){return te.trans=L,te.transless=Y,x!==0?(an(p,A),re=x,((ne=L).storeNames.includes("$meta")?ne.table("$meta").get("version").then(function(he){return he??re}):ze.resolve(re)).then(function(he){return fe=he,J=L,oe=A,se=[],he=(Z=p)._versions,me=Z._dbSchema=Nr(0,Z.idbdb,oe),(he=he.filter(function(ve){return ve._cfg.version>=fe})).length!==0?(he.forEach(function(ve){se.push(function(){var be=me,De=ve._cfg.dbschema;nr(Z,be,oe),nr(Z,De,oe),me=Z._dbSchema=De;var Me=po(be,De);Me.add.forEach(function(Ze){zs(oe,Ze[0],Ze[1].primKey,Ze[1].indexes)}),Me.change.forEach(function(Ze){if(Ze.recreate)throw new Re.Upgrade("Not yet support for changing primary key");var rt=oe.objectStore(Ze.name);Ze.add.forEach(function(ut){return ar(rt,ut)}),Ze.change.forEach(function(ut){rt.deleteIndex(ut.name),ar(rt,ut)}),Ze.del.forEach(function(ut){return rt.deleteIndex(ut)})});var Qe=ve._cfg.contentUpgrade;if(Qe&&ve._cfg.version>fe){an(Z,oe),J._memoizedTables={};var st=ie(De);Me.del.forEach(function(Ze){st[Ze]=be[Ze]}),vn(Z,[Z.Transaction.prototype]),yn(Z,[Z.Transaction.prototype],c(st),st),J.schema=st;var Xe,We=U(Qe);return We&&vs(),Me=ze.follow(function(){var Ze;(Xe=Qe(J))&&We&&(Ze=$r.bind(null,null),Xe.then(Ze,Ze))}),Xe&&typeof Xe.then=="function"?ze.resolve(Xe):Me.then(function(){return Xe})}}),se.push(function(be){var De,Me,Qe=ve._cfg.dbschema;De=Qe,Me=be,[].slice.call(Me.db.objectStoreNames).forEach(function(st){return De[st]==null&&Me.db.deleteObjectStore(st)}),vn(Z,[Z.Transaction.prototype]),yn(Z,[Z.Transaction.prototype],Z._storeNames,Z._dbSchema),J.schema=Z._dbSchema}),se.push(function(be){Z.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(Z.idbdb.version/10)===ve._cfg.version?(Z.idbdb.deleteObjectStore("$meta"),delete Z._dbSchema.$meta,Z._storeNames=Z._storeNames.filter(function(De){return De!=="$meta"})):be.objectStore("$meta").put(ve._cfg.version,"version"))})}),(function ve(){return se.length?ze.resolve(se.shift()(J.idbtrans)).then(ve):ze.resolve()})().then(function(){Ga(me,oe)})):ze.resolve();var Z,fe,J,oe,se,me}).catch(z)):(c(O).forEach(function(he){zs(A,he,O[he].primKey,O[he].indexes)}),an(p,A),void ze.follow(function(){return p.on.populate.fire(L)}).catch(z));var ne,re})}function js(p,x){Ga(p._dbSchema,x),x.db.version%10!=0||x.objectStoreNames.contains("$meta")||x.db.createObjectStore("$meta").add(Math.ceil(x.db.version/10-1),"version");var A=Nr(0,p.idbdb,x);nr(p,p._dbSchema,x);for(var R=0,O=po(A,p._dbSchema).change;R<O.length;R++){var L=(function(z){if(z.change.length||z.recreate)return console.warn("Unable to patch indexes of table ".concat(z.name," because it has changes on the type of index or primary key.")),{value:void 0};var Y=x.objectStore(z.name);z.add.forEach(function(ne){cr&&console.debug("Dexie upgrade patch: Creating missing index ".concat(z.name,".").concat(ne.src)),ar(Y,ne)})})(O[R]);if(typeof L=="object")return L.value}}function po(p,x){var A,R={del:[],add:[],change:[]};for(A in p)x[A]||R.del.push(A);for(A in x){var O=p[A],L=x[A];if(O){var z={name:A,def:L,recreate:!1,del:[],add:[],change:[]};if(""+(O.primKey.keyPath||"")!=""+(L.primKey.keyPath||"")||O.primKey.auto!==L.primKey.auto)z.recreate=!0,R.change.push(z);else{var Y=O.idxByName,ne=L.idxByName,re=void 0;for(re in Y)ne[re]||z.del.push(re);for(re in ne){var he=Y[re],Z=ne[re];he?he.src!==Z.src&&z.change.push(Z):z.add.push(Z)}(0<z.del.length||0<z.add.length||0<z.change.length)&&R.change.push(z)}}else R.add.push([A,L])}return R}function zs(p,x,A,R){var O=p.db.createObjectStore(x,A.keyPath?{keyPath:A.keyPath,autoIncrement:A.auto}:{autoIncrement:A.auto});return R.forEach(function(L){return ar(O,L)}),O}function Ga(p,x){c(p).forEach(function(A){x.db.objectStoreNames.contains(A)||(cr&&console.debug("Dexie: Creating missing table",A),zs(x,A,p[A].primKey,p[A].indexes))})}function ar(p,x){p.createIndex(x.name,x.keyPath,{unique:x.unique,multiEntry:x.multi})}function Nr(p,x,A){var R={};return W(x.objectStoreNames,0).forEach(function(O){for(var L=A.objectStore(O),z=kn(zi(re=L.keyPath),re||"",!0,!1,!!L.autoIncrement,re&&typeof re!="string",!0),Y=[],ne=0;ne<L.indexNames.length;++ne){var he=L.index(L.indexNames[ne]),re=he.keyPath,he=kn(he.name,re,!!he.unique,!!he.multiEntry,!1,re&&typeof re!="string",!1);Y.push(he)}R[O]=Hi(O,z,Y)}),R}function nr(p,x,A){for(var R=A.db.objectStoreNames,O=0;O<R.length;++O){var L=R[O],z=A.objectStore(L);p._hasGetAll="getAll"in z;for(var Y=0;Y<z.indexNames.length;++Y){var ne=z.indexNames[Y],re=z.index(ne).keyPath,he=typeof re=="string"?re:"["+W(re).join("+")+"]";!x[L]||(re=x[L].idxByName[he])&&(re.name=ne,delete x[L].idxByName[he],x[L].idxByName[ne]=re)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(p._hasGetAll=!1)}function Wi(p){return p.split(",").map(function(x,A){var L=x.split(":"),R=(O=L[1])===null||O===void 0?void 0:O.trim(),O=(x=L[0].trim()).replace(/([&*]|\+\+)/g,""),L=/^\[/.test(O)?O.match(/^\[(.*)\]$/)[1].split("+"):O;return kn(O,L||null,/\&/.test(x),/\*/.test(x),/\+\+/.test(x),f(L),A===0,R)})}var Ti=(xs.prototype._createTableSchema=Hi,xs.prototype._parseIndexSyntax=Wi,xs.prototype._parseStoresSpec=function(p,x){var A=this;c(p).forEach(function(R){if(p[R]!==null){var O=A._parseIndexSyntax(p[R]),L=O.shift();if(!L)throw new Re.Schema("Invalid schema for table "+R+": "+p[R]);if(L.unique=!0,L.multi)throw new Re.Schema("Primary key cannot be multiEntry*");O.forEach(function(z){if(z.auto)throw new Re.Schema("Only primary key can be marked as autoIncrement (++)");if(!z.keyPath)throw new Re.Schema("Index must have a name and cannot be an empty string")}),O=A._createTableSchema(R,L,O),x[R]=O}})},xs.prototype.stores=function(A){var x=this.db;this._cfg.storesSource=this._cfg.storesSource?m(this._cfg.storesSource,A):A;var A=x._versions,R={},O={};return A.forEach(function(L){m(R,L._cfg.storesSource),O=L._cfg.dbschema={},L._parseStoresSpec(R,O)}),x._dbSchema=O,vn(x,[x._allTables,x,x.Transaction.prototype]),yn(x,[x._allTables,x,x.Transaction.prototype,this._cfg.tables],c(O),O),x._storeNames=c(O),this},xs.prototype.upgrade=function(p){return this._cfg.contentUpgrade=Dr(this._cfg.contentUpgrade||et,p),this},xs);function xs(){}function ra(p,x){var A=p._dbNamesDB;return A||(A=p._dbNamesDB=new Qi(uo,{addons:[],indexedDB:p,IDBKeyRange:x})).version(1).stores({dbnames:"name"}),A.table("dbnames")}function ws(p){return p&&typeof p.databases=="function"}function Hs(p){return ni(function(){return te.letThrough=!0,p()})}function ja(p){return!("from"in p)}var jr=function(p,x){if(!this){var A=new jr;return p&&"d"in p&&m(A,p),A}m(this,arguments.length?{d:1,from:p,to:1<arguments.length?x:p}:{d:0})};function na(p,x,A){var R=Pt(x,A);if(!isNaN(R)){if(0<R)throw RangeError();if(ja(p))return m(p,{from:x,to:A,d:1});var O=p.l,R=p.r;if(Pt(A,p.from)<0)return O?na(O,x,A):p.l={from:x,to:A,d:1,l:null,r:null},za(p);if(0<Pt(x,p.to))return R?na(R,x,A):p.r={from:x,to:A,d:1,l:null,r:null},za(p);Pt(x,p.from)<0&&(p.from=x,p.l=null,p.d=R?R.d+1:1),0<Pt(A,p.to)&&(p.to=A,p.r=null,p.d=p.l?p.l.d+1:1),A=!p.r,O&&!p.l&&$i(p,O),R&&A&&$i(p,R)}}function $i(p,x){ja(x)||(function A(R,ne){var L=ne.from,z=ne.to,Y=ne.l,ne=ne.r;na(R,L,z),Y&&A(R,Y),ne&&A(R,ne)})(p,x)}function ia(p,x){var A=El(x),R=A.next();if(R.done)return!1;for(var O=R.value,L=El(p),z=L.next(O.from),Y=z.value;!R.done&&!z.done;){if(Pt(Y.from,O.to)<=0&&0<=Pt(Y.to,O.from))return!0;Pt(O.from,Y.from)<0?O=(R=A.next(Y.from)).value:Y=(z=L.next(O.from)).value}return!1}function El(p){var x=ja(p)?null:{s:0,n:p};return{next:function(A){for(var R=0<arguments.length;x;)switch(x.s){case 0:if(x.s=1,R)for(;x.n.l&&Pt(A,x.n.from)<0;)x={up:x,n:x.n.l,s:1};else for(;x.n.l;)x={up:x,n:x.n.l,s:1};case 1:if(x.s=2,!R||Pt(A,x.n.to)<=0)return{value:x.n,done:!1};case 2:if(x.n.r){x.s=3,x={up:x,n:x.n.r,s:0};continue}case 3:x=x.up}return{done:!0}}}}function za(p){var x,A,R=(((x=p.r)===null||x===void 0?void 0:x.d)||0)-(((A=p.l)===null||A===void 0?void 0:A.d)||0),O=1<R?"r":R<-1?"l":"";O&&(x=O=="r"?"l":"r",A=r({},p),R=p[O],p.from=R.from,p.to=R.to,p[O]=R[O],A[O]=R[x],(p[x]=A).d=dc(A)),p.d=dc(p)}function dc(A){var x=A.r,A=A.l;return(x?A?Math.max(x.d,A.d):x.d:A?A.d:0)+1}function On(p,x){return c(x).forEach(function(A){p[A]?$i(p[A],x[A]):p[A]=(function R(O){var L,z,Y={};for(L in O)d(O,L)&&(z=O[L],Y[L]=!z||typeof z!="object"||Ce.has(z.constructor)?z:R(z));return Y})(x[A])}),p}function sa(p,x){return p.all||x.all||Object.keys(p).some(function(A){return x[A]&&ia(x[A],p[A])})}y(jr.prototype,((ln={add:function(p){return $i(this,p),this},addKey:function(p){return na(this,p,p),this},addKeys:function(p){var x=this;return p.forEach(function(A){return na(x,A,A)}),this},hasKey:function(p){var x=El(this).next(p).value;return x&&Pt(x.from,p)<=0&&0<=Pt(x.to,p)}})[H]=function(){return El(this)},ln));var Ai={},Vs={},Ha=!1;function oa(p){On(Vs,p),Ha||(Ha=!0,setTimeout(function(){Ha=!1,Tl(Vs,!(Vs={}))},0))}function Tl(p,x){x===void 0&&(x=!1);var A=new Set;if(p.all)for(var R=0,O=Object.values(Ai);R<O.length;R++)aa(z=O[R],p,A,x);else for(var L in p){var z,Y=/^idb\:\/\/(.*)\/(.*)\//.exec(L);Y&&(L=Y[1],Y=Y[2],(z=Ai["idb://".concat(L,"/").concat(Y)])&&aa(z,p,A,x))}A.forEach(function(ne){return ne()})}function aa(p,x,A,R){for(var O=[],L=0,z=Object.entries(p.queries.query);L<z.length;L++){for(var Y=z[L],ne=Y[0],re=[],he=0,Z=Y[1];he<Z.length;he++){var fe=Z[he];sa(x,fe.obsSet)?fe.subscribers.forEach(function(me){return A.add(me)}):R&&re.push(fe)}R&&O.push([ne,re])}if(R)for(var J=0,oe=O;J<oe.length;J++){var se=oe[J],ne=se[0],re=se[1];p.queries.query[ne]=re}}function vu(p){var x=p._state,A=p._deps.indexedDB;if(x.isBeingOpened||p.idbdb)return x.dbReadyPromise.then(function(){return x.dbOpenError?kr(x.dbOpenError):p});x.isBeingOpened=!0,x.dbOpenError=null,x.openComplete=!1;var R=x.openCanceller,O=Math.round(10*p.verno),L=!1;function z(){if(x.openCanceller!==R)throw new Re.DatabaseClosed("db.open() was cancelled")}function Y(){return new ze(function(fe,J){if(z(),!A)throw new Re.MissingAPI;var oe=p.name,se=x.autoSchema||!O?A.open(oe):A.open(oe,O);if(!se)throw new Re.MissingAPI;se.onerror=Yt(J),se.onblocked=Kt(p._fireOnBlocked),se.onupgradeneeded=Kt(function(me){var ve;he=se.transaction,x.autoSchema&&!p._options.allowEmptyDB?(se.onerror=ho,he.abort(),se.result.close(),(ve=A.deleteDatabase(oe)).onsuccess=ve.onerror=Kt(function(){J(new Re.NoSuchDatabase("Database ".concat(oe," doesnt exist")))})):(he.onerror=Yt(J),me=me.oldVersion>Math.pow(2,62)?0:me.oldVersion,Z=me<1,p.idbdb=se.result,L&&js(p,he),li(p,me/10,he,J))},J),se.onsuccess=Kt(function(){he=null;var me,ve,be,De,Me,Qe=p.idbdb=se.result,st=W(Qe.objectStoreNames);if(0<st.length)try{var Xe=Qe.transaction((De=st).length===1?De[0]:De,"readonly");if(x.autoSchema)ve=Qe,be=Xe,(me=p).verno=ve.version/10,be=me._dbSchema=Nr(0,ve,be),me._storeNames=W(ve.objectStoreNames,0),yn(me,[me._allTables],c(be),be);else if(nr(p,p._dbSchema,Xe),((Me=po(Nr(0,(Me=p).idbdb,Xe),Me._dbSchema)).add.length||Me.change.some(function(We){return We.add.length||We.change.length}))&&!L)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Qe.close(),O=Qe.version+1,L=!0,fe(Y());an(p,Xe)}catch{}Ui.push(p),Qe.onversionchange=Kt(function(We){x.vcFired=!0,p.on("versionchange").fire(We)}),Qe.onclose=Kt(function(){p.close({disableAutoOpen:!1})}),Z&&(Me=p._deps,Xe=oe,Qe=Me.indexedDB,Me=Me.IDBKeyRange,ws(Qe)||Xe===uo||ra(Qe,Me).put({name:Xe}).catch(et)),fe()},J)}).catch(function(fe){switch(fe?.name){case"UnknownError":if(0<x.PR1398_maxLoop)return x.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),Y();break;case"VersionError":if(0<O)return O=0,Y()}return ze.reject(fe)})}var ne,re=x.dbReadyResolve,he=null,Z=!1;return ze.race([R,(typeof navigator>"u"?ze.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(fe){function J(){return indexedDB.databases().finally(fe)}ne=setInterval(J,100),J()}).finally(function(){return clearInterval(ne)}):Promise.resolve()).then(Y)]).then(function(){return z(),x.onReadyBeingFired=[],ze.resolve(Hs(function(){return p.on.ready.fire(p.vip)})).then(function fe(){if(0<x.onReadyBeingFired.length){var J=x.onReadyBeingFired.reduce(Dr,et);return x.onReadyBeingFired=[],ze.resolve(Hs(function(){return J(p.vip)})).then(fe)}})}).finally(function(){x.openCanceller===R&&(x.onReadyBeingFired=null,x.isBeingOpened=!1)}).catch(function(fe){x.dbOpenError=fe;try{he&&he.abort()}catch{}return R===x.openCanceller&&p._close(),kr(fe)}).finally(function(){x.openComplete=!0,re()}).then(function(){var fe;return Z&&(fe={},p.tables.forEach(function(J){J.schema.indexes.forEach(function(oe){oe.name&&(fe["idb://".concat(p.name,"/").concat(J.name,"/").concat(oe.name)]=new jr(-1/0,[[[]]]))}),fe["idb://".concat(p.name,"/").concat(J.name,"/")]=fe["idb://".concat(p.name,"/").concat(J.name,"/:dels")]=new jr(-1/0,[[[]]])}),Gs(Jo).fire(fe),Tl(fe,!0)),p})}function Ws(p){function x(L){return p.next(L)}var A=O(x),R=O(function(L){return p.throw(L)});function O(L){return function(ne){var Y=L(ne),ne=Y.value;return Y.done?ne:ne&&typeof ne.then=="function"?ne.then(A,R):f(ne)?Promise.all(ne).then(A,R):A(ne)}}return O(x)()}function bn(p,x,A){for(var R=f(p)?p.slice():[p],O=0;O<A;++O)R.push(x);return R}var $s={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(p){return r(r({},p),{table:function(x){var A=p.table(x),R=A.schema,O={},L=[];function z(Z,fe,J){var oe=Vi(Z),se=O[oe]=O[oe]||[],me=Z==null?0:typeof Z=="string"?1:Z.length,ve=0<fe,ve=r(r({},J),{name:ve?"".concat(oe,"(virtual-from:").concat(J.name,")"):J.name,lowLevelIndex:J,isVirtual:ve,keyTail:fe,keyLength:me,extractKey:_s(Z),unique:!ve&&J.unique});return se.push(ve),ve.isPrimaryKey||L.push(ve),1<me&&z(me===2?Z[0]:Z.slice(0,me-1),fe+1,J),se.sort(function(be,De){return be.keyTail-De.keyTail}),ve}x=z(R.primaryKey.keyPath,0,R.primaryKey),O[":id"]=[x];for(var Y=0,ne=R.indexes;Y<ne.length;Y++){var re=ne[Y];z(re.keyPath,0,re)}function he(Z){var fe,J=Z.query.index;return J.isVirtual?r(r({},Z),{query:{index:J.lowLevelIndex,range:(fe=Z.query.range,J=J.keyTail,{type:fe.type===1?2:fe.type,lower:bn(fe.lower,fe.lowerOpen?p.MAX_KEY:p.MIN_KEY,J),lowerOpen:!0,upper:bn(fe.upper,fe.upperOpen?p.MIN_KEY:p.MAX_KEY,J),upperOpen:!0})}}):Z}return r(r({},A),{schema:r(r({},R),{primaryKey:x,indexes:L,getIndexByKeyPath:function(Z){return(Z=O[Vi(Z)])&&Z[0]}}),count:function(Z){return A.count(he(Z))},query:function(Z){return A.query(he(Z))},openCursor:function(Z){var fe=Z.query.index,J=fe.keyTail,oe=fe.isVirtual,se=fe.keyLength;return oe?A.openCursor(he(Z)).then(function(ve){return ve&&me(ve)}):A.openCursor(Z);function me(ve){return Object.create(ve,{continue:{value:function(be){be!=null?ve.continue(bn(be,Z.reverse?p.MAX_KEY:p.MIN_KEY,J)):Z.unique?ve.continue(ve.key.slice(0,se).concat(Z.reverse?p.MIN_KEY:p.MAX_KEY,J)):ve.continue()}},continuePrimaryKey:{value:function(be,De){ve.continuePrimaryKey(bn(be,p.MAX_KEY,J),De)}},primaryKey:{get:function(){return ve.primaryKey}},key:{get:function(){var be=ve.key;return se===1?be[0]:be.slice(0,se)}},value:{get:function(){return ve.value}}})}}})}})}};function Va(p,x,A,R){return A=A||{},R=R||"",c(p).forEach(function(O){var L,z,Y;d(x,O)?(L=p[O],z=x[O],typeof L=="object"&&typeof z=="object"&&L&&z?(Y=Ke(L))!==Ke(z)?A[R+O]=x[O]:Y==="Object"?Va(L,z,A,R+O+"."):L!==z&&(A[R+O]=x[O]):L!==z&&(A[R+O]=x[O])):A[R+O]=void 0}),c(x).forEach(function(O){d(p,O)||(A[R+O]=x[O])}),A}function Al(p,x){return x.type==="delete"?x.keys:x.keys||x.values.map(p.extractKey)}var Xi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(p){return r(r({},p),{table:function(x){var A=p.table(x),R=A.schema.primaryKey;return r(r({},A),{mutate:function(O){var L=te.trans,z=L.table(x).hook,Y=z.deleting,ne=z.creating,re=z.updating;switch(O.type){case"add":if(ne.fire===et)break;return L._promise("readwrite",function(){return he(O)},!0);case"put":if(ne.fire===et&&re.fire===et)break;return L._promise("readwrite",function(){return he(O)},!0);case"delete":if(Y.fire===et)break;return L._promise("readwrite",function(){return he(O)},!0);case"deleteRange":if(Y.fire===et)break;return L._promise("readwrite",function(){return(function Z(fe,J,oe){return A.query({trans:fe,values:!1,query:{index:R,range:J},limit:oe}).then(function(se){var me=se.result;return he({type:"delete",keys:me,trans:fe}).then(function(ve){return 0<ve.numFailures?Promise.reject(ve.failures[0]):me.length<oe?{failures:[],numFailures:0,lastResult:void 0}:Z(fe,r(r({},J),{lower:me[me.length-1],lowerOpen:!0}),oe)})})})(O.trans,O.range,1e4)},!0)}return A.mutate(O);function he(Z){var fe,J,oe,se=te.trans,me=Z.keys||Al(R,Z);if(!me)throw new Error("Keys missing");return(Z=Z.type==="add"||Z.type==="put"?r(r({},Z),{keys:me}):r({},Z)).type!=="delete"&&(Z.values=s([],Z.values)),Z.keys&&(Z.keys=s([],Z.keys)),fe=A,oe=me,((J=Z).type==="add"?Promise.resolve([]):fe.getMany({trans:J.trans,keys:oe,cache:"immutable"})).then(function(ve){var be=me.map(function(De,Me){var Qe,st,Xe,We=ve[Me],Ze={onerror:null,onsuccess:null};return Z.type==="delete"?Y.fire.call(Ze,De,We,se):Z.type==="add"||We===void 0?(Qe=ne.fire.call(Ze,De,Z.values[Me],se),De==null&&Qe!=null&&(Z.keys[Me]=De=Qe,R.outbound||F(Z.values[Me],R.keyPath,De))):(Qe=Va(We,Z.values[Me]),(st=re.fire.call(Ze,Qe,De,We,se))&&(Xe=Z.values[Me],Object.keys(st).forEach(function(rt){d(Xe,rt)?Xe[rt]=st[rt]:F(Xe,rt,st[rt])}))),Ze});return A.mutate(Z).then(function(De){for(var Me=De.failures,Qe=De.results,st=De.numFailures,De=De.lastResult,Xe=0;Xe<me.length;++Xe){var We=(Qe||me)[Xe],Ze=be[Xe];We==null?Ze.onerror&&Ze.onerror(Me[Xe]):Ze.onsuccess&&Ze.onsuccess(Z.type==="put"&&ve[Xe]?Z.values[Xe]:We)}return{failures:Me,results:Qe,numFailures:st,lastResult:De}}).catch(function(De){return be.forEach(function(Me){return Me.onerror&&Me.onerror(De)}),Promise.reject(De)})})}}})}})}};function bs(p,x,A){try{if(!x||x.keys.length<p.length)return null;for(var R=[],O=0,L=0;O<x.keys.length&&L<p.length;++O)Pt(x.keys[O],p[L])===0&&(R.push(A?_e(x.values[O]):x.values[O]),++L);return R.length===p.length?R:null}catch{return null}}var _u={stack:"dbcore",level:-1,create:function(p){return{table:function(x){var A=p.table(x);return r(r({},A),{getMany:function(R){if(!R.cache)return A.getMany(R);var O=bs(R.keys,R.trans._cache,R.cache==="clone");return O?ze.resolve(O):A.getMany(R).then(function(L){return R.trans._cache={keys:R.keys,values:R.cache==="clone"?_e(L):L},L})},mutate:function(R){return R.type!=="add"&&(R.trans._cache=null),A.mutate(R)}})}}}};function xu(p,x){return p.trans.mode==="readonly"&&!!p.subscr&&!p.trans.explicit&&p.trans.db._options.cache!=="disabled"&&!x.schema.primaryKey.outbound}function qi(p,x){switch(p){case"query":return x.values&&!x.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ki={stack:"dbcore",level:0,name:"Observability",create:function(p){var x=p.schema.name,A=new jr(p.MIN_KEY,p.MAX_KEY);return r(r({},p),{transaction:function(R,O,L){if(te.subscr&&O!=="readonly")throw new Re.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(te.querier));return p.transaction(R,O,L)},table:function(R){var O=p.table(R),L=O.schema,z=L.primaryKey,Z=L.indexes,Y=z.extractKey,ne=z.outbound,re=z.autoIncrement&&Z.filter(function(J){return J.compound&&J.keyPath.includes(z.keyPath)}),he=r(r({},O),{mutate:function(J){function oe(rt){return rt="idb://".concat(x,"/").concat(R,"/").concat(rt),De[rt]||(De[rt]=new jr)}var se,me,ve,be=J.trans,De=J.mutatedParts||(J.mutatedParts={}),Me=oe(""),Qe=oe(":dels"),st=J.type,Ze=J.type==="deleteRange"?[J.range]:J.type==="delete"?[J.keys]:J.values.length<50?[Al(z,J).filter(function(rt){return rt}),J.values]:[],Xe=Ze[0],We=Ze[1],Ze=J.trans._cache;return f(Xe)?(Me.addKeys(Xe),(Ze=st==="delete"||Xe.length===We.length?bs(Xe,Ze):null)||Qe.addKeys(Xe),(Ze||We)&&(se=oe,me=Ze,ve=We,L.indexes.forEach(function(rt){var ut=se(rt.name||"");function Dt(jt){return jt!=null?rt.extractKey(jt):null}function Ft(jt){return rt.multiEntry&&f(jt)?jt.forEach(function(Sn){return ut.addKey(Sn)}):ut.addKey(jt)}(me||ve).forEach(function(jt,Xr){var Nt=me&&Dt(me[Xr]),Xr=ve&&Dt(ve[Xr]);Pt(Nt,Xr)!==0&&(Nt!=null&&Ft(Nt),Xr!=null&&Ft(Xr))})}))):Xe?(We={from:(We=Xe.lower)!==null&&We!==void 0?We:p.MIN_KEY,to:(We=Xe.upper)!==null&&We!==void 0?We:p.MAX_KEY},Qe.add(We),Me.add(We)):(Me.add(A),Qe.add(A),L.indexes.forEach(function(rt){return oe(rt.name).add(A)})),O.mutate(J).then(function(rt){return!Xe||J.type!=="add"&&J.type!=="put"||(Me.addKeys(rt.results),re&&re.forEach(function(ut){for(var Dt=J.values.map(function(Nt){return ut.extractKey(Nt)}),Ft=ut.keyPath.findIndex(function(Nt){return Nt===z.keyPath}),jt=0,Sn=rt.results.length;jt<Sn;++jt)Dt[jt][Ft]=rt.results[jt];oe(ut.name).addKeys(Dt)})),be.mutatedParts=On(be.mutatedParts||{},De),rt})}}),Z=function(oe){var se=oe.query,oe=se.index,se=se.range;return[oe,new jr((oe=se.lower)!==null&&oe!==void 0?oe:p.MIN_KEY,(se=se.upper)!==null&&se!==void 0?se:p.MAX_KEY)]},fe={get:function(J){return[z,new jr(J.key)]},getMany:function(J){return[z,new jr().addKeys(J.keys)]},count:Z,query:Z,openCursor:Z};return c(fe).forEach(function(J){he[J]=function(oe){var se=te.subscr,me=!!se,ve=xu(te,O)&&qi(J,oe)?oe.obsSet={}:se;if(me){var be=function(We){return We="idb://".concat(x,"/").concat(R,"/").concat(We),ve[We]||(ve[We]=new jr)},De=be(""),Me=be(":dels"),se=fe[J](oe),me=se[0],se=se[1];if((J==="query"&&me.isPrimaryKey&&!oe.values?Me:be(me.name||"")).add(se),!me.isPrimaryKey){if(J!=="count"){var Qe=J==="query"&&ne&&oe.values&&O.query(r(r({},oe),{values:!1}));return O[J].apply(this,arguments).then(function(We){if(J==="query"){if(ne&&oe.values)return Qe.then(function(Dt){return Dt=Dt.result,De.addKeys(Dt),We});var Ze=oe.values?We.result.map(Y):We.result;(oe.values?De:Me).addKeys(Ze)}else if(J==="openCursor"){var rt=We,ut=oe.values;return rt&&Object.create(rt,{key:{get:function(){return Me.addKey(rt.primaryKey),rt.key}},primaryKey:{get:function(){var Dt=rt.primaryKey;return Me.addKey(Dt),Dt}},value:{get:function(){return ut&&De.addKey(rt.primaryKey),rt.value}}})}return We})}Me.add(A)}}return O[J].apply(this,arguments)}}),he}})}};function Ss(p,x,A){if(A.numFailures===0)return x;if(x.type==="deleteRange")return null;var R=x.keys?x.keys.length:"values"in x&&x.values?x.values.length:1;return A.numFailures===R?null:(x=r({},x),f(x.keys)&&(x.keys=x.keys.filter(function(O,L){return!(L in A.failures)})),"values"in x&&f(x.values)&&(x.values=x.values.filter(function(O,L){return!(L in A.failures)})),x)}function Cl(p,x){return A=p,((R=x).lower===void 0||(R.lowerOpen?0<Pt(A,R.lower):0<=Pt(A,R.lower)))&&(p=p,(x=x).upper===void 0||(x.upperOpen?Pt(p,x.upper)<0:Pt(p,x.upper)<=0));var A,R}function la(p,x,fe,R,O,L){if(!fe||fe.length===0)return p;var z=x.query.index,Y=z.multiEntry,ne=x.query.range,re=R.schema.primaryKey.extractKey,he=z.extractKey,Z=(z.lowLevelIndex||z).extractKey,fe=fe.reduce(function(J,oe){var se=J,me=[];if(oe.type==="add"||oe.type==="put")for(var ve=new jr,be=oe.values.length-1;0<=be;--be){var De,Me=oe.values[be],Qe=re(Me);ve.hasKey(Qe)||(De=he(Me),(Y&&f(De)?De.some(function(rt){return Cl(rt,ne)}):Cl(De,ne))&&(ve.addKey(Qe),me.push(Me)))}switch(oe.type){case"add":var st=new jr().addKeys(x.values?J.map(function(ut){return re(ut)}):J),se=J.concat(x.values?me.filter(function(ut){return ut=re(ut),!st.hasKey(ut)&&(st.addKey(ut),!0)}):me.map(function(ut){return re(ut)}).filter(function(ut){return!st.hasKey(ut)&&(st.addKey(ut),!0)}));break;case"put":var Xe=new jr().addKeys(oe.values.map(function(ut){return re(ut)}));se=J.filter(function(ut){return!Xe.hasKey(x.values?re(ut):ut)}).concat(x.values?me:me.map(function(ut){return re(ut)}));break;case"delete":var We=new jr().addKeys(oe.keys);se=J.filter(function(ut){return!We.hasKey(x.values?re(ut):ut)});break;case"deleteRange":var Ze=oe.range;se=J.filter(function(ut){return!Cl(re(ut),Ze)})}return se},p);return fe===p?p:(fe.sort(function(J,oe){return Pt(Z(J),Z(oe))||Pt(re(J),re(oe))}),x.limit&&x.limit<1/0&&(fe.length>x.limit?fe.length=x.limit:p.length===x.limit&&fe.length<x.limit&&(O.dirty=!0)),L?Object.freeze(fe):fe)}function Pl(p,x){return Pt(p.lower,x.lower)===0&&Pt(p.upper,x.upper)===0&&!!p.lowerOpen==!!x.lowerOpen&&!!p.upperOpen==!!x.upperOpen}function wu(p,x){return(function(A,R,O,L){if(A===void 0)return R!==void 0?-1:0;if(R===void 0)return 1;if((R=Pt(A,R))===0){if(O&&L)return 0;if(O)return 1;if(L)return-1}return R})(p.lower,x.lower,p.lowerOpen,x.lowerOpen)<=0&&0<=(function(A,R,O,L){if(A===void 0)return R!==void 0?1:0;if(R===void 0)return-1;if((R=Pt(A,R))===0){if(O&&L)return 0;if(O)return-1;if(L)return 1}return R})(p.upper,x.upper,p.upperOpen,x.upperOpen)}function Il(p,x,A,R){p.subscribers.add(A),R.addEventListener("abort",function(){var O,L;p.subscribers.delete(A),p.subscribers.size===0&&(O=p,L=x,setTimeout(function(){O.subscribers.size===0&&D(L,O)},3e3))})}var Wa={stack:"dbcore",level:0,name:"Cache",create:function(p){var x=p.schema.name;return r(r({},p),{transaction:function(A,R,O){var L,z,Y=p.transaction(A,R,O);return R==="readwrite"&&(z=(L=new AbortController).signal,O=function(ne){return function(){if(L.abort(),R==="readwrite"){for(var re=new Set,he=0,Z=A;he<Z.length;he++){var fe=Z[he],J=Ai["idb://".concat(x,"/").concat(fe)];if(J){var oe=p.table(fe),se=J.optimisticOps.filter(function(ut){return ut.trans===Y});if(Y._explicit&&ne&&Y.mutatedParts)for(var me=0,ve=Object.values(J.queries.query);me<ve.length;me++)for(var be=0,De=(st=ve[me]).slice();be<De.length;be++)sa((Xe=De[be]).obsSet,Y.mutatedParts)&&(D(st,Xe),Xe.subscribers.forEach(function(ut){return re.add(ut)}));else if(0<se.length){J.optimisticOps=J.optimisticOps.filter(function(ut){return ut.trans!==Y});for(var Me=0,Qe=Object.values(J.queries.query);Me<Qe.length;Me++)for(var st,Xe,We,Ze=0,rt=(st=Qe[Me]).slice();Ze<rt.length;Ze++)(Xe=rt[Ze]).res!=null&&Y.mutatedParts&&(ne&&!Xe.dirty?(We=Object.isFrozen(Xe.res),We=la(Xe.res,Xe.req,se,oe,Xe,We),Xe.dirty?(D(st,Xe),Xe.subscribers.forEach(function(ut){return re.add(ut)})):We!==Xe.res&&(Xe.res=We,Xe.promise=ze.resolve({result:We}))):(Xe.dirty&&D(st,Xe),Xe.subscribers.forEach(function(ut){return re.add(ut)})))}}}re.forEach(function(ut){return ut()})}}},Y.addEventListener("abort",O(!1),{signal:z}),Y.addEventListener("error",O(!1),{signal:z}),Y.addEventListener("complete",O(!0),{signal:z})),Y},table:function(A){var R=p.table(A),O=R.schema.primaryKey;return r(r({},R),{mutate:function(L){var z=te.trans;if(O.outbound||z.db._options.cache==="disabled"||z.explicit||z.idbtrans.mode!=="readwrite")return R.mutate(L);var Y=Ai["idb://".concat(x,"/").concat(A)];return Y?(z=R.mutate(L),L.type!=="add"&&L.type!=="put"||!(50<=L.values.length||Al(O,L).some(function(ne){return ne==null}))?(Y.optimisticOps.push(L),L.mutatedParts&&oa(L.mutatedParts),z.then(function(ne){0<ne.numFailures&&(D(Y.optimisticOps,L),(ne=Ss(0,L,ne))&&Y.optimisticOps.push(ne),L.mutatedParts&&oa(L.mutatedParts))}),z.catch(function(){D(Y.optimisticOps,L),L.mutatedParts&&oa(L.mutatedParts)})):z.then(function(ne){var re=Ss(0,r(r({},L),{values:L.values.map(function(he,Z){var fe;return ne.failures[Z]?he:(he=(fe=O.keyPath)!==null&&fe!==void 0&&fe.includes(".")?_e(he):r({},he),F(he,O.keyPath,ne.results[Z]),he)})}),ne);Y.optimisticOps.push(re),queueMicrotask(function(){return L.mutatedParts&&oa(L.mutatedParts)})}),z):R.mutate(L)},query:function(L){if(!xu(te,R)||!qi("query",L))return R.query(L);var z=((re=te.trans)===null||re===void 0?void 0:re.db._options.cache)==="immutable",Z=te,Y=Z.requery,ne=Z.signal,re=(function(oe,se,me,ve){var be=Ai["idb://".concat(oe,"/").concat(se)];if(!be)return[];if(!(se=be.queries[me]))return[null,!1,be,null];var De=se[(ve.query?ve.query.index.name:null)||""];if(!De)return[null,!1,be,null];switch(me){case"query":var Me=De.find(function(Qe){return Qe.req.limit===ve.limit&&Qe.req.values===ve.values&&Pl(Qe.req.query.range,ve.query.range)});return Me?[Me,!0,be,De]:[De.find(function(Qe){return("limit"in Qe.req?Qe.req.limit:1/0)>=ve.limit&&(!ve.values||Qe.req.values)&&wu(Qe.req.query.range,ve.query.range)}),!1,be,De];case"count":return Me=De.find(function(Qe){return Pl(Qe.req.query.range,ve.query.range)}),[Me,!!Me,be,De]}})(x,A,"query",L),he=re[0],Z=re[1],fe=re[2],J=re[3];return he&&Z?he.obsSet=L.obsSet:(Z=R.query(L).then(function(oe){var se=oe.result;if(he&&(he.res=se),z){for(var me=0,ve=se.length;me<ve;++me)Object.freeze(se[me]);Object.freeze(se)}else oe.result=_e(se);return oe}).catch(function(oe){return J&&he&&D(J,he),Promise.reject(oe)}),he={obsSet:L.obsSet,promise:Z,subscribers:new Set,type:"query",req:L,dirty:!1},J?J.push(he):(J=[he],(fe=fe||(Ai["idb://".concat(x,"/").concat(A)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[L.query.index.name||""]=J)),Il(he,J,Y,ne),he.promise.then(function(oe){return{result:la(oe.result,L,fe?.optimisticOps,R,he,z)}})}})}})}};function Yi(p,x){return new Proxy(p,{get:function(A,R,O){return R==="db"?x:Reflect.get(A,R,O)}})}var Qi=(Pr.prototype.version=function(p){if(isNaN(p)||p<.1)throw new Re.Type("Given version is not a positive number");if(p=Math.round(10*p)/10,this.idbdb||this._state.isBeingOpened)throw new Re.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,p);var x=this._versions,A=x.filter(function(R){return R._cfg.version===p})[0];return A||(A=new this.Version(p),x.push(A),x.sort(ai),A.stores({}),this._state.autoSchema=!1,A)},Pr.prototype._whenReady=function(p){var x=this;return this.idbdb&&(this._state.openComplete||te.letThrough||this._vip)?p():new ze(function(A,R){if(x._state.openComplete)return R(new Re.DatabaseClosed(x._state.dbOpenError));if(!x._state.isBeingOpened){if(!x._state.autoOpen)return void R(new Re.DatabaseClosed);x.open().catch(et)}x._state.dbReadyPromise.then(A,R)}).then(p)},Pr.prototype.use=function(p){var x=p.stack,A=p.create,R=p.level,O=p.name;return O&&this.unuse({stack:x,name:O}),p=this._middlewares[x]||(this._middlewares[x]=[]),p.push({stack:x,create:A,level:R??10,name:O}),p.sort(function(L,z){return L.level-z.level}),this},Pr.prototype.unuse=function(p){var x=p.stack,A=p.name,R=p.create;return x&&this._middlewares[x]&&(this._middlewares[x]=this._middlewares[x].filter(function(O){return R?O.create!==R:!!A&&O.name!==A})),this},Pr.prototype.open=function(){var p=this;return Vn(Hn,function(){return vu(p)})},Pr.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var p=this._state,x=Ui.indexOf(this);if(0<=x&&Ui.splice(x,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}p.isBeingOpened||(p.dbReadyPromise=new ze(function(A){p.dbReadyResolve=A}),p.openCanceller=new ze(function(A,R){p.cancelOpen=R}))},Pr.prototype.close=function(A){var x=(A===void 0?{disableAutoOpen:!0}:A).disableAutoOpen,A=this._state;x?(A.isBeingOpened&&A.cancelOpen(new Re.DatabaseClosed),this._close(),A.autoOpen=!1,A.dbOpenError=new Re.DatabaseClosed):(this._close(),A.autoOpen=this._options.autoOpen||A.isBeingOpened,A.openComplete=!1,A.dbOpenError=null)},Pr.prototype.delete=function(p){var x=this;p===void 0&&(p={disableAutoOpen:!0});var A=0<arguments.length&&typeof arguments[0]!="object",R=this._state;return new ze(function(O,L){function z(){x.close(p);var Y=x._deps.indexedDB.deleteDatabase(x.name);Y.onsuccess=Kt(function(){var ne,re,he;ne=x._deps,re=x.name,he=ne.indexedDB,ne=ne.IDBKeyRange,ws(he)||re===uo||ra(he,ne).delete(re).catch(et),O()}),Y.onerror=Yt(L),Y.onblocked=x._fireOnBlocked}if(A)throw new Re.InvalidArgument("Invalid closeOptions argument to db.delete()");R.isBeingOpened?R.dbReadyPromise.then(z):z()})},Pr.prototype.backendDB=function(){return this.idbdb},Pr.prototype.isOpen=function(){return this.idbdb!==null},Pr.prototype.hasBeenClosed=function(){var p=this._state.dbOpenError;return p&&p.name==="DatabaseClosed"},Pr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Pr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Pr.prototype,"tables",{get:function(){var p=this;return c(this._allTables).map(function(x){return p._allTables[x]})},enumerable:!1,configurable:!0}),Pr.prototype.transaction=function(){var p=(function(x,A,R){var O=arguments.length;if(O<2)throw new Re.InvalidArgument("Too few arguments");for(var L=new Array(O-1);--O;)L[O-1]=arguments[O];return R=L.pop(),[x,Ne(L),R]}).apply(this,arguments);return this._transaction.apply(this,p)},Pr.prototype._transaction=function(p,x,A){var R=this,O=te.trans;O&&O.db===this&&p.indexOf("!")===-1||(O=null);var L,z,Y=p.indexOf("?")!==-1;p=p.replace("!","").replace("?","");try{if(z=x.map(function(re){if(re=re instanceof R.Table?re.name:re,typeof re!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return re}),p=="r"||p===$o)L=$o;else{if(p!="rw"&&p!=Fa)throw new Re.InvalidArgument("Invalid transaction mode: "+p);L=Fa}if(O){if(O.mode===$o&&L===Fa){if(!Y)throw new Re.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");O=null}O&&z.forEach(function(re){if(O&&O.storeNames.indexOf(re)===-1){if(!Y)throw new Re.SubTransaction("Table "+re+" not included in parent transaction.");O=null}}),Y&&O&&!O.active&&(O=null)}}catch(re){return O?O._promise(null,function(he,Z){Z(re)}):kr(re)}var ne=(function re(he,Z,fe,J,oe){return ze.resolve().then(function(){var se=te.transless||te,me=he._createTransaction(Z,fe,he._dbSchema,J);if(me.explicit=!0,se={trans:me,transless:se},J)me.idbtrans=J.idbtrans;else try{me.create(),me.idbtrans._explicit=!0,he._state.PR1398_maxLoop=3}catch(De){return De.name===He.InvalidState&&he.isOpen()&&0<--he._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),he.close({disableAutoOpen:!1}),he.open().then(function(){return re(he,Z,fe,null,oe)})):kr(De)}var ve,be=U(oe);return be&&vs(),se=ze.follow(function(){var De;(ve=oe.call(me,me))&&(be?(De=$r.bind(null,null),ve.then(De,De)):typeof ve.next=="function"&&typeof ve.throw=="function"&&(ve=Ws(ve)))},se),(ve&&typeof ve.then=="function"?ze.resolve(ve).then(function(De){return me.active?De:kr(new Re.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):se.then(function(){return ve})).then(function(De){return J&&me._resolve(),me._completion.then(function(){return De})}).catch(function(De){return me._reject(De),kr(De)})})}).bind(null,this,L,z,O,A);return O?O._promise(L,ne,"lock"):te.trans?Vn(te.transless,function(){return R._whenReady(ne)}):this._whenReady(ne)},Pr.prototype.table=function(p){if(!d(this._allTables,p))throw new Re.InvalidTable("Table ".concat(p," does not exist"));return this._allTables[p]},Pr);function Pr(p,x){var A=this;this._middlewares={},this.verno=0;var R=Pr.dependencies;this._options=x=r({addons:Pr.addons,autoOpen:!0,indexedDB:R.indexedDB,IDBKeyRange:R.IDBKeyRange,cache:"cloned"},x),this._deps={indexedDB:x.indexedDB,IDBKeyRange:x.IDBKeyRange},R=x.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var O,L,z,Y,ne,re={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:et,dbReadyPromise:null,cancelOpen:et,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:x.autoOpen};re.dbReadyPromise=new ze(function(Z){re.dbReadyResolve=Z}),re.openCanceller=new ze(function(Z,fe){re.cancelOpen=fe}),this._state=re,this.name=p,this.on=Fs(this,"populate","blocked","versionchange","close",{ready:[Dr,et]}),this.once=function(Z,fe){var J=function(){for(var oe=[],se=0;se<arguments.length;se++)oe[se]=arguments[se];A.on(Z).unsubscribe(J),fe.apply(A,oe)};return A.on(Z,J)},this.on.ready.subscribe=j(this.on.ready.subscribe,function(Z){return function(fe,J){Pr.vip(function(){var oe,se=A._state;se.openComplete?(se.dbOpenError||ze.resolve().then(fe),J&&Z(fe)):se.onReadyBeingFired?(se.onReadyBeingFired.push(fe),J&&Z(fe)):(Z(fe),oe=A,J||Z(function me(){oe.on.ready.unsubscribe(fe),oe.on.ready.unsubscribe(me)}))})}}),this.Collection=(O=this,Bs(hc.prototype,function(ve,me){this.db=O;var J=si,oe=null;if(me)try{J=me()}catch(be){oe=be}var se=ve._ctx,me=se.table,ve=me.hook.reading.fire;this._ctx={table:me,index:se.index,isPrimKey:!se.index||me.schema.primKey.keyPath&&se.index===me.schema.primKey.name,range:J,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:oe,or:se.or,valueMapper:ve!==gt?ve:null}})),this.Table=(L=this,Bs(Xo.prototype,function(Z,fe,J){this.db=L,this._tx=J,this.name=Z,this.schema=fe,this.hook=L._allTables[Z]?L._allTables[Z].hook:Fs(null,{creating:[vt,et],reading:[Ut,gt],updating:[Tr,et],deleting:[pr,et]})})),this.Transaction=(z=this,Bs(Ua.prototype,function(Z,fe,J,oe,se){var me=this;Z!=="readonly"&&fe.forEach(function(ve){ve=(ve=J[ve])===null||ve===void 0?void 0:ve.yProps,ve&&(fe=fe.concat(ve.map(function(be){return be.updatesTable})))}),this.db=z,this.mode=Z,this.storeNames=fe,this.schema=J,this.chromeTransactionDurability=oe,this.idbtrans=null,this.on=Fs(this,"complete","error","abort"),this.parent=se||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ze(function(ve,be){me._resolve=ve,me._reject=be}),this._completion.then(function(){me.active=!1,me.on.complete.fire()},function(ve){var be=me.active;return me.active=!1,me.on.error.fire(ve),me.parent?me.parent._reject(ve):be&&me.idbtrans&&me.idbtrans.abort(),kr(ve)})})),this.Version=(Y=this,Bs(Ti.prototype,function(Z){this.db=Y,this._cfg={version:Z,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(ne=this,Bs(Zo.prototype,function(Z,fe,J){if(this.db=ne,this._ctx={table:Z,index:fe===":id"?null:fe,or:J},this._cmp=this._ascending=Pt,this._descending=function(oe,se){return Pt(se,oe)},this._max=function(oe,se){return 0<Pt(oe,se)?oe:se},this._min=function(oe,se){return Pt(oe,se)<0?oe:se},this._IDBKeyRange=ne._deps.IDBKeyRange,!this._IDBKeyRange)throw new Re.MissingAPI})),this.on("versionchange",function(Z){0<Z.newVersion?console.warn("Another connection wants to upgrade database '".concat(A.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(A.name,"'. Closing db now to resume the delete request.")),A.close({disableAutoOpen:!1})}),this.on("blocked",function(Z){!Z.newVersion||Z.newVersion<Z.oldVersion?console.warn("Dexie.delete('".concat(A.name,"') was blocked")):console.warn("Upgrade '".concat(A.name,"' blocked by other connection holding version ").concat(Z.oldVersion/10))}),this._maxKey=Ei(x.IDBKeyRange),this._createTransaction=function(Z,fe,J,oe){return new A.Transaction(Z,fe,J,A._options.chromeTransactionDurability,oe)},this._fireOnBlocked=function(Z){A.on("blocked").fire(Z),Ui.filter(function(fe){return fe.name===A.name&&fe!==A&&!fe._state.vcFired}).map(function(fe){return fe.on("versionchange").fire(Z)})},this.use(_u),this.use(Wa),this.use(Ki),this.use($s),this.use(Xi);var he=new Proxy(this,{get:function(Z,fe,J){if(fe==="_vip")return!0;if(fe==="table")return function(se){return Yi(A.table(se),he)};var oe=Reflect.get(Z,fe,J);return oe instanceof Xo?Yi(oe,he):fe==="tables"?oe.map(function(se){return Yi(se,he)}):fe==="_createTransaction"?function(){return Yi(oe.apply(this,arguments),he)}:oe}});this.vip=he,R.forEach(function(Z){return Z(A)})}var ua,ln=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",$a=(Xs.prototype.subscribe=function(p,x,A){return this._subscribe(p&&typeof p!="function"?p:{next:p,error:x,complete:A})},Xs.prototype[ln]=function(){return this},Xs);function Xs(p){this._subscribe=p}try{ua={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{ua={indexedDB:null,IDBKeyRange:null}}function mo(p){var x,A=!1,R=new $a(function(O){var L=U(p),z,Y=!1,ne={},re={},he={get closed(){return Y},unsubscribe:function(){Y||(Y=!0,z&&z.abort(),Z&&Gs.storagemutated.unsubscribe(J))}};O.start&&O.start(he);var Z=!1,fe=function(){return ao(oe)},J=function(se){On(ne,se),sa(re,ne)&&fe()},oe=function(){var se,me,ve;!Y&&ua.indexedDB&&(ne={},se={},z&&z.abort(),z=new AbortController,ve=(function(be){var De=Rr();try{L&&vs();var Me=ni(p,be);return Me=L?Me.finally($r):Me}finally{De&&wi()}})(me={subscr:se,signal:z.signal,requery:fe,querier:p,trans:null}),Promise.resolve(ve).then(function(be){A=!0,x=be,Y||me.signal.aborted||(ne={},(function(De){for(var Me in De)if(d(De,Me))return;return 1})(re=se)||Z||(Gs(Jo,J),Z=!0),ao(function(){return!Y&&O.next&&O.next(be)}))},function(be){A=!1,["DatabaseClosedError","AbortError"].includes(be?.name)||Y||ao(function(){Y||O.error&&O.error(be)})}))};return setTimeout(fe,0),he});return R.hasValue=function(){return A},R.getValue=function(){return x},R}var ui=Qi;function go(p){var x=Lr;try{Lr=!0,Gs.storagemutated.fire(p),Tl(p,!0)}finally{Lr=x}}y(ui,r(r({},ot),{delete:function(p){return new ui(p,{addons:[]}).delete()},exists:function(p){return new ui(p,{addons:[]}).open().then(function(x){return x.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(p){try{return x=ui.dependencies,A=x.indexedDB,x=x.IDBKeyRange,(ws(A)?Promise.resolve(A.databases()).then(function(R){return R.map(function(O){return O.name}).filter(function(O){return O!==uo})}):ra(A,x).toCollection().primaryKeys()).then(p)}catch{return kr(new Re.MissingAPI)}var x,A},defineClass:function(){return function(p){m(this,p)}},ignoreTransaction:function(p){return te.trans?Vn(te.transless,p):p()},vip:Hs,async:function(p){return function(){try{var x=Ws(p.apply(this,arguments));return x&&typeof x.then=="function"?x:ze.resolve(x)}catch(A){return kr(A)}}},spawn:function(p,x,A){try{var R=Ws(p.apply(A,x||[]));return R&&typeof R.then=="function"?R:ze.resolve(R)}catch(O){return kr(O)}},currentTransaction:{get:function(){return te.trans||null}},waitFor:function(p,x){return x=ze.resolve(typeof p=="function"?ui.ignoreTransaction(p):p).timeout(x||6e4),te.trans?te.trans.waitFor(x):x},Promise:ze,debug:{get:function(){return cr},set:function(p){yi(p)}},derive:I,extend:m,props:y,override:j,Events:Fs,on:Gs,liveQuery:mo,extendObservabilitySet:On,getByKeyPath:de,setByKeyPath:F,delByKeyPath:function(p,x){typeof x=="string"?F(p,x,void 0):"length"in x&&[].map.call(x,function(A){F(p,A,void 0)})},shallowClone:ie,deepClone:_e,getObjectDiff:Va,cmp:Pt,asap:X,minKey:-1/0,addons:[],connections:Ui,errnames:He,dependencies:ua,cache:Ai,semVer:"4.2.1",version:"4.2.1".split(".").map(function(p){return parseInt(p)}).reduce(function(p,x,A){return p+x/Math.pow(10,2*A)})})),ui.maxKey=Ei(ui.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Gs(Jo,function(p){Lr||(p=new CustomEvent(Us,{detail:p}),Lr=!0,dispatchEvent(p),Lr=!1)}),addEventListener(Us,function(p){p=p.detail,Lr||go(p)}));var Zi,Lr=!1,qs=function(){};return typeof BroadcastChannel<"u"&&((qs=function(){(Zi=new BroadcastChannel(Us)).onmessage=function(p){return p.data&&go(p.data)}})(),typeof Zi.unref=="function"&&Zi.unref(),Gs(Jo,function(p){Lr||Zi.postMessage(p)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(p){if(!Qi.disableBfCache&&p.persisted){cr&&console.debug("Dexie: handling persisted pagehide"),Zi?.close();for(var x=0,A=Ui;x<A.length;x++)A[x].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(p){!Qi.disableBfCache&&p.persisted&&(cr&&console.debug("Dexie: handling persisted pageshow"),qs(),go({all:new jr(-1/0,[[]])}))})),ze.rejectionMapper=function(p,x){return!p||p instanceof le||p instanceof TypeError||p instanceof SyntaxError||!p.name||!je[p.name]?p:(x=new je[p.name](x||p.message,p),"stack"in p&&T(x,"stack",{get:function(){return this.inner.stack}}),x)},yi(cr),r(Qi,Object.freeze({__proto__:null,Dexie:Qi,liveQuery:mo,Entity:hr,cmp:Pt,PropModification:$n,replacePrefix:function(p,x){return new $n({replacePrefix:[p,x]})},add:function(p){return new $n({add:p})},remove:function(p){return new $n({remove:p})},default:Qi,RangeSet:jr,mergeRanges:$i,rangesOverlap:ia}),{default:Qi}),Qi})})(_f)),_f.exports}var HA=zA();const Qg=nh(HA),g0=Symbol.for("Dexie"),rh=globalThis[g0]||(globalThis[g0]=Qg);if(Qg.semVer!==rh.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Qg.semVer} and ${rh.semVer}`);const{liveQuery:kP,mergeRanges:MP,rangesOverlap:OP,RangeSet:DP,cmp:NP,Entity:LP,PropModification:FP,replacePrefix:BP,add:UP,remove:GP,DexieYProvider:jP}=rh;class VA extends rh{saves;constructor(){super("GameEngineDB"),this.version(1).stores({saves:"++id, stateName, timestamp"})}}const Zg=new VA;class Ia{static instance;static getInstance(){return Ia.instance||(Ia.instance=new Ia),Ia.instance}async performSave(e,t){const r=eh.getInstance(),s=Lo.getInstance(),a=so.getInstance(),c=await this.requestSnapshot(r.logic,t),f=await this.requestSnapshot(s.worker,t),m={id:e,stateName:t,timestamp:Date.now(),preview:`Save ${new Date().toLocaleTimeString()}`,sessionData:a.exportSaveData(),logicSnapshot:c,viewSnapshot:f};await Zg.saves.put(m)}async performLoad(e){const t=await Zg.saves.get(e);if(!t)throw new Error("Save not found");const r=so.getInstance(),s=eh.getInstance(),a=Lo.getInstance();return r.lockForLoad(),r.clearSavableKeys(),r.importSaveData(t.sessionData),s.prepareForState(t.stateName),s.createState(t.stateName),s.sendInput(t.stateName,"LOAD_SNAPSHOT",{data:t.logicSnapshot}),a.prepareForState(t.stateName),a.createState(t.stateName),a.loadSnapshot(t.stateName,t.viewSnapshot),s.isInitialized=!0,a.isInitialized=!0,t}requestSnapshot(e,t){return new Promise(r=>{const s=new MessageChannel;s.port1.onmessage=a=>{s.port1.close(),r(a.data)},e.postMessage({type:"INPUT",stateName:t,payload:{action:"GET_SNAPSHOT"}},[s.port2])})}}class mw{constructor(e,t){this.vm=e,this.stateName=t,this.workers=eh.getInstance(),window.addEventListener("keydown",this.handleKeyDown),this.workers.logic.addEventListener("message",this.handleWorkerMessage),this.captureInitialState()}workers;RESET_SLOT=999;update(){this.vm.update()}destroy(){window.removeEventListener("keydown",this.handleKeyDown),this.workers.logic.removeEventListener("message",this.handleWorkerMessage),this.onInternalDestroy()}send(e,t={}){this.workers.sendInput(this.stateName,e,t)}onInternalDestroy(){}captureInitialState(){setTimeout(async()=>{await Ia.getInstance().performSave(this.RESET_SLOT,this.stateName)},200)}handleWorkerMessage=e=>{const{type:t,name:r,payload:s}=e.data;t==="EVENT"&&this.onWorkerEvent(r,s)};handleKeyDown=e=>{this.onKeyDown(e)}}const y0={"Level 1":{width:960,height:540,initialHP:100,spawnCount:10,heroStartX:480,heroStartY:270,moveSpeed:5,manifestPath:"res/manifest.json",bgmKey:"bgm_level1",levelLabel:"Level 1"},"Level 2":{width:960,height:540,initialHP:80,spawnCount:20,heroStartX:100,heroStartY:100,moveSpeed:6,manifestPath:"res/manifest.json",bgmKey:"bgm_level1",levelLabel:"Level 2"},"Level 3":{width:960,height:540,initialHP:50,spawnCount:35,heroStartX:800,heroStartY:450,moveSpeed:8,manifestPath:"res/manifest.json",bgmKey:"bgm_level1",levelLabel:"Level 3"}};var ml=(n=>(n.Level1="Level 1",n.Level2="Level 2",n.Level3="Level 3",n))(ml||{});const WA=n=>{const e=y0[n];return e||(console.warn(`Config for ${n} not found, falling back to Level 1`),y0["Level 1"])};class $A extends mw{constructor(e){super(e,"Game1")}takeDamage(){this.send("TAKE_DAMAGE",{amount:15})}async jumpToGame2(){const{Game2State:e}=await cu(async()=>{const{Game2State:t}=await Promise.resolve().then(()=>ay);return{Game2State:t}},void 0);await Ur.getInstance().replace(new e(!1))}async loadLevel(e){const{Game1State:t}=await cu(async()=>{const{Game1State:r}=await Promise.resolve().then(()=>oy);return{Game1State:r}},void 0);await Ur.getInstance().replace(new t(!1,e))}async resetLevel(){await Ia.getInstance().performLoad(this.RESET_SLOT);const{Game1State:e}=await cu(async()=>{const{Game1State:r}=await Promise.resolve().then(()=>oy);return{Game1State:r}},void 0),t=this.vm.currentLevel||ml.Level1;await Ur.getInstance().replace(new e(!1,t))}onKeyDown(e){e.key==="Escape"&&this.openPauseMenu()}onWorkerEvent(e){e==="EXPLOSION_REQ"&&Pa.getInstance().play("sfx_explosion")}async openPauseMenu(){const{PauseMenuState:e}=await cu(async()=>{const{PauseMenuState:r}=await import("./PauseMenuState-BYMrgD4Z.js");return{PauseMenuState:r}},[]),t=Ur.getInstance();t.getCurrentStateName()===this.stateName&&await t.push(new e)}}class gw{listeners=[];constructor(){this._sharedView=Lo.getInstance().sharedView}_sharedView;get sharedView(){return this._sharedView}setBuffer(e){this._sharedView=e}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}update(){this.notify()}notify(){for(let e=0;e<this.listeners.length;e++)this.listeners[e]()}}const to={HERO_X:0,HERO_Y:1,HERO_ROTATION:2,HERO_SCALE:3,HERO_HP_DISPLAY:4,HERO_FRAME:5,ACTIVE_ROCK_COUNT:6,ROCKS_START_INDEX:10,ROCK_STRIDE:3,BUFFER_SIZE:4096};class XA extends gw{get pos(){return{x:this.sharedView[to.HERO_X]||0,y:this.sharedView[to.HERO_Y]||0}}get hp(){return this.sharedView[to.HERO_HP_DISPLAY]||0}get entityCount(){return Math.floor(this.sharedView[to.ACTIVE_ROCK_COUNT]||0)}get heroVisuals(){return{x:this.sharedView[to.HERO_X]||0,y:this.sharedView[to.HERO_Y]||0,rotation:this.sharedView[to.HERO_ROTATION]||0,scale:this.sharedView[to.HERO_SCALE]||1,currentFrame:this.sharedView[to.HERO_FRAME]||0}}getRockViewData(e){const t=to.ROCKS_START_INDEX+e*to.ROCK_STRIDE;return{x:this.sharedView[t]||0,y:this.sharedView[t+1]||0,rotation:this.sharedView[t+2]||0}}}var ig={exports:{}},sg={exports:{}},og,v0;function qA(){if(v0)return og;v0=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return og=n,og}var ag,_0;function KA(){if(_0)return ag;_0=1;var n=qA();function e(){}function t(){}return t.resetWarningCache=e,ag=function(){function r(c,f,m,_,w,d){if(d!==n){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},ag}var x0;function YA(){return x0||(x0=1,sg.exports=KA()()),sg.exports}var QA=YA();const Mr=nh(QA);function ks(n){return ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ks(n)}function yw(n){var e=(function(t,r){if(ks(t)!=="object"||t===null)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var a=s.call(t,r);if(ks(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)})(n,"string");return ks(e)==="symbol"?e:String(e)}function fn(n,e,t){return(e=yw(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lg(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function _l(n){return(function(e){if(Array.isArray(e))return lg(e)})(n)||(function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)})(n)||(function(e,t){if(e){if(typeof e=="string")return lg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lg(e,t):void 0}})(n)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function en(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),s=2;s<t;s++)r[s-2]=arguments[s]}var ZA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function JA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var eC=function(n){return n==null};function Qh(n){var e=[];if(n===void 0)return e;if(typeof n=="string")e=n.split(",");else if(typeof n=="number")e=[n];else if(Array.isArray(n))e=_l(n);else{if(n===null||ks(n)!=="object")return e;e=[n&&n?.x||0,n&&n?.y||0]}return e.filter((function(t){return!eC(t)&&!isNaN(t)})).map(Number)}function w0(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function ug(n){return n instanceof er||n instanceof Ca}var Nf=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function cg(n,e,t){if(ug(n[e])&&ug(t))n[e].copyFrom(t);else if(ug(n[e])){var r=Qh(t);en(r!==void 0&&r.length>0&&r.length<3,"The property `%s` is a `Point` and must be set to a comma-separated string of either coordinates, an array containing coordinates, or a Point.",e,JSON.stringify(t),ks(t)),n[e].set(r.shift(),r.shift())}else n[e]=t}var Bc,vw=function(n){var e,t=n;if(!Array.isArray(t)){if(e=n,Object.prototype.toString.call(e)!=="[object Object]")throw new Error("collection needs to be an Array or Object");t=Object.keys(n)}var r={};return t.forEach((function(s){r[s]=!0})),function(s){return r[s]!==void 0}},_w=function(n){return function(){return!n.apply(void 0,arguments)}},Jg="children",tC=(fn(Bc={},Jg,!0),fn(Bc,"parent",!0),fn(Bc,"worldAlpha",!0),fn(Bc,"worldTransform",!0),fn(Bc,"worldVisible",!0),Bc),ey={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},Oa=function(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=function(f){return requestAnimationFrame((function(){var m,_;f==null||(m=f.__reactpixi)===null||m===void 0||(_=m.root)===null||_===void 0||_.emit("__REACT_PIXI_REQUEST_RENDER__")}))},s=function(f,m){if(t.hasOwnProperty(f))return en(m.typeofs.some((function(_){return ks(t[f])===_}))||m.instanceofs.some((function(_){return t[f]instanceof _})),"".concat(n," ").concat(f," prop is invalid")),t[f]};if(t.texture)return en(t.texture instanceof lt,"".concat(n," texture needs to be typeof `Texture`")),t.texture;var a=s("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||s("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||s("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,lt]});en(!!a,"".concat(n," could not get texture from props"));var c=lt.from(a);return c.__reactpixi={root:e},c.once("update",r),c.once("loaded",r),c.valid&&r(c),c},rC=_w(vw([].concat(_l(Object.keys(tC)),_l(Nf))));function Da(n,e,t){var r=!1;if(en(Gr.prototype.isPrototypeOf(n),"instance needs to be typeof `DisplayObject`, got `%s`",ks(n)),!t.ignoreEvents)for(var s=typeof n.removeListener=="function",a=typeof n.on=="function",c=0;c<Nf.length;c++){var f=Nf[c];e[f]!==t[f]&&(r=!0,typeof e[f]=="function"&&s&&n.removeListener(f,e[f]),typeof t[f]=="function"&&a&&n.on(f,t[f]))}var m=Object.keys(t||{});if(t.overwriteProps){for(var _=0;_<m.length;_++){var w=m[_];e[w]!==t[w]&&(r=!0,cg(n,w,t[w]))}return r}for(var d=m.filter(rC),y=0;y<d.length;y++){var b=d[y],T=t[b];t[b]!==e[b]&&(r=!0),T!==void 0?cg(n,b,T):b in ey?(console.warn("setting default value: ".concat(b,", from: ").concat(n[b]," to: ").concat(T," for"),n),r=!0,cg(n,b,ey[b])):console.warn("ignoring prop: ".concat(b,", from ").concat(n[b]," to ").concat(T," for"),n)}return r}var nC=function(n,e){var t=e.text,r=e.style;return new MA(t,r)},iC=function(){return new Di};function yu(n,e){if(n==null)return{};var t,r,s=(function(c,f){if(c==null)return{};var m,_,w={},d=Object.keys(c);for(_=0;_<d.length;_++)m=d[_],f.indexOf(m)>=0||(w[m]=c[m]);return w})(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}var sC=["draw","geometry"],oC=function(n,e){var t=e.geometry;en(!t||t instanceof Jh,"Graphics geometry needs to be a `Graphics`");var r=t?new Jh(t.geometry):new Jh;return r.applyProps=function(s,a,c){var f=c.draw;c.geometry;var m=Da(s,a,yu(c,sC));return a.draw!==f&&typeof f=="function"&&(m=!0,f.call(r,r)),m},r},aC=["image","texture"],lC=function(n,e){var t=e.leftWidth,r=t===void 0?10:t,s=e.topHeight,a=s===void 0?10:s,c=e.rightWidth,f=c===void 0?10:c,m=e.bottomHeight,_=m===void 0?10:m,w=Oa("NineSlicePlane",n,e),d=new tA(w,r,a,f,_);return d.applyProps=function(y,b,T){var I=T.image,k=T.texture,N=Da(y,b,yu(T,aC));return(I||k)&&(k!==b.texture&&(N=!0),y.texture=Oa("NineSlicePlane",n,T)),N},d};function b0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.push.apply(t,r)}return t}function af(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?b0(Object(t),!0).forEach((function(r){fn(n,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):b0(Object(t)).forEach((function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))}))}return n}var uC=function(n,e){var t=e.maxSize,r=t===void 0?1500:t,s=e.batchSize,a=s===void 0?16384:s,c=e.autoResize,f=c!==void 0&&c,m=af(af({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),e.properties||{}),_=af(af({},{children:!1,texture:!1,baseTexture:!1}),e.destroyOptions||{}),w=new iA(r,m,a,f);return w.willUnmount=function(d,y,b){d.destroy(_)},w},cC=["image","texture"],hC=function(n,e){var t=new zo(Oa("Sprite",n,e));return t.applyProps=function(r,s,a){var c=a.image,f=a.texture,m=Da(r,s,yu(a,cC));return(f&&s.texture!==a.texture||c&&s.image!==a.image)&&(s.texture!==a.texture&&(m=!0),r.texture=Oa("Sprite",n,a)),m},t},dC=["textures","isPlaying","initialFrame","images"],fC=function(n,e){var t=e.textures,r=e.images,s=e.isPlaying,a=s===void 0||s,c=e.initialFrame,f=function(_){return _.map((function(w){return en(w instanceof lt||w?.texture,"AnimationSprite texture needs to be an array of `Texture` or `{ texture: Texture, time:\n                number }`"),w}))},m=r?id.fromImages(r):new id(f(t));return m[a?"gotoAndPlay":"gotoAndStop"](c||0),m.applyProps=function(_,w,d){var y=d.textures,b=d.isPlaying,T=d.initialFrame,I=d.images,k=Da(_,w,yu(d,dC));if(I&&w.images!==I){for(var N=[],W=0;W<I.length;++W)N.push(lt.from(I[W]));_.textures=N,k=!0}if(y&&w.textures!==y&&(_.textures=f(y),k=!0),b!==w.isPlaying||T!==w.initialFrame){var j=typeof T=="number"?T:m.currentFrame||0;m[b?"gotoAndPlay":"gotoAndStop"](j),k=!0}return k},m},pC=function(n,e){var t=e.text,r=t===void 0?"":t,s=e.style,a=s===void 0?{}:s,c=e.isSprite,f=new xy(r,a);return c?(f.updateText(),new zo(f.texture)):f},mC=["tileScale","tilePosition","image","texture"],gC=function(n,e){var t=e.width,r=t===void 0?100:t,s=e.height,a=s===void 0?100:s,c=Oa("TilingSprite",n,e),f=new wy(c,r,a);return f.applyProps=function(m,_,w){var d=w.tileScale,y=w.tilePosition,b=w.image,T=w.texture,I=Da(m,_,yu(w,mC));if(y){var k,N=Qh(y);(k=m.tilePosition).set.apply(k,_l(N)),I=!w0(Qh(_.tilePosition),N)||I}if(d){var W,j=Qh(d);(W=m.tileScale).set.apply(W,_l(j)),I=!w0(Qh(_.tileScale),j)||I}return(b||T)&&(T!==_.texture&&(I=!0),m.texture=Oa("Sprite",n,w)),I},f},yC=["image","texture"],vC=function(n,e){var t=Oa("Mesh",n,e),r=e.vertices,s=e.uvs,a=e.indices,c=e.drawMode,f=c===void 0?Fo.TRIANGLES:c,m=new rA(t,r,s,a,f);return m.applyProps=function(_,w,d){var y=d.image,b=d.texture,T=Da(_,w,yu(d,yC));return(y||b)&&(b!==w.texture&&(T=!0),_.texture=Oa("Mesh",n,d)),T},m},_C=["image","texture"],xC=function(n,e){var t=Oa("SimpleRope",n,e),r=e.points,s=new nA(t,r);return s.applyProps=function(a,c,f){var m=f.image,_=f.texture,w=yu(f,_C);en(Array.isArray(f.points),"SimpleRope points needs to be %s","Array<Point>");var d=Da(a,c,w);return(m||_)&&(_!==c.texture&&(d=!0),a.texture=Oa("SimpleRope",n,f)),d},s},wC=Object.freeze({__proto__:null,BitmapText:nC,Container:iC,Graphics:oC,NineSlicePlane:lC,ParticleContainer:uC,Sprite:hC,Text:pC,TilingSprite:gC,SimpleMesh:vC,SimpleRope:xC,AnimatedSprite:fC});function S0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.push.apply(t,r)}return t}function E0(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?S0(Object(t),!0).forEach((function(r){fn(n,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):S0(Object(t)).forEach((function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))}))}return n}var ms={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},bC=Object.keys(ms).reduce((function(n,e){return E0(E0({},n),{},fn({},e,wC[e]))}),{}),xw={};function SC(n,e){return en(!!n,"Expect type to be defined, got `%s`",n),en(!ms[n],"Component `%s` could not be created, already exists in default components.",n),xw[n]=e,n}var T0,A0,C0,P0,ty={},ry={},EC={get exports(){return ry},set exports(n){ry=n}},I0={};function TC(){return A0||(A0=1,EC.exports=(T0||(T0=1,(function(n){function e(D,K){var G=D.length;D.push(K);e:for(;0<G;){var U=G-1>>>1,q=D[U];if(!(0<s(q,K)))break e;D[U]=K,D[G]=q,G=U}}function t(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var K=D[0],G=D.pop();if(G!==K){D[0]=G;e:for(var U=0,q=D.length,le=q>>>1;U<le;){var Te=2*(U+1)-1,Oe=D[Te],Fe=Te+1,He=D[Fe];if(0>s(Oe,G))Fe<q&&0>s(He,Oe)?(D[U]=He,D[Fe]=G,U=Fe):(D[U]=Oe,D[Te]=G,U=Te);else{if(!(Fe<q&&0>s(He,G)))break e;D[U]=He,D[Fe]=G,U=Fe}}}return K}function s(D,K){var G=D.sortIndex-K.sortIndex;return G!==0?G:D.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],_=[],w=1,d=null,y=3,b=!1,T=!1,I=!1,k=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function j(D){for(var K=t(_);K!==null;){if(K.callback===null)r(_);else{if(!(K.startTime<=D))break;r(_),K.sortIndex=K.expirationTime,e(m,K)}K=t(_)}}function ee(D){if(I=!1,j(D),!T)if(t(m)!==null)T=!0,H(X);else{var K=t(_);K!==null&&V(ee,K.startTime-D)}}function X(D,K){T=!1,I&&(I=!1,N(ye),ye=-1),b=!0;var G=y;try{for(j(K),d=t(m);d!==null&&(!(d.expirationTime>K)||D&&!ge());){var U=d.callback;if(typeof U=="function"){d.callback=null,y=d.priorityLevel;var q=U(d.expirationTime<=K);K=n.unstable_now(),typeof q=="function"?d.callback=q:d===t(m)&&r(m),j(K)}else r(m);d=t(m)}if(d!==null)var le=!0;else{var Te=t(_);Te!==null&&V(ee,Te.startTime-K),le=!1}return le}finally{d=null,y=G,b=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var de,F=!1,ie=null,ye=-1,Ne=5,Ce=-1;function ge(){return!(n.unstable_now()-Ce<Ne)}function _e(){if(ie!==null){var D=n.unstable_now();Ce=D;var K=!0;try{K=ie(!0,D)}finally{K?de():(F=!1,ie=null)}}else F=!1}if(typeof W=="function")de=function(){W(_e)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,Ke=xe.port2;xe.port1.onmessage=_e,de=function(){Ke.postMessage(null)}}else de=function(){k(_e,0)};function H(D){ie=D,F||(F=!0,de())}function V(D,K){ye=k((function(){D(n.unstable_now())}),K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){T||b||(T=!0,H(X))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ne=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(D){switch(y){case 1:case 2:case 3:var K=3;break;default:K=y}var G=y;y=K;try{return D()}finally{y=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,K){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var G=y;y=D;try{return K()}finally{y=G}},n.unstable_scheduleCallback=function(D,K,G){var U=n.unstable_now();switch(G=typeof G=="object"&&G!==null&&typeof(G=G.delay)=="number"&&0<G?U+G:U,D){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return D={id:w++,callback:K,priorityLevel:D,startTime:G,expirationTime:q=G+q,sortIndex:-1},G>U?(D.sortIndex=G,e(_,D),t(m)===null&&D===t(_)&&(I?(N(ye),ye=-1):I=!0,V(ee,G-U))):(D.sortIndex=q,e(m,D),T||b||(T=!0,H(X))),D},n.unstable_shouldYield=ge,n.unstable_wrapCallback=function(D){var K=y;return function(){var G=y;y=K;try{return D.apply(this,arguments)}finally{y=G}}}})(I0)),I0)),ry}function AC(){return P0||(P0=1,C0=function(n){var e={},t=mn,r=TC(),s=Object.assign;function a(l){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+l,v=1;v<arguments.length;v++)u+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,f=Symbol.for("react.element"),m=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),b=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),j=Symbol.for("react.offscreen"),ee=Symbol.iterator;function X(l){return l===null||typeof l!="object"?null:typeof(l=ee&&l[ee]||l["@@iterator"])=="function"?l:null}function de(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case _:return"Fragment";case m:return"Portal";case d:return"Profiler";case w:return"StrictMode";case I:return"Suspense";case k:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case b:return(l.displayName||"Context")+".Consumer";case y:return(l._context.displayName||"Context")+".Provider";case T:var u=l.render;return(l=l.displayName)||(l=(l=u.displayName||u.name||"")!==""?"ForwardRef("+l+")":"ForwardRef"),l;case N:return(u=l.displayName||null)!==null?u:de(l.type)||"Memo";case W:u=l._payload,l=l._init;try{return de(l(u))}catch{}}return null}function F(l){var u=l.type;switch(l.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=(l=u.render).displayName||l.name||"",u.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(u);case 8:return u===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function ie(l){var u=l,v=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do(4098&(u=l).flags)!=0&&(v=u.return),l=u.return;while(l)}return u.tag===3?v:null}function ye(l){if(ie(l)!==l)throw Error(a(188))}function Ne(l){var u=l.alternate;if(!u){if((u=ie(l))===null)throw Error(a(188));return u!==l?null:l}for(var v=l,E=u;;){var C=v.return;if(C===null)break;var M=C.alternate;if(M===null){if((E=C.return)!==null){v=E;continue}break}if(C.child===M.child){for(M=C.child;M;){if(M===v)return ye(C),l;if(M===E)return ye(C),u;M=M.sibling}throw Error(a(188))}if(v.return!==E.return)v=C,E=M;else{for(var $=!1,ue=C.child;ue;){if(ue===v){$=!0,v=C,E=M;break}if(ue===E){$=!0,E=C,v=M;break}ue=ue.sibling}if(!$){for(ue=M.child;ue;){if(ue===v){$=!0,v=M,E=C;break}if(ue===E){$=!0,E=M,v=C;break}ue=ue.sibling}if(!$)throw Error(a(189))}}if(v.alternate!==E)throw Error(a(190))}if(v.tag!==3)throw Error(a(188));return v.stateNode.current===v?l:u}function Ce(l){return(l=Ne(l))!==null?ge(l):null}function ge(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var u=ge(l);if(u!==null)return u;l=l.sibling}return null}function _e(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){if(l.tag!==4){var u=_e(l);if(u!==null)return u}l=l.sibling}return null}var xe,Ke=Array.isArray,H=n.getPublicInstance,V=n.getRootHostContext,D=n.getChildHostContext,K=n.prepareForCommit,G=n.resetAfterCommit,U=n.createInstance,q=n.appendInitialChild,le=n.finalizeInitialChildren,Te=n.prepareUpdate,Oe=n.shouldSetTextContent,Fe=n.createTextInstance,He=n.scheduleTimeout,Je=n.cancelTimeout,Re=n.noTimeout,je=n.isPrimaryRenderer,ot=n.supportsMutation,et=n.supportsPersistence,gt=n.supportsHydration,Ut=n.getInstanceFromNode,dt=n.preparePortalMount,vt=n.getCurrentEventPriority,pr=n.detachDeletedInstance,Tr=n.supportsMicrotasks,Ni=n.scheduleMicrotask,Dr=n.supportsTestSelectors,cr=n.findFiberRoot,yi=n.getBoundingRect,zn=n.getTextContent,In=n.isHiddenSubtree,Ms=n.matchAccessibilityRole,Li=n.setFocusIfFocusable,Zn=n.setupIntersectionObserver,Os=n.appendChild,Jn=n.appendChildToContainer,vi=n.commitTextUpdate,_i=n.commitMount,gs=n.commitUpdate,oo=n.insertBefore,Ds=n.insertInContainerBefore,Hn=n.removeChild,te=n.removeChildFromContainer,Ae=n.resetTextContent,Bt=n.hideInstance,Zt=n.hideTextInstance,ze=n.unhideInstance,Rt=n.unhideTextInstance,gn=n.clearContainer,ei=n.cloneInstance,Wr=n.createContainerChildSet,Rn=n.appendChildToContainerChildSet,Vo=n.finalizeContainerChildren,xi=n.replaceContainerChildren,Rr=n.cloneHiddenInstance,wi=n.cloneHiddenTextInstance,Fi=n.canHydrateInstance,ys=n.canHydrateTextInstance,Kt=n.canHydrateSuspenseInstance,wr=n.isSuspenseInstancePending,ti=n.isSuspenseInstanceFallback,bi=n.getSuspenseInstanceFallbackErrorDetails,Si=n.registerSuspenseInstanceRetry,ri=n.getNextHydratableSibling,xl=n.getFirstHydratableChild,ni=n.getFirstHydratableChildWithinContainer,vs=n.getFirstHydratableChildWithinSuspenseInstance,$r=n.hydrateInstance,Ns=n.hydrateTextInstance,wl=n.hydrateSuspenseInstance,ii=n.getNextHydratableInstanceAfterSuspenseInstance,Bi=n.commitHydratedContainer,Vn=n.commitHydratedSuspenseInstance,La=n.clearSuspenseBoundary,ao=n.clearSuspenseBoundaryFromContainer,kr=n.shouldDeleteUnhydratedTailInstances,lo=n.didNotMatchHydratedContainerTextInstance,rr=n.didNotMatchHydratedTextInstance;function Wo(l){if(xe===void 0)try{throw Error()}catch(v){var u=v.stack.trim().match(/\n( *(at )?)/);xe=u&&u[1]||""}return`
`+xe+l}var Ui=!1;function uo(l,u){if(!l||Ui)return"";Ui=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Le){var E=Le}Reflect.construct(l,[],u)}else{try{u.call()}catch(Le){E=Le}l.call(u.prototype)}else{try{throw Error()}catch(Le){E=Le}l()}}catch(Le){if(Le&&E&&typeof Le.stack=="string"){for(var C=Le.stack.split(`
`),M=E.stack.split(`
`),$=C.length-1,ue=M.length-1;1<=$&&0<=ue&&C[$]!==M[ue];)ue--;for(;1<=$&&0<=ue;$--,ue--)if(C[$]!==M[ue]){if($!==1||ue!==1)do if($--,0>--ue||C[$]!==M[ue]){var Se=`
`+C[$].replace(" at new "," at ");return l.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",l.displayName)),Se}while(1<=$&&0<=ue);break}}}finally{Ui=!1,Error.prepareStackTrace=v}return(l=l?l.displayName||l.name:"")?Wo(l):""}var $o=Object.prototype.hasOwnProperty,Fa=[],Wn=-1;function si(l){return{current:l}}function $t(l){0>Wn||(l.current=Fa[Wn],Fa[Wn]=null,Wn--)}function hr(l,u){Wn++,Fa[Wn]=l.current,l.current=u}var Pt={},tn=si(Pt),wn=si(!1),Gi=Pt;function $n(l,u){var v=l.type.contextTypes;if(!v)return Pt;var E=l.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===u)return E.__reactInternalMemoizedMaskedChildContext;var C,M={};for(C in v)M[C]=u[C];return E&&((l=l.stateNode).__reactInternalMemoizedUnmaskedChildContext=u,l.__reactInternalMemoizedMaskedChildContext=M),M}function rn(l){return(l=l.childContextTypes)!=null}function Ls(){$t(wn),$t(tn)}function Xo(l,u,v){if(tn.current!==Pt)throw Error(a(168));hr(tn,u),hr(wn,v)}function dr(l,u,v){var E=l.stateNode;if(u=u.childContextTypes,typeof E.getChildContext!="function")return v;for(var C in E=E.getChildContext())if(!(C in u))throw Error(a(108,F(l)||"Unknown",C));return s({},v,E)}function Fs(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Pt,Gi=tn.current,hr(tn,l),hr(wn,wn.current),!0}function Bs(l,u,v){var E=l.stateNode;if(!E)throw Error(a(169));v?(l=dr(l,u,Gi),E.__reactInternalMemoizedMergedChildContext=l,$t(wn),$t(tn),hr(tn,l)):$t(wn),hr(wn,v)}var nn=Math.clz32?Math.clz32:function(l){return(l>>>=0)===0?32:31-(Ba(l)/co|0)|0},Ba=Math.log,co=Math.LN2,qo=64,Ko=4194304;function Xt(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&l;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&l;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function Yo(l,u){var v=l.pendingLanes;if(v===0)return 0;var E=0,C=l.suspendedLanes,M=l.pingedLanes,$=268435455&v;if($!==0){var ue=$&~C;ue!==0?E=Xt(ue):(M&=$)!==0&&(E=Xt(M))}else($=v&~C)!==0?E=Xt($):M!==0&&(E=Xt(M));if(E===0)return 0;if(u!==0&&u!==E&&(u&C)==0&&((C=E&-E)>=(M=u&-u)||C===16&&(4194240&M)!=0))return u;if((4&E)!=0&&(E|=16&v),(u=l.entangledLanes)!==0)for(l=l.entanglements,u&=E;0<u;)C=1<<(v=31-nn(u)),E|=l[v],u&=~C;return E}function hc(l,u){switch(l){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;default:return-1}}function qt(l){return(l=-1073741825&l.pendingLanes)!==0?l:1073741824&l?1073741824:0}function bl(){var l=qo;return(4194240&(qo<<=1))==0&&(qo=64),l}function Sl(l){for(var u=[],v=0;31>v;v++)u.push(l);return u}function Qo(l,u,v){l.pendingLanes|=u,u!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),(l=l.eventTimes)[u=31-nn(u)]=v}function sn(l,u){var v=l.entangledLanes|=u;for(l=l.entanglements;v;){var E=31-nn(v),C=1<<E;C&u|l[E]&u&&(l[E]|=u),v&=~C}}var Gt=0;function oi(l){return 1<(l&=-l)?4<l?(268435455&l)!=0?16:536870912:4:1}var on=r.unstable_scheduleCallback,ji=r.unstable_cancelCallback,Zo=r.unstable_shouldYield,Ar=r.unstable_requestPaint,Yt=r.unstable_now,ho=r.unstable_ImmediatePriority,Jo=r.unstable_UserBlockingPriority,Us=r.unstable_NormalPriority,Gs=r.unstable_IdlePriority,Ua=null,Cr=null,kn=typeof Object.is=="function"?Object.is:function(l,u){return l===u&&(l!==0||1/l==1/u)||l!=l&&u!=u},zi=null,Hi=!1,Ei=!1;function _s(l){zi===null?zi=[l]:zi.push(l)}function Mn(){if(!Ei&&zi!==null){Ei=!0;var l=0,u=Gt;try{var v=zi;for(Gt=1;l<v.length;l++){var E=v[l];do E=E(!0);while(E!==null)}zi=null,Hi=!1}catch(C){throw zi!==null&&(zi=zi.slice(l+1)),on(ho,Mn),C}finally{Gt=u,Ei=!1}}return null}var ea=[],Vi=0,ta=null,fo=0,an=[],yn=0,vn=null,ai=1,li="";function js(l,u){ea[Vi++]=fo,ea[Vi++]=ta,ta=l,fo=u}function po(l,u,v){an[yn++]=ai,an[yn++]=li,an[yn++]=vn,vn=l;var E=ai;l=li;var C=32-nn(E)-1;E&=~(1<<C),v+=1;var M=32-nn(u)+C;if(30<M){var $=C-C%5;M=(E&(1<<$)-1).toString(32),E>>=$,C-=$,ai=1<<32-nn(u)+C|v<<C|E,li=M+l}else ai=1<<M|v<<C|E,li=l}function zs(l){l.return!==null&&(js(l,1),po(l,1,0))}function Ga(l){for(;l===ta;)ta=ea[--Vi],ea[Vi]=null,fo=ea[--Vi],ea[Vi]=null;for(;l===vn;)vn=an[--yn],an[yn]=null,li=an[--yn],an[yn]=null,ai=an[--yn],an[yn]=null}var ar=null,Nr=null,nr=!1,Wi=!1,Ti=null;function xs(l,u){var v=ki(5,null,null,0);v.elementType="DELETED",v.stateNode=u,v.return=l,(u=l.deletions)===null?(l.deletions=[v],l.flags|=16):u.push(v)}function ra(l,u){switch(l.tag){case 5:return(u=Fi(u,l.type,l.pendingProps))!==null&&(l.stateNode=u,ar=l,Nr=xl(u),!0);case 6:return(u=ys(u,l.pendingProps))!==null&&(l.stateNode=u,ar=l,Nr=null,!0);case 13:if((u=Kt(u))!==null){var v=vn!==null?{id:ai,overflow:li}:null;return l.memoizedState={dehydrated:u,treeContext:v,retryLane:1073741824},(v=ki(18,null,null,0)).stateNode=u,v.return=l,l.child=v,ar=l,Nr=null,!0}return!1;default:return!1}}function ws(l){return(1&l.mode)!=0&&(128&l.flags)==0}function Hs(l){if(nr){var u=Nr;if(u){var v=u;if(!ra(l,u)){if(ws(l))throw Error(a(418));u=ri(v);var E=ar;u&&ra(l,u)?xs(E,v):(l.flags=-4097&l.flags|2,nr=!1,ar=l)}}else{if(ws(l))throw Error(a(418));l.flags=-4097&l.flags|2,nr=!1,ar=l}}}function ja(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;ar=l}function jr(l){if(!gt||l!==ar)return!1;if(!nr)return ja(l),nr=!0,!1;if(l.tag!==3&&(l.tag!==5||kr(l.type)&&!Oe(l.type,l.memoizedProps))){var u=Nr;if(u){if(ws(l))throw na(),Error(a(418));for(;u;)xs(l,u),u=ri(u)}}if(ja(l),l.tag===13){if(!gt)throw Error(a(316));if(!(l=(l=l.memoizedState)!==null?l.dehydrated:null))throw Error(a(317));Nr=ii(l)}else Nr=ar?ri(l.stateNode):null;return!0}function na(){for(var l=Nr;l;)l=ri(l)}function $i(){gt&&(Nr=ar=null,Wi=nr=!1)}function ia(l){Ti===null?Ti=[l]:Ti.push(l)}var El=c.ReactCurrentBatchConfig;function za(l,u){if(kn(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var v=Object.keys(l),E=Object.keys(u);if(v.length!==E.length)return!1;for(E=0;E<v.length;E++){var C=v[E];if(!$o.call(u,C)||!kn(l[C],u[C]))return!1}return!0}function dc(l){switch(l.tag){case 5:return Wo(l.type);case 16:return Wo("Lazy");case 13:return Wo("Suspense");case 19:return Wo("SuspenseList");case 0:case 2:case 15:return l=uo(l.type,!1);case 11:return l=uo(l.type.render,!1);case 1:return l=uo(l.type,!0);default:return""}}function On(l,u){if(l&&l.defaultProps){for(var v in u=s({},u),l=l.defaultProps)u[v]===void 0&&(u[v]=l[v]);return u}return u}var sa=si(null),Ai=null,Vs=null,Ha=null;function oa(){Ha=Vs=Ai=null}function Tl(l,u,v){je?(hr(sa,u._currentValue),u._currentValue=v):(hr(sa,u._currentValue2),u._currentValue2=v)}function aa(l){var u=sa.current;$t(sa),je?l._currentValue=u:l._currentValue2=u}function vu(l,u,v){for(;l!==null;){var E=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,E!==null&&(E.childLanes|=u)):E!==null&&(E.childLanes&u)!==u&&(E.childLanes|=u),l===v)break;l=l.return}}function Ws(l,u){Ai=l,Ha=Vs=null,(l=l.dependencies)!==null&&l.firstContext!==null&&((l.lanes&u)!=0&&(Fr=!0),l.firstContext=null)}function bn(l){var u=je?l._currentValue:l._currentValue2;if(Ha!==l)if(l={context:l,memoizedValue:u,next:null},Vs===null){if(Ai===null)throw Error(a(308));Vs=l,Ai.dependencies={lanes:0,firstContext:l}}else Vs=Vs.next=l;return u}var $s=null;function Va(l){$s===null?$s=[l]:$s.push(l)}function Al(l,u,v,E){var C=u.interleaved;return C===null?(v.next=v,Va(u)):(v.next=C.next,C.next=v),u.interleaved=v,Xi(l,E)}function Xi(l,u){l.lanes|=u;var v=l.alternate;for(v!==null&&(v.lanes|=u),v=l,l=l.return;l!==null;)l.childLanes|=u,(v=l.alternate)!==null&&(v.childLanes|=u),v=l,l=l.return;return v.tag===3?v.stateNode:null}var bs=!1;function _u(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xu(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function qi(l,u){return{eventTime:l,lane:u,tag:0,payload:null,callback:null,next:null}}function Ki(l,u,v){var E=l.updateQueue;if(E===null)return null;if(E=E.shared,(2&zt)!=0){var C=E.pending;return C===null?u.next=u:(u.next=C.next,C.next=u),E.pending=u,Xi(l,v)}return(C=E.interleaved)===null?(u.next=u,Va(E)):(u.next=C.next,C.next=u),E.interleaved=u,Xi(l,v)}function Ss(l,u,v){if((u=u.updateQueue)!==null&&(u=u.shared,(4194240&v)!=0)){var E=u.lanes;v|=E&=l.pendingLanes,u.lanes=v,sn(l,v)}}function Cl(l,u){var v=l.updateQueue,E=l.alternate;if(E!==null&&v===(E=E.updateQueue)){var C=null,M=null;if((v=v.firstBaseUpdate)!==null){do{var $={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};M===null?C=M=$:M=M.next=$,v=v.next}while(v!==null);M===null?C=M=u:M=M.next=u}else C=M=u;return v={baseState:E.baseState,firstBaseUpdate:C,lastBaseUpdate:M,shared:E.shared,effects:E.effects},void(l.updateQueue=v)}(l=v.lastBaseUpdate)===null?v.firstBaseUpdate=u:l.next=u,v.lastBaseUpdate=u}function la(l,u,v,E){var C=l.updateQueue;bs=!1;var M=C.firstBaseUpdate,$=C.lastBaseUpdate,ue=C.shared.pending;if(ue!==null){C.shared.pending=null;var Se=ue,Le=Se.next;Se.next=null,$===null?M=Le:$.next=Le,$=Se;var Ue=l.alternate;Ue!==null&&(ue=(Ue=Ue.updateQueue).lastBaseUpdate)!==$&&(ue===null?Ue.firstBaseUpdate=Le:ue.next=Le,Ue.lastBaseUpdate=Se)}if(M!==null){var at=C.baseState;for($=0,Ue=Le=Se=null,ue=M;;){var Be=ue.lane,tt=ue.eventTime;if((E&Be)===Be){Ue!==null&&(Ue=Ue.next={eventTime:tt,lane:0,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null});e:{var _t=l,Wt=ue;switch(Be=u,tt=v,Wt.tag){case 1:if(typeof(_t=Wt.payload)=="function"){at=_t.call(tt,at,Be);break e}at=_t;break e;case 3:_t.flags=-65537&_t.flags|128;case 0:if((Be=typeof(_t=Wt.payload)=="function"?_t.call(tt,at,Be):_t)==null)break e;at=s({},at,Be);break e;case 2:bs=!0}}ue.callback!==null&&ue.lane!==0&&(l.flags|=64,(Be=C.effects)===null?C.effects=[ue]:Be.push(ue))}else tt={eventTime:tt,lane:Be,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},Ue===null?(Le=Ue=tt,Se=at):Ue=Ue.next=tt,$|=Be;if((ue=ue.next)===null){if((ue=C.shared.pending)===null)break;ue=(Be=ue).next,Be.next=null,C.lastBaseUpdate=Be,C.shared.pending=null}}if(Ue===null&&(Se=at),C.baseState=Se,C.firstBaseUpdate=Le,C.lastBaseUpdate=Ue,(u=C.shared.interleaved)!==null){C=u;do $|=C.lane,C=C.next;while(C!==u)}else M===null&&(C.shared.lanes=0);ga|=$,l.lanes=$,l.memoizedState=at}}function Pl(l,u,v){if(l=u.effects,u.effects=null,l!==null)for(u=0;u<l.length;u++){var E=l[u],C=E.callback;if(C!==null){if(E.callback=null,E=v,typeof C!="function")throw Error(a(191,C));C.call(E)}}}var wu=new t.Component().refs;function Il(l,u,v,E){v=(v=v(E,u=l.memoizedState))==null?u:s({},u,v),l.memoizedState=v,l.lanes===0&&(l.updateQueue.baseState=v)}var Wa={isMounted:function(l){return!!(l=l._reactInternals)&&ie(l)===l},enqueueSetState:function(l,u,v){l=l._reactInternals;var E=cn(),C=cs(l),M=qi(E,C);M.payload=u,v!=null&&(M.callback=v),(u=Ki(l,M,C))!==null&&(Ln(u,l,C,E),Ss(u,l,C))},enqueueReplaceState:function(l,u,v){l=l._reactInternals;var E=cn(),C=cs(l),M=qi(E,C);M.tag=1,M.payload=u,v!=null&&(M.callback=v),(u=Ki(l,M,C))!==null&&(Ln(u,l,C,E),Ss(u,l,C))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var v=cn(),E=cs(l),C=qi(v,E);C.tag=2,u!=null&&(C.callback=u),(u=Ki(l,C,E))!==null&&(Ln(u,l,E,v),Ss(u,l,E))}};function Yi(l,u,v,E,C,M,$){return typeof(l=l.stateNode).shouldComponentUpdate=="function"?l.shouldComponentUpdate(E,M,$):!u.prototype||!u.prototype.isPureReactComponent||!za(v,E)||!za(C,M)}function Qi(l,u,v){var E=!1,C=Pt,M=u.contextType;return typeof M=="object"&&M!==null?M=bn(M):(C=rn(u)?Gi:tn.current,M=(E=(E=u.contextTypes)!=null)?$n(l,C):Pt),u=new u(v,M),l.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Wa,l.stateNode=u,u._reactInternals=l,E&&((l=l.stateNode).__reactInternalMemoizedUnmaskedChildContext=C,l.__reactInternalMemoizedMaskedChildContext=M),u}function Pr(l,u,v,E){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(v,E),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(v,E),u.state!==l&&Wa.enqueueReplaceState(u,u.state,null)}function ua(l,u,v,E){var C=l.stateNode;C.props=v,C.state=l.memoizedState,C.refs=wu,_u(l);var M=u.contextType;typeof M=="object"&&M!==null?C.context=bn(M):(M=rn(u)?Gi:tn.current,C.context=$n(l,M)),C.state=l.memoizedState,typeof(M=u.getDerivedStateFromProps)=="function"&&(Il(l,u,M,v),C.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(u=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),u!==C.state&&Wa.enqueueReplaceState(C,C.state,null),la(l,v,C,E),C.state=l.memoizedState),typeof C.componentDidMount=="function"&&(l.flags|=4194308)}function ln(l,u,v){if((l=v.ref)!==null&&typeof l!="function"&&typeof l!="object"){if(v._owner){if(v=v._owner){if(v.tag!==1)throw Error(a(309));var E=v.stateNode}if(!E)throw Error(a(147,l));var C=E,M=""+l;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===M?u.ref:(u=function($){var ue=C.refs;ue===wu&&(ue=C.refs={}),$===null?delete ue[M]:ue[M]=$},u._stringRef=M,u)}if(typeof l!="string")throw Error(a(284));if(!v._owner)throw Error(a(290,l))}return l}function $a(l,u){throw l=Object.prototype.toString.call(u),Error(a(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l))}function Xs(l){return(0,l._init)(l._payload)}function mo(l){function u(Ge,pe){if(l){var Ie=Ge.deletions;Ie===null?(Ge.deletions=[pe],Ge.flags|=16):Ie.push(pe)}}function v(Ge,pe){if(!l)return null;for(;pe!==null;)u(Ge,pe),pe=pe.sibling;return null}function E(Ge,pe){for(Ge=new Map;pe!==null;)pe.key!==null?Ge.set(pe.key,pe):Ge.set(pe.index,pe),pe=pe.sibling;return Ge}function C(Ge,pe){return(Ge=Co(Ge,pe)).index=0,Ge.sibling=null,Ge}function M(Ge,pe,Ie){return Ge.index=Ie,l?(Ie=Ge.alternate)!==null?(Ie=Ie.index)<pe?(Ge.flags|=2,pe):Ie:(Ge.flags|=2,pe):(Ge.flags|=1048576,pe)}function $(Ge){return l&&Ge.alternate===null&&(Ge.flags|=2),Ge}function ue(Ge,pe,Ie,qe){return pe===null||pe.tag!==6?((pe=Rc(Ie,Ge.mode,qe)).return=Ge,pe):((pe=C(pe,Ie)).return=Ge,pe)}function Se(Ge,pe,Ie,qe){var At=Ie.type;return At===_?Ue(Ge,pe,Ie.props.children,qe,Ie.key):pe!==null&&(pe.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===W&&Xs(At)===pe.type)?((qe=C(pe,Ie.props)).ref=ln(Ge,pe,Ie),qe.return=Ge,qe):((qe=Gu(Ie.type,Ie.key,Ie.props,null,Ge.mode,qe)).ref=ln(Ge,pe,Ie),qe.return=Ge,qe)}function Le(Ge,pe,Ie,qe){return pe===null||pe.tag!==4||pe.stateNode.containerInfo!==Ie.containerInfo||pe.stateNode.implementation!==Ie.implementation?((pe=Ah(Ie,Ge.mode,qe)).return=Ge,pe):((pe=C(pe,Ie.children||[])).return=Ge,pe)}function Ue(Ge,pe,Ie,qe,At){return pe===null||pe.tag!==7?((pe=va(Ie,Ge.mode,qe,At)).return=Ge,pe):((pe=C(pe,Ie)).return=Ge,pe)}function at(Ge,pe,Ie){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return(pe=Rc(""+pe,Ge.mode,Ie)).return=Ge,pe;if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case f:return(Ie=Gu(pe.type,pe.key,pe.props,null,Ge.mode,Ie)).ref=ln(Ge,null,pe),Ie.return=Ge,Ie;case m:return(pe=Ah(pe,Ge.mode,Ie)).return=Ge,pe;case W:return at(Ge,(0,pe._init)(pe._payload),Ie)}if(Ke(pe)||X(pe))return(pe=va(pe,Ge.mode,Ie,null)).return=Ge,pe;$a(Ge,pe)}return null}function Be(Ge,pe,Ie,qe){var At=pe!==null?pe.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return At!==null?null:ue(Ge,pe,""+Ie,qe);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case f:return Ie.key===At?Se(Ge,pe,Ie,qe):null;case m:return Ie.key===At?Le(Ge,pe,Ie,qe):null;case W:return Be(Ge,pe,(At=Ie._init)(Ie._payload),qe)}if(Ke(Ie)||X(Ie))return At!==null?null:Ue(Ge,pe,Ie,qe,null);$a(Ge,Ie)}return null}function tt(Ge,pe,Ie,qe,At){if(typeof qe=="string"&&qe!==""||typeof qe=="number")return ue(pe,Ge=Ge.get(Ie)||null,""+qe,At);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case f:return Se(pe,Ge=Ge.get(qe.key===null?Ie:qe.key)||null,qe,At);case m:return Le(pe,Ge=Ge.get(qe.key===null?Ie:qe.key)||null,qe,At);case W:return tt(Ge,pe,Ie,(0,qe._init)(qe._payload),At)}if(Ke(qe)||X(qe))return Ue(pe,Ge=Ge.get(Ie)||null,qe,At,null);$a(pe,qe)}return null}function _t(Ge,pe,Ie,qe){for(var At=null,ir=null,wt=pe,tr=pe=0,hn=null;wt!==null&&tr<Ie.length;tr++){wt.index>tr?(hn=wt,wt=null):hn=wt.sibling;var sr=Be(Ge,wt,Ie[tr],qe);if(sr===null){wt===null&&(wt=hn);break}l&&wt&&sr.alternate===null&&u(Ge,wt),pe=M(sr,pe,tr),ir===null?At=sr:ir.sibling=sr,ir=sr,wt=hn}if(tr===Ie.length)return v(Ge,wt),nr&&js(Ge,tr),At;if(wt===null){for(;tr<Ie.length;tr++)(wt=at(Ge,Ie[tr],qe))!==null&&(pe=M(wt,pe,tr),ir===null?At=wt:ir.sibling=wt,ir=wt);return nr&&js(Ge,tr),At}for(wt=E(Ge,wt);tr<Ie.length;tr++)(hn=tt(wt,Ge,tr,Ie[tr],qe))!==null&&(l&&hn.alternate!==null&&wt.delete(hn.key===null?tr:hn.key),pe=M(hn,pe,tr),ir===null?At=hn:ir.sibling=hn,ir=hn);return l&&wt.forEach((function(Zs){return u(Ge,Zs)})),nr&&js(Ge,tr),At}function Wt(Ge,pe,Ie,qe){var At=X(Ie);if(typeof At!="function")throw Error(a(150));if((Ie=At.call(Ie))==null)throw Error(a(151));for(var ir=At=null,wt=pe,tr=pe=0,hn=null,sr=Ie.next();wt!==null&&!sr.done;tr++,sr=Ie.next()){wt.index>tr?(hn=wt,wt=null):hn=wt.sibling;var Zs=Be(Ge,wt,sr.value,qe);if(Zs===null){wt===null&&(wt=hn);break}l&&wt&&Zs.alternate===null&&u(Ge,wt),pe=M(Zs,pe,tr),ir===null?At=Zs:ir.sibling=Zs,ir=Zs,wt=hn}if(sr.done)return v(Ge,wt),nr&&js(Ge,tr),At;if(wt===null){for(;!sr.done;tr++,sr=Ie.next())(sr=at(Ge,sr.value,qe))!==null&&(pe=M(sr,pe,tr),ir===null?At=sr:ir.sibling=sr,ir=sr);return nr&&js(Ge,tr),At}for(wt=E(Ge,wt);!sr.done;tr++,sr=Ie.next())(sr=tt(wt,Ge,tr,sr.value,qe))!==null&&(l&&sr.alternate!==null&&wt.delete(sr.key===null?tr:sr.key),pe=M(sr,pe,tr),ir===null?At=sr:ir.sibling=sr,ir=sr);return l&&wt.forEach((function(gd){return u(Ge,gd)})),nr&&js(Ge,tr),At}return function Ge(pe,Ie,qe,At){if(typeof qe=="object"&&qe!==null&&qe.type===_&&qe.key===null&&(qe=qe.props.children),typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case f:e:{for(var ir=qe.key,wt=Ie;wt!==null;){if(wt.key===ir){if((ir=qe.type)===_){if(wt.tag===7){v(pe,wt.sibling),(Ie=C(wt,qe.props.children)).return=pe,pe=Ie;break e}}else if(wt.elementType===ir||typeof ir=="object"&&ir!==null&&ir.$$typeof===W&&Xs(ir)===wt.type){v(pe,wt.sibling),(Ie=C(wt,qe.props)).ref=ln(pe,wt,qe),Ie.return=pe,pe=Ie;break e}v(pe,wt);break}u(pe,wt),wt=wt.sibling}qe.type===_?((Ie=va(qe.props.children,pe.mode,At,qe.key)).return=pe,pe=Ie):((At=Gu(qe.type,qe.key,qe.props,null,pe.mode,At)).ref=ln(pe,Ie,qe),At.return=pe,pe=At)}return $(pe);case m:e:{for(wt=qe.key;Ie!==null;){if(Ie.key===wt){if(Ie.tag===4&&Ie.stateNode.containerInfo===qe.containerInfo&&Ie.stateNode.implementation===qe.implementation){v(pe,Ie.sibling),(Ie=C(Ie,qe.children||[])).return=pe,pe=Ie;break e}v(pe,Ie);break}u(pe,Ie),Ie=Ie.sibling}(Ie=Ah(qe,pe.mode,At)).return=pe,pe=Ie}return $(pe);case W:return Ge(pe,Ie,(wt=qe._init)(qe._payload),At)}if(Ke(qe))return _t(pe,Ie,qe,At);if(X(qe))return Wt(pe,Ie,qe,At);$a(pe,qe)}return typeof qe=="string"&&qe!==""||typeof qe=="number"?(qe=""+qe,Ie!==null&&Ie.tag===6?(v(pe,Ie.sibling),(Ie=C(Ie,qe)).return=pe,pe=Ie):(v(pe,Ie),(Ie=Rc(qe,pe.mode,At)).return=pe,pe=Ie),$(pe)):v(pe,Ie)}}var ui=mo(!0),go=mo(!1),Zi={},Lr=si(Zi),qs=si(Zi),p=si(Zi);function x(l){if(l===Zi)throw Error(a(174));return l}function A(l,u){hr(p,u),hr(qs,l),hr(Lr,Zi),l=V(u),$t(Lr),hr(Lr,l)}function R(){$t(Lr),$t(qs),$t(p)}function O(l){var u=x(p.current),v=x(Lr.current);v!==(u=D(v,l.type,u))&&(hr(qs,l),hr(Lr,u))}function L(l){qs.current===l&&($t(Lr),$t(qs))}var z=si(0);function Y(l){for(var u=l;u!==null;){if(u.tag===13){var v=u.memoizedState;if(v!==null&&((v=v.dehydrated)===null||wr(v)||ti(v)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((128&u.flags)!=0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var ne=[];function re(){for(var l=0;l<ne.length;l++){var u=ne[l];je?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}ne.length=0}var he=c.ReactCurrentDispatcher,Z=c.ReactCurrentBatchConfig,fe=0,J=null,oe=null,se=null,me=!1,ve=!1,be=0,De=0;function Me(){throw Error(a(321))}function Qe(l,u){if(u===null)return!1;for(var v=0;v<u.length&&v<l.length;v++)if(!kn(l[v],u[v]))return!1;return!0}function st(l,u,v,E,C,M){if(fe=M,J=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,he.current=l===null||l.memoizedState===null?uh:ch,l=v(E,C),ve){M=0;do{if(ve=!1,be=0,25<=M)throw Error(a(301));M+=1,se=oe=null,u.updateQueue=null,he.current=hh,l=v(E,C)}while(ve)}if(he.current=Dl,u=oe!==null&&oe.next!==null,fe=0,se=oe=J=null,me=!1,u)throw Error(a(300));return l}function Xe(){var l=be!==0;return be=0,l}function We(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return se===null?J.memoizedState=se=l:se=se.next=l,se}function Ze(){if(oe===null){var l=J.alternate;l=l!==null?l.memoizedState:null}else l=oe.next;var u=se===null?J.memoizedState:se.next;if(u!==null)se=u,oe=l;else{if(l===null)throw Error(a(310));l={memoizedState:(oe=l).memoizedState,baseState:oe.baseState,baseQueue:oe.baseQueue,queue:oe.queue,next:null},se===null?J.memoizedState=se=l:se=se.next=l}return se}function rt(l,u){return typeof u=="function"?u(l):u}function ut(l){var u=Ze(),v=u.queue;if(v===null)throw Error(a(311));v.lastRenderedReducer=l;var E=oe,C=E.baseQueue,M=v.pending;if(M!==null){if(C!==null){var $=C.next;C.next=M.next,M.next=$}E.baseQueue=C=M,v.pending=null}if(C!==null){M=C.next,E=E.baseState;var ue=$=null,Se=null,Le=M;do{var Ue=Le.lane;if((fe&Ue)===Ue)Se!==null&&(Se=Se.next={lane:0,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),E=Le.hasEagerState?Le.eagerState:l(E,Le.action);else{var at={lane:Ue,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null};Se===null?(ue=Se=at,$=E):Se=Se.next=at,J.lanes|=Ue,ga|=Ue}Le=Le.next}while(Le!==null&&Le!==M);Se===null?$=E:Se.next=ue,kn(E,u.memoizedState)||(Fr=!0),u.memoizedState=E,u.baseState=$,u.baseQueue=Se,v.lastRenderedState=E}if((l=v.interleaved)!==null){C=l;do M=C.lane,J.lanes|=M,ga|=M,C=C.next;while(C!==l)}else C===null&&(v.lanes=0);return[u.memoizedState,v.dispatch]}function Dt(l){var u=Ze(),v=u.queue;if(v===null)throw Error(a(311));v.lastRenderedReducer=l;var E=v.dispatch,C=v.pending,M=u.memoizedState;if(C!==null){v.pending=null;var $=C=C.next;do M=l(M,$.action),$=$.next;while($!==C);kn(M,u.memoizedState)||(Fr=!0),u.memoizedState=M,u.baseQueue===null&&(u.baseState=M),v.lastRenderedState=M}return[M,E]}function Ft(){}function jt(l,u){var v=J,E=Ze(),C=u(),M=!kn(E.memoizedState,C);if(M&&(E.memoizedState=C,Fr=!0),E=E.queue,pc(Xr.bind(null,v,E,l),[l]),E.getSnapshot!==u||M||se!==null&&1&se.memoizedState.tag){if(v.flags|=2048,Ci(9,Nt.bind(null,v,E,C,u),void 0,null),Yr===null)throw Error(a(349));(30&fe)!=0||Sn(v,u,C)}return C}function Sn(l,u,v){l.flags|=16384,l={getSnapshot:u,value:v},(u=J.updateQueue)===null?(u={lastEffect:null,stores:null},J.updateQueue=u,u.stores=[l]):(v=u.stores)===null?u.stores=[l]:v.push(l)}function Nt(l,u,v,E){u.value=v,u.getSnapshot=E,yr(u)&&yo(l)}function Xr(l,u,v){return v((function(){yr(u)&&yo(l)}))}function yr(l){var u=l.getSnapshot;l=l.value;try{var v=u();return!kn(l,v)}catch{return!0}}function yo(l){var u=Xi(l,1);u!==null&&Ln(u,l,1,-1)}function qr(l){var u=We();return typeof l=="function"&&(l=l()),u.memoizedState=u.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rt,lastRenderedState:l},u.queue=l,l=l.dispatch=ep.bind(null,J,l),[u.memoizedState,l]}function Ci(l,u,v,E){return l={tag:l,create:u,destroy:v,deps:E,next:null},(u=J.updateQueue)===null?(u={lastEffect:null,stores:null},J.updateQueue=u,u.lastEffect=l.next=l):(v=u.lastEffect)===null?u.lastEffect=l.next=l:(E=v.next,v.next=l,l.next=E,u.lastEffect=l),l}function Rl(){return Ze().memoizedState}function ca(l,u,v,E){var C=We();J.flags|=l,C.memoizedState=Ci(1|u,v,void 0,E===void 0?null:E)}function fc(l,u,v,E){var C=Ze();E=E===void 0?null:E;var M=void 0;if(oe!==null){var $=oe.memoizedState;if(M=$.destroy,E!==null&&Qe(E,$.deps))return void(C.memoizedState=Ci(u,v,M,E))}J.flags|=l,C.memoizedState=Ci(1|u,v,M,E)}function oh(l,u){return ca(8390656,8,l,u)}function pc(l,u){return fc(2048,8,l,u)}function vr(l,u){return fc(4,2,l,u)}function mc(l,u){return fc(4,4,l,u)}function bu(l,u){return typeof u=="function"?(l=l(),u(l),function(){u(null)}):u!=null?(l=l(),u.current=l,function(){u.current=null}):void 0}function kl(l,u,v){return v=v!=null?v.concat([l]):null,fc(4,4,bu.bind(null,u,l),v)}function gc(){}function yc(l,u){var v=Ze();u=u===void 0?null:u;var E=v.memoizedState;return E!==null&&u!==null&&Qe(u,E[1])?E[0]:(v.memoizedState=[l,u],l)}function Ml(l,u){var v=Ze();u=u===void 0?null:u;var E=v.memoizedState;return E!==null&&u!==null&&Qe(u,E[1])?E[0]:(l=l(),v.memoizedState=[l,u],l)}function Su(l,u,v){return(21&fe)==0?(l.baseState&&(l.baseState=!1,Fr=!0),l.memoizedState=v):(kn(v,u)||(v=bl(),J.lanes|=v,ga|=v,l.baseState=!0),u)}function Ol(l,u){var v=Gt;Gt=v!==0&&4>v?v:4,l(!0);var E=Z.transition;Z.transition={};try{l(!1),u()}finally{Gt=v,Z.transition=E}}function ah(){return Ze().memoizedState}function Jf(l,u,v){var E=cs(l);v={lane:E,action:v,hasEagerState:!1,eagerState:null,next:null},lh(l)?Eu(u,v):(v=Al(l,u,v,E))!==null&&(Ln(v,l,E,cn()),Tu(v,u,E))}function ep(l,u,v){var E=cs(l),C={lane:E,action:v,hasEagerState:!1,eagerState:null,next:null};if(lh(l))Eu(u,C);else{var M=l.alternate;if(l.lanes===0&&(M===null||M.lanes===0)&&(M=u.lastRenderedReducer)!==null)try{var $=u.lastRenderedState,ue=M($,v);if(C.hasEagerState=!0,C.eagerState=ue,kn(ue,$)){var Se=u.interleaved;return Se===null?(C.next=C,Va(u)):(C.next=Se.next,Se.next=C),void(u.interleaved=C)}}catch{}(v=Al(l,u,C,E))!==null&&(Ln(v,l,E,C=cn()),Tu(v,u,E))}}function lh(l){var u=l.alternate;return l===J||u!==null&&u===J}function Eu(l,u){ve=me=!0;var v=l.pending;v===null?u.next=u:(u.next=v.next,v.next=u),l.pending=u}function Tu(l,u,v){if((4194240&v)!=0){var E=u.lanes;v|=E&=l.pendingLanes,u.lanes=v,sn(l,v)}}var Dl={readContext:bn,useCallback:Me,useContext:Me,useEffect:Me,useImperativeHandle:Me,useInsertionEffect:Me,useLayoutEffect:Me,useMemo:Me,useReducer:Me,useRef:Me,useState:Me,useDebugValue:Me,useDeferredValue:Me,useTransition:Me,useMutableSource:Me,useSyncExternalStore:Me,useId:Me,unstable_isNewReconciler:!1},uh={readContext:bn,useCallback:function(l,u){return We().memoizedState=[l,u===void 0?null:u],l},useContext:bn,useEffect:oh,useImperativeHandle:function(l,u,v){return v=v!=null?v.concat([l]):null,ca(4194308,4,bu.bind(null,u,l),v)},useLayoutEffect:function(l,u){return ca(4194308,4,l,u)},useInsertionEffect:function(l,u){return ca(4,2,l,u)},useMemo:function(l,u){var v=We();return u=u===void 0?null:u,l=l(),v.memoizedState=[l,u],l},useReducer:function(l,u,v){var E=We();return u=v!==void 0?v(u):u,E.memoizedState=E.baseState=u,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:u},E.queue=l,l=l.dispatch=Jf.bind(null,J,l),[E.memoizedState,l]},useRef:function(l){return l={current:l},We().memoizedState=l},useState:qr,useDebugValue:gc,useDeferredValue:function(l){return We().memoizedState=l},useTransition:function(){var l=qr(!1),u=l[0];return l=Ol.bind(null,l[1]),We().memoizedState=l,[u,l]},useMutableSource:function(){},useSyncExternalStore:function(l,u,v){var E=J,C=We();if(nr){if(v===void 0)throw Error(a(407));v=v()}else{if(v=u(),Yr===null)throw Error(a(349));(30&fe)!=0||Sn(E,u,v)}C.memoizedState=v;var M={value:v,getSnapshot:u};return C.queue=M,oh(Xr.bind(null,E,M,l),[l]),E.flags|=2048,Ci(9,Nt.bind(null,E,M,v,u),void 0,null),v},useId:function(){var l=We(),u=Yr.identifierPrefix;if(nr){var v=li;u=":"+u+"R"+(v=(ai&~(1<<32-nn(ai)-1)).toString(32)+v),0<(v=be++)&&(u+="H"+v.toString(32)),u+=":"}else u=":"+u+"r"+(v=De++).toString(32)+":";return l.memoizedState=u},unstable_isNewReconciler:!1},ch={readContext:bn,useCallback:yc,useContext:bn,useEffect:pc,useImperativeHandle:kl,useInsertionEffect:vr,useLayoutEffect:mc,useMemo:Ml,useReducer:ut,useRef:Rl,useState:function(){return ut(rt)},useDebugValue:gc,useDeferredValue:function(l){return Su(Ze(),oe.memoizedState,l)},useTransition:function(){return[ut(rt)[0],Ze().memoizedState]},useMutableSource:Ft,useSyncExternalStore:jt,useId:ah,unstable_isNewReconciler:!1},hh={readContext:bn,useCallback:yc,useContext:bn,useEffect:pc,useImperativeHandle:kl,useInsertionEffect:vr,useLayoutEffect:mc,useMemo:Ml,useReducer:Dt,useRef:Rl,useState:function(){return Dt(rt)},useDebugValue:gc,useDeferredValue:function(l){var u=Ze();return oe===null?u.memoizedState=l:Su(u,oe.memoizedState,l)},useTransition:function(){return[Dt(rt)[0],Ze().memoizedState]},useMutableSource:Ft,useSyncExternalStore:jt,useId:ah,unstable_isNewReconciler:!1};function Nl(l,u){try{var v="",E=u;do v+=dc(E),E=E.return;while(E);var C=v}catch(M){C=`
Error generating stack: `+M.message+`
`+M.stack}return{value:l,source:u,stack:C,digest:null}}function vc(l,u,v){return{value:l,source:null,stack:v??null,digest:u??null}}function dh(l,u){try{console.error(u.value)}catch(v){setTimeout((function(){throw v}))}}var tp=typeof WeakMap=="function"?WeakMap:Map;function _c(l,u,v){(v=qi(-1,v)).tag=3,v.payload={element:null};var E=u.value;return v.callback=function(){xr||(xr=!0,Wl=E),dh(0,u)},v}function vo(l,u,v){(v=qi(-1,v)).tag=3;var E=l.type.getDerivedStateFromError;if(typeof E=="function"){var C=u.value;v.payload=function(){return E(C)},v.callback=function(){dh(0,u)}}var M=l.stateNode;return M!==null&&typeof M.componentDidCatch=="function"&&(v.callback=function(){dh(0,u),typeof E!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var $=u.stack;this.componentDidCatch(u.value,{componentStack:$!==null?$:""})}),v}function fh(l,u,v){var E=l.pingCache;if(E===null){E=l.pingCache=new tp;var C=new Set;E.set(u,C)}else(C=E.get(u))===void 0&&(C=new Set,E.set(u,C));C.has(v)||(C.add(v),l=Pc.bind(null,l,u,v),u.then(l,l))}function Xa(l){do{var u;if((u=l.tag===13)&&(u=(u=l.memoizedState)===null||u.dehydrated!==null),u)return l;l=l.return}while(l!==null);return null}function Es(l,u,v,E,C){return(1&l.mode)==0?(l===u?l.flags|=65536:(l.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:((u=qi(-1,1)).tag=2,Ki(v,u,1))),v.lanes|=1),l):(l.flags|=65536,l.lanes=C,l)}var Au=c.ReactCurrentOwner,Fr=!1;function Dn(l,u,v,E){u.child=l===null?go(u,null,v,E):ui(u,l.child,v,E)}function ud(l,u,v,E,C){v=v.render;var M=u.ref;return Ws(u,C),E=st(l,u,v,E,M,C),v=Xe(),l===null||Fr?(nr&&v&&zs(u),u.flags|=1,Dn(l,u,E,C),u.child):(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~C,ts(l,u,C))}function cd(l,u,v,E,C){if(l===null){var M=v.type;return typeof M!="function"||Uu(M)||M.defaultProps!==void 0||v.compare!==null||v.defaultProps!==void 0?((l=Gu(v.type,null,E,u,u.mode,C)).ref=u.ref,l.return=u,u.child=l):(u.tag=15,u.type=M,ha(l,u,M,E,C))}if(M=l.child,(l.lanes&C)==0){var $=M.memoizedProps;if((v=(v=v.compare)!==null?v:za)($,E)&&l.ref===u.ref)return ts(l,u,C)}return u.flags|=1,(l=Co(M,E)).ref=u.ref,l.return=u,u.child=l}function ha(l,u,v,E,C){if(l!==null){var M=l.memoizedProps;if(za(M,E)&&l.ref===u.ref){if(Fr=!1,u.pendingProps=E=M,(l.lanes&C)==0)return u.lanes=l.lanes,ts(l,u,C);(131072&l.flags)!=0&&(Fr=!0)}}return Fl(l,u,v,E,C)}function Ll(l,u,v){var E=u.pendingProps,C=E.children,M=l!==null?l.memoizedState:null;if(E.mode==="hidden")if((1&u.mode)==0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},hr(So,Qr),Qr|=v;else{if((1073741824&v)==0)return l=M!==null?M.baseLanes|v:v,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:l,cachePool:null,transitions:null},u.updateQueue=null,hr(So,Qr),Qr|=l,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},E=M!==null?M.baseLanes:v,hr(So,Qr),Qr|=E}else M!==null?(E=M.baseLanes|v,u.memoizedState=null):E=v,hr(So,Qr),Qr|=E;return Dn(l,u,C,v),u.child}function qa(l,u){var v=u.ref;(l===null&&v!==null||l!==null&&l.ref!==v)&&(u.flags|=512,u.flags|=2097152)}function Fl(l,u,v,E,C){var M=rn(v)?Gi:tn.current;return M=$n(u,M),Ws(u,C),v=st(l,u,v,E,M,C),E=Xe(),l===null||Fr?(nr&&E&&zs(u),u.flags|=1,Dn(l,u,v,C),u.child):(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~C,ts(l,u,C))}function xc(l,u,v,E,C){if(rn(v)){var M=!0;Fs(u)}else M=!1;if(Ws(u,C),u.stateNode===null)es(l,u),Qi(u,v,E),ua(u,v,E,C),E=!0;else if(l===null){var $=u.stateNode,ue=u.memoizedProps;$.props=ue;var Se=$.context,Le=v.contextType;typeof Le=="object"&&Le!==null?Le=bn(Le):Le=$n(u,Le=rn(v)?Gi:tn.current);var Ue=v.getDerivedStateFromProps,at=typeof Ue=="function"||typeof $.getSnapshotBeforeUpdate=="function";at||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(ue!==E||Se!==Le)&&Pr(u,$,E,Le),bs=!1;var Be=u.memoizedState;$.state=Be,la(u,E,$,C),Se=u.memoizedState,ue!==E||Be!==Se||wn.current||bs?(typeof Ue=="function"&&(Il(u,v,Ue,E),Se=u.memoizedState),(ue=bs||Yi(u,v,ue,E,Be,Se,Le))?(at||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(u.flags|=4194308)):(typeof $.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=E,u.memoizedState=Se),$.props=E,$.state=Se,$.context=Le,E=ue):(typeof $.componentDidMount=="function"&&(u.flags|=4194308),E=!1)}else{$=u.stateNode,xu(l,u),ue=u.memoizedProps,Le=u.type===u.elementType?ue:On(u.type,ue),$.props=Le,at=u.pendingProps,Be=$.context,typeof(Se=v.contextType)=="object"&&Se!==null?Se=bn(Se):Se=$n(u,Se=rn(v)?Gi:tn.current);var tt=v.getDerivedStateFromProps;(Ue=typeof tt=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(ue!==at||Be!==Se)&&Pr(u,$,E,Se),bs=!1,Be=u.memoizedState,$.state=Be,la(u,E,$,C);var _t=u.memoizedState;ue!==at||Be!==_t||wn.current||bs?(typeof tt=="function"&&(Il(u,v,tt,E),_t=u.memoizedState),(Le=bs||Yi(u,v,Le,E,Be,_t,Se)||!1)?(Ue||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(E,_t,Se),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(E,_t,Se)),typeof $.componentDidUpdate=="function"&&(u.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof $.componentDidUpdate!="function"||ue===l.memoizedProps&&Be===l.memoizedState||(u.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||ue===l.memoizedProps&&Be===l.memoizedState||(u.flags|=1024),u.memoizedProps=E,u.memoizedState=_t),$.props=E,$.state=_t,$.context=Se,E=Le):(typeof $.componentDidUpdate!="function"||ue===l.memoizedProps&&Be===l.memoizedState||(u.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||ue===l.memoizedProps&&Be===l.memoizedState||(u.flags|=1024),E=!1)}return da(l,u,v,E,M,C)}function da(l,u,v,E,C,M){qa(l,u);var $=(128&u.flags)!=0;if(!E&&!$)return C&&Bs(u,v,!1),ts(l,u,M);E=u.stateNode,Au.current=u;var ue=$&&typeof v.getDerivedStateFromError!="function"?null:E.render();return u.flags|=1,l!==null&&$?(u.child=ui(u,l.child,null,M),u.child=ui(u,null,ue,M)):Dn(l,u,ue,M),u.memoizedState=E.state,C&&Bs(u,v,!0),u.child}function _o(l){var u=l.stateNode;u.pendingContext?Xo(0,u.pendingContext,u.pendingContext!==u.context):u.context&&Xo(0,u.context,!1),A(l,u.containerInfo)}function _r(l,u,v,E,C){return $i(),ia(C),u.flags|=256,Dn(l,u,v,E),u.child}var lr,Ji,un,En,xo={dehydrated:null,treeContext:null,retryLane:0};function fa(l){return{baseLanes:l,cachePool:null,transitions:null}}function Xn(l,u,v){var E,C=u.pendingProps,M=z.current,$=!1,ue=(128&u.flags)!=0;if((E=ue)||(E=(l===null||l.memoizedState!==null)&&(2&M)!=0),E?($=!0,u.flags&=-129):l!==null&&l.memoizedState===null||(M|=1),hr(z,1&M),l===null)return Hs(u),(l=u.memoizedState)!==null&&(l=l.dehydrated)!==null?((1&u.mode)==0?u.lanes=1:ti(l)?u.lanes=8:u.lanes=1073741824,null):(ue=C.children,l=C.fallback,$?(C=u.mode,$=u.child,ue={mode:"hidden",children:ue},(1&C)==0&&$!==null?($.childLanes=0,$.pendingProps=ue):$=Ic(ue,C,0,null),l=va(l,C,v,null),$.return=u,l.return=u,$.sibling=l,u.child=$,u.child.memoizedState=fa(v),u.memoizedState=xo,l):Bl(u,ue));if((M=l.memoizedState)!==null&&(E=M.dehydrated)!==null)return(function(Le,Ue,at,Be,tt,_t,Wt){if(at)return 256&Ue.flags?(Ue.flags&=-257,Cu(Le,Ue,Wt,Be=vc(Error(a(422))))):Ue.memoizedState!==null?(Ue.child=Le.child,Ue.flags|=128,null):(_t=Be.fallback,tt=Ue.mode,Be=Ic({mode:"visible",children:Be.children},tt,0,null),(_t=va(_t,tt,Wt,null)).flags|=2,Be.return=Ue,_t.return=Ue,Be.sibling=_t,Ue.child=Be,(1&Ue.mode)!=0&&ui(Ue,Le.child,null,Wt),Ue.child.memoizedState=fa(Wt),Ue.memoizedState=xo,_t);if((1&Ue.mode)==0)return Cu(Le,Ue,Wt,null);if(ti(tt))return Be=bi(tt).digest,_t=Error(a(419)),Be=vc(_t,Be,void 0),Cu(Le,Ue,Wt,Be);if(at=(Wt&Le.childLanes)!=0,Fr||at){if((Be=Yr)!==null){switch(Wt&-Wt){case 4:tt=2;break;case 16:tt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:tt=32;break;case 536870912:tt=268435456;break;default:tt=0}(tt=(tt&(Be.suspendedLanes|Wt))!=0?0:tt)!==0&&tt!==_t.retryLane&&(_t.retryLane=tt,Xi(Le,tt),Ln(Be,Le,tt,-1))}return Cc(),Cu(Le,Ue,Wt,Be=vc(Error(a(421))))}return wr(tt)?(Ue.flags|=128,Ue.child=Le.child,Ue=Eh.bind(null,Le),Si(tt,Ue),null):(Le=_t.treeContext,gt&&(Nr=vs(tt),ar=Ue,nr=!0,Ti=null,Wi=!1,Le!==null&&(an[yn++]=ai,an[yn++]=li,an[yn++]=vn,ai=Le.id,li=Le.overflow,vn=Ue)),Ue=Bl(Ue,Be.children),Ue.flags|=4096,Ue)})(l,u,ue,C,E,M,v);if($){$=C.fallback,ue=u.mode,E=(M=l.child).sibling;var Se={mode:"hidden",children:C.children};return(1&ue)==0&&u.child!==M?((C=u.child).childLanes=0,C.pendingProps=Se,u.deletions=null):(C=Co(M,Se)).subtreeFlags=14680064&M.subtreeFlags,E!==null?$=Co(E,$):($=va($,ue,v,null)).flags|=2,$.return=u,C.return=u,C.sibling=$,u.child=C,C=$,$=u.child,ue=(ue=l.child.memoizedState)===null?fa(v):{baseLanes:ue.baseLanes|v,cachePool:null,transitions:ue.transitions},$.memoizedState=ue,$.childLanes=l.childLanes&~v,u.memoizedState=xo,C}return l=($=l.child).sibling,C=Co($,{mode:"visible",children:C.children}),(1&u.mode)==0&&(C.lanes=v),C.return=u,C.sibling=null,l!==null&&((v=u.deletions)===null?(u.deletions=[l],u.flags|=16):v.push(l)),u.child=C,u.memoizedState=null,C}function Bl(l,u){return(u=Ic({mode:"visible",children:u},l.mode,0,null)).return=l,l.child=u}function Cu(l,u,v,E){return E!==null&&ia(E),ui(u,l.child,null,v),(l=Bl(u,u.pendingProps.children)).flags|=2,u.memoizedState=null,l}function ph(l,u,v){l.lanes|=u;var E=l.alternate;E!==null&&(E.lanes|=u),vu(l.return,u,v)}function Ul(l,u,v,E,C){var M=l.memoizedState;M===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:E,tail:v,tailMode:C}:(M.isBackwards=u,M.rendering=null,M.renderingStartTime=0,M.last=E,M.tail=v,M.tailMode=C)}function mh(l,u,v){var E=u.pendingProps,C=E.revealOrder,M=E.tail;if(Dn(l,u,E.children,v),(2&(E=z.current))!=0)E=1&E|2,u.flags|=128;else{if(l!==null&&(128&l.flags)!=0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&ph(l,v,u);else if(l.tag===19)ph(l,v,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}E&=1}if(hr(z,E),(1&u.mode)==0)u.memoizedState=null;else switch(C){case"forwards":for(v=u.child,C=null;v!==null;)(l=v.alternate)!==null&&Y(l)===null&&(C=v),v=v.sibling;(v=C)===null?(C=u.child,u.child=null):(C=v.sibling,v.sibling=null),Ul(u,!1,C,v,M);break;case"backwards":for(v=null,C=u.child,u.child=null;C!==null;){if((l=C.alternate)!==null&&Y(l)===null){u.child=C;break}l=C.sibling,C.sibling=v,v=C,C=l}Ul(u,!0,v,null,M);break;case"together":Ul(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function es(l,u){(1&u.mode)==0&&l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2)}function ts(l,u,v){if(l!==null&&(u.dependencies=l.dependencies),ga|=u.lanes,(v&u.childLanes)==0)return null;if(l!==null&&u.child!==l.child)throw Error(a(153));if(u.child!==null){for(v=Co(l=u.child,l.pendingProps),u.child=v,v.return=u;l.sibling!==null;)l=l.sibling,(v=v.sibling=Co(l,l.pendingProps)).return=u;v.sibling=null}return u.child}function rs(l){l.flags|=4}function gh(l,u){if(l!==null&&l.child===u.child)return!0;if((16&u.flags)!=0)return!1;for(l=u.child;l!==null;){if((12854&l.flags)!=0||(12854&l.subtreeFlags)!=0)return!1;l=l.sibling}return!0}if(ot)lr=function(l,u){for(var v=u.child;v!==null;){if(v.tag===5||v.tag===6)q(l,v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===u)break;for(;v.sibling===null;){if(v.return===null||v.return===u)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},Ji=function(){},un=function(l,u,v,E,C){if((l=l.memoizedProps)!==E){var M=u.stateNode,$=x(Lr.current);v=Te(M,v,l,E,C,$),(u.updateQueue=v)&&rs(u)}},En=function(l,u,v,E){v!==E&&rs(u)};else if(et){lr=function(l,u,v,E){for(var C=u.child;C!==null;){if(C.tag===5){var M=C.stateNode;v&&E&&(M=Rr(M,C.type,C.memoizedProps,C)),q(l,M)}else if(C.tag===6)M=C.stateNode,v&&E&&(M=wi(M,C.memoizedProps,C)),q(l,M);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)(M=C.child)!==null&&(M.return=C),lr(l,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===u)break;for(;C.sibling===null;){if(C.return===null||C.return===u)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};var hd=function(l,u,v,E){for(var C=u.child;C!==null;){if(C.tag===5){var M=C.stateNode;v&&E&&(M=Rr(M,C.type,C.memoizedProps,C)),Rn(l,M)}else if(C.tag===6)M=C.stateNode,v&&E&&(M=wi(M,C.memoizedProps,C)),Rn(l,M);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)(M=C.child)!==null&&(M.return=C),hd(l,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===u)break;for(;C.sibling===null;){if(C.return===null||C.return===u)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};Ji=function(l,u){var v=u.stateNode;if(!gh(l,u)){l=v.containerInfo;var E=Wr(l);hd(E,u,!1,!1),v.pendingChildren=E,rs(u),Vo(l,E)}},un=function(l,u,v,E,C){var M=l.stateNode,$=l.memoizedProps;if((l=gh(l,u))&&$===E)u.stateNode=M;else{var ue=u.stateNode,Se=x(Lr.current),Le=null;$!==E&&(Le=Te(ue,v,$,E,C,Se)),l&&Le===null?u.stateNode=M:(M=ei(M,Le,v,$,E,u,l,ue),le(M,v,E,C,Se)&&rs(u),u.stateNode=M,l?rs(u):lr(M,u,!1,!1))}},En=function(l,u,v,E){v!==E?(l=x(p.current),v=x(Lr.current),u.stateNode=Fe(E,l,v,u),rs(u)):u.stateNode=l.stateNode}}else Ji=function(){},un=function(){},En=function(){};function ns(l,u){if(!nr)switch(l.tailMode){case"hidden":u=l.tail;for(var v=null;u!==null;)u.alternate!==null&&(v=u),u=u.sibling;v===null?l.tail=null:v.sibling=null;break;case"collapsed":v=l.tail;for(var E=null;v!==null;)v.alternate!==null&&(E=v),v=v.sibling;E===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:E.sibling=null}}function Kr(l){var u=l.alternate!==null&&l.alternate.child===l.child,v=0,E=0;if(u)for(var C=l.child;C!==null;)v|=C.lanes|C.childLanes,E|=14680064&C.subtreeFlags,E|=14680064&C.flags,C.return=l,C=C.sibling;else for(C=l.child;C!==null;)v|=C.lanes|C.childLanes,E|=C.subtreeFlags,E|=C.flags,C.return=l,C=C.sibling;return l.subtreeFlags|=E,l.childLanes=v,u}function Gl(l,u,v){var E=u.pendingProps;switch(Ga(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kr(u),null;case 1:case 17:return rn(u.type)&&Ls(),Kr(u),null;case 3:return v=u.stateNode,R(),$t(wn),$t(tn),re(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),l!==null&&l.child!==null||(jr(u)?rs(u):l===null||l.memoizedState.isDehydrated&&(256&u.flags)==0||(u.flags|=1024,Ti!==null&&(Fu(Ti),Ti=null))),Ji(l,u),Kr(u),null;case 5:L(u),v=x(p.current);var C=u.type;if(l!==null&&u.stateNode!=null)un(l,u,C,E,v),l.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!E){if(u.stateNode===null)throw Error(a(166));return Kr(u),null}if(l=x(Lr.current),jr(u)){if(!gt)throw Error(a(175));l=$r(u.stateNode,u.type,u.memoizedProps,v,l,u,!Wi),u.updateQueue=l,l!==null&&rs(u)}else{var M=U(C,E,v,l,u);lr(M,u,!1,!1),u.stateNode=M,le(M,C,E,v,l)&&rs(u)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return Kr(u),null;case 6:if(l&&u.stateNode!=null)En(l,u,l.memoizedProps,E);else{if(typeof E!="string"&&u.stateNode===null)throw Error(a(166));if(l=x(p.current),v=x(Lr.current),jr(u)){if(!gt)throw Error(a(176));if(l=u.stateNode,v=u.memoizedProps,(E=Ns(l,v,u,!Wi))&&(C=ar)!==null)switch(C.tag){case 3:lo(C.stateNode.containerInfo,l,v,(1&C.mode)!=0);break;case 5:rr(C.type,C.memoizedProps,C.stateNode,l,v,(1&C.mode)!=0)}E&&rs(u)}else u.stateNode=Fe(E,l,v,u)}return Kr(u),null;case 13:if($t(z),E=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(nr&&Nr!==null&&(1&u.mode)!=0&&(128&u.flags)==0)na(),$i(),u.flags|=98560,C=!1;else if(C=jr(u),E!==null&&E.dehydrated!==null){if(l===null){if(!C)throw Error(a(318));if(!gt)throw Error(a(344));if(!(C=(C=u.memoizedState)!==null?C.dehydrated:null))throw Error(a(317));wl(C,u)}else $i(),(128&u.flags)==0&&(u.memoizedState=null),u.flags|=4;Kr(u),C=!1}else Ti!==null&&(Fu(Ti),Ti=null),C=!0;if(!C)return 65536&u.flags?u:null}return(128&u.flags)!=0?(u.lanes=v,u):((v=E!==null)!=(l!==null&&l.memoizedState!==null)&&v&&(u.child.flags|=8192,(1&u.mode)!=0&&(l===null||(1&z.current)!=0?Zr===0&&(Zr=3):Cc())),u.updateQueue!==null&&(u.flags|=4),Kr(u),null);case 4:return R(),Ji(l,u),l===null&&dt(u.stateNode.containerInfo),Kr(u),null;case 10:return aa(u.type._context),Kr(u),null;case 19:if($t(z),(C=u.memoizedState)===null)return Kr(u),null;if(E=(128&u.flags)!=0,(M=C.rendering)===null)if(E)ns(C,!1);else{if(Zr!==0||l!==null&&(128&l.flags)!=0)for(l=u.child;l!==null;){if((M=Y(l))!==null){for(u.flags|=128,ns(C,!1),(l=M.updateQueue)!==null&&(u.updateQueue=l,u.flags|=4),u.subtreeFlags=0,l=v,v=u.child;v!==null;)C=l,(E=v).flags&=14680066,(M=E.alternate)===null?(E.childLanes=0,E.lanes=C,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=M.childLanes,E.lanes=M.lanes,E.child=M.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=M.memoizedProps,E.memoizedState=M.memoizedState,E.updateQueue=M.updateQueue,E.type=M.type,C=M.dependencies,E.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext}),v=v.sibling;return hr(z,1&z.current|2),u.child}l=l.sibling}C.tail!==null&&Yt()>Nu&&(u.flags|=128,E=!0,ns(C,!1),u.lanes=4194304)}else{if(!E)if((l=Y(M))!==null){if(u.flags|=128,E=!0,(l=l.updateQueue)!==null&&(u.updateQueue=l,u.flags|=4),ns(C,!0),C.tail===null&&C.tailMode==="hidden"&&!M.alternate&&!nr)return Kr(u),null}else 2*Yt()-C.renderingStartTime>Nu&&v!==1073741824&&(u.flags|=128,E=!0,ns(C,!1),u.lanes=4194304);C.isBackwards?(M.sibling=u.child,u.child=M):((l=C.last)!==null?l.sibling=M:u.child=M,C.last=M)}return C.tail!==null?(u=C.tail,C.rendering=u,C.tail=u.sibling,C.renderingStartTime=Yt(),u.sibling=null,l=z.current,hr(z,E?1&l|2:1&l),u):(Kr(u),null);case 22:case 23:return nl(),v=u.memoizedState!==null,l!==null&&l.memoizedState!==null!==v&&(u.flags|=8192),v&&(1&u.mode)!=0?(1073741824&Qr)!=0&&(Kr(u),ot&&6&u.subtreeFlags&&(u.flags|=8192)):Kr(u),null;case 24:case 25:return null}throw Error(a(156,u.tag))}function wc(l,u){switch(Ga(u),u.tag){case 1:return rn(u.type)&&Ls(),65536&(l=u.flags)?(u.flags=-65537&l|128,u):null;case 3:return R(),$t(wn),$t(tn),re(),(65536&(l=u.flags))!=0&&(128&l)==0?(u.flags=-65537&l|128,u):null;case 5:return L(u),null;case 13:if($t(z),(l=u.memoizedState)!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(a(340));$i()}return 65536&(l=u.flags)?(u.flags=-65537&l|128,u):null;case 19:return $t(z),null;case 4:return R(),null;case 10:return aa(u.type._context),null;case 22:case 23:return nl(),null;default:return null}}var Ka=!1,mr=!1,is=typeof WeakSet=="function"?WeakSet:Set,ht=null;function ci(l,u){var v=l.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(E){gr(l,u,E)}else v.current=null}function Ks(l,u,v){try{v()}catch(E){gr(l,u,E)}}var pa=!1;function jl(l,u,v){var E=u.updateQueue;if((E=E!==null?E.lastEffect:null)!==null){var C=E=E.next;do{if((C.tag&l)===l){var M=C.destroy;C.destroy=void 0,M!==void 0&&Ks(u,v,M)}C=C.next}while(C!==E)}}function zl(l,u){if((u=(u=u.updateQueue)!==null?u.lastEffect:null)!==null){var v=u=u.next;do{if((v.tag&l)===l){var E=v.create;v.destroy=E()}v=v.next}while(v!==u)}}function Pu(l){var u=l.ref;if(u!==null){var v=l.stateNode;l.tag===5?l=H(v):l=v,typeof u=="function"?u(l):u.current=l}}function hi(l){var u=l.alternate;u!==null&&(l.alternate=null,hi(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode)!==null&&pr(u),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function di(l){return l.tag===5||l.tag===3||l.tag===4}function br(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||di(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(2&l.flags||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(2&l.flags))return l.stateNode}}function Pi(l,u,v){var E=l.tag;if(E===5||E===6)l=l.stateNode,u?Ds(v,l,u):Jn(v,l);else if(E!==4&&(l=l.child)!==null)for(Pi(l,u,v),l=l.sibling;l!==null;)Pi(l,u,v),l=l.sibling}function bc(l,u,v){var E=l.tag;if(E===5||E===6)l=l.stateNode,u?oo(v,l,u):Os(v,l);else if(E!==4&&(l=l.child)!==null)for(bc(l,u,v),l=l.sibling;l!==null;)bc(l,u,v),l=l.sibling}var Nn=null,ss=!1;function os(l,u,v){for(v=v.child;v!==null;)Sc(l,u,v),v=v.sibling}function Sc(l,u,v){if(Cr&&typeof Cr.onCommitFiberUnmount=="function")try{Cr.onCommitFiberUnmount(Ua,v)}catch{}switch(v.tag){case 5:mr||ci(v,u);case 6:if(ot){var E=Nn,C=ss;Nn=null,os(l,u,v),ss=C,(Nn=E)!==null&&(ss?te(Nn,v.stateNode):Hn(Nn,v.stateNode))}else os(l,u,v);break;case 18:ot&&Nn!==null&&(ss?ao(Nn,v.stateNode):La(Nn,v.stateNode));break;case 4:ot?(E=Nn,C=ss,Nn=v.stateNode.containerInfo,ss=!0,os(l,u,v),Nn=E,ss=C):(et&&(E=v.stateNode.containerInfo,C=Wr(E),xi(E,C)),os(l,u,v));break;case 0:case 11:case 14:case 15:if(!mr&&(E=v.updateQueue)!==null&&(E=E.lastEffect)!==null){C=E=E.next;do{var M=C,$=M.destroy;M=M.tag,$!==void 0&&((2&M)!=0||(4&M)!=0)&&Ks(v,u,$),C=C.next}while(C!==E)}os(l,u,v);break;case 1:if(!mr&&(ci(v,u),typeof(E=v.stateNode).componentWillUnmount=="function"))try{E.props=v.memoizedProps,E.state=v.memoizedState,E.componentWillUnmount()}catch(ue){gr(v,u,ue)}os(l,u,v);break;case 21:os(l,u,v);break;case 22:1&v.mode?(mr=(E=mr)||v.memoizedState!==null,os(l,u,v),mr=E):os(l,u,v);break;default:os(l,u,v)}}function Iu(l){var u=l.updateQueue;if(u!==null){l.updateQueue=null;var v=l.stateNode;v===null&&(v=l.stateNode=new is),u.forEach((function(E){var C=pd.bind(null,l,E);v.has(E)||(v.add(E),E.then(C,C))}))}}function as(l,u){var v=u.deletions;if(v!==null)for(var E=0;E<v.length;E++){var C=v[E];try{var M=l,$=u;if(ot){var ue=$;e:for(;ue!==null;){switch(ue.tag){case 5:Nn=ue.stateNode,ss=!1;break e;case 3:case 4:Nn=ue.stateNode.containerInfo,ss=!0;break e}ue=ue.return}if(Nn===null)throw Error(a(160));Sc(M,$,C),Nn=null,ss=!1}else Sc(M,$,C);var Se=C.alternate;Se!==null&&(Se.return=null),C.return=null}catch(Le){gr(C,u,Le)}}if(12854&u.subtreeFlags)for(u=u.child;u!==null;)Ya(u,l),u=u.sibling}function Ya(l,u){var v=l.alternate,E=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(as(u,l),ls(l),4&E){try{jl(3,l,l.return),zl(3,l)}catch(Be){gr(l,l.return,Be)}try{jl(5,l,l.return)}catch(Be){gr(l,l.return,Be)}}break;case 1:as(u,l),ls(l),512&E&&v!==null&&ci(v,v.return);break;case 5:if(as(u,l),ls(l),512&E&&v!==null&&ci(v,v.return),ot){if(32&l.flags){var C=l.stateNode;try{Ae(C)}catch(Be){gr(l,l.return,Be)}}if(4&E&&(C=l.stateNode)!=null){var M=l.memoizedProps;if(v=v!==null?v.memoizedProps:M,E=l.type,u=l.updateQueue,l.updateQueue=null,u!==null)try{gs(C,u,E,v,M,l)}catch(Be){gr(l,l.return,Be)}}}break;case 6:if(as(u,l),ls(l),4&E&&ot){if(l.stateNode===null)throw Error(a(162));C=l.stateNode,M=l.memoizedProps,v=v!==null?v.memoizedProps:M;try{vi(C,v,M)}catch(Be){gr(l,l.return,Be)}}break;case 3:if(as(u,l),ls(l),4&E){if(ot&&gt&&v!==null&&v.memoizedState.isDehydrated)try{Bi(u.containerInfo)}catch(Be){gr(l,l.return,Be)}if(et){C=u.containerInfo,M=u.pendingChildren;try{xi(C,M)}catch(Be){gr(l,l.return,Be)}}}break;case 4:if(as(u,l),ls(l),4&E&&et){C=(M=l.stateNode).containerInfo,M=M.pendingChildren;try{xi(C,M)}catch(Be){gr(l,l.return,Be)}}break;case 13:as(u,l),ls(l),8192&(C=l.child).flags&&(M=C.memoizedState!==null,C.stateNode.isHidden=M,!M||C.alternate!==null&&C.alternate.memoizedState!==null||(To=Yt())),4&E&&Iu(l);break;case 22:var $=v!==null&&v.memoizedState!==null;if(1&l.mode?(mr=(v=mr)||$,as(u,l),mr=v):as(u,l),ls(l),8192&E){if(v=l.memoizedState!==null,(l.stateNode.isHidden=v)&&!$&&(1&l.mode)!=0)for(ht=l,E=l.child;E!==null;){for(u=ht=E;ht!==null;){var ue=($=ht).child;switch($.tag){case 0:case 11:case 14:case 15:jl(4,$,$.return);break;case 1:ci($,$.return);var Se=$.stateNode;if(typeof Se.componentWillUnmount=="function"){var Le=$,Ue=$.return;try{var at=Le;Se.props=at.memoizedProps,Se.state=at.memoizedState,Se.componentWillUnmount()}catch(Be){gr(Le,Ue,Be)}}break;case 5:ci($,$.return);break;case 22:if($.memoizedState!==null){yh(u);continue}}ue!==null?(ue.return=$,ht=ue):yh(u)}E=E.sibling}if(ot){e:if(E=null,ot)for(u=l;;){if(u.tag===5){if(E===null){E=u;try{C=u.stateNode,v?Bt(C):ze(u.stateNode,u.memoizedProps)}catch(Be){gr(l,l.return,Be)}}}else if(u.tag===6){if(E===null)try{M=u.stateNode,v?Zt(M):Rt(M,u.memoizedProps)}catch(Be){gr(l,l.return,Be)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;E===u&&(E=null),u=u.return}E===u&&(E=null),u.sibling.return=u.return,u=u.sibling}}}break;case 19:as(u,l),ls(l),4&E&&Iu(l);break;case 21:break;default:as(u,l),ls(l)}}function ls(l){var u=l.flags;if(2&u){try{if(ot){e:{for(var v=l.return;v!==null;){if(di(v)){var E=v;break e}v=v.return}throw Error(a(160))}switch(E.tag){case 5:var C=E.stateNode;32&E.flags&&(Ae(C),E.flags&=-33),bc(l,br(l),C);break;case 3:case 4:var M=E.stateNode.containerInfo;Pi(l,br(l),M);break;default:throw Error(a(161))}}}catch($){gr(l,l.return,$)}l.flags&=-3}4096&u&&(l.flags&=-4097)}function rp(l,u,v){ht=l,Hl(l)}function Hl(l,u,v){for(var E=(1&l.mode)!=0;ht!==null;){var C=ht,M=C.child;if(C.tag===22&&E){var $=C.memoizedState!==null||Ka;if(!$){var ue=C.alternate,Se=ue!==null&&ue.memoizedState!==null||mr;ue=Ka;var Le=mr;if(Ka=$,(mr=Se)&&!Le)for(ht=C;ht!==null;)Se=($=ht).child,$.tag===22&&$.memoizedState!==null?vh(C):Se!==null?(Se.return=$,ht=Se):vh(C);for(;M!==null;)ht=M,Hl(M),M=M.sibling;ht=C,Ka=ue,mr=Le}Ru(l)}else(8772&C.subtreeFlags)!=0&&M!==null?(M.return=C,ht=M):Ru(l)}}function Ru(l){for(;ht!==null;){var u=ht;if((8772&u.flags)!=0){var v=u.alternate;try{if((8772&u.flags)!=0)switch(u.tag){case 0:case 11:case 15:mr||zl(5,u);break;case 1:var E=u.stateNode;if(4&u.flags&&!mr)if(v===null)E.componentDidMount();else{var C=u.elementType===u.type?v.memoizedProps:On(u.type,v.memoizedProps);E.componentDidUpdate(C,v.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var M=u.updateQueue;M!==null&&Pl(u,M,E);break;case 3:var $=u.updateQueue;if($!==null){if(v=null,u.child!==null)switch(u.child.tag){case 5:v=H(u.child.stateNode);break;case 1:v=u.child.stateNode}Pl(u,$,v)}break;case 5:var ue=u.stateNode;v===null&&4&u.flags&&_i(ue,u.type,u.memoizedProps,u);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(gt&&u.memoizedState===null){var Se=u.alternate;if(Se!==null){var Le=Se.memoizedState;if(Le!==null){var Ue=Le.dehydrated;Ue!==null&&Vn(Ue)}}}break;default:throw Error(a(163))}mr||512&u.flags&&Pu(u)}catch(at){gr(u,u.return,at)}}if(u===l){ht=null;break}if((v=u.sibling)!==null){v.return=u.return,ht=v;break}ht=u.return}}function yh(l){for(;ht!==null;){var u=ht;if(u===l){ht=null;break}var v=u.sibling;if(v!==null){v.return=u.return,ht=v;break}ht=u.return}}function vh(l){for(;ht!==null;){var u=ht;try{switch(u.tag){case 0:case 11:case 15:var v=u.return;try{zl(4,u)}catch(Se){gr(u,v,Se)}break;case 1:var E=u.stateNode;if(typeof E.componentDidMount=="function"){var C=u.return;try{E.componentDidMount()}catch(Se){gr(u,C,Se)}}var M=u.return;try{Pu(u)}catch(Se){gr(u,M,Se)}break;case 5:var $=u.return;try{Pu(u)}catch(Se){gr(u,$,Se)}}}catch(Se){gr(u,u.return,Se)}if(u===l){ht=null;break}var ue=u.sibling;if(ue!==null){ue.return=u.return,ht=ue;break}ht=u.return}}var wo=0,ku=1,Qa=2,Za=3,bo=4;if(typeof Symbol=="function"&&Symbol.for){var Ja=Symbol.for;wo=Ja("selector.component"),ku=Ja("selector.has_pseudo_class"),Qa=Ja("selector.role"),Za=Ja("selector.test_id"),bo=Ja("selector.text")}function Mu(l){var u=Ut(l);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(a(364));return u}if((l=cr(l))===null)throw Error(a(362));return l.stateNode.current}function Ou(l,u){switch(u.$$typeof){case wo:if(l.type===u.value)return!0;break;case ku:e:{u=u.value,l=[l,0];for(var v=0;v<l.length;){var E=l[v++],C=l[v++],M=u[C];if(E.tag!==5||!In(E)){for(;M!=null&&Ou(E,M);)M=u[++C];if(C===u.length){u=!0;break e}for(E=E.child;E!==null;)l.push(E,C),E=E.sibling}}u=!1}return u;case Qa:if(l.tag===5&&Ms(l.stateNode,u.value))return!0;break;case bo:if((l.tag===5||l.tag===6)&&(l=zn(l))!==null&&0<=l.indexOf(u.value))return!0;break;case Za:if(l.tag===5&&typeof(l=l.memoizedProps["data-testname"])=="string"&&l.toLowerCase()===u.value.toLowerCase())return!0;break;default:throw Error(a(365))}return!1}function Du(l){switch(l.$$typeof){case wo:return"<"+(de(l.value)||"Unknown")+">";case ku:return":has("+(Du(l)||"")+")";case Qa:return'[role="'+l.value+'"]';case bo:return'"'+l.value+'"';case Za:return'[data-testname="'+l.value+'"]';default:throw Error(a(365))}}function el(l,u){var v=[];l=[l,0];for(var E=0;E<l.length;){var C=l[E++],M=l[E++],$=u[M];if(C.tag!==5||!In(C)){for(;$!=null&&Ou(C,$);)$=u[++M];if(M===u.length)v.push(C);else for(C=C.child;C!==null;)l.push(C,M),C=C.sibling}}return v}function fi(l,u){if(!Dr)throw Error(a(363));l=el(l=Mu(l),u),u=[],l=Array.from(l);for(var v=0;v<l.length;){var E=l[v++];if(E.tag===5)In(E)||u.push(E.stateNode);else for(E=E.child;E!==null;)l.push(E),E=E.sibling}return u}var tl=Math.ceil,Vl=c.ReactCurrentDispatcher,Ec=c.ReactCurrentOwner,fr=c.ReactCurrentBatchConfig,zt=0,Yr=null,zr=null,Sr=0,Qr=0,So=si(0),Zr=0,ma=null,ga=0,ya=0,us=0,Eo=null,Tn=null,To=0,Nu=1/0,Ii=null;function rl(){Nu=Yt()+500}var Tc,xr=!1,Wl=null,Ys=null,$l=!1,Ts=null,Xl=0,As=0,Er=null,Br=-1,Hr=0;function cn(){return(6&zt)!=0?Yt():Br!==-1?Br:Br=Yt()}function cs(l){return(1&l.mode)==0?1:(2&zt)!=0&&Sr!==0?Sr&-Sr:El.transition!==null?(Hr===0&&(Hr=bl()),Hr):(l=Gt)!==0?l:vt()}function Ln(l,u,v,E){if(50<As)throw As=0,Er=null,Error(a(185));Qo(l,v,E),(2&zt)!=0&&l===Yr||(l===Yr&&((2&zt)==0&&(ya|=v),Zr===4&&Qs(l,Sr)),pi(l,E),v===1&&zt===0&&(1&u.mode)==0&&(rl(),Hi&&Mn()))}function pi(l,u){var v=l.callbackNode;(function(C,M){for(var $=C.suspendedLanes,ue=C.pingedLanes,Se=C.expirationTimes,Le=C.pendingLanes;0<Le;){var Ue=31-nn(Le),at=1<<Ue,Be=Se[Ue];Be===-1?(at&$)!=0&&(at&ue)==0||(Se[Ue]=hc(at,M)):Be<=M&&(C.expiredLanes|=at),Le&=~at}})(l,u);var E=Yo(l,l===Yr?Sr:0);if(E===0)v!==null&&ji(v),l.callbackNode=null,l.callbackPriority=0;else if(u=E&-E,l.callbackPriority!==u){if(v!=null&&ji(v),u===1)l.tag===0?(function(C){Hi=!0,_s(C)})(Cs.bind(null,l)):_s(Cs.bind(null,l)),Tr?Ni((function(){(6&zt)==0&&Mn()})):on(ho,Mn),v=null;else{switch(oi(E)){case 1:v=ho;break;case 4:v=Jo;break;case 16:default:v=Us;break;case 536870912:v=Gs}v=Th(v,An.bind(null,l))}l.callbackPriority=u,l.callbackNode=v}}function An(l,u){if(Br=-1,Hr=0,(6&zt)!=0)throw Error(a(327));var v=l.callbackNode;if(Ps()&&l.callbackNode!==v)return null;var E=Yo(l,l===Yr?Sr:0);if(E===0)return null;if((30&E)!=0||(E&l.expiredLanes)!=0||u)u=Bu(l,E);else{u=E;var C=zt;zt|=2;var M=_h();for(Yr===l&&Sr===u||(Ii=null,rl(),Ao(l,u));;)try{fd();break}catch(ue){Ac(l,ue)}oa(),Vl.current=M,zt=C,zr!==null?u=0:(Yr=null,Sr=0,u=Zr)}if(u!==0){if(u===2&&(C=qt(l))!==0&&(E=C,u=Lu(l,C)),u===1)throw v=ma,Ao(l,0),Qs(l,E),pi(l,Yt()),v;if(u===6)Qs(l,E);else{if(C=l.current.alternate,(30&E)==0&&!(function(ue){for(var Se=ue;;){if(16384&Se.flags){var Le=Se.updateQueue;if(Le!==null&&(Le=Le.stores)!==null)for(var Ue=0;Ue<Le.length;Ue++){var at=Le[Ue],Be=at.getSnapshot;at=at.value;try{if(!kn(Be(),at))return!1}catch{return!1}}}if(Le=Se.child,16384&Se.subtreeFlags&&Le!==null)Le.return=Se,Se=Le;else{if(Se===ue)break;for(;Se.sibling===null;){if(Se.return===null||Se.return===ue)return!0;Se=Se.return}Se.sibling.return=Se.return,Se=Se.sibling}}return!0})(C)&&((u=Bu(l,E))===2&&(M=qt(l))!==0&&(E=M,u=Lu(l,M)),u===1))throw v=ma,Ao(l,0),Qs(l,E),pi(l,Yt()),v;switch(l.finishedWork=C,l.finishedLanes=E,u){case 0:case 1:throw Error(a(345));case 2:case 5:il(l,Tn,Ii);break;case 3:if(Qs(l,E),(130023424&E)===E&&10<(u=To+500-Yt())){if(Yo(l,0)!==0)break;if(((C=l.suspendedLanes)&E)!==E){cn(),l.pingedLanes|=l.suspendedLanes&C;break}l.timeoutHandle=He(il.bind(null,l,Tn,Ii),u);break}il(l,Tn,Ii);break;case 4:if(Qs(l,E),(4194240&E)===E)break;for(u=l.eventTimes,C=-1;0<E;){var $=31-nn(E);M=1<<$,($=u[$])>C&&(C=$),E&=~M}if(E=C,10<(E=(120>(E=Yt()-E)?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*tl(E/1960))-E)){l.timeoutHandle=He(il.bind(null,l,Tn,Ii),E);break}il(l,Tn,Ii);break;default:throw Error(a(329))}}}return pi(l,Yt()),l.callbackNode===v?An.bind(null,l):null}function Lu(l,u){var v=Eo;return l.current.memoizedState.isDehydrated&&(Ao(l,u).flags|=256),(l=Bu(l,u))!==2&&(u=Tn,Tn=v,u!==null&&Fu(u)),l}function Fu(l){Tn===null?Tn=l:Tn.push.apply(Tn,l)}function Qs(l,u){for(u&=~us,u&=~ya,l.suspendedLanes|=u,l.pingedLanes&=~u,l=l.expirationTimes;0<u;){var v=31-nn(u),E=1<<v;l[v]=-1,u&=~E}}function Cs(l){if((6&zt)!=0)throw Error(a(327));Ps();var u=Yo(l,0);if((1&u)==0)return pi(l,Yt()),null;var v=Bu(l,u);if(l.tag!==0&&v===2){var E=qt(l);E!==0&&(u=E,v=Lu(l,E))}if(v===1)throw v=ma,Ao(l,0),Qs(l,u),pi(l,Yt()),v;if(v===6)throw Error(a(345));return l.finishedWork=l.current.alternate,l.finishedLanes=u,il(l,Tn,Ii),pi(l,Yt()),null}function Ri(l){Ts!==null&&Ts.tag===0&&(6&zt)==0&&Ps();var u=zt;zt|=1;var v=fr.transition,E=Gt;try{if(fr.transition=null,Gt=1,l)return l()}finally{Gt=E,fr.transition=v,(6&(zt=u))==0&&Mn()}}function nl(){Qr=So.current,$t(So)}function Ao(l,u){l.finishedWork=null,l.finishedLanes=0;var v=l.timeoutHandle;if(v!==Re&&(l.timeoutHandle=Re,Je(v)),zr!==null)for(v=zr.return;v!==null;){var E=v;switch(Ga(E),E.tag){case 1:(E=E.type.childContextTypes)!=null&&Ls();break;case 3:R(),$t(wn),$t(tn),re();break;case 5:L(E);break;case 4:R();break;case 13:case 19:$t(z);break;case 10:aa(E.type._context);break;case 22:case 23:nl()}v=v.return}if(Yr=l,zr=l=Co(l.current,null),Sr=Qr=u,Zr=0,ma=null,us=ya=ga=0,Tn=Eo=null,$s!==null){for(u=0;u<$s.length;u++)if((E=(v=$s[u]).interleaved)!==null){v.interleaved=null;var C=E.next,M=v.pending;if(M!==null){var $=M.next;M.next=C,E.next=$}v.pending=E}$s=null}return l}function Ac(l,u){for(;;){var v=zr;try{if(oa(),he.current=Dl,me){for(var E=J.memoizedState;E!==null;){var C=E.queue;C!==null&&(C.pending=null),E=E.next}me=!1}if(fe=0,se=oe=J=null,ve=!1,be=0,Ec.current=null,v===null||v.return===null){Zr=1,ma=u,zr=null;break}e:{var M=l,$=v.return,ue=v,Se=u;if(u=Sr,ue.flags|=32768,Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var Le=Se,Ue=ue,at=Ue.tag;if((1&Ue.mode)==0&&(at===0||at===11||at===15)){var Be=Ue.alternate;Be?(Ue.updateQueue=Be.updateQueue,Ue.memoizedState=Be.memoizedState,Ue.lanes=Be.lanes):(Ue.updateQueue=null,Ue.memoizedState=null)}var tt=Xa($);if(tt!==null){tt.flags&=-257,Es(tt,$,ue,0,u),1&tt.mode&&fh(M,Le,u),Se=Le;var _t=(u=tt).updateQueue;if(_t===null){var Wt=new Set;Wt.add(Se),u.updateQueue=Wt}else _t.add(Se);break e}if((1&u)==0){fh(M,Le,u),Cc();break e}Se=Error(a(426))}else if(nr&&1&ue.mode){var Ge=Xa($);if(Ge!==null){(65536&Ge.flags)==0&&(Ge.flags|=256),Es(Ge,$,ue,0,u),ia(Nl(Se,ue));break e}}M=Se=Nl(Se,ue),Zr!==4&&(Zr=2),Eo===null?Eo=[M]:Eo.push(M),M=$;do{switch(M.tag){case 3:M.flags|=65536,u&=-u,M.lanes|=u,Cl(M,_c(0,Se,u));break e;case 1:ue=Se;var pe=M.type,Ie=M.stateNode;if((128&M.flags)==0&&(typeof pe.getDerivedStateFromError=="function"||Ie!==null&&typeof Ie.componentDidCatch=="function"&&(Ys===null||!Ys.has(Ie)))){M.flags|=65536,u&=-u,M.lanes|=u,Cl(M,vo(M,ue,u));break e}}M=M.return}while(M!==null)}wh(v)}catch(qe){u=qe,zr===v&&v!==null&&(zr=v=v.return);continue}break}}function _h(){var l=Vl.current;return Vl.current=Dl,l===null?Dl:l}function Cc(){Zr!==0&&Zr!==3&&Zr!==2||(Zr=4),Yr===null||(268435455&ga)==0&&(268435455&ya)==0||Qs(Yr,Sr)}function Bu(l,u){var v=zt;zt|=2;var E=_h();for(Yr===l&&Sr===u||(Ii=null,Ao(l,u));;)try{dd();break}catch(C){Ac(l,C)}if(oa(),zt=v,Vl.current=E,zr!==null)throw Error(a(261));return Yr=null,Sr=0,Zr}function dd(){for(;zr!==null;)xh(zr)}function fd(){for(;zr!==null&&!Zo();)xh(zr)}function xh(l){var u=Tc(l.alternate,l,Qr);l.memoizedProps=l.pendingProps,u===null?wh(l):zr=u,Ec.current=null}function wh(l){var u=l;do{var v=u.alternate;if(l=u.return,(32768&u.flags)==0){if((v=Gl(v,u,Qr))!==null)return void(zr=v)}else{if((v=wc(v,u))!==null)return v.flags&=32767,void(zr=v);if(l===null)return Zr=6,void(zr=null);l.flags|=32768,l.subtreeFlags=0,l.deletions=null}if((u=u.sibling)!==null)return void(zr=u);zr=u=l}while(u!==null);Zr===0&&(Zr=5)}function il(l,u,v){var E=Gt,C=fr.transition;try{fr.transition=null,Gt=1,(function(M,$,ue,Se){do Ps();while(Ts!==null);if((6&zt)!=0)throw Error(a(327));ue=M.finishedWork;var Le=M.finishedLanes;if(ue===null)return null;if(M.finishedWork=null,M.finishedLanes=0,ue===M.current)throw Error(a(177));M.callbackNode=null,M.callbackPriority=0;var Ue=ue.lanes|ue.childLanes;if((function(tt,_t){var Wt=tt.pendingLanes&~_t;tt.pendingLanes=_t,tt.suspendedLanes=0,tt.pingedLanes=0,tt.expiredLanes&=_t,tt.mutableReadLanes&=_t,tt.entangledLanes&=_t,_t=tt.entanglements;var Ge=tt.eventTimes;for(tt=tt.expirationTimes;0<Wt;){var pe=31-nn(Wt),Ie=1<<pe;_t[pe]=0,Ge[pe]=-1,tt[pe]=-1,Wt&=~Ie}})(M,Ue),M===Yr&&(zr=Yr=null,Sr=0),(2064&ue.subtreeFlags)==0&&(2064&ue.flags)==0||$l||($l=!0,Th(Us,(function(){return Ps(),null}))),Ue=(15990&ue.flags)!=0,(15990&ue.subtreeFlags)!=0||Ue){Ue=fr.transition,fr.transition=null;var at=Gt;Gt=1;var Be=zt;zt|=4,Ec.current=null,(function(tt,_t){for(K(tt.containerInfo),ht=_t;ht!==null;)if(_t=(tt=ht).child,(1028&tt.subtreeFlags)!=0&&_t!==null)_t.return=tt,ht=_t;else for(;ht!==null;){tt=ht;try{var Wt=tt.alternate;if((1024&tt.flags)!=0)switch(tt.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(Wt!==null){var Ge=Wt.memoizedProps,pe=Wt.memoizedState,Ie=tt.stateNode,qe=Ie.getSnapshotBeforeUpdate(tt.elementType===tt.type?Ge:On(tt.type,Ge),pe);Ie.__reactInternalSnapshotBeforeUpdate=qe}break;case 3:ot&&gn(tt.stateNode.containerInfo);break;default:throw Error(a(163))}}catch(At){gr(tt,tt.return,At)}if((_t=tt.sibling)!==null){_t.return=tt.return,ht=_t;break}ht=tt.return}Wt=pa,pa=!1})(M,ue),Ya(ue,M),G(M.containerInfo),M.current=ue,rp(ue),Ar(),zt=Be,Gt=at,fr.transition=Ue}else M.current=ue;if($l&&($l=!1,Ts=M,Xl=Le),Ue=M.pendingLanes,Ue===0&&(Ys=null),(function(tt){if(Cr&&typeof Cr.onCommitFiberRoot=="function")try{Cr.onCommitFiberRoot(Ua,tt,void 0,(128&tt.current.flags)==128)}catch{}})(ue.stateNode),pi(M,Yt()),$!==null)for(Se=M.onRecoverableError,ue=0;ue<$.length;ue++)Le=$[ue],Se(Le.value,{componentStack:Le.stack,digest:Le.digest});if(xr)throw xr=!1,M=Wl,Wl=null,M;(1&Xl)!=0&&M.tag!==0&&Ps(),Ue=M.pendingLanes,(1&Ue)!=0?M===Er?As++:(As=0,Er=M):As=0,Mn()})(l,u,v,E)}finally{fr.transition=C,Gt=E}return null}function Ps(){if(Ts!==null){var l=oi(Xl),u=fr.transition,v=Gt;try{if(fr.transition=null,Gt=16>l?16:l,Ts===null)var E=!1;else{if(l=Ts,Ts=null,Xl=0,(6&zt)!=0)throw Error(a(331));var C=zt;for(zt|=4,ht=l.current;ht!==null;){var M=ht,$=M.child;if((16&ht.flags)!=0){var ue=M.deletions;if(ue!==null){for(var Se=0;Se<ue.length;Se++){var Le=ue[Se];for(ht=Le;ht!==null;){var Ue=ht;switch(Ue.tag){case 0:case 11:case 15:jl(8,Ue,M)}var at=Ue.child;if(at!==null)at.return=Ue,ht=at;else for(;ht!==null;){var Be=(Ue=ht).sibling,tt=Ue.return;if(hi(Ue),Ue===Le){ht=null;break}if(Be!==null){Be.return=tt,ht=Be;break}ht=tt}}}var _t=M.alternate;if(_t!==null){var Wt=_t.child;if(Wt!==null){_t.child=null;do{var Ge=Wt.sibling;Wt.sibling=null,Wt=Ge}while(Wt!==null)}}ht=M}}if((2064&M.subtreeFlags)!=0&&$!==null)$.return=M,ht=$;else e:for(;ht!==null;){if((2048&(M=ht).flags)!=0)switch(M.tag){case 0:case 11:case 15:jl(9,M,M.return)}var pe=M.sibling;if(pe!==null){pe.return=M.return,ht=pe;break e}ht=M.return}}var Ie=l.current;for(ht=Ie;ht!==null;){var qe=($=ht).child;if((2064&$.subtreeFlags)!=0&&qe!==null)qe.return=$,ht=qe;else e:for($=Ie;ht!==null;){if((2048&(ue=ht).flags)!=0)try{switch(ue.tag){case 0:case 11:case 15:zl(9,ue)}}catch(ir){gr(ue,ue.return,ir)}if(ue===$){ht=null;break e}var At=ue.sibling;if(At!==null){At.return=ue.return,ht=At;break e}ht=ue.return}}if(zt=C,Mn(),Cr&&typeof Cr.onPostCommitFiberRoot=="function")try{Cr.onPostCommitFiberRoot(Ua,l)}catch{}E=!0}return E}finally{Gt=v,fr.transition=u}}return!1}function bh(l,u,v){l=Ki(l,u=_c(0,u=Nl(v,u),1),1),u=cn(),l!==null&&(Qo(l,1,u),pi(l,u))}function gr(l,u,v){if(l.tag===3)bh(l,l,v);else for(;u!==null;){if(u.tag===3){bh(u,l,v);break}if(u.tag===1){var E=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Ys===null||!Ys.has(E))){u=Ki(u,l=vo(u,l=Nl(v,l),1),1),l=cn(),u!==null&&(Qo(u,1,l),pi(u,l));break}}u=u.return}}function Pc(l,u,v){var E=l.pingCache;E!==null&&E.delete(u),u=cn(),l.pingedLanes|=l.suspendedLanes&v,Yr===l&&(Sr&v)===v&&(Zr===4||Zr===3&&(130023424&Sr)===Sr&&500>Yt()-To?Ao(l,0):us|=v),pi(l,u)}function Sh(l,u){u===0&&((1&l.mode)==0?u=1:(u=Ko,(130023424&(Ko<<=1))==0&&(Ko=4194304)));var v=cn();(l=Xi(l,u))!==null&&(Qo(l,u,v),pi(l,v))}function Eh(l){var u=l.memoizedState,v=0;u!==null&&(v=u.retryLane),Sh(l,v)}function pd(l,u){var v=0;switch(l.tag){case 13:var E=l.stateNode,C=l.memoizedState;C!==null&&(v=C.retryLane);break;case 19:E=l.stateNode;break;default:throw Error(a(314))}E!==null&&E.delete(u),Sh(l,v)}function Th(l,u){return on(l,u)}function md(l,u,v,E){this.tag=l,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ki(l,u,v,E){return new md(l,u,v,E)}function Uu(l){return!(!(l=l.prototype)||!l.isReactComponent)}function Co(l,u){var v=l.alternate;return v===null?((v=ki(l.tag,u,l.key,l.mode)).elementType=l.elementType,v.type=l.type,v.stateNode=l.stateNode,v.alternate=l,l.alternate=v):(v.pendingProps=u,v.type=l.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=14680064&l.flags,v.childLanes=l.childLanes,v.lanes=l.lanes,v.child=l.child,v.memoizedProps=l.memoizedProps,v.memoizedState=l.memoizedState,v.updateQueue=l.updateQueue,u=l.dependencies,v.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},v.sibling=l.sibling,v.index=l.index,v.ref=l.ref,v}function Gu(l,u,v,E,C,M){var $=2;if(E=l,typeof l=="function")Uu(l)&&($=1);else if(typeof l=="string")$=5;else e:switch(l){case _:return va(v.children,C,M,u);case w:$=8,C|=8;break;case d:return(l=ki(12,v,u,2|C)).elementType=d,l.lanes=M,l;case I:return(l=ki(13,v,u,C)).elementType=I,l.lanes=M,l;case k:return(l=ki(19,v,u,C)).elementType=k,l.lanes=M,l;case j:return Ic(v,C,M,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case y:$=10;break e;case b:$=9;break e;case T:$=11;break e;case N:$=14;break e;case W:$=16,E=null;break e}throw Error(a(130,l==null?l:typeof l,""))}return(u=ki($,v,u,C)).elementType=l,u.type=E,u.lanes=M,u}function va(l,u,v,E){return(l=ki(7,l,E,u)).lanes=v,l}function Ic(l,u,v,E){return(l=ki(22,l,E,u)).elementType=j,l.lanes=v,l.stateNode={isHidden:!1},l}function Rc(l,u,v){return(l=ki(6,l,null,u)).lanes=v,l}function Ah(l,u,v){return(u=ki(4,l.children!==null?l.children:[],l.key,u)).lanes=v,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function np(l,u,v,E,C){this.tag=u,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Re,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sl(0),this.expirationTimes=Sl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sl(0),this.identifierPrefix=E,this.onRecoverableError=C,gt&&(this.mutableSourceEagerHydrationData=null)}function Ch(l,u,v,E,C,M,$,ue,Se){return l=new np(l,u,v,ue,Se),u===1?(u=1,M===!0&&(u|=8)):u=0,M=ki(3,null,null,u),l.current=M,M.stateNode=l,M.memoizedState={element:E,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},_u(M),l}function Ph(l){if(!l)return Pt;e:{if(ie(l=l._reactInternals)!==l||l.tag!==1)throw Error(a(170));var u=l;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(rn(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(a(171))}if(l.tag===1){var v=l.type;if(rn(v))return dr(l,v,u)}return u}function Ih(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(a(188)):(l=Object.keys(l).join(","),Error(a(268,l)));return(l=Ce(u))===null?null:l.stateNode}function ju(l,u){if((l=l.memoizedState)!==null&&l.dehydrated!==null){var v=l.retryLane;l.retryLane=v!==0&&v<u?v:u}}function kc(l,u){ju(l,u),(l=l.alternate)&&ju(l,u)}function ip(l){return(l=Ce(l))===null?null:l.stateNode}function sp(){return null}return Tc=function(l,u,v){if(l!==null)if(l.memoizedProps!==u.pendingProps||wn.current)Fr=!0;else{if((l.lanes&v)==0&&(128&u.flags)==0)return Fr=!1,(function(at,Be,tt){switch(Be.tag){case 3:_o(Be),$i();break;case 5:O(Be);break;case 1:rn(Be.type)&&Fs(Be);break;case 4:A(Be,Be.stateNode.containerInfo);break;case 10:Tl(0,Be.type._context,Be.memoizedProps.value);break;case 13:var _t=Be.memoizedState;if(_t!==null)return _t.dehydrated!==null?(hr(z,1&z.current),Be.flags|=128,null):(tt&Be.child.childLanes)!=0?Xn(at,Be,tt):(hr(z,1&z.current),(at=ts(at,Be,tt))!==null?at.sibling:null);hr(z,1&z.current);break;case 19:if(_t=(tt&Be.childLanes)!=0,(128&at.flags)!=0){if(_t)return mh(at,Be,tt);Be.flags|=128}var Wt=Be.memoizedState;if(Wt!==null&&(Wt.rendering=null,Wt.tail=null,Wt.lastEffect=null),hr(z,z.current),_t)break;return null;case 22:case 23:return Be.lanes=0,Ll(at,Be,tt)}return ts(at,Be,tt)})(l,u,v);Fr=(131072&l.flags)!=0}else Fr=!1,nr&&(1048576&u.flags)!=0&&po(u,fo,u.index);switch(u.lanes=0,u.tag){case 2:var E=u.type;es(l,u),l=u.pendingProps;var C=$n(u,tn.current);Ws(u,v),C=st(null,u,E,l,C,v);var M=Xe();return u.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,rn(E)?(M=!0,Fs(u)):M=!1,u.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,_u(u),C.updater=Wa,u.stateNode=C,C._reactInternals=u,ua(u,E,l,v),u=da(null,u,E,!0,M,v)):(u.tag=0,nr&&M&&zs(u),Dn(null,u,C,v),u=u.child),u;case 16:E=u.elementType;e:{switch(es(l,u),l=u.pendingProps,E=(C=E._init)(E._payload),u.type=E,C=u.tag=(function(at){if(typeof at=="function")return Uu(at)?1:0;if(at!=null){if((at=at.$$typeof)===T)return 11;if(at===N)return 14}return 2})(E),l=On(E,l),C){case 0:u=Fl(null,u,E,l,v);break e;case 1:u=xc(null,u,E,l,v);break e;case 11:u=ud(null,u,E,l,v);break e;case 14:u=cd(null,u,E,On(E.type,l),v);break e}throw Error(a(306,E,""))}return u;case 0:return E=u.type,C=u.pendingProps,Fl(l,u,E,C=u.elementType===E?C:On(E,C),v);case 1:return E=u.type,C=u.pendingProps,xc(l,u,E,C=u.elementType===E?C:On(E,C),v);case 3:e:{if(_o(u),l===null)throw Error(a(387));E=u.pendingProps,C=(M=u.memoizedState).element,xu(l,u),la(u,E,null,v);var $=u.memoizedState;if(E=$.element,gt&&M.isDehydrated){if(M={element:E,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},u.updateQueue.baseState=M,u.memoizedState=M,256&u.flags){u=_r(l,u,E,v,C=Nl(Error(a(423)),u));break e}if(E!==C){u=_r(l,u,E,v,C=Nl(Error(a(424)),u));break e}for(gt&&(Nr=ni(u.stateNode.containerInfo),ar=u,nr=!0,Ti=null,Wi=!1),v=go(u,null,E,v),u.child=v;v;)v.flags=-3&v.flags|4096,v=v.sibling}else{if($i(),E===C){u=ts(l,u,v);break e}Dn(l,u,E,v)}u=u.child}return u;case 5:return O(u),l===null&&Hs(u),E=u.type,C=u.pendingProps,M=l!==null?l.memoizedProps:null,$=C.children,Oe(E,C)?$=null:M!==null&&Oe(E,M)&&(u.flags|=32),qa(l,u),Dn(l,u,$,v),u.child;case 6:return l===null&&Hs(u),null;case 13:return Xn(l,u,v);case 4:return A(u,u.stateNode.containerInfo),E=u.pendingProps,l===null?u.child=ui(u,null,E,v):Dn(l,u,E,v),u.child;case 11:return E=u.type,C=u.pendingProps,ud(l,u,E,C=u.elementType===E?C:On(E,C),v);case 7:return Dn(l,u,u.pendingProps,v),u.child;case 8:case 12:return Dn(l,u,u.pendingProps.children,v),u.child;case 10:e:{if(E=u.type._context,C=u.pendingProps,M=u.memoizedProps,Tl(0,E,$=C.value),M!==null)if(kn(M.value,$)){if(M.children===C.children&&!wn.current){u=ts(l,u,v);break e}}else for((M=u.child)!==null&&(M.return=u);M!==null;){var ue=M.dependencies;if(ue!==null){$=M.child;for(var Se=ue.firstContext;Se!==null;){if(Se.context===E){if(M.tag===1){(Se=qi(-1,v&-v)).tag=2;var Le=M.updateQueue;if(Le!==null){var Ue=(Le=Le.shared).pending;Ue===null?Se.next=Se:(Se.next=Ue.next,Ue.next=Se),Le.pending=Se}}M.lanes|=v,(Se=M.alternate)!==null&&(Se.lanes|=v),vu(M.return,v,u),ue.lanes|=v;break}Se=Se.next}}else if(M.tag===10)$=M.type===u.type?null:M.child;else if(M.tag===18){if(($=M.return)===null)throw Error(a(341));$.lanes|=v,(ue=$.alternate)!==null&&(ue.lanes|=v),vu($,v,u),$=M.sibling}else $=M.child;if($!==null)$.return=M;else for($=M;$!==null;){if($===u){$=null;break}if((M=$.sibling)!==null){M.return=$.return,$=M;break}$=$.return}M=$}Dn(l,u,C.children,v),u=u.child}return u;case 9:return C=u.type,E=u.pendingProps.children,Ws(u,v),E=E(C=bn(C)),u.flags|=1,Dn(l,u,E,v),u.child;case 14:return C=On(E=u.type,u.pendingProps),cd(l,u,E,C=On(E.type,C),v);case 15:return ha(l,u,u.type,u.pendingProps,v);case 17:return E=u.type,C=u.pendingProps,C=u.elementType===E?C:On(E,C),es(l,u),u.tag=1,rn(E)?(l=!0,Fs(u)):l=!1,Ws(u,v),Qi(u,E,C),ua(u,E,C,v),da(null,u,E,!0,l,v);case 19:return mh(l,u,v);case 22:return Ll(l,u,v)}throw Error(a(156,u.tag))},e.attemptContinuousHydration=function(l){if(l.tag===13){var u=Xi(l,134217728);u!==null&&Ln(u,l,134217728,cn()),kc(l,134217728)}},e.attemptDiscreteHydration=function(l){if(l.tag===13){var u=Xi(l,1);u!==null&&Ln(u,l,1,cn()),kc(l,1)}},e.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var u=cs(l),v=Xi(l,u);v!==null&&Ln(v,l,u,cn()),kc(l,u)}},e.attemptSynchronousHydration=function(l){switch(l.tag){case 3:var u=l.stateNode;if(u.current.memoizedState.isDehydrated){var v=Xt(u.pendingLanes);v!==0&&(sn(u,1|v),pi(u,Yt()),(6&zt)==0&&(rl(),Mn()))}break;case 13:Ri((function(){var E=Xi(l,1);if(E!==null){var C=cn();Ln(E,l,1,C)}})),kc(l,1)}},e.batchedUpdates=function(l,u){var v=zt;zt|=1;try{return l(u)}finally{(zt=v)===0&&(rl(),Hi&&Mn())}},e.createComponentSelector=function(l){return{$$typeof:wo,value:l}},e.createContainer=function(l,u,v,E,C,M,$){return Ch(l,u,!1,null,0,E,0,M,$)},e.createHasPseudoClassSelector=function(l){return{$$typeof:ku,value:l}},e.createHydrationContainer=function(l,u,v,E,C,M,$,ue,Se){return(l=Ch(v,E,!0,l,0,M,0,ue,Se)).context=Ph(null),v=l.current,(M=qi(E=cn(),C=cs(v))).callback=u??null,Ki(v,M,C),l.current.lanes=C,Qo(l,C,E),pi(l,E),l},e.createPortal=function(l,u,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:E==null?null:""+E,children:l,containerInfo:u,implementation:v}},e.createRoleSelector=function(l){return{$$typeof:Qa,value:l}},e.createTestNameSelector=function(l){return{$$typeof:Za,value:l}},e.createTextSelector=function(l){return{$$typeof:bo,value:l}},e.deferredUpdates=function(l){var u=Gt,v=fr.transition;try{return fr.transition=null,Gt=16,l()}finally{Gt=u,fr.transition=v}},e.discreteUpdates=function(l,u,v,E,C){var M=Gt,$=fr.transition;try{return fr.transition=null,Gt=1,l(u,v,E,C)}finally{Gt=M,fr.transition=$,zt===0&&rl()}},e.findAllNodes=fi,e.findBoundingRects=function(l,u){if(!Dr)throw Error(a(363));u=fi(l,u),l=[];for(var v=0;v<u.length;v++)l.push(yi(u[v]));for(u=l.length-1;0<u;u--)for(var E=(v=l[u]).x,C=E+v.width,M=v.y,$=M+v.height,ue=u-1;0<=ue;ue--)if(u!==ue){var Se=l[ue],Le=Se.x,Ue=Le+Se.width,at=Se.y,Be=at+Se.height;if(E>=Le&&M>=at&&C<=Ue&&$<=Be){l.splice(u,1);break}if(!(E!==Le||v.width!==Se.width||Be<M||at>$)){at>M&&(Se.height+=at-M,Se.y=M),Be<$&&(Se.height=$-at),l.splice(u,1);break}if(!(M!==at||v.height!==Se.height||Ue<E||Le>C)){Le>E&&(Se.width+=Le-E,Se.x=E),Ue<C&&(Se.width=C-Le),l.splice(u,1);break}}return l},e.findHostInstance=Ih,e.findHostInstanceWithNoPortals=function(l){return(l=(l=Ne(l))!==null?_e(l):null)===null?null:l.stateNode},e.findHostInstanceWithWarning=function(l){return Ih(l)},e.flushControlled=function(l){var u=zt;zt|=1;var v=fr.transition,E=Gt;try{fr.transition=null,Gt=1,l()}finally{Gt=E,fr.transition=v,(zt=u)===0&&(rl(),Mn())}},e.flushPassiveEffects=Ps,e.flushSync=Ri,e.focusWithin=function(l,u){if(!Dr)throw Error(a(363));for(u=el(l=Mu(l),u),u=Array.from(u),l=0;l<u.length;){var v=u[l++];if(!In(v)){if(v.tag===5&&Li(v.stateNode))return!0;for(v=v.child;v!==null;)u.push(v),v=v.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Gt},e.getFindAllNodesFailureDescription=function(l,u){if(!Dr)throw Error(a(363));var v=0,E=[];l=[Mu(l),0];for(var C=0;C<l.length;){var M=l[C++],$=l[C++],ue=u[$];if((M.tag!==5||!In(M))&&(Ou(M,ue)&&(E.push(Du(ue)),++$>v&&(v=$)),$<u.length))for(M=M.child;M!==null;)l.push(M,$),M=M.sibling}if(v<u.length){for(l=[];v<u.length;v++)l.push(Du(u[v]));return`findAllNodes was able to match part of the selector:
  `+E.join(" > ")+`

No matching component was found for:
  `+l.join(" > ")}return null},e.getPublicRootInstance=function(l){return(l=l.current).child?l.child.tag===5?H(l.child.stateNode):l.child.stateNode:null},e.injectIntoDevTools=function(l){if(l={bundleType:l.bundleType,version:l.version,rendererPackageName:l.rendererPackageName,rendererConfig:l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:c.ReactCurrentDispatcher,findHostInstanceByFiber:ip,findFiberByHostInstance:l.findFiberByHostInstance||sp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)l=!0;else{try{Ua=u.inject(l),Cr=u}catch{}l=!!u.checkDCE}}return l},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(l,u,v,E){if(!Dr)throw Error(a(363));l=fi(l,u);var C=Zn(l,v,E).disconnect;return{disconnect:function(){C()}}},e.registerMutableSourceForHydration=function(l,u){var v=u._getVersion;v=v(u._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[u,v]:l.mutableSourceEagerHydrationData.push(u,v)},e.runWithPriority=function(l,u){var v=Gt;try{return Gt=l,u()}finally{Gt=v}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(l,u,v,E){var C=u.current,M=cn(),$=cs(C);return v=Ph(v),u.context===null?u.context=v:u.pendingContext=v,(u=qi(M,$)).payload={element:l},(E=E===void 0?null:E)!==null&&(u.callback=E),(l=Ki(C,u,$))!==null&&(Ln(l,C,$,M),Ss(l,C,$)),$},e}),C0}({get exports(){return ty},set exports(n){ty=n}}).exports=AC();var CC=JA(ty),ww={name:"root",dependencies:{"react-dom":"^18.0.0"}},ny={},lf={get exports(){return ny},set exports(n){ny=n}};(function(){var n,e,t,r,s,a;typeof performance<"u"&&performance!==null&&performance.now?lf.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(lf.exports=function(){return(n()-s)/1e6},e=process.hrtime,r=(n=function(){var c;return 1e9*(c=e())[0]+c[1]})(),a=1e9*process.uptime(),s=r-a):Date.now?(lf.exports=function(){return Date.now()-t},t=Date.now()):(lf.exports=function(){return new Date().getTime()-t},t=new Date().getTime())}).call(ZA);var R0,$c={},Yu={};({get exports(){return $c},set exports(n){$c=n}}).exports=(R0||(R0=1,Yu.ConcurrentRoot=1,Yu.ContinuousEventPriority=4,Yu.DefaultEventPriority=16,Yu.DiscreteEventPriority=1,Yu.IdleEventPriority=536870912,Yu.LegacyRoot=0),Yu);var PC={};function hg(n,e){n.addChild&&(n.addChild(e),typeof e.didMount=="function"&&e.didMount(e,n))}function bw(n,e){var t,r,s;(t=n.willUnmount)===null||t===void 0||t.call(n,n,e),((r=n.config)===null||r===void 0?void 0:r.destroyChildren)!==!1&&(s=n.children)!==null&&s!==void 0&&s.length&&_l(n.children).forEach((function(a){bw(a,n)}))}function k0(n,e){var t;bw(e,n),n.removeChild(e);var r=(t=e.config)!==null&&t!==void 0?t:{},s=r.destroy,a=s===void 0||s,c=r.destroyChildren,f=c===void 0||c,m=r.destroyTexture,_=m!==void 0&&m,w=r.destroyBaseTexture,d=w!==void 0&&w;a&&e.destroy({children:f,texture:_,baseTexture:d})}function M0(n,e,t){var r,s;en(e!==t,"Cannot insert node before itself"),n.children.indexOf(e)!==-1&&n.removeChild(e);var a=n.getChildIndex(t);n.addChildAt(e,a),(r=n.__reactpixi)===null||r===void 0||(s=r.root)===null||s===void 0||s.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertBefore"})}var O0=null,Bo=CC({getRootHostContext:function(){return PC},getChildHostContext:function(n){return n},getChildHostContextForEventComponent:function(n){return n},getPublicInstance:function(n){return n},getCurrentEventPriority:function(){return(function(){var n,e;if(typeof window>"u")return $c.DefaultEventPriority;switch((n=window)===null||n===void 0||(e=n.event)===null||e===void 0?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return $c.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return $c.ContinuousEventPriority;default:return $c.DefaultEventPriority}})()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=bC[n];if(typeof a=="function"&&(e=a(s,r)),!e){var c=xw[n];c&&((e=c.create(r,{root:s})).didMount=c.didMount?c.didMount.bind(e):void 0,e.willUnmount=c.willUnmount?c.willUnmount.bind(e):void 0,e.applyProps=c.applyProps?c.applyProps.bind(e):void 0,e.config=c.config)}return e&&(e.__reactpixi={root:s},(typeof((t=e)===null||t===void 0?void 0:t.applyProps)=="function"?e.applyProps:Da)(e,{},r)),e},hideInstance:function(n){n.visible=!1},unhideInstance:function(n,e){var t=e==null||!e.hasOwnProperty("visible")||e.visible;n.visible=t},finalizeInitialChildren:function(n,e,t){return!1},prepareUpdate:function(n,e,t,r,s,a){return O0=(function(c,f,m,_){var w=null;for(var d in m)!_.hasOwnProperty(d)&&m.hasOwnProperty(d)&&m[d]!==null&&(d===Jg||(w||(w=[]),w.push(d,null)));for(var y in _){var b=_[y],T=m!==null?m[y]:void 0;!_.hasOwnProperty(y)||b===T||b===null&&T===null||y===Jg||(w||(w=[]),w.push(y,b))}return w})(0,0,t,r)},shouldSetTextContent:function(n,e){return!1},shouldDeprioritizeSubtree:function(n,e){var t=e.alpha===void 0||e.alpha>0,r=e.renderable===void 0||e.renderable===!0,s=e.visible===void 0||e.visible===!0;return!(t&&r&&s)},createTextInstance:function(n,e,t){en(!1,'Error trying to add text node "'.concat(n,'"'),"text strings as children of a Pixi component is not supported. To add some text, use &lt;Text text={string} /&gt;")},unhideTextInstance:function(n,e){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:ny,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var n,e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=hg.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),a},appendChild:function(){for(var n,e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=hg.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),a},appendChildToContainer:function(){for(var n,e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=hg.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),a},removeChild:function(){for(var n,e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=k0.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),a},removeChildFromContainer:function(){for(var n,e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=k0.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),a},insertBefore:M0,insertInContainerBefore:function(){for(var n,e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=M0.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),a},commitUpdate:function(n,e,t,r,s){var a,c,f=n&&n.applyProps;typeof f!="function"&&(f=Da),(f(n,r,s)||O0)&&((a=n.__reactpixi)===null||a===void 0||(c=a.root)===null||c===void 0||c.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(n,e,t,r,s){},commitTextUpdate:function(n,e,t){},resetTextContent:function(n){},clearContainer:function(n){},getFundamentalComponentInstance:function(n){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(n){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(n){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(n){throw new Error("Not yet implemented.")},getInstanceFromNode:function(n){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(n){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(n){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(n){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(n){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(n){}}),IC=ww.dependencies["react-dom"].replace(/[^0-9.]/g,""),RC=ww.name;Bo.injectIntoDevTools({bundleType:0,version:IC,rendererPackageName:RC,findHostInstanceByFiber:Bo.findHostInstance});var hu=new Map;function Sw(n){if(en(Di.prototype.isPrototypeOf(n),"Invalid argument `container`, expected instance of `Container`."),hu.has(n)){var e=hu.get(n).pixiFiberContainer;Bo.updateContainer(null,e,void 0,(function(){hu.delete(n)}))}}function Ew(n){en(Di.prototype.isPrototypeOf(n),"Invalid argument `container`, expected instance of `Container`.");var e=hu.get(n);if(en(!e,"createRoot should only be called once"),!e){var t=Bo.createContainer(n);e={pixiFiberContainer:t,reactRoot:{render:function(r){return Bo.updateContainer(r,t,void 0),Bo.getPublicRootInstance(t)},unmount:function(){Sw(n),hu.delete(n)}}},hu.set(n,e)}return e.reactRoot}function kC(n,e,t){var r;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),t!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),hu.has(e)?r=hu.get(e).reactRoot:r=Ew(e),r.render(n)}function MC(n){Sw(n)}function sd(){return sd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sd.apply(this,arguments)}function OC(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function DC(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,yw(r.key),r)}}function cl(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Lf(n,e){return Lf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Lf(n,e)}function NC(n,e){if(e&&(ks(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cl(n)}function Ff(n){return Ff=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ff(n)}var Zf=mn.createContext(null),Tw=Zf.Provider,Aw=Zf.Consumer,LC=function(n){var e=mn.forwardRef((function(t,r){return mn.createElement(Aw,null,(function(s){return mn.createElement(n,sd({},t,{ref:r,app:s}))}))}));return e.displayName="withPIXIApp(".concat(n.displayName||n.name,")"),e};function FC(n){var e=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})();return function(){var t,r=Ff(n);if(e){var s=Ff(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return NC(this,t)}}function D0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.push.apply(t,r)}return t}function uf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?D0(Object(t),!0).forEach((function(r){fn(n,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):D0(Object(t)).forEach((function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))}))}return n}var N0=function(){},Cw={width:Mr.number,height:Mr.number,onMount:Mr.func,onUnmount:Mr.func,raf:Mr.bool,renderOnComponentChange:Mr.bool,children:Mr.node,options:Mr.shape({autoStart:Mr.bool,width:Mr.number,height:Mr.number,useContextAlpha:Mr.bool,backgroundAlpha:Mr.number,autoDensity:Mr.bool,antialias:Mr.bool,preserveDrawingBuffer:Mr.bool,resolution:Mr.number,forceCanvas:Mr.bool,backgroundColor:Mr.number,clearBeforeRender:Mr.bool,powerPreference:Mr.string,sharedTicker:Mr.bool,sharedLoader:Mr.bool,resizeTo:function(n,e){var t=n[e];t&&en(t===window||t instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(ks(t),", expect `window` or an `HTMLElement`."))},view:function(n,e,t){var r=n[e];r&&en(r instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(ks(r),", supplied to ").concat(t,", expected `<canvas> Element`"))}})},BC={width:800,height:600,onMount:N0,onUnmount:N0,raf:!0,renderOnComponentChange:!0},iy=(function(n){(function(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),c&&Lf(a,c)})(s,mn.Component);var e,t,r=FC(s);function s(){var a;OC(this,s);for(var c=arguments.length,f=new Array(c),m=0;m<c;m++)f[m]=arguments[m];return fn(cl(a=r.call.apply(r,[this].concat(f))),"_canvas",null),fn(cl(a),"_mediaQuery",null),fn(cl(a),"_ticker",null),fn(cl(a),"_needsUpdate",!0),fn(cl(a),"app",null),fn(cl(a),"updateSize",(function(){var _=a.props,w=_.width,d=_.height,y=_.options;y!=null&&y.resolution||(a.app.renderer.resolution=window.devicePixelRatio,a.resetInteractionManager()),a.app.renderer.resize(w,d)})),fn(cl(a),"needsRenderUpdate",(function(){a._needsUpdate=!0})),fn(cl(a),"renderStage",(function(){var _=a.props,w=_.renderOnComponentChange;!_.raf&&w&&a._needsUpdate&&(a._needsUpdate=!1,a.app.renderer.render(a.app.stage))})),a}return e=s,(t=[{key:"componentDidMount",value:function(){var a=this.props,c=a.onMount,f=a.width,m=a.height,_=a.options,w=a.raf,d=a.renderOnComponentChange;this.app=new Xf(uf(uf({width:f,height:m,view:this._canvas},_),{},{autoDensity:_?.autoDensity!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[w?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=Bo.createContainer(this.app.stage),Bo.updateContainer(this.getChildren(),this.mountNode,this),c(this.app),_!=null&&_.autoDensity&&window.matchMedia&&_?.resolution===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),d&&!w&&(this._ticker=new Gn,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(a,c,f){var m,_=this.props,w=_.width,d=_.height,y=_.raf,b=_.renderOnComponentChange,T=_.options;T?.resolution!==void 0&&a?.options.resolution!==T?.resolution&&(this.app.renderer.resolution=T.resolution,this.resetInteractionManager()),a.height===d&&a.width===w&&((m=a.options)===null||m===void 0?void 0:m.resolution)===T?.resolution||this.updateSize(),a.raf!==y&&this.app.ticker[y?"start":"stop"](),Bo.updateContainer(this.getChildren(),this.mountNode,this),a.width===w&&a.height===d&&a.raf===y&&a.renderOnComponentChange===b&&a.options===T||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var a=this.app.renderer.plugins.interaction;a!=null&&a.resolution&&(a.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var a=this.props.children;return mn.createElement(Tw,{value:this.app},a)}},{key:"componentDidCatch",value:function(a,c){console.error("Error occurred in `Stage`."),console.error(a),console.error(c)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),Bo.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var a,c,f=this,m=this.props.options;return m&&m.view?(en(m.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):mn.createElement("canvas",sd({},(a=this.props,c=[].concat(_l(Object.keys(Cw)),_l(Object.keys(ey))),Object.keys(a).filter((function(_){return!c.includes(_)})).reduce((function(_,w){return uf(uf({},_),{},fn({},w,a[w]))}),{})),{ref:function(_){return f._canvas=_}}))}}])&&DC(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),s})();iy.propTypes=Cw,iy.defaultProps=BC;var UC=iy;function Pw(){var n=It.useContext(Zf);return en(n instanceof Xf,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider"),n}function GC(n){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],t=Pw();en(typeof n=="function","`useTick` needs a callback function."),en(t instanceof Xf,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider");var r=It.useRef(null);It.useEffect((function(){r.current=n}),[n]),It.useEffect((function(){if(e){var s=function(a){return r.current.apply(t.ticker,[a,t.ticker])};return t.ticker.add(s),function(){t.ticker&&t.ticker.remove(s)}}}),[e])}function jC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}function sy(n,e,t){return sy=jC()?Reflect.construct.bind():function(r,s,a){var c=[null];c.push.apply(c,s);var f=new(Function.bind.apply(r,c));return a&&Lf(f,a.prototype),f},sy.apply(null,arguments)}var zC=["children","apply"];function L0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.push.apply(t,r)}return t}function cf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?L0(Object(t),!0).forEach((function(r){fn(n,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):L0(Object(t)).forEach((function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))}))}return n}var HC=function(n,e){en(ks(e)==="object","Second argument needs to be an indexed object with { prop: Filter }");var t=Object.keys(e),r=function(s){var a=s.children,c=s.apply,f=yu(s,zC),m=It.useRef(It.useMemo((function(){return t.map((function(d){var y,b=(f==null||(y=f[d])===null||y===void 0?void 0:y.construct)||[];return sy(e[d],_l(b))}))}),[t])),_=It.useMemo((function(){return t.reduce((function(d,y,b){return cf(cf({},d),{},fn({},y,m.current[b]))}),{})}),[t]),w=It.useMemo((function(){return Object.keys(f).filter(_w(vw(t))).reduce((function(d,y){return cf(cf({},d),{},fn({},y,f[y]))}),{})}),[f,t]);return t.forEach((function(d,y){return Object.assign(m.current[y],f[d])})),c&&(function(){for(var d=arguments.length,y=new Array(d),b=0;b<d;b++)y[b]=arguments[b];return y.every((function(T){return typeof T=="function"}))})(c)&&c.call(n,_),mn.createElement(n,sd({},w,{filters:m.current}),a)};return r.displayName="FilterWrapper",r.propTypes={children:Mr.node,apply:Mr.func},r},VC=ms.BitmapText,WC=ms.Container,$C=ms.Graphics,XC=ms.NineSlicePlane,qC=ms.ParticleContainer,KC=ms.Sprite,YC=ms.AnimatedSprite,QC=ms.Text,ZC=ms.TilingSprite,JC=ms.SimpleMesh,eP=ms.SimpleRope;const tP=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:YC,AppConsumer:Aw,AppContext:Zf,AppProvider:Tw,BitmapText:VC,Container:WC,Graphics:$C,NineSlicePlane:XC,ParticleContainer:qC,PixiComponent:SC,PixiFiber:Bo,SimpleMesh:JC,SimpleRope:eP,Sprite:KC,Stage:UC,TYPES:ms,Text:QC,TilingSprite:ZC,applyDefaultProps:Da,createRoot:Ew,eventHandlers:Nf,render:kC,unmountComponentAtNode:MC,useApp:Pw,useTick:GC,withFilters:HC,withPixiApp:LC},Symbol.toStringTag,{value:"Module"})),rP=U0(tP);var F0;function nP(){return F0||(F0=1,ig.exports=rP),ig.exports}var jo=nP();const iP=({sheetName:n,animationName:e,imageName:t,x:r,y:s,scale:a=1,rotation:c=0,anchor:f=.5,isPlaying:m=!0,currentFrame:_=0})=>{const w=mu.getInstance(),d=It.useRef(null),y=mn.useMemo(()=>t?w.getTexture(t):null,[t,w]),b=mn.useMemo(()=>{if(t)return null;const T=`${n}_${e}`;return w.getAnimation(T)},[n,e,t,w]);return It.useEffect(()=>{if(d.current&&b&&b.length>0){const T=Math.floor(_)%b.length;d.current.gotoAndStop(T)}},[_,b]),t&&y?ke.jsx(jo.Sprite,{texture:y,x:r,y:s,scale:a,rotation:c,anchor:f}):b&&b.length>0?ke.jsx(jo.AnimatedSprite,{ref:d,textures:b,isPlaying:!1,x:r,y:s,scale:a,rotation:c,anchor:f}):null},sP=({w:n,h:e})=>{const t=jo.useApp();return It.useEffect(()=>{t?.renderer&&(t.renderer.resize(n,e),t.view instanceof HTMLCanvasElement&&(t.view.width=n,t.view.height=e))},[t,n,e]),null},oP=({paused:n,w:e,h:t})=>{const r=It.useRef(null),s=It.useRef(0);return It.useEffect(()=>{r.current?.clear().beginFill(16777215).drawRect(0,0,e,t).endFill()},[e,t]),jo.useTick(a=>{if(!r.current||n)return;s.current+=Math.PI/60*a;const c=(Math.sin(s.current)+1)/2,f=Math.round(26+c*4),m=Math.round(26+c*54),_=Math.round(46+c*104);r.current.tint=(f<<16)+(m<<8)+_}),ke.jsx(jo.Graphics,{ref:r})},aP=({vm:n,paused:e})=>{const t=It.useRef(null),r=It.useRef([]),s=mu.getInstance();return It.useEffect(()=>()=>{r.current.forEach(a=>{a&&!a.destroyed&&a.destroy()}),r.current=[]},[]),jo.useTick(()=>{if(!t.current)return;const a=n.entityCount,c=r.current;if(a>c.length)for(let f=c.length;f<a;f++){const m=s.getTexture("static_rock");if(m){const _=new zo(m);_.anchor.set(.5),_.scale.set(.8),t.current.addChild(_),c.push(_)}}else if(a<c.length)for(let f=c.length-1;f>=a;f--){const m=c.pop();m&&(t.current.removeChild(m),m.destroy())}for(let f=0;f<a;f++){const m=c[f],_=n.getRockViewData(f);if(!_||e){m&&(m.visible=!1);continue}m.visible=!0,m.x=_.x,m.y=_.y,m.rotation=_.rotation}}),ke.jsx(jo.Container,{ref:t})},lP=({vm:n,paused:e,width:t,height:r,scale:s,heroPos:a,hp:c})=>{const f=It.useRef(null),[m,_]=It.useState(n.heroVisuals);return jo.useTick(()=>{const w=n.heroVisuals;f.current&&(f.current.x=w.x,f.current.y=w.y,f.current.rotation=w.rotation,f.current.scale.set(w.scale),a.current.x=w.x,a.current.y=w.y,_(w))}),ke.jsxs(ke.Fragment,{children:[ke.jsx(sP,{w:t,h:r}),ke.jsx(oP,{paused:e,w:t,h:r}),ke.jsxs(jo.Container,{scale:s,children:[ke.jsx(aP,{vm:n,paused:e}),ke.jsx(jo.Container,{ref:f,children:ke.jsx(iP,{sheetName:"hero_sheet",animationName:"idle",x:0,y:0,scale:1,anchor:.5,currentFrame:m.currentFrame})})]})]})},uP=({hp:n,rockCount:e,shieldBarRef:t,shieldTextRef:r,damageBtnRef:s,onDamage:a,onJumpToG2:c,onLevel1:f,onLevel2:m,onLevel3:_,onResetG1:w})=>{const d={padding:"0.6cqw 1cqw",cursor:"pointer",color:"#fff",border:"none",borderRadius:"0.4cqw",fontWeight:"bold",fontFamily:"monospace",fontSize:"0.8cqw",pointerEvents:"auto",textAlign:"center"};return ke.jsxs("div",{style:{position:"absolute",inset:0,pointerEvents:"none",containerType:"size"},children:[ke.jsxs("div",{style:{position:"absolute",top:"5cqh",left:"50%",transform:"translateX(-50%)",width:"35cqw"},children:[ke.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#fff",marginBottom:"0.5cqh",fontWeight:"bold",fontFamily:"monospace",fontSize:"1.2cqw"},children:[ke.jsx("span",{children:"SHIELD ENERGY"}),ke.jsxs("span",{ref:r,children:[Math.round(n),"%"]})]}),ke.jsx("div",{style:{width:"100%",height:"2cqh",backgroundColor:"#222",borderRadius:"1cqw",border:"0.2cqw solid #fff",overflow:"hidden"},children:ke.jsx("div",{ref:t,style:{width:`${Math.max(0,n)}%`,height:"100%",backgroundColor:n<30?"#c0392b":"#27ae60"}})})]}),ke.jsxs("div",{style:{position:"absolute",top:"3cqh",right:"3cqw",color:"#fff",fontFamily:"monospace",textAlign:"right",fontSize:"1.2cqw"},children:["ROCKS_ACTIVE: ",e]}),ke.jsxs("div",{style:{position:"absolute",top:"3cqh",left:"3cqw",display:"flex",flexDirection:"column",gap:"1cqh"},children:[ke.jsx("button",{ref:s,onClick:a,style:{...d,background:"#333",border:"0.1cqw solid #fff"},children:"TAKE DAMAGE (-15)"}),ke.jsxs("div",{style:{display:"flex",gap:"0.5cqw"},children:[ke.jsx("button",{onClick:f,style:{...d,background:"#408240",flex:1},children:"LVL 1"}),ke.jsx("button",{onClick:m,style:{...d,background:"#C29F19",flex:1},children:"LVL 2"}),ke.jsx("button",{onClick:_,style:{...d,background:"#C21919",flex:1},children:"LVL 3"})]}),ke.jsx("button",{onClick:c,style:{...d,background:"#2980b9"},children:"Go to Game 2"}),ke.jsx("div",{style:{display:"flex",gap:"0.5cqw"},children:ke.jsx("button",{onClick:w,style:{...d,background:"#c0392b",flex:1},children:"Quick Load"})})]})]})},cP=({vm:n,controller:e,width:t=960,height:r=540})=>{const[s,a]=It.useState(n.hp),[c,f]=It.useState(n.entityCount),[m,_]=It.useState(!1),w=It.useRef(null),d=It.useRef(null),y=It.useRef(null),b=It.useRef({x:n.pos.x,y:n.pos.y});It.useEffect(()=>{const I=n.subscribe(()=>{const W=Ur.getInstance().getActiveState()?.name!=="Game1";m!==W&&_(W);const j=n.hp;b.current.x=n.pos.x,b.current.y=n.pos.y,w.current&&(w.current.style.width=`${Math.max(0,j)}%`),d.current&&(d.current.innerText=`${Math.round(j)}%`),Math.abs(s-j)>1&&a(j),c!==n.entityCount&&f(n.entityCount)});return()=>I()},[n,s,c,m]);const T=It.useMemo(()=>t/960,[t]);return ke.jsxs("div",{style:{position:"absolute",inset:0,background:"#000",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:[ke.jsx("div",{style:{position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:ke.jsx(jo.Stage,{width:t,height:r,options:{backgroundColor:0,antialias:!0,resolution:1,autoDensity:!1},style:{display:"block",width:"100%",height:"100%",objectFit:"contain",imageRendering:"pixelated"},children:ke.jsx(lP,{vm:n,paused:m,width:t,height:r,scale:T,heroPos:b,hp:s})},`stage-${t}-${r}`)}),ke.jsx(uP,{hp:s,rockCount:c,shieldBarRef:w,shieldTextRef:d,damageBtnRef:y,onDamage:()=>e.takeDamage(),onJumpToG2:()=>e.jumpToGame2(),onLevel1:()=>e.loadLevel(ml.Level1),onLevel2:()=>e.loadLevel(ml.Level2),onLevel3:()=>e.loadLevel(ml.Level3),onResetG1:()=>e.resetLevel()})]})},hP={HERO_HP:0,HERO_X:1,HERO_Y:2,TICK_COUNT:3,FRAME_COUNT:4,FPS:5,REVISION:6,LAST_HIT_FRAME:7,ENTITY_COUNT:8,ROCKS_START_INDEX:10,ROCK_STRIDE:3,MAX_ROCKS:1e3,BUFFER_SIZE:4096};class Xc extends pw{constructor(e=!1,t=ml.Level1){super(e),this.currentLevel=t}name="Game1";logicSchema=hP;viewSchema=to;viewComponent=cP;getConfig(){return WA(this.currentLevel)}getSessionOverrides(e){const t=e.get(Df.hp);return t!==void 0?{initialHP:t}:{}}initMVC(){this.vm=new XA,this.controller=new $A(this.vm)}}const oy=Object.freeze(Object.defineProperty({__proto__:null,Game1State:Xc},Symbol.toStringTag,{value:"Module"})),dP={HERO_HP:0,ENERGY:1,SCRAP_COUNT:2,TICK_COUNT:3,FRAME_COUNT:4,FPS:5,REVISION:6,BUFFER_SIZE:1024},nc={HERO_HP_DISPLAY:0,ENERGY_DISPLAY:1,SCRAP_DISPLAY:2,UI_BOUNCE:3,GLITCH_INTENSITY:4,VIGNETTE_PULSE:5,BUFFER_SIZE:1024},fP=({stats:n,onAction:e,onJumpG1:t,onLevel1:r,onLevel2:s,onLevel3:a,onQuickLoad:c})=>{const f={padding:"1.5cqw",border:"0.1cqw solid",borderRadius:"0.5cqw",display:"flex",flexDirection:"column",gap:"1cqh"},m={padding:"0.5cqw 1cqw",cursor:"pointer",background:"#222",color:"#eee",border:"0.1cqw solid #444",fontSize:"0.8cqw",pointerEvents:"auto"};return ke.jsxs("div",{style:{position:"absolute",inset:0,pointerEvents:"none",containerType:"size",padding:"2cqw"},children:[ke.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#00ff00",fontFamily:"monospace"},children:[ke.jsx("h2",{style:{fontSize:"1.5cqw",margin:0},children:"SYSTEM_DIAGNOSTICS"}),ke.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5cqh",alignItems:"flex-end"},children:[ke.jsxs("div",{style:{display:"flex",gap:"0.5cqw"},children:[ke.jsx("button",{onClick:r,style:{...m,background:"#1b4d1b"},children:"LVL 1"}),ke.jsx("button",{onClick:s,style:{...m,background:"#4d431b"},children:"LVL 2"}),ke.jsx("button",{onClick:a,style:{...m,background:"#4d1b1b"},children:"LVL 3"})]}),ke.jsxs("div",{style:{display:"flex",gap:"0.5cqw"},children:[ke.jsx("button",{onClick:t,style:{...m,borderColor:"#3498db"},children:"GOTO_G1"}),ke.jsx("button",{onClick:c,style:{...m,borderColor:"#c0392b"},children:"RELOAD"})]})]})]}),ke.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"2cqw",marginTop:"2cqh",pointerEvents:"auto"},children:[ke.jsxs("div",{style:{...f,borderColor:"#00ff00",color:"#00ff00"},children:[ke.jsx("span",{children:"GLOBAL_HP"}),ke.jsx("b",{style:{fontSize:"2cqw"},children:n.hp.toFixed(1)}),ke.jsxs("div",{style:{display:"flex",gap:"0.5cqw"},children:[ke.jsx("button",{onClick:()=>e("MOD_HP",10),style:m,children:"+10"}),ke.jsx("button",{onClick:()=>e("MOD_HP",-10),style:m,children:"-10"})]})]}),ke.jsxs("div",{style:{...f,borderColor:"#3498db",color:"#3498db"},children:[ke.jsx("span",{children:"GLOBAL_ENERGY"}),ke.jsx("b",{style:{fontSize:"2cqw"},children:n.energy}),ke.jsx("button",{onClick:()=>e("MOD_ENERGY",5),style:m,children:"RECHARGE"})]}),ke.jsxs("div",{style:{...f,borderColor:"#f1c40f",color:"#f1c40f"},children:[ke.jsx("span",{children:"LOCAL_SCRAP"}),ke.jsx("b",{style:{fontSize:"2cqw"},children:n.scrap}),ke.jsx("button",{onClick:()=>e("ADD_SCRAP"),style:m,children:"COLLECT"})]})]})]})},B0={"Level 1":{initialHP:100,initialEnergy:50,initialScrap:0,maxEnergy:100,regenRate:60,manifestPath:"res/manifest.json",bgmKey:"bgm_level1"},"Level 2":{initialHP:80,initialEnergy:30,initialScrap:40,maxEnergy:80,regenRate:90,manifestPath:"res/manifest.json",bgmKey:"bgm_level1"},"Level 3":{initialHP:50,initialEnergy:10,initialScrap:10,maxEnergy:50,regenRate:120,manifestPath:"res/manifest.json",bgmKey:"bgm_level1"}};var gl=(n=>(n.Level1="Level 1",n.Level2="Level 2",n.Level3="Level 3",n))(gl||{});const pP=n=>B0[n]||B0["Level 1"],mP=({vm:n,controller:e})=>{const[t,r]=It.useState({hp:n.hp,energy:n.energy,scrap:n.scrap}),[s,a]=It.useState({uiOffset:0,glitch:0,pulse:0});It.useEffect(()=>{const m=n.subscribe(()=>{r({hp:n.hp,energy:n.energy,scrap:n.scrap});const _=n.visualEffects;a({uiOffset:_.uiOffset,glitch:_.glitchIntensity,pulse:_.vignettePulse})});return()=>m()},[n]);const c=(Math.random()-.5)*20*s.glitch,f=(Math.random()-.5)*20*s.glitch;return ke.jsx("div",{style:{position:"absolute",inset:0,background:"#000",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:ke.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",maxWidth:"calc(100vh * (16 / 9))",maxHeight:"calc(100vw * (9 / 16))",aspectRatio:"16 / 9",background:"#adadad",overflow:"hidden",transform:`translate(${c}px, ${f}px)`,textShadow:s.glitch>.1?`${s.glitch*5}px 0 #f00, -${s.glitch*5}px 0 #0ff`:"none"},children:[ke.jsx("div",{style:{position:"absolute",inset:0,background:`radial-gradient(circle, transparent 40%, rgba(0,0,0,${.8*s.pulse}))`,pointerEvents:"none",zIndex:1}}),ke.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:"#050505",fontSize:"10cqw",fontWeight:"bold",transform:`translateY(${s.uiOffset}px)`,opacity:.3+s.glitch*.7},children:"LAB_02"}),ke.jsx(fP,{stats:t,onAction:(m,_)=>e.modifyStat(m,_),onJumpG1:e.jumpToGame1,onLevel1:()=>e.loadLevel(gl.Level1),onLevel2:()=>e.loadLevel(gl.Level2),onLevel3:()=>e.loadLevel(gl.Level3),onQuickLoad:()=>e.resetLevel()})]})})};class gP extends gw{get hp(){return this.sharedView[nc.HERO_HP_DISPLAY]||0}get energy(){return this.sharedView[nc.ENERGY_DISPLAY]||0}get scrap(){return this.sharedView[nc.SCRAP_DISPLAY]||0}get visualEffects(){return{uiOffset:this.sharedView[nc.UI_BOUNCE]||0,glitchIntensity:this.sharedView[nc.GLITCH_INTENSITY]||0,vignettePulse:this.sharedView[nc.VIGNETTE_PULSE]||0}}}class yP extends mw{constructor(e){super(e,"Game2")}modifyStat(e,t){this.send(e,{amount:t})}async jumpToGame1(){const{Game1State:e}=await cu(async()=>{const{Game1State:t}=await Promise.resolve().then(()=>oy);return{Game1State:t}},void 0);Ur.getInstance().replace(new e(!1))}async loadLevel(e){const{Game2State:t}=await cu(async()=>{const{Game2State:r}=await Promise.resolve().then(()=>ay);return{Game2State:r}},void 0);Ur.getInstance().replace(new t(!1,e))}async resetLevel(){await Ia.getInstance().performLoad(this.RESET_SLOT);const{Game2State:e}=await cu(async()=>{const{Game2State:r}=await Promise.resolve().then(()=>ay);return{Game2State:r}},void 0),t=this.vm.currentLevel||gl.Level1;Ur.getInstance().replace(new e(!1,t))}onKeyDown(e){e.key==="Escape"&&this.handleEscape()}onWorkerEvent(e){}async handleEscape(){const{PauseMenuState:e}=await cu(async()=>{const{PauseMenuState:t}=await import("./PauseMenuState-BYMrgD4Z.js");return{PauseMenuState:t}},[]);Ur.getInstance().push(new e)}}class ed extends pw{constructor(e=!1,t=gl.Level1){super(e),this.currentLevel=t}name="Game2";logicSchema=dP;viewSchema=nc;viewComponent=mP;getConfig(){return pP(this.currentLevel)}getSessionOverrides(e){const t={},r=e.get(Df.hp);r!==void 0&&(t.initialHP=r);const s=e.get(Df.energy);return s!==void 0&&(t.initialEnergy=s),t}initMVC(){this.vm=new gP,this.controller=new yP(this.vm)}}const ay=Object.freeze(Object.defineProperty({__proto__:null,Game2State:ed},Symbol.toStringTag,{value:"Module"}));class vP extends Bf{constructor(){super(),this.handleKeyDown=this.handleKeyDown.bind(this)}async init(){this.isRendering=!0,window.addEventListener("keydown",this.handleKeyDown,!0)}destroy(){window.removeEventListener("keydown",this.handleKeyDown,!0)}onClose(){Ur.getInstance().pop()}handleKeyDown(e){e.key==="Escape"&&(e.stopImmediatePropagation(),e.preventDefault(),this.onClose())}}function _P(n,e,t){var r,s;typeof n=="function"?(r=e||[],s=t):(r=[],s=e);var a=mn.useRef({hasResult:!1,result:s,error:null}),c=mn.useReducer(function(_){return _+1},0);c[0];var f=c[1],m=mn.useMemo(function(){var _=typeof n=="function"?n():n;if(!_||typeof _.subscribe!="function")throw n===_?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!a.current.hasResult&&typeof window<"u"&&(typeof _.hasValue!="function"||_.hasValue()))if(typeof _.getValue=="function")a.current.result=_.getValue(),a.current.hasResult=!0;else{var w=_.subscribe(function(d){a.current.result=d,a.current.hasResult=!0});typeof w=="function"?w():w.unsubscribe()}return _},r);if(mn.useDebugValue(a.current.result),mn.useEffect(function(){var _=m.subscribe(function(w){var d=a.current;(d.error!==null||d.result!==w)&&(d.error=null,d.result=w,d.hasResult=!0,f())},function(w){var d=a.current;d.error!==w&&(d.error=w,f())});return typeof _=="function"?_:_.unsubscribe.bind(_)},r),a.current.error)throw a.current.error;return a.current.result}function xP(n,e,t){return _P(function(){return rh.liveQuery(n)},[],t)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(n){var e=rh.DexieYProvider;e&&e.release(n)});const wP=({activeStateName:n,onSave:e,onLoad:t,onBack:r})=>{const s=xP(()=>Zg.saves.toArray()),a=[1,2,3];return ke.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center"},children:ke.jsxs("div",{style:bP,children:[ke.jsx("h2",{style:{fontSize:"2.5cqw",color:"#0f0",letterSpacing:"0.2cqw"},children:"DATA_STORAGE_INTERFACE"}),ke.jsx("div",{style:{display:"flex",gap:"2cqw"},children:a.map(c=>{const f=s?.find(m=>m.id===c);return ke.jsxs("div",{style:SP,children:[ke.jsxs("div",{style:{color:"#888",fontSize:"0.8cqw"},children:["SLOT_0",c]}),ke.jsx("div",{style:{margin:"1.5cqw 0",height:"4cqw",borderBottom:"1px solid #222"},children:f?ke.jsxs(ke.Fragment,{children:[ke.jsx("div",{style:{color:"#fff",fontSize:"1.1cqw"},children:f.stateName}),ke.jsx("div",{style:{color:"#444",fontSize:"0.7cqw",marginTop:"0.4cqw"},children:new Date(f.timestamp).toLocaleString()})]}):ke.jsx("div",{style:{color:"#333",fontSize:"0.9cqw"},children:"--- EMPTY_SECTOR ---"})}),ke.jsx("button",{onClick:()=>e(c),style:dg("#27ae60"),children:"OVERWRITE"}),f&&ke.jsx("button",{onClick:()=>t(c),style:dg("#2980b9"),children:"RESTORE"})]},c)})}),ke.jsx("button",{onClick:r,style:{...dg("#c0392b"),marginTop:"3cqw",width:"12cqw"},children:"RETURN_TO_SYSTEM"})]})})},bP={position:"relative",width:"100%",height:"100%",maxWidth:"calc(100vh * (16 / 9))",maxHeight:"calc(100vw * (9 / 16))",aspectRatio:"16 / 9",backgroundColor:"rgba(5, 5, 5, 0.95)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:"monospace",zIndex:3e3,containerType:"size"},SP={width:"18cqw",padding:"1.5cqw",border:"1px solid #333",backgroundColor:"#0a0a0a",borderRadius:"0.4cqw",boxShadow:"0 0 1cqw rgba(0,0,0,0.5)"},dg=n=>({width:"100%",padding:"0.8cqw",marginBottom:"0.5cqw",backgroundColor:n,color:"white",border:"none",cursor:"pointer",fontFamily:"monospace",fontWeight:"bold",fontSize:"0.8cqw",borderRadius:"0.2cqw",transition:"filter 0.1s"});class EP extends vP{name="SaveMenu";stateRegistry={Game1:Xc,Game2:ed};getView(){const e=Ur.getInstance(),t=e.getUnderlyingStateName()||"Unknown";return mn.createElement(wP,{activeStateName:t,onBack:()=>e.pop(),onSave:async r=>{const s=e.getUnderlyingStateName();s&&await Ia.getInstance().performSave(r,s)},onLoad:async r=>{const s=await Ia.getInstance().performLoad(r),a=this.stateRegistry[s.stateName];if(a){const c=new a(!1);a.loadingConfig,e.pop(),e.replace(c)}}})}}const TP=({isFinished:n,onTransitionComplete:e})=>{const[t,r]=It.useState(1),[s,a]=It.useState("");return It.useEffect(()=>{if(n)return;const c=setInterval(()=>{a(f=>f.length>=3?"":f+".")},400);return()=>clearInterval(c)},[n]),It.useEffect(()=>{if(n){const c=setTimeout(()=>{r(0)},600);return()=>clearTimeout(c)}},[n]),It.useEffect(()=>{if(t===0){const c=setTimeout(e,500);return()=>clearTimeout(c)}},[t,e]),ke.jsx("div",{style:{position:"absolute",inset:0,background:"#000",display:"flex",alignItems:"center",justifyContent:"center"},children:ke.jsx("div",{style:{width:"100%",height:"100%",maxWidth:"calc(100vh * (16 / 9))",maxHeight:"calc(100vw * (9 / 16))",aspectRatio:"16 / 9",backgroundColor:"#000",opacity:t,transition:"opacity 0.5s ease-in-out",display:"flex",alignItems:"center",justifyContent:"center",color:"#00ff00",fontFamily:"monospace",textTransform:"uppercase"},children:ke.jsx("div",{style:{fontSize:"1.5cqw",letterSpacing:"0.2cqw",textAlign:"center"},children:n?ke.jsx("span",{style:{color:"#fff"},children:"Loaded"}):ke.jsxs("span",{children:["Loading",s]})})})})},ul=({label:n,onClick:e,active:t,color:r="#444",subLabel:s})=>ke.jsxs("button",{onClick:e,disabled:!e,style:{padding:"1cqw",backgroundColor:t?"#4f4":e?r:"#222",color:t?"#000":e?"#fff":"#666",border:"0.1cqw solid #555",borderRadius:"0.4cqw",cursor:e?"pointer":"default",fontSize:"0.8cqw",fontWeight:"bold",textAlign:"center",transition:"all 0.1s",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[ke.jsx("span",{children:n}),s&&ke.jsx("span",{style:{fontSize:"0.6cqw",fontWeight:"normal",opacity:.8},children:s})]}),fg=({label:n,value:e,onChange:t})=>ke.jsxs("div",{style:{marginBottom:"1.2cqw"},children:[ke.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.7cqw",color:"#00ff00",marginBottom:"0.4cqw"},children:[ke.jsx("span",{children:n}),ke.jsxs("span",{children:[Math.round(e*100),"%"]})]}),ke.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:e,onChange:r=>t(parseFloat(r.target.value)),style:{width:"100%",cursor:"pointer",accentColor:"#00ff00",height:"0.8cqh"}})]}),AP=({onNavigate:n,res:e,setRes:t})=>{const r=so.getInstance(),s=Pa.getInstance(),[a,c]=It.useState({master:r.get("master_volume")??.5,ost:r.get("ost_volume")??.5,sfx:r.get("sfx_volume")??.5}),f=()=>{Ur.getInstance().push(new EP)},m=(y,b)=>{s.setVolume(y,b),r.set(`${y}_volume`,b),c(T=>({...T,[y]:b}))},_=y=>{t?.(y),r.set("resolution",y)},w=()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()},d=(y,b,T)=>{const I=new y(b,T),k=y===Xc?{view:TP}:{};Ur.getInstance().replace(I,k)};return ke.jsx("div",{style:{position:"absolute",inset:0,background:"#000",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:ke.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",maxWidth:"calc(100vh * (16 / 9))",maxHeight:"calc(100vw * (9 / 16))",aspectRatio:"16 / 9",backgroundColor:"#0a0a0a",color:"#00ff00",padding:"2cqw",boxSizing:"border-box",fontFamily:"monospace",border:"0.2cqw solid #333",display:"flex",gap:"2cqw",containerType:"size"},children:[ke.jsxs("div",{style:{flex:2},children:[ke.jsx("h2",{style:{fontSize:"2cqw",letterSpacing:"0.2cqw",borderBottom:"0.1cqw solid #333",paddingBottom:"1cqw",margin:0,display:"flex",justifyContent:"space-between",alignItems:"center"},children:ke.jsx("span",{children:"DEV_SWITCHBOARD_V1"})}),ke.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1.5cqw",marginTop:"2cqw"},children:[ke.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5cqw"},children:[ke.jsx("div",{style:{fontSize:"0.8cqw",color:"#888",marginBottom:"0.5cqw"},children:"MODULE: GAME_01"}),ke.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.5cqw"},children:[ke.jsx(ul,{label:"LVL 1",onClick:()=>d(Xc,!0,ml.Level1),color:"#27ae60"}),ke.jsx(ul,{label:"LVL 2",onClick:()=>d(Xc,!0,ml.Level2),color:"#2980b9"}),ke.jsx(ul,{label:"LVL 3",onClick:()=>d(Xc,!0,ml.Level3),color:"#8e44ad"})]})]}),ke.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5cqw"},children:[ke.jsx("div",{style:{fontSize:"0.8cqw",color:"#888",marginBottom:"0.5cqw"},children:"MODULE: GAME_02"}),ke.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.5cqw"},children:[ke.jsx(ul,{label:"LVL 1",onClick:()=>d(ed,!0,gl.Level1),color:"#c0392b"}),ke.jsx(ul,{label:"LVL 2",onClick:()=>d(ed,!0,gl.Level2),color:"#d35400"}),ke.jsx(ul,{label:"LVL 3",onClick:()=>d(ed,!0,gl.Level3),color:"#f39c12"})]})]}),ke.jsxs("div",{style:{gridColumn:"span 2",marginTop:"1cqw"},children:[ke.jsx("div",{style:{fontSize:"0.8cqw",color:"#888",marginBottom:"0.5cqw"},children:"SYSTEM_NAVIGATION"}),ke.jsx(ul,{label:"OPEN SAVE / LOAD MENU",onClick:f,color:"#d35400"})]})]})]}),ke.jsxs("div",{style:{flex:1,backgroundColor:"#111",padding:"1.5cqw",borderRadius:"0.4cqw",borderLeft:"0.1cqw solid #333",display:"flex",flexDirection:"column"},children:[ke.jsx("h3",{style:{fontSize:"1.2cqw",margin:"0 0 2cqw 0",borderBottom:"0.1cqw solid #333",paddingBottom:"0.5cqw"},children:"GLOBAL_CONFIG"}),ke.jsx(fg,{label:"MASTER_VOLUME",value:a.master,onChange:y=>m("master",y)}),ke.jsx(fg,{label:"OST_VOLUME",value:a.ost,onChange:y=>m("ost",y)}),ke.jsx(fg,{label:"SFX_VOLUME",value:a.sfx,onChange:y=>m("sfx",y)}),ke.jsxs("div",{style:{marginTop:"1cqw",marginBottom:"1.5cqw"},children:[ke.jsx("div",{style:{fontSize:"0.7cqw",color:"#888",marginBottom:"0.6cqw"},children:"DISPLAY_RESOLUTION"}),ke.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.4cqw"},children:["540p","720p","1080p","1440p","4k","fit"].map(y=>ke.jsx(ul,{label:y.toUpperCase(),active:e===y,onClick:()=>_(y)},y))})]}),ke.jsxs("div",{style:{marginBottom:"2cqw"},children:[ke.jsx("div",{style:{fontSize:"0.7cqw",color:"#888",marginBottom:"0.6cqw"},children:"WINDOW_MODE"}),ke.jsx(ul,{label:"TOGGLE FULLSCREEN",onClick:w,color:"#b33939"})]}),ke.jsxs("div",{style:{marginTop:"auto",fontSize:"0.7cqw",color:"#444",lineHeight:"1.4"},children:["PERSISTENCE: ACTIVE",ke.jsx("br",{}),"SETTINGS_SYNC: LOCAL_STORAGE",ke.jsx("br",{}),"ACTIVE_RES: ",e?.toUpperCase()]})]})]})})};class CP extends Bf{name="DevMenu";async init(){this.isRendering=!0}update(e,t){}getView(){return mn.createElement(AP,{key:this.name,onNavigate:(e,...t)=>{const r=new e(...t);Ur.getInstance().replace(r)}})}destroy(){}}const PP=()=>{const[n,e]=It.useState([]),[t,r]=It.useState(!1),[s,a]=It.useState("fit"),[c,f]=It.useState(1),[m,_]=It.useState(window.devicePixelRatio||1),w=It.useRef(!1);It.useEffect(()=>{const y=Ur.getInstance(),b=W=>e([...W]),T=()=>_(window.devicePixelRatio||1),I=window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);I.addEventListener("change",T);const k=W=>{W.key==="F3"&&(W.preventDefault(),r(j=>!j))};window.addEventListener("keydown",k);const N=y.subscribe(b);return w.current||(y.replace(new CP),w.current=!0),()=>{window.removeEventListener("keydown",k),I.removeEventListener("change",T),N()}},[]),It.useEffect(()=>{let y=document.querySelector("link[rel~='icon']");y||(y=document.createElement("link"),y.rel="icon",document.head.appendChild(y)),y.href="res/sprite/icon/icon.png"},[]);const d=It.useMemo(()=>{switch(s){case"540p":return{w:960,h:540};case"720p":return{w:1280,h:720};case"1080p":return{w:1920,h:1080};case"1440p":return{w:2560,h:1440};case"4k":return{w:3840,h:2160};default:return null}},[s]);return ke.jsx("div",{className:"engine-wrapper",style:{width:"100vw",height:"100vh",backgroundColor:"#000",display:"flex",alignItems:"center",justifyContent:"center",overflow:"auto"},children:ke.jsxs("div",{className:"engine-root",style:{width:d?`${d.w/m}px`:"100%",height:d?`${d.h/m}px`:"auto",maxWidth:s==="fit"?"100vw":"none",maxHeight:s==="fit"?"100vh":"none",aspectRatio:"16 / 9",position:"relative",backgroundColor:"#111",imageRendering:"pixelated",containerType:"size",flexShrink:0,margin:"auto"},children:[n.map((y,b)=>ke.jsx("div",{style:{position:"absolute",inset:0,zIndex:b,pointerEvents:b===n.length-1?"auto":"none"},children:It.cloneElement(y,{width:d?.w||960,height:d?.h||540,res:s,setRes:a,uiScale:c,setUiScale:f})},b)),t&&ke.jsx(BA,{})]})})},Iw=document.getElementById("root");if(!Iw)throw new Error("Failed to find the root element.");au.getInstance().start();u1.createRoot(Iw).render(ke.jsx(mn.StrictMode,{children:ke.jsx(PP,{})}));export{Pa as A,CP as D,vP as M,mn as R,so as S,Ur as a,EP as b,ke as j,It as r};
