class o{constructor(i){this.revisionIndex=i}isInitialized=!1;sharedViews=new Map;intViews=new Map;config=null;inputState={actions:[],mouseX:0,mouseY:0,isMouseDown:!1,isHovering:!1};setBuffers(i){this.sharedViews.clear(),this.intViews.clear(),Object.entries(i).forEach(([t,s])=>{this.sharedViews.set(t,new Float32Array(s)),this.intViews.set(t,new Int32Array(s))})}get sharedView(){const i=this.sharedViews.get("main")||this.sharedViews.values().next().value;if(!i)throw new Error(`[BaseLogic] No SharedView available for ${this.constructor.name}`);return i}get intView(){const i=this.intViews.get("main")||this.intViews.values().next().value;if(!i)throw new Error(`[BaseLogic] No IntView available for ${this.constructor.name}`);return i}setInitialized(i){this.isInitialized=i,i&&this.onInitialize()}update(i,t,s,a){if(!this.isInitialized||this.sharedViews.size===0)return;this.onUpdate(this.sharedView,this.intView,s,a);const e=this.intView;e&&Atomics.add(e,this.revisionIndex,1)}handleInput(i){if(i.action==="SYNC_INPUT"){this.inputState.actions=i.actions||[],this.inputState.mouseX=i.mouseX||0,this.inputState.mouseY=i.mouseY||0,this.inputState.isMouseDown=!!i.isMouseDown,this.inputState.isHovering=!!i.isHovering;return}this.dispatcher.dispatch(i.action,i)}destroy(){this.isInitialized=!1,this.config=null}getSnapshot(){return{}}loadSnapshot(i){}onInitialize(){}}class r{constructor(i,t,s="Dispatcher"){this.logic=i,this.commands=t,this.debugName=s}dispatch(i,t){const s=this.commands[i];s?s.execute(this.logic,t):console.warn(`[${this.debugName}] Unknown action: ${i}`)}}export{o as B,r as a};
//# sourceMappingURL=BaseDispatcher-CXAw-hAN.js.map
