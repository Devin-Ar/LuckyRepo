(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var Pa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function H0(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var Dp={exports:{}},Uh={},Lp={exports:{}},Qt={};var nv;function o1(){if(nv)return Qt;nv=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),d=Symbol.iterator;function v(U){return U===null||typeof U!="object"?null:(U=d&&U[d]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,R={};function k(U,q,ce){this.props=U,this.context=q,this.refs=R,this.updater=ce||b}k.prototype.isReactComponent={},k.prototype.setState=function(U,q){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,q,"setState")},k.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function L(){}L.prototype=k.prototype;function W(U,q,ce){this.props=U,this.context=q,this.refs=R,this.updater=ce||b}var z=W.prototype=new L;z.constructor=W,T(z,k.prototype),z.isPureReactComponent=!0;var te=Array.isArray,K=Object.prototype.hasOwnProperty,de={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function ie(U,q,ce){var Ae,Me={},Fe=null,je=null;if(q!=null)for(Ae in q.ref!==void 0&&(je=q.ref),q.key!==void 0&&(Fe=""+q.key),q)K.call(q,Ae)&&!F.hasOwnProperty(Ae)&&(Me[Ae]=q[Ae]);var Ke=arguments.length-2;if(Ke===1)Me.children=ce;else if(1<Ke){for(var it=Array(Ke),Se=0;Se<Ke;Se++)it[Se]=arguments[Se+2];Me.children=it}if(U&&U.defaultProps)for(Ae in Ke=U.defaultProps,Ke)Me[Ae]===void 0&&(Me[Ae]=Ke[Ae]);return{$$typeof:n,type:U,key:Fe,ref:je,props:Me,_owner:de.current}}function ye(U,q){return{$$typeof:n,type:U.type,key:q,ref:U.ref,props:U.props,_owner:U._owner}}function Oe(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function Pe(U){var q={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ce){return q[ce]})}var ge=/\/+/g;function ve(U,q){return typeof U=="object"&&U!==null&&U.key!=null?Pe(""+U.key):q.toString(36)}function we(U,q,ce,Ae,Me){var Fe=typeof U;(Fe==="undefined"||Fe==="boolean")&&(U=null);var je=!1;if(U===null)je=!0;else switch(Fe){case"string":case"number":je=!0;break;case"object":switch(U.$$typeof){case n:case e:je=!0}}if(je)return je=U,Me=Me(je),U=Ae===""?"."+ve(je,0):Ae,te(Me)?(ce="",U!=null&&(ce=U.replace(ge,"$&/")+"/"),we(Me,q,ce,"",function(Se){return Se})):Me!=null&&(Oe(Me)&&(Me=ye(Me,ce+(!Me.key||je&&je.key===Me.key?"":(""+Me.key).replace(ge,"$&/")+"/")+U)),q.push(Me)),1;if(je=0,Ae=Ae===""?".":Ae+":",te(U))for(var Ke=0;Ke<U.length;Ke++){Fe=U[Ke];var it=Ae+ve(Fe,Ke);je+=we(Fe,q,ce,it,Me)}else if(it=v(U),typeof it=="function")for(U=it.call(U),Ke=0;!(Fe=U.next()).done;)Fe=Fe.value,it=Ae+ve(Fe,Ke++),je+=we(Fe,q,ce,it,Me);else if(Fe==="object")throw q=String(U),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return je}function qe(U,q,ce){if(U==null)return U;var Ae=[],Me=0;return we(U,Ae,"","",function(Fe){return q.call(ce,Fe,Me++)}),Ae}function H(U){if(U._status===-1){var q=U._result;q=q(),q.then(function(ce){(U._status===0||U._status===-1)&&(U._status=1,U._result=ce)},function(ce){(U._status===0||U._status===-1)&&(U._status=2,U._result=ce)}),U._status===-1&&(U._status=0,U._result=q)}if(U._status===1)return U._result.default;throw U._result}var V={current:null},D={transition:null},Y={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:D,ReactCurrentOwner:de};function j(){throw Error("act(...) is not supported in production builds of React.")}return Qt.Children={map:qe,forEach:function(U,q,ce){qe(U,function(){q.apply(this,arguments)},ce)},count:function(U){var q=0;return qe(U,function(){q++}),q},toArray:function(U){return qe(U,function(q){return q})||[]},only:function(U){if(!Oe(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Qt.Component=k,Qt.Fragment=t,Qt.Profiler=s,Qt.PureComponent=W,Qt.StrictMode=r,Qt.Suspense=m,Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,Qt.act=j,Qt.cloneElement=function(U,q,ce){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Ae=T({},U.props),Me=U.key,Fe=U.ref,je=U._owner;if(q!=null){if(q.ref!==void 0&&(Fe=q.ref,je=de.current),q.key!==void 0&&(Me=""+q.key),U.type&&U.type.defaultProps)var Ke=U.type.defaultProps;for(it in q)K.call(q,it)&&!F.hasOwnProperty(it)&&(Ae[it]=q[it]===void 0&&Ke!==void 0?Ke[it]:q[it])}var it=arguments.length-2;if(it===1)Ae.children=ce;else if(1<it){Ke=Array(it);for(var Se=0;Se<it;Se++)Ke[Se]=arguments[Se+2];Ae.children=Ke}return{$$typeof:n,type:U.type,key:Me,ref:Fe,props:Ae,_owner:je}},Qt.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},Qt.createElement=ie,Qt.createFactory=function(U){var q=ie.bind(null,U);return q.type=U,q},Qt.createRef=function(){return{current:null}},Qt.forwardRef=function(U){return{$$typeof:f,render:U}},Qt.isValidElement=Oe,Qt.lazy=function(U){return{$$typeof:w,_payload:{_status:-1,_result:U},_init:H}},Qt.memo=function(U,q){return{$$typeof:_,type:U,compare:q===void 0?null:q}},Qt.startTransition=function(U){var q=D.transition;D.transition={};try{U()}finally{D.transition=q}},Qt.unstable_act=j,Qt.useCallback=function(U,q){return V.current.useCallback(U,q)},Qt.useContext=function(U){return V.current.useContext(U)},Qt.useDebugValue=function(){},Qt.useDeferredValue=function(U){return V.current.useDeferredValue(U)},Qt.useEffect=function(U,q){return V.current.useEffect(U,q)},Qt.useId=function(){return V.current.useId()},Qt.useImperativeHandle=function(U,q,ce){return V.current.useImperativeHandle(U,q,ce)},Qt.useInsertionEffect=function(U,q){return V.current.useInsertionEffect(U,q)},Qt.useLayoutEffect=function(U,q){return V.current.useLayoutEffect(U,q)},Qt.useMemo=function(U,q){return V.current.useMemo(U,q)},Qt.useReducer=function(U,q,ce){return V.current.useReducer(U,q,ce)},Qt.useRef=function(U){return V.current.useRef(U)},Qt.useState=function(U){return V.current.useState(U)},Qt.useSyncExternalStore=function(U,q,ce){return V.current.useSyncExternalStore(U,q,ce)},Qt.useTransition=function(){return V.current.useTransition()},Qt.version="18.3.1",Qt}var iv;function cy(){return iv||(iv=1,Lp.exports=o1()),Lp.exports}var sv;function a1(){if(sv)return Uh;sv=1;var n=cy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(f,m,_){var w,d={},v=null,b=null;_!==void 0&&(v=""+_),m.key!==void 0&&(v=""+m.key),m.ref!==void 0&&(b=m.ref);for(w in m)r.call(m,w)&&!a.hasOwnProperty(w)&&(d[w]=m[w]);if(f&&f.defaultProps)for(w in m=f.defaultProps,m)d[w]===void 0&&(d[w]=m[w]);return{$$typeof:e,type:f,key:v,ref:b,props:d,_owner:s.current}}return Uh.Fragment=t,Uh.jsx=c,Uh.jsxs=c,Uh}var ov;function l1(){return ov||(ov=1,Dp.exports=a1()),Dp.exports}var _e=l1(),Pt=cy();const fn=sh(Pt);var Gd={},Np={exports:{}},fs={},Fp={exports:{}},Bp={};var av;function u1(){return av||(av=1,(function(n){function e(D,Y){var j=D.length;D.push(Y);e:for(;0<j;){var U=j-1>>>1,q=D[U];if(0<s(q,Y))D[U]=Y,D[j]=q,j=U;else break e}}function t(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var Y=D[0],j=D.pop();if(j!==Y){D[0]=j;e:for(var U=0,q=D.length,ce=q>>>1;U<ce;){var Ae=2*(U+1)-1,Me=D[Ae],Fe=Ae+1,je=D[Fe];if(0>s(Me,j))Fe<q&&0>s(je,Me)?(D[U]=je,D[Fe]=j,U=Fe):(D[U]=Me,D[Ae]=j,U=Ae);else if(Fe<q&&0>s(je,j))D[U]=je,D[Fe]=j,U=Fe;else break e}}return Y}function s(D,Y){var j=D.sortIndex-Y.sortIndex;return j!==0?j:D.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],_=[],w=1,d=null,v=3,b=!1,T=!1,R=!1,k=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(D){for(var Y=t(_);Y!==null;){if(Y.callback===null)r(_);else if(Y.startTime<=D)r(_),Y.sortIndex=Y.expirationTime,e(m,Y);else break;Y=t(_)}}function te(D){if(R=!1,z(D),!T)if(t(m)!==null)T=!0,H(K);else{var Y=t(_);Y!==null&&V(te,Y.startTime-D)}}function K(D,Y){T=!1,R&&(R=!1,L(ie),ie=-1),b=!0;var j=v;try{for(z(Y),d=t(m);d!==null&&(!(d.expirationTime>Y)||D&&!Pe());){var U=d.callback;if(typeof U=="function"){d.callback=null,v=d.priorityLevel;var q=U(d.expirationTime<=Y);Y=n.unstable_now(),typeof q=="function"?d.callback=q:d===t(m)&&r(m),z(Y)}else r(m);d=t(m)}if(d!==null)var ce=!0;else{var Ae=t(_);Ae!==null&&V(te,Ae.startTime-Y),ce=!1}return ce}finally{d=null,v=j,b=!1}}var de=!1,F=null,ie=-1,ye=5,Oe=-1;function Pe(){return!(n.unstable_now()-Oe<ye)}function ge(){if(F!==null){var D=n.unstable_now();Oe=D;var Y=!0;try{Y=F(!0,D)}finally{Y?ve():(de=!1,F=null)}}else de=!1}var ve;if(typeof W=="function")ve=function(){W(ge)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,qe=we.port2;we.port1.onmessage=ge,ve=function(){qe.postMessage(null)}}else ve=function(){k(ge,0)};function H(D){F=D,de||(de=!0,ve())}function V(D,Y){ie=k(function(){D(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){T||b||(T=!0,H(K))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ye=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(D){switch(v){case 1:case 2:case 3:var Y=3;break;default:Y=v}var j=v;v=Y;try{return D()}finally{v=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,Y){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var j=v;v=D;try{return Y()}finally{v=j}},n.unstable_scheduleCallback=function(D,Y,j){var U=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?U+j:U):j=U,D){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=j+q,D={id:w++,callback:Y,priorityLevel:D,startTime:j,expirationTime:q,sortIndex:-1},j>U?(D.sortIndex=j,e(_,D),t(m)===null&&D===t(_)&&(R?(L(ie),ie=-1):R=!0,V(te,j-U))):(D.sortIndex=q,e(m,D),T||b||(T=!0,H(K))),D},n.unstable_shouldYield=Pe,n.unstable_wrapCallback=function(D){var Y=v;return function(){var j=v;v=Y;try{return D.apply(this,arguments)}finally{v=j}}}})(Bp)),Bp}var lv;function c1(){return lv||(lv=1,Fp.exports=u1()),Fp.exports}var uv;function h1(){if(uv)return fs;uv=1;var n=cy(),e=c1();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,h=1;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){c(i,o),c(i+"Capture",o)}function c(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},d={};function v(i){return m.call(d,i)?!0:m.call(w,i)?!1:_.test(i)?d[i]=!0:(w[i]=!0,!1)}function b(i,o,h,g){if(h!==null&&h.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function T(i,o,h,g){if(o===null||typeof o>"u"||b(i,o,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function R(i,o,h,g,S,I,B){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=g,this.attributeNamespace=S,this.mustUseProperty=h,this.propertyName=i,this.type=o,this.sanitizeURL=I,this.removeEmptyString=B}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){k[i]=new R(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];k[o]=new R(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){k[i]=new R(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){k[i]=new R(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){k[i]=new R(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){k[i]=new R(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){k[i]=new R(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){k[i]=new R(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){k[i]=new R(i,5,!1,i.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function W(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(L,W);k[o]=new R(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(L,W);k[o]=new R(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(L,W);k[o]=new R(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){k[i]=new R(i,1,!1,i.toLowerCase(),null,!1,!1)}),k.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){k[i]=new R(i,1,!1,i.toLowerCase(),null,!0,!0)});function z(i,o,h,g){var S=k.hasOwnProperty(o)?k[o]:null;(S!==null?S.type!==0:g||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(T(o,h,S,g)&&(h=null),g||S===null?v(o)&&(h===null?i.removeAttribute(o):i.setAttribute(o,""+h)):S.mustUseProperty?i[S.propertyName]=h===null?S.type===3?!1:"":h:(o=S.attributeName,g=S.attributeNamespace,h===null?i.removeAttribute(o):(S=S.type,h=S===3||S===4&&h===!0?"":""+h,g?i.setAttributeNS(g,o,h):i.setAttribute(o,h))))}var te=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),de=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),ye=Symbol.for("react.profiler"),Oe=Symbol.for("react.provider"),Pe=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),qe=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),V=Symbol.for("react.offscreen"),D=Symbol.iterator;function Y(i){return i===null||typeof i!="object"?null:(i=D&&i[D]||i["@@iterator"],typeof i=="function"?i:null)}var j=Object.assign,U;function q(i){if(U===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);U=o&&o[1]||""}return`
`+U+i}var ce=!1;function Ae(i,o){if(!i||ce)return"";ce=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Re){var g=Re}Reflect.construct(i,[],o)}else{try{o.call()}catch(Re){g=Re}i.call(o.prototype)}else{try{throw Error()}catch(Re){g=Re}i()}}catch(Re){if(Re&&g&&typeof Re.stack=="string"){for(var S=Re.stack.split(`
`),I=g.stack.split(`
`),B=S.length-1,Q=I.length-1;1<=B&&0<=Q&&S[B]!==I[Q];)Q--;for(;1<=B&&0<=Q;B--,Q--)if(S[B]!==I[Q]){if(B!==1||Q!==1)do if(B--,Q--,0>Q||S[B]!==I[Q]){var oe=`
`+S[B].replace(" at new "," at ");return i.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",i.displayName)),oe}while(1<=B&&0<=Q);break}}}finally{ce=!1,Error.prepareStackTrace=h}return(i=i?i.displayName||i.name:"")?q(i):""}function Me(i){switch(i.tag){case 5:return q(i.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return i=Ae(i.type,!1),i;case 11:return i=Ae(i.type.render,!1),i;case 1:return i=Ae(i.type,!0),i;default:return""}}function Fe(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case F:return"Fragment";case de:return"Portal";case ye:return"Profiler";case ie:return"StrictMode";case ve:return"Suspense";case we:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Pe:return(i.displayName||"Context")+".Consumer";case Oe:return(i._context.displayName||"Context")+".Provider";case ge:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case qe:return o=i.displayName||null,o!==null?o:Fe(i.type)||"Memo";case H:o=i._payload,i=i._init;try{return Fe(i(o))}catch{}}return null}function je(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fe(o);case 8:return o===ie?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ke(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function it(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Se(i){var o=it(i)?"checked":"value",h=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),g=""+i[o];if(!i.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var S=h.get,I=h.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return S.call(this)},set:function(B){g=""+B,I.call(this,B)}}),Object.defineProperty(i,o,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(B){g=""+B},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function ot(i){i._valueTracker||(i._valueTracker=Se(i))}function Qe(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var h=o.getValue(),g="";return i&&(g=it(i)?i.checked?"true":"false":i.value),i=g,i!==h?(o.setValue(i),!0):!1}function gt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Bt(i,o){var h=o.checked;return j({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??i._wrapperState.initialChecked})}function dt(i,o){var h=o.defaultValue==null?"":o.defaultValue,g=o.checked!=null?o.checked:o.defaultChecked;h=Ke(o.value!=null?o.value:h),i._wrapperState={initialChecked:g,initialValue:h,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function vt(i,o){o=o.checked,o!=null&&z(i,"checked",o,!1)}function mr(i,o){vt(i,o);var h=Ke(o.value),g=o.type;if(h!=null)g==="number"?(h===0&&i.value===""||i.value!=h)&&(i.value=""+h):i.value!==""+h&&(i.value=""+h);else if(g==="submit"||g==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Li(i,o.type,h):o.hasOwnProperty("defaultValue")&&Li(i,o.type,Ke(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Cr(i,o,h){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var g=o.type;if(!(g!=="submit"&&g!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,h||o===i.value||(i.value=o),i.defaultValue=o}h=i.name,h!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,h!==""&&(i.name=h)}function Li(i,o,h){(o!=="number"||gt(i.ownerDocument)!==i)&&(h==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+h&&(i.defaultValue=""+h))}var Nr=Array.isArray;function hr(i,o,h,g){if(i=i.options,o){o={};for(var S=0;S<h.length;S++)o["$"+h[S]]=!0;for(h=0;h<i.length;h++)S=o.hasOwnProperty("$"+i[h].value),i[h].selected!==S&&(i[h].selected=S),S&&g&&(i[h].defaultSelected=!0)}else{for(h=""+Ke(h),o=null,S=0;S<i.length;S++){if(i[S].value===h){i[S].selected=!0,g&&(i[S].defaultSelected=!0);return}o!==null||i[S].disabled||(o=i[S])}o!==null&&(o.selected=!0)}}function yi(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return j({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function jn(i,o){var h=o.value;if(h==null){if(h=o.children,o=o.defaultValue,h!=null){if(o!=null)throw Error(t(92));if(Nr(h)){if(1<h.length)throw Error(t(93));h=h[0]}o=h}o==null&&(o=""),h=o}i._wrapperState={initialValue:Ke(h)}}function Cn(i,o){var h=Ke(o.value),g=Ke(o.defaultValue);h!=null&&(h=""+h,h!==i.value&&(i.value=h),o.defaultValue==null&&i.defaultValue!==h&&(i.defaultValue=h)),g!=null&&(i.defaultValue=""+g)}function Os(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function pn(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zn(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?pn(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Ds,Jn=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,h,g,S){MSApp.execUnsafeLocalFunction(function(){return i(o,h,g,S)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Ds=Ds||document.createElement("div"),Ds.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Ds.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function vi(i,o){if(o){var h=i.firstChild;if(h&&h===i.lastChild&&h.nodeType===3){h.nodeValue=o;return}}i.textContent=o}var _i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gs=["Webkit","ms","Moz","O"];Object.keys(_i).forEach(function(i){gs.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),_i[o]=_i[i]})});function ao(i,o,h){return o==null||typeof o=="boolean"||o===""?"":h||typeof o!="number"||o===0||_i.hasOwnProperty(i)&&_i[i]?(""+o).trim():o+"px"}function Ls(i,o){i=i.style;for(var h in o)if(o.hasOwnProperty(h)){var g=h.indexOf("--")===0,S=ao(h,o[h],g);h==="float"&&(h="cssFloat"),g?i.setProperty(h,S):i[h]=S}}var zn=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function re(i,o){if(o){if(zn[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Ie(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nt=null;function Zt(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ze=null,kt=null,mn=null;function ei(i){if(i=Nl(i)){if(typeof ze!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Fl(o),ze(i.stateNode,i.type,o))}}function $r(i){kt?mn?mn.push(i):mn=[i]:kt=i}function In(){if(kt){var i=kt,o=mn;if(mn=kt=null,ei(i),o)for(i=0;i<o.length;i++)ei(o[i])}}function $o(i,o){return i(o)}function xi(){}var Mr=!1;function wi(i,o,h){if(Mr)return i(o,h);Mr=!0;try{return $o(i,o,h)}finally{Mr=!1,(kt!==null||mn!==null)&&(xi(),In())}}function Ni(i,o){var h=i.stateNode;if(h===null)return null;var g=Fl(h);if(g===null)return null;h=g[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(i=i.type,g=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!g;break e;default:i=!1}if(i)return null;if(h&&typeof h!="function")throw Error(t(231,o,typeof h));return h}var ys=!1;if(f)try{var qt={};Object.defineProperty(qt,"passive",{get:function(){ys=!0}}),window.addEventListener("test",qt,qt),window.removeEventListener("test",qt,qt)}catch{ys=!1}function br(i,o,h,g,S,I,B,Q,oe){var Re=Array.prototype.slice.call(arguments,3);try{o.apply(h,Re)}catch(We){this.onError(We)}}var ti=!1,bi=null,Si=!1,ri=null,wl={onError:function(i){ti=!0,bi=i}};function ni(i,o,h,g,S,I,B,Q,oe){ti=!1,bi=null,br.apply(wl,arguments)}function vs(i,o,h,g,S,I,B,Q,oe){if(ni.apply(this,arguments),ti){if(ti){var Re=bi;ti=!1,bi=null}else throw Error(t(198));Si||(Si=!0,ri=Re)}}function Xr(i){var o=i,h=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(h=o.return),i=o.return;while(i)}return o.tag===3?h:null}function Ns(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function bl(i){if(Xr(i)!==i)throw Error(t(188))}function ii(i){var o=i.alternate;if(!o){if(o=Xr(i),o===null)throw Error(t(188));return o!==i?null:i}for(var h=i,g=o;;){var S=h.return;if(S===null)break;var I=S.alternate;if(I===null){if(g=S.return,g!==null){h=g;continue}break}if(S.child===I.child){for(I=S.child;I;){if(I===h)return bl(S),i;if(I===g)return bl(S),o;I=I.sibling}throw Error(t(188))}if(h.return!==g.return)h=S,g=I;else{for(var B=!1,Q=S.child;Q;){if(Q===h){B=!0,h=S,g=I;break}if(Q===g){B=!0,g=S,h=I;break}Q=Q.sibling}if(!B){for(Q=I.child;Q;){if(Q===h){B=!0,h=I,g=S;break}if(Q===g){B=!0,g=I,h=S;break}Q=Q.sibling}if(!B)throw Error(t(189))}}if(h.alternate!==g)throw Error(t(190))}if(h.tag!==3)throw Error(t(188));return h.stateNode.current===h?i:o}function Fi(i){return i=ii(i),i!==null?Hn(i):null}function Hn(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Hn(i);if(o!==null)return o;i=i.sibling}return null}var Ga=e.unstable_scheduleCallback,lo=e.unstable_cancelCallback,Or=e.unstable_shouldYield,uo=e.unstable_requestPaint,nr=e.unstable_now,Xo=e.unstable_getCurrentPriorityLevel,Bi=e.unstable_ImmediatePriority,co=e.unstable_UserBlockingPriority,qo=e.unstable_NormalPriority,ja=e.unstable_LowPriority,Vn=e.unstable_IdlePriority,si=null,Wt=null;function dr(i){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(si,i,void 0,(i.current.flags&128)===128)}catch{}}var Rt=Math.clz32?Math.clz32:Ui,en=Math.log,xn=Math.LN2;function Ui(i){return i>>>=0,i===0?32:31-(en(i)/xn|0)|0}var Wn=64,tn=4194304;function Fs(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ko(i,o){var h=i.pendingLanes;if(h===0)return 0;var g=0,S=i.suspendedLanes,I=i.pingedLanes,B=h&268435455;if(B!==0){var Q=B&~S;Q!==0?g=Fs(Q):(I&=B,I!==0&&(g=Fs(I)))}else B=h&~S,B!==0?g=Fs(B):I!==0&&(g=Fs(I));if(g===0)return 0;if(o!==0&&o!==g&&(o&S)===0&&(S=g&-g,I=o&-o,S>=I||S===16&&(I&4194240)!==0))return o;if((g&4)!==0&&(g|=h&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=g;0<o;)h=31-Rt(o),S=1<<h,g|=i[h],o&=~S;return g}function fr(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bs(i,o){for(var h=i.suspendedLanes,g=i.pingedLanes,S=i.expirationTimes,I=i.pendingLanes;0<I;){var B=31-Rt(I),Q=1<<B,oe=S[B];oe===-1?((Q&h)===0||(Q&g)!==0)&&(S[B]=fr(Q,o)):oe<=o&&(i.expiredLanes|=Q),I&=~Q}}function Us(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function rn(){var i=Wn;return Wn<<=1,(Wn&4194240)===0&&(Wn=64),i}function za(i){for(var o=[],h=0;31>h;h++)o.push(i);return o}function ho(i,o,h){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Rt(o),i[o]=h}function Yo(i,o){var h=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var g=i.eventTimes;for(i=i.expirationTimes;0<h;){var S=31-Rt(h),I=1<<S;o[S]=0,g[S]=-1,i[S]=-1,h&=~I}}function Qo(i,o){var h=i.entangledLanes|=o;for(i=i.entanglements;h;){var g=31-Rt(h),S=1<<g;S&o|i[g]&o&&(i[g]|=o),h&=~S}}var $t=0;function Zo(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var fc,Xt,Sl,El,Jo,nn=!1,Ut=[],oi=null,sn=null,Gi=null,ea=new Map,Ir=new Map,Kt=[],fo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ta(i,o){switch(i){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":sn=null;break;case"mouseover":case"mouseout":Gi=null;break;case"pointerover":case"pointerout":ea.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ir.delete(o.pointerId)}}function Gs(i,o,h,g,S,I){return i===null||i.nativeEvent!==I?(i={blockedOn:o,domEventName:h,eventSystemFlags:g,nativeEvent:I,targetContainers:[S]},o!==null&&(o=Nl(o),o!==null&&Xt(o)),i):(i.eventSystemFlags|=g,o=i.targetContainers,S!==null&&o.indexOf(S)===-1&&o.push(S),i)}function js(i,o,h,g,S){switch(o){case"focusin":return oi=Gs(oi,i,o,h,g,S),!0;case"dragenter":return sn=Gs(sn,i,o,h,g,S),!0;case"mouseover":return Gi=Gs(Gi,i,o,h,g,S),!0;case"pointerover":var I=S.pointerId;return ea.set(I,Gs(ea.get(I)||null,i,o,h,g,S)),!0;case"gotpointercapture":return I=S.pointerId,Ir.set(I,Gs(Ir.get(I)||null,i,o,h,g,S)),!0}return!1}function Ha(i){var o=pa(i.target);if(o!==null){var h=Xr(o);if(h!==null){if(o=h.tag,o===13){if(o=Ns(h),o!==null){i.blockedOn=o,Jo(i.priority,function(){Sl(h)});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){i.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Pr(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var h=on(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(h===null){h=i.nativeEvent;var g=new h.constructor(h.type,h);Nt=g,h.target.dispatchEvent(g),Nt=null}else return o=Nl(h),o!==null&&Xt(o),i.blockedOn=h,!1;o.shift()}return!0}function Pn(i,o,h){Pr(i)&&h.delete(o)}function ji(){nn=!1,oi!==null&&Pr(oi)&&(oi=null),sn!==null&&Pr(sn)&&(sn=null),Gi!==null&&Pr(Gi)&&(Gi=null),ea.forEach(Pn),Ir.forEach(Pn)}function zi(i,o){i.blockedOn===o&&(i.blockedOn=null,nn||(nn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ji)))}function Ei(i){function o(S){return zi(S,i)}if(0<Ut.length){zi(Ut[0],i);for(var h=1;h<Ut.length;h++){var g=Ut[h];g.blockedOn===i&&(g.blockedOn=null)}}for(oi!==null&&zi(oi,i),sn!==null&&zi(sn,i),Gi!==null&&zi(Gi,i),ea.forEach(o),Ir.forEach(o),h=0;h<Kt.length;h++)g=Kt[h],g.blockedOn===i&&(g.blockedOn=null);for(;0<Kt.length&&(h=Kt[0],h.blockedOn===null);)Ha(h),h.blockedOn===null&&Kt.shift()}var _s=te.ReactCurrentBatchConfig,Rn=!0;function ra(i,o,h,g){var S=$t,I=_s.transition;_s.transition=null;try{$t=1,na(i,o,h,g)}finally{$t=S,_s.transition=I}}function Hi(i,o,h,g){var S=$t,I=_s.transition;_s.transition=null;try{$t=4,na(i,o,h,g)}finally{$t=S,_s.transition=I}}function na(i,o,h,g){if(Rn){var S=on(i,o,h,g);if(S===null)_c(i,o,g,po,h),ta(i,g);else if(js(S,i,o,h,g))g.stopPropagation();else if(ta(i,g),o&4&&-1<fo.indexOf(i)){for(;S!==null;){var I=Nl(S);if(I!==null&&fc(I),I=on(i,o,h,g),I===null&&_c(i,o,g,po,h),I===S)break;S=I}S!==null&&g.stopPropagation()}else _c(i,o,g,null,h)}}var po=null;function on(i,o,h,g){if(po=null,i=Zt(g),i=pa(i),i!==null)if(o=Xr(i),o===null)i=null;else if(h=o.tag,h===13){if(i=Ns(o),i!==null)return i;i=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return po=i,null}function gn(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xo()){case Bi:return 1;case co:return 4;case qo:case ja:return 16;case Vn:return 536870912;default:return 16}default:return 16}}var yn=null,ai=null,li=null;function zs(){if(li)return li;var i,o=ai,h=o.length,g,S="value"in yn?yn.value:yn.textContent,I=S.length;for(i=0;i<h&&o[i]===S[i];i++);var B=h-i;for(g=1;g<=B&&o[h-g]===S[I-g];g++);return li=S.slice(i,1<g?1-g:void 0)}function mo(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Hs(){return!0}function Va(){return!1}function lr(i){function o(h,g,S,I,B){this._reactName=h,this._targetInst=S,this.type=g,this.nativeEvent=I,this.target=B,this.currentTarget=null;for(var Q in i)i.hasOwnProperty(Q)&&(h=i[Q],this[Q]=h?h(I):I[Q]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?Hs:Va,this.isPropagationStopped=Va,this}return j(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Hs)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Hs)},persist:function(){},isPersistent:Hs}),o}var Fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ir=lr(Fr),Vi=j({},Fr,{view:0,detail:0}),Ti=lr(Vi),xs,ia,ws,Vs=j({},Vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ua,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ws&&(ws&&i.type==="mousemove"?(xs=i.screenX-ws.screenX,ia=i.screenY-ws.screenY):ia=xs=0,ws=i),xs)},movementY:function(i){return"movementY"in i?i.movementY:ia}}),Wa=lr(Vs),zr=j({},Vs,{dataTransfer:0}),sa=lr(zr),Wi=j({},Vi,{relatedTarget:0}),oa=lr(Wi),Tl=j({},Fr,{animationName:0,elapsedTime:0,pseudoElement:0}),$a=lr(Tl),pc=j({},Fr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),kn=lr(pc),aa=j({},Fr,{data:0}),Ai=lr(aa),Ws={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},la={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Al(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=la[i])?!!o[i]:!1}function ua(){return Al}var _u=j({},Vi,{key:function(i){if(i.key){var o=Ws[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=mo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Xa[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ua,charCode:function(i){return i.type==="keypress"?mo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?mo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),$s=lr(_u),wn=j({},Vs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xs=lr(wn),qa=j({},Vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ua}),Cl=lr(qa),$i=j({},Fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),bs=lr($i),xu=j({},Vs,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),wu=lr(xu),Xi=[9,13,27,32],qi=f&&"CompositionEvent"in window,Ss=null;f&&"documentMode"in document&&(Ss=document.documentMode);var Il=f&&"TextEvent"in window&&!Ss,ca=f&&(!qi||Ss&&8<Ss&&11>=Ss),Pl=" ",bu=!1;function Rl(i,o){switch(i){case"keyup":return Xi.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ka(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ki=!1;function Yi(i,o){switch(i){case"compositionend":return Ka(o);case"keypress":return o.which!==32?null:(bu=!0,Pl);case"textInput":return i=o.data,i===Pl&&bu?null:i;default:return null}}function Rr(i,o){if(Ki)return i==="compositionend"||!qi&&Rl(i,o)?(i=zs(),li=ai=yn=null,Ki=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ca&&o.locale!=="ko"?null:o.data;default:return null}}var ha={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ci(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!ha[i.type]:o==="textarea"}function Ya(i,o,h,g){$r(g),o=Tu(o,"onChange"),0<o.length&&(h=new ir("onChange","change",null,h,g),i.push({event:h,listeners:o}))}var qs=null,go=null;function ui(i){gc(i,0)}function yo(i){var o=Za(i);if(Qe(o))return i}function Qi(i,o){if(i==="change")return o}var Br=!1;if(f){var Ks;if(f){var p="oninput"in document;if(!p){var x=document.createElement("div");x.setAttribute("oninput","return;"),p=typeof x.oninput=="function"}Ks=p}else Ks=!1;Br=Ks&&(!document.documentMode||9<document.documentMode)}function A(){qs&&(qs.detachEvent("onpropertychange",P),go=qs=null)}function P(i){if(i.propertyName==="value"&&yo(go)){var o=[];Ya(o,go,i,Zt(i)),wi(ui,o)}}function M(i,o,h){i==="focusin"?(A(),qs=o,go=h,qs.attachEvent("onpropertychange",P)):i==="focusout"&&A()}function N(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return yo(go)}function G(i,o){if(i==="click")return yo(o)}function X(i,o){if(i==="input"||i==="change")return yo(o)}function ae(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var fe=typeof Object.is=="function"?Object.is:ae;function se(i,o){if(fe(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var h=Object.keys(i),g=Object.keys(o);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var S=h[g];if(!m.call(o,S)||!fe(i[S],o[S]))return!1}return!0}function ne(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function le(i,o){var h=ne(i);i=0;for(var g;h;){if(h.nodeType===3){if(g=i+h.textContent.length,i<=o&&g>=o)return{node:h,offset:o-i};i=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=ne(h)}}function ee(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?ee(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function J(){for(var i=window,o=gt();o instanceof i.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)i=o.contentWindow;else break;o=gt(i.document)}return o}function Z(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function xe(i){var o=J(),h=i.focusedElem,g=i.selectionRange;if(o!==h&&h&&h.ownerDocument&&ee(h.ownerDocument.documentElement,h)){if(g!==null&&Z(h)){if(o=g.start,i=g.end,i===void 0&&(i=o),"selectionStart"in h)h.selectionStart=o,h.selectionEnd=Math.min(i,h.value.length);else if(i=(o=h.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var S=h.textContent.length,I=Math.min(g.start,S);g=g.end===void 0?I:Math.min(g.end,S),!i.extend&&I>g&&(S=g,g=I,I=S),S=le(h,I);var B=le(h,g);S&&B&&(i.rangeCount!==1||i.anchorNode!==S.node||i.anchorOffset!==S.offset||i.focusNode!==B.node||i.focusOffset!==B.offset)&&(o=o.createRange(),o.setStart(S.node,S.offset),i.removeAllRanges(),I>g?(i.addRange(o),i.extend(B.node,B.offset)):(o.setEnd(B.node,B.offset),i.addRange(o)))}}for(o=[],i=h;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<o.length;h++)i=o[h],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Ee=f&&"documentMode"in document&&11>=document.documentMode,pe=null,De=null,Ne=null,Je=!1;function rt(i,o,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Je||pe==null||pe!==gt(g)||(g=pe,"selectionStart"in g&&Z(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Ne&&se(Ne,g)||(Ne=g,g=Tu(De,"onSelect"),0<g.length&&(o=new ir("onSelect","select",null,o,h),i.push({event:o,listeners:g}),o.target=pe)))}function He(i,o){var h={};return h[i.toLowerCase()]=o.toLowerCase(),h["Webkit"+i]="webkit"+o,h["Moz"+i]="moz"+o,h}var st={animationend:He("Animation","AnimationEnd"),animationiteration:He("Animation","AnimationIteration"),animationstart:He("Animation","AnimationStart"),transitionend:He("Transition","TransitionEnd")},et={},Xe={};f&&(Xe=document.createElement("div").style,"AnimationEvent"in window||(delete st.animationend.animation,delete st.animationiteration.animation,delete st.animationstart.animation),"TransitionEvent"in window||delete st.transitionend.transition);function ut(i){if(et[i])return et[i];if(!st[i])return i;var o=st[i],h;for(h in o)if(o.hasOwnProperty(h)&&h in Xe)return et[i]=o[h];return i}var Vt=ut("animationend"),Yt=ut("animationiteration"),At=ut("animationstart"),Ft=ut("transitionend"),gr=new Map,Mn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rr(i,o){gr.set(i,o),a(o,[i])}for(var Zi=0;Zi<Mn.length;Zi++){var da=Mn[Zi],Su=da.toLowerCase(),hd=da[0].toUpperCase()+da.slice(1);rr(Su,"on"+hd)}rr(Vt,"onAnimationEnd"),rr(Yt,"onAnimationIteration"),rr(At,"onAnimationStart"),rr("dblclick","onDoubleClick"),rr("focusin","onFocus"),rr("focusout","onBlur"),rr(Ft,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mc=new Set("cancel close invalid load scroll toggle".split(" ").concat(fa));function uh(i,o,h){var g=i.type||"unknown-event";i.currentTarget=h,vs(g,o,void 0,i),i.currentTarget=null}function gc(i,o){o=(o&4)!==0;for(var h=0;h<i.length;h++){var g=i[h],S=g.event;g=g.listeners;e:{var I=void 0;if(o)for(var B=g.length-1;0<=B;B--){var Q=g[B],oe=Q.instance,Re=Q.currentTarget;if(Q=Q.listener,oe!==I&&S.isPropagationStopped())break e;uh(S,Q,Re),I=oe}else for(B=0;B<g.length;B++){if(Q=g[B],oe=Q.instance,Re=Q.currentTarget,Q=Q.listener,oe!==I&&S.isPropagationStopped())break e;uh(S,Q,Re),I=oe}}}if(Si)throw i=ri,Si=!1,ri=null,i}function _r(i,o){var h=o[On];h===void 0&&(h=o[On]=new Set);var g=i+"__bubble";h.has(g)||(vc(o,i,2,!1),h.add(g))}function yc(i,o,h){var g=0;o&&(g|=4),vc(h,i,g,o)}var Eu="_reactListening"+Math.random().toString(36).slice(2);function kl(i){if(!i[Eu]){i[Eu]=!0,r.forEach(function(h){h!=="selectionchange"&&(mc.has(h)||yc(h,!1,i),yc(h,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Eu]||(o[Eu]=!0,yc("selectionchange",!1,o))}}function vc(i,o,h,g){switch(gn(o)){case 1:var S=ra;break;case 4:S=Hi;break;default:S=na}h=S.bind(null,o,h,i),S=void 0,!ys||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(S=!0),g?S!==void 0?i.addEventListener(o,h,{capture:!0,passive:S}):i.addEventListener(o,h,!0):S!==void 0?i.addEventListener(o,h,{passive:S}):i.addEventListener(o,h,!1)}function _c(i,o,h,g,S){var I=g;if((o&1)===0&&(o&2)===0&&g!==null)e:for(;;){if(g===null)return;var B=g.tag;if(B===3||B===4){var Q=g.stateNode.containerInfo;if(Q===S||Q.nodeType===8&&Q.parentNode===S)break;if(B===4)for(B=g.return;B!==null;){var oe=B.tag;if((oe===3||oe===4)&&(oe=B.stateNode.containerInfo,oe===S||oe.nodeType===8&&oe.parentNode===S))return;B=B.return}for(;Q!==null;){if(B=pa(Q),B===null)return;if(oe=B.tag,oe===5||oe===6){g=I=B;continue e}Q=Q.parentNode}}g=g.return}wi(function(){var Re=I,We=Zt(h),Ye=[];e:{var Ve=gr.get(i);if(Ve!==void 0){var ft=ir,xt=i;switch(i){case"keypress":if(mo(h)===0)break e;case"keydown":case"keyup":ft=$s;break;case"focusin":xt="focus",ft=oa;break;case"focusout":xt="blur",ft=oa;break;case"beforeblur":case"afterblur":ft=oa;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=Wa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=sa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=Cl;break;case Vt:case Yt:case At:ft=$a;break;case Ft:ft=bs;break;case"scroll":ft=Ti;break;case"wheel":ft=wu;break;case"copy":case"cut":case"paste":ft=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=Xs}var bt=(o&4)!==0,cn=!bt&&i==="scroll",be=bt?Ve!==null?Ve+"Capture":null:Ve;bt=[];for(var he=Re,Ce;he!==null;){Ce=he;var nt=Ce.stateNode;if(Ce.tag===5&&nt!==null&&(Ce=nt,be!==null&&(nt=Ni(he,be),nt!=null&&bt.push(Ml(he,nt,Ce)))),cn)break;he=he.return}0<bt.length&&(Ve=new ft(Ve,xt,null,h,We),Ye.push({event:Ve,listeners:bt}))}}if((o&7)===0){e:{if(Ve=i==="mouseover"||i==="pointerover",ft=i==="mouseout"||i==="pointerout",Ve&&h!==Nt&&(xt=h.relatedTarget||h.fromElement)&&(pa(xt)||xt[Ur]))break e;if((ft||Ve)&&(Ve=We.window===We?We:(Ve=We.ownerDocument)?Ve.defaultView||Ve.parentWindow:window,ft?(xt=h.relatedTarget||h.toElement,ft=Re,xt=xt?pa(xt):null,xt!==null&&(cn=Xr(xt),xt!==cn||xt.tag!==5&&xt.tag!==6)&&(xt=null)):(ft=null,xt=Re),ft!==xt)){if(bt=Wa,nt="onMouseLeave",be="onMouseEnter",he="mouse",(i==="pointerout"||i==="pointerover")&&(bt=Xs,nt="onPointerLeave",be="onPointerEnter",he="pointer"),cn=ft==null?Ve:Za(ft),Ce=xt==null?Ve:Za(xt),Ve=new bt(nt,he+"leave",ft,h,We),Ve.target=cn,Ve.relatedTarget=Ce,nt=null,pa(We)===Re&&(bt=new bt(be,he+"enter",xt,h,We),bt.target=Ce,bt.relatedTarget=cn,nt=bt),cn=nt,ft&&xt)t:{for(bt=ft,be=xt,he=0,Ce=bt;Ce;Ce=Ol(Ce))he++;for(Ce=0,nt=be;nt;nt=Ol(nt))Ce++;for(;0<he-Ce;)bt=Ol(bt),he--;for(;0<Ce-he;)be=Ol(be),Ce--;for(;he--;){if(bt===be||be!==null&&bt===be.alternate)break t;bt=Ol(bt),be=Ol(be)}bt=null}else bt=null;ft!==null&&ch(Ye,Ve,ft,bt,!1),xt!==null&&cn!==null&&ch(Ye,cn,xt,bt,!0)}}e:{if(Ve=Re?Za(Re):window,ft=Ve.nodeName&&Ve.nodeName.toLowerCase(),ft==="select"||ft==="input"&&Ve.type==="file")var Et=Qi;else if(Ci(Ve))if(Br)Et=X;else{Et=N;var Mt=M}else(ft=Ve.nodeName)&&ft.toLowerCase()==="input"&&(Ve.type==="checkbox"||Ve.type==="radio")&&(Et=G);if(Et&&(Et=Et(i,Re))){Ya(Ye,Et,h,We);break e}Mt&&Mt(i,Ve,Re),i==="focusout"&&(Mt=Ve._wrapperState)&&Mt.controlled&&Ve.type==="number"&&Li(Ve,"number",Ve.value)}switch(Mt=Re?Za(Re):window,i){case"focusin":(Ci(Mt)||Mt.contentEditable==="true")&&(pe=Mt,De=Re,Ne=null);break;case"focusout":Ne=De=pe=null;break;case"mousedown":Je=!0;break;case"contextmenu":case"mouseup":case"dragend":Je=!1,rt(Ye,h,We);break;case"selectionchange":if(Ee)break;case"keydown":case"keyup":rt(Ye,h,We)}var Ot;if(qi)e:{switch(i){case"compositionstart":var Lt="onCompositionStart";break e;case"compositionend":Lt="onCompositionEnd";break e;case"compositionupdate":Lt="onCompositionUpdate";break e}Lt=void 0}else Ki?Rl(i,h)&&(Lt="onCompositionEnd"):i==="keydown"&&h.keyCode===229&&(Lt="onCompositionStart");Lt&&(ca&&h.locale!=="ko"&&(Ki||Lt!=="onCompositionStart"?Lt==="onCompositionEnd"&&Ki&&(Ot=zs()):(yn=We,ai="value"in yn?yn.value:yn.textContent,Ki=!0)),Mt=Tu(Re,Lt),0<Mt.length&&(Lt=new Ai(Lt,i,null,h,We),Ye.push({event:Lt,listeners:Mt}),Ot?Lt.data=Ot:(Ot=Ka(h),Ot!==null&&(Lt.data=Ot)))),(Ot=Il?Yi(i,h):Rr(i,h))&&(Re=Tu(Re,"onBeforeInput"),0<Re.length&&(We=new Ai("onBeforeInput","beforeinput",null,h,We),Ye.push({event:We,listeners:Re}),We.data=Ot))}gc(Ye,o)})}function Ml(i,o,h){return{instance:i,listener:o,currentTarget:h}}function Tu(i,o){for(var h=o+"Capture",g=[];i!==null;){var S=i,I=S.stateNode;S.tag===5&&I!==null&&(S=I,I=Ni(i,h),I!=null&&g.unshift(Ml(i,I,S)),I=Ni(i,o),I!=null&&g.push(Ml(i,I,S))),i=i.return}return g}function Ol(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function ch(i,o,h,g,S){for(var I=o._reactName,B=[];h!==null&&h!==g;){var Q=h,oe=Q.alternate,Re=Q.stateNode;if(oe!==null&&oe===g)break;Q.tag===5&&Re!==null&&(Q=Re,S?(oe=Ni(h,I),oe!=null&&B.unshift(Ml(h,oe,Q))):S||(oe=Ni(h,I),oe!=null&&B.push(Ml(h,oe,Q)))),h=h.return}B.length!==0&&i.push({event:o,listeners:B})}var tp=/\r\n?/g,rp=/\u0000|\uFFFD/g;function hh(i){return(typeof i=="string"?i:""+i).replace(tp,`
`).replace(rp,"")}function Au(i,o,h){if(o=hh(o),hh(i)!==o&&h)throw Error(t(425))}function Cu(){}var Dl=null,dh=null;function fh(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ph=typeof setTimeout=="function"?setTimeout:void 0,Ll=typeof clearTimeout=="function"?clearTimeout:void 0,xc=typeof Promise=="function"?Promise:void 0,mh=typeof queueMicrotask=="function"?queueMicrotask:typeof xc<"u"?function(i){return xc.resolve(null).then(i).catch(np)}:ph;function np(i){setTimeout(function(){throw i})}function wc(i,o){var h=o,g=0;do{var S=h.nextSibling;if(i.removeChild(h),S&&S.nodeType===8)if(h=S.data,h==="/$"){if(g===0){i.removeChild(S),Ei(o);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=S}while(h);Ei(o)}function vo(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function gh(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var h=i.data;if(h==="$"||h==="$!"||h==="$?"){if(o===0)return i;o--}else h==="/$"&&o++}i=i.previousSibling}return null}var Qa=Math.random().toString(36).slice(2),Es="__reactFiber$"+Qa,Iu="__reactProps$"+Qa,Ur="__reactContainer$"+Qa,On="__reactEvents$"+Qa,dd="__reactListeners$"+Qa,fd="__reactHandles$"+Qa;function pa(i){var o=i[Es];if(o)return o;for(var h=i.parentNode;h;){if(o=h[Ur]||h[Es]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(i=gh(i);i!==null;){if(h=i[Es])return h;i=gh(i)}return o}i=h,h=i.parentNode}return null}function Nl(i){return i=i[Es]||i[Ur],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Za(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Fl(i){return i[Iu]||null}var bc=[],ma=-1;function _o(i){return{current:i}}function xr(i){0>ma||(i.current=bc[ma],bc[ma]=null,ma--)}function ur(i,o){ma++,bc[ma]=i.current,i.current=o}var Ji={},an=_o(Ji),bn=_o(!1),xo=Ji;function ga(i,o){var h=i.type.contextTypes;if(!h)return Ji;var g=i.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===o)return g.__reactInternalMemoizedMaskedChildContext;var S={},I;for(I in h)S[I]=o[I];return g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=S),S}function $n(i){return i=i.childContextTypes,i!=null}function Bl(){xr(bn),xr(an)}function Pu(i,o,h){if(an.current!==Ji)throw Error(t(168));ur(an,o),ur(bn,h)}function yh(i,o,h){var g=i.stateNode;if(o=o.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var S in g)if(!(S in o))throw Error(t(108,je(i)||"Unknown",S));return j({},h,g)}function Ul(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ji,xo=an.current,ur(an,i),ur(bn,bn.current),!0}function vh(i,o,h){var g=i.stateNode;if(!g)throw Error(t(169));h?(i=yh(i,o,xo),g.__reactInternalMemoizedMergedChildContext=i,xr(bn),xr(an),ur(an,i)):xr(bn),ur(bn,h)}var es=null,ts=!1,rs=!1;function _h(i){es===null?es=[i]:es.push(i)}function pd(i){ts=!0,_h(i)}function ns(){if(!rs&&es!==null){rs=!0;var i=0,o=$t;try{var h=es;for($t=1;i<h.length;i++){var g=h[i];do g=g(!0);while(g!==null)}es=null,ts=!1}catch(S){throw es!==null&&(es=es.slice(i+1)),Ga(Bi,ns),S}finally{$t=o,rs=!1}}return null}var qr=[],Gl=0,Sc=null,Ja=0,yr=[],is=0,ht=null,ci=1,Ys="";function ya(i,o){qr[Gl++]=Ja,qr[Gl++]=Sc,Sc=i,Ja=o}function jl(i,o,h){yr[is++]=ci,yr[is++]=Ys,yr[is++]=ht,ht=i;var g=ci;i=Ys;var S=32-Rt(g)-1;g&=~(1<<S),h+=1;var I=32-Rt(o)+S;if(30<I){var B=S-S%5;I=(g&(1<<B)-1).toString(32),g>>=B,S-=B,ci=1<<32-Rt(o)+S|h<<S|g,Ys=I+i}else ci=1<<I|h<<S|g,Ys=i}function zl(i){i.return!==null&&(ya(i,1),jl(i,1,0))}function Ru(i){for(;i===Sc;)Sc=qr[--Gl],qr[Gl]=null,Ja=qr[--Gl],qr[Gl]=null;for(;i===ht;)ht=yr[--is],yr[is]=null,Ys=yr[--is],yr[is]=null,ci=yr[--is],yr[is]=null}var hi=null,di=null,Sr=!1,Ii=null;function Ec(i,o){var h=to(5,null,null,0);h.elementType="DELETED",h.stateNode=o,h.return=i,o=i.deletions,o===null?(i.deletions=[h],i.flags|=16):o.push(h)}function Dn(i,o){switch(i.tag){case 5:var h=i.type;return o=o.nodeType!==1||h.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,hi=i,di=vo(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,hi=i,di=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(h=ht!==null?{id:ci,overflow:Ys}:null,i.memoizedState={dehydrated:o,treeContext:h,retryLane:1073741824},h=to(18,null,null,0),h.stateNode=o,h.return=i,i.child=h,hi=i,di=null,!0):!1;default:return!1}}function ss(i){return(i.mode&1)!==0&&(i.flags&128)===0}function os(i){if(Sr){var o=di;if(o){var h=o;if(!Dn(i,o)){if(ss(i))throw Error(t(418));o=vo(h.nextSibling);var g=hi;o&&Dn(i,o)?Ec(g,h):(i.flags=i.flags&-4097|2,Sr=!1,hi=i)}}else{if(ss(i))throw Error(t(418));i.flags=i.flags&-4097|2,Sr=!1,hi=i}}}function Tc(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;hi=i}function ku(i){if(i!==hi)return!1;if(!Sr)return Tc(i),Sr=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!fh(i.type,i.memoizedProps)),o&&(o=di)){if(ss(i))throw as(),Error(t(418));for(;o;)Ec(i,o),o=vo(o.nextSibling)}if(Tc(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var h=i.data;if(h==="/$"){if(o===0){di=vo(i.nextSibling);break e}o--}else h!=="$"&&h!=="$!"&&h!=="$?"||o++}i=i.nextSibling}di=null}}else di=hi?vo(i.stateNode.nextSibling):null;return!0}function as(){for(var i=di;i;)i=vo(i.nextSibling)}function el(){di=hi=null,Sr=!1}function ls(i){Ii===null?Ii=[i]:Ii.push(i)}var ip=te.ReactCurrentBatchConfig;function Hl(i,o,h){if(i=h.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(t(309));var g=h.stateNode}if(!g)throw Error(t(147,i));var S=g,I=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===I?o.ref:(o=function(B){var Q=S.refs;B===null?delete Q[I]:Q[I]=B},o._stringRef=I,o)}if(typeof i!="string")throw Error(t(284));if(!h._owner)throw Error(t(290,i))}return i}function Mu(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function xh(i){var o=i._init;return o(i._payload)}function wh(i){function o(be,he){if(i){var Ce=be.deletions;Ce===null?(be.deletions=[he],be.flags|=16):Ce.push(he)}}function h(be,he){if(!i)return null;for(;he!==null;)o(be,he),he=he.sibling;return null}function g(be,he){for(be=new Map;he!==null;)he.key!==null?be.set(he.key,he):be.set(he.index,he),he=he.sibling;return be}function S(be,he){return be=Jl(be,he),be.index=0,be.sibling=null,be}function I(be,he,Ce){return be.index=Ce,i?(Ce=be.alternate,Ce!==null?(Ce=Ce.index,Ce<he?(be.flags|=2,he):Ce):(be.flags|=2,he)):(be.flags|=1048576,he)}function B(be){return i&&be.alternate===null&&(be.flags|=2),be}function Q(be,he,Ce,nt){return he===null||he.tag!==6?(he=Ip(Ce,be.mode,nt),he.return=be,he):(he=S(he,Ce),he.return=be,he)}function oe(be,he,Ce,nt){var Et=Ce.type;return Et===F?We(be,he,Ce.props.children,nt,Ce.key):he!==null&&(he.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===H&&xh(Et)===he.type)?(nt=S(he,Ce.props),nt.ref=Hl(be,he,Ce),nt.return=be,nt):(nt=Md(Ce.type,Ce.key,Ce.props,null,be.mode,nt),nt.ref=Hl(be,he,Ce),nt.return=be,nt)}function Re(be,he,Ce,nt){return he===null||he.tag!==4||he.stateNode.containerInfo!==Ce.containerInfo||he.stateNode.implementation!==Ce.implementation?(he=Pp(Ce,be.mode,nt),he.return=be,he):(he=S(he,Ce.children||[]),he.return=be,he)}function We(be,he,Ce,nt,Et){return he===null||he.tag!==7?(he=qu(Ce,be.mode,nt,Et),he.return=be,he):(he=S(he,Ce),he.return=be,he)}function Ye(be,he,Ce){if(typeof he=="string"&&he!==""||typeof he=="number")return he=Ip(""+he,be.mode,Ce),he.return=be,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case K:return Ce=Md(he.type,he.key,he.props,null,be.mode,Ce),Ce.ref=Hl(be,null,he),Ce.return=be,Ce;case de:return he=Pp(he,be.mode,Ce),he.return=be,he;case H:var nt=he._init;return Ye(be,nt(he._payload),Ce)}if(Nr(he)||Y(he))return he=qu(he,be.mode,Ce,null),he.return=be,he;Mu(be,he)}return null}function Ve(be,he,Ce,nt){var Et=he!==null?he.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Et!==null?null:Q(be,he,""+Ce,nt);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case K:return Ce.key===Et?oe(be,he,Ce,nt):null;case de:return Ce.key===Et?Re(be,he,Ce,nt):null;case H:return Et=Ce._init,Ve(be,he,Et(Ce._payload),nt)}if(Nr(Ce)||Y(Ce))return Et!==null?null:We(be,he,Ce,nt,null);Mu(be,Ce)}return null}function ft(be,he,Ce,nt,Et){if(typeof nt=="string"&&nt!==""||typeof nt=="number")return be=be.get(Ce)||null,Q(he,be,""+nt,Et);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case K:return be=be.get(nt.key===null?Ce:nt.key)||null,oe(he,be,nt,Et);case de:return be=be.get(nt.key===null?Ce:nt.key)||null,Re(he,be,nt,Et);case H:var Mt=nt._init;return ft(be,he,Ce,Mt(nt._payload),Et)}if(Nr(nt)||Y(nt))return be=be.get(Ce)||null,We(he,be,nt,Et,null);Mu(he,nt)}return null}function xt(be,he,Ce,nt){for(var Et=null,Mt=null,Ot=he,Lt=he=0,Fn=null;Ot!==null&&Lt<Ce.length;Lt++){Ot.index>Lt?(Fn=Ot,Ot=null):Fn=Ot.sibling;var cr=Ve(be,Ot,Ce[Lt],nt);if(cr===null){Ot===null&&(Ot=Fn);break}i&&Ot&&cr.alternate===null&&o(be,Ot),he=I(cr,he,Lt),Mt===null?Et=cr:Mt.sibling=cr,Mt=cr,Ot=Fn}if(Lt===Ce.length)return h(be,Ot),Sr&&ya(be,Lt),Et;if(Ot===null){for(;Lt<Ce.length;Lt++)Ot=Ye(be,Ce[Lt],nt),Ot!==null&&(he=I(Ot,he,Lt),Mt===null?Et=Ot:Mt.sibling=Ot,Mt=Ot);return Sr&&ya(be,Lt),Et}for(Ot=g(be,Ot);Lt<Ce.length;Lt++)Fn=ft(Ot,be,Lt,Ce[Lt],nt),Fn!==null&&(i&&Fn.alternate!==null&&Ot.delete(Fn.key===null?Lt:Fn.key),he=I(Fn,he,Lt),Mt===null?Et=Fn:Mt.sibling=Fn,Mt=Fn);return i&&Ot.forEach(function(eu){return o(be,eu)}),Sr&&ya(be,Lt),Et}function bt(be,he,Ce,nt){var Et=Y(Ce);if(typeof Et!="function")throw Error(t(150));if(Ce=Et.call(Ce),Ce==null)throw Error(t(151));for(var Mt=Et=null,Ot=he,Lt=he=0,Fn=null,cr=Ce.next();Ot!==null&&!cr.done;Lt++,cr=Ce.next()){Ot.index>Lt?(Fn=Ot,Ot=null):Fn=Ot.sibling;var eu=Ve(be,Ot,cr.value,nt);if(eu===null){Ot===null&&(Ot=Fn);break}i&&Ot&&eu.alternate===null&&o(be,Ot),he=I(eu,he,Lt),Mt===null?Et=eu:Mt.sibling=eu,Mt=eu,Ot=Fn}if(cr.done)return h(be,Ot),Sr&&ya(be,Lt),Et;if(Ot===null){for(;!cr.done;Lt++,cr=Ce.next())cr=Ye(be,cr.value,nt),cr!==null&&(he=I(cr,he,Lt),Mt===null?Et=cr:Mt.sibling=cr,Mt=cr);return Sr&&ya(be,Lt),Et}for(Ot=g(be,Ot);!cr.done;Lt++,cr=Ce.next())cr=ft(Ot,be,Lt,cr.value,nt),cr!==null&&(i&&cr.alternate!==null&&Ot.delete(cr.key===null?Lt:cr.key),he=I(cr,he,Lt),Mt===null?Et=cr:Mt.sibling=cr,Mt=cr);return i&&Ot.forEach(function(s1){return o(be,s1)}),Sr&&ya(be,Lt),Et}function cn(be,he,Ce,nt){if(typeof Ce=="object"&&Ce!==null&&Ce.type===F&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case K:e:{for(var Et=Ce.key,Mt=he;Mt!==null;){if(Mt.key===Et){if(Et=Ce.type,Et===F){if(Mt.tag===7){h(be,Mt.sibling),he=S(Mt,Ce.props.children),he.return=be,be=he;break e}}else if(Mt.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===H&&xh(Et)===Mt.type){h(be,Mt.sibling),he=S(Mt,Ce.props),he.ref=Hl(be,Mt,Ce),he.return=be,be=he;break e}h(be,Mt);break}else o(be,Mt);Mt=Mt.sibling}Ce.type===F?(he=qu(Ce.props.children,be.mode,nt,Ce.key),he.return=be,be=he):(nt=Md(Ce.type,Ce.key,Ce.props,null,be.mode,nt),nt.ref=Hl(be,he,Ce),nt.return=be,be=nt)}return B(be);case de:e:{for(Mt=Ce.key;he!==null;){if(he.key===Mt)if(he.tag===4&&he.stateNode.containerInfo===Ce.containerInfo&&he.stateNode.implementation===Ce.implementation){h(be,he.sibling),he=S(he,Ce.children||[]),he.return=be,be=he;break e}else{h(be,he);break}else o(be,he);he=he.sibling}he=Pp(Ce,be.mode,nt),he.return=be,be=he}return B(be);case H:return Mt=Ce._init,cn(be,he,Mt(Ce._payload),nt)}if(Nr(Ce))return xt(be,he,Ce,nt);if(Y(Ce))return bt(be,he,Ce,nt);Mu(be,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"?(Ce=""+Ce,he!==null&&he.tag===6?(h(be,he.sibling),he=S(he,Ce),he.return=be,be=he):(h(be,he),he=Ip(Ce,be.mode,nt),he.return=be,be=he),B(be)):h(be,he)}return cn}var wo=wh(!0),Ou=wh(!1),tl=_o(null),rl=null,bo=null,nl=null;function Du(){nl=bo=rl=null}function Lu(i){var o=tl.current;xr(tl),i._currentValue=o}function Nu(i,o,h){for(;i!==null;){var g=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,g!==null&&(g.childLanes|=o)):g!==null&&(g.childLanes&o)!==o&&(g.childLanes|=o),i===h)break;i=i.return}}function il(i,o){rl=i,nl=bo=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(me=!0),i.firstContext=null)}function fi(i){var o=i._currentValue;if(nl!==i)if(i={context:i,memoizedValue:o,next:null},bo===null){if(rl===null)throw Error(t(308));bo=i,rl.dependencies={lanes:0,firstContext:i}}else bo=bo.next=i;return o}var sl=null;function Vl(i){sl===null?sl=[i]:sl.push(i)}function Ac(i,o,h,g){var S=o.interleaved;return S===null?(h.next=h,Vl(o)):(h.next=S.next,S.next=h),o.interleaved=h,pr(i,g)}function pr(i,o){i.lanes|=o;var h=i.alternate;for(h!==null&&(h.lanes|=o),h=i,i=i.return;i!==null;)i.childLanes|=o,h=i.alternate,h!==null&&(h.childLanes|=o),h=i,i=i.return;return h.tag===3?h.stateNode:null}var Gt=!1;function Kr(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hr(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Er(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Yr(i,o,h){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,(ar&2)!==0){var S=g.pending;return S===null?o.next=o:(o.next=S.next,S.next=o),g.pending=o,pr(i,h)}return S=g.interleaved,S===null?(o.next=o,Vl(g)):(o.next=S.next,S.next=o),g.interleaved=o,pr(i,h)}function So(i,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194240)!==0)){var g=o.lanes;g&=i.pendingLanes,h|=g,o.lanes=h,Qo(i,h)}}function Qr(i,o){var h=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var S=null,I=null;if(h=h.firstBaseUpdate,h!==null){do{var B={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};I===null?S=I=B:I=I.next=B,h=h.next}while(h!==null);I===null?S=I=o:I=I.next=o}else S=I=o;h={baseState:g.baseState,firstBaseUpdate:S,lastBaseUpdate:I,shared:g.shared,effects:g.effects},i.updateQueue=h;return}i=h.lastBaseUpdate,i===null?h.firstBaseUpdate=o:i.next=o,h.lastBaseUpdate=o}function va(i,o,h,g){var S=i.updateQueue;Gt=!1;var I=S.firstBaseUpdate,B=S.lastBaseUpdate,Q=S.shared.pending;if(Q!==null){S.shared.pending=null;var oe=Q,Re=oe.next;oe.next=null,B===null?I=Re:B.next=Re,B=oe;var We=i.alternate;We!==null&&(We=We.updateQueue,Q=We.lastBaseUpdate,Q!==B&&(Q===null?We.firstBaseUpdate=Re:Q.next=Re,We.lastBaseUpdate=oe))}if(I!==null){var Ye=S.baseState;B=0,We=Re=oe=null,Q=I;do{var Ve=Q.lane,ft=Q.eventTime;if((g&Ve)===Ve){We!==null&&(We=We.next={eventTime:ft,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var xt=i,bt=Q;switch(Ve=o,ft=h,bt.tag){case 1:if(xt=bt.payload,typeof xt=="function"){Ye=xt.call(ft,Ye,Ve);break e}Ye=xt;break e;case 3:xt.flags=xt.flags&-65537|128;case 0:if(xt=bt.payload,Ve=typeof xt=="function"?xt.call(ft,Ye,Ve):xt,Ve==null)break e;Ye=j({},Ye,Ve);break e;case 2:Gt=!0}}Q.callback!==null&&Q.lane!==0&&(i.flags|=64,Ve=S.effects,Ve===null?S.effects=[Q]:Ve.push(Q))}else ft={eventTime:ft,lane:Ve,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},We===null?(Re=We=ft,oe=Ye):We=We.next=ft,B|=Ve;if(Q=Q.next,Q===null){if(Q=S.shared.pending,Q===null)break;Ve=Q,Q=Ve.next,Ve.next=null,S.lastBaseUpdate=Ve,S.shared.pending=null}}while(!0);if(We===null&&(oe=Ye),S.baseState=oe,S.firstBaseUpdate=Re,S.lastBaseUpdate=We,o=S.shared.interleaved,o!==null){S=o;do B|=S.lane,S=S.next;while(S!==o)}else I===null&&(S.shared.lanes=0);Vu|=B,i.lanes=B,i.memoizedState=Ye}}function _a(i,o,h){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var g=i[o],S=g.callback;if(S!==null){if(g.callback=null,g=h,typeof S!="function")throw Error(t(191,S));S.call(g)}}}var xa={},us=_o(xa),Eo=_o(xa),Sn=_o(xa);function To(i){if(i===xa)throw Error(t(174));return i}function Fu(i,o){switch(ur(Sn,o),ur(Eo,i),ur(us,xa),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Zn(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Zn(o,i)}xr(us),ur(us,o)}function Pi(){xr(us),xr(Eo),xr(Sn)}function ol(i){To(Sn.current);var o=To(us.current),h=Zn(o,i.type);o!==h&&(ur(Eo,i),ur(us,h))}function Cc(i){Eo.current===i&&(xr(us),xr(Eo))}var wr=_o(0);function Wl(i){for(var o=i;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Qs=[];function $l(){for(var i=0;i<Qs.length;i++)Qs[i]._workInProgressVersionPrimary=null;Qs.length=0}var Ts=te.ReactCurrentDispatcher,Xl=te.ReactCurrentBatchConfig,As=0,Tr=null,Gr=null,Vr=null,ln=!1,cs=!1,Ln=0,pi=0;function En(){throw Error(t(321))}function Bu(i,o){if(o===null)return!1;for(var h=0;h<o.length&&h<i.length;h++)if(!fe(i[h],o[h]))return!1;return!0}function Uu(i,o,h,g,S,I){if(As=I,Tr=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ts.current=i===null||i.memoizedState===null?Oc:op,i=h(g,S),cs){I=0;do{if(cs=!1,Ln=0,25<=I)throw Error(t(301));I+=1,Vr=Gr=null,o.updateQueue=null,Ts.current=ap,i=h(g,S)}while(cs)}if(Ts.current=Hu,o=Gr!==null&&Gr.next!==null,As=0,Vr=Gr=Tr=null,ln=!1,o)throw Error(t(300));return i}function Zs(){var i=Ln!==0;return Ln=0,i}function Cs(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vr===null?Tr.memoizedState=Vr=i:Vr=Vr.next=i,Vr}function Ri(){if(Gr===null){var i=Tr.alternate;i=i!==null?i.memoizedState:null}else i=Gr.next;var o=Vr===null?Tr.memoizedState:Vr.next;if(o!==null)Vr=o,Gr=i;else{if(i===null)throw Error(t(310));Gr=i,i={memoizedState:Gr.memoizedState,baseState:Gr.baseState,baseQueue:Gr.baseQueue,queue:Gr.queue,next:null},Vr===null?Tr.memoizedState=Vr=i:Vr=Vr.next=i}return Vr}function al(i,o){return typeof o=="function"?o(i):o}function Ao(i){var o=Ri(),h=o.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=i;var g=Gr,S=g.baseQueue,I=h.pending;if(I!==null){if(S!==null){var B=S.next;S.next=I.next,I.next=B}g.baseQueue=S=I,h.pending=null}if(S!==null){I=S.next,g=g.baseState;var Q=B=null,oe=null,Re=I;do{var We=Re.lane;if((As&We)===We)oe!==null&&(oe=oe.next={lane:0,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),g=Re.hasEagerState?Re.eagerState:i(g,Re.action);else{var Ye={lane:We,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null};oe===null?(Q=oe=Ye,B=g):oe=oe.next=Ye,Tr.lanes|=We,Vu|=We}Re=Re.next}while(Re!==null&&Re!==I);oe===null?B=g:oe.next=Q,fe(g,o.memoizedState)||(me=!0),o.memoizedState=g,o.baseState=B,o.baseQueue=oe,h.lastRenderedState=g}if(i=h.interleaved,i!==null){S=i;do I=S.lane,Tr.lanes|=I,Vu|=I,S=S.next;while(S!==i)}else S===null&&(h.lanes=0);return[o.memoizedState,h.dispatch]}function Ic(i){var o=Ri(),h=o.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=i;var g=h.dispatch,S=h.pending,I=o.memoizedState;if(S!==null){h.pending=null;var B=S=S.next;do I=i(I,B.action),B=B.next;while(B!==S);fe(I,o.memoizedState)||(me=!0),o.memoizedState=I,o.baseQueue===null&&(o.baseState=I),h.lastRenderedState=I}return[I,g]}function bh(){}function Pc(i,o){var h=Tr,g=Ri(),S=o(),I=!fe(g.memoizedState,S);if(I&&(g.memoizedState=S,me=!0),g=g.queue,Ch(gd.bind(null,h,g,i),[i]),g.getSnapshot!==o||I||Vr!==null&&Vr.memoizedState.tag&1){if(h.flags|=2048,Is(9,md.bind(null,h,g,S,o),void 0,null),Nn===null)throw Error(t(349));(As&30)!==0||Gu(h,o,S)}return S}function Gu(i,o,h){i.flags|=16384,i={getSnapshot:o,value:h},o=Tr.updateQueue,o===null?(o={lastEffect:null,stores:null},Tr.updateQueue=o,o.stores=[i]):(h=o.stores,h===null?o.stores=[i]:h.push(i))}function md(i,o,h,g){o.value=h,o.getSnapshot=g,Sh(o)&&Eh(i)}function gd(i,o,h){return h(function(){Sh(o)&&Eh(i)})}function Sh(i){var o=i.getSnapshot;i=i.value;try{var h=o();return!fe(i,h)}catch{return!0}}function Eh(i){var o=pr(i,1);o!==null&&Ro(o,i,1,-1)}function ll(i){var o=Cs();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:i},o.queue=i,i=i.dispatch=sp.bind(null,Tr,i),[o.memoizedState,i]}function Is(i,o,h,g){return i={tag:i,create:o,destroy:h,deps:g,next:null},o=Tr.updateQueue,o===null?(o={lastEffect:null,stores:null},Tr.updateQueue=o,o.lastEffect=i.next=i):(h=o.lastEffect,h===null?o.lastEffect=i.next=i:(g=h.next,h.next=i,i.next=g,o.lastEffect=i)),i}function Th(){return Ri().memoizedState}function vr(i,o,h,g){var S=Cs();Tr.flags|=i,S.memoizedState=Is(1|o,h,void 0,g===void 0?null:g)}function Rc(i,o,h,g){var S=Ri();g=g===void 0?null:g;var I=void 0;if(Gr!==null){var B=Gr.memoizedState;if(I=B.destroy,g!==null&&Bu(g,B.deps)){S.memoizedState=Is(o,h,I,g);return}}Tr.flags|=i,S.memoizedState=Is(1|o,h,I,g)}function Ah(i,o){return vr(8390656,8,i,o)}function Ch(i,o){return Rc(2048,8,i,o)}function yd(i,o){return Rc(4,2,i,o)}function Ih(i,o){return Rc(4,4,i,o)}function vd(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function ki(i,o,h){return h=h!=null?h.concat([i]):null,Rc(4,4,vd.bind(null,o,i),h)}function ju(){}function Co(i,o){var h=Ri();o=o===void 0?null:o;var g=h.memoizedState;return g!==null&&o!==null&&Bu(o,g[1])?g[0]:(h.memoizedState=[i,o],i)}function zu(i,o){var h=Ri();o=o===void 0?null:o;var g=h.memoizedState;return g!==null&&o!==null&&Bu(o,g[1])?g[0]:(i=i(),h.memoizedState=[i,o],i)}function wa(i,o,h){return(As&21)===0?(i.baseState&&(i.baseState=!1,me=!0),i.memoizedState=h):(fe(h,o)||(h=rn(),Tr.lanes|=h,Vu|=h,i.baseState=!0),o)}function kc(i,o){var h=$t;$t=h!==0&&4>h?h:4,i(!0);var g=Xl.transition;Xl.transition={};try{i(!1),o()}finally{$t=h,Xl.transition=g}}function Mc(){return Ri().memoizedState}function Ph(i,o,h){var g=Ql(i);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},Rh(i))kh(o,h);else if(h=Ac(i,o,h,g),h!==null){var S=Mi();Ro(h,i,g,S),Mh(h,o,g)}}function sp(i,o,h){var g=Ql(i),S={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(Rh(i))kh(o,S);else{var I=i.alternate;if(i.lanes===0&&(I===null||I.lanes===0)&&(I=o.lastRenderedReducer,I!==null))try{var B=o.lastRenderedState,Q=I(B,h);if(S.hasEagerState=!0,S.eagerState=Q,fe(Q,B)){var oe=o.interleaved;oe===null?(S.next=S,Vl(o)):(S.next=oe.next,oe.next=S),o.interleaved=S;return}}catch{}h=Ac(i,o,S,g),h!==null&&(S=Mi(),Ro(h,i,g,S),Mh(h,o,g))}}function Rh(i){var o=i.alternate;return i===Tr||o!==null&&o===Tr}function kh(i,o){cs=ln=!0;var h=i.pending;h===null?o.next=o:(o.next=h.next,h.next=o),i.pending=o}function Mh(i,o,h){if((h&4194240)!==0){var g=o.lanes;g&=i.pendingLanes,h|=g,o.lanes=h,Qo(i,h)}}var Hu={readContext:fi,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},Oc={readContext:fi,useCallback:function(i,o){return Cs().memoizedState=[i,o===void 0?null:o],i},useContext:fi,useEffect:Ah,useImperativeHandle:function(i,o,h){return h=h!=null?h.concat([i]):null,vr(4194308,4,vd.bind(null,o,i),h)},useLayoutEffect:function(i,o){return vr(4194308,4,i,o)},useInsertionEffect:function(i,o){return vr(4,2,i,o)},useMemo:function(i,o){var h=Cs();return o=o===void 0?null:o,i=i(),h.memoizedState=[i,o],i},useReducer:function(i,o,h){var g=Cs();return o=h!==void 0?h(o):o,g.memoizedState=g.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},g.queue=i,i=i.dispatch=Ph.bind(null,Tr,i),[g.memoizedState,i]},useRef:function(i){var o=Cs();return i={current:i},o.memoizedState=i},useState:ll,useDebugValue:ju,useDeferredValue:function(i){return Cs().memoizedState=i},useTransition:function(){var i=ll(!1),o=i[0];return i=kc.bind(null,i[1]),Cs().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,h){var g=Tr,S=Cs();if(Sr){if(h===void 0)throw Error(t(407));h=h()}else{if(h=o(),Nn===null)throw Error(t(349));(As&30)!==0||Gu(g,o,h)}S.memoizedState=h;var I={value:h,getSnapshot:o};return S.queue=I,Ah(gd.bind(null,g,I,i),[i]),g.flags|=2048,Is(9,md.bind(null,g,I,h,o),void 0,null),h},useId:function(){var i=Cs(),o=Nn.identifierPrefix;if(Sr){var h=Ys,g=ci;h=(g&~(1<<32-Rt(g)-1)).toString(32)+h,o=":"+o+"R"+h,h=Ln++,0<h&&(o+="H"+h.toString(32)),o+=":"}else h=pi++,o=":"+o+"r"+h.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},op={readContext:fi,useCallback:Co,useContext:fi,useEffect:Ch,useImperativeHandle:ki,useInsertionEffect:yd,useLayoutEffect:Ih,useMemo:zu,useReducer:Ao,useRef:Th,useState:function(){return Ao(al)},useDebugValue:ju,useDeferredValue:function(i){var o=Ri();return wa(o,Gr.memoizedState,i)},useTransition:function(){var i=Ao(al)[0],o=Ri().memoizedState;return[i,o]},useMutableSource:bh,useSyncExternalStore:Pc,useId:Mc,unstable_isNewReconciler:!1},ap={readContext:fi,useCallback:Co,useContext:fi,useEffect:Ch,useImperativeHandle:ki,useInsertionEffect:yd,useLayoutEffect:Ih,useMemo:zu,useReducer:Ic,useRef:Th,useState:function(){return Ic(al)},useDebugValue:ju,useDeferredValue:function(i){var o=Ri();return Gr===null?o.memoizedState=i:wa(o,Gr.memoizedState,i)},useTransition:function(){var i=Ic(al)[0],o=Ri().memoizedState;return[i,o]},useMutableSource:bh,useSyncExternalStore:Pc,useId:Mc,unstable_isNewReconciler:!1};function l(i,o){if(i&&i.defaultProps){o=j({},o),i=i.defaultProps;for(var h in i)o[h]===void 0&&(o[h]=i[h]);return o}return o}function u(i,o,h,g){o=i.memoizedState,h=h(g,o),h=h==null?o:j({},o,h),i.memoizedState=h,i.lanes===0&&(i.updateQueue.baseState=h)}var y={isMounted:function(i){return(i=i._reactInternals)?Xr(i)===i:!1},enqueueSetState:function(i,o,h){i=i._reactInternals;var g=Mi(),S=Ql(i),I=Er(g,S);I.payload=o,h!=null&&(I.callback=h),o=Yr(i,I,S),o!==null&&(Ro(o,i,S,g),So(o,i,S))},enqueueReplaceState:function(i,o,h){i=i._reactInternals;var g=Mi(),S=Ql(i),I=Er(g,S);I.tag=1,I.payload=o,h!=null&&(I.callback=h),o=Yr(i,I,S),o!==null&&(Ro(o,i,S,g),So(o,i,S))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var h=Mi(),g=Ql(i),S=Er(h,g);S.tag=2,o!=null&&(S.callback=o),o=Yr(i,S,g),o!==null&&(Ro(o,i,g,h),So(o,i,g))}};function E(i,o,h,g,S,I,B){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,I,B):o.prototype&&o.prototype.isPureReactComponent?!se(h,g)||!se(S,I):!0}function C(i,o,h){var g=!1,S=Ji,I=o.contextType;return typeof I=="object"&&I!==null?I=fi(I):(S=$n(o)?xo:an.current,g=o.contextTypes,I=(g=g!=null)?ga(i,S):Ji),o=new o(h,I),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=y,i.stateNode=o,o._reactInternals=i,g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=S,i.__reactInternalMemoizedMaskedChildContext=I),o}function O(i,o,h,g){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,g),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,g),o.state!==i&&y.enqueueReplaceState(o,o.state,null)}function $(i,o,h,g){var S=i.stateNode;S.props=h,S.state=i.memoizedState,S.refs={},Kr(i);var I=o.contextType;typeof I=="object"&&I!==null?S.context=fi(I):(I=$n(o)?xo:an.current,S.context=ga(i,I)),S.state=i.memoizedState,I=o.getDerivedStateFromProps,typeof I=="function"&&(u(i,o,I,h),S.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(o=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),o!==S.state&&y.enqueueReplaceState(S,S.state,null),va(i,h,S,g),S.state=i.memoizedState),typeof S.componentDidMount=="function"&&(i.flags|=4194308)}function ue(i,o){try{var h="",g=o;do h+=Me(g),g=g.return;while(g);var S=h}catch(I){S=`
Error generating stack: `+I.message+`
`+I.stack}return{value:i,source:o,stack:S,digest:null}}function Te(i,o,h){return{value:i,source:null,stack:h??null,digest:o??null}}function Le(i,o){try{console.error(o.value)}catch(h){setTimeout(function(){throw h})}}var Ue=typeof WeakMap=="function"?WeakMap:Map;function at(i,o,h){h=Er(-1,h),h.tag=3,h.payload={element:null};var g=o.value;return h.callback=function(){Ad||(Ad=!0,xp=g),Le(i,o)},h}function Be(i,o,h){h=Er(-1,h),h.tag=3;var g=i.type.getDerivedStateFromError;if(typeof g=="function"){var S=o.value;h.payload=function(){return g(S)},h.callback=function(){Le(i,o)}}var I=i.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(h.callback=function(){Le(i,o),typeof g!="function"&&(Kl===null?Kl=new Set([this]):Kl.add(this));var B=o.stack;this.componentDidCatch(o.value,{componentStack:B!==null?B:""})}),h}function Ze(i,o,h){var g=i.pingCache;if(g===null){g=i.pingCache=new Ue;var S=new Set;g.set(o,S)}else S=g.get(o),S===void 0&&(S=new Set,g.set(o,S));S.has(h)||(S.add(h),i=qw.bind(null,i,o,h),o.then(i,i))}function _t(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Ht(i,o,h,g,S){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(o=Er(-1,1),o.tag=2,Yr(h,o,1))),h.lanes|=1),i):(i.flags|=65536,i.lanes=S,i)}var Ge=te.ReactCurrentOwner,me=!1;function ke(i,o,h,g){o.child=i===null?Ou(o,null,h,g):wo(o,i.child,h,g)}function $e(i,o,h,g,S){h=h.render;var I=o.ref;return il(o,S),g=Uu(i,o,h,g,I,S),h=Zs(),i!==null&&!me?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~S,ul(i,o,S)):(Sr&&h&&zl(o),o.flags|=1,ke(i,o,g,S),o.child)}function Ct(i,o,h,g,S){if(i===null){var I=h.type;return typeof I=="function"&&!Cp(I)&&I.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(o.tag=15,o.type=I,sr(i,o,I,g,S)):(i=Md(h.type,null,g,o,o.mode,S),i.ref=o.ref,i.return=o,o.child=i)}if(I=i.child,(i.lanes&S)===0){var B=I.memoizedProps;if(h=h.compare,h=h!==null?h:se,h(B,g)&&i.ref===o.ref)return ul(i,o,S)}return o.flags|=1,i=Jl(I,g),i.ref=o.ref,i.return=o,o.child=i}function sr(i,o,h,g,S){if(i!==null){var I=i.memoizedProps;if(se(I,g)&&i.ref===o.ref)if(me=!1,o.pendingProps=g=I,(i.lanes&S)!==0)(i.flags&131072)!==0&&(me=!0);else return o.lanes=i.lanes,ul(i,o,S)}return un(i,o,h,g,S)}function wt(i,o,h){var g=o.pendingProps,S=g.children,I=i!==null?i.memoizedState:null;if(g.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},ur(Lc,Ps),Ps|=h;else{if((h&1073741824)===0)return i=I!==null?I.baseLanes|h:h,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,ur(Lc,Ps),Ps|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=I!==null?I.baseLanes:h,ur(Lc,Ps),Ps|=g}else I!==null?(g=I.baseLanes|h,o.memoizedState=null):g=h,ur(Lc,Ps),Ps|=g;return ke(i,o,S,h),o.child}function tr(i,o){var h=o.ref;(i===null&&h!==null||i!==null&&i.ref!==h)&&(o.flags|=512,o.flags|=2097152)}function un(i,o,h,g,S){var I=$n(h)?xo:an.current;return I=ga(o,I),il(o,S),h=Uu(i,o,h,g,I,S),g=Zs(),i!==null&&!me?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~S,ul(i,o,S)):(Sr&&g&&zl(o),o.flags|=1,ke(i,o,h,S),o.child)}function or(i,o,h,g,S){if($n(h)){var I=!0;Ul(o)}else I=!1;if(il(o,S),o.stateNode===null)wd(i,o),C(o,h,g),$(o,h,g,S),g=!0;else if(i===null){var B=o.stateNode,Q=o.memoizedProps;B.props=Q;var oe=B.context,Re=h.contextType;typeof Re=="object"&&Re!==null?Re=fi(Re):(Re=$n(h)?xo:an.current,Re=ga(o,Re));var We=h.getDerivedStateFromProps,Ye=typeof We=="function"||typeof B.getSnapshotBeforeUpdate=="function";Ye||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(Q!==g||oe!==Re)&&O(o,B,g,Re),Gt=!1;var Ve=o.memoizedState;B.state=Ve,va(o,g,B,S),oe=o.memoizedState,Q!==g||Ve!==oe||bn.current||Gt?(typeof We=="function"&&(u(o,h,We,g),oe=o.memoizedState),(Q=Gt||E(o,h,Q,g,Ve,oe,Re))?(Ye||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(o.flags|=4194308)):(typeof B.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=g,o.memoizedState=oe),B.props=g,B.state=oe,B.context=Re,g=Q):(typeof B.componentDidMount=="function"&&(o.flags|=4194308),g=!1)}else{B=o.stateNode,Hr(i,o),Q=o.memoizedProps,Re=o.type===o.elementType?Q:l(o.type,Q),B.props=Re,Ye=o.pendingProps,Ve=B.context,oe=h.contextType,typeof oe=="object"&&oe!==null?oe=fi(oe):(oe=$n(h)?xo:an.current,oe=ga(o,oe));var ft=h.getDerivedStateFromProps;(We=typeof ft=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(Q!==Ye||Ve!==oe)&&O(o,B,g,oe),Gt=!1,Ve=o.memoizedState,B.state=Ve,va(o,g,B,S);var xt=o.memoizedState;Q!==Ye||Ve!==xt||bn.current||Gt?(typeof ft=="function"&&(u(o,h,ft,g),xt=o.memoizedState),(Re=Gt||E(o,h,Re,g,Ve,xt,oe)||!1)?(We||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(g,xt,oe),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(g,xt,oe)),typeof B.componentDidUpdate=="function"&&(o.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof B.componentDidUpdate!="function"||Q===i.memoizedProps&&Ve===i.memoizedState||(o.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||Q===i.memoizedProps&&Ve===i.memoizedState||(o.flags|=1024),o.memoizedProps=g,o.memoizedState=xt),B.props=g,B.state=xt,B.context=oe,g=Re):(typeof B.componentDidUpdate!="function"||Q===i.memoizedProps&&Ve===i.memoizedState||(o.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||Q===i.memoizedProps&&Ve===i.memoizedState||(o.flags|=1024),g=!1)}return Js(i,o,h,g,I,S)}function Js(i,o,h,g,S,I){tr(i,o);var B=(o.flags&128)!==0;if(!g&&!B)return S&&vh(o,h,!1),ul(i,o,I);g=o.stateNode,Ge.current=o;var Q=B&&typeof h.getDerivedStateFromError!="function"?null:g.render();return o.flags|=1,i!==null&&B?(o.child=wo(o,i.child,null,I),o.child=wo(o,null,Q,I)):ke(i,o,Q,I),o.memoizedState=g.state,S&&vh(o,h,!0),o.child}function _d(i){var o=i.stateNode;o.pendingContext?Pu(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Pu(i,o.context,!1),Fu(i,o.containerInfo)}function Ey(i,o,h,g,S){return el(),ls(S),o.flags|=256,ke(i,o,h,g),o.child}var lp={dehydrated:null,treeContext:null,retryLane:0};function up(i){return{baseLanes:i,cachePool:null,transitions:null}}function Ty(i,o,h){var g=o.pendingProps,S=wr.current,I=!1,B=(o.flags&128)!==0,Q;if((Q=B)||(Q=i!==null&&i.memoizedState===null?!1:(S&2)!==0),Q?(I=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(S|=1),ur(wr,S&1),i===null)return os(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(B=g.children,i=g.fallback,I?(g=o.mode,I=o.child,B={mode:"hidden",children:B},(g&1)===0&&I!==null?(I.childLanes=0,I.pendingProps=B):I=Od(B,g,0,null),i=qu(i,g,h,null),I.return=o,i.return=o,I.sibling=i,o.child=I,o.child.memoizedState=up(h),o.memoizedState=lp,i):cp(o,B));if(S=i.memoizedState,S!==null&&(Q=S.dehydrated,Q!==null))return Nw(i,o,B,g,Q,S,h);if(I){I=g.fallback,B=o.mode,S=i.child,Q=S.sibling;var oe={mode:"hidden",children:g.children};return(B&1)===0&&o.child!==S?(g=o.child,g.childLanes=0,g.pendingProps=oe,o.deletions=null):(g=Jl(S,oe),g.subtreeFlags=S.subtreeFlags&14680064),Q!==null?I=Jl(Q,I):(I=qu(I,B,h,null),I.flags|=2),I.return=o,g.return=o,g.sibling=I,o.child=g,g=I,I=o.child,B=i.child.memoizedState,B=B===null?up(h):{baseLanes:B.baseLanes|h,cachePool:null,transitions:B.transitions},I.memoizedState=B,I.childLanes=i.childLanes&~h,o.memoizedState=lp,g}return I=i.child,i=I.sibling,g=Jl(I,{mode:"visible",children:g.children}),(o.mode&1)===0&&(g.lanes=h),g.return=o,g.sibling=null,i!==null&&(h=o.deletions,h===null?(o.deletions=[i],o.flags|=16):h.push(i)),o.child=g,o.memoizedState=null,g}function cp(i,o){return o=Od({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function xd(i,o,h,g){return g!==null&&ls(g),wo(o,i.child,null,h),i=cp(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Nw(i,o,h,g,S,I,B){if(h)return o.flags&256?(o.flags&=-257,g=Te(Error(t(422))),xd(i,o,B,g)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(I=g.fallback,S=o.mode,g=Od({mode:"visible",children:g.children},S,0,null),I=qu(I,S,B,null),I.flags|=2,g.return=o,I.return=o,g.sibling=I,o.child=g,(o.mode&1)!==0&&wo(o,i.child,null,B),o.child.memoizedState=up(B),o.memoizedState=lp,I);if((o.mode&1)===0)return xd(i,o,B,null);if(S.data==="$!"){if(g=S.nextSibling&&S.nextSibling.dataset,g)var Q=g.dgst;return g=Q,I=Error(t(419)),g=Te(I,g,void 0),xd(i,o,B,g)}if(Q=(B&i.childLanes)!==0,me||Q){if(g=Nn,g!==null){switch(B&-B){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(g.suspendedLanes|B))!==0?0:S,S!==0&&S!==I.retryLane&&(I.retryLane=S,pr(i,S),Ro(g,i,S,-1))}return Ap(),g=Te(Error(t(421))),xd(i,o,B,g)}return S.data==="$?"?(o.flags|=128,o.child=i.child,o=Kw.bind(null,i),S._reactRetry=o,null):(i=I.treeContext,di=vo(S.nextSibling),hi=o,Sr=!0,Ii=null,i!==null&&(yr[is++]=ci,yr[is++]=Ys,yr[is++]=ht,ci=i.id,Ys=i.overflow,ht=o),o=cp(o,g.children),o.flags|=4096,o)}function Ay(i,o,h){i.lanes|=o;var g=i.alternate;g!==null&&(g.lanes|=o),Nu(i.return,o,h)}function hp(i,o,h,g,S){var I=i.memoizedState;I===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:S}:(I.isBackwards=o,I.rendering=null,I.renderingStartTime=0,I.last=g,I.tail=h,I.tailMode=S)}function Cy(i,o,h){var g=o.pendingProps,S=g.revealOrder,I=g.tail;if(ke(i,o,g.children,h),g=wr.current,(g&2)!==0)g=g&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ay(i,h,o);else if(i.tag===19)Ay(i,h,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}g&=1}if(ur(wr,g),(o.mode&1)===0)o.memoizedState=null;else switch(S){case"forwards":for(h=o.child,S=null;h!==null;)i=h.alternate,i!==null&&Wl(i)===null&&(S=h),h=h.sibling;h=S,h===null?(S=o.child,o.child=null):(S=h.sibling,h.sibling=null),hp(o,!1,S,h,I);break;case"backwards":for(h=null,S=o.child,o.child=null;S!==null;){if(i=S.alternate,i!==null&&Wl(i)===null){o.child=S;break}i=S.sibling,S.sibling=h,h=S,S=i}hp(o,!0,h,null,I);break;case"together":hp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function wd(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function ul(i,o,h){if(i!==null&&(o.dependencies=i.dependencies),Vu|=o.lanes,(h&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,h=Jl(i,i.pendingProps),o.child=h,h.return=o;i.sibling!==null;)i=i.sibling,h=h.sibling=Jl(i,i.pendingProps),h.return=o;h.sibling=null}return o.child}function Fw(i,o,h){switch(o.tag){case 3:_d(o),el();break;case 5:ol(o);break;case 1:$n(o.type)&&Ul(o);break;case 4:Fu(o,o.stateNode.containerInfo);break;case 10:var g=o.type._context,S=o.memoizedProps.value;ur(tl,g._currentValue),g._currentValue=S;break;case 13:if(g=o.memoizedState,g!==null)return g.dehydrated!==null?(ur(wr,wr.current&1),o.flags|=128,null):(h&o.child.childLanes)!==0?Ty(i,o,h):(ur(wr,wr.current&1),i=ul(i,o,h),i!==null?i.sibling:null);ur(wr,wr.current&1);break;case 19:if(g=(h&o.childLanes)!==0,(i.flags&128)!==0){if(g)return Cy(i,o,h);o.flags|=128}if(S=o.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),ur(wr,wr.current),g)break;return null;case 22:case 23:return o.lanes=0,wt(i,o,h)}return ul(i,o,h)}var Iy,dp,Py,Ry;Iy=function(i,o){for(var h=o.child;h!==null;){if(h.tag===5||h.tag===6)i.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},dp=function(){},Py=function(i,o,h,g){var S=i.memoizedProps;if(S!==g){i=o.stateNode,To(us.current);var I=null;switch(h){case"input":S=Bt(i,S),g=Bt(i,g),I=[];break;case"select":S=j({},S,{value:void 0}),g=j({},g,{value:void 0}),I=[];break;case"textarea":S=yi(i,S),g=yi(i,g),I=[];break;default:typeof S.onClick!="function"&&typeof g.onClick=="function"&&(i.onclick=Cu)}re(h,g);var B;h=null;for(Re in S)if(!g.hasOwnProperty(Re)&&S.hasOwnProperty(Re)&&S[Re]!=null)if(Re==="style"){var Q=S[Re];for(B in Q)Q.hasOwnProperty(B)&&(h||(h={}),h[B]="")}else Re!=="dangerouslySetInnerHTML"&&Re!=="children"&&Re!=="suppressContentEditableWarning"&&Re!=="suppressHydrationWarning"&&Re!=="autoFocus"&&(s.hasOwnProperty(Re)?I||(I=[]):(I=I||[]).push(Re,null));for(Re in g){var oe=g[Re];if(Q=S?.[Re],g.hasOwnProperty(Re)&&oe!==Q&&(oe!=null||Q!=null))if(Re==="style")if(Q){for(B in Q)!Q.hasOwnProperty(B)||oe&&oe.hasOwnProperty(B)||(h||(h={}),h[B]="");for(B in oe)oe.hasOwnProperty(B)&&Q[B]!==oe[B]&&(h||(h={}),h[B]=oe[B])}else h||(I||(I=[]),I.push(Re,h)),h=oe;else Re==="dangerouslySetInnerHTML"?(oe=oe?oe.__html:void 0,Q=Q?Q.__html:void 0,oe!=null&&Q!==oe&&(I=I||[]).push(Re,oe)):Re==="children"?typeof oe!="string"&&typeof oe!="number"||(I=I||[]).push(Re,""+oe):Re!=="suppressContentEditableWarning"&&Re!=="suppressHydrationWarning"&&(s.hasOwnProperty(Re)?(oe!=null&&Re==="onScroll"&&_r("scroll",i),I||Q===oe||(I=[])):(I=I||[]).push(Re,oe))}h&&(I=I||[]).push("style",h);var Re=I;(o.updateQueue=Re)&&(o.flags|=4)}},Ry=function(i,o,h,g){h!==g&&(o.flags|=4)};function Oh(i,o){if(!Sr)switch(i.tailMode){case"hidden":o=i.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?i.tail=null:h.sibling=null;break;case"collapsed":h=i.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function mi(i){var o=i.alternate!==null&&i.alternate.child===i.child,h=0,g=0;if(o)for(var S=i.child;S!==null;)h|=S.lanes|S.childLanes,g|=S.subtreeFlags&14680064,g|=S.flags&14680064,S.return=i,S=S.sibling;else for(S=i.child;S!==null;)h|=S.lanes|S.childLanes,g|=S.subtreeFlags,g|=S.flags,S.return=i,S=S.sibling;return i.subtreeFlags|=g,i.childLanes=h,o}function Bw(i,o,h){var g=o.pendingProps;switch(Ru(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mi(o),null;case 1:return $n(o.type)&&Bl(),mi(o),null;case 3:return g=o.stateNode,Pi(),xr(bn),xr(an),$l(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(i===null||i.child===null)&&(ku(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Ii!==null&&(Sp(Ii),Ii=null))),dp(i,o),mi(o),null;case 5:Cc(o);var S=To(Sn.current);if(h=o.type,i!==null&&o.stateNode!=null)Py(i,o,h,g,S),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!g){if(o.stateNode===null)throw Error(t(166));return mi(o),null}if(i=To(us.current),ku(o)){g=o.stateNode,h=o.type;var I=o.memoizedProps;switch(g[Es]=o,g[Iu]=I,i=(o.mode&1)!==0,h){case"dialog":_r("cancel",g),_r("close",g);break;case"iframe":case"object":case"embed":_r("load",g);break;case"video":case"audio":for(S=0;S<fa.length;S++)_r(fa[S],g);break;case"source":_r("error",g);break;case"img":case"image":case"link":_r("error",g),_r("load",g);break;case"details":_r("toggle",g);break;case"input":dt(g,I),_r("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!I.multiple},_r("invalid",g);break;case"textarea":jn(g,I),_r("invalid",g)}re(h,I),S=null;for(var B in I)if(I.hasOwnProperty(B)){var Q=I[B];B==="children"?typeof Q=="string"?g.textContent!==Q&&(I.suppressHydrationWarning!==!0&&Au(g.textContent,Q,i),S=["children",Q]):typeof Q=="number"&&g.textContent!==""+Q&&(I.suppressHydrationWarning!==!0&&Au(g.textContent,Q,i),S=["children",""+Q]):s.hasOwnProperty(B)&&Q!=null&&B==="onScroll"&&_r("scroll",g)}switch(h){case"input":ot(g),Cr(g,I,!0);break;case"textarea":ot(g),Os(g);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(g.onclick=Cu)}g=S,o.updateQueue=g,g!==null&&(o.flags|=4)}else{B=S.nodeType===9?S:S.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=pn(h)),i==="http://www.w3.org/1999/xhtml"?h==="script"?(i=B.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof g.is=="string"?i=B.createElement(h,{is:g.is}):(i=B.createElement(h),h==="select"&&(B=i,g.multiple?B.multiple=!0:g.size&&(B.size=g.size))):i=B.createElementNS(i,h),i[Es]=o,i[Iu]=g,Iy(i,o,!1,!1),o.stateNode=i;e:{switch(B=Ie(h,g),h){case"dialog":_r("cancel",i),_r("close",i),S=g;break;case"iframe":case"object":case"embed":_r("load",i),S=g;break;case"video":case"audio":for(S=0;S<fa.length;S++)_r(fa[S],i);S=g;break;case"source":_r("error",i),S=g;break;case"img":case"image":case"link":_r("error",i),_r("load",i),S=g;break;case"details":_r("toggle",i),S=g;break;case"input":dt(i,g),S=Bt(i,g),_r("invalid",i);break;case"option":S=g;break;case"select":i._wrapperState={wasMultiple:!!g.multiple},S=j({},g,{value:void 0}),_r("invalid",i);break;case"textarea":jn(i,g),S=yi(i,g),_r("invalid",i);break;default:S=g}re(h,S),Q=S;for(I in Q)if(Q.hasOwnProperty(I)){var oe=Q[I];I==="style"?Ls(i,oe):I==="dangerouslySetInnerHTML"?(oe=oe?oe.__html:void 0,oe!=null&&Jn(i,oe)):I==="children"?typeof oe=="string"?(h!=="textarea"||oe!=="")&&vi(i,oe):typeof oe=="number"&&vi(i,""+oe):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(s.hasOwnProperty(I)?oe!=null&&I==="onScroll"&&_r("scroll",i):oe!=null&&z(i,I,oe,B))}switch(h){case"input":ot(i),Cr(i,g,!1);break;case"textarea":ot(i),Os(i);break;case"option":g.value!=null&&i.setAttribute("value",""+Ke(g.value));break;case"select":i.multiple=!!g.multiple,I=g.value,I!=null?hr(i,!!g.multiple,I,!1):g.defaultValue!=null&&hr(i,!!g.multiple,g.defaultValue,!0);break;default:typeof S.onClick=="function"&&(i.onclick=Cu)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return mi(o),null;case 6:if(i&&o.stateNode!=null)Ry(i,o,i.memoizedProps,g);else{if(typeof g!="string"&&o.stateNode===null)throw Error(t(166));if(h=To(Sn.current),To(us.current),ku(o)){if(g=o.stateNode,h=o.memoizedProps,g[Es]=o,(I=g.nodeValue!==h)&&(i=hi,i!==null))switch(i.tag){case 3:Au(g.nodeValue,h,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Au(g.nodeValue,h,(i.mode&1)!==0)}I&&(o.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[Es]=o,o.stateNode=g}return mi(o),null;case 13:if(xr(wr),g=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Sr&&di!==null&&(o.mode&1)!==0&&(o.flags&128)===0)as(),el(),o.flags|=98560,I=!1;else if(I=ku(o),g!==null&&g.dehydrated!==null){if(i===null){if(!I)throw Error(t(318));if(I=o.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(t(317));I[Es]=o}else el(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;mi(o),I=!1}else Ii!==null&&(Sp(Ii),Ii=null),I=!0;if(!I)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=h,o):(g=g!==null,g!==(i!==null&&i.memoizedState!==null)&&g&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(wr.current&1)!==0?Tn===0&&(Tn=3):Ap())),o.updateQueue!==null&&(o.flags|=4),mi(o),null);case 4:return Pi(),dp(i,o),i===null&&kl(o.stateNode.containerInfo),mi(o),null;case 10:return Lu(o.type._context),mi(o),null;case 17:return $n(o.type)&&Bl(),mi(o),null;case 19:if(xr(wr),I=o.memoizedState,I===null)return mi(o),null;if(g=(o.flags&128)!==0,B=I.rendering,B===null)if(g)Oh(I,!1);else{if(Tn!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(B=Wl(i),B!==null){for(o.flags|=128,Oh(I,!1),g=B.updateQueue,g!==null&&(o.updateQueue=g,o.flags|=4),o.subtreeFlags=0,g=h,h=o.child;h!==null;)I=h,i=g,I.flags&=14680066,B=I.alternate,B===null?(I.childLanes=0,I.lanes=i,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=B.childLanes,I.lanes=B.lanes,I.child=B.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=B.memoizedProps,I.memoizedState=B.memoizedState,I.updateQueue=B.updateQueue,I.type=B.type,i=B.dependencies,I.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),h=h.sibling;return ur(wr,wr.current&1|2),o.child}i=i.sibling}I.tail!==null&&nr()>Nc&&(o.flags|=128,g=!0,Oh(I,!1),o.lanes=4194304)}else{if(!g)if(i=Wl(B),i!==null){if(o.flags|=128,g=!0,h=i.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),Oh(I,!0),I.tail===null&&I.tailMode==="hidden"&&!B.alternate&&!Sr)return mi(o),null}else 2*nr()-I.renderingStartTime>Nc&&h!==1073741824&&(o.flags|=128,g=!0,Oh(I,!1),o.lanes=4194304);I.isBackwards?(B.sibling=o.child,o.child=B):(h=I.last,h!==null?h.sibling=B:o.child=B,I.last=B)}return I.tail!==null?(o=I.tail,I.rendering=o,I.tail=o.sibling,I.renderingStartTime=nr(),o.sibling=null,h=wr.current,ur(wr,g?h&1|2:h&1),o):(mi(o),null);case 22:case 23:return Tp(),g=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==g&&(o.flags|=8192),g&&(o.mode&1)!==0?(Ps&1073741824)!==0&&(mi(o),o.subtreeFlags&6&&(o.flags|=8192)):mi(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function Uw(i,o){switch(Ru(o),o.tag){case 1:return $n(o.type)&&Bl(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Pi(),xr(bn),xr(an),$l(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Cc(o),null;case 13:if(xr(wr),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));el()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return xr(wr),null;case 4:return Pi(),null;case 10:return Lu(o.type._context),null;case 22:case 23:return Tp(),null;case 24:return null;default:return null}}var bd=!1,gi=!1,Gw=typeof WeakSet=="function"?WeakSet:Set,yt=null;function Dc(i,o){var h=i.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){Zr(i,o,g)}else h.current=null}function fp(i,o,h){try{h()}catch(g){Zr(i,o,g)}}var ky=!1;function jw(i,o){if(Dl=Rn,i=J(),Z(i)){if("selectionStart"in i)var h={start:i.selectionStart,end:i.selectionEnd};else e:{h=(h=i.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var S=g.anchorOffset,I=g.focusNode;g=g.focusOffset;try{h.nodeType,I.nodeType}catch{h=null;break e}var B=0,Q=-1,oe=-1,Re=0,We=0,Ye=i,Ve=null;t:for(;;){for(var ft;Ye!==h||S!==0&&Ye.nodeType!==3||(Q=B+S),Ye!==I||g!==0&&Ye.nodeType!==3||(oe=B+g),Ye.nodeType===3&&(B+=Ye.nodeValue.length),(ft=Ye.firstChild)!==null;)Ve=Ye,Ye=ft;for(;;){if(Ye===i)break t;if(Ve===h&&++Re===S&&(Q=B),Ve===I&&++We===g&&(oe=B),(ft=Ye.nextSibling)!==null)break;Ye=Ve,Ve=Ye.parentNode}Ye=ft}h=Q===-1||oe===-1?null:{start:Q,end:oe}}else h=null}h=h||{start:0,end:0}}else h=null;for(dh={focusedElem:i,selectionRange:h},Rn=!1,yt=o;yt!==null;)if(o=yt,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,yt=i;else for(;yt!==null;){o=yt;try{var xt=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(xt!==null){var bt=xt.memoizedProps,cn=xt.memoizedState,be=o.stateNode,he=be.getSnapshotBeforeUpdate(o.elementType===o.type?bt:l(o.type,bt),cn);be.__reactInternalSnapshotBeforeUpdate=he}break;case 3:var Ce=o.stateNode.containerInfo;Ce.nodeType===1?Ce.textContent="":Ce.nodeType===9&&Ce.documentElement&&Ce.removeChild(Ce.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(nt){Zr(o,o.return,nt)}if(i=o.sibling,i!==null){i.return=o.return,yt=i;break}yt=o.return}return xt=ky,ky=!1,xt}function Dh(i,o,h){var g=o.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var S=g=g.next;do{if((S.tag&i)===i){var I=S.destroy;S.destroy=void 0,I!==void 0&&fp(o,h,I)}S=S.next}while(S!==g)}}function Sd(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var h=o=o.next;do{if((h.tag&i)===i){var g=h.create;h.destroy=g()}h=h.next}while(h!==o)}}function pp(i){var o=i.ref;if(o!==null){var h=i.stateNode;i.tag,i=h,typeof o=="function"?o(i):o.current=i}}function My(i){var o=i.alternate;o!==null&&(i.alternate=null,My(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Es],delete o[Iu],delete o[On],delete o[dd],delete o[fd])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Oy(i){return i.tag===5||i.tag===3||i.tag===4}function Dy(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Oy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function mp(i,o,h){var g=i.tag;if(g===5||g===6)i=i.stateNode,o?h.nodeType===8?h.parentNode.insertBefore(i,o):h.insertBefore(i,o):(h.nodeType===8?(o=h.parentNode,o.insertBefore(i,h)):(o=h,o.appendChild(i)),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=Cu));else if(g!==4&&(i=i.child,i!==null))for(mp(i,o,h),i=i.sibling;i!==null;)mp(i,o,h),i=i.sibling}function gp(i,o,h){var g=i.tag;if(g===5||g===6)i=i.stateNode,o?h.insertBefore(i,o):h.appendChild(i);else if(g!==4&&(i=i.child,i!==null))for(gp(i,o,h),i=i.sibling;i!==null;)gp(i,o,h),i=i.sibling}var Xn=null,Io=!1;function ql(i,o,h){for(h=h.child;h!==null;)Ly(i,o,h),h=h.sibling}function Ly(i,o,h){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(si,h)}catch{}switch(h.tag){case 5:gi||Dc(h,o);case 6:var g=Xn,S=Io;Xn=null,ql(i,o,h),Xn=g,Io=S,Xn!==null&&(Io?(i=Xn,h=h.stateNode,i.nodeType===8?i.parentNode.removeChild(h):i.removeChild(h)):Xn.removeChild(h.stateNode));break;case 18:Xn!==null&&(Io?(i=Xn,h=h.stateNode,i.nodeType===8?wc(i.parentNode,h):i.nodeType===1&&wc(i,h),Ei(i)):wc(Xn,h.stateNode));break;case 4:g=Xn,S=Io,Xn=h.stateNode.containerInfo,Io=!0,ql(i,o,h),Xn=g,Io=S;break;case 0:case 11:case 14:case 15:if(!gi&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){S=g=g.next;do{var I=S,B=I.destroy;I=I.tag,B!==void 0&&((I&2)!==0||(I&4)!==0)&&fp(h,o,B),S=S.next}while(S!==g)}ql(i,o,h);break;case 1:if(!gi&&(Dc(h,o),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(Q){Zr(h,o,Q)}ql(i,o,h);break;case 21:ql(i,o,h);break;case 22:h.mode&1?(gi=(g=gi)||h.memoizedState!==null,ql(i,o,h),gi=g):ql(i,o,h);break;default:ql(i,o,h)}}function Ny(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var h=i.stateNode;h===null&&(h=i.stateNode=new Gw),o.forEach(function(g){var S=Yw.bind(null,i,g);h.has(g)||(h.add(g),g.then(S,S))})}}function Po(i,o){var h=o.deletions;if(h!==null)for(var g=0;g<h.length;g++){var S=h[g];try{var I=i,B=o,Q=B;e:for(;Q!==null;){switch(Q.tag){case 5:Xn=Q.stateNode,Io=!1;break e;case 3:Xn=Q.stateNode.containerInfo,Io=!0;break e;case 4:Xn=Q.stateNode.containerInfo,Io=!0;break e}Q=Q.return}if(Xn===null)throw Error(t(160));Ly(I,B,S),Xn=null,Io=!1;var oe=S.alternate;oe!==null&&(oe.return=null),S.return=null}catch(Re){Zr(S,o,Re)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Fy(o,i),o=o.sibling}function Fy(i,o){var h=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Po(o,i),ba(i),g&4){try{Dh(3,i,i.return),Sd(3,i)}catch(bt){Zr(i,i.return,bt)}try{Dh(5,i,i.return)}catch(bt){Zr(i,i.return,bt)}}break;case 1:Po(o,i),ba(i),g&512&&h!==null&&Dc(h,h.return);break;case 5:if(Po(o,i),ba(i),g&512&&h!==null&&Dc(h,h.return),i.flags&32){var S=i.stateNode;try{vi(S,"")}catch(bt){Zr(i,i.return,bt)}}if(g&4&&(S=i.stateNode,S!=null)){var I=i.memoizedProps,B=h!==null?h.memoizedProps:I,Q=i.type,oe=i.updateQueue;if(i.updateQueue=null,oe!==null)try{Q==="input"&&I.type==="radio"&&I.name!=null&&vt(S,I),Ie(Q,B);var Re=Ie(Q,I);for(B=0;B<oe.length;B+=2){var We=oe[B],Ye=oe[B+1];We==="style"?Ls(S,Ye):We==="dangerouslySetInnerHTML"?Jn(S,Ye):We==="children"?vi(S,Ye):z(S,We,Ye,Re)}switch(Q){case"input":mr(S,I);break;case"textarea":Cn(S,I);break;case"select":var Ve=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!I.multiple;var ft=I.value;ft!=null?hr(S,!!I.multiple,ft,!1):Ve!==!!I.multiple&&(I.defaultValue!=null?hr(S,!!I.multiple,I.defaultValue,!0):hr(S,!!I.multiple,I.multiple?[]:"",!1))}S[Iu]=I}catch(bt){Zr(i,i.return,bt)}}break;case 6:if(Po(o,i),ba(i),g&4){if(i.stateNode===null)throw Error(t(162));S=i.stateNode,I=i.memoizedProps;try{S.nodeValue=I}catch(bt){Zr(i,i.return,bt)}}break;case 3:if(Po(o,i),ba(i),g&4&&h!==null&&h.memoizedState.isDehydrated)try{Ei(o.containerInfo)}catch(bt){Zr(i,i.return,bt)}break;case 4:Po(o,i),ba(i);break;case 13:Po(o,i),ba(i),S=i.child,S.flags&8192&&(I=S.memoizedState!==null,S.stateNode.isHidden=I,!I||S.alternate!==null&&S.alternate.memoizedState!==null||(_p=nr())),g&4&&Ny(i);break;case 22:if(We=h!==null&&h.memoizedState!==null,i.mode&1?(gi=(Re=gi)||We,Po(o,i),gi=Re):Po(o,i),ba(i),g&8192){if(Re=i.memoizedState!==null,(i.stateNode.isHidden=Re)&&!We&&(i.mode&1)!==0)for(yt=i,We=i.child;We!==null;){for(Ye=yt=We;yt!==null;){switch(Ve=yt,ft=Ve.child,Ve.tag){case 0:case 11:case 14:case 15:Dh(4,Ve,Ve.return);break;case 1:Dc(Ve,Ve.return);var xt=Ve.stateNode;if(typeof xt.componentWillUnmount=="function"){g=Ve,h=Ve.return;try{o=g,xt.props=o.memoizedProps,xt.state=o.memoizedState,xt.componentWillUnmount()}catch(bt){Zr(g,h,bt)}}break;case 5:Dc(Ve,Ve.return);break;case 22:if(Ve.memoizedState!==null){Gy(Ye);continue}}ft!==null?(ft.return=Ve,yt=ft):Gy(Ye)}We=We.sibling}e:for(We=null,Ye=i;;){if(Ye.tag===5){if(We===null){We=Ye;try{S=Ye.stateNode,Re?(I=S.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(Q=Ye.stateNode,oe=Ye.memoizedProps.style,B=oe!=null&&oe.hasOwnProperty("display")?oe.display:null,Q.style.display=ao("display",B))}catch(bt){Zr(i,i.return,bt)}}}else if(Ye.tag===6){if(We===null)try{Ye.stateNode.nodeValue=Re?"":Ye.memoizedProps}catch(bt){Zr(i,i.return,bt)}}else if((Ye.tag!==22&&Ye.tag!==23||Ye.memoizedState===null||Ye===i)&&Ye.child!==null){Ye.child.return=Ye,Ye=Ye.child;continue}if(Ye===i)break e;for(;Ye.sibling===null;){if(Ye.return===null||Ye.return===i)break e;We===Ye&&(We=null),Ye=Ye.return}We===Ye&&(We=null),Ye.sibling.return=Ye.return,Ye=Ye.sibling}}break;case 19:Po(o,i),ba(i),g&4&&Ny(i);break;case 21:break;default:Po(o,i),ba(i)}}function ba(i){var o=i.flags;if(o&2){try{e:{for(var h=i.return;h!==null;){if(Oy(h)){var g=h;break e}h=h.return}throw Error(t(160))}switch(g.tag){case 5:var S=g.stateNode;g.flags&32&&(vi(S,""),g.flags&=-33);var I=Dy(i);gp(i,I,S);break;case 3:case 4:var B=g.stateNode.containerInfo,Q=Dy(i);mp(i,Q,B);break;default:throw Error(t(161))}}catch(oe){Zr(i,i.return,oe)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function zw(i,o,h){yt=i,By(i)}function By(i,o,h){for(var g=(i.mode&1)!==0;yt!==null;){var S=yt,I=S.child;if(S.tag===22&&g){var B=S.memoizedState!==null||bd;if(!B){var Q=S.alternate,oe=Q!==null&&Q.memoizedState!==null||gi;Q=bd;var Re=gi;if(bd=B,(gi=oe)&&!Re)for(yt=S;yt!==null;)B=yt,oe=B.child,B.tag===22&&B.memoizedState!==null?jy(S):oe!==null?(oe.return=B,yt=oe):jy(S);for(;I!==null;)yt=I,By(I),I=I.sibling;yt=S,bd=Q,gi=Re}Uy(i)}else(S.subtreeFlags&8772)!==0&&I!==null?(I.return=S,yt=I):Uy(i)}}function Uy(i){for(;yt!==null;){var o=yt;if((o.flags&8772)!==0){var h=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:gi||Sd(5,o);break;case 1:var g=o.stateNode;if(o.flags&4&&!gi)if(h===null)g.componentDidMount();else{var S=o.elementType===o.type?h.memoizedProps:l(o.type,h.memoizedProps);g.componentDidUpdate(S,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var I=o.updateQueue;I!==null&&_a(o,I,g);break;case 3:var B=o.updateQueue;if(B!==null){if(h=null,o.child!==null)switch(o.child.tag){case 5:h=o.child.stateNode;break;case 1:h=o.child.stateNode}_a(o,B,h)}break;case 5:var Q=o.stateNode;if(h===null&&o.flags&4){h=Q;var oe=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":oe.autoFocus&&h.focus();break;case"img":oe.src&&(h.src=oe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Re=o.alternate;if(Re!==null){var We=Re.memoizedState;if(We!==null){var Ye=We.dehydrated;Ye!==null&&Ei(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}gi||o.flags&512&&pp(o)}catch(Ve){Zr(o,o.return,Ve)}}if(o===i){yt=null;break}if(h=o.sibling,h!==null){h.return=o.return,yt=h;break}yt=o.return}}function Gy(i){for(;yt!==null;){var o=yt;if(o===i){yt=null;break}var h=o.sibling;if(h!==null){h.return=o.return,yt=h;break}yt=o.return}}function jy(i){for(;yt!==null;){var o=yt;try{switch(o.tag){case 0:case 11:case 15:var h=o.return;try{Sd(4,o)}catch(oe){Zr(o,h,oe)}break;case 1:var g=o.stateNode;if(typeof g.componentDidMount=="function"){var S=o.return;try{g.componentDidMount()}catch(oe){Zr(o,S,oe)}}var I=o.return;try{pp(o)}catch(oe){Zr(o,I,oe)}break;case 5:var B=o.return;try{pp(o)}catch(oe){Zr(o,B,oe)}}}catch(oe){Zr(o,o.return,oe)}if(o===i){yt=null;break}var Q=o.sibling;if(Q!==null){Q.return=o.return,yt=Q;break}yt=o.return}}var Hw=Math.ceil,Ed=te.ReactCurrentDispatcher,yp=te.ReactCurrentOwner,eo=te.ReactCurrentBatchConfig,ar=0,Nn=null,vn=null,qn=0,Ps=0,Lc=_o(0),Tn=0,Lh=null,Vu=0,Td=0,vp=0,Nh=null,hs=null,_p=0,Nc=1/0,cl=null,Ad=!1,xp=null,Kl=null,Cd=!1,Yl=null,Id=0,Fh=0,wp=null,Pd=-1,Rd=0;function Mi(){return(ar&6)!==0?nr():Pd!==-1?Pd:Pd=nr()}function Ql(i){return(i.mode&1)===0?1:(ar&2)!==0&&qn!==0?qn&-qn:ip.transition!==null?(Rd===0&&(Rd=rn()),Rd):(i=$t,i!==0||(i=window.event,i=i===void 0?16:gn(i.type)),i)}function Ro(i,o,h,g){if(50<Fh)throw Fh=0,wp=null,Error(t(185));ho(i,h,g),((ar&2)===0||i!==Nn)&&(i===Nn&&((ar&2)===0&&(Td|=h),Tn===4&&Zl(i,qn)),ds(i,g),h===1&&ar===0&&(o.mode&1)===0&&(Nc=nr()+500,ts&&ns()))}function ds(i,o){var h=i.callbackNode;Bs(i,o);var g=Ko(i,i===Nn?qn:0);if(g===0)h!==null&&lo(h),i.callbackNode=null,i.callbackPriority=0;else if(o=g&-g,i.callbackPriority!==o){if(h!=null&&lo(h),o===1)i.tag===0?pd(Hy.bind(null,i)):_h(Hy.bind(null,i)),mh(function(){(ar&6)===0&&ns()}),h=null;else{switch(Zo(g)){case 1:h=Bi;break;case 4:h=co;break;case 16:h=qo;break;case 536870912:h=Vn;break;default:h=qo}h=Qy(h,zy.bind(null,i))}i.callbackPriority=o,i.callbackNode=h}}function zy(i,o){if(Pd=-1,Rd=0,(ar&6)!==0)throw Error(t(327));var h=i.callbackNode;if(Fc()&&i.callbackNode!==h)return null;var g=Ko(i,i===Nn?qn:0);if(g===0)return null;if((g&30)!==0||(g&i.expiredLanes)!==0||o)o=kd(i,g);else{o=g;var S=ar;ar|=2;var I=Wy();(Nn!==i||qn!==o)&&(cl=null,Nc=nr()+500,$u(i,o));do try{$w();break}catch(Q){Vy(i,Q)}while(!0);Du(),Ed.current=I,ar=S,vn!==null?o=0:(Nn=null,qn=0,o=Tn)}if(o!==0){if(o===2&&(S=Us(i),S!==0&&(g=S,o=bp(i,S))),o===1)throw h=Lh,$u(i,0),Zl(i,g),ds(i,nr()),h;if(o===6)Zl(i,g);else{if(S=i.current.alternate,(g&30)===0&&!Vw(S)&&(o=kd(i,g),o===2&&(I=Us(i),I!==0&&(g=I,o=bp(i,I))),o===1))throw h=Lh,$u(i,0),Zl(i,g),ds(i,nr()),h;switch(i.finishedWork=S,i.finishedLanes=g,o){case 0:case 1:throw Error(t(345));case 2:Xu(i,hs,cl);break;case 3:if(Zl(i,g),(g&130023424)===g&&(o=_p+500-nr(),10<o)){if(Ko(i,0)!==0)break;if(S=i.suspendedLanes,(S&g)!==g){Mi(),i.pingedLanes|=i.suspendedLanes&S;break}i.timeoutHandle=ph(Xu.bind(null,i,hs,cl),o);break}Xu(i,hs,cl);break;case 4:if(Zl(i,g),(g&4194240)===g)break;for(o=i.eventTimes,S=-1;0<g;){var B=31-Rt(g);I=1<<B,B=o[B],B>S&&(S=B),g&=~I}if(g=S,g=nr()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Hw(g/1960))-g,10<g){i.timeoutHandle=ph(Xu.bind(null,i,hs,cl),g);break}Xu(i,hs,cl);break;case 5:Xu(i,hs,cl);break;default:throw Error(t(329))}}}return ds(i,nr()),i.callbackNode===h?zy.bind(null,i):null}function bp(i,o){var h=Nh;return i.current.memoizedState.isDehydrated&&($u(i,o).flags|=256),i=kd(i,o),i!==2&&(o=hs,hs=h,o!==null&&Sp(o)),i}function Sp(i){hs===null?hs=i:hs.push.apply(hs,i)}function Vw(i){for(var o=i;;){if(o.flags&16384){var h=o.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var S=h[g],I=S.getSnapshot;S=S.value;try{if(!fe(I(),S))return!1}catch{return!1}}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Zl(i,o){for(o&=~vp,o&=~Td,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var h=31-Rt(o),g=1<<h;i[h]=-1,o&=~g}}function Hy(i){if((ar&6)!==0)throw Error(t(327));Fc();var o=Ko(i,0);if((o&1)===0)return ds(i,nr()),null;var h=kd(i,o);if(i.tag!==0&&h===2){var g=Us(i);g!==0&&(o=g,h=bp(i,g))}if(h===1)throw h=Lh,$u(i,0),Zl(i,o),ds(i,nr()),h;if(h===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Xu(i,hs,cl),ds(i,nr()),null}function Ep(i,o){var h=ar;ar|=1;try{return i(o)}finally{ar=h,ar===0&&(Nc=nr()+500,ts&&ns())}}function Wu(i){Yl!==null&&Yl.tag===0&&(ar&6)===0&&Fc();var o=ar;ar|=1;var h=eo.transition,g=$t;try{if(eo.transition=null,$t=1,i)return i()}finally{$t=g,eo.transition=h,ar=o,(ar&6)===0&&ns()}}function Tp(){Ps=Lc.current,xr(Lc)}function $u(i,o){i.finishedWork=null,i.finishedLanes=0;var h=i.timeoutHandle;if(h!==-1&&(i.timeoutHandle=-1,Ll(h)),vn!==null)for(h=vn.return;h!==null;){var g=h;switch(Ru(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Bl();break;case 3:Pi(),xr(bn),xr(an),$l();break;case 5:Cc(g);break;case 4:Pi();break;case 13:xr(wr);break;case 19:xr(wr);break;case 10:Lu(g.type._context);break;case 22:case 23:Tp()}h=h.return}if(Nn=i,vn=i=Jl(i.current,null),qn=Ps=o,Tn=0,Lh=null,vp=Td=Vu=0,hs=Nh=null,sl!==null){for(o=0;o<sl.length;o++)if(h=sl[o],g=h.interleaved,g!==null){h.interleaved=null;var S=g.next,I=h.pending;if(I!==null){var B=I.next;I.next=S,g.next=B}h.pending=g}sl=null}return i}function Vy(i,o){do{var h=vn;try{if(Du(),Ts.current=Hu,ln){for(var g=Tr.memoizedState;g!==null;){var S=g.queue;S!==null&&(S.pending=null),g=g.next}ln=!1}if(As=0,Vr=Gr=Tr=null,cs=!1,Ln=0,yp.current=null,h===null||h.return===null){Tn=1,Lh=o,vn=null;break}e:{var I=i,B=h.return,Q=h,oe=o;if(o=qn,Q.flags|=32768,oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var Re=oe,We=Q,Ye=We.tag;if((We.mode&1)===0&&(Ye===0||Ye===11||Ye===15)){var Ve=We.alternate;Ve?(We.updateQueue=Ve.updateQueue,We.memoizedState=Ve.memoizedState,We.lanes=Ve.lanes):(We.updateQueue=null,We.memoizedState=null)}var ft=_t(B);if(ft!==null){ft.flags&=-257,Ht(ft,B,Q,I,o),ft.mode&1&&Ze(I,Re,o),o=ft,oe=Re;var xt=o.updateQueue;if(xt===null){var bt=new Set;bt.add(oe),o.updateQueue=bt}else xt.add(oe);break e}else{if((o&1)===0){Ze(I,Re,o),Ap();break e}oe=Error(t(426))}}else if(Sr&&Q.mode&1){var cn=_t(B);if(cn!==null){(cn.flags&65536)===0&&(cn.flags|=256),Ht(cn,B,Q,I,o),ls(ue(oe,Q));break e}}I=oe=ue(oe,Q),Tn!==4&&(Tn=2),Nh===null?Nh=[I]:Nh.push(I),I=B;do{switch(I.tag){case 3:I.flags|=65536,o&=-o,I.lanes|=o;var be=at(I,oe,o);Qr(I,be);break e;case 1:Q=oe;var he=I.type,Ce=I.stateNode;if((I.flags&128)===0&&(typeof he.getDerivedStateFromError=="function"||Ce!==null&&typeof Ce.componentDidCatch=="function"&&(Kl===null||!Kl.has(Ce)))){I.flags|=65536,o&=-o,I.lanes|=o;var nt=Be(I,Q,o);Qr(I,nt);break e}}I=I.return}while(I!==null)}Xy(h)}catch(Et){o=Et,vn===h&&h!==null&&(vn=h=h.return);continue}break}while(!0)}function Wy(){var i=Ed.current;return Ed.current=Hu,i===null?Hu:i}function Ap(){(Tn===0||Tn===3||Tn===2)&&(Tn=4),Nn===null||(Vu&268435455)===0&&(Td&268435455)===0||Zl(Nn,qn)}function kd(i,o){var h=ar;ar|=2;var g=Wy();(Nn!==i||qn!==o)&&(cl=null,$u(i,o));do try{Ww();break}catch(S){Vy(i,S)}while(!0);if(Du(),ar=h,Ed.current=g,vn!==null)throw Error(t(261));return Nn=null,qn=0,Tn}function Ww(){for(;vn!==null;)$y(vn)}function $w(){for(;vn!==null&&!Or();)$y(vn)}function $y(i){var o=Yy(i.alternate,i,Ps);i.memoizedProps=i.pendingProps,o===null?Xy(i):vn=o,yp.current=null}function Xy(i){var o=i;do{var h=o.alternate;if(i=o.return,(o.flags&32768)===0){if(h=Bw(h,o,Ps),h!==null){vn=h;return}}else{if(h=Uw(h,o),h!==null){h.flags&=32767,vn=h;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Tn=6,vn=null;return}}if(o=o.sibling,o!==null){vn=o;return}vn=o=i}while(o!==null);Tn===0&&(Tn=5)}function Xu(i,o,h){var g=$t,S=eo.transition;try{eo.transition=null,$t=1,Xw(i,o,h,g)}finally{eo.transition=S,$t=g}return null}function Xw(i,o,h,g){do Fc();while(Yl!==null);if((ar&6)!==0)throw Error(t(327));h=i.finishedWork;var S=i.finishedLanes;if(h===null)return null;if(i.finishedWork=null,i.finishedLanes=0,h===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var I=h.lanes|h.childLanes;if(Yo(i,I),i===Nn&&(vn=Nn=null,qn=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Cd||(Cd=!0,Qy(qo,function(){return Fc(),null})),I=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||I){I=eo.transition,eo.transition=null;var B=$t;$t=1;var Q=ar;ar|=4,yp.current=null,jw(i,h),Fy(h,i),xe(dh),Rn=!!Dl,dh=Dl=null,i.current=h,zw(h),uo(),ar=Q,$t=B,eo.transition=I}else i.current=h;if(Cd&&(Cd=!1,Yl=i,Id=S),I=i.pendingLanes,I===0&&(Kl=null),dr(h.stateNode),ds(i,nr()),o!==null)for(g=i.onRecoverableError,h=0;h<o.length;h++)S=o[h],g(S.value,{componentStack:S.stack,digest:S.digest});if(Ad)throw Ad=!1,i=xp,xp=null,i;return(Id&1)!==0&&i.tag!==0&&Fc(),I=i.pendingLanes,(I&1)!==0?i===wp?Fh++:(Fh=0,wp=i):Fh=0,ns(),null}function Fc(){if(Yl!==null){var i=Zo(Id),o=eo.transition,h=$t;try{if(eo.transition=null,$t=16>i?16:i,Yl===null)var g=!1;else{if(i=Yl,Yl=null,Id=0,(ar&6)!==0)throw Error(t(331));var S=ar;for(ar|=4,yt=i.current;yt!==null;){var I=yt,B=I.child;if((yt.flags&16)!==0){var Q=I.deletions;if(Q!==null){for(var oe=0;oe<Q.length;oe++){var Re=Q[oe];for(yt=Re;yt!==null;){var We=yt;switch(We.tag){case 0:case 11:case 15:Dh(8,We,I)}var Ye=We.child;if(Ye!==null)Ye.return=We,yt=Ye;else for(;yt!==null;){We=yt;var Ve=We.sibling,ft=We.return;if(My(We),We===Re){yt=null;break}if(Ve!==null){Ve.return=ft,yt=Ve;break}yt=ft}}}var xt=I.alternate;if(xt!==null){var bt=xt.child;if(bt!==null){xt.child=null;do{var cn=bt.sibling;bt.sibling=null,bt=cn}while(bt!==null)}}yt=I}}if((I.subtreeFlags&2064)!==0&&B!==null)B.return=I,yt=B;else e:for(;yt!==null;){if(I=yt,(I.flags&2048)!==0)switch(I.tag){case 0:case 11:case 15:Dh(9,I,I.return)}var be=I.sibling;if(be!==null){be.return=I.return,yt=be;break e}yt=I.return}}var he=i.current;for(yt=he;yt!==null;){B=yt;var Ce=B.child;if((B.subtreeFlags&2064)!==0&&Ce!==null)Ce.return=B,yt=Ce;else e:for(B=he;yt!==null;){if(Q=yt,(Q.flags&2048)!==0)try{switch(Q.tag){case 0:case 11:case 15:Sd(9,Q)}}catch(Et){Zr(Q,Q.return,Et)}if(Q===B){yt=null;break e}var nt=Q.sibling;if(nt!==null){nt.return=Q.return,yt=nt;break e}yt=Q.return}}if(ar=S,ns(),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(si,i)}catch{}g=!0}return g}finally{$t=h,eo.transition=o}}return!1}function qy(i,o,h){o=ue(h,o),o=at(i,o,1),i=Yr(i,o,1),o=Mi(),i!==null&&(ho(i,1,o),ds(i,o))}function Zr(i,o,h){if(i.tag===3)qy(i,i,h);else for(;o!==null;){if(o.tag===3){qy(o,i,h);break}else if(o.tag===1){var g=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Kl===null||!Kl.has(g))){i=ue(h,i),i=Be(o,i,1),o=Yr(o,i,1),i=Mi(),o!==null&&(ho(o,1,i),ds(o,i));break}}o=o.return}}function qw(i,o,h){var g=i.pingCache;g!==null&&g.delete(o),o=Mi(),i.pingedLanes|=i.suspendedLanes&h,Nn===i&&(qn&h)===h&&(Tn===4||Tn===3&&(qn&130023424)===qn&&500>nr()-_p?$u(i,0):vp|=h),ds(i,o)}function Ky(i,o){o===0&&((i.mode&1)===0?o=1:(o=tn,tn<<=1,(tn&130023424)===0&&(tn=4194304)));var h=Mi();i=pr(i,o),i!==null&&(ho(i,o,h),ds(i,h))}function Kw(i){var o=i.memoizedState,h=0;o!==null&&(h=o.retryLane),Ky(i,h)}function Yw(i,o){var h=0;switch(i.tag){case 13:var g=i.stateNode,S=i.memoizedState;S!==null&&(h=S.retryLane);break;case 19:g=i.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(o),Ky(i,h)}var Yy;Yy=function(i,o,h){if(i!==null)if(i.memoizedProps!==o.pendingProps||bn.current)me=!0;else{if((i.lanes&h)===0&&(o.flags&128)===0)return me=!1,Fw(i,o,h);me=(i.flags&131072)!==0}else me=!1,Sr&&(o.flags&1048576)!==0&&jl(o,Ja,o.index);switch(o.lanes=0,o.tag){case 2:var g=o.type;wd(i,o),i=o.pendingProps;var S=ga(o,an.current);il(o,h),S=Uu(null,o,g,i,S,h);var I=Zs();return o.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,$n(g)?(I=!0,Ul(o)):I=!1,o.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Kr(o),S.updater=y,o.stateNode=S,S._reactInternals=o,$(o,g,i,h),o=Js(null,o,g,!0,I,h)):(o.tag=0,Sr&&I&&zl(o),ke(null,o,S,h),o=o.child),o;case 16:g=o.elementType;e:{switch(wd(i,o),i=o.pendingProps,S=g._init,g=S(g._payload),o.type=g,S=o.tag=Zw(g),i=l(g,i),S){case 0:o=un(null,o,g,i,h);break e;case 1:o=or(null,o,g,i,h);break e;case 11:o=$e(null,o,g,i,h);break e;case 14:o=Ct(null,o,g,l(g.type,i),h);break e}throw Error(t(306,g,""))}return o;case 0:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:l(g,S),un(i,o,g,S,h);case 1:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:l(g,S),or(i,o,g,S,h);case 3:e:{if(_d(o),i===null)throw Error(t(387));g=o.pendingProps,I=o.memoizedState,S=I.element,Hr(i,o),va(o,g,null,h);var B=o.memoizedState;if(g=B.element,I.isDehydrated)if(I={element:g,isDehydrated:!1,cache:B.cache,pendingSuspenseBoundaries:B.pendingSuspenseBoundaries,transitions:B.transitions},o.updateQueue.baseState=I,o.memoizedState=I,o.flags&256){S=ue(Error(t(423)),o),o=Ey(i,o,g,h,S);break e}else if(g!==S){S=ue(Error(t(424)),o),o=Ey(i,o,g,h,S);break e}else for(di=vo(o.stateNode.containerInfo.firstChild),hi=o,Sr=!0,Ii=null,h=Ou(o,null,g,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(el(),g===S){o=ul(i,o,h);break e}ke(i,o,g,h)}o=o.child}return o;case 5:return ol(o),i===null&&os(o),g=o.type,S=o.pendingProps,I=i!==null?i.memoizedProps:null,B=S.children,fh(g,S)?B=null:I!==null&&fh(g,I)&&(o.flags|=32),tr(i,o),ke(i,o,B,h),o.child;case 6:return i===null&&os(o),null;case 13:return Ty(i,o,h);case 4:return Fu(o,o.stateNode.containerInfo),g=o.pendingProps,i===null?o.child=wo(o,null,g,h):ke(i,o,g,h),o.child;case 11:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:l(g,S),$e(i,o,g,S,h);case 7:return ke(i,o,o.pendingProps,h),o.child;case 8:return ke(i,o,o.pendingProps.children,h),o.child;case 12:return ke(i,o,o.pendingProps.children,h),o.child;case 10:e:{if(g=o.type._context,S=o.pendingProps,I=o.memoizedProps,B=S.value,ur(tl,g._currentValue),g._currentValue=B,I!==null)if(fe(I.value,B)){if(I.children===S.children&&!bn.current){o=ul(i,o,h);break e}}else for(I=o.child,I!==null&&(I.return=o);I!==null;){var Q=I.dependencies;if(Q!==null){B=I.child;for(var oe=Q.firstContext;oe!==null;){if(oe.context===g){if(I.tag===1){oe=Er(-1,h&-h),oe.tag=2;var Re=I.updateQueue;if(Re!==null){Re=Re.shared;var We=Re.pending;We===null?oe.next=oe:(oe.next=We.next,We.next=oe),Re.pending=oe}}I.lanes|=h,oe=I.alternate,oe!==null&&(oe.lanes|=h),Nu(I.return,h,o),Q.lanes|=h;break}oe=oe.next}}else if(I.tag===10)B=I.type===o.type?null:I.child;else if(I.tag===18){if(B=I.return,B===null)throw Error(t(341));B.lanes|=h,Q=B.alternate,Q!==null&&(Q.lanes|=h),Nu(B,h,o),B=I.sibling}else B=I.child;if(B!==null)B.return=I;else for(B=I;B!==null;){if(B===o){B=null;break}if(I=B.sibling,I!==null){I.return=B.return,B=I;break}B=B.return}I=B}ke(i,o,S.children,h),o=o.child}return o;case 9:return S=o.type,g=o.pendingProps.children,il(o,h),S=fi(S),g=g(S),o.flags|=1,ke(i,o,g,h),o.child;case 14:return g=o.type,S=l(g,o.pendingProps),S=l(g.type,S),Ct(i,o,g,S,h);case 15:return sr(i,o,o.type,o.pendingProps,h);case 17:return g=o.type,S=o.pendingProps,S=o.elementType===g?S:l(g,S),wd(i,o),o.tag=1,$n(g)?(i=!0,Ul(o)):i=!1,il(o,h),C(o,g,S),$(o,g,S,h),Js(null,o,g,!0,i,h);case 19:return Cy(i,o,h);case 22:return wt(i,o,h)}throw Error(t(156,o.tag))};function Qy(i,o){return Ga(i,o)}function Qw(i,o,h,g){this.tag=i,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function to(i,o,h,g){return new Qw(i,o,h,g)}function Cp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Zw(i){if(typeof i=="function")return Cp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===ge)return 11;if(i===qe)return 14}return 2}function Jl(i,o){var h=i.alternate;return h===null?(h=to(i.tag,o,i.key,i.mode),h.elementType=i.elementType,h.type=i.type,h.stateNode=i.stateNode,h.alternate=i,i.alternate=h):(h.pendingProps=o,h.type=i.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=i.flags&14680064,h.childLanes=i.childLanes,h.lanes=i.lanes,h.child=i.child,h.memoizedProps=i.memoizedProps,h.memoizedState=i.memoizedState,h.updateQueue=i.updateQueue,o=i.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=i.sibling,h.index=i.index,h.ref=i.ref,h}function Md(i,o,h,g,S,I){var B=2;if(g=i,typeof i=="function")Cp(i)&&(B=1);else if(typeof i=="string")B=5;else e:switch(i){case F:return qu(h.children,S,I,o);case ie:B=8,S|=8;break;case ye:return i=to(12,h,o,S|2),i.elementType=ye,i.lanes=I,i;case ve:return i=to(13,h,o,S),i.elementType=ve,i.lanes=I,i;case we:return i=to(19,h,o,S),i.elementType=we,i.lanes=I,i;case V:return Od(h,S,I,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Oe:B=10;break e;case Pe:B=9;break e;case ge:B=11;break e;case qe:B=14;break e;case H:B=16,g=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=to(B,h,o,S),o.elementType=i,o.type=g,o.lanes=I,o}function qu(i,o,h,g){return i=to(7,i,g,o),i.lanes=h,i}function Od(i,o,h,g){return i=to(22,i,g,o),i.elementType=V,i.lanes=h,i.stateNode={isHidden:!1},i}function Ip(i,o,h){return i=to(6,i,null,o),i.lanes=h,i}function Pp(i,o,h){return o=to(4,i.children!==null?i.children:[],i.key,o),o.lanes=h,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function Jw(i,o,h,g,S){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=za(0),this.expirationTimes=za(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=za(0),this.identifierPrefix=g,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function Rp(i,o,h,g,S,I,B,Q,oe){return i=new Jw(i,o,h,Q,oe),o===1?(o=1,I===!0&&(o|=8)):o=0,I=to(3,null,null,o),i.current=I,I.stateNode=i,I.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kr(I),i}function e1(i,o,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:de,key:g==null?null:""+g,children:i,containerInfo:o,implementation:h}}function Zy(i){if(!i)return Ji;i=i._reactInternals;e:{if(Xr(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if($n(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var h=i.type;if($n(h))return yh(i,h,o)}return o}function Jy(i,o,h,g,S,I,B,Q,oe){return i=Rp(h,g,!0,i,S,I,B,Q,oe),i.context=Zy(null),h=i.current,g=Mi(),S=Ql(h),I=Er(g,S),I.callback=o??null,Yr(h,I,S),i.current.lanes=S,ho(i,S,g),ds(i,g),i}function Dd(i,o,h,g){var S=o.current,I=Mi(),B=Ql(S);return h=Zy(h),o.context===null?o.context=h:o.pendingContext=h,o=Er(I,B),o.payload={element:i},g=g===void 0?null:g,g!==null&&(o.callback=g),i=Yr(S,o,B),i!==null&&(Ro(i,S,B,I),So(i,S,B)),B}function Ld(i){return i=i.current,i.child?(i.child.tag===5,i.child.stateNode):null}function ev(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var h=i.retryLane;i.retryLane=h!==0&&h<o?h:o}}function kp(i,o){ev(i,o),(i=i.alternate)&&ev(i,o)}function t1(){return null}var tv=typeof reportError=="function"?reportError:function(i){console.error(i)};function Mp(i){this._internalRoot=i}Nd.prototype.render=Mp.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Dd(i,o,null,null)},Nd.prototype.unmount=Mp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Wu(function(){Dd(null,i,null,null)}),o[Ur]=null}};function Nd(i){this._internalRoot=i}Nd.prototype.unstable_scheduleHydration=function(i){if(i){var o=El();i={blockedOn:null,target:i,priority:o};for(var h=0;h<Kt.length&&o!==0&&o<Kt[h].priority;h++);Kt.splice(h,0,i),h===0&&Ha(i)}};function Op(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Fd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function rv(){}function r1(i,o,h,g,S){if(S){if(typeof g=="function"){var I=g;g=function(){var Re=Ld(B);I.call(Re)}}var B=Jy(o,g,i,0,null,!1,!1,"",rv);return i._reactRootContainer=B,i[Ur]=B.current,kl(i.nodeType===8?i.parentNode:i),Wu(),B}for(;S=i.lastChild;)i.removeChild(S);if(typeof g=="function"){var Q=g;g=function(){var Re=Ld(oe);Q.call(Re)}}var oe=Rp(i,0,!1,null,null,!1,!1,"",rv);return i._reactRootContainer=oe,i[Ur]=oe.current,kl(i.nodeType===8?i.parentNode:i),Wu(function(){Dd(o,oe,h,g)}),oe}function Bd(i,o,h,g,S){var I=h._reactRootContainer;if(I){var B=I;if(typeof S=="function"){var Q=S;S=function(){var oe=Ld(B);Q.call(oe)}}Dd(o,B,i,S)}else B=r1(h,o,i,S,g);return Ld(B)}fc=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var h=Fs(o.pendingLanes);h!==0&&(Qo(o,h|1),ds(o,nr()),(ar&6)===0&&(Nc=nr()+500,ns()))}break;case 13:Wu(function(){var g=pr(i,1);if(g!==null){var S=Mi();Ro(g,i,1,S)}}),kp(i,1)}},Xt=function(i){if(i.tag===13){var o=pr(i,134217728);if(o!==null){var h=Mi();Ro(o,i,134217728,h)}kp(i,134217728)}},Sl=function(i){if(i.tag===13){var o=Ql(i),h=pr(i,o);if(h!==null){var g=Mi();Ro(h,i,o,g)}kp(i,o)}},El=function(){return $t},Jo=function(i,o){var h=$t;try{return $t=i,o()}finally{$t=h}},ze=function(i,o,h){switch(o){case"input":if(mr(i,h),o=h.name,h.type==="radio"&&o!=null){for(h=i;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<h.length;o++){var g=h[o];if(g!==i&&g.form===i.form){var S=Fl(g);if(!S)throw Error(t(90));Qe(g),mr(g,S)}}}break;case"textarea":Cn(i,h);break;case"select":o=h.value,o!=null&&hr(i,!!h.multiple,o,!1)}},$o=Ep,xi=Wu;var n1={usingClientEntryPoint:!1,Events:[Nl,Za,Fl,$r,In,Ep]},Bh={findFiberByHostInstance:pa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},i1={bundleType:Bh.bundleType,version:Bh.version,rendererPackageName:Bh.rendererPackageName,rendererConfig:Bh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Fi(i),i===null?null:i.stateNode},findFiberByHostInstance:Bh.findFiberByHostInstance||t1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ud=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ud.isDisabled&&Ud.supportsFiber)try{si=Ud.inject(i1),Wt=Ud}catch{}}return fs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n1,fs.createPortal=function(i,o){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Op(o))throw Error(t(200));return e1(i,o,null,h)},fs.createRoot=function(i,o){if(!Op(i))throw Error(t(299));var h=!1,g="",S=tv;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),o=Rp(i,1,!1,null,null,h,!1,g,S),i[Ur]=o.current,kl(i.nodeType===8?i.parentNode:i),new Mp(o)},fs.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Fi(o),i=i===null?null:i.stateNode,i},fs.flushSync=function(i){return Wu(i)},fs.hydrate=function(i,o,h){if(!Fd(o))throw Error(t(200));return Bd(null,i,o,!0,h)},fs.hydrateRoot=function(i,o,h){if(!Op(i))throw Error(t(405));var g=h!=null&&h.hydratedSources||null,S=!1,I="",B=tv;if(h!=null&&(h.unstable_strictMode===!0&&(S=!0),h.identifierPrefix!==void 0&&(I=h.identifierPrefix),h.onRecoverableError!==void 0&&(B=h.onRecoverableError)),o=Jy(o,null,i,1,h??null,S,!1,I,B),i[Ur]=o.current,kl(i),g)for(i=0;i<g.length;i++)h=g[i],S=h._getVersion,S=S(h._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[h,S]:o.mutableSourceEagerHydrationData.push(h,S);return new Nd(o)},fs.render=function(i,o,h){if(!Fd(o))throw Error(t(200));return Bd(null,i,o,!1,h)},fs.unmountComponentAtNode=function(i){if(!Fd(i))throw Error(t(40));return i._reactRootContainer?(Wu(function(){Bd(null,null,i,!1,function(){i._reactRootContainer=null,i[Ur]=null})}),!0):!1},fs.unstable_batchedUpdates=Ep,fs.unstable_renderSubtreeIntoContainer=function(i,o,h,g){if(!Fd(h))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Bd(i,o,h,!1,g)},fs.version="18.3.1-next-f1338f8080-20240426",fs}var cv;function d1(){if(cv)return Np.exports;cv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Np.exports=h1(),Np.exports}var hv;function f1(){if(hv)return Gd;hv=1;var n=d1();return Gd.createRoot=n.createRoot,Gd.hydrateRoot=n.hydrateRoot,Gd}var p1=f1();const m1=sh(p1);function g1(n){return new Worker("/LuckyRepo/assets/logic.worker-B7OYqbrk.js",{name:n?.name})}let rh=class Wh{static instance;logic;sharedBuffer;sharedView;isInitialized=!1;activeStateName=null;activeInstanceId=null;constructor(){if(this.logic=new g1,typeof SharedArrayBuffer>"u")throw new Error("COOP/COEP headers missing for SharedArrayBuffer.");this.logic.onerror=e=>console.error("Logic Worker Error:",e)}static getInstance(){return Wh.instance||(Wh.instance=new Wh),Wh.instance}setupBuffer(e,t=!1){this.isInitialized=!1;const r=e.BUFFER_SIZE*4;this.sharedBuffer=new SharedArrayBuffer(r),new Float32Array(this.sharedBuffer).fill(0),this.sharedView=new Float32Array(this.sharedBuffer),this.logic.postMessage({type:"INIT_SAB",payload:{buffer:this.sharedBuffer}}),this.isInitialized=!0}prepareForState(e){const t=crypto.randomUUID();return this.activeStateName!==e&&(this.isInitialized=!1),this.activeInstanceId=t,this.activeStateName=e,t}createState(e,t=!1){this.logic.postMessage({type:"CREATE_STATE",stateName:e,payload:{force:t}})}terminateState(e,t){t&&t!==this.activeInstanceId||(this.activeStateName===e&&(this.activeStateName=null,this.activeInstanceId=null,this.isInitialized=!1),this.logic.postMessage({type:"TERMINATE_STATE",stateName:e}))}sendInput(e,t,r={}){this.logic.postMessage({type:"INPUT",stateName:e,payload:{action:t,...r}})}tick(e,t,r){!this.isInitialized||!this.sharedView||e!==this.activeStateName||this.logic.postMessage({type:"TICK",stateName:e,frameCount:t,fps:r})}forceClearWorker(){this.isInitialized=!1,this.activeStateName=null,this.activeInstanceId=null,this.logic.postMessage({type:"TERMINATE_ALL"})}};function y1(n){return new Worker("/LuckyRepo/assets/view.worker-C-6Y4eVh.js",{name:n?.name})}class Fo{static instance;worker;sharedBuffer;sharedView;isInitialized=!1;activeStateName=null;activeInstanceId=null;constructor(){this.worker=new y1,this.worker.onerror=e=>console.error("View Worker Error:",e)}static getInstance(){return Fo.instance||(Fo.instance=new Fo),Fo.instance}setupBuffers(e,t){this.isInitialized=!1;const r=t.BUFFER_SIZE*4;this.sharedBuffer=new SharedArrayBuffer(r),this.sharedView=new Float32Array(this.sharedBuffer),this.sharedView.fill(0),this.worker.postMessage({type:"INIT_SABS",payload:{inputBuffer:e,outputBuffer:this.sharedBuffer}}),this.isInitialized=!0}prepareForState(e){const t=crypto.randomUUID();return this.activeStateName!==e&&(this.isInitialized=!1),this.activeInstanceId=t,this.activeStateName=e,t}createState(e){this.worker.postMessage({type:"CREATE_STATE",stateName:e})}terminateState(e,t){t&&t!==this.activeInstanceId||(this.activeStateName===e&&(this.activeStateName=null,this.activeInstanceId=null,this.isInitialized=!1),this.worker.postMessage({type:"TERMINATE_STATE",stateName:e}))}tick(e,t,r){!this.isInitialized||!this.sharedView||e!==this.activeStateName||this.worker.postMessage({type:"TICK",stateName:e,dt:t,frameCount:r})}forceClearWorker(){this.isInitialized=!1,this.activeStateName=null,this.activeInstanceId=null,this.worker.postMessage({type:"TERMINATE_ALL"})}sendInput(e,t,r={}){this.worker.postMessage({type:"INPUT",stateName:e,payload:{action:t,...r}})}loadSnapshot(e,t){this.worker.postMessage({type:"INPUT",stateName:e,payload:{action:"LOAD_SNAPSHOT",data:t}})}}class ou{static instance;isHoveringButton=!1;isMouseDown=!1;activeKeys=new Set;constructor(){this.setupGlobalListeners()}static getInstance(){return ou.instance||(ou.instance=new ou),ou.instance}getSnapshot(){return{isHoveringButton:this.isHoveringButton,isMouseDown:this.isMouseDown,keys:new Set(this.activeKeys)}}isKeyDown(e){return this.activeKeys.has(e.toUpperCase())}reset(){this.activeKeys.clear(),this.isMouseDown=!1,this.isHoveringButton=!1}setupGlobalListeners(){window.addEventListener("keydown",e=>{this.activeKeys.add(e.key.toUpperCase())}),window.addEventListener("keyup",e=>{this.activeKeys.delete(e.key.toUpperCase())}),window.addEventListener("mousedown",()=>{this.isMouseDown=!0}),window.addEventListener("mouseup",()=>{this.isMouseDown=!1}),window.addEventListener("mouseover",e=>{const t=e.target;this.isHoveringButton=!!t.closest("button, .interactable")}),window.addEventListener("blur",()=>{this.reset()})}}class au{static instance;TARGET_FPS=60;MS_PER_FRAME=1e3/this.TARGET_FPS;lastFrameTime=0;isRunning=!1;requestRef=0;frameCount=0;fps=0;lastFpsUpdate=0;framesSinceLastUpdate=0;constructor(){}static getInstance(){return au.instance||(au.instance=new au),au.instance}start(){this.isRunning||(this.isRunning=!0,this.lastFrameTime=performance.now(),this.lastFpsUpdate=performance.now(),ou.getInstance(),this.requestRef=requestAnimationFrame(this.loop),console.log("[Engine] Core Loop Started"))}stop(){this.isRunning=!1,cancelAnimationFrame(this.requestRef),console.log("[Engine] Core Loop Stopped")}loop=e=>{if(!this.isRunning)return;const t=e-this.lastFrameTime;if(t<this.MS_PER_FRAME){this.requestRef=requestAnimationFrame(this.loop);return}this.lastFrameTime=e-t%this.MS_PER_FRAME;const r=Ar.getInstance();if(r.stack.length===0){this.requestRef=requestAnimationFrame(this.loop);return}this.framesSinceLastUpdate++,e>this.lastFpsUpdate+1e3&&(this.fps=Math.round(this.framesSinceLastUpdate*1e3/(e-this.lastFpsUpdate)),this.lastFpsUpdate=e,this.framesSinceLastUpdate=0),this.dispatchLogicTick(r),this.dispatchViewTick(r,this.MS_PER_FRAME),r.updateAll(this.MS_PER_FRAME,this.frameCount),this.frameCount++,this.requestRef=requestAnimationFrame(this.loop)};dispatchLogicTick(e){const t=rh.getInstance(),r=t.activeStateName;if(!r)return;const a=e.stack.find(m=>m.name===r);if(!a||!a.isUpdating)return;const f=ou.getInstance().getSnapshot();t.sendInput(r,"SYNC_INPUT",{keys:Array.from(f.keys),isMouseDown:f.isMouseDown,isHovering:f.isHoveringButton}),t.tick(r,this.frameCount,this.fps||60)}dispatchViewTick(e,t){const r=Fo.getInstance(),s=r.activeStateName;if(!s)return;const c=e.stack.find(m=>m.name===s);if(!c||!c.isRendering)return;const f=c.isUpdating?t:0;r.tick(s,f,this.frameCount)}}let oh=class{isUpdating=!1;isRendering=!1;priority=0;isInitialized=!1;update(e,t){}};const v1=({isFinished:n,onTransitionComplete:e})=>(Pt.useEffect(()=>{n&&e()},[n,e]),_e.jsx("div",{style:{position:"absolute",inset:0,background:"#000",display:"flex",alignItems:"center",justifyContent:"center"},children:_e.jsx("div",{style:{width:"100%",height:"100%",maxWidth:"calc(100vh * (16 / 9))",maxHeight:"calc(100vw * (9 / 16))",aspectRatio:"16 / 9",backgroundColor:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center"},children:_e.jsx("div",{style:{color:"#000",fontFamily:"monospace",fontWeight:"bold"},children:"LOADING..."})})}));var hc=(n=>(n[n.WEBGL_LEGACY=0]="WEBGL_LEGACY",n[n.WEBGL=1]="WEBGL",n[n.WEBGL2=2]="WEBGL2",n))(hc||{}),V0=(n=>(n[n.UNKNOWN=0]="UNKNOWN",n[n.WEBGL=1]="WEBGL",n[n.CANVAS=2]="CANVAS",n))(V0||{}),gg=(n=>(n[n.COLOR=16384]="COLOR",n[n.DEPTH=256]="DEPTH",n[n.STENCIL=1024]="STENCIL",n))(gg||{}),Dt=(n=>(n[n.NORMAL=0]="NORMAL",n[n.ADD=1]="ADD",n[n.MULTIPLY=2]="MULTIPLY",n[n.SCREEN=3]="SCREEN",n[n.OVERLAY=4]="OVERLAY",n[n.DARKEN=5]="DARKEN",n[n.LIGHTEN=6]="LIGHTEN",n[n.COLOR_DODGE=7]="COLOR_DODGE",n[n.COLOR_BURN=8]="COLOR_BURN",n[n.HARD_LIGHT=9]="HARD_LIGHT",n[n.SOFT_LIGHT=10]="SOFT_LIGHT",n[n.DIFFERENCE=11]="DIFFERENCE",n[n.EXCLUSION=12]="EXCLUSION",n[n.HUE=13]="HUE",n[n.SATURATION=14]="SATURATION",n[n.COLOR=15]="COLOR",n[n.LUMINOSITY=16]="LUMINOSITY",n[n.NORMAL_NPM=17]="NORMAL_NPM",n[n.ADD_NPM=18]="ADD_NPM",n[n.SCREEN_NPM=19]="SCREEN_NPM",n[n.NONE=20]="NONE",n[n.SRC_OVER=0]="SRC_OVER",n[n.SRC_IN=21]="SRC_IN",n[n.SRC_OUT=22]="SRC_OUT",n[n.SRC_ATOP=23]="SRC_ATOP",n[n.DST_OVER=24]="DST_OVER",n[n.DST_IN=25]="DST_IN",n[n.DST_OUT=26]="DST_OUT",n[n.DST_ATOP=27]="DST_ATOP",n[n.ERASE=26]="ERASE",n[n.SUBTRACT=28]="SUBTRACT",n[n.XOR=29]="XOR",n))(Dt||{}),Bo=(n=>(n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",n))(Bo||{}),tt=(n=>(n[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.RG=33319]="RG",n[n.RED=6403]="RED",n[n.RGBA_INTEGER=36249]="RGBA_INTEGER",n[n.RGB_INTEGER=36248]="RGB_INTEGER",n[n.RG_INTEGER=33320]="RG_INTEGER",n[n.RED_INTEGER=36244]="RED_INTEGER",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n))(tt||{}),Yc=(n=>(n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n))(Yc||{}),It=(n=>(n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",n[n.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",n[n.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",n[n.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",n[n.BYTE=5120]="BYTE",n[n.SHORT=5122]="SHORT",n[n.INT=5124]="INT",n[n.FLOAT=5126]="FLOAT",n[n.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",n[n.HALF_FLOAT=36193]="HALF_FLOAT",n))(It||{}),pt=(n=>(n[n.FLOAT=0]="FLOAT",n[n.INT=1]="INT",n[n.UINT=2]="UINT",n))(pt||{}),pl=(n=>(n[n.NEAREST=0]="NEAREST",n[n.LINEAR=1]="LINEAR",n))(pl||{}),yl=(n=>(n[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n))(yl||{}),Na=(n=>(n[n.OFF=0]="OFF",n[n.POW2=1]="POW2",n[n.ON=2]="ON",n[n.ON_MANUAL=3]="ON_MANUAL",n))(Na||{}),ps=(n=>(n[n.NPM=0]="NPM",n[n.UNPACK=1]="UNPACK",n[n.PMA=2]="PMA",n[n.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",n[n.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",n[n.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",n))(ps||{}),Ia=(n=>(n[n.NO=0]="NO",n[n.YES=1]="YES",n[n.AUTO=2]="AUTO",n[n.BLEND=0]="BLEND",n[n.CLEAR=1]="CLEAR",n[n.BLIT=2]="BLIT",n))(Ia||{}),hy=(n=>(n[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL",n))(hy||{}),io=(n=>(n.LOW="lowp",n.MEDIUM="mediump",n.HIGH="highp",n))(io||{}),An=(n=>(n[n.NONE=0]="NONE",n[n.SCISSOR=1]="SCISSOR",n[n.STENCIL=2]="STENCIL",n[n.SPRITE=3]="SPRITE",n[n.COLOR=4]="COLOR",n))(An||{}),_n=(n=>(n[n.NONE=0]="NONE",n[n.LOW=2]="LOW",n[n.MEDIUM=4]="MEDIUM",n[n.HIGH=8]="HIGH",n))(_n||{}),Da=(n=>(n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",n))(Da||{});const _1={createCanvas:(n,e)=>{const t=document.createElement("canvas");return t.width=n,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,e)=>fetch(n,e),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")},mt={ADAPTER:_1,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Up=/iPhone/i,dv=/iPod/i,fv=/iPad/i,pv=/\biOS-universal(?:.+)Mac\b/i,Gp=/\bAndroid(?:.+)Mobile\b/i,mv=/Android/i,Bc=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,jd=/Silk/i,hl=/Windows Phone/i,gv=/\bWindows(?:.+)ARM\b/i,yv=/BlackBerry/i,vv=/BB10/i,_v=/Opera Mini/i,xv=/\b(CriOS|Chrome)(?:.+)Mobile/i,wv=/Mobile(?:.+)Firefox\b/i,bv=function(n){return typeof n<"u"&&n.platform==="MacIntel"&&typeof n.maxTouchPoints=="number"&&n.maxTouchPoints>1&&typeof MSStream>"u"};function x1(n){return function(e){return e.test(n)}}function Sv(n){var e={userAgent:"",platform:"",maxTouchPoints:0};!n&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof n=="string"?e.userAgent=n:n&&n.userAgent&&(e={userAgent:n.userAgent,platform:n.platform,maxTouchPoints:n.maxTouchPoints||0});var t=e.userAgent,r=t.split("[FBAN");typeof r[1]<"u"&&(t=r[0]),r=t.split("Twitter"),typeof r[1]<"u"&&(t=r[0]);var s=x1(t),a={apple:{phone:s(Up)&&!s(hl),ipod:s(dv),tablet:!s(Up)&&(s(fv)||bv(e))&&!s(hl),universal:s(pv),device:(s(Up)||s(dv)||s(fv)||s(pv)||bv(e))&&!s(hl)},amazon:{phone:s(Bc),tablet:!s(Bc)&&s(jd),device:s(Bc)||s(jd)},android:{phone:!s(hl)&&s(Bc)||!s(hl)&&s(Gp),tablet:!s(hl)&&!s(Bc)&&!s(Gp)&&(s(jd)||s(mv)),device:!s(hl)&&(s(Bc)||s(jd)||s(Gp)||s(mv))||s(/\bokhttp\b/i)},windows:{phone:s(hl),tablet:s(gv),device:s(hl)||s(gv)},other:{blackberry:s(yv),blackberry10:s(vv),opera:s(_v),firefox:s(wv),chrome:s(xv),device:s(yv)||s(vv)||s(_v)||s(wv)||s(xv)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}const w1=Sv.default??Sv,ml=w1(globalThis.navigator);mt.RETINA_PREFIX=/@([0-9\.]+)x/;mt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var jp={exports:{}},Ev;function b1(){return Ev||(Ev=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function s(m,_,w){this.fn=m,this.context=_,this.once=w||!1}function a(m,_,w,d,v){if(typeof w!="function")throw new TypeError("The listener must be a function");var b=new s(w,d||m,v),T=t?t+_:_;return m._events[T]?m._events[T].fn?m._events[T]=[m._events[T],b]:m._events[T].push(b):(m._events[T]=b,m._eventsCount++),m}function c(m,_){--m._eventsCount===0?m._events=new r:delete m._events[_]}function f(){this._events=new r,this._eventsCount=0}f.prototype.eventNames=function(){var _=[],w,d;if(this._eventsCount===0)return _;for(d in w=this._events)e.call(w,d)&&_.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(w)):_},f.prototype.listeners=function(_){var w=t?t+_:_,d=this._events[w];if(!d)return[];if(d.fn)return[d.fn];for(var v=0,b=d.length,T=new Array(b);v<b;v++)T[v]=d[v].fn;return T},f.prototype.listenerCount=function(_){var w=t?t+_:_,d=this._events[w];return d?d.fn?1:d.length:0},f.prototype.emit=function(_,w,d,v,b,T){var R=t?t+_:_;if(!this._events[R])return!1;var k=this._events[R],L=arguments.length,W,z;if(k.fn){switch(k.once&&this.removeListener(_,k.fn,void 0,!0),L){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,w),!0;case 3:return k.fn.call(k.context,w,d),!0;case 4:return k.fn.call(k.context,w,d,v),!0;case 5:return k.fn.call(k.context,w,d,v,b),!0;case 6:return k.fn.call(k.context,w,d,v,b,T),!0}for(z=1,W=new Array(L-1);z<L;z++)W[z-1]=arguments[z];k.fn.apply(k.context,W)}else{var te=k.length,K;for(z=0;z<te;z++)switch(k[z].once&&this.removeListener(_,k[z].fn,void 0,!0),L){case 1:k[z].fn.call(k[z].context);break;case 2:k[z].fn.call(k[z].context,w);break;case 3:k[z].fn.call(k[z].context,w,d);break;case 4:k[z].fn.call(k[z].context,w,d,v);break;default:if(!W)for(K=1,W=new Array(L-1);K<L;K++)W[K-1]=arguments[K];k[z].fn.apply(k[z].context,W)}}return!0},f.prototype.on=function(_,w,d){return a(this,_,w,d,!1)},f.prototype.once=function(_,w,d){return a(this,_,w,d,!0)},f.prototype.removeListener=function(_,w,d,v){var b=t?t+_:_;if(!this._events[b])return this;if(!w)return c(this,b),this;var T=this._events[b];if(T.fn)T.fn===w&&(!v||T.once)&&(!d||T.context===d)&&c(this,b);else{for(var R=0,k=[],L=T.length;R<L;R++)(T[R].fn!==w||v&&!T[R].once||d&&T[R].context!==d)&&k.push(T[R]);k.length?this._events[b]=k.length===1?k[0]:k:c(this,b)}return this},f.prototype.removeAllListeners=function(_){var w;return _?(w=t?t+_:_,this._events[w]&&c(this,w)):(this._events=new r,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=t,f.EventEmitter=f,n.exports=f})(jp)),jp.exports}var S1=b1();const ld=sh(S1);var zd={exports:{}},Tv;function E1(){if(Tv)return zd.exports;Tv=1,zd.exports=n,zd.exports.default=n;function n(H,V,D){D=D||2;var Y=V&&V.length,j=Y?V[0]*D:H.length,U=e(H,0,j,D,!0),q=[];if(!U||U.next===U.prev)return q;var ce,Ae,Me,Fe,je,Ke,it;if(Y&&(U=m(H,V,U,D)),H.length>80*D){ce=Me=H[0],Ae=Fe=H[1];for(var Se=D;Se<j;Se+=D)je=H[Se],Ke=H[Se+1],je<ce&&(ce=je),Ke<Ae&&(Ae=Ke),je>Me&&(Me=je),Ke>Fe&&(Fe=Ke);it=Math.max(Me-ce,Fe-Ae),it=it!==0?32767/it:0}return r(U,q,D,ce,Ae,it,0),q}function e(H,V,D,Y,j){var U,q;if(j===qe(H,V,D,Y)>0)for(U=V;U<D;U+=Y)q=ge(U,H[U],H[U+1],q);else for(U=D-Y;U>=V;U-=Y)q=ge(U,H[U],H[U+1],q);return q&&te(q,q.next)&&(ve(q),q=q.next),q}function t(H,V){if(!H)return H;V||(V=H);var D=H,Y;do if(Y=!1,!D.steiner&&(te(D,D.next)||z(D.prev,D,D.next)===0)){if(ve(D),D=V=D.prev,D===D.next)break;Y=!0}else D=D.next;while(Y||D!==V);return V}function r(H,V,D,Y,j,U,q){if(H){!q&&U&&b(H,Y,j,U);for(var ce=H,Ae,Me;H.prev!==H.next;){if(Ae=H.prev,Me=H.next,U?a(H,Y,j,U):s(H)){V.push(Ae.i/D|0),V.push(H.i/D|0),V.push(Me.i/D|0),ve(H),H=Me.next,ce=Me.next;continue}if(H=Me,H===ce){q?q===1?(H=c(t(H),V,D),r(H,V,D,Y,j,U,2)):q===2&&f(H,V,D,Y,j,U):r(t(H),V,D,Y,j,U,1);break}}}}function s(H){var V=H.prev,D=H,Y=H.next;if(z(V,D,Y)>=0)return!1;for(var j=V.x,U=D.x,q=Y.x,ce=V.y,Ae=D.y,Me=Y.y,Fe=j<U?j<q?j:q:U<q?U:q,je=ce<Ae?ce<Me?ce:Me:Ae<Me?Ae:Me,Ke=j>U?j>q?j:q:U>q?U:q,it=ce>Ae?ce>Me?ce:Me:Ae>Me?Ae:Me,Se=Y.next;Se!==V;){if(Se.x>=Fe&&Se.x<=Ke&&Se.y>=je&&Se.y<=it&&L(j,ce,U,Ae,q,Me,Se.x,Se.y)&&z(Se.prev,Se,Se.next)>=0)return!1;Se=Se.next}return!0}function a(H,V,D,Y){var j=H.prev,U=H,q=H.next;if(z(j,U,q)>=0)return!1;for(var ce=j.x,Ae=U.x,Me=q.x,Fe=j.y,je=U.y,Ke=q.y,it=ce<Ae?ce<Me?ce:Me:Ae<Me?Ae:Me,Se=Fe<je?Fe<Ke?Fe:Ke:je<Ke?je:Ke,ot=ce>Ae?ce>Me?ce:Me:Ae>Me?Ae:Me,Qe=Fe>je?Fe>Ke?Fe:Ke:je>Ke?je:Ke,gt=R(it,Se,V,D,Y),Bt=R(ot,Qe,V,D,Y),dt=H.prevZ,vt=H.nextZ;dt&&dt.z>=gt&&vt&&vt.z<=Bt;){if(dt.x>=it&&dt.x<=ot&&dt.y>=Se&&dt.y<=Qe&&dt!==j&&dt!==q&&L(ce,Fe,Ae,je,Me,Ke,dt.x,dt.y)&&z(dt.prev,dt,dt.next)>=0||(dt=dt.prevZ,vt.x>=it&&vt.x<=ot&&vt.y>=Se&&vt.y<=Qe&&vt!==j&&vt!==q&&L(ce,Fe,Ae,je,Me,Ke,vt.x,vt.y)&&z(vt.prev,vt,vt.next)>=0))return!1;vt=vt.nextZ}for(;dt&&dt.z>=gt;){if(dt.x>=it&&dt.x<=ot&&dt.y>=Se&&dt.y<=Qe&&dt!==j&&dt!==q&&L(ce,Fe,Ae,je,Me,Ke,dt.x,dt.y)&&z(dt.prev,dt,dt.next)>=0)return!1;dt=dt.prevZ}for(;vt&&vt.z<=Bt;){if(vt.x>=it&&vt.x<=ot&&vt.y>=Se&&vt.y<=Qe&&vt!==j&&vt!==q&&L(ce,Fe,Ae,je,Me,Ke,vt.x,vt.y)&&z(vt.prev,vt,vt.next)>=0)return!1;vt=vt.nextZ}return!0}function c(H,V,D){var Y=H;do{var j=Y.prev,U=Y.next.next;!te(j,U)&&K(j,Y,Y.next,U)&&ye(j,U)&&ye(U,j)&&(V.push(j.i/D|0),V.push(Y.i/D|0),V.push(U.i/D|0),ve(Y),ve(Y.next),Y=H=U),Y=Y.next}while(Y!==H);return t(Y)}function f(H,V,D,Y,j,U){var q=H;do{for(var ce=q.next.next;ce!==q.prev;){if(q.i!==ce.i&&W(q,ce)){var Ae=Pe(q,ce);q=t(q,q.next),Ae=t(Ae,Ae.next),r(q,V,D,Y,j,U,0),r(Ae,V,D,Y,j,U,0);return}ce=ce.next}q=q.next}while(q!==H)}function m(H,V,D,Y){var j=[],U,q,ce,Ae,Me;for(U=0,q=V.length;U<q;U++)ce=V[U]*Y,Ae=U<q-1?V[U+1]*Y:H.length,Me=e(H,ce,Ae,Y,!1),Me===Me.next&&(Me.steiner=!0),j.push(k(Me));for(j.sort(_),U=0;U<j.length;U++)D=w(j[U],D);return D}function _(H,V){return H.x-V.x}function w(H,V){var D=d(H,V);if(!D)return V;var Y=Pe(D,H);return t(Y,Y.next),t(D,D.next)}function d(H,V){var D=V,Y=H.x,j=H.y,U=-1/0,q;do{if(j<=D.y&&j>=D.next.y&&D.next.y!==D.y){var ce=D.x+(j-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if(ce<=Y&&ce>U&&(U=ce,q=D.x<D.next.x?D:D.next,ce===Y))return q}D=D.next}while(D!==V);if(!q)return null;var Ae=q,Me=q.x,Fe=q.y,je=1/0,Ke;D=q;do Y>=D.x&&D.x>=Me&&Y!==D.x&&L(j<Fe?Y:U,j,Me,Fe,j<Fe?U:Y,j,D.x,D.y)&&(Ke=Math.abs(j-D.y)/(Y-D.x),ye(D,H)&&(Ke<je||Ke===je&&(D.x>q.x||D.x===q.x&&v(q,D)))&&(q=D,je=Ke)),D=D.next;while(D!==Ae);return q}function v(H,V){return z(H.prev,H,V.prev)<0&&z(V.next,H,H.next)<0}function b(H,V,D,Y){var j=H;do j.z===0&&(j.z=R(j.x,j.y,V,D,Y)),j.prevZ=j.prev,j.nextZ=j.next,j=j.next;while(j!==H);j.prevZ.nextZ=null,j.prevZ=null,T(j)}function T(H){var V,D,Y,j,U,q,ce,Ae,Me=1;do{for(D=H,H=null,U=null,q=0;D;){for(q++,Y=D,ce=0,V=0;V<Me&&(ce++,Y=Y.nextZ,!!Y);V++);for(Ae=Me;ce>0||Ae>0&&Y;)ce!==0&&(Ae===0||!Y||D.z<=Y.z)?(j=D,D=D.nextZ,ce--):(j=Y,Y=Y.nextZ,Ae--),U?U.nextZ=j:H=j,j.prevZ=U,U=j;D=Y}U.nextZ=null,Me*=2}while(q>1);return H}function R(H,V,D,Y,j){return H=(H-D)*j|0,V=(V-Y)*j|0,H=(H|H<<8)&16711935,H=(H|H<<4)&252645135,H=(H|H<<2)&858993459,H=(H|H<<1)&1431655765,V=(V|V<<8)&16711935,V=(V|V<<4)&252645135,V=(V|V<<2)&858993459,V=(V|V<<1)&1431655765,H|V<<1}function k(H){var V=H,D=H;do(V.x<D.x||V.x===D.x&&V.y<D.y)&&(D=V),V=V.next;while(V!==H);return D}function L(H,V,D,Y,j,U,q,ce){return(j-q)*(V-ce)>=(H-q)*(U-ce)&&(H-q)*(Y-ce)>=(D-q)*(V-ce)&&(D-q)*(U-ce)>=(j-q)*(Y-ce)}function W(H,V){return H.next.i!==V.i&&H.prev.i!==V.i&&!ie(H,V)&&(ye(H,V)&&ye(V,H)&&Oe(H,V)&&(z(H.prev,H,V.prev)||z(H,V.prev,V))||te(H,V)&&z(H.prev,H,H.next)>0&&z(V.prev,V,V.next)>0)}function z(H,V,D){return(V.y-H.y)*(D.x-V.x)-(V.x-H.x)*(D.y-V.y)}function te(H,V){return H.x===V.x&&H.y===V.y}function K(H,V,D,Y){var j=F(z(H,V,D)),U=F(z(H,V,Y)),q=F(z(D,Y,H)),ce=F(z(D,Y,V));return!!(j!==U&&q!==ce||j===0&&de(H,D,V)||U===0&&de(H,Y,V)||q===0&&de(D,H,Y)||ce===0&&de(D,V,Y))}function de(H,V,D){return V.x<=Math.max(H.x,D.x)&&V.x>=Math.min(H.x,D.x)&&V.y<=Math.max(H.y,D.y)&&V.y>=Math.min(H.y,D.y)}function F(H){return H>0?1:H<0?-1:0}function ie(H,V){var D=H;do{if(D.i!==H.i&&D.next.i!==H.i&&D.i!==V.i&&D.next.i!==V.i&&K(D,D.next,H,V))return!0;D=D.next}while(D!==H);return!1}function ye(H,V){return z(H.prev,H,H.next)<0?z(H,V,H.next)>=0&&z(H,H.prev,V)>=0:z(H,V,H.prev)<0||z(H,H.next,V)<0}function Oe(H,V){var D=H,Y=!1,j=(H.x+V.x)/2,U=(H.y+V.y)/2;do D.y>U!=D.next.y>U&&D.next.y!==D.y&&j<(D.next.x-D.x)*(U-D.y)/(D.next.y-D.y)+D.x&&(Y=!Y),D=D.next;while(D!==H);return Y}function Pe(H,V){var D=new we(H.i,H.x,H.y),Y=new we(V.i,V.x,V.y),j=H.next,U=V.prev;return H.next=V,V.prev=H,D.next=j,j.prev=D,Y.next=D,D.prev=Y,U.next=Y,Y.prev=U,Y}function ge(H,V,D,Y){var j=new we(H,V,D);return Y?(j.next=Y.next,j.prev=Y,Y.next.prev=j,Y.next=j):(j.prev=j,j.next=j),j}function ve(H){H.next.prev=H.prev,H.prev.next=H.next,H.prevZ&&(H.prevZ.nextZ=H.nextZ),H.nextZ&&(H.nextZ.prevZ=H.prevZ)}function we(H,V,D){this.i=H,this.x=V,this.y=D,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}n.deviation=function(H,V,D,Y){var j=V&&V.length,U=j?V[0]*D:H.length,q=Math.abs(qe(H,0,U,D));if(j)for(var ce=0,Ae=V.length;ce<Ae;ce++){var Me=V[ce]*D,Fe=ce<Ae-1?V[ce+1]*D:H.length;q-=Math.abs(qe(H,Me,Fe,D))}var je=0;for(ce=0;ce<Y.length;ce+=3){var Ke=Y[ce]*D,it=Y[ce+1]*D,Se=Y[ce+2]*D;je+=Math.abs((H[Ke]-H[Se])*(H[it+1]-H[Ke+1])-(H[Ke]-H[it])*(H[Se+1]-H[Ke+1]))}return q===0&&je===0?0:Math.abs((je-q)/q)};function qe(H,V,D,Y){for(var j=0,U=V,q=D-Y;U<D;U+=Y)j+=(H[q]-H[U])*(H[U+1]+H[q+1]),q=U;return j}return n.flatten=function(H){for(var V=H[0][0].length,D={vertices:[],holes:[],dimensions:V},Y=0,j=0;j<H.length;j++){for(var U=0;U<H[j].length;U++)for(var q=0;q<V;q++)D.vertices.push(H[j][U][q]);j>0&&(Y+=H[j-1].length,D.holes.push(Y))}return D},zd.exports}var T1=E1();const A1=sh(T1);var Ku={},$h={exports:{}};var C1=$h.exports,Av;function I1(){return Av||(Av=1,(function(n,e){(function(t){var r=e&&!e.nodeType&&e,s=n&&!n.nodeType&&n,a=typeof Pa=="object"&&Pa;(a.global===a||a.window===a||a.self===a)&&(t=a);var c,f=2147483647,m=36,_=1,w=26,d=38,v=700,b=72,T=128,R="-",k=/^xn--/,L=/[^\x20-\x7E]/,W=/[\x2E\u3002\uFF0E\uFF61]/g,z={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},te=m-_,K=Math.floor,de=String.fromCharCode,F;function ie(j){throw new RangeError(z[j])}function ye(j,U){for(var q=j.length,ce=[];q--;)ce[q]=U(j[q]);return ce}function Oe(j,U){var q=j.split("@"),ce="";q.length>1&&(ce=q[0]+"@",j=q[1]),j=j.replace(W,".");var Ae=j.split("."),Me=ye(Ae,U).join(".");return ce+Me}function Pe(j){for(var U=[],q=0,ce=j.length,Ae,Me;q<ce;)Ae=j.charCodeAt(q++),Ae>=55296&&Ae<=56319&&q<ce?(Me=j.charCodeAt(q++),(Me&64512)==56320?U.push(((Ae&1023)<<10)+(Me&1023)+65536):(U.push(Ae),q--)):U.push(Ae);return U}function ge(j){return ye(j,function(U){var q="";return U>65535&&(U-=65536,q+=de(U>>>10&1023|55296),U=56320|U&1023),q+=de(U),q}).join("")}function ve(j){return j-48<10?j-22:j-65<26?j-65:j-97<26?j-97:m}function we(j,U){return j+22+75*(j<26)-((U!=0)<<5)}function qe(j,U,q){var ce=0;for(j=q?K(j/v):j>>1,j+=K(j/U);j>te*w>>1;ce+=m)j=K(j/te);return K(ce+(te+1)*j/(j+d))}function H(j){var U=[],q=j.length,ce,Ae=0,Me=T,Fe=b,je,Ke,it,Se,ot,Qe,gt,Bt,dt;for(je=j.lastIndexOf(R),je<0&&(je=0),Ke=0;Ke<je;++Ke)j.charCodeAt(Ke)>=128&&ie("not-basic"),U.push(j.charCodeAt(Ke));for(it=je>0?je+1:0;it<q;){for(Se=Ae,ot=1,Qe=m;it>=q&&ie("invalid-input"),gt=ve(j.charCodeAt(it++)),(gt>=m||gt>K((f-Ae)/ot))&&ie("overflow"),Ae+=gt*ot,Bt=Qe<=Fe?_:Qe>=Fe+w?w:Qe-Fe,!(gt<Bt);Qe+=m)dt=m-Bt,ot>K(f/dt)&&ie("overflow"),ot*=dt;ce=U.length+1,Fe=qe(Ae-Se,ce,Se==0),K(Ae/ce)>f-Me&&ie("overflow"),Me+=K(Ae/ce),Ae%=ce,U.splice(Ae++,0,Me)}return ge(U)}function V(j){var U,q,ce,Ae,Me,Fe,je,Ke,it,Se,ot,Qe=[],gt,Bt,dt,vt;for(j=Pe(j),gt=j.length,U=T,q=0,Me=b,Fe=0;Fe<gt;++Fe)ot=j[Fe],ot<128&&Qe.push(de(ot));for(ce=Ae=Qe.length,Ae&&Qe.push(R);ce<gt;){for(je=f,Fe=0;Fe<gt;++Fe)ot=j[Fe],ot>=U&&ot<je&&(je=ot);for(Bt=ce+1,je-U>K((f-q)/Bt)&&ie("overflow"),q+=(je-U)*Bt,U=je,Fe=0;Fe<gt;++Fe)if(ot=j[Fe],ot<U&&++q>f&&ie("overflow"),ot==U){for(Ke=q,it=m;Se=it<=Me?_:it>=Me+w?w:it-Me,!(Ke<Se);it+=m)vt=Ke-Se,dt=m-Se,Qe.push(de(we(Se+vt%dt,0))),Ke=K(vt/dt);Qe.push(de(we(Ke,0))),Me=qe(q,Bt,ce==Ae),q=0,++ce}++q,++U}return Qe.join("")}function D(j){return Oe(j,function(U){return k.test(U)?H(U.slice(4).toLowerCase()):U})}function Y(j){return Oe(j,function(U){return L.test(U)?"xn--"+V(U):U})}if(c={version:"1.4.1",ucs2:{decode:Pe,encode:ge},decode:H,encode:V,toASCII:Y,toUnicode:D},r&&s)if(n.exports==r)s.exports=c;else for(F in c)c.hasOwnProperty(F)&&(r[F]=c[F]);else t.punycode=c})(C1)})($h,$h.exports)),$h.exports}var zp,Cv;function ah(){return Cv||(Cv=1,zp=TypeError),zp}const P1={},R1=Object.freeze(Object.defineProperty({__proto__:null,default:P1},Symbol.toStringTag,{value:"Module"})),k1=H0(R1);var Hp,Iv;function jf(){if(Iv)return Hp;Iv=1;var n=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=n&&e&&typeof e.get=="function"?e.get:null,r=n&&Map.prototype.forEach,s=typeof Set=="function"&&Set.prototype,a=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=s&&a&&typeof a.get=="function"?a.get:null,f=s&&Set.prototype.forEach,m=typeof WeakMap=="function"&&WeakMap.prototype,_=m?WeakMap.prototype.has:null,w=typeof WeakSet=="function"&&WeakSet.prototype,d=w?WeakSet.prototype.has:null,v=typeof WeakRef=="function"&&WeakRef.prototype,b=v?WeakRef.prototype.deref:null,T=Boolean.prototype.valueOf,R=Object.prototype.toString,k=Function.prototype.toString,L=String.prototype.match,W=String.prototype.slice,z=String.prototype.replace,te=String.prototype.toUpperCase,K=String.prototype.toLowerCase,de=RegExp.prototype.test,F=Array.prototype.concat,ie=Array.prototype.join,ye=Array.prototype.slice,Oe=Math.floor,Pe=typeof BigInt=="function"?BigInt.prototype.valueOf:null,ge=Object.getOwnPropertySymbols,ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,we=typeof Symbol=="function"&&typeof Symbol.iterator=="object",qe=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===we||!0)?Symbol.toStringTag:null,H=Object.prototype.propertyIsEnumerable,V=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(re){return re.__proto__}:null);function D(re,Ie){if(re===1/0||re===-1/0||re!==re||re&&re>-1e3&&re<1e3||de.call(/e/,Ie))return Ie;var Nt=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof re=="number"){var Zt=re<0?-Oe(-re):Oe(re);if(Zt!==re){var ze=String(Zt),kt=W.call(Ie,ze.length+1);return z.call(ze,Nt,"$&_")+"."+z.call(z.call(kt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return z.call(Ie,Nt,"$&_")}var Y=k1,j=Y.custom,U=Bt(j)?j:null,q={__proto__:null,double:'"',single:"'"},ce={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};Hp=function re(Ie,Nt,Zt,ze){var kt=Nt||{};if(mr(kt,"quoteStyle")&&!mr(q,kt.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(mr(kt,"maxStringLength")&&(typeof kt.maxStringLength=="number"?kt.maxStringLength<0&&kt.maxStringLength!==1/0:kt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var mn=mr(kt,"customInspect")?kt.customInspect:!0;if(typeof mn!="boolean"&&mn!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(mr(kt,"indent")&&kt.indent!==null&&kt.indent!=="	"&&!(parseInt(kt.indent,10)===kt.indent&&kt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(mr(kt,"numericSeparator")&&typeof kt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var ei=kt.numericSeparator;if(typeof Ie>"u")return"undefined";if(Ie===null)return"null";if(typeof Ie=="boolean")return Ie?"true":"false";if(typeof Ie=="string")return Zn(Ie,kt);if(typeof Ie=="number"){if(Ie===0)return 1/0/Ie>0?"0":"-0";var $r=String(Ie);return ei?D(Ie,$r):$r}if(typeof Ie=="bigint"){var In=String(Ie)+"n";return ei?D(Ie,In):In}var $o=typeof kt.depth>"u"?5:kt.depth;if(typeof Zt>"u"&&(Zt=0),Zt>=$o&&$o>0&&typeof Ie=="object")return je(Ie)?"[Array]":"[Object]";var xi=ao(kt,Zt);if(typeof ze>"u")ze=[];else if(Nr(ze,Ie)>=0)return"[Circular]";function Mr(Fi,Hn,Ga){if(Hn&&(ze=ye.call(ze),ze.push(Hn)),Ga){var lo={depth:kt.depth};return mr(kt,"quoteStyle")&&(lo.quoteStyle=kt.quoteStyle),re(Fi,lo,Zt+1,ze)}return re(Fi,kt,Zt+1,ze)}if(typeof Ie=="function"&&!it(Ie)){var wi=Li(Ie),Ni=zn(Ie,Mr);return"[Function"+(wi?": "+wi:" (anonymous)")+"]"+(Ni.length>0?" { "+ie.call(Ni,", ")+" }":"")}if(Bt(Ie)){var ys=we?z.call(String(Ie),/^(Symbol\(.*\))_[^)]*$/,"$1"):ve.call(Ie);return typeof Ie=="object"&&!we?Jn(ys):ys}if(pn(Ie)){for(var qt="<"+K.call(String(Ie.nodeName)),br=Ie.attributes||[],ti=0;ti<br.length;ti++)qt+=" "+br[ti].name+"="+Ae(Me(br[ti].value),"double",kt);return qt+=">",Ie.childNodes&&Ie.childNodes.length&&(qt+="..."),qt+="</"+K.call(String(Ie.nodeName))+">",qt}if(je(Ie)){if(Ie.length===0)return"[]";var bi=zn(Ie,Mr);return xi&&!gs(bi)?"["+Ls(bi,xi)+"]":"[ "+ie.call(bi,", ")+" ]"}if(Se(Ie)){var Si=zn(Ie,Mr);return!("cause"in Error.prototype)&&"cause"in Ie&&!H.call(Ie,"cause")?"{ ["+String(Ie)+"] "+ie.call(F.call("[cause]: "+Mr(Ie.cause),Si),", ")+" }":Si.length===0?"["+String(Ie)+"]":"{ ["+String(Ie)+"] "+ie.call(Si,", ")+" }"}if(typeof Ie=="object"&&mn){if(U&&typeof Ie[U]=="function"&&Y)return Y(Ie,{depth:$o-Zt});if(mn!=="symbol"&&typeof Ie.inspect=="function")return Ie.inspect()}if(hr(Ie)){var ri=[];return r&&r.call(Ie,function(Fi,Hn){ri.push(Mr(Hn,Ie,!0)+" => "+Mr(Fi,Ie))}),_i("Map",t.call(Ie),ri,xi)}if(Cn(Ie)){var wl=[];return f&&f.call(Ie,function(Fi){wl.push(Mr(Fi,Ie))}),_i("Set",c.call(Ie),wl,xi)}if(yi(Ie))return vi("WeakMap");if(Os(Ie))return vi("WeakSet");if(jn(Ie))return vi("WeakRef");if(Qe(Ie))return Jn(Mr(Number(Ie)));if(dt(Ie))return Jn(Mr(Pe.call(Ie)));if(gt(Ie))return Jn(T.call(Ie));if(ot(Ie))return Jn(Mr(String(Ie)));if(typeof window<"u"&&Ie===window)return"{ [object Window] }";if(typeof globalThis<"u"&&Ie===globalThis||typeof Pa<"u"&&Ie===Pa)return"{ [object globalThis] }";if(!Ke(Ie)&&!it(Ie)){var ni=zn(Ie,Mr),vs=V?V(Ie)===Object.prototype:Ie instanceof Object||Ie.constructor===Object,Xr=Ie instanceof Object?"":"null prototype",Ns=!vs&&qe&&Object(Ie)===Ie&&qe in Ie?W.call(Cr(Ie),8,-1):Xr?"Object":"",bl=vs||typeof Ie.constructor!="function"?"":Ie.constructor.name?Ie.constructor.name+" ":"",ii=bl+(Ns||Xr?"["+ie.call(F.call([],Ns||[],Xr||[]),": ")+"] ":"");return ni.length===0?ii+"{}":xi?ii+"{"+Ls(ni,xi)+"}":ii+"{ "+ie.call(ni,", ")+" }"}return String(Ie)};function Ae(re,Ie,Nt){var Zt=Nt.quoteStyle||Ie,ze=q[Zt];return ze+re+ze}function Me(re){return z.call(String(re),/"/g,"&quot;")}function Fe(re){return!qe||!(typeof re=="object"&&(qe in re||typeof re[qe]<"u"))}function je(re){return Cr(re)==="[object Array]"&&Fe(re)}function Ke(re){return Cr(re)==="[object Date]"&&Fe(re)}function it(re){return Cr(re)==="[object RegExp]"&&Fe(re)}function Se(re){return Cr(re)==="[object Error]"&&Fe(re)}function ot(re){return Cr(re)==="[object String]"&&Fe(re)}function Qe(re){return Cr(re)==="[object Number]"&&Fe(re)}function gt(re){return Cr(re)==="[object Boolean]"&&Fe(re)}function Bt(re){if(we)return re&&typeof re=="object"&&re instanceof Symbol;if(typeof re=="symbol")return!0;if(!re||typeof re!="object"||!ve)return!1;try{return ve.call(re),!0}catch{}return!1}function dt(re){if(!re||typeof re!="object"||!Pe)return!1;try{return Pe.call(re),!0}catch{}return!1}var vt=Object.prototype.hasOwnProperty||function(re){return re in this};function mr(re,Ie){return vt.call(re,Ie)}function Cr(re){return R.call(re)}function Li(re){if(re.name)return re.name;var Ie=L.call(k.call(re),/^function\s*([\w$]+)/);return Ie?Ie[1]:null}function Nr(re,Ie){if(re.indexOf)return re.indexOf(Ie);for(var Nt=0,Zt=re.length;Nt<Zt;Nt++)if(re[Nt]===Ie)return Nt;return-1}function hr(re){if(!t||!re||typeof re!="object")return!1;try{t.call(re);try{c.call(re)}catch{return!0}return re instanceof Map}catch{}return!1}function yi(re){if(!_||!re||typeof re!="object")return!1;try{_.call(re,_);try{d.call(re,d)}catch{return!0}return re instanceof WeakMap}catch{}return!1}function jn(re){if(!b||!re||typeof re!="object")return!1;try{return b.call(re),!0}catch{}return!1}function Cn(re){if(!c||!re||typeof re!="object")return!1;try{c.call(re);try{t.call(re)}catch{return!0}return re instanceof Set}catch{}return!1}function Os(re){if(!d||!re||typeof re!="object")return!1;try{d.call(re,d);try{_.call(re,_)}catch{return!0}return re instanceof WeakSet}catch{}return!1}function pn(re){return!re||typeof re!="object"?!1:typeof HTMLElement<"u"&&re instanceof HTMLElement?!0:typeof re.nodeName=="string"&&typeof re.getAttribute=="function"}function Zn(re,Ie){if(re.length>Ie.maxStringLength){var Nt=re.length-Ie.maxStringLength,Zt="... "+Nt+" more character"+(Nt>1?"s":"");return Zn(W.call(re,0,Ie.maxStringLength),Ie)+Zt}var ze=ce[Ie.quoteStyle||"single"];ze.lastIndex=0;var kt=z.call(z.call(re,ze,"\\$1"),/[\x00-\x1f]/g,Ds);return Ae(kt,"single",Ie)}function Ds(re){var Ie=re.charCodeAt(0),Nt={8:"b",9:"t",10:"n",12:"f",13:"r"}[Ie];return Nt?"\\"+Nt:"\\x"+(Ie<16?"0":"")+te.call(Ie.toString(16))}function Jn(re){return"Object("+re+")"}function vi(re){return re+" { ? }"}function _i(re,Ie,Nt,Zt){var ze=Zt?Ls(Nt,Zt):ie.call(Nt,", ");return re+" ("+Ie+") {"+ze+"}"}function gs(re){for(var Ie=0;Ie<re.length;Ie++)if(Nr(re[Ie],`
`)>=0)return!1;return!0}function ao(re,Ie){var Nt;if(re.indent==="	")Nt="	";else if(typeof re.indent=="number"&&re.indent>0)Nt=ie.call(Array(re.indent+1)," ");else return null;return{base:Nt,prev:ie.call(Array(Ie+1),Nt)}}function Ls(re,Ie){if(re.length===0)return"";var Nt=`
`+Ie.prev+Ie.base;return Nt+ie.call(re,","+Nt)+`
`+Ie.prev}function zn(re,Ie){var Nt=je(re),Zt=[];if(Nt){Zt.length=re.length;for(var ze=0;ze<re.length;ze++)Zt[ze]=mr(re,ze)?Ie(re[ze],re):""}var kt=typeof ge=="function"?ge(re):[],mn;if(we){mn={};for(var ei=0;ei<kt.length;ei++)mn["$"+kt[ei]]=kt[ei]}for(var $r in re)mr(re,$r)&&(Nt&&String(Number($r))===$r&&$r<re.length||we&&mn["$"+$r]instanceof Symbol||(de.call(/[^\w$]/,$r)?Zt.push(Ie($r,re)+": "+Ie(re[$r],re)):Zt.push($r+": "+Ie(re[$r],re))));if(typeof ge=="function")for(var In=0;In<kt.length;In++)H.call(re,kt[In])&&Zt.push("["+Ie(kt[In])+"]: "+Ie(re[kt[In]],re));return Zt}return Hp}var Vp,Pv;function M1(){if(Pv)return Vp;Pv=1;var n=jf(),e=ah(),t=function(f,m,_){for(var w=f,d;(d=w.next)!=null;w=d)if(d.key===m)return w.next=d.next,_||(d.next=f.next,f.next=d),d},r=function(f,m){if(f){var _=t(f,m);return _&&_.value}},s=function(f,m,_){var w=t(f,m);w?w.value=_:f.next={key:m,next:f.next,value:_}},a=function(f,m){return f?!!t(f,m):!1},c=function(f,m){if(f)return t(f,m,!0)};return Vp=function(){var m,_={assert:function(w){if(!_.has(w))throw new e("Side channel does not contain "+n(w))},delete:function(w){var d=m&&m.next,v=c(m,w);return v&&d&&d===v&&(m=void 0),!!v},get:function(w){return r(m,w)},has:function(w){return a(m,w)},set:function(w,d){m||(m={next:void 0}),s(m,w,d)}};return _},Vp}var Wp,Rv;function W0(){return Rv||(Rv=1,Wp=Object),Wp}var $p,kv;function O1(){return kv||(kv=1,$p=Error),$p}var Xp,Mv;function D1(){return Mv||(Mv=1,Xp=EvalError),Xp}var qp,Ov;function L1(){return Ov||(Ov=1,qp=RangeError),qp}var Kp,Dv;function N1(){return Dv||(Dv=1,Kp=ReferenceError),Kp}var Yp,Lv;function F1(){return Lv||(Lv=1,Yp=SyntaxError),Yp}var Qp,Nv;function B1(){return Nv||(Nv=1,Qp=URIError),Qp}var Zp,Fv;function U1(){return Fv||(Fv=1,Zp=Math.abs),Zp}var Jp,Bv;function G1(){return Bv||(Bv=1,Jp=Math.floor),Jp}var em,Uv;function j1(){return Uv||(Uv=1,em=Math.max),em}var tm,Gv;function z1(){return Gv||(Gv=1,tm=Math.min),tm}var rm,jv;function H1(){return jv||(jv=1,rm=Math.pow),rm}var nm,zv;function V1(){return zv||(zv=1,nm=Math.round),nm}var im,Hv;function W1(){return Hv||(Hv=1,im=Number.isNaN||function(e){return e!==e}),im}var sm,Vv;function $1(){if(Vv)return sm;Vv=1;var n=W1();return sm=function(t){return n(t)||t===0?t:t<0?-1:1},sm}var om,Wv;function X1(){return Wv||(Wv=1,om=Object.getOwnPropertyDescriptor),om}var am,$v;function $0(){if($v)return am;$v=1;var n=X1();if(n)try{n([],"length")}catch{n=null}return am=n,am}var lm,Xv;function q1(){if(Xv)return lm;Xv=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return lm=n,lm}var um,qv;function K1(){return qv||(qv=1,um=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var s=42;e[t]=s;for(var a in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var c=Object.getOwnPropertySymbols(e);if(c.length!==1||c[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var f=Object.getOwnPropertyDescriptor(e,t);if(f.value!==s||f.enumerable!==!0)return!1}return!0}),um}var cm,Kv;function Y1(){if(Kv)return cm;Kv=1;var n=typeof Symbol<"u"&&Symbol,e=K1();return cm=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},cm}var hm,Yv;function X0(){return Yv||(Yv=1,hm=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),hm}var dm,Qv;function q0(){if(Qv)return dm;Qv=1;var n=W0();return dm=n.getPrototypeOf||null,dm}var fm,Zv;function Q1(){if(Zv)return fm;Zv=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",s=function(m,_){for(var w=[],d=0;d<m.length;d+=1)w[d]=m[d];for(var v=0;v<_.length;v+=1)w[v+m.length]=_[v];return w},a=function(m,_){for(var w=[],d=_,v=0;d<m.length;d+=1,v+=1)w[v]=m[d];return w},c=function(f,m){for(var _="",w=0;w<f.length;w+=1)_+=f[w],w+1<f.length&&(_+=m);return _};return fm=function(m){var _=this;if(typeof _!="function"||e.apply(_)!==r)throw new TypeError(n+_);for(var w=a(arguments,1),d,v=function(){if(this instanceof d){var L=_.apply(this,s(w,arguments));return Object(L)===L?L:this}return _.apply(m,s(w,arguments))},b=t(0,_.length-w.length),T=[],R=0;R<b;R++)T[R]="$"+R;if(d=Function("binder","return function ("+c(T,",")+"){ return binder.apply(this,arguments); }")(v),_.prototype){var k=function(){};k.prototype=_.prototype,d.prototype=new k,k.prototype=null}return d},fm}var pm,Jv;function zf(){if(Jv)return pm;Jv=1;var n=Q1();return pm=Function.prototype.bind||n,pm}var mm,e_;function dy(){return e_||(e_=1,mm=Function.prototype.call),mm}var gm,t_;function K0(){return t_||(t_=1,gm=Function.prototype.apply),gm}var ym,r_;function Z1(){return r_||(r_=1,ym=typeof Reflect<"u"&&Reflect&&Reflect.apply),ym}var vm,n_;function J1(){if(n_)return vm;n_=1;var n=zf(),e=K0(),t=dy(),r=Z1();return vm=r||n.call(t,e),vm}var _m,i_;function Y0(){if(i_)return _m;i_=1;var n=zf(),e=ah(),t=dy(),r=J1();return _m=function(a){if(a.length<1||typeof a[0]!="function")throw new e("a function is required");return r(n,t,a)},_m}var xm,s_;function eb(){if(s_)return xm;s_=1;var n=Y0(),e=$0(),t;try{t=[].__proto__===Array.prototype}catch(c){if(!c||typeof c!="object"||!("code"in c)||c.code!=="ERR_PROTO_ACCESS")throw c}var r=!!t&&e&&e(Object.prototype,"__proto__"),s=Object,a=s.getPrototypeOf;return xm=r&&typeof r.get=="function"?n([r.get]):typeof a=="function"?function(f){return a(f==null?f:s(f))}:!1,xm}var wm,o_;function tb(){if(o_)return wm;o_=1;var n=X0(),e=q0(),t=eb();return wm=n?function(s){return n(s)}:e?function(s){if(!s||typeof s!="object"&&typeof s!="function")throw new TypeError("getProto: not an object");return e(s)}:t?function(s){return t(s)}:null,wm}var bm,a_;function rb(){if(a_)return bm;a_=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=zf();return bm=t.call(n,e),bm}var Sm,l_;function fy(){if(l_)return Sm;l_=1;var n,e=W0(),t=O1(),r=D1(),s=L1(),a=N1(),c=F1(),f=ah(),m=B1(),_=U1(),w=G1(),d=j1(),v=z1(),b=H1(),T=V1(),R=$1(),k=Function,L=function(it){try{return k('"use strict"; return ('+it+").constructor;")()}catch{}},W=$0(),z=q1(),te=function(){throw new f},K=W?(function(){try{return arguments.callee,te}catch{try{return W(arguments,"callee").get}catch{return te}}})():te,de=Y1()(),F=tb(),ie=q0(),ye=X0(),Oe=K0(),Pe=dy(),ge={},ve=typeof Uint8Array>"u"||!F?n:F(Uint8Array),we={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":de&&F?F([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":ge,"%AsyncGenerator%":ge,"%AsyncGeneratorFunction%":ge,"%AsyncIteratorPrototype%":ge,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":r,"%Float16Array%":typeof Float16Array>"u"?n:Float16Array,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":k,"%GeneratorFunction%":ge,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":de&&F?F(F([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!de||!F?n:F(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":W,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":s,"%ReferenceError%":a,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!de||!F?n:F(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":de&&F?F(""[Symbol.iterator]()):n,"%Symbol%":de?Symbol:n,"%SyntaxError%":c,"%ThrowTypeError%":K,"%TypedArray%":ve,"%TypeError%":f,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":m,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":Pe,"%Function.prototype.apply%":Oe,"%Object.defineProperty%":z,"%Object.getPrototypeOf%":ie,"%Math.abs%":_,"%Math.floor%":w,"%Math.max%":d,"%Math.min%":v,"%Math.pow%":b,"%Math.round%":T,"%Math.sign%":R,"%Reflect.getPrototypeOf%":ye};if(F)try{null.error}catch(it){var qe=F(F(it));we["%Error.prototype%"]=qe}var H=function it(Se){var ot;if(Se==="%AsyncFunction%")ot=L("async function () {}");else if(Se==="%GeneratorFunction%")ot=L("function* () {}");else if(Se==="%AsyncGeneratorFunction%")ot=L("async function* () {}");else if(Se==="%AsyncGenerator%"){var Qe=it("%AsyncGeneratorFunction%");Qe&&(ot=Qe.prototype)}else if(Se==="%AsyncIteratorPrototype%"){var gt=it("%AsyncGenerator%");gt&&F&&(ot=F(gt.prototype))}return we[Se]=ot,ot},V={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},D=zf(),Y=rb(),j=D.call(Pe,Array.prototype.concat),U=D.call(Oe,Array.prototype.splice),q=D.call(Pe,String.prototype.replace),ce=D.call(Pe,String.prototype.slice),Ae=D.call(Pe,RegExp.prototype.exec),Me=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Fe=/\\(\\)?/g,je=function(Se){var ot=ce(Se,0,1),Qe=ce(Se,-1);if(ot==="%"&&Qe!=="%")throw new c("invalid intrinsic syntax, expected closing `%`");if(Qe==="%"&&ot!=="%")throw new c("invalid intrinsic syntax, expected opening `%`");var gt=[];return q(Se,Me,function(Bt,dt,vt,mr){gt[gt.length]=vt?q(mr,Fe,"$1"):dt||Bt}),gt},Ke=function(Se,ot){var Qe=Se,gt;if(Y(V,Qe)&&(gt=V[Qe],Qe="%"+gt[0]+"%"),Y(we,Qe)){var Bt=we[Qe];if(Bt===ge&&(Bt=H(Qe)),typeof Bt>"u"&&!ot)throw new f("intrinsic "+Se+" exists, but is not available. Please file an issue!");return{alias:gt,name:Qe,value:Bt}}throw new c("intrinsic "+Se+" does not exist!")};return Sm=function(Se,ot){if(typeof Se!="string"||Se.length===0)throw new f("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof ot!="boolean")throw new f('"allowMissing" argument must be a boolean');if(Ae(/^%?[^%]*%?$/,Se)===null)throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Qe=je(Se),gt=Qe.length>0?Qe[0]:"",Bt=Ke("%"+gt+"%",ot),dt=Bt.name,vt=Bt.value,mr=!1,Cr=Bt.alias;Cr&&(gt=Cr[0],U(Qe,j([0,1],Cr)));for(var Li=1,Nr=!0;Li<Qe.length;Li+=1){var hr=Qe[Li],yi=ce(hr,0,1),jn=ce(hr,-1);if((yi==='"'||yi==="'"||yi==="`"||jn==='"'||jn==="'"||jn==="`")&&yi!==jn)throw new c("property names with quotes must have matching quotes");if((hr==="constructor"||!Nr)&&(mr=!0),gt+="."+hr,dt="%"+gt+"%",Y(we,dt))vt=we[dt];else if(vt!=null){if(!(hr in vt)){if(!ot)throw new f("base intrinsic for "+Se+" exists, but the property is not available.");return}if(W&&Li+1>=Qe.length){var Cn=W(vt,hr);Nr=!!Cn,Nr&&"get"in Cn&&!("originalValue"in Cn.get)?vt=Cn.get:vt=vt[hr]}else Nr=Y(vt,hr),vt=vt[hr];Nr&&!mr&&(we[dt]=vt)}}return vt},Sm}var Em,u_;function Q0(){if(u_)return Em;u_=1;var n=fy(),e=Y0(),t=e([n("%String.prototype.indexOf%")]);return Em=function(s,a){var c=n(s,!!a);return typeof c=="function"&&t(s,".prototype.")>-1?e([c]):c},Em}var Tm,c_;function Z0(){if(c_)return Tm;c_=1;var n=fy(),e=Q0(),t=jf(),r=ah(),s=n("%Map%",!0),a=e("Map.prototype.get",!0),c=e("Map.prototype.set",!0),f=e("Map.prototype.has",!0),m=e("Map.prototype.delete",!0),_=e("Map.prototype.size",!0);return Tm=!!s&&function(){var d,v={assert:function(b){if(!v.has(b))throw new r("Side channel does not contain "+t(b))},delete:function(b){if(d){var T=m(d,b);return _(d)===0&&(d=void 0),T}return!1},get:function(b){if(d)return a(d,b)},has:function(b){return d?f(d,b):!1},set:function(b,T){d||(d=new s),c(d,b,T)}};return v},Tm}var Am,h_;function nb(){if(h_)return Am;h_=1;var n=fy(),e=Q0(),t=jf(),r=Z0(),s=ah(),a=n("%WeakMap%",!0),c=e("WeakMap.prototype.get",!0),f=e("WeakMap.prototype.set",!0),m=e("WeakMap.prototype.has",!0),_=e("WeakMap.prototype.delete",!0);return Am=a?function(){var d,v,b={assert:function(T){if(!b.has(T))throw new s("Side channel does not contain "+t(T))},delete:function(T){if(a&&T&&(typeof T=="object"||typeof T=="function")){if(d)return _(d,T)}else if(r&&v)return v.delete(T);return!1},get:function(T){return a&&T&&(typeof T=="object"||typeof T=="function")&&d?c(d,T):v&&v.get(T)},has:function(T){return a&&T&&(typeof T=="object"||typeof T=="function")&&d?m(d,T):!!v&&v.has(T)},set:function(T,R){a&&T&&(typeof T=="object"||typeof T=="function")?(d||(d=new a),f(d,T,R)):r&&(v||(v=r()),v.set(T,R))}};return b}:r,Am}var Cm,d_;function J0(){if(d_)return Cm;d_=1;var n=ah(),e=jf(),t=M1(),r=Z0(),s=nb(),a=s||r||t;return Cm=function(){var f,m={assert:function(_){if(!m.has(_))throw new n("Side channel does not contain "+e(_))},delete:function(_){return!!f&&f.delete(_)},get:function(_){return f&&f.get(_)},has:function(_){return!!f&&f.has(_)},set:function(_,w){f||(f=a()),f.set(_,w)}};return m},Cm}var Im,f_;function py(){if(f_)return Im;f_=1;var n=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Im={default:t.RFC3986,formatters:{RFC1738:function(r){return n.call(r,e,"+")},RFC3986:function(r){return String(r)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},Im}var Pm,p_;function ex(){if(p_)return Pm;p_=1;var n=py(),e=J0(),t=Object.prototype.hasOwnProperty,r=Array.isArray,s=e(),a=function(F,ie){return s.set(F,ie),F},c=function(F){return s.has(F)},f=function(F){return s.get(F)},m=function(F,ie){s.set(F,ie)},_=(function(){for(var de=[],F=0;F<256;++F)de.push("%"+((F<16?"0":"")+F.toString(16)).toUpperCase());return de})(),w=function(F){for(;F.length>1;){var ie=F.pop(),ye=ie.obj[ie.prop];if(r(ye)){for(var Oe=[],Pe=0;Pe<ye.length;++Pe)typeof ye[Pe]<"u"&&Oe.push(ye[Pe]);ie.obj[ie.prop]=Oe}}},d=function(F,ie){for(var ye=ie&&ie.plainObjects?{__proto__:null}:{},Oe=0;Oe<F.length;++Oe)typeof F[Oe]<"u"&&(ye[Oe]=F[Oe]);return ye},v=function de(F,ie,ye){if(!ie)return F;if(typeof ie!="object"&&typeof ie!="function"){if(r(F))F.push(ie);else if(F&&typeof F=="object")if(c(F)){var Oe=f(F)+1;F[Oe]=ie,m(F,Oe)}else(ye&&(ye.plainObjects||ye.allowPrototypes)||!t.call(Object.prototype,ie))&&(F[ie]=!0);else return[F,ie];return F}if(!F||typeof F!="object"){if(c(ie)){for(var Pe=Object.keys(ie),ge=ye&&ye.plainObjects?{__proto__:null,0:F}:{0:F},ve=0;ve<Pe.length;ve++){var we=parseInt(Pe[ve],10);ge[we+1]=ie[Pe[ve]]}return a(ge,f(ie)+1)}return[F].concat(ie)}var qe=F;return r(F)&&!r(ie)&&(qe=d(F,ye)),r(F)&&r(ie)?(ie.forEach(function(H,V){if(t.call(F,V)){var D=F[V];D&&typeof D=="object"&&H&&typeof H=="object"?F[V]=de(D,H,ye):F.push(H)}else F[V]=H}),F):Object.keys(ie).reduce(function(H,V){var D=ie[V];return t.call(H,V)?H[V]=de(H[V],D,ye):H[V]=D,H},qe)},b=function(F,ie){return Object.keys(ie).reduce(function(ye,Oe){return ye[Oe]=ie[Oe],ye},F)},T=function(de,F,ie){var ye=de.replace(/\+/g," ");if(ie==="iso-8859-1")return ye.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(ye)}catch{return ye}},R=1024,k=function(F,ie,ye,Oe,Pe){if(F.length===0)return F;var ge=F;if(typeof F=="symbol"?ge=Symbol.prototype.toString.call(F):typeof F!="string"&&(ge=String(F)),ye==="iso-8859-1")return escape(ge).replace(/%u[0-9a-f]{4}/gi,function(Y){return"%26%23"+parseInt(Y.slice(2),16)+"%3B"});for(var ve="",we=0;we<ge.length;we+=R){for(var qe=ge.length>=R?ge.slice(we,we+R):ge,H=[],V=0;V<qe.length;++V){var D=qe.charCodeAt(V);if(D===45||D===46||D===95||D===126||D>=48&&D<=57||D>=65&&D<=90||D>=97&&D<=122||Pe===n.RFC1738&&(D===40||D===41)){H[H.length]=qe.charAt(V);continue}if(D<128){H[H.length]=_[D];continue}if(D<2048){H[H.length]=_[192|D>>6]+_[128|D&63];continue}if(D<55296||D>=57344){H[H.length]=_[224|D>>12]+_[128|D>>6&63]+_[128|D&63];continue}V+=1,D=65536+((D&1023)<<10|qe.charCodeAt(V)&1023),H[H.length]=_[240|D>>18]+_[128|D>>12&63]+_[128|D>>6&63]+_[128|D&63]}ve+=H.join("")}return ve},L=function(F){for(var ie=[{obj:{o:F},prop:"o"}],ye=[],Oe=0;Oe<ie.length;++Oe)for(var Pe=ie[Oe],ge=Pe.obj[Pe.prop],ve=Object.keys(ge),we=0;we<ve.length;++we){var qe=ve[we],H=ge[qe];typeof H=="object"&&H!==null&&ye.indexOf(H)===-1&&(ie.push({obj:ge,prop:qe}),ye.push(H))}return w(ie),F},W=function(F){return Object.prototype.toString.call(F)==="[object RegExp]"},z=function(F){return!F||typeof F!="object"?!1:!!(F.constructor&&F.constructor.isBuffer&&F.constructor.isBuffer(F))},te=function(F,ie,ye,Oe){if(c(F)){var Pe=f(F)+1;return F[Pe]=ie,m(F,Pe),F}var ge=[].concat(F,ie);return ge.length>ye?a(d(ge,{plainObjects:Oe}),ge.length-1):ge},K=function(F,ie){if(r(F)){for(var ye=[],Oe=0;Oe<F.length;Oe+=1)ye.push(ie(F[Oe]));return ye}return ie(F)};return Pm={arrayToObject:d,assign:b,combine:te,compact:L,decode:T,encode:k,isBuffer:z,isOverflow:c,isRegExp:W,maybeMap:K,merge:v},Pm}var Rm,m_;function ib(){if(m_)return Rm;m_=1;var n=J0(),e=ex(),t=py(),r=Object.prototype.hasOwnProperty,s={brackets:function(k){return k+"[]"},comma:"comma",indices:function(k,L){return k+"["+L+"]"},repeat:function(k){return k}},a=Array.isArray,c=Array.prototype.push,f=function(R,k){c.apply(R,a(k)?k:[k])},m=Date.prototype.toISOString,_=t.default,w={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:_,formatter:t.formatters[_],indices:!1,serializeDate:function(k){return m.call(k)},skipNulls:!1,strictNullHandling:!1},d=function(k){return typeof k=="string"||typeof k=="number"||typeof k=="boolean"||typeof k=="symbol"||typeof k=="bigint"},v={},b=function R(k,L,W,z,te,K,de,F,ie,ye,Oe,Pe,ge,ve,we,qe,H,V){for(var D=k,Y=V,j=0,U=!1;(Y=Y.get(v))!==void 0&&!U;){var q=Y.get(k);if(j+=1,typeof q<"u"){if(q===j)throw new RangeError("Cyclic object value");U=!0}typeof Y.get(v)>"u"&&(j=0)}if(typeof ye=="function"?D=ye(L,D):D instanceof Date?D=ge(D):W==="comma"&&a(D)&&(D=e.maybeMap(D,function(dt){return dt instanceof Date?ge(dt):dt})),D===null){if(K)return ie&&!qe?ie(L,w.encoder,H,"key",ve):L;D=""}if(d(D)||e.isBuffer(D)){if(ie){var ce=qe?L:ie(L,w.encoder,H,"key",ve);return[we(ce)+"="+we(ie(D,w.encoder,H,"value",ve))]}return[we(L)+"="+we(String(D))]}var Ae=[];if(typeof D>"u")return Ae;var Me;if(W==="comma"&&a(D))qe&&ie&&(D=e.maybeMap(D,ie)),Me=[{value:D.length>0?D.join(",")||null:void 0}];else if(a(ye))Me=ye;else{var Fe=Object.keys(D);Me=Oe?Fe.sort(Oe):Fe}var je=F?String(L).replace(/\./g,"%2E"):String(L),Ke=z&&a(D)&&D.length===1?je+"[]":je;if(te&&a(D)&&D.length===0)return Ke+"[]";for(var it=0;it<Me.length;++it){var Se=Me[it],ot=typeof Se=="object"&&Se&&typeof Se.value<"u"?Se.value:D[Se];if(!(de&&ot===null)){var Qe=Pe&&F?String(Se).replace(/\./g,"%2E"):String(Se),gt=a(D)?typeof W=="function"?W(Ke,Qe):Ke:Ke+(Pe?"."+Qe:"["+Qe+"]");V.set(k,j);var Bt=n();Bt.set(v,V),f(Ae,R(ot,gt,W,z,te,K,de,F,W==="comma"&&qe&&a(D)?null:ie,ye,Oe,Pe,ge,ve,we,qe,H,Bt))}}return Ae},T=function(k){if(!k)return w;if(typeof k.allowEmptyArrays<"u"&&typeof k.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof k.encodeDotInKeys<"u"&&typeof k.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(k.encoder!==null&&typeof k.encoder<"u"&&typeof k.encoder!="function")throw new TypeError("Encoder has to be a function.");var L=k.charset||w.charset;if(typeof k.charset<"u"&&k.charset!=="utf-8"&&k.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var W=t.default;if(typeof k.format<"u"){if(!r.call(t.formatters,k.format))throw new TypeError("Unknown format option provided.");W=k.format}var z=t.formatters[W],te=w.filter;(typeof k.filter=="function"||a(k.filter))&&(te=k.filter);var K;if(k.arrayFormat in s?K=k.arrayFormat:"indices"in k?K=k.indices?"indices":"repeat":K=w.arrayFormat,"commaRoundTrip"in k&&typeof k.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var de=typeof k.allowDots>"u"?k.encodeDotInKeys===!0?!0:w.allowDots:!!k.allowDots;return{addQueryPrefix:typeof k.addQueryPrefix=="boolean"?k.addQueryPrefix:w.addQueryPrefix,allowDots:de,allowEmptyArrays:typeof k.allowEmptyArrays=="boolean"?!!k.allowEmptyArrays:w.allowEmptyArrays,arrayFormat:K,charset:L,charsetSentinel:typeof k.charsetSentinel=="boolean"?k.charsetSentinel:w.charsetSentinel,commaRoundTrip:!!k.commaRoundTrip,delimiter:typeof k.delimiter>"u"?w.delimiter:k.delimiter,encode:typeof k.encode=="boolean"?k.encode:w.encode,encodeDotInKeys:typeof k.encodeDotInKeys=="boolean"?k.encodeDotInKeys:w.encodeDotInKeys,encoder:typeof k.encoder=="function"?k.encoder:w.encoder,encodeValuesOnly:typeof k.encodeValuesOnly=="boolean"?k.encodeValuesOnly:w.encodeValuesOnly,filter:te,format:W,formatter:z,serializeDate:typeof k.serializeDate=="function"?k.serializeDate:w.serializeDate,skipNulls:typeof k.skipNulls=="boolean"?k.skipNulls:w.skipNulls,sort:typeof k.sort=="function"?k.sort:null,strictNullHandling:typeof k.strictNullHandling=="boolean"?k.strictNullHandling:w.strictNullHandling}};return Rm=function(R,k){var L=R,W=T(k),z,te;typeof W.filter=="function"?(te=W.filter,L=te("",L)):a(W.filter)&&(te=W.filter,z=te);var K=[];if(typeof L!="object"||L===null)return"";var de=s[W.arrayFormat],F=de==="comma"&&W.commaRoundTrip;z||(z=Object.keys(L)),W.sort&&z.sort(W.sort);for(var ie=n(),ye=0;ye<z.length;++ye){var Oe=z[ye],Pe=L[Oe];W.skipNulls&&Pe===null||f(K,b(Pe,Oe,de,F,W.allowEmptyArrays,W.strictNullHandling,W.skipNulls,W.encodeDotInKeys,W.encode?W.encoder:null,W.filter,W.sort,W.allowDots,W.serializeDate,W.format,W.formatter,W.encodeValuesOnly,W.charset,ie))}var ge=K.join(W.delimiter),ve=W.addQueryPrefix===!0?"?":"";return W.charsetSentinel&&(W.charset==="iso-8859-1"?ve+="utf8=%26%2310003%3B&":ve+="utf8=%E2%9C%93&"),ge.length>0?ve+ge:""},Rm}var km,g_;function sb(){if(g_)return km;g_=1;var n=ex(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},s=function(b){return b.replace(/&#(\d+);/g,function(T,R){return String.fromCharCode(parseInt(R,10))})},a=function(b,T,R){if(b&&typeof b=="string"&&T.comma&&b.indexOf(",")>-1)return b.split(",");if(T.throwOnLimitExceeded&&R>=T.arrayLimit)throw new RangeError("Array limit exceeded. Only "+T.arrayLimit+" element"+(T.arrayLimit===1?"":"s")+" allowed in an array.");return b},c="utf8=%26%2310003%3B",f="utf8=%E2%9C%93",m=function(T,R){var k={__proto__:null},L=R.ignoreQueryPrefix?T.replace(/^\?/,""):T;L=L.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var W=R.parameterLimit===1/0?void 0:R.parameterLimit,z=L.split(R.delimiter,R.throwOnLimitExceeded?W+1:W);if(R.throwOnLimitExceeded&&z.length>W)throw new RangeError("Parameter limit exceeded. Only "+W+" parameter"+(W===1?"":"s")+" allowed.");var te=-1,K,de=R.charset;if(R.charsetSentinel)for(K=0;K<z.length;++K)z[K].indexOf("utf8=")===0&&(z[K]===f?de="utf-8":z[K]===c&&(de="iso-8859-1"),te=K,K=z.length);for(K=0;K<z.length;++K)if(K!==te){var F=z[K],ie=F.indexOf("]="),ye=ie===-1?F.indexOf("="):ie+1,Oe,Pe;if(ye===-1?(Oe=R.decoder(F,r.decoder,de,"key"),Pe=R.strictNullHandling?null:""):(Oe=R.decoder(F.slice(0,ye),r.decoder,de,"key"),Oe!==null&&(Pe=n.maybeMap(a(F.slice(ye+1),R,t(k[Oe])?k[Oe].length:0),function(ve){return R.decoder(ve,r.decoder,de,"value")}))),Pe&&R.interpretNumericEntities&&de==="iso-8859-1"&&(Pe=s(String(Pe))),F.indexOf("[]=")>-1&&(Pe=t(Pe)?[Pe]:Pe),Oe!==null){var ge=e.call(k,Oe);ge&&R.duplicates==="combine"?k[Oe]=n.combine(k[Oe],Pe,R.arrayLimit,R.plainObjects):(!ge||R.duplicates==="last")&&(k[Oe]=Pe)}}return k},_=function(b,T,R,k){var L=0;if(b.length>0&&b[b.length-1]==="[]"){var W=b.slice(0,-1).join("");L=Array.isArray(T)&&T[W]?T[W].length:0}for(var z=k?T:a(T,R,L),te=b.length-1;te>=0;--te){var K,de=b[te];if(de==="[]"&&R.parseArrays)n.isOverflow(z)?K=z:K=R.allowEmptyArrays&&(z===""||R.strictNullHandling&&z===null)?[]:n.combine([],z,R.arrayLimit,R.plainObjects);else{K=R.plainObjects?{__proto__:null}:{};var F=de.charAt(0)==="["&&de.charAt(de.length-1)==="]"?de.slice(1,-1):de,ie=R.decodeDotInKeys?F.replace(/%2E/g,"."):F,ye=parseInt(ie,10);!R.parseArrays&&ie===""?K={0:z}:!isNaN(ye)&&de!==ie&&String(ye)===ie&&ye>=0&&R.parseArrays&&ye<=R.arrayLimit?(K=[],K[ye]=z):ie!=="__proto__"&&(K[ie]=z)}z=K}return z},w=function(T,R){var k=R.allowDots?T.replace(/\.([^.[]+)/g,"[$1]"):T;if(R.depth<=0)return!R.plainObjects&&e.call(Object.prototype,k)&&!R.allowPrototypes?void 0:[k];var L=/(\[[^[\]]*])/,W=/(\[[^[\]]*])/g,z=L.exec(k),te=z?k.slice(0,z.index):k,K=[];if(te){if(!R.plainObjects&&e.call(Object.prototype,te)&&!R.allowPrototypes)return;K.push(te)}for(var de=0;(z=W.exec(k))!==null&&de<R.depth;){de+=1;var F=z[1].slice(1,-1);if(!R.plainObjects&&e.call(Object.prototype,F)&&!R.allowPrototypes)return;K.push(z[1])}if(z){if(R.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+R.depth+" and strictDepth is true");K.push("["+k.slice(z.index)+"]")}return K},d=function(T,R,k,L){if(T){var W=w(T,k);if(W)return _(W,R,k,L)}},v=function(T){if(!T)return r;if(typeof T.allowEmptyArrays<"u"&&typeof T.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof T.decodeDotInKeys<"u"&&typeof T.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(T.decoder!==null&&typeof T.decoder<"u"&&typeof T.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof T.charset<"u"&&T.charset!=="utf-8"&&T.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof T.throwOnLimitExceeded<"u"&&typeof T.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var R=typeof T.charset>"u"?r.charset:T.charset,k=typeof T.duplicates>"u"?r.duplicates:T.duplicates;if(k!=="combine"&&k!=="first"&&k!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var L=typeof T.allowDots>"u"?T.decodeDotInKeys===!0?!0:r.allowDots:!!T.allowDots;return{allowDots:L,allowEmptyArrays:typeof T.allowEmptyArrays=="boolean"?!!T.allowEmptyArrays:r.allowEmptyArrays,allowPrototypes:typeof T.allowPrototypes=="boolean"?T.allowPrototypes:r.allowPrototypes,allowSparse:typeof T.allowSparse=="boolean"?T.allowSparse:r.allowSparse,arrayLimit:typeof T.arrayLimit=="number"?T.arrayLimit:r.arrayLimit,charset:R,charsetSentinel:typeof T.charsetSentinel=="boolean"?T.charsetSentinel:r.charsetSentinel,comma:typeof T.comma=="boolean"?T.comma:r.comma,decodeDotInKeys:typeof T.decodeDotInKeys=="boolean"?T.decodeDotInKeys:r.decodeDotInKeys,decoder:typeof T.decoder=="function"?T.decoder:r.decoder,delimiter:typeof T.delimiter=="string"||n.isRegExp(T.delimiter)?T.delimiter:r.delimiter,depth:typeof T.depth=="number"||T.depth===!1?+T.depth:r.depth,duplicates:k,ignoreQueryPrefix:T.ignoreQueryPrefix===!0,interpretNumericEntities:typeof T.interpretNumericEntities=="boolean"?T.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof T.parameterLimit=="number"?T.parameterLimit:r.parameterLimit,parseArrays:T.parseArrays!==!1,plainObjects:typeof T.plainObjects=="boolean"?T.plainObjects:r.plainObjects,strictDepth:typeof T.strictDepth=="boolean"?!!T.strictDepth:r.strictDepth,strictNullHandling:typeof T.strictNullHandling=="boolean"?T.strictNullHandling:r.strictNullHandling,throwOnLimitExceeded:typeof T.throwOnLimitExceeded=="boolean"?T.throwOnLimitExceeded:!1}};return km=function(b,T){var R=v(T);if(b===""||b===null||typeof b>"u")return R.plainObjects?{__proto__:null}:{};for(var k=typeof b=="string"?m(b,R):b,L=R.plainObjects?{__proto__:null}:{},W=Object.keys(k),z=0;z<W.length;++z){var te=W[z],K=d(te,k[te],R,typeof b=="string");L=n.merge(L,K,R)}return R.allowSparse===!0?L:n.compact(L)},km}var Mm,y_;function ob(){if(y_)return Mm;y_=1;var n=ib(),e=sb(),t=py();return Mm={formats:t,parse:e,stringify:n},Mm}var v_;function ab(){if(v_)return Ku;v_=1;var n=I1();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,a=["<",">",'"',"`"," ","\r",`
`,"	"],c=["{","}","|","\\","^","`"].concat(a),f=["'"].concat(c),m=["%","/","?",";","#"].concat(f),_=["/","?","#"],w=255,d=/^[+a-z0-9A-Z_-]{0,63}$/,v=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,b={javascript:!0,"javascript:":!0},T={javascript:!0,"javascript:":!0},R={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},k=ob();function L(K,de,F){if(K&&typeof K=="object"&&K instanceof e)return K;var ie=new e;return ie.parse(K,de,F),ie}e.prototype.parse=function(K,de,F){if(typeof K!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof K);var ie=K.indexOf("?"),ye=ie!==-1&&ie<K.indexOf("#")?"?":"#",Oe=K.split(ye),Pe=/\\/g;Oe[0]=Oe[0].replace(Pe,"/"),K=Oe.join(ye);var ge=K;if(ge=ge.trim(),!F&&K.split("#").length===1){var ve=s.exec(ge);if(ve)return this.path=ge,this.href=ge,this.pathname=ve[1],ve[2]?(this.search=ve[2],de?this.query=k.parse(this.search.substr(1)):this.query=this.search.substr(1)):de&&(this.search="",this.query={}),this}var we=t.exec(ge);if(we){we=we[0];var qe=we.toLowerCase();this.protocol=qe,ge=ge.substr(we.length)}if(F||we||ge.match(/^\/\/[^@/]+@[^@/]+/)){var H=ge.substr(0,2)==="//";H&&!(we&&T[we])&&(ge=ge.substr(2),this.slashes=!0)}if(!T[we]&&(H||we&&!R[we])){for(var V=-1,D=0;D<_.length;D++){var Y=ge.indexOf(_[D]);Y!==-1&&(V===-1||Y<V)&&(V=Y)}var j,U;V===-1?U=ge.lastIndexOf("@"):U=ge.lastIndexOf("@",V),U!==-1&&(j=ge.slice(0,U),ge=ge.slice(U+1),this.auth=decodeURIComponent(j)),V=-1;for(var D=0;D<m.length;D++){var Y=ge.indexOf(m[D]);Y!==-1&&(V===-1||Y<V)&&(V=Y)}V===-1&&(V=ge.length),this.host=ge.slice(0,V),ge=ge.slice(V),this.parseHost(),this.hostname=this.hostname||"";var q=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!q)for(var ce=this.hostname.split(/\./),D=0,Ae=ce.length;D<Ae;D++){var Me=ce[D];if(Me&&!Me.match(d)){for(var Fe="",je=0,Ke=Me.length;je<Ke;je++)Me.charCodeAt(je)>127?Fe+="x":Fe+=Me[je];if(!Fe.match(d)){var it=ce.slice(0,D),Se=ce.slice(D+1),ot=Me.match(v);ot&&(it.push(ot[1]),Se.unshift(ot[2])),Se.length&&(ge="/"+Se.join(".")+ge),this.hostname=it.join(".");break}}}this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),q||(this.hostname=n.toASCII(this.hostname));var Qe=this.port?":"+this.port:"",gt=this.hostname||"";this.host=gt+Qe,this.href+=this.host,q&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),ge[0]!=="/"&&(ge="/"+ge))}if(!b[qe])for(var D=0,Ae=f.length;D<Ae;D++){var Bt=f[D];if(ge.indexOf(Bt)!==-1){var dt=encodeURIComponent(Bt);dt===Bt&&(dt=escape(Bt)),ge=ge.split(Bt).join(dt)}}var vt=ge.indexOf("#");vt!==-1&&(this.hash=ge.substr(vt),ge=ge.slice(0,vt));var mr=ge.indexOf("?");if(mr!==-1?(this.search=ge.substr(mr),this.query=ge.substr(mr+1),de&&(this.query=k.parse(this.query)),ge=ge.slice(0,mr)):de&&(this.search="",this.query={}),ge&&(this.pathname=ge),R[qe]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Qe=this.pathname||"",Cr=this.search||"";this.path=Qe+Cr}return this.href=this.format(),this};function W(K){return typeof K=="string"&&(K=L(K)),K instanceof e?K.format():e.prototype.format.call(K)}e.prototype.format=function(){var K=this.auth||"";K&&(K=encodeURIComponent(K),K=K.replace(/%3A/i,":"),K+="@");var de=this.protocol||"",F=this.pathname||"",ie=this.hash||"",ye=!1,Oe="";this.host?ye=K+this.host:this.hostname&&(ye=K+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(ye+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(Oe=k.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var Pe=this.search||Oe&&"?"+Oe||"";return de&&de.substr(-1)!==":"&&(de+=":"),this.slashes||(!de||R[de])&&ye!==!1?(ye="//"+(ye||""),F&&F.charAt(0)!=="/"&&(F="/"+F)):ye||(ye=""),ie&&ie.charAt(0)!=="#"&&(ie="#"+ie),Pe&&Pe.charAt(0)!=="?"&&(Pe="?"+Pe),F=F.replace(/[?#]/g,function(ge){return encodeURIComponent(ge)}),Pe=Pe.replace("#","%23"),de+ye+F+Pe+ie};function z(K,de){return L(K,!1,!0).resolve(de)}e.prototype.resolve=function(K){return this.resolveObject(L(K,!1,!0)).format()};function te(K,de){return K?L(K,!1,!0).resolveObject(de):de}return e.prototype.resolveObject=function(K){if(typeof K=="string"){var de=new e;de.parse(K,!1,!0),K=de}for(var F=new e,ie=Object.keys(this),ye=0;ye<ie.length;ye++){var Oe=ie[ye];F[Oe]=this[Oe]}if(F.hash=K.hash,K.href==="")return F.href=F.format(),F;if(K.slashes&&!K.protocol){for(var Pe=Object.keys(K),ge=0;ge<Pe.length;ge++){var ve=Pe[ge];ve!=="protocol"&&(F[ve]=K[ve])}return R[F.protocol]&&F.hostname&&!F.pathname&&(F.pathname="/",F.path=F.pathname),F.href=F.format(),F}if(K.protocol&&K.protocol!==F.protocol){if(!R[K.protocol]){for(var we=Object.keys(K),qe=0;qe<we.length;qe++){var H=we[qe];F[H]=K[H]}return F.href=F.format(),F}if(F.protocol=K.protocol,!K.host&&!T[K.protocol]){for(var Ae=(K.pathname||"").split("/");Ae.length&&!(K.host=Ae.shift()););K.host||(K.host=""),K.hostname||(K.hostname=""),Ae[0]!==""&&Ae.unshift(""),Ae.length<2&&Ae.unshift(""),F.pathname=Ae.join("/")}else F.pathname=K.pathname;if(F.search=K.search,F.query=K.query,F.host=K.host||"",F.auth=K.auth,F.hostname=K.hostname||K.host,F.port=K.port,F.pathname||F.search){var V=F.pathname||"",D=F.search||"";F.path=V+D}return F.slashes=F.slashes||K.slashes,F.href=F.format(),F}var Y=F.pathname&&F.pathname.charAt(0)==="/",j=K.host||K.pathname&&K.pathname.charAt(0)==="/",U=j||Y||F.host&&K.pathname,q=U,ce=F.pathname&&F.pathname.split("/")||[],Ae=K.pathname&&K.pathname.split("/")||[],Me=F.protocol&&!R[F.protocol];if(Me&&(F.hostname="",F.port=null,F.host&&(ce[0]===""?ce[0]=F.host:ce.unshift(F.host)),F.host="",K.protocol&&(K.hostname=null,K.port=null,K.host&&(Ae[0]===""?Ae[0]=K.host:Ae.unshift(K.host)),K.host=null),U=U&&(Ae[0]===""||ce[0]==="")),j)F.host=K.host||K.host===""?K.host:F.host,F.hostname=K.hostname||K.hostname===""?K.hostname:F.hostname,F.search=K.search,F.query=K.query,ce=Ae;else if(Ae.length)ce||(ce=[]),ce.pop(),ce=ce.concat(Ae),F.search=K.search,F.query=K.query;else if(K.search!=null){if(Me){F.host=ce.shift(),F.hostname=F.host;var Fe=F.host&&F.host.indexOf("@")>0?F.host.split("@"):!1;Fe&&(F.auth=Fe.shift(),F.hostname=Fe.shift(),F.host=F.hostname)}return F.search=K.search,F.query=K.query,(F.pathname!==null||F.search!==null)&&(F.path=(F.pathname?F.pathname:"")+(F.search?F.search:"")),F.href=F.format(),F}if(!ce.length)return F.pathname=null,F.search?F.path="/"+F.search:F.path=null,F.href=F.format(),F;for(var je=ce.slice(-1)[0],Ke=(F.host||K.host||ce.length>1)&&(je==="."||je==="..")||je==="",it=0,Se=ce.length;Se>=0;Se--)je=ce[Se],je==="."?ce.splice(Se,1):je===".."?(ce.splice(Se,1),it++):it&&(ce.splice(Se,1),it--);if(!U&&!q)for(;it--;it)ce.unshift("..");U&&ce[0]!==""&&(!ce[0]||ce[0].charAt(0)!=="/")&&ce.unshift(""),Ke&&ce.join("/").substr(-1)!=="/"&&ce.push("");var ot=ce[0]===""||ce[0]&&ce[0].charAt(0)==="/";if(Me){F.hostname=ot?"":ce.length?ce.shift():"",F.host=F.hostname;var Fe=F.host&&F.host.indexOf("@")>0?F.host.split("@"):!1;Fe&&(F.auth=Fe.shift(),F.hostname=Fe.shift(),F.host=F.hostname)}return U=U||F.host&&ce.length,U&&!ot&&ce.unshift(""),ce.length>0?F.pathname=ce.join("/"):(F.pathname=null,F.path=null),(F.pathname!==null||F.search!==null)&&(F.path=(F.pathname?F.pathname:"")+(F.search?F.search:"")),F.auth=K.auth||F.auth,F.slashes=F.slashes||K.slashes,F.href=F.format(),F},e.prototype.parseHost=function(){var K=this.host,de=r.exec(K);de&&(de=de[0],de!==":"&&(this.port=de.substr(1)),K=K.substr(0,K.length-de.length)),K&&(this.hostname=K)},Ku.parse=L,Ku.resolve=z,Ku.resolveObject=te,Ku.format=W,Ku.Url=e,Ku}ab();const __={};function Jt(n,e,t=3){if(__[e])return;let r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${n}`):(r=r.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${n}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${n}`),console.warn(r))),__[e]=!0}function ko(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function Gh(n){return n.split("?")[0].split("#")[0]}function lb(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ub(n,e,t){return n.replace(new RegExp(lb(e),"g"),t)}function cb(n,e){let t="",r=0,s=-1,a=0,c=-1;for(let f=0;f<=n.length;++f){if(f<n.length)c=n.charCodeAt(f);else{if(c===47)break;c=47}if(c===47){if(!(s===f-1||a===1))if(s!==f-1&&a===2){if(t.length<2||r!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const m=t.lastIndexOf("/");if(m!==t.length-1){m===-1?(t="",r=0):(t=t.slice(0,m),r=t.length-1-t.lastIndexOf("/")),s=f,a=0;continue}}else if(t.length===2||t.length===1){t="",r=0,s=f,a=0;continue}}}else t.length>0?t+=`/${n.slice(s+1,f)}`:t=n.slice(s+1,f),r=f-s-1;s=f,a=0}else c===46&&a!==-1?++a:a=-1}return t}const Gn={toPosix(n){return ub(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){ko(n),n=this.toPosix(n);const e=/^file:\/\/\//.exec(n);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(n);return t?t[0]:""},toAbsolute(n,e,t){if(ko(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const r=Gh(this.toPosix(e??mt.ADAPTER.getBaseUrl())),s=Gh(this.toPosix(t??this.rootname(r)));return n=this.toPosix(n),n.startsWith("/")?Gn.join(s,n.slice(1)):this.isAbsolute(n)?n:this.join(r,n)},normalize(n){if(ko(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let e="";const t=n.startsWith("/");this.hasProtocol(n)&&(e=this.rootname(n),n=n.slice(e.length));const r=n.endsWith("/");return n=cb(n),n.length>0&&r&&(n+="/"),t?`/${n}`:e+n},isAbsolute(n){return ko(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let e;for(let t=0;t<n.length;++t){const r=n[t];if(ko(r),r.length>0)if(e===void 0)e=r;else{const s=n[t-1]??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?e+=`/../${r}`:e+=`/${r}`}}return e===void 0?".":this.normalize(e)},dirname(n){if(ko(n),n.length===0)return".";n=this.toPosix(n);let e=n.charCodeAt(0);const t=e===47;let r=-1,s=!0;const a=this.getProtocol(n),c=n;n=n.slice(a.length);for(let f=n.length-1;f>=1;--f)if(e=n.charCodeAt(f),e===47){if(!s){r=f;break}}else s=!1;return r===-1?t?"/":this.isUrl(c)?a+n:a:t&&r===1?"//":a+n.slice(0,r)},rootname(n){ko(n),n=this.toPosix(n);let e="";if(n.startsWith("/")?e="/":e=this.getProtocol(n),this.isUrl(n)){const t=n.indexOf("/",e.length);t!==-1?e=n.slice(0,t):e=n,e.endsWith("/")||(e+="/")}return e},basename(n,e){ko(n),e&&ko(e),n=Gh(this.toPosix(n));let t=0,r=-1,s=!0,a;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e.length===n.length&&e===n)return"";let c=e.length-1,f=-1;for(a=n.length-1;a>=0;--a){const m=n.charCodeAt(a);if(m===47){if(!s){t=a+1;break}}else f===-1&&(s=!1,f=a+1),c>=0&&(m===e.charCodeAt(c)?--c===-1&&(r=a):(c=-1,r=f))}return t===r?r=f:r===-1&&(r=n.length),n.slice(t,r)}for(a=n.length-1;a>=0;--a)if(n.charCodeAt(a)===47){if(!s){t=a+1;break}}else r===-1&&(s=!1,r=a+1);return r===-1?"":n.slice(t,r)},extname(n){ko(n),n=Gh(this.toPosix(n));let e=-1,t=0,r=-1,s=!0,a=0;for(let c=n.length-1;c>=0;--c){const f=n.charCodeAt(c);if(f===47){if(!s){t=c+1;break}continue}r===-1&&(s=!1,r=c+1),f===46?e===-1?e=c:a!==1&&(a=1):e!==-1&&(a=-1)}return e===-1||r===-1||a===0||a===1&&e===r-1&&e===t+1?"":n.slice(e,r)},parse(n){ko(n);const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;n=Gh(this.toPosix(n));let t=n.charCodeAt(0);const r=this.isAbsolute(n);let s;e.root=this.rootname(n),r||this.hasProtocol(n)?s=1:s=0;let a=-1,c=0,f=-1,m=!0,_=n.length-1,w=0;for(;_>=s;--_){if(t=n.charCodeAt(_),t===47){if(!m){c=_+1;break}continue}f===-1&&(m=!1,f=_+1),t===46?a===-1?a=_:w!==1&&(w=1):a!==-1&&(w=-1)}return a===-1||f===-1||w===0||w===1&&a===f-1&&a===c+1?f!==-1&&(c===0&&r?e.base=e.name=n.slice(1,f):e.base=e.name=n.slice(c,f)):(c===0&&r?(e.name=n.slice(1,a),e.base=n.slice(1,f)):(e.name=n.slice(c,a),e.base=n.slice(c,f)),e.ext=n.slice(a,f)),e.dir=this.dirname(n),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let Om;async function hb(){return Om??(Om=(async()=>{const n=document.createElement("canvas").getContext("webgl");if(!n)return ps.UNPACK;const e=await new Promise(a=>{const c=document.createElement("video");c.onloadeddata=()=>a(c),c.onerror=()=>a(null),c.autoplay=!1,c.crossOrigin="anonymous",c.preload="auto",c.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",c.load()});if(!e)return ps.UNPACK;const t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t);const r=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,r),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e);const s=new Uint8Array(4);return n.readPixels(0,0,1,1,n.RGBA,n.UNSIGNED_BYTE,s),n.deleteFramebuffer(r),n.deleteTexture(t),n.getExtension("WEBGL_lose_context")?.loseContext(),s[0]<=s[3]?ps.PMA:ps.UNPACK})()),Om}let Dm;function db(){return typeof Dm>"u"&&(Dm=(function(){const n={stencil:!0,failIfMajorPerformanceCaveat:mt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!mt.ADAPTER.getWebGLRenderingContext())return!1;const e=mt.ADAPTER.createCanvas();let t=e.getContext("webgl",n)||e.getContext("experimental-webgl",n);const r=!!t?.getContextAttributes()?.stencil;if(t){const s=t.getExtension("WEBGL_lose_context");s&&s.loseContext()}return t=null,r}catch{return!1}})()),Dm}var fb={grad:.9,turn:360,rad:360/(2*Math.PI)},dl=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Bn=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},so=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},tx=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},x_=function(n){return{r:so(n.r,0,255),g:so(n.g,0,255),b:so(n.b,0,255),a:so(n.a)}},Lm=function(n){return{r:Bn(n.r),g:Bn(n.g),b:Bn(n.b),a:Bn(n.a,3)}},pb=/^#([0-9a-f]{3,8})$/i,Hd=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},rx=function(n){var e=n.r,t=n.g,r=n.b,s=n.a,a=Math.max(e,t,r),c=a-Math.min(e,t,r),f=c?a===e?(t-r)/c:a===t?2+(r-e)/c:4+(e-t)/c:0;return{h:60*(f<0?f+6:f),s:a?c/a*100:0,v:a/255*100,a:s}},nx=function(n){var e=n.h,t=n.s,r=n.v,s=n.a;e=e/360*6,t/=100,r/=100;var a=Math.floor(e),c=r*(1-t),f=r*(1-(e-a)*t),m=r*(1-(1-e+a)*t),_=a%6;return{r:255*[r,f,c,c,m,r][_],g:255*[m,r,r,f,c,c][_],b:255*[c,c,m,r,r,f][_],a:s}},w_=function(n){return{h:tx(n.h),s:so(n.s,0,100),l:so(n.l,0,100),a:so(n.a)}},b_=function(n){return{h:Bn(n.h),s:Bn(n.s),l:Bn(n.l),a:Bn(n.a,3)}},S_=function(n){return nx((t=(e=n).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},td=function(n){return{h:(e=rx(n)).h,s:(s=(200-(t=e.s))*(r=e.v)/100)>0&&s<200?t*r/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,t,r,s},mb=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,gb=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,yb=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,vb=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,yg={string:[[function(n){var e=pb.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Bn(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Bn(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=yb.exec(n)||vb.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:x_({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=mb.exec(n)||gb.exec(n);if(!e)return null;var t,r,s=w_({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(fb[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return S_(s)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,r=n.b,s=n.a,a=s===void 0?1:s;return dl(e)&&dl(t)&&dl(r)?x_({r:Number(e),g:Number(t),b:Number(r),a:Number(a)}):null},"rgb"],[function(n){var e=n.h,t=n.s,r=n.l,s=n.a,a=s===void 0?1:s;if(!dl(e)||!dl(t)||!dl(r))return null;var c=w_({h:Number(e),s:Number(t),l:Number(r),a:Number(a)});return S_(c)},"hsl"],[function(n){var e=n.h,t=n.s,r=n.v,s=n.a,a=s===void 0?1:s;if(!dl(e)||!dl(t)||!dl(r))return null;var c=(function(f){return{h:tx(f.h),s:so(f.s,0,100),v:so(f.v,0,100),a:so(f.a)}})({h:Number(e),s:Number(t),v:Number(r),a:Number(a)});return nx(c)},"hsv"]]},E_=function(n,e){for(var t=0;t<e.length;t++){var r=e[t][0](n);if(r)return[r,e[t][1]]}return[null,void 0]},_b=function(n){return typeof n=="string"?E_(n.trim(),yg.string):typeof n=="object"&&n!==null?E_(n,yg.object):[null,void 0]},Nm=function(n,e){var t=td(n);return{h:t.h,s:so(t.s+100*e,0,100),l:t.l,a:t.a}},Fm=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},T_=function(n,e){var t=td(n);return{h:t.h,s:t.s,l:so(t.l+100*e,0,100),a:t.a}},vg=(function(){function n(e){this.parsed=_b(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Bn(Fm(this.rgba),2)},n.prototype.isDark=function(){return Fm(this.rgba)<.5},n.prototype.isLight=function(){return Fm(this.rgba)>=.5},n.prototype.toHex=function(){return e=Lm(this.rgba),t=e.r,r=e.g,s=e.b,c=(a=e.a)<1?Hd(Bn(255*a)):"","#"+Hd(t)+Hd(r)+Hd(s)+c;var e,t,r,s,a,c},n.prototype.toRgb=function(){return Lm(this.rgba)},n.prototype.toRgbString=function(){return e=Lm(this.rgba),t=e.r,r=e.g,s=e.b,(a=e.a)<1?"rgba("+t+", "+r+", "+s+", "+a+")":"rgb("+t+", "+r+", "+s+")";var e,t,r,s,a},n.prototype.toHsl=function(){return b_(td(this.rgba))},n.prototype.toHslString=function(){return e=b_(td(this.rgba)),t=e.h,r=e.s,s=e.l,(a=e.a)<1?"hsla("+t+", "+r+"%, "+s+"%, "+a+")":"hsl("+t+", "+r+"%, "+s+"%)";var e,t,r,s,a},n.prototype.toHsv=function(){return e=rx(this.rgba),{h:Bn(e.h),s:Bn(e.s),v:Bn(e.v),a:Bn(e.a,3)};var e},n.prototype.invert=function(){return Sa({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Sa(Nm(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Sa(Nm(this.rgba,-e))},n.prototype.grayscale=function(){return Sa(Nm(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Sa(T_(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Sa(T_(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Sa({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Bn(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=td(this.rgba);return typeof e=="number"?Sa({h:e,s:t.s,l:t.l,a:t.a}):Bn(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Sa(e).toHex()},n})(),Sa=function(n){return n instanceof vg?n:new vg(n)},A_=[],xb=function(n){n.forEach(function(e){A_.indexOf(e)<0&&(e(vg,yg),A_.push(e))})};function wb(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var s in t)r[t[s]]=s;var a={};n.prototype.toName=function(c){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var f,m,_=r[this.toHex()];if(_)return _;if(c?.closest){var w=this.toRgb(),d=1/0,v="black";if(!a.length)for(var b in t)a[b]=new n(t[b]).toRgb();for(var T in t){var R=(f=w,m=a[T],Math.pow(f.r-m.r,2)+Math.pow(f.g-m.g,2)+Math.pow(f.b-m.b,2));R<d&&(d=R,v=T)}return v}},e.string.push([function(c){var f=c.toLowerCase(),m=f==="transparent"?"#0000":t[f];return m?new n(m).toRgb():null},"name"])}xb([wb]);const jc=class pf{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof pf)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const r=typeof e;if(r!==typeof t)return!1;if(r==="number"||r==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((s,a)=>s===t[a]);if(e!==null&&t!==null){const s=Object.keys(e),a=Object.keys(t);return s.length!==a.length?!1:s.every(c=>e[c]===t[c])}return e===t}toRgba(){const[e,t,r,s]=this._components;return{r:e,g:t,b:r,a:s}}toRgb(){const[e,t,r]=this._components;return{r:e,g:t,b:r}}toRgbaString(){const[e,t,r]=this.toUint8RgbArray();return`rgba(${e},${t},${r},${this.alpha})`}toUint8RgbArray(e){const[t,r,s]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(r*255),e[2]=Math.round(s*255),e}toRgbArray(e){e=e??[];const[t,r,s]=this._components;return e[0]=t,e[1]=r,e[2]=s,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,r,s,a]=pf.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=r,this._components[2]*=s,this._components[3]*=a,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let r=this._int>>16&255,s=this._int>>8&255,a=this._int&255;return t&&(r=r*e+.5|0,s=s*e+.5|0,a=a*e+.5|0),(e*255<<24)+(r<<16)+(s<<8)+a}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,r,s]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(r*e)/e,this._components[2]=Math.round(s*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,r,s,a]=this._components;return e[0]=t,e[1]=r,e[2]=s,e[3]=a,e}normalize(e){let t,r,s,a;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const c=e;t=(c>>16&255)/255,r=(c>>8&255)/255,s=(c&255)/255,a=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,r,s,a=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,r,s,a=255]=e,t/=255,r/=255,s/=255,a/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const f=pf.HEX_PATTERN.exec(e);f&&(e=`#${f[2]}`)}const c=Sa(e);c.isValid()&&({r:t,g:r,b:s,a}=c.rgba,t/=255,r/=255,s/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=r,this._components[2]=s,this._components[3]=a,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,r]=this._components;this._int=(e*255<<16)+(t*255<<8)+(r*255|0)}_clamp(e,t=0,r=1){return typeof e=="number"?Math.min(Math.max(e,t),r):(e.forEach((s,a)=>{e[a]=Math.min(Math.max(s,t),r)}),e)}};jc.shared=new jc,jc.temp=new jc,jc.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let kr=jc;function bb(n){return Jt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),kr.shared.setValue(n).toHex()}function Sb(n){return Jt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),kr.shared.setValue(n).toNumber()}function Eb(){const n=[],e=[];for(let r=0;r<32;r++)n[r]=r,e[r]=r;n[Dt.NORMAL_NPM]=Dt.NORMAL,n[Dt.ADD_NPM]=Dt.ADD,n[Dt.SCREEN_NPM]=Dt.SCREEN,e[Dt.NORMAL]=Dt.NORMAL_NPM,e[Dt.ADD]=Dt.ADD_NPM,e[Dt.SCREEN]=Dt.SCREEN_NPM;const t=[];return t.push(e),t.push(n),t}const ix=Eb();function sx(n,e){return ix[e?1:0][n]}function Tb(n,e=null){const t=n*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let r=0,s=0;r<t;r+=6,s+=4)e[r+0]=s+0,e[r+1]=s+1,e[r+2]=s+2,e[r+3]=s+0,e[r+4]=s+2,e[r+5]=s+3;return e}function ox(n){if(n.BYTES_PER_ELEMENT===4)return n instanceof Float32Array?"Float32Array":n instanceof Uint32Array?"Uint32Array":"Int32Array";if(n.BYTES_PER_ELEMENT===2){if(n instanceof Uint16Array)return"Uint16Array"}else if(n.BYTES_PER_ELEMENT===1&&n instanceof Uint8Array)return"Uint8Array";return null}function Sf(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function C_(n){return!(n&n-1)&&!!n}function I_(n){let e=(n>65535?1:0)<<4;n>>>=e;let t=(n>255?1:0)<<3;return n>>>=t,e|=t,t=(n>15?1:0)<<2,n>>>=t,e|=t,t=(n>3?1:0)<<1,n>>>=t,e|=t,e|n>>1}function Qc(n,e,t){const r=n.length;let s;if(e>=r||t===0)return;t=e+t>r?r-e:t;const a=r-t;for(s=e;s<a;++s)n[s]=n[s+t];n.length=a}function lu(n){return n===0?0:n<0?-1:1}let Ab=0;function cc(){return++Ab}const _g=class{constructor(n,e,t,r){this.left=n,this.top=e,this.right=t,this.bottom=r}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};_g.EMPTY=new _g(0,0,0,0);let P_=_g;const R_={},Ea=Object.create(null),tu=Object.create(null);class Cb{constructor(e,t,r){this._canvas=mt.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||mt.RESOLUTION,this.resize(e,t)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function k_(n,e,t){for(let r=0,s=4*t*e;r<e;++r,s+=4)if(n[s+3]!==0)return!1;return!0}function M_(n,e,t,r,s){const a=4*e;for(let c=r,f=r*a+4*t;c<=s;++c,f+=a)if(n[f+3]!==0)return!1;return!0}function Ib(n){const{width:e,height:t}=n,r=n.getContext("2d",{willReadFrequently:!0});if(r===null)throw new TypeError("Failed to get canvas 2D context");const s=r.getImageData(0,0,e,t).data;let a=0,c=0,f=e-1,m=t-1;for(;c<t&&k_(s,e,c);)++c;if(c===t)return P_.EMPTY;for(;k_(s,e,m);)--m;for(;M_(s,e,a,c,m);)++a;for(;M_(s,e,f,c,m);)--f;return++f,++m,new P_(a,c,f,m)}function Pb(n){const e=Ib(n),{width:t,height:r}=e;let s=null;if(!e.isEmpty()){const a=n.getContext("2d");if(a===null)throw new TypeError("Failed to get canvas 2D context");s=a.getImageData(e.left,e.top,t,r)}return{width:t,height:r,data:s}}function Rb(n,e=globalThis.location){if(n.startsWith("data:"))return"";e=e||globalThis.location;const t=new URL(n,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function vl(n,e=1){const t=mt.RETINA_PREFIX?.exec(n);return t?parseFloat(t[1]):e}var ct=(n=>(n.Renderer="renderer",n.Application="application",n.RendererSystem="renderer-webgl-system",n.RendererPlugin="renderer-webgl-plugin",n.CanvasRendererSystem="renderer-canvas-system",n.CanvasRendererPlugin="renderer-canvas-plugin",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n))(ct||{});const xg=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},O_=(n,e)=>xg(n).priority??e,St={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(xg).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...n){return n.map(xg).forEach(e=>{e.type.forEach(t=>{const r=this._addHandlers,s=this._queue;r[t]?r[t]?.(e):(s[t]=s[t]||[],s[t]?.push(e))})}),this},handle(n,e,t){const r=this._addHandlers,s=this._removeHandlers;if(r[n]||s[n])throw new Error(`Extension type ${n} already has a handler`);r[n]=e,s[n]=t;const a=this._queue;return a[n]&&(a[n]?.forEach(c=>e(c)),delete a[n]),this},handleByMap(n,e){return this.handle(n,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByList(n,e,t=-1){return this.handle(n,r=>{e.includes(r.ref)||(e.push(r.ref),e.sort((s,a)=>O_(a,t)-O_(s,t)))},r=>{const s=e.indexOf(r.ref);s!==-1&&e.splice(s,1)})}};class wg{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const kb=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Mb(n){let e="";for(let t=0;t<n;++t)t>0&&(e+=`
else `),t<n-1&&(e+=`if(test == ${t}.0){}`);return e}function Ob(n,e){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);for(;;){const r=kb.replace(/%forloop%/gi,Mb(n));if(e.shaderSource(t,r),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))n=n/2|0;else break}return n}const Bm=0,Um=1,Gm=2,jm=3,zm=4,Hm=5;class Ua{constructor(){this.data=0,this.blendMode=Dt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Bm)}set blend(e){!!(this.data&1<<Bm)!==e&&(this.data^=1<<Bm)}get offsets(){return!!(this.data&1<<Um)}set offsets(e){!!(this.data&1<<Um)!==e&&(this.data^=1<<Um)}get culling(){return!!(this.data&1<<Gm)}set culling(e){!!(this.data&1<<Gm)!==e&&(this.data^=1<<Gm)}get depthTest(){return!!(this.data&1<<jm)}set depthTest(e){!!(this.data&1<<jm)!==e&&(this.data^=1<<jm)}get depthMask(){return!!(this.data&1<<Hm)}set depthMask(e){!!(this.data&1<<Hm)!==e&&(this.data^=1<<Hm)}get clockwiseFrontFace(){return!!(this.data&1<<zm)}set clockwiseFrontFace(e){!!(this.data&1<<zm)!==e&&(this.data^=1<<zm)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Dt.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new Ua;return e.depthTest=!1,e.blend=!0,e}}Ua.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const bg=[];function ax(n,e){if(!n)return null;let t="";if(typeof n=="string"){const r=/\.(\w{3,4})(?:$|\?|#)/i.exec(n);r&&(t=r[1].toLowerCase())}for(let r=bg.length-1;r>=0;--r){const s=bg[r];if(s.test&&s.test(n,t))return new s(n,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Go{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,r,s,a,c,f,m){if(arguments.length>8)throw new Error("max arguments reached");const{name:_,items:w}=this;this._aliasCount++;for(let d=0,v=w.length;d<v;d++)w[d][_](e,t,r,s,a,c,f,m);return w===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Go.prototype,{dispatch:{value:Go.prototype.emit},run:{value:Go.prototype.emit}});class nd{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Go("setRealSize"),this.onUpdate=new Go("update"),this.onError=new Go("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class Hf extends nd{constructor(e,t){const{width:r,height:s}=t||{};if(!r||!s)throw new Error("BufferResource width or height invalid");super(r,s),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,r){const s=e.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,this.unpackAlignment),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===ps.UNPACK);const a=t.realWidth,c=t.realHeight;return r.width===a&&r.height===c?s.texSubImage2D(t.target,0,0,0,a,c,t.format,r.type,this.data):(r.width=a,r.height=c,s.texImage2D(t.target,0,r.internalFormat,a,c,0,t.format,r.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const Db={scaleMode:pl.NEAREST,alphaMode:ps.NPM},Sg=class zc extends ld{constructor(e=null,t=null){super(),t=Object.assign({},zc.defaultOptions,t);const{alphaMode:r,mipmap:s,anisotropicLevel:a,scaleMode:c,width:f,height:m,wrapMode:_,format:w,type:d,target:v,resolution:b,resourceOptions:T}=t;e&&!(e instanceof nd)&&(e=ax(e,T),e.internal=!0),this.resolution=b||mt.RESOLUTION,this.width=Math.round((f||0)*this.resolution)/this.resolution,this.height=Math.round((m||0)*this.resolution)/this.resolution,this._mipmap=s,this.anisotropicLevel=a,this._wrapMode=_,this._scaleMode=c,this.format=w,this.type=d,this.target=v,this.alphaMode=r,this.uid=cc(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=f>0&&m>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let r;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,r=!0),r&&this.dirtyStyleId++,this}setSize(e,t,r){return r=r||this.resolution,this.setRealSize(e*r,t*r,r)}setRealSize(e,t,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=C_(this.realWidth)&&C_(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete tu[this.cacheId],delete Ea[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),zc.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,r=mt.STRICT_TEXTURE_CACHE){const s=typeof e=="string";let a=null;if(s)a=e;else{if(!e._pixiId){const f=t?.pixiIdPrefix||"pixiid";e._pixiId=`${f}_${cc()}`}a=e._pixiId}let c=tu[a];if(s&&r&&!c)throw new Error(`The cacheId "${a}" does not exist in BaseTextureCache.`);return c||(c=new zc(e,t),c.cacheId=a,zc.addToCache(c,a)),c}static fromBuffer(e,t,r,s){e=e||new Float32Array(t*r*4);const a=new Hf(e,{width:t,height:r,...s?.resourceOptions});let c,f;return e instanceof Float32Array?(c=tt.RGBA,f=It.FLOAT):e instanceof Int32Array?(c=tt.RGBA_INTEGER,f=It.INT):e instanceof Uint32Array?(c=tt.RGBA_INTEGER,f=It.UNSIGNED_INT):e instanceof Int16Array?(c=tt.RGBA_INTEGER,f=It.SHORT):e instanceof Uint16Array?(c=tt.RGBA_INTEGER,f=It.UNSIGNED_SHORT):e instanceof Int8Array?(c=tt.RGBA,f=It.BYTE):(c=tt.RGBA,f=It.UNSIGNED_BYTE),a.internal=!0,new zc(a,Object.assign({},Db,{type:f,format:c},s))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),tu[t]&&tu[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),tu[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=tu[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete tu[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete tu[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};Sg.defaultOptions={mipmap:Na.POW2,anisotropicLevel:0,scaleMode:pl.LINEAR,wrapMode:yl.CLAMP,alphaMode:ps.UNPACK,target:Yc.TEXTURE_2D,format:tt.RGBA,type:It.UNSIGNED_BYTE},Sg._globalBatch=0;let jt=Sg;class Eg{constructor(){this.texArray=null,this.blend=0,this.type=Bo.TRIANGLES,this.start=0,this.size=0,this.data=null}}let Lb=0;class dn{constructor(e,t=!0,r=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=t,this.id=Lb++,this.disposeRunner=new Go("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?Da.ELEMENT_ARRAY_BUFFER:Da.ARRAY_BUFFER}get index(){return this.type===Da.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new dn(e)}}class Ef{constructor(e,t=0,r=!1,s=It.FLOAT,a,c,f,m=1){this.buffer=e,this.size=t,this.normalized=r,this.type=s,this.stride=a,this.start=c,this.instance=f,this.divisor=m}destroy(){this.buffer=null}static from(e,t,r,s,a){return new Ef(e,t,r,s,a)}}const Nb={Float32Array,Uint32Array,Int32Array,Uint8Array};function Fb(n,e){let t=0,r=0;const s={};for(let m=0;m<n.length;m++)r+=e[m],t+=n[m].length;const a=new ArrayBuffer(t*4);let c=null,f=0;for(let m=0;m<n.length;m++){const _=e[m],w=n[m],d=ox(w);s[d]||(s[d]=new Nb[d](a)),c=s[d];for(let v=0;v<w.length;v++){const b=(v/_|0)*r+f,T=v%_;c[b+T]=w[v]}f+=_}return new Float32Array(a)}const D_={5126:4,5123:2,5121:1};let Bb=0;const Ub={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class fu{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=Bb++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Go("disposeGeometry"),this.refCount=0}addAttribute(e,t,r=0,s=!1,a,c,f,m=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof dn||(t instanceof Array&&(t=new Float32Array(t)),t=new dn(t));const _=e.split("|");if(_.length>1){for(let d=0;d<_.length;d++)this.addAttribute(_[d],t,r,s,a);return this}let w=this.buffers.indexOf(t);return w===-1&&(this.buffers.push(t),w=this.buffers.length-1),this.attributes[e]=new Ef(w,r,s,a,c,f,m),this.instanced=this.instanced||m,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof dn||(e instanceof Array&&(e=new Uint16Array(e)),e=new dn(e)),e.type=Da.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],t=[],r=new dn;let s;for(s in this.attributes){const a=this.attributes[s],c=this.buffers[a.buffer];e.push(c.data),t.push(a.size*D_[a.type]/4),a.buffer=0}for(r.data=Fb(e,t),s=0;s<this.buffers.length;s++)this.buffers[s]!==this.indexBuffer&&this.buffers[s].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new fu;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new dn(this.buffers[t].data.slice(0));for(const t in this.attributes){const r=this.attributes[t];e.attributes[t]=new Ef(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Da.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new fu,r=[],s=[],a=[];let c;for(let f=0;f<e.length;f++){c=e[f];for(let m=0;m<c.buffers.length;m++)s[m]=s[m]||0,s[m]+=c.buffers[m].data.length,a[m]=0}for(let f=0;f<c.buffers.length;f++)r[f]=new Ub[ox(c.buffers[f].data)](s[f]),t.buffers[f]=new dn(r[f]);for(let f=0;f<e.length;f++){c=e[f];for(let m=0;m<c.buffers.length;m++)r[m].set(c.buffers[m].data,a[m]),a[m]+=c.buffers[m].data.length}if(t.attributes=c.attributes,c.indexBuffer){t.indexBuffer=t.buffers[c.buffers.indexOf(c.indexBuffer)],t.indexBuffer.type=Da.ELEMENT_ARRAY_BUFFER;let f=0,m=0,_=0,w=0;for(let d=0;d<c.buffers.length;d++)if(c.buffers[d]!==c.indexBuffer){w=d;break}for(const d in c.attributes){const v=c.attributes[d];(v.buffer|0)===w&&(m+=v.size*D_[v.type]/4)}for(let d=0;d<e.length;d++){const v=e[d].indexBuffer.data;for(let b=0;b<v.length;b++)t.indexBuffer.data[b+_]+=f;f+=e[d].buffers[w].data.length/m,_+=v.length}}return t}}class lx extends fu{constructor(e=!1){super(),this._buffer=new dn(null,e,!1),this._indexBuffer=new dn(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,It.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,It.FLOAT).addAttribute("aColor",this._buffer,4,!0,It.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,It.FLOAT).addIndex(this._indexBuffer)}}const Tf=Math.PI*2,Gb=180/Math.PI,jb=Math.PI/180;var Yn=(n=>(n[n.POLY=0]="POLY",n[n.RECT=1]="RECT",n[n.CIRC=2]="CIRC",n[n.ELIP=3]="ELIP",n[n.RREC=4]="RREC",n))(Yn||{});class er{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new er(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}}er.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Vd=[new er,new er,new er,new er];class zt{constructor(e=0,t=0,r=0,s=0){this.x=Number(e),this.y=Number(t),this.width=Number(r),this.height=Number(s),this.type=Yn.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new zt(0,0,0,0)}clone(){return new zt(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t){const ie=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=ie)return!1;const ye=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>ye}const r=this.left,s=this.right,a=this.top,c=this.bottom;if(s<=r||c<=a)return!1;const f=Vd[0].set(e.left,e.top),m=Vd[1].set(e.left,e.bottom),_=Vd[2].set(e.right,e.top),w=Vd[3].set(e.right,e.bottom);if(_.x<=f.x||m.y<=f.y)return!1;const d=Math.sign(t.a*t.d-t.b*t.c);if(d===0||(t.apply(f,f),t.apply(m,m),t.apply(_,_),t.apply(w,w),Math.max(f.x,m.x,_.x,w.x)<=r||Math.min(f.x,m.x,_.x,w.x)>=s||Math.max(f.y,m.y,_.y,w.y)<=a||Math.min(f.y,m.y,_.y,w.y)>=c))return!1;const v=d*(m.y-f.y),b=d*(f.x-m.x),T=v*r+b*a,R=v*s+b*a,k=v*r+b*c,L=v*s+b*c;if(Math.max(T,R,k,L)<=v*f.x+b*f.y||Math.min(T,R,k,L)>=v*w.x+b*w.y)return!1;const W=d*(f.y-_.y),z=d*(_.x-f.x),te=W*r+z*a,K=W*s+z*a,de=W*r+z*c,F=W*s+z*c;return!(Math.max(te,K,de,F)<=W*f.x+z*f.y||Math.min(te,K,de,F)>=W*w.x+z*w.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),s=Math.max(this.y,e.y),a=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(r-t,0),this.y=s,this.height=Math.max(a-s,0),this}ceil(e=1,t=.001){const r=Math.ceil((this.x+this.width-t)*e)/e,s=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=r-this.x,this.height=s-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),s=Math.min(this.y,e.y),a=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=r-t,this.y=s,this.height=a-s,this}}zt.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Vf{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.radius=r,this.type=Yn.CIRC}clone(){return new Vf(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const r=this.radius*this.radius;let s=this.x-e,a=this.y-t;return s*=s,a*=a,s+a<=r}getBounds(){return new zt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Vf.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Wf{constructor(e=0,t=0,r=0,s=0){this.x=e,this.y=t,this.width=r,this.height=s,this.type=Yn.ELIP}clone(){return new Wf(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let r=(e-this.x)/this.width,s=(t-this.y)/this.height;return r*=r,s*=s,r+s<=1}getBounds(){return new zt(this.x-this.width,this.y-this.height,this.width,this.height)}}Wf.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class lc{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const r=[];for(let s=0,a=t.length;s<a;s++)r.push(t[s].x,t[s].y);t=r}this.points=t,this.type=Yn.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),t=new lc(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let r=!1;const s=this.points.length/2;for(let a=0,c=s-1;a<s;c=a++){const f=this.points[a*2],m=this.points[a*2+1],_=this.points[c*2],w=this.points[c*2+1];m>t!=w>t&&e<(_-f)*((t-m)/(w-m))+f&&(r=!r)}return r}}lc.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((n,e)=>`${n}, ${e}`,"")}]`};class $f{constructor(e=0,t=0,r=0,s=0,a=20){this.x=e,this.y=t,this.width=r,this.height=s,this.radius=a,this.type=Yn.RREC}clone(){return new $f(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+r&&t<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;let s=e-(this.x+r),a=t-(this.y+r);const c=r*r;if(s*s+a*a<=c||(s=e-(this.x+this.width-r),s*s+a*a<=c)||(a=t-(this.y+this.height-r),s*s+a*a<=c)||(s=e-(this.x+r),s*s+a*a<=c))return!0}return!1}}$f.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Lr{constructor(e=1,t=0,r=0,s=1,a=0,c=0){this.array=null,this.a=e,this.b=t,this.c=r,this.d=s,this.tx=a,this.ty=c}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,r,s,a,c){return this.a=e,this.b=t,this.c=r,this.d=s,this.tx=a,this.ty=c,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,t){t=t||new er;const r=e.x,s=e.y;return t.x=this.a*r+this.c*s+this.tx,t.y=this.b*r+this.d*s+this.ty,t}applyInverse(e,t){t=t||new er;const r=1/(this.a*this.d+this.c*-this.b),s=e.x,a=e.y;return t.x=this.d*r*s+-this.c*r*a+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*a+-this.b*r*s+(-this.ty*this.a+this.tx*this.b)*r,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),s=this.a,a=this.c,c=this.tx;return this.a=s*t-this.b*r,this.b=s*r+this.b*t,this.c=a*t-this.d*r,this.d=a*r+this.d*t,this.tx=c*t-this.ty*r,this.ty=c*r+this.ty*t,this}append(e){const t=this.a,r=this.b,s=this.c,a=this.d;return this.a=e.a*t+e.b*s,this.b=e.a*r+e.b*a,this.c=e.c*t+e.d*s,this.d=e.c*r+e.d*a,this.tx=e.tx*t+e.ty*s+this.tx,this.ty=e.tx*r+e.ty*a+this.ty,this}setTransform(e,t,r,s,a,c,f,m,_){return this.a=Math.cos(f+_)*a,this.b=Math.sin(f+_)*a,this.c=-Math.sin(f-m)*c,this.d=Math.cos(f-m)*c,this.tx=e-(r*this.a+s*this.c),this.ty=t-(r*this.b+s*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const r=this.a,s=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,r=this.b,s=this.c,a=this.d,c=e.pivot,f=-Math.atan2(-s,a),m=Math.atan2(r,t),_=Math.abs(f+m);return _<1e-5||Math.abs(Tf-_)<1e-5?(e.rotation=m,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=f,e.skew.y=m),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(s*s+a*a),e.position.x=this.tx+(c.x*t+c.y*s),e.position.y=this.ty+(c.x*r+c.y*a),e}invert(){const e=this.a,t=this.b,r=this.c,s=this.d,a=this.tx,c=e*s-t*r;return this.a=s/c,this.b=-t/c,this.c=-r/c,this.d=e/c,this.tx=(r*this.ty-s*a)/c,this.ty=-(e*this.ty-t*a)/c,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Lr;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new Lr}static get TEMP_MATRIX(){return new Lr}}Lr.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Ju=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ec=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],tc=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],rc=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Tg=[],ux=[],Wd=Math.sign;function zb(){for(let n=0;n<16;n++){const e=[];Tg.push(e);for(let t=0;t<16;t++){const r=Wd(Ju[n]*Ju[t]+tc[n]*ec[t]),s=Wd(ec[n]*Ju[t]+rc[n]*ec[t]),a=Wd(Ju[n]*tc[t]+tc[n]*rc[t]),c=Wd(ec[n]*tc[t]+rc[n]*rc[t]);for(let f=0;f<16;f++)if(Ju[f]===r&&ec[f]===s&&tc[f]===a&&rc[f]===c){e.push(f);break}}}for(let n=0;n<16;n++){const e=new Lr;e.set(Ju[n],ec[n],tc[n],rc[n],0,0),ux.push(e)}}zb();const Wr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>Ju[n],uY:n=>ec[n],vX:n=>tc[n],vY:n=>rc[n],inv:n=>n&8?n&15:-n&7,add:(n,e)=>Tg[n][e],sub:(n,e)=>Tg[n][Wr.inv(e)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,e)=>Math.abs(n)*2<=Math.abs(e)?e>=0?Wr.S:Wr.N:Math.abs(e)*2<=Math.abs(n)?n>0?Wr.E:Wr.W:e>0?n>0?Wr.SE:Wr.SW:n>0?Wr.NE:Wr.NW,matrixAppendRotationInv:(n,e,t=0,r=0)=>{const s=ux[Wr.inv(e)];s.tx=t,s.ty=r,n.append(s)}};class Ra{constructor(e,t,r=0,s=0){this._x=r,this._y=s,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new Ra(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}Ra.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const Ag=class{constructor(){this.worldTransform=new Lr,this.localTransform=new Lr,this.position=new Ra(this.onChange,this,0,0),this.scale=new Ra(this.onChange,this,1,1),this.pivot=new Ra(this.onChange,this,0,0),this.skew=new Ra(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const n=this.localTransform;this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale.x,n.b=this._sx*this.scale.x,n.c=this._cy*this.scale.y,n.d=this._sy*this.scale.y,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(n){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==n._worldID){const t=n.worldTransform,r=this.worldTransform;r.a=e.a*t.a+e.b*t.c,r.b=e.a*t.b+e.b*t.d,r.c=e.c*t.a+e.d*t.c,r.d=e.c*t.b+e.d*t.d,r.tx=e.tx*t.a+e.ty*t.c+t.tx,r.ty=e.tx*t.b+e.ty*t.d+t.ty,this._parentID=n._worldID,this._worldID++}}setFromMatrix(n){n.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(n){this._rotation!==n&&(this._rotation=n,this.updateSkew())}};Ag.IDENTITY=new Ag;let Xf=Ag;Xf.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var Hb=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,Vb=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function L_(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}function Vm(n){const e=new Array(n);for(let t=0;t<e.length;t++)e[t]=!1;return e}function cx(n,e){switch(n){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Vm(2*e);case"bvec3":return Vm(3*e);case"bvec4":return Vm(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Zc=[{test:n=>n.type==="float"&&n.size===1&&!n.isArray,code:n=>`
            if(uv["${n}"] !== ud["${n}"].value)
            {
                ud["${n}"].value = uv["${n}"]
                gl.uniform1f(ud["${n}"].location, uv["${n}"])
            }
            `},{test:(n,e)=>(n.type==="sampler2D"||n.type==="samplerCube"||n.type==="sampler2DArray")&&n.size===1&&!n.isArray&&(e==null||e.castToBaseTexture!==void 0),code:n=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${n}"], t);

            if(ud["${n}"].value !== t)
            {
                ud["${n}"].value = t;
                gl.uniform1i(ud["${n}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(n,e)=>n.type==="mat3"&&n.size===1&&!n.isArray&&e.a!==void 0,code:n=>`
            gl.uniformMatrix3fv(ud["${n}"].location, false, uv["${n}"].toArray(true));
            `,codeUbo:n=>`
                var ${n}_matrix = uv.${n}.toArray(true);

                data[offset] = ${n}_matrix[0];
                data[offset+1] = ${n}_matrix[1];
                data[offset+2] = ${n}_matrix[2];
        
                data[offset + 4] = ${n}_matrix[3];
                data[offset + 5] = ${n}_matrix[4];
                data[offset + 6] = ${n}_matrix[5];
        
                data[offset + 8] = ${n}_matrix[6];
                data[offset + 9] = ${n}_matrix[7];
                data[offset + 10] = ${n}_matrix[8];
            `},{test:(n,e)=>n.type==="vec2"&&n.size===1&&!n.isArray&&e.x!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${n}"].location, v.x, v.y);
                }`,codeUbo:n=>`
                v = uv.${n};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:n=>n.type==="vec2"&&n.size===1&&!n.isArray,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${n}"].location, v[0], v[1]);
                }
            `},{test:(n,e)=>n.type==="vec4"&&n.size===1&&!n.isArray&&e.width!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${n}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(n,e)=>n.type==="vec4"&&n.size===1&&!n.isArray&&e.red!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${n}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(n,e)=>n.type==="vec3"&&n.size===1&&!n.isArray&&e.red!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${n}"].location, v.red, v.green, v.blue)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:n=>n.type==="vec4"&&n.size===1&&!n.isArray,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${n}"].location, v[0], v[1], v[2], v[3])
                }`}],Wb={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},$b={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Xb(n,e){const t=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const r in n.uniforms){const s=e[r];if(!s){n.uniforms[r]?.group===!0&&(n.uniforms[r].ubo?t.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${r}, '${r}');
                    `):t.push(`
                        renderer.shader.syncUniformGroup(uv.${r}, syncData);
                    `));continue}const a=n.uniforms[r];let c=!1;for(let f=0;f<Zc.length;f++)if(Zc[f].test(s,a)){t.push(Zc[f].code(r,a)),c=!0;break}if(!c){const f=(s.size===1&&!s.isArray?Wb:$b)[s.type].replace("location",`ud["${r}"].location`);t.push(`
            cu = ud["${r}"];
            cv = cu.value;
            v = uv["${r}"];
            ${f};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}const hx={};let $d=hx;function qb(){if($d===hx||$d?.isContextLost()){const n=mt.ADAPTER.createCanvas();let e;mt.PREFER_ENV>=hc.WEBGL2&&(e=n.getContext("webgl2",{})),e||(e=n.getContext("webgl",{})||n.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),$d=e}return $d}let Xd;function Kb(){if(!Xd){Xd=io.MEDIUM;const n=qb();if(n&&n.getShaderPrecisionFormat){const e=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);e&&(Xd=e.precision?io.HIGH:io.MEDIUM)}}return Xd}function N_(n,e){const t=n.getShaderSource(e).split(`
`).map((_,w)=>`${w}: ${_}`),r=n.getShaderInfoLog(e),s=r.split(`
`),a={},c=s.map(_=>parseFloat(_.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(_=>_&&!a[_]?(a[_]=!0,!0):!1),f=[""];c.forEach(_=>{t[_-1]=`%c${t[_-1]}%c`,f.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const m=t.join(`
`);f[0]=m,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn(...f),console.groupEnd()}function Yb(n,e,t,r){n.getProgramParameter(e,n.LINK_STATUS)||(n.getShaderParameter(t,n.COMPILE_STATUS)||N_(n,t),n.getShaderParameter(r,n.COMPILE_STATUS)||N_(n,r),console.error("PixiJS Error: Could not initialize shader."),n.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",n.getProgramInfoLog(e)))}const Qb={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function dx(n){return Qb[n]}let qd=null;const F_={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function fx(n,e){if(!qd){const t=Object.keys(F_);qd={};for(let r=0;r<t.length;++r){const s=t[r];qd[n[s]]=F_[s]}}return qd[e]}function B_(n,e,t){if(n.substring(0,9)!=="precision"){let r=e;return e===io.HIGH&&t!==io.HIGH&&(r=io.MEDIUM),`precision ${r} float;
${n}`}else if(t!==io.HIGH&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}let jh;function Zb(){if(typeof jh=="boolean")return jh;try{jh=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{jh=!1}return jh}let Jb=0;const Kd={},Cg=class Hc{constructor(e,t,r="pixi-shader",s={}){this.extra={},this.id=Jb++,this.vertexSrc=e||Hc.defaultVertexSrc,this.fragmentSrc=t||Hc.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=s,this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),Kd[r]?(Kd[r]++,r+=`-${Kd[r]}`):Kd[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}
${this.fragmentSrc}`,this.vertexSrc=B_(this.vertexSrc,Hc.defaultVertexPrecision,io.HIGH),this.fragmentSrc=B_(this.fragmentSrc,Hc.defaultFragmentPrecision,Kb())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return Vb}static get defaultFragmentSrc(){return Hb}static from(e,t,r){const s=e+t;let a=R_[s];return a||(R_[s]=a=new Hc(e,t,r)),a}};Cg.defaultVertexPrecision=io.HIGH,Cg.defaultFragmentPrecision=ml.apple.device?io.HIGH:io.MEDIUM;let gl=Cg,eS=0;class jo{constructor(e,t,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=eS++,this.static=!!t,this.ubo=!!r,e instanceof dn?(this.buffer=e,this.buffer.type=Da.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new dn(new Float32Array(1)),this.buffer.type=Da.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,r){if(!this.ubo)this.uniforms[e]=new jo(t,r);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,t,r){return new jo(e,t,r)}static uboFrom(e,t){return new jo(e,t??!0,!0)}}class La{constructor(e,t){this.uniformBindCount=0,this.program=e,t?t instanceof jo?this.uniformGroup=t:this.uniformGroup=new jo(t):this.uniformGroup=new jo({}),this.disposeRunner=new Go("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const r in t.uniforms){const s=t.uniforms[r];if(s.group===!0&&this.checkUniformExists(e,s))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,r){const s=gl.from(e,t);return new La(s,r)}}class tS{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const r=new Int32Array(e);for(let a=0;a<e;a++)r[a]=a;this.defaultGroupCache[e]=jo.from({uSamplers:r},!0);let s=this.fragTemplate;s=s.replace(/%count%/gi,`${e}`),s=s.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new gl(this.vertexSrc,s)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new Lr,default:this.defaultGroupCache[e]};return new La(this.programCache[e],t)}generateSampleSrc(e){let t="";t+=`
`,t+=`
`;for(let r=0;r<e;r++)r>0&&(t+=`
else `),r<e-1&&(t+=`if(vTextureId < ${r}.5)`),t+=`
{`,t+=`
	color = texture2D(uSamplers[${r}], vTextureCoord);`,t+=`
}`;return t+=`
`,t+=`
`,t}}class Ig{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function rS(){return!ml.apple.device}function nS(n){let e=!0;const t=mt.ADAPTER.getNavigator();if(ml.tablet||ml.phone){if(ml.apple.device){const r=t.userAgent.match(/OS (\d+)_(\d+)?/);r&&parseInt(r[1],10)<11&&(e=!1)}if(ml.android.device){const r=t.userAgent.match(/Android\s([0-9.]*)/);r&&parseInt(r[1],10)<7&&(e=!1)}}return e?n:4}class qf{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var iS=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,sS=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Xh=class Do extends qf{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=lx,this.vertexSize=6,this.state=Ua.for2d(),this.size=Do.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??nS(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??rS(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return Jt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return sS}static get defaultFragmentTemplate(){return iS}setShaderGenerator({vertex:e=Do.defaultVertexSrc,fragment:t=Do.defaultFragmentTemplate}={}){this.shaderGenerator=new tS(e,t)}contextChange(){const e=this.renderer.gl;mt.PREFER_ENV===hc.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Do.defaultMaxTextures),this.maxTextures=Ob(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=Do,r=this.size/4,s=Math.floor(r/this.maxTextures)+1;for(;e.length<r;)e.push(new Eg);for(;t.length<s;)t.push(new Ig);for(let a=0;a<this.maxTextures;a++)this._tempBoundTextures[a]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,r=Do._textureArrayPool,s=this.renderer.batch,a=this._tempBoundTextures,c=this.renderer.textureGC.count;let f=++jt._globalBatch,m=0,_=r[0],w=0;s.copyBoundTextures(a,t);for(let d=0;d<this._bufferSize;++d){const v=e[d];e[d]=null,v._batchEnabled!==f&&(_.count>=t&&(s.boundArray(_,a,f,t),this.buildDrawCalls(_,w,d),w=d,_=r[++m],++f),v._batchEnabled=f,v.touched=c,_.elements[_.count++]=v)}_.count>0&&(s.boundArray(_,a,f,t),this.buildDrawCalls(_,w,this._bufferSize),++m,++f);for(let d=0;d<a.length;d++)a[d]=null;jt._globalBatch=f}buildDrawCalls(e,t,r){const{_bufferedElements:s,_attributeBuffer:a,_indexBuffer:c,vertexSize:f}=this,m=Do._drawCallPool;let _=this._dcIndex,w=this._aIndex,d=this._iIndex,v=m[_];v.start=this._iIndex,v.texArray=e;for(let b=t;b<r;++b){const T=s[b],R=T._texture.baseTexture,k=ix[R.alphaMode?1:0][T.blendMode];s[b]=null,t<b&&v.blend!==k&&(v.size=d-v.start,t=b,v=m[++_],v.texArray=e,v.start=d),this.packInterleavedGeometry(T,a,c,w,d),w+=T.vertexData.length/2*f,d+=T.indices.length,v.blend=k}t<r&&(v.size=d-v.start,++_),this._dcIndex=_,this._aIndex=w,this._iIndex=d}bindAndClearTexArray(e){const t=this.renderer.texture;for(let r=0;r<e.count;r++)t.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:r}=this;Do.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:r}=this.renderer,s=Do._drawCallPool;let a=null;for(let c=0;c<e;c++){const{texArray:f,type:m,size:_,start:w,blend:d}=s[c];a!==f&&(a=f,this.bindAndClearTexArray(f)),this.state.blendMode=d,r.set(this.state),t.drawElements(m,_,t.UNSIGNED_SHORT,w*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Do.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=Sf(Math.ceil(e/8)),r=I_(t),s=t*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new wg(s*this.vertexSize*4)),a}getIndexBuffer(e){const t=Sf(Math.ceil(e/12)),r=I_(t),s=t*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let a=this._iBuffers[r];return a||(this._iBuffers[r]=a=new Uint16Array(s)),a}packInterleavedGeometry(e,t,r,s,a){const{uint32View:c,float32View:f}=t,m=s/this.vertexSize,_=e.uvs,w=e.indices,d=e.vertexData,v=e._texture.baseTexture._batchLocation,b=Math.min(e.worldAlpha,1),T=kr.shared.setValue(e._tintRGB).toPremultiplied(b,e._texture.baseTexture.alphaMode>0);for(let R=0;R<d.length;R+=2)f[s++]=d[R],f[s++]=d[R+1],f[s++]=_[R],f[s++]=_[R+1],c[s++]=T,f[s++]=v;for(let R=0;R<w.length;R++)r[a++]=m+w[R]}};Xh.defaultBatchSize=4096,Xh.extension={name:"batch",type:ct.RendererPlugin},Xh._drawCallPool=[],Xh._textureArrayPool=[];let nc=Xh;St.add(nc);var oS=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,aS=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Pg=class qh extends La{constructor(e,t,r){const s=gl.from(e||qh.defaultVertexSrc,t||qh.defaultFragmentSrc);super(s,r),this.padding=0,this.resolution=qh.defaultResolution,this.multisample=qh.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Ua}apply(e,t,r,s,a){e.applyFilter(this,t,r,s)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return aS}static get defaultFragmentSrc(){return oS}};Pg.defaultResolution=1,Pg.defaultMultisample=_n.NONE;let Oi=Pg;class Af{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new kr(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:t,background:r,backgroundAlpha:s}=e,a=r??t;a!==void 0&&(this.color=a),this.alpha=s}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}Af.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Af.extension={type:[ct.RendererSystem,ct.CanvasRendererSystem],name:"background"};St.add(Af);class px{constructor(e){this.renderer=e,this.emptyRenderer=new qf(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:r}=this.renderer.texture;for(let s=t-1;s>=0;--s)e[s]=r[s]||null,e[s]&&(e[s]._batchLocation=s)}boundArray(e,t,r,s){const{elements:a,ids:c,count:f}=e;let m=0;for(let _=0;_<f;_++){const w=a[_],d=w._batchLocation;if(d>=0&&d<s&&t[d]===w){c[_]=d;continue}for(;m<s;){const v=t[m];if(v&&v._batchEnabled===r&&v._batchLocation===m){m++;continue}c[_]=m,w._batchLocation=m,t[m]=w;break}}}destroy(){this.renderer=null}}px.extension={type:ct.RendererSystem,name:"batch"};St.add(px);let U_=0;class Cf{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=U_++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,r=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:r,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=U_++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;t.addEventListener!==void 0&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let r;if(mt.PREFER_ENV>=hc.WEBGL2&&(r=e.getContext("webgl2",t)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const s=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Cf.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Cf.extension={type:ct.RendererSystem,name:"context"};St.add(Cf);class Rg{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Go("disposeFramebuffer"),this.multisample=_n.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new jt(null,{scaleMode:pl.NEAREST,resolution:1,mipmap:Na.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new jt(null,{scaleMode:pl.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Na.OFF,format:tt.DEPTH_COMPONENT,type:It.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const s=this.colorTextures[r],a=s.resolution;s.setSize(e/a,t/a)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(e/r,t/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class mx extends jt{constructor(e={}){if(typeof e=="number"){const t=arguments[0],r=arguments[1],s=arguments[2],a=arguments[3];e={width:t,height:r,scaleMode:s,resolution:a}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=_n.NONE),super(null,e),this.mipmap=Na.OFF,this.valid=!0,this._clear=new kr([0,0,0,0]),this.framebuffer=new Rg(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class _l extends nd{constructor(e){const t=e,r=t.naturalWidth||t.videoWidth||t.displayWidth||t.width,s=t.naturalHeight||t.videoHeight||t.displayHeight||t.height;super(r,s),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,r){r===void 0&&!t.startsWith("data:")?e.crossOrigin=Rb(t):r!==!1&&(e.crossOrigin=typeof r=="string"?r:"anonymous")}upload(e,t,r,s){const a=e.gl,c=t.realWidth,f=t.realHeight;if(s=s||this.source,typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement&&s.readyState<=1)return!1;return a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===ps.UNPACK),!this.noSubImage&&t.target===a.TEXTURE_2D&&r.width===c&&r.height===f?a.texSubImage2D(a.TEXTURE_2D,0,0,0,t.format,r.type,s):(r.width=c,r.height=f,a.texImage2D(t.target,0,r.internalFormat,t.format,r.type,s)),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(t,r),super.update()}dispose(){this.source=null}}class gx extends _l{constructor(e,t){if(t=t||{},typeof e=="string"){const r=new Image;_l.crossOrigin(r,e,t.crossorigin),r.src=e,e=r}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??mt.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.bitmap=null,this._load=null,t.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((t,r)=>{const s=this.source;this.url=s.src;const a=()=>{this.destroyed||(s.onload=null,s.onerror=null,this.update(),this._load=null,this.createBitmap?t(this.process()):t(this))};s.complete&&s.src?a():(s.onload=a,s.onerror=c=>{r(c),this.onError.emit(c)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,r=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then(s=>s.blob()).then(s=>t(s,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ps.UNPACK?"premultiply":"none"})).then(s=>this.destroyed?Promise.reject():(this.bitmap=s,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,r){if(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,r,this.bitmap),!this.preserveBitmap){let s=!0;const a=t._glTextures;for(const c in a){const f=a[c];if(f!==r&&f.dirtyId!==t.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class my{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,r){const s=t.width,a=t.height;if(r){const c=e.width/2/s,f=e.height/2/a,m=e.x/s+c,_=e.y/a+f;r=Wr.add(r,Wr.NW),this.x0=m+c*Wr.uX(r),this.y0=_+f*Wr.uY(r),r=Wr.add(r,2),this.x1=m+c*Wr.uX(r),this.y1=_+f*Wr.uY(r),r=Wr.add(r,2),this.x2=m+c*Wr.uX(r),this.y2=_+f*Wr.uY(r),r=Wr.add(r,2),this.x3=m+c*Wr.uX(r),this.y3=_+f*Wr.uY(r)}else this.x0=e.x/s,this.y0=e.y/a,this.x1=(e.x+e.width)/s,this.y1=e.y/a,this.x2=(e.x+e.width)/s,this.y2=(e.y+e.height)/a,this.x3=e.x/s,this.y3=(e.y+e.height)/a;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}my.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const G_=new my;function Yd(n){n.destroy=function(){},n.on=function(){},n.once=function(){},n.emit=function(){}}class lt extends ld{constructor(e,t,r,s,a,c,f){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new zt(0,0,1,1)),e instanceof lt&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=s,this.valid=!1,this.destroyed=!1,this._uvs=G_,this.uvMatrix=null,this.orig=r||t,this._rotate=Number(a||0),a===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=c?new er(c.x,c.y):new er(0,0),this.defaultBorders=f,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:t}=this.baseTexture;t?.url&&Ea[t.url]&&lt.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,lt.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),r=new lt(this.baseTexture,!this.noFrame&&e,t,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=e),r}updateUvs(){this._uvs===G_&&(this._uvs=new my),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},r=mt.STRICT_TEXTURE_CACHE){const s=typeof e=="string";let a=null;if(s)a=e;else if(e instanceof jt){if(!e.cacheId){const f=t?.pixiIdPrefix||"pixiid";e.cacheId=`${f}-${cc()}`,jt.addToCache(e,e.cacheId)}a=e.cacheId}else{if(!e._pixiId){const f=t?.pixiIdPrefix||"pixiid";e._pixiId=`${f}_${cc()}`}a=e._pixiId}let c=Ea[a];if(s&&r&&!c)throw new Error(`The cacheId "${a}" does not exist in TextureCache.`);return!c&&!(e instanceof jt)?(t.resolution||(t.resolution=vl(e)),c=new lt(new jt(e,t)),c.baseTexture.cacheId=a,jt.addToCache(c.baseTexture,a),lt.addToCache(c,a)):!c&&e instanceof jt&&(c=new lt(e),lt.addToCache(c,a)),c}static fromURL(e,t){const r=Object.assign({autoLoad:!1},t?.resourceOptions),s=lt.from(e,Object.assign({resourceOptions:r},t),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(()=>Promise.resolve(s))}static fromBuffer(e,t,r,s){return new lt(jt.fromBuffer(e,t,r,s))}static fromLoader(e,t,r,s){const a=new jt(e,Object.assign({scaleMode:jt.defaultOptions.scaleMode,resolution:vl(t)},s)),{resource:c}=a;c instanceof gx&&(c.url=t);const f=new lt(a);return r||(r=t),jt.addToCache(f.baseTexture,r),lt.addToCache(f,r),r!==t&&(jt.addToCache(f.baseTexture,t),lt.addToCache(f,t)),f.baseTexture.valid?Promise.resolve(f):new Promise(m=>{f.baseTexture.once("loaded",()=>m(f))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Ea[t]&&Ea[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),Ea[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=Ea[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete Ea[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)Ea[e.textureCacheIds[t]]===e&&delete Ea[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:r,width:s,height:a}=e,c=t+s>this.baseTexture.width,f=r+a>this.baseTexture.height;if(c||f){const m=c&&f?"and":"or",_=`X: ${t} + ${s} = ${t+s} > ${this.baseTexture.width}`,w=`Y: ${r} + ${a} = ${r+a} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${_} ${m} ${w}`)}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return lt._EMPTY||(lt._EMPTY=new lt(new jt),Yd(lt._EMPTY),Yd(lt._EMPTY.baseTexture)),lt._EMPTY}static get WHITE(){if(!lt._WHITE){const e=mt.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),lt._WHITE=new lt(jt.from(e)),Yd(lt._WHITE),Yd(lt._WHITE.baseTexture)}return lt._WHITE}}class dc extends lt{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,r=!0){const s=this.baseTexture.resolution,a=Math.round(e*s)/s,c=Math.round(t*s)/s;this.valid=a>0&&c>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=c,r&&this.baseTexture.resize(a,c),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new dc(new mx(e))}}class yx{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t,r=_n.NONE){const s=new mx(Object.assign({width:e,height:t,resolution:1,multisample:r},this.textureOptions));return new dc(s)}getOptimalTexture(e,t,r=1,s=_n.NONE){let a;e=Math.max(Math.ceil(e*r-1e-6),1),t=Math.max(Math.ceil(t*r-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||t!==this._pixelsHeight?(e=Sf(e),t=Sf(t),a=((e&65535)<<16|t&65535)>>>0,s>1&&(a+=s*4294967296)):a=s>1?-s:-1,this.texturePool[a]||(this.texturePool[a]=[]);let c=this.texturePool[a].pop();return c||(c=this.createTexture(e,t,s)),c.filterPoolKey=a,c.setResolution(r),c}getFilterTexture(e,t,r){const s=this.getOptimalTexture(e.width,e.height,t||e.resolution,r||_n.NONE);return s.filterFrame=e.filterFrame,s}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const t in this.texturePool){const r=this.texturePool[t];if(r)for(let s=0;s<r.length;s++)r[s].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const t in this.texturePool){if(!(Number(t)<0))continue;const r=this.texturePool[t];if(r)for(let s=0;s<r.length;s++)r[s].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}yx.SCREEN_KEY=-1;class lS extends fu{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class vx extends fu{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new dn(this.vertices),this.uvBuffer=new dn(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let r=0,s=0;return this.uvs[0]=r,this.uvs[1]=s,this.uvs[2]=r+t.width/e.width,this.uvs[3]=s,this.uvs[4]=r+t.width/e.width,this.uvs[5]=s+t.height/e.height,this.uvs[6]=r,this.uvs[7]=s+t.height/e.height,r=t.x,s=t.y,this.vertices[0]=r,this.vertices[1]=s,this.vertices[2]=r+t.width,this.vertices[3]=s,this.vertices[4]=r+t.width,this.vertices[5]=s+t.height,this.vertices[6]=r,this.vertices[7]=s+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class uS{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=_n.NONE,this.sourceFrame=new zt,this.destinationFrame=new zt,this.bindingSourceFrame=new zt,this.bindingDestinationFrame=new zt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Qd=[new er,new er,new er,new er],Wm=new Lr;class _x{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new yx,this.statePool=[],this.quad=new lS,this.quadUv=new vx,this.tempRect=new zt,this.activeState={},this.globalUniforms=new jo({outputFrame:new zt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const r=this.renderer,s=this.defaultFilterStack,a=this.statePool.pop()||new uS,c=r.renderTexture;let f,m;if(c.current){const k=c.current;f=k.resolution,m=k.multisample}else f=r.resolution,m=r.multisample;let _=t[0].resolution||f,w=t[0].multisample??m,d=t[0].padding,v=t[0].autoFit,b=t[0].legacy??!0;for(let k=1;k<t.length;k++){const L=t[k];_=Math.min(_,L.resolution||f),w=Math.min(w,L.multisample??m),d=this.useMaxPadding?Math.max(d,L.padding):d+L.padding,v=v&&L.autoFit,b=b||(L.legacy??!0)}s.length===1&&(this.defaultFilterStack[0].renderTexture=c.current),s.push(a),a.resolution=_,a.multisample=w,a.legacy=b,a.target=e,a.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),a.sourceFrame.pad(d);const T=this.tempRect.copyFrom(c.sourceFrame);r.projection.transform&&this.transformAABB(Wm.copyFrom(r.projection.transform).invert(),T),v?(a.sourceFrame.fit(T),(a.sourceFrame.width<=0||a.sourceFrame.height<=0)&&(a.sourceFrame.width=0,a.sourceFrame.height=0)):a.sourceFrame.intersects(T)||(a.sourceFrame.width=0,a.sourceFrame.height=0),this.roundFrame(a.sourceFrame,c.current?c.current.resolution:r.resolution,c.sourceFrame,c.destinationFrame,r.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,_,w),a.filters=t,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;const R=this.tempRect;R.x=0,R.y=0,R.width=a.sourceFrame.width,R.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(c.sourceFrame),a.bindingDestinationFrame.copyFrom(c.destinationFrame),a.transform=r.projection.transform,r.projection.transform=null,c.bind(a.renderTexture,a.sourceFrame,R),r.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),r=t.filters;this.activeState=t;const s=this.globalUniforms.uniforms;s.outputFrame=t.sourceFrame,s.resolution=t.resolution;const a=s.inputSize,c=s.inputPixel,f=s.inputClamp;if(a[0]=t.destinationFrame.width,a[1]=t.destinationFrame.height,a[2]=1/a[0],a[3]=1/a[1],c[0]=Math.round(a[0]*t.resolution),c[1]=Math.round(a[1]*t.resolution),c[2]=1/c[0],c[3]=1/c[1],f[0]=.5*c[2],f[1]=.5*c[3],f[2]=t.sourceFrame.width*a[2]-.5*c[2],f[3]=t.sourceFrame.height*a[3]-.5*c[3],t.legacy){const _=s.filterArea;_[0]=t.destinationFrame.width,_[1]=t.destinationFrame.height,_[2]=t.sourceFrame.x,_[3]=t.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();const m=e[e.length-1];if(this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,t.renderTexture,m.renderTexture,Ia.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let _=t.renderTexture,w=this.getOptimalFilterTexture(_.width,_.height,t.resolution);w.filterFrame=_.filterFrame;let d=0;for(d=0;d<r.length-1;++d){d===1&&t.multisample>1&&(w=this.getOptimalFilterTexture(_.width,_.height,t.resolution),w.filterFrame=_.filterFrame),r[d].apply(this,_,w,Ia.CLEAR,t);const v=_;_=w,w=v}r[d].apply(this,_,m.renderTexture,Ia.BLEND,t),d>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(_),this.returnFilterTexture(w)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=Ia.CLEAR){const{renderTexture:r,state:s}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e?.filterFrame){const c=this.tempRect;c.x=0,c.y=0,c.width=e.filterFrame.width,c.height=e.filterFrame.height,r.bind(e,e.filterFrame,c)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const a=s.stateId&1||this.forceClear;(t===Ia.CLEAR||t===Ia.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,r,s){const a=this.renderer;a.state.set(e.state),this.bindAndClear(r,s),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,a.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),a.geometry.bind(this.quadUv),a.geometry.draw(Bo.TRIANGLES)):(a.geometry.bind(this.quad),a.geometry.draw(Bo.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:r,destinationFrame:s}=this.activeState,{orig:a}=t._texture,c=e.set(s.width,0,0,s.height,r.x,r.y),f=t.worldTransform.copyTo(Lr.TEMP_MATRIX);return f.invert(),c.prepend(f),c.scale(1/a.width,1/a.height),c.translate(t.anchor.x,t.anchor.y),c}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,r=1,s=_n.NONE){return this.texturePool.getOptimalTexture(e,t,r,s)}getFilterTexture(e,t,r){if(typeof e=="number"){const a=e;e=t,t=a}e=e||this.activeState.renderTexture;const s=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,r||_n.NONE);return s.filterFrame=e.filterFrame,s}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const r=Qd[0],s=Qd[1],a=Qd[2],c=Qd[3];r.set(t.left,t.top),s.set(t.left,t.bottom),a.set(t.right,t.top),c.set(t.right,t.bottom),e.apply(r,r),e.apply(s,s),e.apply(a,a),e.apply(c,c);const f=Math.min(r.x,s.x,a.x,c.x),m=Math.min(r.y,s.y,a.y,c.y),_=Math.max(r.x,s.x,a.x,c.x),w=Math.max(r.y,s.y,a.y,c.y);t.x=f,t.y=m,t.width=_-f,t.height=w-m}roundFrame(e,t,r,s,a){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(a){const{a:c,b:f,c:m,d:_}=a;if((Math.abs(f)>1e-4||Math.abs(m)>1e-4)&&(Math.abs(c)>1e-4||Math.abs(_)>1e-4))return}a=a?Wm.copyFrom(a):Wm.identity(),a.translate(-r.x,-r.y).scale(s.width/r.width,s.height/r.height).translate(s.x,s.y),this.transformAABB(a,e),e.ceil(t),this.transformAABB(a.invert(),e)}}}_x.extension={type:ct.RendererSystem,name:"filter"};St.add(_x);class cS{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=_n.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const hS=new zt;class xx{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new Rg(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new zt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let t=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;mt.PREFER_ENV===hc.WEBGL_LEGACY&&(t=null,r=null),t?e.drawBuffers=s=>t.drawBuffersWEBGL(s):(this.hasMRT=!1,e.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,r=0){const{gl:s}=this;if(e){const a=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,s.bindFramebuffer(s.FRAMEBUFFER,a.framebuffer)),a.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,a.mipLevel=r),a.dirtyId!==e.dirtyId&&(a.dirtyId=e.dirtyId,a.dirtyFormat!==e.dirtyFormat?(a.dirtyFormat=e.dirtyFormat,a.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):a.dirtySize!==e.dirtySize&&(a.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let c=0;c<e.colorTextures.length;c++){const f=e.colorTextures[c];this.renderer.texture.unbind(f.parentTextureArray||f)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const c=t.width>>r,f=t.height>>r,m=c/t.width;this.setViewport(t.x*m,t.y*m,c,f)}else{const c=e.width>>r,f=e.height>>r;this.setViewport(0,0,c,f)}}else this.current&&(this.current=null,s.bindFramebuffer(s.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,r,s){const a=this.viewport;e=Math.round(e),t=Math.round(t),r=Math.round(r),s=Math.round(s),(a.width!==r||a.height!==s||a.x!==e||a.y!==t)&&(a.x=e,a.y=t,a.width=r,a.height=s,this.gl.viewport(e,t,r,s))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,r,s,a=gg.COLOR|gg.DEPTH){const{gl:c}=this;c.clearColor(e,t,r,s),c.clear(a)}initFramebuffer(e){const{gl:t}=this,r=new cS(t.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r}resizeFramebuffer(e){const{gl:t}=this,r=e.glFramebuffers[this.CONTEXT_UID];if(r.stencil){t.bindRenderbuffer(t.RENDERBUFFER,r.stencil);let c;this.renderer.context.webGLVersion===1?c=t.DEPTH_STENCIL:e.depth&&e.stencil?c=t.DEPTH24_STENCIL8:e.depth?c=t.DEPTH_COMPONENT24:c=t.STENCIL_INDEX8,r.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,c,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,c,e.width,e.height)}const s=e.colorTextures;let a=s.length;t.drawBuffers||(a=Math.min(a,1));for(let c=0;c<a;c++){const f=s[c],m=f.parentTextureArray||f;this.renderer.texture.bind(m,0),c===0&&r.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,m._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:r}=this,s=e.glFramebuffers[this.CONTEXT_UID],a=e.colorTextures;let c=a.length;r.drawBuffers||(c=Math.min(c,1)),s.multisample>1&&this.canMultisampleFramebuffer(e)?s.msaaBuffer=s.msaaBuffer||r.createRenderbuffer():s.msaaBuffer&&(r.deleteRenderbuffer(s.msaaBuffer),s.msaaBuffer=null,s.blitFramebuffer&&(s.blitFramebuffer.dispose(),s.blitFramebuffer=null));const f=[];for(let m=0;m<c;m++){const _=a[m],w=_.parentTextureArray||_;this.renderer.texture.bind(w,0),m===0&&s.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,s.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,s.multisample,w._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,s.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+m,_.target,w._glTextures[this.CONTEXT_UID].texture,t),f.push(r.COLOR_ATTACHMENT0+m))}if(f.length>1&&r.drawBuffers(f),e.depthTexture&&this.writeDepthTexture){const m=e.depthTexture;this.renderer.texture.bind(m,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,m._glTextures[this.CONTEXT_UID].texture,t)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){s.stencil=s.stencil||r.createRenderbuffer();let m,_;this.renderer.context.webGLVersion===1?(m=r.DEPTH_STENCIL_ATTACHMENT,_=r.DEPTH_STENCIL):e.depth&&e.stencil?(m=r.DEPTH_STENCIL_ATTACHMENT,_=r.DEPTH24_STENCIL8):e.depth?(m=r.DEPTH_ATTACHMENT,_=r.DEPTH_COMPONENT24):(m=r.STENCIL_ATTACHMENT,_=r.STENCIL_INDEX8),r.bindRenderbuffer(r.RENDERBUFFER,s.stencil),s.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,s.multisample,_,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,_,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,m,r.RENDERBUFFER,s.stencil)}else s.stencil&&(r.deleteRenderbuffer(s.stencil),s.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let r=_n.NONE;if(e<=1||t===null)return r;for(let s=0;s<t.length;s++)if(t[s]<=e){r=t[s];break}return r===1&&(r=_n.NONE),r}blit(e,t,r){const{current:s,renderer:a,gl:c,CONTEXT_UID:f}=this;if(a.context.webGLVersion!==2||!s)return;const m=s.glFramebuffers[f];if(!m)return;if(!e){if(!m.msaaBuffer)return;const w=s.colorTextures[0];if(!w)return;m.blitFramebuffer||(m.blitFramebuffer=new Rg(s.width,s.height),m.blitFramebuffer.addColorTexture(0,w)),e=m.blitFramebuffer,e.colorTextures[0]!==w&&(e.colorTextures[0]=w,e.dirtyId++,e.dirtyFormat++),(e.width!==s.width||e.height!==s.height)&&(e.width=s.width,e.height=s.height,e.dirtyId++,e.dirtySize++)}t||(t=hS,t.width=s.width,t.height=s.height),r||(r=t);const _=t.width===r.width&&t.height===r.height;this.bind(e),c.bindFramebuffer(c.READ_FRAMEBUFFER,m.framebuffer),c.blitFramebuffer(t.left,t.top,t.right,t.bottom,r.left,r.top,r.right,r.bottom,c.COLOR_BUFFER_BIT,_?c.NEAREST:c.LINEAR),c.bindFramebuffer(c.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){const r=e.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(!r)return;delete e.glFramebuffers[this.CONTEXT_UID];const a=this.managedFramebuffers.indexOf(e);a>=0&&this.managedFramebuffers.splice(a,1),e.disposeRunner.remove(this),t||(s.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&s.deleteRenderbuffer(r.msaaBuffer),r.stencil&&s.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,t)}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<t.length;r++)this.disposeFramebuffer(t[r],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;const r=e.width,s=e.height,a=this.gl,c=t.stencil=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,c);let f,m;this.renderer.context.webGLVersion===1?(f=a.DEPTH_STENCIL_ATTACHMENT,m=a.DEPTH_STENCIL):e.depth?(f=a.DEPTH_STENCIL_ATTACHMENT,m=a.DEPTH24_STENCIL8):(f=a.STENCIL_ATTACHMENT,m=a.STENCIL_INDEX8),t.msaaBuffer?a.renderbufferStorageMultisample(a.RENDERBUFFER,t.multisample,m,r,s):a.renderbufferStorage(a.RENDERBUFFER,m,r,s),a.framebufferRenderbuffer(a.FRAMEBUFFER,f,a.RENDERBUFFER,c)}reset(){this.current=this.unknownFramebuffer,this.viewport=new zt}destroy(){this.renderer=null}}xx.extension={type:ct.RendererSystem,name:"framebuffer"};St.add(xx);const $m={5126:4,5123:2,5121:1};class wx{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){let r=this.renderer.context.extensions.vertexArrayObject;mt.PREFER_ENV===hc.WEBGL_LEGACY&&(r=null),r?(e.createVertexArray=()=>r.createVertexArrayOES(),e.bindVertexArray=s=>r.bindVertexArrayOES(s),e.deleteVertexArray=s=>r.deleteVertexArrayOES(s)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(t.webGLVersion!==2){const r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=(s,a)=>r.vertexAttribDivisorANGLE(s,a),e.drawElementsInstanced=(s,a,c,f,m)=>r.drawElementsInstancedANGLE(s,a,c,f,m),e.drawArraysInstanced=(s,a,c,f)=>r.drawArraysInstancedANGLE(s,a,c,f)):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:r}=this;let s=e.glVertexArrayObjects[this.CONTEXT_UID],a=!1;s||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=s={},a=!0);const c=s[t.program.id]||this.initGeometryVao(e,t,a);this._activeGeometry=e,this._activeVao!==c&&(this._activeVao=c,this.hasVao?r.bindVertexArray(c):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let r=0;r<e.buffers.length;r++){const s=e.buffers[r];t.update(s)}}checkCompatibility(e,t){const r=e.attributes,s=t.attributeData;for(const a in s)if(!r[a])throw new Error(`shader and geometry incompatible, geometry missing the "${a}" attribute`)}getSignature(e,t){const r=e.attributes,s=t.attributeData,a=["g",e.id];for(const c in r)s[c]&&a.push(c,s[c].location);return a.join("-")}initGeometryVao(e,t,r=!0){const s=this.gl,a=this.CONTEXT_UID,c=this.renderer.buffer,f=t.program;f.glPrograms[a]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,f);const m=this.getSignature(e,f),_=e.glVertexArrayObjects[this.CONTEXT_UID];let w=_[m];if(w)return _[f.id]=w,w;const d=e.buffers,v=e.attributes,b={},T={};for(const R in d)b[R]=0,T[R]=0;for(const R in v)!v[R].size&&f.attributeData[R]?v[R].size=f.attributeData[R].size:v[R].size||console.warn(`PIXI Geometry attribute '${R}' size cannot be determined (likely the bound shader does not have the attribute)`),b[v[R].buffer]+=v[R].size*$m[v[R].type];for(const R in v){const k=v[R],L=k.size;k.stride===void 0&&(b[k.buffer]===L*$m[k.type]?k.stride=0:k.stride=b[k.buffer]),k.start===void 0&&(k.start=T[k.buffer],T[k.buffer]+=L*$m[k.type])}w=s.createVertexArray(),s.bindVertexArray(w);for(let R=0;R<d.length;R++){const k=d[R];c.bind(k),r&&k._glBuffers[a].refCount++}return this.activateVao(e,f),_[f.id]=w,_[m]=w,s.bindVertexArray(null),c.unbind(Da.ARRAY_BUFFER),w}disposeGeometry(e,t){if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const r=e.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=e.buffers,c=this.renderer?.buffer;if(e.disposeRunner.remove(this),!!r){if(c)for(let f=0;f<a.length;f++){const m=a[f]._glBuffers[this.CONTEXT_UID];m&&(m.refCount--,m.refCount===0&&!t&&c.dispose(a[f],t))}if(!t){for(const f in r)if(f[0]==="g"){const m=r[f];this._activeVao===m&&this.unbind(),s.deleteVertexArray(m)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let r=0;r<t.length;r++)this.disposeGeometry(this.managedGeometries[t[r]],e)}activateVao(e,t){const r=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,c=e.buffers,f=e.attributes;e.indexBuffer&&a.bind(e.indexBuffer);let m=null;for(const _ in f){const w=f[_],d=c[w.buffer],v=d._glBuffers[s];if(t.attributeData[_]){m!==v&&(a.bind(d),m=v);const b=t.attributeData[_].location;if(r.enableVertexAttribArray(b),r.vertexAttribPointer(b,w.size,w.type||r.FLOAT,w.normalized,w.stride,w.start),w.instance)if(this.hasInstance)r.vertexAttribDivisor(b,w.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,r,s){const{gl:a}=this,c=this._activeGeometry;if(c.indexBuffer){const f=c.indexBuffer.data.BYTES_PER_ELEMENT,m=f===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;f===2||f===4&&this.canUseUInt32ElementIndex?c.instanced?a.drawElementsInstanced(e,t||c.indexBuffer.data.length,m,(r||0)*f,s||1):a.drawElements(e,t||c.indexBuffer.data.length,m,(r||0)*f):console.warn("unsupported index buffer type: uint32")}else c.instanced?a.drawArraysInstanced(e,r,t||c.getSize(),s||1):a.drawArrays(e,r,t||c.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}wx.extension={type:ct.RendererSystem,name:"geometry"};St.add(wx);const j_=new Lr;class gy{constructor(e,t){this._texture=e,this.mapCoord=new Lr,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){t===void 0&&(t=e);const r=this.mapCoord;for(let s=0;s<e.length;s+=2){const a=e[s],c=e[s+1];t[s]=a*r.a+c*r.c+r.tx,t[s+1]=a*r.b+c*r.d+r.ty}return t}update(e){const t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const s=t.orig,a=t.trim;a&&(j_.set(s.width/a.width,0,0,s.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(j_));const c=t.baseTexture,f=this.uClampFrame,m=this.clampMargin/c.resolution,_=this.clampOffset;return f[0]=(t._frame.x+m+_)/c.width,f[1]=(t._frame.y+m+_)/c.height,f[2]=(t._frame.x+t._frame.width-m+_)/c.width,f[3]=(t._frame.y+t._frame.height-m+_)/c.height,this.uClampOffset[0]=_/c.realWidth,this.uClampOffset[1]=_/c.realHeight,this.isSimple=t._frame.width===c.width&&t._frame.height===c.height&&t.rotate===0,!0}}var dS=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,fS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class pS extends Oi{constructor(e,t,r){let s=null;typeof e!="string"&&t===void 0&&r===void 0&&(s=e,e=void 0,t=void 0,r=void 0),super(e||fS,t||dS,r),this.maskSprite=s,this.maskMatrix=new Lr}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,r,s){const a=this._maskSprite,c=a._texture;c.valid&&(c.uvMatrix||(c.uvMatrix=new gy(c,0)),c.uvMatrix.update(),this.uniforms.npmAlpha=c.baseTexture.alphaMode?0:1,this.uniforms.mask=c,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(c.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=c.uvMatrix.uClampFrame,e.applyFilter(this,t,r,s))}}class mS{constructor(e=null){this.type=An.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Oi.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=An.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class bx{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let r=t;if(!r.isMaskData){const a=this.maskDataPool.pop()||new mS;a.pooled=!0,a.maskObject=t,r=a}const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(s),r._colorMask=s?s._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==An.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case An.SCISSOR:this.renderer.scissor.push(r);break;case An.STENCIL:this.renderer.stencil.push(r);break;case An.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case An.COLOR:this.pushColorMask(r);break}r.type===An.SPRITE&&this.maskStack.push(r)}pop(e){const t=this.maskStack.pop();if(!(!t||t._target!==e)){if(t.enabled)switch(t.type){case An.SCISSOR:this.renderer.scissor.pop(t);break;case An.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case An.SPRITE:this.popSpriteMask(t);break;case An.COLOR:this.popColorMask(t);break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){const r=this.maskStack[this.maskStack.length-1];r.type===An.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=An.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=An.SCISSOR:e.type=An.STENCIL:e.type=An.COLOR}pushSpriteMask(e){const{maskObject:t}=e,r=e._target;let s=e._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex],s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new pS])),s[0].resolution=e.resolution,s[0].multisample=e.multisample,s[0].maskSprite=t;const a=r.filterArea;r.filterArea=t.getBounds(!0),this.renderer.filter.push(r,s),r.filterArea=a,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,r=e._colorMask=t&e.colorMask;r!==t&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}popColorMask(e){const t=e._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==t&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}destroy(){this.renderer=null}}bx.extension={type:ct.RendererSystem,name:"mask"};St.add(bx);class Sx{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,r=this.getStackLength();this.maskStack=e;const s=this.getStackLength();s!==r&&(s===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const z_=new Lr,H_=[],Ex=class mf extends Sx{constructor(e){super(e),this.glConst=mt.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:r}=e,{renderer:s}=this,a=s.renderTexture,c=r.getBounds(!0,H_.pop()??new zt);this.roundFrameToPixels(c,a.current?a.current.resolution:s.resolution,a.sourceFrame,a.destinationFrame,s.projection.transform),t&&c.fit(t),e._scissorRectLocal=c}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:r,c:s,d:a}=e;return(Math.abs(r)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(a)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||mf.isMatrixRotated(t.worldTransform)||mf.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const r=e._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(e,t,r,s,a){mf.isMatrixRotated(a)||(a=a?z_.copyFrom(a):z_.identity(),a.translate(-r.x,-r.y).scale(s.width/r.width,s.height/r.height).translate(s.x,s.y),this.renderer.filter.transformAABB(a,e),e.fit(s),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&H_.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};Ex.extension={type:ct.RendererSystem,name:"scissor"};let gS=Ex;St.add(gS);class Tx extends Sx{constructor(e){super(e),this.glConst=mt.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:r}=this.renderer,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++;const a=e._colorMask;a!==0&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,s,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,a!==0&&(e._colorMask=a,r.colorMask((a&1)!==0,(a&2)!==0,(a&4)!==0,(a&8)!==0)),this._useCurrent()}pop(e){const t=this.renderer.gl;if(this.getStackLength()===0)t.disable(t.STENCIL_TEST);else{const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=r?r._colorMask:15;s!==0&&(r._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,s!==0&&(r._colorMask=s,t.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}Tx.extension={type:ct.RendererSystem,name:"stencil"};St.add(Tx);class Ax{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return Jt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return Jt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return Jt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}Ax.extension={type:[ct.RendererSystem,ct.CanvasRendererSystem],name:"_plugin"};St.add(Ax);class Cx{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Lr,this.transform=null}update(e,t,r,s){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,s),this.transform&&this.projectionMatrix.append(this.transform);const a=this.renderer;a.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,a.globalUniforms.update(),a.shader.shader&&a.shader.syncUniformGroup(a.shader.shader.uniforms.globals)}calculateProjection(e,t,r,s){const a=this.projectionMatrix,c=s?-1:1;a.identity(),a.a=1/t.width*2,a.d=c*(1/t.height*2),a.tx=-1-t.x*a.a,a.ty=-c-t.y*a.d}setTransform(e){}destroy(){this.renderer=null}}Cx.extension={type:ct.RendererSystem,name:"projection"};St.add(Cx);const yS=new Xf,V_=new zt;class Ix{constructor(e){this.renderer=e,this._tempMatrix=new Lr}generateTexture(e,t){const{region:r,...s}=t||{},a=r?.copyTo(V_)||e.getLocalBounds(V_,!0),c=s.resolution||this.renderer.resolution;a.width=Math.max(a.width,1/c),a.height=Math.max(a.height,1/c),s.width=a.width,s.height=a.height,s.resolution=c,s.multisample??(s.multisample=this.renderer.multisample);const f=dc.create(s);this._tempMatrix.tx=-a.x,this._tempMatrix.ty=-a.y;const m=e.transform;return e.transform=yS,this.renderer.render(e,{renderTexture:f,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=m,f}destroy(){}}Ix.extension={type:[ct.RendererSystem,ct.CanvasRendererSystem],name:"textureGenerator"};St.add(Ix);const Yu=new zt,zh=new zt;class Px{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new zt,this.destinationFrame=new zt,this.viewportFrame=new zt}contextChange(){const e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,r){const s=this.renderer;this.current=e;let a,c,f;e?(a=e.baseTexture,f=a.resolution,t||(Yu.width=e.frame.width,Yu.height=e.frame.height,t=Yu),r||(zh.x=e.frame.x,zh.y=e.frame.y,zh.width=t.width,zh.height=t.height,r=zh),c=a.framebuffer):(f=s.resolution,t||(Yu.width=s._view.screen.width,Yu.height=s._view.screen.height,t=Yu),r||(r=Yu,r.width=t.width,r.height=t.height));const m=this.viewportFrame;m.x=r.x*f,m.y=r.y*f,m.width=r.width*f,m.height=r.height*f,e||(m.y=s.view.height-(m.y+m.height)),m.ceil(),this.renderer.framebuffer.bind(c,m),this.renderer.projection.update(r,t,f,!c),e?this.renderer.mask.setMaskStack(a.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(r)}clear(e,t){const r=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,s=kr.shared.setValue(e||r);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&s.premultiply(s.alpha);const a=this.destinationFrame,c=this.current?this.current.baseTexture:this.renderer._view.screen,f=a.width!==c.width||a.height!==c.height;if(f){let{x:m,y:_,width:w,height:d}=this.viewportFrame;m=Math.round(m),_=Math.round(_),w=Math.round(w),d=Math.round(d),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(m,_,w,d)}this.renderer.framebuffer.clear(s.red,s.green,s.blue,s.alpha,t),f&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}Px.extension={type:ct.RendererSystem,name:"renderTexture"};St.add(Px);class vS{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function _S(n,e){const t={},r=e.getProgramParameter(n,e.ACTIVE_ATTRIBUTES);for(let s=0;s<r;s++){const a=e.getActiveAttrib(n,s);if(a.name.startsWith("gl_"))continue;const c=fx(e,a.type),f={type:c,name:a.name,size:dx(c),location:e.getAttribLocation(n,a.name)};t[a.name]=f}return t}function xS(n,e){const t={},r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let s=0;s<r;s++){const a=e.getActiveUniform(n,s),c=a.name.replace(/\[.*?\]$/,""),f=!!a.name.match(/\[.*?\]$/),m=fx(e,a.type);t[c]={name:c,index:s,type:m,size:a.size,isArray:f,value:cx(m,a.size)}}return t}function wS(n,e){const t=L_(n,n.VERTEX_SHADER,e.vertexSrc),r=L_(n,n.FRAGMENT_SHADER,e.fragmentSrc),s=n.createProgram();n.attachShader(s,t),n.attachShader(s,r);const a=e.extra?.transformFeedbackVaryings;if(a&&(typeof n.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):n.transformFeedbackVaryings(s,a.names,a.bufferMode==="separate"?n.SEPARATE_ATTRIBS:n.INTERLEAVED_ATTRIBS)),n.linkProgram(s),n.getProgramParameter(s,n.LINK_STATUS)||Yb(n,s,t,r),e.attributeData=_S(s,n),e.uniformData=xS(s,n),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const f=Object.keys(e.attributeData);f.sort((m,_)=>m>_?1:-1);for(let m=0;m<f.length;m++)e.attributeData[f[m]].location=m,n.bindAttribLocation(s,m,f[m]);n.linkProgram(s)}n.deleteShader(t),n.deleteShader(r);const c={};for(const f in e.uniformData){const m=e.uniformData[f];c[f]={location:n.getUniformLocation(s,f),value:cx(m.type,m.size)}}return new vS(s,c)}function bS(n,e,t,r,s){t.buffer.update(s)}const SS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Rx={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function ES(n){const e=n.map(a=>({data:a,offset:0,dataLen:0,dirty:0}));let t=0,r=0,s=0;for(let a=0;a<e.length;a++){const c=e[a];if(t=Rx[c.data.type],c.data.size>1&&(t=Math.max(t,16)*c.data.size),c.dataLen=t,r%t!==0&&r<16){const f=r%t%16;r+=f,s+=f}r+t>16?(s=Math.ceil(s/16)*16,c.offset=s,s+=t,r=t):(c.offset=s,r+=t,s+=t)}return s=Math.ceil(s/16)*16,{uboElements:e,size:s}}function TS(n,e){const t=[];for(const r in n)e[r]&&t.push(e[r]);return t.sort((r,s)=>r.index-s.index),t}function AS(n,e){if(!n.autoManage)return{size:0,syncFunc:bS};const t=TS(n.uniforms,e),{uboElements:r,size:s}=ES(t),a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let c=0;c<r.length;c++){const f=r[c],m=n.uniforms[f.data.name],_=f.data.name;let w=!1;for(let d=0;d<Zc.length;d++){const v=Zc[d];if(v.codeUbo&&v.test(f.data,m)){a.push(`offset = ${f.offset/4};`,Zc[d].codeUbo(f.data.name,m)),w=!0;break}}if(!w)if(f.data.size>1){const d=dx(f.data.type),v=Math.max(Rx[f.data.type]/16,1),b=d/v,T=(4-b%4)%4;a.push(`
                cv = ud.${_}.value;
                v = uv.${_};
                offset = ${f.offset/4};

                t = 0;

                for(var i=0; i < ${f.data.size*v}; i++)
                {
                    for(var j = 0; j < ${b}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${T};
                }

                `)}else{const d=SS[f.data.type];a.push(`
                cv = ud.${_}.value;
                v = uv.${_};
                offset = ${f.offset/4};
                ${d};
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}let CS=0;const Zd={textureCount:0,uboCount:0};class kx{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=CS++}systemCheck(){if(!Zb())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const r=e.program,s=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(s.program)),t||(Zd.textureCount=0,Zd.uboCount=0,this.syncUniformGroup(e.uniformGroup,Zd)),s}setUniforms(e){const t=this.shader.program,r=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(r.uniformData,e,this.renderer)}syncUniformGroup(e,t){const r=this.getGlProgram();(!e.static||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,t))}syncUniforms(e,t,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,r)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=Xb(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const r=this.getGlProgram();if(!e.static||e.dirtyId!==0||!r.uniformGroups[e.id]){e.dirtyId=0;const s=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,t);e.buffer.update(),s(r.uniformData,e.uniforms,this.renderer,Zd,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[t])}createSyncBufferGroup(e,t,r){const{gl:s}=this.renderer;this.renderer.buffer.bind(e.buffer);const a=this.gl.getUniformBlockIndex(t.program,r);t.uniformBufferBindings[r]=this.shader.uniformBindCount,s.uniformBlockBinding(t.program,a,this.shader.uniformBindCount),this.shader.uniformBindCount++;const c=this.getSignature(e,this.shader.program.uniformData,"ubo");let f=this._uboCache[c];if(f||(f=this._uboCache[c]=AS(e,this.shader.program.uniformData)),e.autoManage){const m=new Float32Array(f.size/4);e.buffer.update(m)}return t.uniformGroups[e.id]=f.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,r){const s=e.uniforms,a=[`${r}-`];for(const c in s)a.push(c),t[c]&&a.push(t[c].type);return a.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,r=e.program,s=wS(t,r);return r.glPrograms[this.renderer.CONTEXT_UID]=s,s}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}kx.extension={type:ct.RendererSystem,name:"shader"};St.add(kx);class If{constructor(e){this.renderer=e}run(e){const{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&console.log(`PixiJS 7.4.3 - ${t.rendererLogId} - https://pixijs.com`),t.resize(t.screen.width,t.screen.height)}destroy(){}}If.defaultOptions={hello:!1},If.extension={type:[ct.RendererSystem,ct.CanvasRendererSystem],name:"startup"};St.add(If);function IS(n,e=[]){return e[Dt.NORMAL]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.ADD]=[n.ONE,n.ONE],e[Dt.MULTIPLY]=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.SCREEN]=[n.ONE,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.OVERLAY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.DARKEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.LIGHTEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.COLOR_DODGE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.COLOR_BURN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.HARD_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.SOFT_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.DIFFERENCE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.EXCLUSION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.HUE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.SATURATION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.COLOR]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.LUMINOSITY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.NONE]=[0,0],e[Dt.NORMAL_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.ADD_NPM]=[n.SRC_ALPHA,n.ONE,n.ONE,n.ONE],e[Dt.SCREEN_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Dt.SRC_IN]=[n.DST_ALPHA,n.ZERO],e[Dt.SRC_OUT]=[n.ONE_MINUS_DST_ALPHA,n.ZERO],e[Dt.SRC_ATOP]=[n.DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[Dt.DST_OVER]=[n.ONE_MINUS_DST_ALPHA,n.ONE],e[Dt.DST_IN]=[n.ZERO,n.SRC_ALPHA],e[Dt.DST_OUT]=[n.ZERO,n.ONE_MINUS_SRC_ALPHA],e[Dt.DST_ATOP]=[n.ONE_MINUS_DST_ALPHA,n.SRC_ALPHA],e[Dt.XOR]=[n.ONE_MINUS_DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[Dt.SUBTRACT]=[n.ONE,n.ONE,n.ONE,n.ONE,n.FUNC_REVERSE_SUBTRACT,n.FUNC_ADD],e}const PS=0,RS=1,kS=2,MS=3,OS=4,DS=5,Mx=class kg{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Dt.NONE,this._blendEq=!1,this.map=[],this.map[PS]=this.setBlend,this.map[RS]=this.setOffset,this.map[kS]=this.setCullFace,this.map[MS]=this.setDepthTest,this.map[OS]=this.setFrontFace,this.map[DS]=this.setDepthMask,this.checks=[],this.defaultState=new Ua,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=IS(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,r=0;for(;t;)t&1&&this.map[r].call(this,!!(e.data&1<<r)),t=t>>1,r++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(kg.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(kg.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],r=this.gl;t.length===2?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const r=this.checks.indexOf(e);t&&r===-1?this.checks.push(e):!t&&r!==-1&&this.checks.splice(r,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};Mx.extension={type:ct.RendererSystem,name:"state"};let LS=Mx;St.add(LS);class NS extends ld{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter(s=>e.systems[s]),r=[...t,...Object.keys(e.systems).filter(s=>!t.includes(s))];for(const s of r)this.addSystem(e.systems[s],s)}addRunners(...e){e.forEach(t=>{this.runners[t]=new Go(t)})}addSystem(e,t){const r=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=r,this._systemsHash[t]=r;for(const s in this.runners)this.runners[s].add(r);return this}emitWithCustomOptions(e,t){const r=Object.keys(this._systemsHash);e.items.forEach(s=>{const a=r.find(c=>this._systemsHash[c]===s);s[e.name](t[a])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const Kh=class gf{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=gf.defaultMaxIdle,this.checkCountMax=gf.defaultCheckCountMax,this.mode=gf.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==hy.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let r=!1;for(let s=0;s<t.length;s++){const a=t[s];a.resource&&this.count-a.touched>this.maxIdle&&(e.destroyTexture(a,!0),t[s]=null,r=!0)}if(r){let s=0;for(let a=0;a<t.length;a++)t[a]!==null&&(t[s++]=t[a]);t.length=s}}unload(e){const t=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(let s=e.children.length-1;s>=0;s--)this.unload(e.children[s])}destroy(){this.renderer=null}};Kh.defaultMode=hy.AUTO,Kh.defaultMaxIdle=3600,Kh.defaultCheckCountMax=600,Kh.extension={type:ct.RendererSystem,name:"textureGC"};let ic=Kh;St.add(ic);class Xm{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=It.UNSIGNED_BYTE,this.internalFormat=tt.RGBA,this.samplerType=0}}function FS(n){let e;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?e={[n.RGB]:pt.FLOAT,[n.RGBA]:pt.FLOAT,[n.ALPHA]:pt.FLOAT,[n.LUMINANCE]:pt.FLOAT,[n.LUMINANCE_ALPHA]:pt.FLOAT,[n.R8]:pt.FLOAT,[n.R8_SNORM]:pt.FLOAT,[n.RG8]:pt.FLOAT,[n.RG8_SNORM]:pt.FLOAT,[n.RGB8]:pt.FLOAT,[n.RGB8_SNORM]:pt.FLOAT,[n.RGB565]:pt.FLOAT,[n.RGBA4]:pt.FLOAT,[n.RGB5_A1]:pt.FLOAT,[n.RGBA8]:pt.FLOAT,[n.RGBA8_SNORM]:pt.FLOAT,[n.RGB10_A2]:pt.FLOAT,[n.RGB10_A2UI]:pt.FLOAT,[n.SRGB8]:pt.FLOAT,[n.SRGB8_ALPHA8]:pt.FLOAT,[n.R16F]:pt.FLOAT,[n.RG16F]:pt.FLOAT,[n.RGB16F]:pt.FLOAT,[n.RGBA16F]:pt.FLOAT,[n.R32F]:pt.FLOAT,[n.RG32F]:pt.FLOAT,[n.RGB32F]:pt.FLOAT,[n.RGBA32F]:pt.FLOAT,[n.R11F_G11F_B10F]:pt.FLOAT,[n.RGB9_E5]:pt.FLOAT,[n.R8I]:pt.INT,[n.R8UI]:pt.UINT,[n.R16I]:pt.INT,[n.R16UI]:pt.UINT,[n.R32I]:pt.INT,[n.R32UI]:pt.UINT,[n.RG8I]:pt.INT,[n.RG8UI]:pt.UINT,[n.RG16I]:pt.INT,[n.RG16UI]:pt.UINT,[n.RG32I]:pt.INT,[n.RG32UI]:pt.UINT,[n.RGB8I]:pt.INT,[n.RGB8UI]:pt.UINT,[n.RGB16I]:pt.INT,[n.RGB16UI]:pt.UINT,[n.RGB32I]:pt.INT,[n.RGB32UI]:pt.UINT,[n.RGBA8I]:pt.INT,[n.RGBA8UI]:pt.UINT,[n.RGBA16I]:pt.INT,[n.RGBA16UI]:pt.UINT,[n.RGBA32I]:pt.INT,[n.RGBA32UI]:pt.UINT,[n.DEPTH_COMPONENT16]:pt.FLOAT,[n.DEPTH_COMPONENT24]:pt.FLOAT,[n.DEPTH_COMPONENT32F]:pt.FLOAT,[n.DEPTH_STENCIL]:pt.FLOAT,[n.DEPTH24_STENCIL8]:pt.FLOAT,[n.DEPTH32F_STENCIL8]:pt.FLOAT}:e={[n.RGB]:pt.FLOAT,[n.RGBA]:pt.FLOAT,[n.ALPHA]:pt.FLOAT,[n.LUMINANCE]:pt.FLOAT,[n.LUMINANCE_ALPHA]:pt.FLOAT,[n.DEPTH_STENCIL]:pt.FLOAT},e}function BS(n){let e;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?e={[It.UNSIGNED_BYTE]:{[tt.RGBA]:n.RGBA8,[tt.RGB]:n.RGB8,[tt.RG]:n.RG8,[tt.RED]:n.R8,[tt.RGBA_INTEGER]:n.RGBA8UI,[tt.RGB_INTEGER]:n.RGB8UI,[tt.RG_INTEGER]:n.RG8UI,[tt.RED_INTEGER]:n.R8UI,[tt.ALPHA]:n.ALPHA,[tt.LUMINANCE]:n.LUMINANCE,[tt.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[It.BYTE]:{[tt.RGBA]:n.RGBA8_SNORM,[tt.RGB]:n.RGB8_SNORM,[tt.RG]:n.RG8_SNORM,[tt.RED]:n.R8_SNORM,[tt.RGBA_INTEGER]:n.RGBA8I,[tt.RGB_INTEGER]:n.RGB8I,[tt.RG_INTEGER]:n.RG8I,[tt.RED_INTEGER]:n.R8I},[It.UNSIGNED_SHORT]:{[tt.RGBA_INTEGER]:n.RGBA16UI,[tt.RGB_INTEGER]:n.RGB16UI,[tt.RG_INTEGER]:n.RG16UI,[tt.RED_INTEGER]:n.R16UI,[tt.DEPTH_COMPONENT]:n.DEPTH_COMPONENT16},[It.SHORT]:{[tt.RGBA_INTEGER]:n.RGBA16I,[tt.RGB_INTEGER]:n.RGB16I,[tt.RG_INTEGER]:n.RG16I,[tt.RED_INTEGER]:n.R16I},[It.UNSIGNED_INT]:{[tt.RGBA_INTEGER]:n.RGBA32UI,[tt.RGB_INTEGER]:n.RGB32UI,[tt.RG_INTEGER]:n.RG32UI,[tt.RED_INTEGER]:n.R32UI,[tt.DEPTH_COMPONENT]:n.DEPTH_COMPONENT24},[It.INT]:{[tt.RGBA_INTEGER]:n.RGBA32I,[tt.RGB_INTEGER]:n.RGB32I,[tt.RG_INTEGER]:n.RG32I,[tt.RED_INTEGER]:n.R32I},[It.FLOAT]:{[tt.RGBA]:n.RGBA32F,[tt.RGB]:n.RGB32F,[tt.RG]:n.RG32F,[tt.RED]:n.R32F,[tt.DEPTH_COMPONENT]:n.DEPTH_COMPONENT32F},[It.HALF_FLOAT]:{[tt.RGBA]:n.RGBA16F,[tt.RGB]:n.RGB16F,[tt.RG]:n.RG16F,[tt.RED]:n.R16F},[It.UNSIGNED_SHORT_5_6_5]:{[tt.RGB]:n.RGB565},[It.UNSIGNED_SHORT_4_4_4_4]:{[tt.RGBA]:n.RGBA4},[It.UNSIGNED_SHORT_5_5_5_1]:{[tt.RGBA]:n.RGB5_A1},[It.UNSIGNED_INT_2_10_10_10_REV]:{[tt.RGBA]:n.RGB10_A2,[tt.RGBA_INTEGER]:n.RGB10_A2UI},[It.UNSIGNED_INT_10F_11F_11F_REV]:{[tt.RGB]:n.R11F_G11F_B10F},[It.UNSIGNED_INT_5_9_9_9_REV]:{[tt.RGB]:n.RGB9_E5},[It.UNSIGNED_INT_24_8]:{[tt.DEPTH_STENCIL]:n.DEPTH24_STENCIL8},[It.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[tt.DEPTH_STENCIL]:n.DEPTH32F_STENCIL8}}:e={[It.UNSIGNED_BYTE]:{[tt.RGBA]:n.RGBA,[tt.RGB]:n.RGB,[tt.ALPHA]:n.ALPHA,[tt.LUMINANCE]:n.LUMINANCE,[tt.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[It.UNSIGNED_SHORT_5_6_5]:{[tt.RGB]:n.RGB},[It.UNSIGNED_SHORT_4_4_4_4]:{[tt.RGBA]:n.RGBA},[It.UNSIGNED_SHORT_5_5_5_1]:{[tt.RGBA]:n.RGBA}},e}class Ox{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new jt,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=BS(e),this.samplerTypes=FS(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let s=0;s<t;s++)this.boundTextures[s]=null;this.emptyTextures={};const r=new Xm(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Xm(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let s=0;s<6;s++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let s=0;s<this.boundTextures.length;s++)this.bind(null,s)}bind(e,t=0){const{gl:r}=this;if(e=e?.castToBaseTexture(),e?.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const s=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(e.target,s.texture)),s.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),this.updateTexture(e)):s.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let s=0;s<r.length;s++)r[s]===this.unknownTexture&&this.bind(null,s)}for(let s=0;s<r.length;s++)r[s]===e&&(this.currentLocation!==s&&(t.activeTexture(t.TEXTURE0+s),this.currentLocation=s),t.bindTexture(e.target,this.emptyTextures[e.target].texture),r[s]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:r,CONTEXT_UID:s}=this;if(r)for(let a=e-1;a>=0;--a){const c=t[a];c&&c._glTextures[s].samplerType!==pt.FLOAT&&this.renderer.texture.unbind(c)}}initTexture(e){const t=new Xm(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){t.internalFormat=this.internalFormats[e.type]?.[e.format]??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??pt.FLOAT,this.webGLVersion===2&&e.type===It.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const r=this.renderer;if(this.initTextureType(e,t),e.resource?.upload(r,e,t))t.samplerType!==pt.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,a=e.realHeight,c=r.gl;(t.width!==s||t.height!==a||t.dirtyId<0)&&(t.width=s,t.height=a,c.texImage2D(e.target,0,t.internalFormat,s,a,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:r}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const s=this.managedTextures.indexOf(e);s!==-1&&Qc(this.managedTextures,s,1)}}updateTextureStyle(e){const t=e._glTextures[this.CONTEXT_UID];t&&((e.mipmap===Na.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?t.mipmap=!1:t.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?t.wrapMode=yl.CLAMP:t.wrapMode=e.wrapMode,e.resource?.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const r=this.gl;if(t.mipmap&&e.mipmap!==Na.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===pl.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const s=this.renderer.context.extensions.anisotropicFiltering;if(s&&e.anisotropicLevel>0&&e.scaleMode===pl.LINEAR){const a=Math.min(e.anisotropicLevel,r.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,s.TEXTURE_MAX_ANISOTROPY_EXT,a)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===pl.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===pl.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}Ox.extension={type:ct.RendererSystem,name:"texture"};St.add(Ox);class Dx{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:r}=this,s=e._glTransformFeedbacks[r]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,s)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:r,renderer:s}=this;t&&s.shader.bind(t),r.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:r,CONTEXT_UID:s}=this,a=t.createTransformFeedback();e._glTransformFeedbacks[s]=a,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,a);for(let c=0;c<e.buffers.length;c++){const f=e.buffers[c];f&&(r.buffer.update(f),f._glBuffers[s].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,c,f._glBuffers[s].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),a}disposeTransformFeedback(e,t){const r=e._glTransformFeedbacks[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this);const a=this.renderer.buffer;if(a)for(let c=0;c<e.buffers.length;c++){const f=e.buffers[c];if(!f)continue;const m=f._glBuffers[this.CONTEXT_UID];m&&(m.refCount--,m.refCount===0&&!t&&a.dispose(f,t))}r&&(t||s.deleteTransformFeedback(r),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Dx.extension={type:ct.RendererSystem,name:"transformFeedback"};St.add(Dx);class Pf{constructor(e){this.renderer=e}init(e){this.screen=new zt(0,0,e.width,e.height),this.element=e.view||mt.ADAPTER.createCanvas(),this.resolution=e.resolution||mt.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const r=this.element.width/this.resolution,s=this.element.height/this.resolution;this.screen.width=r,this.screen.height=s,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${s}px`),this.renderer.emit("resize",r,s),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){e&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}Pf.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},Pf.extension={type:[ct.RendererSystem,ct.CanvasRendererSystem],name:"_view"};St.add(Pf);mt.PREFER_ENV=hc.WEBGL2;mt.STRICT_TEXTURE_CACHE=!1;mt.RENDER_OPTIONS={...Cf.defaultOptions,...Af.defaultOptions,...Pf.defaultOptions,...If.defaultOptions};Object.defineProperties(mt,{WRAP_MODE:{get(){return jt.defaultOptions.wrapMode},set(n){Jt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),jt.defaultOptions.wrapMode=n}},SCALE_MODE:{get(){return jt.defaultOptions.scaleMode},set(n){Jt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),jt.defaultOptions.scaleMode=n}},MIPMAP_TEXTURES:{get(){return jt.defaultOptions.mipmap},set(n){Jt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),jt.defaultOptions.mipmap=n}},ANISOTROPIC_LEVEL:{get(){return jt.defaultOptions.anisotropicLevel},set(n){Jt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),jt.defaultOptions.anisotropicLevel=n}},FILTER_RESOLUTION:{get(){return Jt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Oi.defaultResolution},set(n){Oi.defaultResolution=n}},FILTER_MULTISAMPLE:{get(){return Jt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Oi.defaultMultisample},set(n){Oi.defaultMultisample=n}},SPRITE_MAX_TEXTURES:{get(){return nc.defaultMaxTextures},set(n){Jt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),nc.defaultMaxTextures=n}},SPRITE_BATCH_SIZE:{get(){return nc.defaultBatchSize},set(n){Jt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),nc.defaultBatchSize=n}},CAN_UPLOAD_SAME_BUFFER:{get(){return nc.canUploadSameBuffer},set(n){Jt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),nc.canUploadSameBuffer=n}},GC_MODE:{get(){return ic.defaultMode},set(n){Jt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),ic.defaultMode=n}},GC_MAX_IDLE:{get(){return ic.defaultMaxIdle},set(n){Jt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),ic.defaultMaxIdle=n}},GC_MAX_CHECK_COUNT:{get(){return ic.defaultCheckCountMax},set(n){Jt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),ic.defaultCheckCountMax=n}},PRECISION_VERTEX:{get(){return gl.defaultVertexPrecision},set(n){Jt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),gl.defaultVertexPrecision=n}},PRECISION_FRAGMENT:{get(){return gl.defaultFragmentPrecision},set(n){Jt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),gl.defaultFragmentPrecision=n}}});var pu=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(pu||{});class qm{constructor(e,t=null,r=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=r,this.once=s}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const Lx=class Rs{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new qm(null,null,1/0),this.deltaMS=1/Rs.targetFPMS,this.elapsedMS=1/Rs.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,r=pu.NORMAL){return this._addListener(new qm(e,t,r))}addOnce(e,t,r=pu.NORMAL){return this._addListener(new qm(e,t,r,!0))}_addListener(e){let t=this._head.next,r=this._head;if(!t)e.connect(r);else{for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}return this._startIfPossible(),this}remove(e,t){let r=this._head.next;for(;r;)r.match(e,t)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const a=e-this._lastFrame|0;if(a<this._minElapsedMS)return;this._lastFrame=e-a%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Rs.targetFPMS;const r=this._head;let s=r.next;for(;s;)s=s.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,t)/1e3,Rs.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Rs._shared){const e=Rs._shared=new Rs;e.autoStart=!0,e._protected=!0}return Rs._shared}static get system(){if(!Rs._system){const e=Rs._system=new Rs;e.autoStart=!0,e._protected=!0}return Rs._system}};Lx.targetFPMS=.06;let Un=Lx;Object.defineProperties(mt,{TARGET_FPMS:{get(){return Un.targetFPMS},set(n){Jt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Un.targetFPMS=n}}});class Nx{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,pu.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Un.shared:new Un,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}Nx.extension=ct.Application;St.add(Nx);const Fx=[];St.handleByList(ct.Renderer,Fx);function US(n){for(const e of Fx)if(e.test(n))return new e(n);throw new Error("Unable to auto-detect a suitable renderer.")}var GS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,jS=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const zS=GS,Bx=jS;class Ux{constructor(e){this.renderer=e}contextChange(e){let t;if(this.renderer.context.webGLVersion===1){const r=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,r)}else{const r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}t>=_n.HIGH?this.multisample=_n.HIGH:t>=_n.MEDIUM?this.multisample=_n.MEDIUM:t>=_n.LOW?this.multisample=_n.LOW:this.multisample=_n.NONE}destroy(){}}Ux.extension={type:ct.RendererSystem,name:"_multisample"};St.add(Ux);class HS{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class Gx{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:r}=this,s=e._glBuffers[r]||this.createGLBuffer(e);t.bindBuffer(e.type,s.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:r,CONTEXT_UID:s}=this;if(this.boundBufferBases[t]!==e){const a=e._glBuffers[s]||this.createGLBuffer(e);this.boundBufferBases[t]=e,r.bindBufferBase(r.UNIFORM_BUFFER,t,a.buffer)}}bindBufferRange(e,t,r){const{gl:s,CONTEXT_UID:a}=this;r=r||0;const c=e._glBuffers[a]||this.createGLBuffer(e);s.bindBufferRange(s.UNIFORM_BUFFER,t||0,c.buffer,r*256,256)}update(e){const{gl:t,CONTEXT_UID:r}=this,s=e._glBuffers[r]||this.createGLBuffer(e);if(e._updateID!==s.updateID)if(s.updateID=e._updateID,t.bindBuffer(e.type,s.buffer),s.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const a=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;s.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,a)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const r=e._glBuffers[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this),r&&(t||s.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let r=0;r<t.length;r++)this.dispose(this.managedBuffers[t[r]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:r}=this;return e._glBuffers[t]=new HS(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}Gx.extension={type:ct.RendererSystem,name:"buffer"};St.add(Gx);class jx{constructor(e){this.renderer=e}render(e,t){const r=this.renderer;let s,a,c,f;if(t&&(s=t.renderTexture,a=t.clear,c=t.transform,f=t.skipUpdateTransform),this.renderingToScreen=!s,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=c,!r.context.isLost){if(s||(this.lastObjectRendered=e),!f){const m=e.enableTempParent();e.updateTransform(),e.disableTempParent(m)}r.renderTexture.bind(s),r.batch.currentRenderer.start(),(a??r.background.clearBeforeRender)&&r.renderTexture.clear(),e.render(r),r.batch.currentRenderer.flush(),s&&(t.blit&&r.framebuffer.blit(),s.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}jx.extension={type:ct.RendererSystem,name:"objectRenderer"};St.add(jx);const yf=class Mg extends NS{constructor(e){super(),this.type=V0.WEBGL,e=Object.assign({},mt.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new jo({projectionMatrix:new Lr},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Mg.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(Jt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=Mg.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e?.forceCanvas?!1:db()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Jt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Jt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Jt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Jt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){Jt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return Jt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){Jt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return Jt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};yf.extension={type:ct.Renderer,priority:1},yf.__plugins={},yf.__systems={};let yy=yf;St.handleByMap(ct.RendererPlugin,yy.__plugins);St.handleByMap(ct.RendererSystem,yy.__systems);St.add(yy);class zx extends nd{constructor(e,t){const{width:r,height:s}=t||{};super(r,s),this.items=[],this.itemDirtyIds=[];for(let a=0;a<e;a++){const c=new jt;this.items.push(c),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):e[r]instanceof nd?this.addResourceAt(e[r],r):this.addResourceAt(ax(e[r],t),r))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(t=>t.resource).filter(t=>t).map(t=>t.load());return this._load=Promise.all(e).then(()=>{const{realWidth:t,realHeight:r}=this.items[0];return this.resize(t,r),this.update(),Promise.resolve(this)}),this._load}}class VS extends zx{constructor(e,t){const{width:r,height:s}=t||{};let a,c;Array.isArray(e)?(a=e,c=e.length):c=e,super(c,{width:r,height:s}),a&&this.initFromArray(a,t)}addBaseTextureAt(e,t){if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=Yc.TEXTURE_2D_ARRAY}upload(e,t,r){const{length:s,itemDirtyIds:a,items:c}=this,{gl:f}=e;r.dirtyId<0&&f.texImage3D(f.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,s,0,t.format,r.type,null);for(let m=0;m<s;m++){const _=c[m];a[m]<_.dirtyId&&(a[m]=_.dirtyId,_.valid&&f.texSubImage3D(f.TEXTURE_2D_ARRAY,0,0,0,m,_.resource.width,_.resource.height,1,t.format,r.type,_.resource.source))}return!0}}class WS extends _l{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return t&&e instanceof t?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const Hx=class Yh extends zx{constructor(e,t){const{width:r,height:s,autoLoad:a,linkBaseTexture:c}=t||{};if(e&&e.length!==Yh.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:r,height:s});for(let f=0;f<Yh.SIDES;f++)this.items[f].target=Yc.TEXTURE_CUBE_MAP_POSITIVE_X+f;this.linkBaseTexture=c!==!1,e&&this.initFromArray(e,t),a!==!1&&this.load()}bind(e){super.bind(e),e.target=Yc.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Yc.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,r){const s=this.itemDirtyIds;for(let a=0;a<Yh.SIDES;a++){const c=this.items[a];(s[a]<c.dirtyId||r.dirtyId<t.dirtyId)&&(c.valid&&c.resource?(c.resource.upload(e,c,r),s[a]=c.dirtyId):s[a]<-1&&(e.gl.texImage2D(c.target,0,r.internalFormat,t.realWidth,t.realHeight,0,t.format,r.type,null),s[a]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Yh.SIDES}};Hx.SIDES=6;let $S=Hx;class Xc extends _l{constructor(e,t){t=t||{};let r,s,a;typeof e=="string"?(r=Xc.EMPTY,s=e,a=!0):(r=e,s=null,a=!1),super(r),this.url=s,this.crossOrigin=t.crossOrigin??!0,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??a,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,t)=>{if(this.url===null){e(this);return}try{const r=await mt.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const s=await r.blob();if(this.destroyed)return;const a=await createImageBitmap(s,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ps.UNPACK?"premultiply":"none"});if(this.destroyed){a.close();return}this.source=a,this.update(),e(this)}catch(r){if(this.destroyed)return;t(r),this.onError.emit(r)}}),this._load)}upload(e,t,r){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),super.upload(e,t,r)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return Xc._EMPTY=Xc._EMPTY??mt.ADAPTER.createCanvas(0,0),Xc._EMPTY}}const Og=class vf extends _l{constructor(e,t){t=t||{},super(mt.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},vf.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;_l.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,r=e.height;if(!t||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let s=t*this.scale,a=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(s=this._overrideWidth||this._overrideHeight/r*t,a=this._overrideHeight||this._overrideWidth/t*r),s=Math.round(s),a=Math.round(a);const c=this.source;c.width=s,c.height=a,c._pixiId=`canvas_${cc()}`,c.getContext("2d").drawImage(e,0,0,t,r,0,0,s,a),this._resolve(),this._resolve=null}}static getSize(e){const t=vf.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&vf.SVG_XML.test(e)}};Og.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,Og.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let Dg=Og;class XS extends _l{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const Lg=class Ng extends _l{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const r=document.createElement("video");t.autoLoad!==!1&&r.setAttribute("preload","auto"),t.playsinline!==!1&&(r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline","")),t.muted===!0&&(r.setAttribute("muted",""),r.muted=!0),t.loop===!0&&r.setAttribute("loop",""),t.autoPlay!==!1&&r.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const s=e[0].src||e[0];_l.crossOrigin(r,s,t.crossorigin);for(let a=0;a<e.length;++a){const c=document.createElement("source");let{src:f,mime:m}=e[a];if(f=f||e[a],f.startsWith("data:"))m=f.slice(5,f.indexOf(";"));else if(!f.startsWith("blob:")){const _=f.split("?").shift().toLowerCase(),w=_.slice(_.lastIndexOf(".")+1);m=m||Ng.MIME_TYPES[w]||`video/${w}`}c.src=f,m&&(c.type=m),r.appendChild(c)}e=r}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const t=Un.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t,r)=>{this.valid?t(this):(this._resolve=t,this._reject=r,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Un.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Un.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Un.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||Ng.TYPES.includes(t)}};Lg.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],Lg.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Vx=Lg;bg.push(Xc,gx,WS,Vx,XS,Dg,Hf,$S,VS);class Rf{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?zt.EMPTY:(e=e||new zt(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:r,b:s,c:a,d:c,tx:f,ty:m}=e,_=r*t.x+a*t.y+f,w=s*t.x+c*t.y+m;this.minX=Math.min(this.minX,_),this.maxX=Math.max(this.maxX,_),this.minY=Math.min(this.minY,w),this.maxY=Math.max(this.maxY,w)}addQuad(e){let t=this.minX,r=this.minY,s=this.maxX,a=this.maxY,c=e[0],f=e[1];t=c<t?c:t,r=f<r?f:r,s=c>s?c:s,a=f>a?f:a,c=e[2],f=e[3],t=c<t?c:t,r=f<r?f:r,s=c>s?c:s,a=f>a?f:a,c=e[4],f=e[5],t=c<t?c:t,r=f<r?f:r,s=c>s?c:s,a=f>a?f:a,c=e[6],f=e[7],t=c<t?c:t,r=f<r?f:r,s=c>s?c:s,a=f>a?f:a,this.minX=t,this.minY=r,this.maxX=s,this.maxY=a}addFrame(e,t,r,s,a){this.addFrameMatrix(e.worldTransform,t,r,s,a)}addFrameMatrix(e,t,r,s,a){const c=e.a,f=e.b,m=e.c,_=e.d,w=e.tx,d=e.ty;let v=this.minX,b=this.minY,T=this.maxX,R=this.maxY,k=c*t+m*r+w,L=f*t+_*r+d;v=k<v?k:v,b=L<b?L:b,T=k>T?k:T,R=L>R?L:R,k=c*s+m*r+w,L=f*s+_*r+d,v=k<v?k:v,b=L<b?L:b,T=k>T?k:T,R=L>R?L:R,k=c*t+m*a+w,L=f*t+_*a+d,v=k<v?k:v,b=L<b?L:b,T=k>T?k:T,R=L>R?L:R,k=c*s+m*a+w,L=f*s+_*a+d,v=k<v?k:v,b=L<b?L:b,T=k>T?k:T,R=L>R?L:R,this.minX=v,this.minY=b,this.maxX=T,this.maxY=R}addVertexData(e,t,r){let s=this.minX,a=this.minY,c=this.maxX,f=this.maxY;for(let m=t;m<r;m+=2){const _=e[m],w=e[m+1];s=_<s?_:s,a=w<a?w:a,c=_>c?_:c,f=w>f?w:f}this.minX=s,this.minY=a,this.maxX=c,this.maxY=f}addVertices(e,t,r,s){this.addVerticesMatrix(e.worldTransform,t,r,s)}addVerticesMatrix(e,t,r,s,a=0,c=a){const f=e.a,m=e.b,_=e.c,w=e.d,d=e.tx,v=e.ty;let b=this.minX,T=this.minY,R=this.maxX,k=this.maxY;for(let L=r;L<s;L+=2){const W=t[L],z=t[L+1],te=f*W+_*z+d,K=w*z+m*W+v;b=Math.min(b,te-a),R=Math.max(R,te+a),T=Math.min(T,K-c),k=Math.max(k,K+c)}this.minX=b,this.minY=T,this.maxX=R,this.maxY=k}addBounds(e){const t=this.minX,r=this.minY,s=this.maxX,a=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>s?e.maxX:s,this.maxY=e.maxY>a?e.maxY:a}addBoundsMask(e,t){const r=e.minX>t.minX?e.minX:t.minX,s=e.minY>t.minY?e.minY:t.minY,a=e.maxX<t.maxX?e.maxX:t.maxX,c=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=a&&s<=c){const f=this.minX,m=this.minY,_=this.maxX,w=this.maxY;this.minX=r<f?r:f,this.minY=s<m?s:m,this.maxX=a>_?a:_,this.maxY=c>w?c:w}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const r=e.minX>t.x?e.minX:t.x,s=e.minY>t.y?e.minY:t.y,a=e.maxX<t.x+t.width?e.maxX:t.x+t.width,c=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=a&&s<=c){const f=this.minX,m=this.minY,_=this.maxX,w=this.maxY;this.minX=r<f?r:f,this.minY=s<m?s:m,this.maxX=a>_?a:_,this.maxY=c>w?c:w}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,r,s,a,c){e-=a,t-=c,r+=a,s+=c,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>s?this.maxY:s}}class jr extends ld{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Xf,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Rf,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let r=0;r<t.length;++r){const s=t[r];Object.defineProperty(jr.prototype,s,Object.getOwnPropertyDescriptor(e,s))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new zt),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new zt),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Rf);const t=this.transform,r=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=r?.worldAlpha??1,this.transform=this._tempDisplayObjectParent.transform;const s=this._bounds,a=this._boundsID;this._bounds=this._localBounds;const c=this.getBounds(!1,e);return this.parent=r,this.transform=t,this._bounds=s,this._bounds.updateID+=this._boundsID-a,c}toGlobal(e,t,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,r,s){return t&&(e=t.toGlobal(e,r,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){this.parent?.removeChild(this)}setTransform(e=0,t=0,r=1,s=1,a=0,c=0,f=0,m=0,_=0){return this.position.x=e,this.position.y=t,this.scale.x=r||1,this.scale.y=s||1,this.rotation=a,this.skew.x=c,this.skew.y=f,this.pivot.x=m,this.pivot.y=_,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new qS),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*Gb}set angle(e){this.transform.rotation=e*jb}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,t._maskRefCount===0&&(t.renderable=!0,t.isMask=!1))}if(this._mask=e,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount===0&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class qS extends jr{constructor(){super(...arguments),this.sortDirty=null}}jr.prototype.displayObjectUpdateTransform=jr.prototype.updateTransform;const KS=new Lr;function YS(n,e){return n.zIndex===e.zIndex?n._lastSortedIndex-e._lastSortedIndex:n.zIndex-e.zIndex}const Wx=class Fg extends jr{constructor(){super(),this.children=[],this.sortableChildren=Fg.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const r=this.getChildIndex(e),s=this.getChildIndex(t);this.children[r]=t,this.children[s]=e,this.onChildrenChange(r<s?r:s)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(e);Qc(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],r=this.children.indexOf(t);if(r===-1)return null;t.parent=null,t.transform._parentID=-1,Qc(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),this.emit("childRemoved",t,this,r)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Qc(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const r=e,s=t,a=s-r;let c;if(a>0&&a<=s){c=this.children.splice(r,a);for(let f=0;f<c.length;++f)c[f].parent=null,c[f].transform&&(c[f].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let f=0;f<c.length;++f)c[f].emit("removed",this),this.emit("childRemoved",c[f],this,f);return c}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,r=this.children.length;t<r;++t){const s=this.children[t];s._lastSortedIndex=t,!e&&s.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(YS),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const r=this.children[e];r.visible&&r.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const r=t._mask.isMaskData?t._mask.maskObject:t._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(t._bounds,r._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const r=super.getLocalBounds(e);if(!t)for(let s=0,a=this.children.length;s<a;++s){const c=this.children[s];c.visible&&c.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let r,s;this.cullArea?(r=this.cullArea,s=this.worldTransform):this._render!==Fg.prototype._render&&(r=this.getBounds(!0));const a=e.projection.transform;if(a&&(s?(s=KS.copyFrom(s),s.prepend(a)):s=a),r&&t.intersects(r,s))this._render(e);else if(this.cullArea)return;for(let c=0,f=this.children.length;c<f;++c){const m=this.children[c],_=m.cullable;m.cullable=_||!this.cullArea,m.render(e),m.cullable=_}}render(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,r=this.children.length;t<r;++t)this.children[t].render(e)}}renderAdvanced(e){const t=this.filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let a=0;a<t.length;a++)t[a].enabled&&this._enabledFilters.push(t[a])}const s=t&&this._enabledFilters?.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==An.NONE));if(s&&e.batch.flush(),t&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let a=0,c=this.children.length;a<c;++a)this.children[a].render(e)}s&&e.batch.flush(),r&&e.mask.pop(this),t&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e?.children,r=this.removeChildren(0,this.children.length);if(t)for(let s=0;s<r.length;++s)r[s].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};Wx.defaultSortableChildren=!1;let Di=Wx;Di.prototype.containerUpdateTransform=Di.prototype.updateTransform;Object.defineProperties(mt,{SORTABLE_CHILDREN:{get(){return Di.defaultSortableChildren},set(n){Jt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Di.defaultSortableChildren=n}}});const Hh=new er,QS=new Uint16Array([0,1,2,0,2,3]);class Vo extends Di{constructor(e){super(),this._anchor=new Ra(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new kr(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Dt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||lt.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=QS,this.pluginName="batch",this.isSprite=!0,this._roundPixels=mt.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=lu(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=lu(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const t=this.transform.worldTransform,r=t.a,s=t.b,a=t.c,c=t.d,f=t.tx,m=t.ty,_=this.vertexData,w=e.trim,d=e.orig,v=this._anchor;let b=0,T=0,R=0,k=0;if(w?(T=w.x-v._x*d.width,b=T+w.width,k=w.y-v._y*d.height,R=k+w.height):(T=-v._x*d.width,b=T+d.width,k=-v._y*d.height,R=k+d.height),_[0]=r*T+a*k+f,_[1]=c*k+s*T+m,_[2]=r*b+a*k+f,_[3]=c*k+s*b+m,_[4]=r*b+a*R+f,_[5]=c*R+s*b+m,_[6]=r*T+a*R+f,_[7]=c*R+s*T+m,this._roundPixels){const L=mt.RESOLUTION;for(let W=0;W<_.length;++W)_[W]=Math.round(_[W]*L)/L}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,t=this.vertexTrimmedData,r=e.orig,s=this._anchor,a=this.transform.worldTransform,c=a.a,f=a.b,m=a.c,_=a.d,w=a.tx,d=a.ty,v=-s._x*r.width,b=v+r.width,T=-s._y*r.height,R=T+r.height;if(t[0]=c*v+m*T+w,t[1]=_*T+f*v+d,t[2]=c*b+m*T+w,t[3]=_*T+f*b+d,t[4]=c*b+m*R+w,t[5]=_*R+f*b+d,t[6]=c*v+m*R+w,t[7]=_*R+f*v+d,this._roundPixels){const k=mt.RESOLUTION;for(let L=0;L<t.length;++L)t[L]=Math.round(t[L]*k)/k}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new Rf),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new zt),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Hh);const t=this._texture.orig.width,r=this._texture.orig.height,s=-t*this.anchor.x;let a=0;return Hh.x>=s&&Hh.x<s+t&&(a=-r*this.anchor.y,Hh.y>=a&&Hh.y<a+r)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e?.texture){const t=typeof e=="boolean"?e:e?.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){const r=e instanceof lt?e:lt.from(e,t);return new Vo(r)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const t=lu(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const t=lu(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||lt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const $x=new Lr;jr.prototype._cacheAsBitmap=!1;jr.prototype._cacheData=null;jr.prototype._cacheAsBitmapResolution=null;jr.prototype._cacheAsBitmapMultisample=null;class ZS{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(jr.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(n){n!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(n){n!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(n){if(this._cacheAsBitmap===n)return;this._cacheAsBitmap=n;let e;n?(this._cacheData||(this._cacheData=new ZS),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});jr.prototype._renderCached=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(n),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(n))};jr.prototype._initCachedDisplayObject=function(n){if(this._cacheData?.sprite)return;const e=this.alpha;this.alpha=1,n.batch.flush();const t=this.getLocalBounds(new zt,!0);if(this.filters?.length){const v=this.filters[0].padding;t.pad(v)}const r=this.cacheAsBitmapResolution||n.resolution;t.ceil(r),t.width=Math.max(t.width,1/r),t.height=Math.max(t.height,1/r);const s=n.renderTexture.current,a=n.renderTexture.sourceFrame.clone(),c=n.renderTexture.destinationFrame.clone(),f=n.projection.transform,m=dc.create({width:t.width,height:t.height,resolution:r,multisample:this.cacheAsBitmapMultisample??n.multisample}),_=`cacheAsBitmap_${cc()}`;this._cacheData.textureCacheId=_,jt.addToCache(m.baseTexture,_),lt.addToCache(m,_);const w=this.transform.localTransform.copyTo($x).invert().translate(-t.x,-t.y);this.render=this._cacheData.originalRender,n.render(this,{renderTexture:m,clear:!0,transform:w,skipUpdateTransform:!1}),n.framebuffer.blit(),n.projection.transform=f,n.renderTexture.bind(s,a,c),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const d=new Vo(m);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(t.x/t.width),d.anchor.y=-(t.y/t.height),d.alpha=e,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)};jr.prototype._renderCachedCanvas=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(n),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(n))};jr.prototype._initCachedDisplayObjectCanvas=function(n){if(this._cacheData?.sprite)return;const e=this.getLocalBounds(new zt,!0),t=this.alpha;this.alpha=1;const r=n.canvasContext.activeContext,s=n._projTransform,a=this.cacheAsBitmapResolution||n.resolution;e.ceil(a),e.width=Math.max(e.width,1/a),e.height=Math.max(e.height,1/a);const c=dc.create({width:e.width,height:e.height,resolution:a}),f=`cacheAsBitmap_${cc()}`;this._cacheData.textureCacheId=f,jt.addToCache(c.baseTexture,f),lt.addToCache(c,f);const m=$x;this.transform.localTransform.copyTo(m),m.invert(),m.tx-=e.x,m.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,n.render(this,{renderTexture:c,clear:!0,transform:m,skipUpdateTransform:!1}),n.canvasContext.activeContext=r,n._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const _=new Vo(c);_.transform.worldTransform=this.transform.worldTransform,_.anchor.x=-(e.x/e.width),_.anchor.y=-(e.y/e.height),_.alpha=t,_._bounds=this._bounds,this._cacheData.sprite=_,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=n._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=_.containsPoint.bind(_)};jr.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};jr.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};jr.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,jt.removeFromCache(this._cacheData.textureCacheId),lt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};jr.prototype._cacheAsBitmapDestroy=function(n){this.cacheAsBitmap=!1,this.destroy(n)};jr.prototype.name=null;Di.prototype.getChildByName=function(n,e){for(let t=0,r=this.children.length;t<r;t++)if(this.children[t].name===n)return this.children[t];if(e)for(let t=0,r=this.children.length;t<r;t++){const s=this.children[t];if(!s.getChildByName)continue;const a=s.getChildByName(n,!0);if(a)return a}return null};jr.prototype.getGlobalPosition=function(n=new er,e=!1){return this.parent?this.parent.toGlobal(this.position,n,e):(n.x=this.position.x,n.y=this.position.y),n};var JS=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class eE extends Oi{constructor(e=1){super(zS,JS,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const tE={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},rE=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function nE(n){const e=tE[n],t=e.length;let r=rE,s="";const a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let c;for(let f=0;f<n;f++){let m=a.replace("%index%",f.toString());c=f,f>=t&&(c=n-f-1),m=m.replace("%value%",e[c].toString()),s+=m,s+=`
`}return r=r.replace("%blur%",s),r=r.replace("%size%",n.toString()),r}const iE=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function sE(n,e){const t=Math.ceil(n/2);let r=iE,s="",a;e?a="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":a="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let c=0;c<n;c++){let f=a.replace("%index%",c.toString());f=f.replace("%sampleIndex%",`${c-(t-1)}.0`),s+=f,s+=`
`}return r=r.replace("%blur%",s),r=r.replace("%size%",n.toString()),r}class Bg extends Oi{constructor(e,t=8,r=4,s=Oi.defaultResolution,a=5){const c=sE(a,e),f=nE(a);super(c,f),this.horizontal=e,this.resolution=s,this._quality=0,this.quality=r,this.blur=t}apply(e,t,r,s){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/t.width):this.uniforms.strength=1/r.height*(r.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,t,r,s);else{const a=e.getFilterTexture(),c=e.renderer;let f=t,m=a;this.state.blend=!1,e.applyFilter(this,f,m,Ia.CLEAR);for(let _=1;_<this.passes-1;_++){e.bindAndClear(f,Ia.BLIT),this.uniforms.uSampler=m;const w=m;m=f,f=w,c.shader.bind(this),c.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,m,r,s),e.returnFilterTexture(a)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class oE extends Oi{constructor(e=8,t=4,r=Oi.defaultResolution,s=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new Bg(!0,e,t,r,s),this.blurYFilter=new Bg(!1,e,t,r,s),this.resolution=r,this.quality=t,this.blur=e,this.repeatEdgePixels=!1}apply(e,t,r,s){const a=Math.abs(this.blurXFilter.strength),c=Math.abs(this.blurYFilter.strength);if(a&&c){const f=e.getFilterTexture();this.blurXFilter.apply(e,t,f,Ia.CLEAR),this.blurYFilter.apply(e,f,r,s),e.returnFilterTexture(f)}else c?this.blurYFilter.apply(e,t,r,s):this.blurXFilter.apply(e,t,r,s)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var aE=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class Ug extends Oi{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(Bx,aE,e),this.alpha=1}_loadMatrix(e,t=!1){let r=e;t&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(e,t,r){return e[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15],e[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16],e[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17],e[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18],e[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19]+t[4],e[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15],e[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16],e[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17],e[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18],e[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19]+t[9],e[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15],e[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16],e[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17],e[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18],e[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19]+t[14],e[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15],e[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16],e[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17],e[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18],e[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}tint(e,t){const[r,s,a]=kr.shared.setValue(e).toArray(),c=[r,0,0,0,0,0,s,0,0,0,0,0,a,0,0,0,0,0,1,0];this._loadMatrix(c,t)}greyscale(e,t){const r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}blackAndWhite(e){const t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)}hue(e,t){e=(e||0)/180*Math.PI;const r=Math.cos(e),s=Math.sin(e),a=Math.sqrt,c=1/3,f=a(c),m=r+(1-r)*c,_=c*(1-r)-f*s,w=c*(1-r)+f*s,d=c*(1-r)+f*s,v=r+c*(1-r),b=c*(1-r)-f*s,T=c*(1-r)-f*s,R=c*(1-r)+f*s,k=r+c*(1-r),L=[m,_,w,0,0,d,v,b,0,0,T,R,k,0,0,0,0,0,1,0];this._loadMatrix(L,t)}contrast(e,t){const r=(e||0)+1,s=-.5*(r-1),a=[r,0,0,0,s,0,r,0,0,s,0,0,r,0,s,0,0,0,1,0];this._loadMatrix(a,t)}saturate(e=0,t){const r=e*2/3+1,s=(r-1)*-.5,a=[r,s,s,0,0,s,r,s,0,0,s,s,r,0,0,0,0,0,1,0];this._loadMatrix(a,t)}desaturate(){this.saturate(-1)}negative(e){const t=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(t,e)}sepia(e){const t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)}technicolor(e){const t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)}polaroid(e){const t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)}toBGR(e){const t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)}kodachrome(e){const t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)}browni(e){const t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)}vintage(e){const t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)}colorTone(e,t,r,s,a){e=e||.2,t=t||.15,r=r||16770432,s=s||3375104;const c=kr.shared,[f,m,_]=c.setValue(r).toArray(),[w,d,v]=c.setValue(s).toArray(),b=[.3,.59,.11,0,0,f,m,_,e,0,w,d,v,t,0,f-w,m-d,_-v,0,0];this._loadMatrix(b,a)}night(e,t){e=e||.1;const r=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(r,t)}predator(e,t){const r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,t)}lsd(e){const t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}Ug.prototype.grayscale=Ug.prototype.greyscale;var lE=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,uE=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class cE extends Oi{constructor(e,t){const r=new Lr;e.renderable=!1,super(uE,lE,{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=r,t==null&&(t=20),this.scale=new er(t,t)}apply(e,t,r,s){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const a=this.maskSprite.worldTransform,c=Math.sqrt(a.a*a.a+a.b*a.b),f=Math.sqrt(a.c*a.c+a.d*a.d);c!==0&&f!==0&&(this.uniforms.rotation[0]=a.a/c,this.uniforms.rotation[1]=a.b/c,this.uniforms.rotation[2]=a.c/f,this.uniforms.rotation[3]=a.d/f),e.applyFilter(this,t,r,s)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var hE=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,dE=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class fE extends Oi{constructor(){super(dE,hE)}}var pE=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class mE extends Oi{constructor(e=.5,t=Math.random()){super(Bx,pE,{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const W_={AlphaFilter:eE,BlurFilter:oE,BlurFilterPass:Bg,ColorMatrixFilter:Ug,DisplacementFilter:cE,FXAAFilter:fE,NoiseFilter:mE};Object.entries(W_).forEach(([n,e])=>{Object.defineProperty(W_,n,{get(){return Jt("7.1.0",`filters.${n} has moved to ${n}`),e}})});class gE{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(Un.system.add(this.tickerUpdate,this,pu.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Un.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const su=new gE;class ud{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=ud.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new er,this.page=new er,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,r,s,a){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class kf extends ud{constructor(){super(...arguments),this.client=new er,this.movement=new er,this.offset=new er,this.global=new er,this.screen=new er}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,r,s,a,c,f,m,_,w,d,v,b,T,R){throw new Error("Method not implemented.")}}class Lo extends kf{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Jc extends kf{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Jc.DOM_DELTA_PIXEL=0,Jc.DOM_DELTA_LINE=1,Jc.DOM_DELTA_PAGE=2;const yE=2048,vE=new er,Km=new er;class _E{constructor(e){this.dispatch=new ld,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((r,s)=>r.priority-s.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let r=0,s=t.length;r<s;r++)t[r].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){su.pauseUpdate=!0;const r=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[r](this.rootTarget,this.rootTarget.eventMode,vE.set(e,t),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(e,t){if(!e.target)return;const r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let s=0,a=r.length-1;s<a;s++)if(e.currentTarget=r[s],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let s=r.length-2;s>=0;s--)if(e.currentTarget=r[s],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,r=this._allInteractiveElements){if(r.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const s=Array.isArray(t)?t:[t];for(let a=r.length-1;a>=0;a--)s.forEach(c=>{e.currentTarget=r[a],this.notifyTarget(e,c)})}propagationPath(e){const t=[e];for(let r=0;r<yE&&e!==this.rootTarget;r++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,r,s,a,c=!1){let f=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(su.pauseUpdate=!1),e.interactiveChildren&&e.children){const w=e.children;for(let d=w.length-1;d>=0;d--){const v=w[d],b=this.hitTestMoveRecursive(v,this._isInteractive(t)?t:v.eventMode,r,s,a,c||a(e,r));if(b){if(b.length>0&&!b[b.length-1].parent)continue;const T=e.isInteractive();(b.length>0||T)&&(T&&this._allInteractiveElements.push(e),b.push(e)),this._hitElements.length===0&&(this._hitElements=b),f=!0}}}const m=this._isInteractive(t),_=e.isInteractive();return m&&_&&this._allInteractiveElements.push(e),c||this._hitElements.length>0?null:f?this._hitElements:m&&!a(e,r)&&s(e,r)?_?[e]:[]:null}hitTestRecursive(e,t,r,s,a){if(this._interactivePrune(e)||a(e,r))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(su.pauseUpdate=!1),e.interactiveChildren&&e.children){const m=e.children;for(let _=m.length-1;_>=0;_--){const w=m[_],d=this.hitTestRecursive(w,this._isInteractive(t)?t:w.eventMode,r,s,a);if(d){if(d.length>0&&!d[d.length-1].parent)continue;const v=e.isInteractive();return(d.length>0||v)&&d.push(e),d}}}const c=this._isInteractive(t),f=e.isInteractive();return c&&s(e,r)?f?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,Km),!e.hitArea.contains(Km.x,Km.y)))return!0;if(e._mask){const r=e._mask.isMaskData?e._mask.maskObject:e._mask;if(r&&!r.containsPoint?.(t))return!0}return!1}hitTestFn(e,t){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(t):!1}notifyTarget(e,t){t=t??e.type;const r=`on${t}`;e.currentTarget[r]?.(e);const s=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,s),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof Lo)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){const s=t.button===2;this.dispatchEvent(t,s?"rightdown":"mousedown")}const r=this.trackingData(e.pointerId);r.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){if(!(e instanceof Lo)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const r=t.pointerType==="mouse"||t.pointerType==="pen",s=this.trackingData(e.pointerId),a=this.findMountedTarget(s.overTargets);if(s.overTargets?.length>0&&a!==t.target){const m=e.type==="mousemove"?"mouseout":"pointerout",_=this.createPointerEvent(e,m,a);if(this.dispatchEvent(_,"pointerout"),r&&this.dispatchEvent(_,"mouseout"),!t.composedPath().includes(a)){const w=this.createPointerEvent(e,"pointerleave",a);for(w.eventPhase=w.AT_TARGET;w.target&&!t.composedPath().includes(w.target);)w.currentTarget=w.target,this.notifyTarget(w),r&&this.notifyTarget(w,"mouseleave"),w.target=w.target.parent;this.freeEvent(w)}this.freeEvent(_)}if(a!==t.target){const m=e.type==="mousemove"?"mouseover":"pointerover",_=this.clonePointerEvent(t,m);this.dispatchEvent(_,"pointerover"),r&&this.dispatchEvent(_,"mouseover");let w=a?.parent;for(;w&&w!==this.rootTarget.parent&&w!==t.target;)w=w.parent;if(!w||w===this.rootTarget.parent){const d=this.clonePointerEvent(t,"pointerenter");for(d.eventPhase=d.AT_TARGET;d.target&&d.target!==a&&d.target!==this.rootTarget.parent;)d.currentTarget=d.target,this.notifyTarget(d),r&&this.notifyTarget(d,"mouseenter"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(_)}const c=[],f=this.enableGlobalMoveEvents??!0;this.moveOnAll?c.push("pointermove"):this.dispatchEvent(t,"pointermove"),f&&c.push("globalpointermove"),t.pointerType==="touch"&&(this.moveOnAll?c.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),f&&c.push("globaltouchmove")),r&&(this.moveOnAll?c.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),f&&c.push("globalmousemove"),this.cursor=t.target?.cursor),c.length>0&&this.all(t,c),this._allInteractiveElements.length=0,this._hitElements.length=0,s.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){if(!(e instanceof Lo)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),r=this.createPointerEvent(e),s=r.pointerType==="mouse"||r.pointerType==="pen";this.dispatchEvent(r,"pointerover"),s&&this.dispatchEvent(r,"mouseover"),r.pointerType==="mouse"&&(this.cursor=r.target?.cursor);const a=this.clonePointerEvent(r,"pointerenter");for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),s&&this.notifyTarget(a,"mouseenter"),a.target=a.target.parent;t.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(a)}mapPointerOut(e){if(!(e instanceof Lo)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId);if(t.overTargets){const r=e.pointerType==="mouse"||e.pointerType==="pen",s=this.findMountedTarget(t.overTargets),a=this.createPointerEvent(e,"pointerout",s);this.dispatchEvent(a),r&&this.dispatchEvent(a,"mouseout");const c=this.createPointerEvent(e,"pointerleave",s);for(c.eventPhase=c.AT_TARGET;c.target&&c.target!==this.rootTarget.parent;)c.currentTarget=c.target,this.notifyTarget(c),r&&this.notifyTarget(c,"mouseleave"),c.target=c.target.parent;t.overTargets=null,this.freeEvent(a),this.freeEvent(c)}this.cursor=null}mapPointerUp(e){if(!(e instanceof Lo)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=performance.now(),r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerup"),r.pointerType==="touch")this.dispatchEvent(r,"touchend");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const f=r.button===2;this.dispatchEvent(r,f?"rightup":"mouseup")}const s=this.trackingData(e.pointerId),a=this.findMountedTarget(s.pressTargetsByButton[e.button]);let c=a;if(a&&!r.composedPath().includes(a)){let f=a;for(;f&&!r.composedPath().includes(f);){if(r.currentTarget=f,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch")this.notifyTarget(r,"touchendoutside");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const m=r.button===2;this.notifyTarget(r,m?"rightupoutside":"mouseupoutside")}f=f.parent}delete s.pressTargetsByButton[e.button],c=f}if(c){const f=this.clonePointerEvent(r,"click");f.target=c,f.path=null,s.clicksByButton[e.button]||(s.clicksByButton[e.button]={clickCount:0,target:f.target,timeStamp:t});const m=s.clicksByButton[e.button];if(m.target===f.target&&t-m.timeStamp<200?++m.clickCount:m.clickCount=1,m.target=f.target,m.timeStamp=t,f.detail=m.clickCount,f.pointerType==="mouse"){const _=f.button===2;this.dispatchEvent(f,_?"rightclick":"click")}else f.pointerType==="touch"&&this.dispatchEvent(f,"tap");this.dispatchEvent(f,"pointertap"),this.freeEvent(f)}this.freeEvent(r)}mapPointerUpOutside(e){if(!(e instanceof Lo)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),r=this.findMountedTarget(t.pressTargetsByButton[e.button]),s=this.createPointerEvent(e);if(r){let a=r;for(;a;)s.currentTarget=a,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"?this.notifyTarget(s,"touchendoutside"):(s.pointerType==="mouse"||s.pointerType==="pen")&&this.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),a=a.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(s)}mapWheel(e){if(!(e instanceof Jc)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let r=1;r<e.length&&e[r].parent===t;r++)t=e[r];return t}createPointerEvent(e,t,r){const s=this.allocateEvent(Lo);return this.copyPointerData(e,s),this.copyMouseData(e,s),this.copyData(e,s),s.nativeEvent=e.nativeEvent,s.originalEvent=e,s.target=r??this.hitTest(s.global.x,s.global.y)??this._hitElements[0],typeof t=="string"&&(s.type=t),s}createWheelEvent(e){const t=this.allocateEvent(Jc);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const r=this.allocateEvent(Lo);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=t??r.type,r}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof Lo&&t instanceof Lo&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof kf&&t instanceof kf&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){const r=e.currentTarget._events[t];if(r&&e.currentTarget.isInteractive())if("fn"in r)r.once&&e.currentTarget.removeListener(t,r.fn,void 0,!0),r.fn.call(r.context,e);else for(let s=0,a=r.length;s<a&&!e.propagationImmediatelyStopped;s++)r[s].once&&e.currentTarget.removeListener(t,r[s].fn,void 0,!0),r[s].fn.call(r[s].context,e)}}const xE=1,wE={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Gg=class jg{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new _E(null),su.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Lo(null),this.rootWheelEvent=new Jc(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...jg.defaultEventFeatures},{set:(t,r,s)=>(r==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=s),t[r]=s,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:r}=this.renderer;this.setTargetElement(t),this.resolution=r,jg._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const r=this.cursorStyles[e];if(r)switch(typeof r){case"string":t&&(this.domElement.style.cursor=r);break;case"function":r(e);break;case"object":t&&Object.assign(this.domElement.style,r);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let r=0,s=t.length;r<s;r++){const a=t[r],c=this.bootstrapEvent(this.rootPointerEvent,a);this.rootBoundary.mapEvent(c)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,su.pointerMoved();const t=this.normalizeToPointerData(e);for(let r=0,s=t.length;r<s;r++){const a=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const r=t!==this.domElement?"outside":"",s=this.normalizeToPointerData(e);for(let a=0,c=s.length;a<c;a++){const f=this.bootstrapEvent(this.rootPointerEvent,s[a]);f.type+=r,this.rootBoundary.mapEvent(f)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);for(let r=0,s=t.length;r<s;r++){const a=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,su.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;su.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;su.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,r){const s=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},a=1/this.resolution;e.x=(t-s.left)*(this.domElement.width/s.width)*a,e.y=(r-s.top)*(this.domElement.height/s.height)*a}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let r=0,s=e.changedTouches.length;r<s;r++){const a=e.changedTouches[r];typeof a.button>"u"&&(a.button=0),typeof a.buttons>"u"&&(a.buttons=1),typeof a.isPrimary>"u"&&(a.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof a.width>"u"&&(a.width=a.radiusX||1),typeof a.height>"u"&&(a.height=a.radiusY||1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="touch"),typeof a.pointerId>"u"&&(a.pointerId=a.identifier||0),typeof a.pressure>"u"&&(a.pressure=a.force||.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),typeof a.layerX>"u"&&(a.layerX=a.offsetX=a.clientX),typeof a.layerY>"u"&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,a.type=e.type,t.push(a)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const r=e;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=xE),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,t.push(r)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=wE[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};Gg.extension={name:"events",type:[ct.RendererSystem,ct.CanvasRendererSystem]},Gg.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let zg=Gg;St.add(zg);function $_(n){return n==="dynamic"||n==="static"}const bE={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??$_(zg.defaultEventMode)},set interactive(n){Jt("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=n,this.eventMode=n?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??zg.defaultEventMode},set eventMode(n){this._internalInteractive=$_(n),this._internalEventMode=n},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(n,e,t){const r=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,s=typeof t=="object"?t.signal:void 0,a=typeof t=="object"?t.once===!0:!1,c=typeof e=="function"?void 0:e;n=r?`${n}capture`:n;const f=typeof e=="function"?e:e.handleEvent,m=this;s&&s.addEventListener("abort",()=>{m.off(n,f,c)}),a?m.once(n,f,c):m.on(n,f,c)},removeEventListener(n,e,t){const r=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,s=typeof e=="function"?void 0:e;n=r?`${n}capture`:n,e=typeof e=="function"?e:e.handleEvent,this.off(n,e,s)},dispatchEvent(n){if(!(n instanceof ud))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return n.defaultPrevented=!1,n.path=null,n.target=this,n.manager.dispatchEvent(n),!n.defaultPrevented}};jr.mixin(bE);const SE={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};jr.mixin(SE);const EE=9,Jd=100,TE=0,AE=0,X_=2,q_=1,CE=-1e3,IE=-1e3,PE=2;class Xx{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(ml.tablet||ml.phone)&&this.createTouchHook();const t=document.createElement("div");t.style.width=`${Jd}px`,t.style.height=`${Jd}px`,t.style.position="absolute",t.style.top=`${TE}px`,t.style.left=`${AE}px`,t.style.zIndex=X_.toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${q_}px`,e.style.height=`${q_}px`,e.style.position="absolute",e.style.top=`${CE}px`,e.style.left=`${IE}px`,e.style.zIndex=PE.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const t=e.children;if(t)for(let r=0;r<t.length;r++)this.updateAccessibleObjects(t[r])}update(){const e=performance.now();if(ml.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:t,y:r,width:s,height:a}=this.renderer.view.getBoundingClientRect(),{width:c,height:f,resolution:m}=this.renderer,_=s/c*m,w=a/f*m;let d=this.div;d.style.left=`${t}px`,d.style.top=`${r}px`,d.style.width=`${c}px`,d.style.height=`${f}px`;for(let v=0;v<this.children.length;v++){const b=this.children[v];if(b.renderId!==this.renderId)b._accessibleActive=!1,Qc(this.children,v,1),this.div.removeChild(b._accessibleDiv),this.pool.push(b._accessibleDiv),b._accessibleDiv=null,v--;else{d=b._accessibleDiv;let T=b.hitArea;const R=b.worldTransform;b.hitArea?(d.style.left=`${(R.tx+T.x*R.a)*_}px`,d.style.top=`${(R.ty+T.y*R.d)*w}px`,d.style.width=`${T.width*R.a*_}px`,d.style.height=`${T.height*R.d*w}px`):(T=b.getBounds(),this.capHitArea(T),d.style.left=`${T.x*_}px`,d.style.top=`${T.y*w}px`,d.style.width=`${T.width*_}px`,d.style.height=`${T.height*w}px`,d.title!==b.accessibleTitle&&b.accessibleTitle!==null&&(d.title=b.accessibleTitle),d.getAttribute("aria-label")!==b.accessibleHint&&b.accessibleHint!==null&&d.setAttribute("aria-label",b.accessibleHint)),(b.accessibleTitle!==d.title||b.tabIndex!==d.tabIndex)&&(d.title=b.accessibleTitle,d.tabIndex=b.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:r}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>r&&(e.height=r-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=`${Jd}px`,t.style.height=`${Jd}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=X_.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){const{displayObject:r}=e.target,s=this.renderer.events.rootBoundary,a=Object.assign(new ud(s),{target:r});s.rootTarget=this.renderer.lastObjectRendered,t.forEach(c=>s.dispatchEvent(a,c))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===EE&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}Xx.extension={name:"accessibility",type:[ct.RendererPlugin,ct.CanvasRendererPlugin]};St.add(Xx);const qx=class Hg{constructor(e){this.stage=new Di,e=Object.assign({forceCanvas:!1},e),this.renderer=US(e),Hg._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer?.view}get screen(){return this.renderer?.screen}destroy(e,t){const r=Hg._plugins.slice(0);r.reverse(),r.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};qx._plugins=[];let Kf=qx;St.handleByList(ct.Application,Kf._plugins);class Kx{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let t,r;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,r=globalThis.innerHeight;else{const{clientWidth:s,clientHeight:a}=this._resizeTo;t=s,r=a}this.renderer.resize(t,r),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Kx.extension=ct.Application;St.add(Kx);const K_={loader:ct.LoadParser,resolver:ct.ResolveParser,cache:ct.CacheParser,detection:ct.DetectionParser};St.handle(ct.Asset,n=>{const e=n.ref;Object.entries(K_).filter(([t])=>!!e[t]).forEach(([t,r])=>St.add(Object.assign(e[t],{extension:e[t].extension??r})))},n=>{const e=n.ref;Object.keys(K_).filter(t=>!!e[t]).forEach(t=>St.remove(e[t]))});class RE{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<t;r++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function lh(n,e){if(Array.isArray(e)){for(const t of e)if(n.startsWith(`data:${t}`))return!0;return!1}return n.startsWith(`data:${e}`)}function yu(n,e){const t=n.split("?")[0],r=Gn.extname(t).toLowerCase();return Array.isArray(e)?e.includes(r):r===e}const No=(n,e,t=!1)=>(Array.isArray(n)||(n=[n]),e?n.map(r=>typeof r=="string"||t?e(r):r):n),Vg=(n,e)=>{const t=e.split("?")[1];return t&&(n+=`?${t}`),n};function Yx(n,e,t,r,s){const a=e[t];for(let c=0;c<a.length;c++){const f=a[c];t<e.length-1?Yx(n.replace(r[t],f),e,t+1,r,s):s.push(n.replace(r[t],f))}}function kE(n){const e=/\{(.*?)\}/g,t=n.match(e),r=[];if(t){const s=[];t.forEach(a=>{const c=a.substring(1,a.length-1).split(",");s.push(c)}),Yx(n,s,0,t,r)}else r.push(n);return r}const Mf=n=>!Array.isArray(n);class ME{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const r=No(e);let s;for(let f=0;f<this.parsers.length;f++){const m=this.parsers[f];if(m.test(t)){s=m.getCacheableAssets(r,t);break}}s||(s={},r.forEach(f=>{s[f]=t}));const a=Object.keys(s),c={cacheKeys:a,keys:r};if(r.forEach(f=>{this._cacheMap.set(f,c)}),a.forEach(f=>{const m=s?s[f]:t;this._cache.has(f)&&this._cache.get(f)!==m&&console.warn("[Cache] already has key:",f),this._cache.set(f,s[f])}),t instanceof lt){const f=t;r.forEach(m=>{f.baseTexture!==lt.EMPTY.baseTexture&&jt.addToCache(f.baseTexture,m),lt.addToCache(f,m)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(r=>{this._cache.delete(r)}),t.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const oc=new ME;class OE{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,r)=>(this._parsersValidated=!1,e[t]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const r={promise:null,parser:null};return r.promise=(async()=>{let s=null,a=null;if(t.loadParser&&(a=this._parserHash[t.loadParser],a||console.warn(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!a){for(let c=0;c<this.parsers.length;c++){const f=this.parsers[c];if(f.load&&f.test?.(e,t,this)){a=f;break}}if(!a)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=await a.load(e,t,this),r.parser=a;for(let c=0;c<this.parsers.length;c++){const f=this.parsers[c];f.parse&&f.parse&&await f.testParse?.(s,t,this)&&(s=await f.parse(s,t,this)||s,r.parser=f)}return s})(),r}async load(e,t){this._parsersValidated||this._validateParsers();let r=0;const s={},a=Mf(e),c=No(e,_=>({alias:[_],src:_})),f=c.length,m=c.map(async _=>{const w=Gn.toAbsolute(_.src);if(!s[_.src])try{this.promiseCache[w]||(this.promiseCache[w]=this._getLoadPromiseAndParser(w,_)),s[_.src]=await this.promiseCache[w].promise,t&&t(++r/f)}catch(d){throw delete this.promiseCache[w],delete s[_.src],new Error(`[Loader.load] Failed to load ${w}.
${d}`)}});return await Promise.all(m),a?s[c[0].src]:s}async unload(e){const t=No(e,r=>({alias:[r],src:r})).map(async r=>{const s=Gn.toAbsolute(r.src),a=this.promiseCache[s];if(a){const c=await a.promise;delete this.promiseCache[s],a.parser?.unload?.(c,r,this)}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(e[t.name]&&console.warn(`[Assets] loadParser name conflict "${t.name}"`),{...e,[t.name]:t}),{})}}var Wo=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(Wo||{});const DE=".json",LE="application/json",NE={extension:{type:ct.LoadParser,priority:Wo.Low},name:"loadJson",test(n){return lh(n,LE)||yu(n,DE)},async load(n){return await(await mt.ADAPTER.fetch(n)).json()}};St.add(NE);const FE=".txt",BE="text/plain",UE={name:"loadTxt",extension:{type:ct.LoadParser,priority:Wo.Low},test(n){return lh(n,BE)||yu(n,FE)},async load(n){return await(await mt.ADAPTER.fetch(n)).text()}};St.add(UE);const GE=["normal","bold","100","200","300","400","500","600","700","800","900"],jE=[".ttf",".otf",".woff",".woff2"],zE=["font/ttf","font/otf","font/woff","font/woff2"],HE=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function VE(n){const e=Gn.extname(n),t=Gn.basename(n,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1));let r=t.length>0;for(const a of t)if(!a.match(HE)){r=!1;break}let s=t.join(" ");return r||(s=`"${s.replace(/[\\"]/g,"\\$&")}"`),s}const WE=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function $E(n){return WE.test(n)?n:encodeURI(n)}const XE={extension:{type:ct.LoadParser,priority:Wo.Low},name:"loadWebFont",test(n){return lh(n,zE)||yu(n,jE)},async load(n,e){const t=mt.ADAPTER.getFontFaceSet();if(t){const r=[],s=e.data?.family??VE(n),a=e.data?.weights?.filter(f=>GE.includes(f))??["normal"],c=e.data??{};for(let f=0;f<a.length;f++){const m=a[f],_=new FontFace(s,`url(${$E(n)})`,{...c,weight:m});await _.load(),t.add(_),r.push(_)}return r.length===1?r[0]:r}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(n){(Array.isArray(n)?n:[n]).forEach(e=>mt.ADAPTER.getFontFaceSet().delete(e))}};St.add(XE);const qE=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let eh=null,Wg=class{constructor(){eh||(eh=URL.createObjectURL(new Blob([qE],{type:"application/javascript"}))),this.worker=new Worker(eh)}};Wg.revokeObjectURL=function(){eh&&(URL.revokeObjectURL(eh),eh=null)};const KE=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let th=null;class Qx{constructor(){th||(th=URL.createObjectURL(new Blob([KE],{type:"application/javascript"}))),this.worker=new Worker(th)}}Qx.revokeObjectURL=function(){th&&(URL.revokeObjectURL(th),th=null)};let Y_=0,Ym;class YE{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new Wg;t.addEventListener("message",r=>{t.terminate(),Wg.revokeObjectURL(),e(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Ym===void 0&&(Ym=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<Ym&&(this._createdWorkers++,e=new Qx().worker,e.addEventListener("message",t=>{this.complete(t.data),this.returnWorker(t.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const r=new Promise((s,a)=>{this.queue.push({id:e,arguments:t,resolve:s,reject:a})});return this.next(),r}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const t=this.queue.pop(),r=t.id;this.resolveHash[Y_]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:Y_++,id:r})}}const Q_=new YE;function cd(n,e,t){n.resource.internal=!0;const r=new lt(n),s=()=>{delete e.promiseCache[t],oc.has(t)&&oc.remove(t)};return r.baseTexture.once("destroyed",()=>{t in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),s())}),r.once("destroyed",()=>{n.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),s())}),r}const QE=[".jpeg",".jpg",".png",".webp",".avif"],ZE=["image/jpeg","image/png","image/webp","image/avif"];async function JE(n){const e=await mt.ADAPTER.fetch(n);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${e.status} ${e.statusText}`);const t=await e.blob();return await createImageBitmap(t)}const Yf={name:"loadTextures",extension:{type:ct.LoadParser,priority:Wo.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(n){return lh(n,ZE)||yu(n,QE)},async load(n,e,t){const r=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let s;r?this.config.preferWorkers&&await Q_.isImageBitmapSupported()?s=await Q_.loadImageBitmap(n):s=await JE(n):s=await new Promise((f,m)=>{const _=new Image;_.crossOrigin=this.config.crossOrigin,_.src=n,_.complete?f(_):(_.onload=()=>f(_),_.onerror=w=>m(w))});const a={...e.data};a.resolution??(a.resolution=vl(n)),r&&a.resourceOptions?.ownsImageBitmap===void 0&&(a.resourceOptions={...a.resourceOptions},a.resourceOptions.ownsImageBitmap=!0);const c=new jt(s,a);return c.resource.src=n,cd(c,t,n)},unload(n){n.destroy(!0)}};St.add(Yf);const eT=".svg",tT="image/svg+xml",rT={extension:{type:ct.LoadParser,priority:Wo.High},name:"loadSVG",test(n){return lh(n,tT)||yu(n,eT)},async testParse(n){return Dg.test(n)},async parse(n,e,t){const r=new Dg(n,e?.data?.resourceOptions);await r.load();const s=new jt(r,{resolution:vl(n),...e?.data});return s.resource.src=e.src,cd(s,t,e.src)},async load(n,e){return(await mt.ADAPTER.fetch(n)).text()},unload:Yf.unload};St.add(rT);const nT=[".mp4",".m4v",".webm",".ogv"],iT=["video/mp4","video/webm","video/ogg"],sT={name:"loadVideo",extension:{type:ct.LoadParser,priority:Wo.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(n){return lh(n,iT)||yu(n,nT)},async load(n,e,t){let r;const s=await(await mt.ADAPTER.fetch(n)).blob(),a=URL.createObjectURL(s);try{const c={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...e?.data?.resourceOptions,autoLoad:!0},f=new Vx(a,c);await f.load();const m=new jt(f,{alphaMode:await hb(),resolution:vl(n),...e?.data});m.resource.src=n,r=cd(m,t,n),r.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(a)})}catch(c){throw URL.revokeObjectURL(a),c}return r},unload(n){n.destroy(!0)}};St.add(sT);class oT{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(t[r])}`).join("&")}}getAlias(e){const{alias:t,name:r,src:s,srcs:a}=e;return No(t||r||s||a,c=>typeof c=="string"?c:Array.isArray(c)?c.map(f=>f?.src??f?.srcs??f):c?.src||c?.srcs?c.src??c.srcs:c,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const r=[];Array.isArray(t)?t.forEach(s=>{const a=s.src??s.srcs,c=s.alias??s.name;let f;if(typeof c=="string"){const m=this._createBundleAssetId(e,c);r.push(m),f=[c,m]}else{const m=c.map(_=>this._createBundleAssetId(e,_));r.push(...m),f=[...c,...m]}this.add({...s,alias:f,src:a})}):Object.keys(t).forEach(s=>{const a=[s,this._createBundleAssetId(e,s)];if(typeof t[s]=="string")this.add({alias:a,src:t[s]});else if(Array.isArray(t[s]))this.add({alias:a,src:t[s]});else{const c=t[s],f=c.src??c.srcs;this.add({...c,alias:a,src:Array.isArray(f)?f:[f]})}r.push(...a)}),this._bundles[e]=r}add(e,t,r,s,a){const c=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(Jt("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),c.push({alias:e,src:t,data:r,format:s,loadParser:a})):Array.isArray(e)?c.push(...e):c.push(e);let f;f=m=>{this.hasKey(m)&&console.warn(`[Resolver] already has key: ${m} overwriting`)},No(c).forEach(m=>{const{src:_,srcs:w}=m;let{data:d,format:v,loadParser:b}=m;const T=No(_||w).map(L=>typeof L=="string"?kE(L):Array.isArray(L)?L:[L]),R=this.getAlias(m);Array.isArray(R)?R.forEach(f):f(R);const k=[];T.forEach(L=>{L.forEach(W=>{let z={};if(typeof W!="object"){z.src=W;for(let te=0;te<this._parsers.length;te++){const K=this._parsers[te];if(K.test(W)){z=K.parse(W);break}}}else d=W.data??d,v=W.format??v,b=W.loadParser??b,z={...z,...W};if(!R)throw new Error(`[Resolver] alias is undefined for this asset: ${z.src}`);z=this.buildResolvedAsset(z,{aliases:R,data:d,format:v,loadParser:b}),k.push(z)})}),R.forEach(L=>{this._assetMap[L]=k})})}resolveBundle(e){const t=Mf(e);e=No(e);const r={};return e.forEach(s=>{const a=this._bundles[s];if(a){const c=this.resolve(a),f={};for(const m in c){const _=c[m];f[this._extractAssetIdFromBundle(s,m)]=_}r[s]=f}}),t?r[e[0]]:r}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const r={};for(const s in t)r[s]=t[s].src;return r}return t.src}resolve(e){const t=Mf(e);e=No(e);const r={};return e.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let a=this._assetMap[s];const c=a[0],f=this._getPreferredOrder(a);f?.priority.forEach(m=>{f.params[m].forEach(_=>{const w=a.filter(d=>d[m]?d[m]===_:!1);w.length&&(a=w)})}),this._resolverHash[s]=a[0]??c}else this._resolverHash[s]=this.buildResolvedAsset({alias:[s],src:s},{});r[s]=this._resolverHash[s]}),t?r[e[0]]:r}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const r=e[0],s=this._preferredOrder.find(a=>a.params.format.includes(r.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}buildResolvedAsset(e,t){const{aliases:r,data:s,loadParser:a,format:c}=t;return(this._basePath||this._rootPath)&&(e.src=Gn.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=r??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...s||{},...e.data},e.loadParser=a??e.loadParser,e.format=c??e.format??Gn.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class aT{constructor(){this._detections=[],this._initialized=!1,this.resolver=new oT,this.loader=new OE,this.cache=oc,this._backgroundLoader=new RE(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const t=e.texturePreference?.resolution??1,r=typeof t=="number"?[t]:t,s=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:s,resolution:r}}),e.preferences&&this.setPreferences(e.preferences)}add(e,t,r,s,a){this.resolver.add(e,t,r,s,a)}async load(e,t){this._initialized||await this.init();const r=Mf(e),s=No(e).map(f=>{if(typeof f!="string"){const m=this.resolver.getAlias(f);return m.some(_=>!this.resolver.hasKey(_))&&this.add(f),Array.isArray(m)?m[0]:m}return this.resolver.hasKey(f)||this.add({alias:f,src:f}),f}),a=this.resolver.resolve(s),c=await this._mapLoadToResolve(a,t);return r?c[s[0]]:c}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let r=!1;typeof e=="string"&&(r=!0,e=[e]);const s=this.resolver.resolveBundle(e),a={},c=Object.keys(s);let f=0,m=0;const _=()=>{t?.(++f/m)},w=c.map(d=>{const v=s[d];return m+=Object.keys(v).length,this._mapLoadToResolve(v,_).then(b=>{a[d]=b})});return await Promise.all(w),r?a[e[0]]:a}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(r=>{this._backgroundLoader.add(Object.values(r))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return oc.get(e);const t={};for(let r=0;r<e.length;r++)t[r]=oc.get(e[r]);return t}async _mapLoadToResolve(e,t){const r=Object.values(e),s=Object.keys(e);this._backgroundLoader.active=!1;const a=await this.loader.load(r,t);this._backgroundLoader.active=!0;const c={};return r.forEach((f,m)=>{const _=a[f.src],w=[f.src];f.alias&&w.push(...f.alias),c[s[m]]=_,oc.set(w,_)}),c}async unload(e){this._initialized||await this.init();const t=No(e).map(s=>typeof s!="string"?s.src:s),r=this.resolver.resolve(t);await this._unloadFromResolved(r)}async unloadBundle(e){this._initialized||await this.init(),e=No(e);const t=this.resolver.resolveBundle(e),r=Object.keys(t).map(s=>this._unloadFromResolved(t[s]));await Promise.all(r)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(r=>{oc.remove(r.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const r of e.detections)e.skipDetections||await r.test()?t=await r.add(t):e.skipDetections||(t=await r.remove(t));return t=t.filter((r,s)=>t.indexOf(r)===s),t}get detections(){return this._detections}get preferWorkers(){return Yf.config.preferWorkers}set preferWorkers(e){Jt("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(r=>r in e).forEach(r=>{t.config[r]=e[r]})})}}const ac=new aT;St.handleByList(ct.LoadParser,ac.loader.parsers).handleByList(ct.ResolveParser,ac.resolver.parsers).handleByList(ct.CacheParser,ac.cache.parsers).handleByList(ct.DetectionParser,ac.detections);const lT={extension:ct.CacheParser,test:n=>Array.isArray(n)&&n.every(e=>e instanceof lt),getCacheableAssets:(n,e)=>{const t={};return n.forEach(r=>{e.forEach((s,a)=>{t[r+(a===0?"":a+1)]=s})}),t}};St.add(lT);async function Zx(n){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=n});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(n)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const uT={extension:{type:ct.DetectionParser,priority:1},test:async()=>Zx("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async n=>[...n,"avif"],remove:async n=>n.filter(e=>e!=="avif")};St.add(uT);const cT={extension:{type:ct.DetectionParser,priority:0},test:async()=>Zx("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async n=>[...n,"webp"],remove:async n=>n.filter(e=>e!=="webp")};St.add(cT);const Z_=["png","jpg","jpeg"],hT={extension:{type:ct.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async n=>[...n,...Z_],remove:async n=>n.filter(e=>!Z_.includes(e))};St.add(hT);const dT="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function vy(n){return dT?!1:document.createElement("video").canPlayType(n)!==""}const fT={extension:{type:ct.DetectionParser,priority:0},test:async()=>vy("video/webm"),add:async n=>[...n,"webm"],remove:async n=>n.filter(e=>e!=="webm")};St.add(fT);const pT={extension:{type:ct.DetectionParser,priority:0},test:async()=>vy("video/mp4"),add:async n=>[...n,"mp4","m4v"],remove:async n=>n.filter(e=>e!=="mp4"&&e!=="m4v")};St.add(pT);const mT={extension:{type:ct.DetectionParser,priority:0},test:async()=>vy("video/ogg"),add:async n=>[...n,"ogv"],remove:async n=>n.filter(e=>e!=="ogv")};St.add(mT);const gT={extension:ct.ResolveParser,test:Yf.test,parse:n=>({resolution:parseFloat(mt.RETINA_PREFIX.exec(n)?.[1]??"1"),format:Gn.extname(n).slice(1),src:n})};St.add(gT);var Kn=(n=>(n[n.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",n[n.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",n[n.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",n[n.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",n[n.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",n[n.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",n[n.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",n[n.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",n[n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",n[n.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",n[n.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",n[n.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",n[n.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",n[n.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",n[n.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",n[n.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",n))(Kn||{});const Of={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let Ta,Vc;function J_(){Vc={bptc:Ta.getExtension("EXT_texture_compression_bptc"),astc:Ta.getExtension("WEBGL_compressed_texture_astc"),etc:Ta.getExtension("WEBGL_compressed_texture_etc"),s3tc:Ta.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Ta.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:Ta.getExtension("WEBGL_compressed_texture_pvrtc")||Ta.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:Ta.getExtension("WEBGL_compressed_texture_etc1"),atc:Ta.getExtension("WEBGL_compressed_texture_atc")}}const yT={extension:{type:ct.DetectionParser,priority:2},test:async()=>{const n=mt.ADAPTER.createCanvas().getContext("webgl");return n?(Ta=n,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async n=>{Vc||J_();const e=[];for(const t in Vc)Vc[t]&&e.push(t);return[...e,...n]},remove:async n=>(Vc||J_(),n.filter(e=>!(e in Vc)))};St.add(yT);class vT extends Hf{constructor(e,t={width:1,height:1,autoLoad:!0}){let r,s;typeof e=="string"?(r=e,s=new Uint8Array):(r=null,s=e),super(s,t),this.origin=r,this.buffer=s?new wg(s):null,this._load=null,this.loaded=!1,this.origin!==null&&t.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new wg(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class uc extends vT{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=uc._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||uc._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,r){const s=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;s.pixelStorei(s.UNPACK_ALIGNMENT,4);for(let a=0,c=this.levels;a<c;a++){const{levelID:f,levelWidth:m,levelHeight:_,levelBuffer:w}=this._levelBuffers[a];s.compressedTexImage2D(s.TEXTURE_2D,f,this.format,m,_,0,w)}return!0}onBlobLoaded(){this._levelBuffers=uc._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,t,r,s,a,c,f){const m=new Array(r);let _=e.byteOffset,w=c,d=f,v=w+s-1&~(s-1),b=d+a-1&~(a-1),T=v*b*Of[t];for(let R=0;R<r;R++)m[R]={levelID:R,levelWidth:r>1?w:v,levelHeight:r>1?d:b,levelBuffer:new Uint8Array(e.buffer,_,T)},_+=T,w=w>>1||1,d=d>>1||1,v=w+s-1&~(s-1),b=d+a-1&~(a-1),T=v*b*Of[t];return m}}const Qm=4,ef=124,_T=32,e0=20,xT=542327876,tf={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},wT={FOURCC:2},rf={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},bT=1,ST=2,ET=4,TT=64,AT=512,CT=131072,IT=827611204,PT=861165636,RT=894720068,kT=808540228,MT=4,OT={[IT]:Kn.COMPRESSED_RGBA_S3TC_DXT1_EXT,[PT]:Kn.COMPRESSED_RGBA_S3TC_DXT3_EXT,[RT]:Kn.COMPRESSED_RGBA_S3TC_DXT5_EXT},DT={70:Kn.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Kn.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Kn.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Kn.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Kn.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Kn.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Kn.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Kn.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Kn.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:Kn.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:Kn.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:Kn.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:Kn.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function LT(n){const e=new Uint32Array(n);if(e[0]!==xT)throw new Error("Invalid DDS file magic word");const t=new Uint32Array(n,0,ef/Uint32Array.BYTES_PER_ELEMENT),r=t[tf.HEIGHT],s=t[tf.WIDTH],a=t[tf.MIPMAP_COUNT],c=new Uint32Array(n,tf.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,_T/Uint32Array.BYTES_PER_ELEMENT),f=c[bT];if(f&ET){const m=c[wT.FOURCC];if(m!==kT){const W=OT[m],z=Qm+ef,te=new Uint8Array(n,z);return[new uc(te,{format:W,width:s,height:r,levels:a})]}const _=Qm+ef,w=new Uint32Array(e.buffer,_,e0/Uint32Array.BYTES_PER_ELEMENT),d=w[rf.DXGI_FORMAT],v=w[rf.RESOURCE_DIMENSION],b=w[rf.MISC_FLAG],T=w[rf.ARRAY_SIZE],R=DT[d];if(R===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${d}`);if(b===MT)throw new Error("DDSParser does not support cubemap textures");if(v===6)throw new Error("DDSParser does not supported 3D texture data");const k=new Array,L=Qm+ef+e0;if(T===1)k.push(new Uint8Array(n,L));else{const W=Of[R];let z=0,te=s,K=r;for(let F=0;F<a;F++){const ie=Math.max(1,te+3&-4),ye=Math.max(1,K+3&-4),Oe=ie*ye*W;z+=Oe,te=te>>>1,K=K>>>1}let de=L;for(let F=0;F<T;F++)k.push(new Uint8Array(n,de,z)),de+=z}return k.map(W=>new uc(W,{format:R,width:s,height:r,levels:a}))}throw f&TT?new Error("DDSParser does not support uncompressed texture data."):f&AT?new Error("DDSParser does not supported YUV uncompressed texture data."):f&CT?new Error("DDSParser does not support single-channel (lumninance) texture data!"):f&ST?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const t0=[171,75,84,88,32,49,49,187,13,10,26,10],NT=67305985,Mo={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},$g=64,r0={[It.UNSIGNED_BYTE]:1,[It.UNSIGNED_SHORT]:2,[It.INT]:4,[It.UNSIGNED_INT]:4,[It.FLOAT]:4,[It.HALF_FLOAT]:8},FT={[tt.RGBA]:4,[tt.RGB]:3,[tt.RG]:2,[tt.RED]:1,[tt.LUMINANCE]:1,[tt.LUMINANCE_ALPHA]:2,[tt.ALPHA]:1},BT={[It.UNSIGNED_SHORT_4_4_4_4]:2,[It.UNSIGNED_SHORT_5_5_5_1]:2,[It.UNSIGNED_SHORT_5_6_5]:2};function UT(n,e,t=!1){const r=new DataView(e);if(!GT(n,r))return null;const s=r.getUint32(Mo.ENDIANNESS,!0)===NT,a=r.getUint32(Mo.GL_TYPE,s),c=r.getUint32(Mo.GL_FORMAT,s),f=r.getUint32(Mo.GL_INTERNAL_FORMAT,s),m=r.getUint32(Mo.PIXEL_WIDTH,s),_=r.getUint32(Mo.PIXEL_HEIGHT,s)||1,w=r.getUint32(Mo.PIXEL_DEPTH,s)||1,d=r.getUint32(Mo.NUMBER_OF_ARRAY_ELEMENTS,s)||1,v=r.getUint32(Mo.NUMBER_OF_FACES,s),b=r.getUint32(Mo.NUMBER_OF_MIPMAP_LEVELS,s),T=r.getUint32(Mo.BYTES_OF_KEY_VALUE_DATA,s);if(_===0||w!==1)throw new Error("Only 2D textures are supported");if(v!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(d!==1)throw new Error("WebGL does not support array textures");const R=4,k=4,L=m+3&-4,W=_+3&-4,z=new Array(d);let te=m*_;a===0&&(te=L*W);let K;if(a!==0?r0[a]?K=r0[a]*FT[c]:K=BT[a]:K=Of[f],K===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const de=t?zT(r,T,s):null;let F=te*K,ie=m,ye=_,Oe=L,Pe=W,ge=$g+T;for(let ve=0;ve<b;ve++){const we=r.getUint32(ge,s);let qe=ge+4;for(let H=0;H<d;H++){let V=z[H];V||(V=z[H]=new Array(b)),V[ve]={levelID:ve,levelWidth:b>1||a!==0?ie:Oe,levelHeight:b>1||a!==0?ye:Pe,levelBuffer:new Uint8Array(e,qe,F)},qe+=F}ge+=we+4,ge=ge%4!==0?ge+4-ge%4:ge,ie=ie>>1||1,ye=ye>>1||1,Oe=ie+R-1&-4,Pe=ye+k-1&-4,F=Oe*Pe*K}return a!==0?{uncompressed:z.map(ve=>{let we=ve[0].levelBuffer,qe=!1;return a===It.FLOAT?we=new Float32Array(ve[0].levelBuffer.buffer,ve[0].levelBuffer.byteOffset,ve[0].levelBuffer.byteLength/4):a===It.UNSIGNED_INT?(qe=!0,we=new Uint32Array(ve[0].levelBuffer.buffer,ve[0].levelBuffer.byteOffset,ve[0].levelBuffer.byteLength/4)):a===It.INT&&(qe=!0,we=new Int32Array(ve[0].levelBuffer.buffer,ve[0].levelBuffer.byteOffset,ve[0].levelBuffer.byteLength/4)),{resource:new Hf(we,{width:ve[0].levelWidth,height:ve[0].levelHeight}),type:a,format:qe?jT(c):c}}),kvData:de}:{compressed:z.map(ve=>new uc(null,{format:f,width:m,height:_,levels:b,levelBuffers:ve})),kvData:de}}function GT(n,e){for(let t=0;t<t0.length;t++)if(e.getUint8(t)!==t0[t])return console.error(`${n} is not a valid *.ktx file!`),!1;return!0}function jT(n){switch(n){case tt.RGBA:return tt.RGBA_INTEGER;case tt.RGB:return tt.RGB_INTEGER;case tt.RG:return tt.RG_INTEGER;case tt.RED:return tt.RED_INTEGER;default:return n}}function zT(n,e,t){const r=new Map;let s=0;for(;s<e;){const a=n.getUint32($g+s,t),c=$g+s+4,f=3-(a+3)%4;if(a===0||a>e-s){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let m=0;for(;m<a&&n.getUint8(c+m)!==0;m++);if(m===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const _=new TextDecoder().decode(new Uint8Array(n.buffer,c,m)),w=new DataView(n.buffer,c+m+1,a-m-1);r.set(_,w),s+=4+a+f}return r}const HT={extension:{type:ct.LoadParser,priority:Wo.High},name:"loadDDS",test(n){return yu(n,".dds")},async load(n,e,t){const r=await(await mt.ADAPTER.fetch(n)).arrayBuffer(),s=LT(r).map(a=>{const c=new jt(a,{mipmap:Na.OFF,alphaMode:ps.NO_PREMULTIPLIED_ALPHA,resolution:vl(n),...e.data});return cd(c,t,n)});return s.length===1?s[0]:s},unload(n){Array.isArray(n)?n.forEach(e=>e.destroy(!0)):n.destroy(!0)}};St.add(HT);const VT={extension:{type:ct.LoadParser,priority:Wo.High},name:"loadKTX",test(n){return yu(n,".ktx")},async load(n,e,t){const r=await(await mt.ADAPTER.fetch(n)).arrayBuffer(),{compressed:s,uncompressed:a,kvData:c}=UT(n,r),f=s??a,m={mipmap:Na.OFF,alphaMode:ps.NO_PREMULTIPLIED_ALPHA,resolution:vl(n),...e.data},_=f.map(w=>{f===a&&Object.assign(m,{type:w.type,format:w.format});const d=w.resource??w,v=new jt(d,m);return v.ktxKeyValueData=c,cd(v,t,n)});return _.length===1?_[0]:_},unload(n){Array.isArray(n)?n.forEach(e=>e.destroy(!0)):n.destroy(!0)}};St.add(VT);const WT=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],$T={extension:ct.ResolveParser,test:n=>{const e=Gn.extname(n).slice(1);return["basis","ktx","dds"].includes(e)},parse:n=>{const e=n.split("."),t=e.pop();if(["ktx","dds"].includes(t)){const r=e.pop();if(WT.includes(r))return{resolution:parseFloat(mt.RETINA_PREFIX.exec(n)?.[1]??"1"),format:r,src:n}}return{resolution:parseFloat(mt.RETINA_PREFIX.exec(n)?.[1]??"1"),format:t,src:n}}};St.add($T);const nf=new zt,XT=4,Jx=class Qh{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){const e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,t,r,s){const a=new Image;return a.src=await this.base64(e,t,r,s),a}async base64(e,t,r,s){const a=this.canvas(e,s);if(a.toBlob!==void 0)return new Promise((c,f)=>{a.toBlob(m=>{if(!m){f(new Error("ICanvas.toBlob failed!"));return}const _=new FileReader;_.onload=()=>c(_.result),_.onerror=f,_.readAsDataURL(m)},t,r)});if(a.toDataURL!==void 0)return a.toDataURL(t,r);if(a.convertToBlob!==void 0){const c=await a.convertToBlob({type:t,quality:r});return new Promise((f,m)=>{const _=new FileReader;_.onload=()=>f(_.result),_.onerror=m,_.readAsDataURL(c)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:r,width:s,height:a,flipY:c,premultipliedAlpha:f}=this._rawPixels(e,t);c&&Qh._flipY(r,s,a),f&&Qh._unpremultiplyAlpha(r);const m=new Cb(s,a,1),_=new ImageData(new Uint8ClampedArray(r.buffer),s,a);return m.context.putImageData(_,0,0),m.canvas}pixels(e,t){const{pixels:r,width:s,height:a,flipY:c,premultipliedAlpha:f}=this._rawPixels(e,t);return c&&Qh._flipY(r,s,a),f&&Qh._unpremultiplyAlpha(r),r}_rawPixels(e,t){const r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");let s,a=!1,c=!1,f,m=!1;e&&(e instanceof dc?f=e:(f=r.generateTexture(e,{region:t,resolution:r.resolution,multisample:r.multisample}),m=!0,t&&(nf.width=t.width,nf.height=t.height,t=nf)));const _=r.gl;if(f){if(s=f.baseTexture.resolution,t=t??f.frame,a=!1,c=f.baseTexture.alphaMode>0&&f.baseTexture.format===tt.RGBA,!m){r.renderTexture.bind(f);const b=f.framebuffer.glFramebuffers[r.CONTEXT_UID];b.blitFramebuffer&&r.framebuffer.bind(b.blitFramebuffer)}}else s=r.resolution,t||(t=nf,t.width=r.width/s,t.height=r.height/s),a=!0,c=this._rendererPremultipliedAlpha,r.renderTexture.bind();const w=Math.max(Math.round(t.width*s),1),d=Math.max(Math.round(t.height*s),1),v=new Uint8Array(XT*w*d);return _.readPixels(Math.round(t.x*s),Math.round(t.y*s),w,d,_.RGBA,_.UNSIGNED_BYTE,v),m&&f?.destroy(!0),{pixels:v,width:w,height:d,flipY:a,premultipliedAlpha:c}}destroy(){this.renderer=null}static _flipY(e,t,r){const s=t<<2,a=r>>1,c=new Uint8Array(s);for(let f=0;f<a;f++){const m=f*s,_=(r-f-1)*s;c.set(e.subarray(m,m+s)),e.copyWithin(m,_,_+s),e.set(c,_)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let r=0;r<t;r+=4){const s=e[r+3];if(s!==0){const a=255.001/s;e[r]=e[r]*a+.5,e[r+1]=e[r+1]*a+.5,e[r+2]=e[r+2]*a+.5}}}};Jx.extension={name:"extract",type:ct.RendererSystem};let qT=Jx;St.add(qT);const Df={build(n){const e=n.points;let t,r,s,a,c,f;if(n.type===Yn.CIRC){const T=n.shape;t=T.x,r=T.y,c=f=T.radius,s=a=0}else if(n.type===Yn.ELIP){const T=n.shape;t=T.x,r=T.y,c=T.width,f=T.height,s=a=0}else{const T=n.shape,R=T.width/2,k=T.height/2;t=T.x+R,r=T.y+k,c=f=Math.max(0,Math.min(T.radius,Math.min(R,k))),s=R-c,a=k-f}if(!(c>=0&&f>=0&&s>=0&&a>=0)){e.length=0;return}const m=Math.ceil(2.3*Math.sqrt(c+f)),_=m*8+(s?4:0)+(a?4:0);if(e.length=_,_===0)return;if(m===0){e.length=8,e[0]=e[6]=t+s,e[1]=e[3]=r+a,e[2]=e[4]=t-s,e[5]=e[7]=r-a;return}let w=0,d=m*4+(s?2:0)+2,v=d,b=_;{const T=s+c,R=a,k=t+T,L=t-T,W=r+R;if(e[w++]=k,e[w++]=W,e[--d]=W,e[--d]=L,a){const z=r-R;e[v++]=L,e[v++]=z,e[--b]=z,e[--b]=k}}for(let T=1;T<m;T++){const R=Math.PI/2*(T/m),k=s+Math.cos(R)*c,L=a+Math.sin(R)*f,W=t+k,z=t-k,te=r+L,K=r-L;e[w++]=W,e[w++]=te,e[--d]=te,e[--d]=z,e[v++]=z,e[v++]=K,e[--b]=K,e[--b]=W}{const T=s,R=a+f,k=t+T,L=t-T,W=r+R,z=r-R;e[w++]=k,e[w++]=W,e[--b]=z,e[--b]=k,s&&(e[w++]=L,e[w++]=W,e[--b]=z,e[--b]=L)}},triangulate(n,e){const t=n.points,r=e.points,s=e.indices;if(t.length===0)return;let a=r.length/2;const c=a;let f,m;if(n.type!==Yn.RREC){const w=n.shape;f=w.x,m=w.y}else{const w=n.shape;f=w.x+w.width/2,m=w.y+w.height/2}const _=n.matrix;r.push(n.matrix?_.a*f+_.c*m+_.tx:f,n.matrix?_.b*f+_.d*m+_.ty:m),a++,r.push(t[0],t[1]);for(let w=2;w<t.length;w+=2)r.push(t[w],t[w+1]),s.push(a++,c,a);s.push(c+1,c,a)}};function n0(n,e=!1){const t=n.length;if(t<6)return;let r=0;for(let s=0,a=n[t-2],c=n[t-1];s<t;s+=2){const f=n[s],m=n[s+1];r+=(f-a)*(m+c),a=f,c=m}if(!e&&r>0||e&&r<=0){const s=t/2;for(let a=s+s%2;a<t;a+=2){const c=t-a-2,f=t-a-1,m=a,_=a+1;[n[c],n[m]]=[n[m],n[c]],[n[f],n[_]]=[n[_],n[f]]}}}const ew={build(n){n.points=n.shape.points.slice()},triangulate(n,e){let t=n.points;const r=n.holes,s=e.points,a=e.indices;if(t.length>=6){n0(t,!1);const c=[];for(let _=0;_<r.length;_++){const w=r[_];n0(w.points,!0),c.push(t.length/2),t=t.concat(w.points)}const f=A1(t,c,2);if(!f)return;const m=s.length/2;for(let _=0;_<f.length;_+=3)a.push(f[_]+m),a.push(f[_+1]+m),a.push(f[_+2]+m);for(let _=0;_<t.length;_++)s.push(t[_])}}},KT={build(n){const e=n.shape,t=e.x,r=e.y,s=e.width,a=e.height,c=n.points;c.length=0,s>=0&&a>=0&&c.push(t,r,t+s,r,t+s,r+a,t,r+a)},triangulate(n,e){const t=n.points,r=e.points;if(t.length===0)return;const s=r.length/2;r.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(s,s+1,s+2,s+1,s+2,s+3)}},YT={build(n){Df.build(n)},triangulate(n,e){Df.triangulate(n,e)}};var no=(n=>(n.MITER="miter",n.BEVEL="bevel",n.ROUND="round",n))(no||{}),uu=(n=>(n.BUTT="butt",n.ROUND="round",n.SQUARE="square",n))(uu||{});const nh={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(n,e=20){if(!this.adaptive||!n||isNaN(n))return e;let t=Math.ceil(n/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}};class i0{static curveTo(e,t,r,s,a,c){const f=c[c.length-2],m=c[c.length-1]-t,_=f-e,w=s-t,d=r-e,v=Math.abs(m*d-_*w);if(v<1e-8||a===0)return(c[c.length-2]!==e||c[c.length-1]!==t)&&c.push(e,t),null;const b=m*m+_*_,T=w*w+d*d,R=m*w+_*d,k=a*Math.sqrt(b)/v,L=a*Math.sqrt(T)/v,W=k*R/b,z=L*R/T,te=k*d+L*_,K=k*w+L*m,de=_*(L+W),F=m*(L+W),ie=d*(k+z),ye=w*(k+z),Oe=Math.atan2(F-K,de-te),Pe=Math.atan2(ye-K,ie-te);return{cx:te+e,cy:K+t,radius:a,startAngle:Oe,endAngle:Pe,anticlockwise:_*w>d*m}}static arc(e,t,r,s,a,c,f,m,_){const w=f-c,d=nh._segmentsCount(Math.abs(w)*a,Math.ceil(Math.abs(w)/Tf)*40),v=w/(d*2),b=v*2,T=Math.cos(v),R=Math.sin(v),k=d-1,L=k%1/k;for(let W=0;W<=k;++W){const z=W+L*W,te=v+c+b*z,K=Math.cos(te),de=-Math.sin(te);_.push((T*K+R*de)*a+r,(T*-de+R*K)*a+s)}}}class QT{constructor(){this.reset()}begin(e,t,r){this.reset(),this.style=e,this.start=t,this.attribStart=r}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class _y{static curveLength(e,t,r,s,a,c,f,m){let _=0,w=0,d=0,v=0,b=0,T=0,R=0,k=0,L=0,W=0,z=0,te=e,K=t;for(let de=1;de<=10;++de)w=de/10,d=w*w,v=d*w,b=1-w,T=b*b,R=T*b,k=R*e+3*T*w*r+3*b*d*a+v*f,L=R*t+3*T*w*s+3*b*d*c+v*m,W=te-k,z=K-L,te=k,K=L,_+=Math.sqrt(W*W+z*z);return _}static curveTo(e,t,r,s,a,c,f){const m=f[f.length-2],_=f[f.length-1];f.length-=2;const w=nh._segmentsCount(_y.curveLength(m,_,e,t,r,s,a,c));let d=0,v=0,b=0,T=0,R=0;f.push(m,_);for(let k=1,L=0;k<=w;++k)L=k/w,d=1-L,v=d*d,b=v*d,T=L*L,R=T*L,f.push(b*m+3*v*L*e+3*d*T*r+R*a,b*_+3*v*L*t+3*d*T*s+R*c)}}function s0(n,e,t,r,s,a,c,f){const m=n-t*s,_=e-r*s,w=n+t*a,d=e+r*a;let v,b;c?(v=r,b=-t):(v=-r,b=t);const T=m+v,R=_+b,k=w+v,L=d+b;return f.push(T,R,k,L),2}function Qu(n,e,t,r,s,a,c,f){const m=t-n,_=r-e;let w=Math.atan2(m,_),d=Math.atan2(s-n,a-e);f&&w<d?w+=Math.PI*2:!f&&w>d&&(d+=Math.PI*2);let v=w;const b=d-w,T=Math.abs(b),R=Math.sqrt(m*m+_*_),k=(15*T*Math.sqrt(R)/Math.PI>>0)+1,L=b/k;if(v+=L,f){c.push(n,e,t,r);for(let W=1,z=v;W<k;W++,z+=L)c.push(n,e,n+Math.sin(z)*R,e+Math.cos(z)*R);c.push(n,e,s,a)}else{c.push(t,r,n,e);for(let W=1,z=v;W<k;W++,z+=L)c.push(n+Math.sin(z)*R,e+Math.cos(z)*R,n,e);c.push(s,a,n,e)}return k*2}function ZT(n,e){const t=n.shape;let r=n.points||t.points.slice();const s=e.closePointEps;if(r.length===0)return;const a=n.lineStyle,c=new er(r[0],r[1]),f=new er(r[r.length-2],r[r.length-1]),m=t.type!==Yn.POLY||t.closeStroke,_=Math.abs(c.x-f.x)<s&&Math.abs(c.y-f.y)<s;if(m){r=r.slice(),_&&(r.pop(),r.pop(),f.set(r[r.length-2],r[r.length-1]));const V=(c.x+f.x)*.5,D=(f.y+c.y)*.5;r.unshift(V,D),r.push(V,D)}const w=e.points,d=r.length/2;let v=r.length;const b=w.length/2,T=a.width/2,R=T*T,k=a.miterLimit*a.miterLimit;let L=r[0],W=r[1],z=r[2],te=r[3],K=0,de=0,F=-(W-te),ie=L-z,ye=0,Oe=0,Pe=Math.sqrt(F*F+ie*ie);F/=Pe,ie/=Pe,F*=T,ie*=T;const ge=a.alignment,ve=(1-ge)*2,we=ge*2;m||(a.cap===uu.ROUND?v+=Qu(L-F*(ve-we)*.5,W-ie*(ve-we)*.5,L-F*ve,W-ie*ve,L+F*we,W+ie*we,w,!0)+2:a.cap===uu.SQUARE&&(v+=s0(L,W,F,ie,ve,we,!0,w))),w.push(L-F*ve,W-ie*ve,L+F*we,W+ie*we);for(let V=1;V<d-1;++V){L=r[(V-1)*2],W=r[(V-1)*2+1],z=r[V*2],te=r[V*2+1],K=r[(V+1)*2],de=r[(V+1)*2+1],F=-(W-te),ie=L-z,Pe=Math.sqrt(F*F+ie*ie),F/=Pe,ie/=Pe,F*=T,ie*=T,ye=-(te-de),Oe=z-K,Pe=Math.sqrt(ye*ye+Oe*Oe),ye/=Pe,Oe/=Pe,ye*=T,Oe*=T;const D=z-L,Y=W-te,j=z-K,U=de-te,q=D*j+Y*U,ce=Y*j-U*D,Ae=ce<0;if(Math.abs(ce)<.001*Math.abs(q)){w.push(z-F*ve,te-ie*ve,z+F*we,te+ie*we),q>=0&&(a.join===no.ROUND?v+=Qu(z,te,z-F*ve,te-ie*ve,z-ye*ve,te-Oe*ve,w,!1)+4:v+=2,w.push(z-ye*we,te-Oe*we,z+ye*ve,te+Oe*ve));continue}const Me=(-F+L)*(-ie+te)-(-F+z)*(-ie+W),Fe=(-ye+K)*(-Oe+te)-(-ye+z)*(-Oe+de),je=(D*Fe-j*Me)/ce,Ke=(U*Me-Y*Fe)/ce,it=(je-z)*(je-z)+(Ke-te)*(Ke-te),Se=z+(je-z)*ve,ot=te+(Ke-te)*ve,Qe=z-(je-z)*we,gt=te-(Ke-te)*we,Bt=Math.min(D*D+Y*Y,j*j+U*U),dt=Ae?ve:we,vt=Bt+dt*dt*R,mr=it<=vt;let Cr=a.join;if(Cr===no.MITER&&it/R>k&&(Cr=no.BEVEL),mr)switch(Cr){case no.MITER:{w.push(Se,ot,Qe,gt);break}case no.BEVEL:{Ae?w.push(Se,ot,z+F*we,te+ie*we,Se,ot,z+ye*we,te+Oe*we):w.push(z-F*ve,te-ie*ve,Qe,gt,z-ye*ve,te-Oe*ve,Qe,gt),v+=2;break}case no.ROUND:{Ae?(w.push(Se,ot,z+F*we,te+ie*we),v+=Qu(z,te,z+F*we,te+ie*we,z+ye*we,te+Oe*we,w,!0)+4,w.push(Se,ot,z+ye*we,te+Oe*we)):(w.push(z-F*ve,te-ie*ve,Qe,gt),v+=Qu(z,te,z-F*ve,te-ie*ve,z-ye*ve,te-Oe*ve,w,!1)+4,w.push(z-ye*ve,te-Oe*ve,Qe,gt));break}}else{switch(w.push(z-F*ve,te-ie*ve,z+F*we,te+ie*we),Cr){case no.MITER:{Ae?w.push(Qe,gt,Qe,gt):w.push(Se,ot,Se,ot),v+=2;break}case no.ROUND:{Ae?v+=Qu(z,te,z+F*we,te+ie*we,z+ye*we,te+Oe*we,w,!0)+2:v+=Qu(z,te,z-F*ve,te-ie*ve,z-ye*ve,te-Oe*ve,w,!1)+2;break}}w.push(z-ye*ve,te-Oe*ve,z+ye*we,te+Oe*we),v+=2}}L=r[(d-2)*2],W=r[(d-2)*2+1],z=r[(d-1)*2],te=r[(d-1)*2+1],F=-(W-te),ie=L-z,Pe=Math.sqrt(F*F+ie*ie),F/=Pe,ie/=Pe,F*=T,ie*=T,w.push(z-F*ve,te-ie*ve,z+F*we,te+ie*we),m||(a.cap===uu.ROUND?v+=Qu(z-F*(ve-we)*.5,te-ie*(ve-we)*.5,z-F*ve,te-ie*ve,z+F*we,te+ie*we,w,!1)+2:a.cap===uu.SQUARE&&(v+=s0(z,te,F,ie,ve,we,!1,w)));const qe=e.indices,H=nh.epsilon*nh.epsilon;for(let V=b;V<v+b-2;++V)L=w[V*2],W=w[V*2+1],z=w[(V+1)*2],te=w[(V+1)*2+1],K=w[(V+2)*2],de=w[(V+2)*2+1],!(Math.abs(L*(te-de)+z*(de-W)+K*(W-te))<H)&&qe.push(V,V+1,V+2)}function JT(n,e){let t=0;const r=n.shape,s=n.points||r.points,a=r.type!==Yn.POLY||r.closeStroke;if(s.length===0)return;const c=e.points,f=e.indices,m=s.length/2,_=c.length/2;let w=_;for(c.push(s[0],s[1]),t=1;t<m;t++)c.push(s[t*2],s[t*2+1]),f.push(w,w+1),w++;a&&f.push(w,_)}function o0(n,e){n.lineStyle.native?JT(n,e):ZT(n,e)}class xy{static curveLength(e,t,r,s,a,c){const f=e-2*r+a,m=t-2*s+c,_=2*r-2*e,w=2*s-2*t,d=4*(f*f+m*m),v=4*(f*_+m*w),b=_*_+w*w,T=2*Math.sqrt(d+v+b),R=Math.sqrt(d),k=2*d*R,L=2*Math.sqrt(b),W=v/R;return(k*T+R*v*(T-L)+(4*b*d-v*v)*Math.log((2*R+W+T)/(W+L)))/(4*k)}static curveTo(e,t,r,s,a){const c=a[a.length-2],f=a[a.length-1],m=nh._segmentsCount(xy.curveLength(c,f,e,t,r,s));let _=0,w=0;for(let d=1;d<=m;++d){const v=d/m;_=c+(e-c)*v,w=f+(t-f)*v,a.push(_+(e+(r-e)*v-_)*v,w+(t+(s-t)*v-w)*v)}}}const Zm={[Yn.POLY]:ew,[Yn.CIRC]:Df,[Yn.ELIP]:Df,[Yn.RECT]:KT,[Yn.RREC]:YT},a0=[],sf=[];class Lf{constructor(e,t=null,r=null,s=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=t,this.matrix=s,this.type=e.type}clone(){return new Lf(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Uc=new er,tw=class rw extends lx{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Rf,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),sf.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),a0.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,r=null,s=null){const a=new Lf(e,t,r,s);return this.graphicsData.push(a),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const r=new Lf(e,null,null,t),s=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=s.lineStyle,s.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let r=0;r<t.length;++r){const s=t[r];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(e,Uc):Uc.copyFrom(e),s.shape.contains(Uc.x,Uc.y))){let a=!1;if(s.holes){for(let c=0;c<s.holes.length;c++)if(s.holes[c].shape.contains(Uc.x,Uc.y)){a=!0;break}}if(!a)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let r=null,s=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],s=r.style);for(let m=this.shapeIndex;m<t.length;m++){this.shapeIndex++;const _=t[m],w=_.fillStyle,d=_.lineStyle;Zm[_.type].build(_),_.matrix&&this.transformPoints(_.points,_.matrix),(w.visible||d.visible)&&this.processHoles(_.holes);for(let v=0;v<2;v++){const b=v===0?w:d;if(!b.visible)continue;const T=b.texture.baseTexture,R=this.indices.length,k=this.points.length/2;T.wrapMode=yl.REPEAT,v===0?this.processFill(_):this.processLine(_);const L=this.points.length/2-k;L!==0&&(r&&!this._compareStyles(s,b)&&(r.end(R,k),r=null),r||(r=a0.pop()||new QT,r.begin(b,R,k),this.batches.push(r),s=b),this.addUvs(this.points,e,b.texture,k,L,b.matrix))}}const a=this.indices.length,c=this.points.length/2;if(r&&r.end(a,c),this.batches.length===0){this.batchable=!0;return}const f=c>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&f===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=f?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const r=this.graphicsData[e],s=r.fillStyle,a=r.lineStyle;if(s&&!s.texture.baseTexture.valid||a&&!a.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,r=e.length;t<r;t++){const s=e[t];for(let a=0;a<s.size;a++){const c=s.start+a;this.indicesUint16[c]=this.indicesUint16[c]-s.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<rw.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++jt._globalBatch;for(let d=0;d<this.drawCalls.length;d++)this.drawCalls[d].texArray.clear(),sf.push(this.drawCalls[d]);this.drawCalls.length=0;const t=this.colors,r=this.textureIds;let s=sf.pop();s||(s=new Eg,s.texArray=new Ig),s.texArray.count=0,s.start=0,s.size=0,s.type=Bo.TRIANGLES;let a=0,c=null,f=0,m=!1,_=Bo.TRIANGLES,w=0;this.drawCalls.push(s);for(let d=0;d<this.batches.length;d++){const v=this.batches[d],b=8,T=v.style,R=T.texture.baseTexture;m!==!!T.native&&(m=!!T.native,_=m?Bo.LINES:Bo.TRIANGLES,c=null,a=b,e++),c!==R&&(c=R,R._batchEnabled!==e&&(a===b&&(e++,a=0,s.size>0&&(s=sf.pop(),s||(s=new Eg,s.texArray=new Ig),this.drawCalls.push(s)),s.start=w,s.size=0,s.texArray.count=0,s.type=_),R.touched=1,R._batchEnabled=e,R._batchLocation=a,R.wrapMode=yl.REPEAT,s.texArray.elements[s.texArray.count++]=R,a++)),s.size+=v.size,w+=v.size,f=R._batchLocation,this.addColors(t,T.color,T.alpha,v.attribSize,v.attribStart),this.addTextureIds(r,f,v.attribSize,v.attribStart)}jt._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,r=this.colors,s=this.textureIds,a=new ArrayBuffer(e.length*3*4),c=new Float32Array(a),f=new Uint32Array(a);let m=0;for(let _=0;_<e.length/2;_++)c[m++]=e[_*2],c[m++]=e[_*2+1],c[m++]=t[_*2],c[m++]=t[_*2+1],f[m++]=r[_],c[m++]=s[_];this._buffer.update(a),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?ew.triangulate(e,this):Zm[e.type].triangulate(e,this)}processLine(e){o0(e,this);for(let t=0;t<e.holes.length;t++)o0(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const r=e[t];Zm[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let r=0;r<e.length/2;r++){const s=e[r*2],a=e[r*2+1];e[r*2]=t.a*s+t.c*a+t.tx,e[r*2+1]=t.b*s+t.d*a+t.ty}}addColors(e,t,r,s,a=0){const c=kr.shared.setValue(t).toLittleEndianNumber(),f=kr.shared.setValue(c).toPremultiplied(r);e.length=Math.max(e.length,a+s);for(let m=0;m<s;m++)e[a+m]=f}addTextureIds(e,t,r,s=0){e.length=Math.max(e.length,s+r);for(let a=0;a<r;a++)e[s+a]=t}addUvs(e,t,r,s,a,c=null){let f=0;const m=t.length,_=r.frame;for(;f<a;){let d=e[(s+f)*2],v=e[(s+f)*2+1];if(c){const b=c.a*d+c.c*v+c.tx;v=c.b*d+c.d*v+c.ty,d=b}f++,t.push(d/_.width,v/_.height)}const w=r.baseTexture;(_.width<w.width||_.height<w.height)&&this.adjustUvs(t,r,m,a)}adjustUvs(e,t,r,s){const a=t.baseTexture,c=1e-6,f=r+s*2,m=t.frame,_=m.width/a.width,w=m.height/a.height;let d=m.x/m.width,v=m.y/m.height,b=Math.floor(e[r]+c),T=Math.floor(e[r+1]+c);for(let R=r+2;R<f;R+=2)b=Math.min(b,Math.floor(e[R]+c)),T=Math.min(T,Math.floor(e[R+1]+c));d-=b,v-=T;for(let R=r;R<f;R+=2)e[R]=(e[R]+d)*_,e[R+1]=(e[R+1]+v)*w}};tw.BATCHABLE_SIZE=100;let eA=tw;class Qf{constructor(){this.color=16777215,this.alpha=1,this.texture=lt.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new Qf;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=lt.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class wy extends Qf{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=uu.BUTT,this.join=no.MITER,this.miterLimit=10}clone(){const e=new wy;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=uu.BUTT,this.join=no.MITER,this.miterLimit=10}}const Jm={},Xg=class _f extends Di{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Qf,this._lineStyle=new wy,this._matrix=null,this._holeMode=!1,this.state=Ua.for2d(),this._geometry=e||new eA,this._geometry.refCount++,this._transformID=-1,this._tintColor=new kr(16777215),this.blendMode=Dt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new _f(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,r,s=.5,a=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:r,alignment:s,native:a}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:lt.WHITE,color:e?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:uu.BUTT,join:no.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new lc,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new lc,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,s=r[r.length-2],a=r[r.length-1];return(s!==e||a!==t)&&r.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,r,s){this._initCurve();const a=this.currentPath.points;return a.length===0&&this.moveTo(0,0),xy.curveTo(e,t,r,s,a),this}bezierCurveTo(e,t,r,s,a,c){return this._initCurve(),_y.curveTo(e,t,r,s,a,c,this.currentPath.points),this}arcTo(e,t,r,s,a){this._initCurve(e,t);const c=this.currentPath.points,f=i0.curveTo(e,t,r,s,a,c);if(f){const{cx:m,cy:_,radius:w,startAngle:d,endAngle:v,anticlockwise:b}=f;this.arc(m,_,w,d,v,b)}return this}arc(e,t,r,s,a,c=!1){if(s===a)return this;if(!c&&a<=s?a+=Tf:c&&s<=a&&(s+=Tf),a-s===0)return this;const f=e+Math.cos(s)*r,m=t+Math.sin(s)*r,_=this._geometry.closePointEps;let w=this.currentPath?this.currentPath.points:null;if(w){const d=Math.abs(w[w.length-2]-f),v=Math.abs(w[w.length-1]-m);d<_&&v<_||w.push(f,m)}else this.moveTo(f,m),w=this.currentPath.points;return i0.arc(f,m,e,t,r,s,a,c,w),this}beginFill(e=0,t){return this.beginTextureFill({texture:lt.WHITE,color:e,alpha:t})}normalizeColor(e){const t=kr.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:lt.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:r},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,r,s){return this.drawShape(new zt(e,t,r,s))}drawRoundedRect(e,t,r,s,a){return this.drawShape(new $f(e,t,r,s,a))}drawCircle(e,t,r){return this.drawShape(new Vf(e,t,r))}drawEllipse(e,t,r,s){return this.drawShape(new Wf(e,t,r,s))}drawPolygon(...e){let t,r=!0;const s=e[0];s.points?(r=s.closeStroke,t=s.points):Array.isArray(e[0])?t=e[0]:t=e;const a=new lc(t);return a.closeStroke=r,this.drawShape(a),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Yn.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,r=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(e.points);for(let s=0;s<r;s++){const a=e.batches[s],c=a.style.color,f=new Float32Array(this.vertexData.buffer,a.attribStart*4*2,a.attribSize*2),m=new Float32Array(e.uvsFloat32.buffer,a.attribStart*4*2,a.attribSize*2),_=new Uint16Array(e.indicesUint16.buffer,a.start*2,a.size),w={vertexData:f,blendMode:t,indices:_,uvs:m,_batchRGB:kr.shared.setValue(c).toRgbArray(),_tintRGB:c,_texture:a.style.texture,alpha:a.style.alpha,worldAlpha:1};this.batches[s]=w}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,r=this.batches.length;t<r;t++){const s=this.batches[t];s.worldAlpha=this.worldAlpha*s.alpha,e.plugins[this.pluginName].render(s)}}}_renderDirect(e){const t=this._resolveDirectShader(e),r=this._geometry,s=this.worldAlpha,a=t.uniforms,c=r.drawCalls;a.translationMatrix=this.transform.worldTransform,kr.shared.setValue(this._tintColor).premultiply(s).toArray(a.tint),e.shader.bind(t),e.geometry.bind(r,t),e.state.set(this.state);for(let f=0,m=c.length;f<m;f++)this._renderDrawCallDirect(e,r.drawCalls[f])}_renderDrawCallDirect(e,t){const{texArray:r,type:s,size:a,start:c}=t,f=r.count;for(let m=0;m<f;m++)e.texture.bind(r.elements[m],m);e.geometry.draw(s,a,c)}_resolveDirectShader(e){let t=this.shader;const r=this.pluginName;if(!t){if(!Jm[r]){const{maxTextures:s}=e.plugins[r],a=new Int32Array(s);for(let m=0;m<s;m++)a[m]=m;const c={tint:new Float32Array([1,1,1,1]),translationMatrix:new Lr,default:jo.from({uSamplers:a},!0)},f=e.plugins[r]._shader.program;Jm[r]=new La(f,c)}t=Jm[r]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:r,maxX:s,maxY:a}=e.bounds;this._bounds.addFrame(this.transform,t,r,s,a)}containsPoint(e){return this.worldTransform.applyInverse(e,_f._TEMP_POINT),this._geometry.containsPoint(_f._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=kr.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,r=t.a,s=t.b,a=t.c,c=t.d,f=t.tx,m=t.ty,_=this._geometry.points,w=this.vertexData;let d=0;for(let v=0;v<_.length;v+=2){const b=_[v],T=_[v+1];w[d++]=r*b+a*T+f,w[d++]=c*T+s*b+m}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};Xg.curves=nh,Xg._TEMP_POINT=new er;let rd=Xg;class tA{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}const eg=new er,l0=new lc,nw=class iw extends Di{constructor(e,t,r,s=Bo.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=r||Ua.for2d(),this.drawMode=s,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=mt.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Bo.TRIANGLES&&t.length<iw.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const s=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[s]),e.plugins[s].render(this)}calculateVertices(){const e=this.geometry.buffers[0],t=e.data,r=e._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));const s=this.transform.worldTransform,a=s.a,c=s.b,f=s.c,m=s.d,_=s.tx,w=s.ty,d=this.vertexData;for(let v=0;v<d.length/2;v++){const b=t[v*2],T=t[v*2+1];d[v*2]=a*b+f*T+_,d[v*2+1]=c*b+m*T+w}if(this._roundPixels){const v=mt.RESOLUTION;for(let b=0;b<d.length;++b)d[b]=Math.round(d[b]*v)/v}this.vertexDirty=r}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new tA(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,eg);const t=this.geometry.getBuffer("aVertexPosition").data,r=l0.points,s=this.geometry.getIndex().data,a=s.length,c=this.drawMode===4?3:1;for(let f=0;f+2<a;f+=c){const m=s[f]*2,_=s[f+1]*2,w=s[f+2]*2;if(r[0]=t[m],r[1]=t[m+1],r[2]=t[_],r[3]=t[_+1],r[4]=t[w],r[5]=t[w+1],l0.contains(eg.x,eg.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};nw.BATCHABLE_SIZE=100;let id=nw;class Zf extends fu{constructor(e,t,r){super();const s=new dn(e),a=new dn(t,!0),c=new dn(r,!0,!0);this.addAttribute("aVertexPosition",s,2,!1,It.FLOAT).addAttribute("aTextureCoord",a,2,!1,It.FLOAT).addIndex(c),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var rA=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,nA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class sd extends La{constructor(e,t){const r={uSampler:e,alpha:1,uTextureMatrix:Lr.IDENTITY,uColor:new Float32Array([1,1,1,1])};t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t),t.uniforms&&Object.assign(r,t.uniforms),super(t.program||gl.from(nA,rA),r),this._colorDirty=!1,this.uvMatrix=new gy(e),this.batchable=t.program===void 0,this.pluginName=t.pluginName,this._tintColor=new kr(t.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;kr.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class iA extends Zf{constructor(e=100,t=100,r=10,s=10){super(),this.segWidth=r,this.segHeight=s,this.width=e,this.height=t,this.build()}build(){const e=this.segWidth*this.segHeight,t=[],r=[],s=[],a=this.segWidth-1,c=this.segHeight-1,f=this.width/a,m=this.height/c;for(let w=0;w<e;w++){const d=w%this.segWidth,v=w/this.segWidth|0;t.push(d*f,v*m),r.push(d/a,v/c)}const _=a*c;for(let w=0;w<_;w++){const d=w%a,v=w/a|0,b=v*this.segWidth+d,T=v*this.segWidth+d+1,R=(v+1)*this.segWidth+d,k=(v+1)*this.segWidth+d+1;s.push(b,T,R,T,k,R)}this.buffers[0].data=new Float32Array(t),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class sA extends Zf{constructor(e=200,t,r=0){super(new Float32Array(t.length*4),new Float32Array(t.length*4),new Uint16Array((t.length-1)*6)),this.points=t,this._width=e,this.textureScale=r,this.build()}get width(){return this._width}build(){const e=this.points;if(!e)return;const t=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),s=this.getIndex();if(e.length<1)return;t.data.length/4!==e.length&&(t.data=new Float32Array(e.length*4),r.data=new Float32Array(e.length*4),s.data=new Uint16Array((e.length-1)*6));const a=r.data,c=s.data;a[0]=0,a[1]=0,a[2]=0,a[3]=1;let f=0,m=e[0];const _=this._width*this.textureScale,w=e.length;for(let v=0;v<w;v++){const b=v*4;if(this.textureScale>0){const T=m.x-e[v].x,R=m.y-e[v].y,k=Math.sqrt(T*T+R*R);m=e[v],f+=k/_}else f=v/(w-1);a[b]=f,a[b+1]=0,a[b+2]=f,a[b+3]=1}let d=0;for(let v=0;v<w-1;v++){const b=v*2;c[d++]=b,c[d++]=b+1,c[d++]=b+2,c[d++]=b+2,c[d++]=b+1,c[d++]=b+3}r.update(),s.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let t=e[0],r,s=0,a=0;const c=this.buffers[0].data,f=e.length,m=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let _=0;_<f;_++){const w=e[_],d=_*4;_<e.length-1?r=e[_+1]:r=w,a=-(r.x-t.x),s=r.y-t.y;const v=Math.sqrt(s*s+a*a);v<1e-6?(s=0,a=0):(s/=v,a/=v,s*=m,a*=m),c[d]=w.x+s,c[d+1]=w.y+a,c[d+2]=w.x-s,c[d+3]=w.y-a,t=w}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class oA extends id{constructor(e,t,r){const s=new iA(e.width,e.height,t,r),a=new sd(lt.WHITE);super(s,a),this.texture=e,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const e=this.geometry,{width:t,height:r}=this.shader.texture;this.autoResize&&(e.width!==t||e.height!==r)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())}set texture(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(e)}destroy(e){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const of=10;class aA extends oA{constructor(e,t,r,s,a){super(lt.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=t??e.defaultBorders?.left??of,this._rightWidth=s??e.defaultBorders?.right??of,this._topHeight=r??e.defaultBorders?.top??of,this._bottomHeight=a??e.defaultBorders?.bottom??of,this.texture=e}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}updateHorizontalVertices(){const e=this.vertices,t=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*t,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*t,e[25]=e[27]=e[29]=e[31]=this._height}updateVerticalVertices(){const e=this.vertices,t=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*t,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*t,e[6]=e[14]=e[22]=e[30]=this._width}_getMinScale(){const e=this._leftWidth+this._rightWidth,t=this._width>e?1:this._width/e,r=this._topHeight+this._bottomHeight,s=this._height>r?1:this._height/r;return Math.min(t,s)}get width(){return this._width}set width(e){this._width=e,this._refresh()}get height(){return this._height}set height(e){this._height=e,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this._refresh()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this._refresh()}_refresh(){const e=this.texture,t=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;const r=1/this._origWidth,s=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=r*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-r*this._rightWidth,t[9]=t[11]=t[13]=t[15]=s*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-s*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class lA extends id{constructor(e=lt.EMPTY,t,r,s,a){const c=new Zf(t,r,s);c.getBuffer("aVertexPosition").static=!1;const f=new sd(e);super(c,f,null,a),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}_render(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(e)}}class uA extends id{constructor(e,t,r=0){const s=new sA(e.height,t,r),a=new sd(e);r>0&&(e.baseTexture.wrapMode=yl.REPEAT),super(s,a),this.autoUpdate=!0}_render(e){const t=this.geometry;(this.autoUpdate||t._width!==this.shader.texture.height)&&(t._width=this.shader.texture.height,t.update()),super._render(e)}}class cA extends Di{constructor(e=1500,t,r=16384,s=!1){super();const a=16384;r>a&&(r=a),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=r,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=Dt.NORMAL,this.autoResize=s,this.roundPixels=!0,this.baseTexture=null,this.setProperties(t),this._tintColor=new kr(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb)}render(e){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))}onChildrenChange(e){const t=Math.floor(e/this._batchSize);for(;this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID}dispose(){if(this._buffers){for(let e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}}destroy(e){super.destroy(e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class u0{constructor(e,t,r){this.geometry=new fu,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let s=0;s<e.length;++s){let a=e[s];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||It.FLOAT,offset:a.offset},t[s]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let t=0;this.indexBuffer=new dn(Tb(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let c=0;c<this.dynamicProperties.length;++c){const f=this.dynamicProperties[c];f.offset=t,t+=f.size,this.dynamicStride+=f.size}const r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new dn(this.dynamicData,!1,!1);let s=0;this.staticStride=0;for(let c=0;c<this.staticProperties.length;++c){const f=this.staticProperties[c];f.offset=s,s+=f.size,this.staticStride+=f.size}const a=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(a),this.staticDataUint32=new Uint32Array(a),this.staticBuffer=new dn(this.staticData,!0,!1);for(let c=0;c<this.dynamicProperties.length;++c){const f=this.dynamicProperties[c];e.addAttribute(f.attributeName,this.dynamicBuffer,0,f.type===It.UNSIGNED_BYTE,f.type,this.dynamicStride*4,f.offset*4)}for(let c=0;c<this.staticProperties.length;++c){const f=this.staticProperties[c];e.addAttribute(f.attributeName,this.staticBuffer,0,f.type===It.UNSIGNED_BYTE,f.type,this.staticStride*4,f.offset*4)}}uploadDynamic(e,t,r){for(let s=0;s<this.dynamicProperties.length;s++){const a=this.dynamicProperties[s];a.uploadFunction(e,t,r,a.type===It.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,r){for(let s=0;s<this.staticProperties.length;s++){const a=this.staticProperties[s];a.uploadFunction(e,t,r,a.type===It.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var hA=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,dA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class sw extends qf{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new Lr,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:It.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=La.from(dA,hA,{}),this.state=Ua.for2d()}render(e){const t=e.children,r=e._maxSize,s=e._batchSize,a=this.renderer;let c=t.length;if(c===0)return;c>r&&!e.autoResize&&(c=r);let f=e._buffers;f||(f=e._buffers=this.generateBuffers(e));const m=t[0]._texture.baseTexture,_=m.alphaMode>0;this.state.blendMode=sx(e.blendMode,_),a.state.set(this.state);const w=a.gl,d=e.worldTransform.copyTo(this.tempMatrix);d.prepend(a.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=d.toArray(!0),this.shader.uniforms.uColor=kr.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,_).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=m,this.renderer.shader.bind(this.shader);let v=!1;for(let b=0,T=0;b<c;b+=s,T+=1){let R=c-b;R>s&&(R=s),T>=f.length&&f.push(this._generateOneMoreBuffer(e));const k=f[T];k.uploadDynamic(t,b,R);const L=e._bufferUpdateIDs[T]||0;v=v||k._updateID<L,v&&(k._updateID=e._updateID,k.uploadStatic(t,b,R)),a.geometry.bind(k.geometry),w.drawElements(w.TRIANGLES,R*6,w.UNSIGNED_SHORT,0)}}generateBuffers(e){const t=[],r=e._maxSize,s=e._batchSize,a=e._properties;for(let c=0;c<r;c+=s)t.push(new u0(this.properties,a,s));return t}_generateOneMoreBuffer(e){const t=e._batchSize,r=e._properties;return new u0(this.properties,r,t)}uploadVertices(e,t,r,s,a,c){let f=0,m=0,_=0,w=0;for(let d=0;d<r;++d){const v=e[t+d],b=v._texture,T=v.scale.x,R=v.scale.y,k=b.trim,L=b.orig;k?(m=k.x-v.anchor.x*L.width,f=m+k.width,w=k.y-v.anchor.y*L.height,_=w+k.height):(f=L.width*(1-v.anchor.x),m=L.width*-v.anchor.x,_=L.height*(1-v.anchor.y),w=L.height*-v.anchor.y),s[c]=m*T,s[c+1]=w*R,s[c+a]=f*T,s[c+a+1]=w*R,s[c+a*2]=f*T,s[c+a*2+1]=_*R,s[c+a*3]=m*T,s[c+a*3+1]=_*R,c+=a*4}}uploadPosition(e,t,r,s,a,c){for(let f=0;f<r;f++){const m=e[t+f].position;s[c]=m.x,s[c+1]=m.y,s[c+a]=m.x,s[c+a+1]=m.y,s[c+a*2]=m.x,s[c+a*2+1]=m.y,s[c+a*3]=m.x,s[c+a*3+1]=m.y,c+=a*4}}uploadRotation(e,t,r,s,a,c){for(let f=0;f<r;f++){const m=e[t+f].rotation;s[c]=m,s[c+a]=m,s[c+a*2]=m,s[c+a*3]=m,c+=a*4}}uploadUvs(e,t,r,s,a,c){for(let f=0;f<r;++f){const m=e[t+f]._texture._uvs;m?(s[c]=m.x0,s[c+1]=m.y0,s[c+a]=m.x1,s[c+a+1]=m.y1,s[c+a*2]=m.x2,s[c+a*2+1]=m.y2,s[c+a*3]=m.x3,s[c+a*3+1]=m.y3,c+=a*4):(s[c]=0,s[c+1]=0,s[c+a]=0,s[c+a+1]=0,s[c+a*2]=0,s[c+a*2+1]=0,s[c+a*3]=0,s[c+a*3+1]=0,c+=a*4)}}uploadTint(e,t,r,s,a,c){for(let f=0;f<r;++f){const m=e[t+f],_=kr.shared.setValue(m._tintRGB).toPremultiplied(m.alpha,m.texture.baseTexture.alphaMode>0);s[c]=_,s[c+a]=_,s[c+a*2]=_,s[c+a*3]=_,c+=a*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}sw.extension={name:"particle",type:ct.RendererPlugin};St.add(sw);var Jf=(n=>(n[n.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",n[n.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",n))(Jf||{});const af={willReadFrequently:!0},Aa=class Tt{static get experimentalLetterSpacingSupported(){let e=Tt._experimentalLetterSpacingSupported;if(e!==void 0){const t=mt.ADAPTER.getCanvasRenderingContext2D().prototype;e=Tt._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,r,s,a,c,f,m,_){this.text=e,this.style=t,this.width=r,this.height=s,this.lines=a,this.lineWidths=c,this.lineHeight=f,this.maxLineWidth=m,this.fontProperties=_}static measureText(e,t,r,s=Tt._canvas){r=r??t.wordWrap;const a=t.toFontString(),c=Tt.measureFont(a);c.fontSize===0&&(c.fontSize=t.fontSize,c.ascent=t.fontSize);const f=s.getContext("2d",af);f.font=a;const m=(r?Tt.wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),_=new Array(m.length);let w=0;for(let T=0;T<m.length;T++){const R=Tt._measureText(m[T],t.letterSpacing,f);_[T]=R,w=Math.max(w,R)}let d=w+t.strokeThickness;t.dropShadow&&(d+=t.dropShadowDistance);const v=t.lineHeight||c.fontSize+t.strokeThickness;let b=Math.max(v,c.fontSize+t.strokeThickness*2)+t.leading+(m.length-1)*(v+t.leading);return t.dropShadow&&(b+=t.dropShadowDistance),new Tt(e,t,d,b,m,_,v+t.leading,w,c)}static _measureText(e,t,r){let s=!1;Tt.experimentalLetterSpacingSupported&&(Tt.experimentalLetterSpacing?(r.letterSpacing=`${t}px`,r.textLetterSpacing=`${t}px`,s=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let a=r.measureText(e).width;return a>0&&(s?a-=t:a+=(Tt.graphemeSegmenter(e).length-1)*t),a}static wordWrap(e,t,r=Tt._canvas){const s=r.getContext("2d",af);let a=0,c="",f="";const m=Object.create(null),{letterSpacing:_,whiteSpace:w}=t,d=Tt.collapseSpaces(w),v=Tt.collapseNewlines(w);let b=!d;const T=t.wordWrapWidth+_,R=Tt.tokenize(e);for(let k=0;k<R.length;k++){let L=R[k];if(Tt.isNewline(L)){if(!v){f+=Tt.addLine(c),b=!d,c="",a=0;continue}L=" "}if(d){const z=Tt.isBreakingSpace(L),te=Tt.isBreakingSpace(c[c.length-1]);if(z&&te)continue}const W=Tt.getFromCache(L,_,m,s);if(W>T)if(c!==""&&(f+=Tt.addLine(c),c="",a=0),Tt.canBreakWords(L,t.breakWords)){const z=Tt.wordWrapSplit(L);for(let te=0;te<z.length;te++){let K=z[te],de=K,F=1;for(;z[te+F];){const ye=z[te+F];if(!Tt.canBreakChars(de,ye,L,te,t.breakWords))K+=ye;else break;de=ye,F++}te+=F-1;const ie=Tt.getFromCache(K,_,m,s);ie+a>T&&(f+=Tt.addLine(c),b=!1,c="",a=0),c+=K,a+=ie}}else{c.length>0&&(f+=Tt.addLine(c),c="",a=0);const z=k===R.length-1;f+=Tt.addLine(L,!z),b=!1,c="",a=0}else W+a>T&&(b=!1,f+=Tt.addLine(c),c="",a=0),(c.length>0||!Tt.isBreakingSpace(L)||b)&&(c+=L,a+=W)}return f+=Tt.addLine(c,!1),f}static addLine(e,t=!0){return e=Tt.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,r,s){let a=r[e];return typeof a!="number"&&(a=Tt._measureText(e,t,s)+t,r[e]=a),a}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const r=e[t];if(!Tt.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:Tt._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:Tt._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let r="";if(typeof e!="string")return t;for(let s=0;s<e.length;s++){const a=e[s],c=e[s+1];if(Tt.isBreakingSpace(a,c)||Tt.isNewline(a)){r!==""&&(t.push(r),r=""),t.push(a);continue}r+=a}return r!==""&&t.push(r),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,r,s,a){return!0}static wordWrapSplit(e){return Tt.graphemeSegmenter(e)}static measureFont(e){if(Tt._fonts[e])return Tt._fonts[e];const t={ascent:0,descent:0,fontSize:0},r=Tt._canvas,s=Tt._context;s.font=e;const a=Tt.METRICS_STRING+Tt.BASELINE_SYMBOL,c=Math.ceil(s.measureText(a).width);let f=Math.ceil(s.measureText(Tt.BASELINE_SYMBOL).width);const m=Math.ceil(Tt.HEIGHT_MULTIPLIER*f);if(f=f*Tt.BASELINE_MULTIPLIER|0,c===0||m===0)return Tt._fonts[e]=t,t;r.width=c,r.height=m,s.fillStyle="#f00",s.fillRect(0,0,c,m),s.font=e,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(a,0,f);const _=s.getImageData(0,0,c,m).data,w=_.length,d=c*4;let v=0,b=0,T=!1;for(v=0;v<f;++v){for(let R=0;R<d;R+=4)if(_[b+R]!==255){T=!0;break}if(!T)b+=d;else break}for(t.ascent=f-v,b=w-d,T=!1,v=m;v>f;--v){for(let R=0;R<d;R+=4)if(_[b+R]!==255){T=!0;break}if(!T)b-=d;else break}return t.descent=v-f,t.fontSize=t.ascent+t.descent,Tt._fonts[e]=t,t}static clearMetrics(e=""){e?delete Tt._fonts[e]:Tt._fonts={}}static get _canvas(){if(!Tt.__canvas){let e;try{const t=new OffscreenCanvas(0,0);if(t.getContext("2d",af)?.measureText)return Tt.__canvas=t,t;e=mt.ADAPTER.createCanvas()}catch{e=mt.ADAPTER.createCanvas()}e.width=e.height=10,Tt.__canvas=e}return Tt.__canvas}static get _context(){return Tt.__context||(Tt.__context=Tt._canvas.getContext("2d",af)),Tt.__context}};Aa.METRICS_STRING="|q",Aa.BASELINE_SYMBOL="M",Aa.BASELINE_MULTIPLIER=1.4,Aa.HEIGHT_MULTIPLIER=2,Aa.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const n=new Intl.Segmenter;return e=>[...n.segment(e)].map(t=>t.segment)}return n=>[...n]})(),Aa.experimentalLetterSpacing=!1,Aa._fonts={},Aa._newlines=[10,13],Aa._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let iu=Aa;const fA=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],ow=class Zh{constructor(e){this.styleID=0,this.reset(),rg(this,e,e)}clone(){const e={};return rg(e,this,Zh.defaultStyle),new Zh(e)}reset(){rg(this,Zh.defaultStyle,Zh.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=tg(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=tg(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){pA(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=tg(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let r=t.length-1;r>=0;r--){let s=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!fA.includes(s)&&(s=`"${s}"`),t[r]=s}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};ow.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Jf.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let mu=ow;function tg(n){const e=kr.shared,t=r=>{const s=e.setValue(r);return s.alpha===1?s.toHex():s.toRgbaString()};return Array.isArray(n)?n.map(t):t(n)}function pA(n,e){if(!Array.isArray(n)||!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(n[t]!==e[t])return!1;return!0}function rg(n,e,t){for(const r in t)Array.isArray(e[r])?n[r]=e[r].slice():n[r]=e[r]}const mA={texture:!0,children:!1,baseTexture:!0},aw=class qg extends Vo{constructor(e,t,r){let s=!1;r||(r=mt.ADAPTER.createCanvas(),s=!0),r.width=3,r.height=3;const a=lt.from(r);a.orig=new zt,a.trim=new zt,super(a),this._ownCanvas=s,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=qg.defaultResolution??mt.RESOLUTION,this._autoResolution=qg.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return iu.experimentalLetterSpacing}static set experimentalLetterSpacing(e){Jt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),iu.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const r=this.context,s=iu.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=s.width,c=s.height,f=s.lines,m=s.lineHeight,_=s.lineWidths,w=s.maxLineWidth,d=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,a)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,c)+t.padding*2)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=t.strokeThickness,r.textBaseline=t.textBaseline,r.lineJoin=t.lineJoin,r.miterLimit=t.miterLimit;let v,b;const T=t.dropShadow?2:1;for(let R=0;R<T;++R){const k=t.dropShadow&&R===0,L=k?Math.ceil(Math.max(1,c)+t.padding*2):0,W=L*this._resolution;if(k){r.fillStyle="black",r.strokeStyle="black";const te=t.dropShadowColor,K=t.dropShadowBlur*this._resolution,de=t.dropShadowDistance*this._resolution;r.shadowColor=kr.shared.setValue(te).setAlpha(t.dropShadowAlpha).toRgbaString(),r.shadowBlur=K,r.shadowOffsetX=Math.cos(t.dropShadowAngle)*de,r.shadowOffsetY=Math.sin(t.dropShadowAngle)*de+W}else r.fillStyle=this._generateFillStyle(t,f,s),r.strokeStyle=t.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let z=(m-d.fontSize)/2;m-d.fontSize<0&&(z=0);for(let te=0;te<f.length;te++)v=t.strokeThickness/2,b=t.strokeThickness/2+te*m+d.ascent+z,t.align==="right"?v+=w-_[te]:t.align==="center"&&(v+=(w-_[te])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(f[te],v+t.padding,b+t.padding-L,!0),t.fill&&this.drawLetterSpacing(f[te],v+t.padding,b+t.padding-L)}this.updateTexture()}drawLetterSpacing(e,t,r,s=!1){const a=this._style.letterSpacing;let c=!1;if(iu.experimentalLetterSpacingSupported&&(iu.experimentalLetterSpacing?(this.context.letterSpacing=`${a}px`,this.context.textLetterSpacing=`${a}px`,c=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),a===0||c){s?this.context.strokeText(e,t,r):this.context.fillText(e,t,r);return}let f=t;const m=iu.graphemeSegmenter(e);let _=this.context.measureText(e).width,w=0;for(let d=0;d<m.length;++d){const v=m[d];s?this.context.strokeText(v,f,r):this.context.fillText(v,f,r);let b="";for(let T=d+1;T<m.length;++T)b+=m[T];w=this.context.measureText(b).width,f+=_-w+a,_=w}}updateTexture(){const e=this.canvas;if(this._style.trim){const c=Pb(e);c.data&&(e.width=c.width,e.height=c.height,this.context.putImageData(c.data,0,0))}const t=this._texture,r=this._style,s=r.trim?0:r.padding,a=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),a.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,r){const s=e.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;let a;const c=e.dropShadow?e.dropShadowDistance:0,f=e.padding||0,m=this.canvas.width/this._resolution-c-f*2,_=this.canvas.height/this._resolution-c-f*2,w=s.slice(),d=e.fillGradientStops.slice();if(!d.length){const v=w.length+1;for(let b=1;b<v;++b)d.push(b/v)}if(w.unshift(s[0]),d.unshift(0),w.push(s[s.length-1]),d.push(1),e.fillGradientType===Jf.LINEAR_VERTICAL){a=this.context.createLinearGradient(m/2,f,m/2,_+f);const v=r.fontProperties.fontSize+e.strokeThickness;for(let b=0;b<t.length;b++){const T=r.lineHeight*(b-1)+v,R=r.lineHeight*b;let k=R;b>0&&T>R&&(k=(R+T)/2);const L=R+v,W=r.lineHeight*(b+1);let z=L;b+1<t.length&&W<L&&(z=(L+W)/2);const te=(z-k)/_;for(let K=0;K<w.length;K++){let de=0;typeof d[K]=="number"?de=d[K]:de=K/w.length;let F=Math.min(1,Math.max(0,k/_+de*te));F=Number(F.toFixed(5)),a.addColorStop(F,w[K])}}}else{a=this.context.createLinearGradient(f,_/2,m+f,_/2);const v=w.length+1;let b=1;for(let T=0;T<w.length;T++){let R;typeof d[T]=="number"?R=d[T]:R=b/v,a.addColorStop(R,w[T]),b++}}return a}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},mA,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=lu(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=lu(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof mu?this._style=e:this._style=new mu(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};aw.defaultAutoResolution=!0;let by=aw;class gA{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function yA(n,e){let t=!1;if(n?._textures?.length){for(let r=0;r<n._textures.length;r++)if(n._textures[r]instanceof lt){const s=n._textures[r].baseTexture;e.includes(s)||(e.push(s),t=!0)}}return t}function vA(n,e){if(n.baseTexture instanceof jt){const t=n.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function _A(n,e){if(n._texture&&n._texture instanceof lt){const t=n._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function xA(n,e){return e instanceof by?(e.updateText(!0),!0):!1}function wA(n,e){if(e instanceof mu){const t=e.toFontString();return iu.measureFont(t),!0}return!1}function bA(n,e){if(n instanceof by){e.includes(n.style)||e.push(n.style),e.includes(n)||e.push(n);const t=n._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function SA(n,e){return n instanceof mu?(e.includes(n)||e.push(n),!0):!1}const lw=class uw{constructor(e){this.limiter=new gA(uw.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(bA),this.registerFindHook(SA),this.registerFindHook(yA),this.registerFindHook(vA),this.registerFindHook(_A),this.registerUploadHook(xA),this.registerUploadHook(wA)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,Un.system.addOnce(this.tick,this,pu.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let r=0,s=this.uploadHooks.length;r<s;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Un.system.addOnce(this.tick,this,pu.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,r=e.length;t<r;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Di)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&Un.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};lw.uploadsPerFrame=4;let Kg=lw;Object.defineProperties(mt,{UPLOADS_PER_FRAME:{get(){return Kg.uploadsPerFrame},set(n){Jt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Kg.uploadsPerFrame=n}}});function cw(n,e){return e instanceof jt?(e._glTextures[n.CONTEXT_UID]||n.texture.bind(e),!0):!1}function EA(n,e){if(!(e instanceof rd))return!1;const{geometry:t}=e;e.finishPoly(),t.updateBatches();const{batches:r}=t;for(let s=0;s<r.length;s++){const{texture:a}=r[s].style;a&&cw(n,a.baseTexture)}return t.batchable||n.geometry.bind(t,e._resolveDirectShader(n)),!0}function TA(n,e){return n instanceof rd?(e.push(n),!0):!1}class hw extends Kg{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(TA),this.registerUploadHook(cw),this.registerUploadHook(EA)}}hw.extension={name:"prepare",type:ct.RendererSystem};St.add(hw);class od extends Vo{constructor(e,t=!0){super(e[0]instanceof lt?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=t,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Un.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Un.shared.add(this.update,this,pu.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const t=this.animationSpeed*e,r=this.currentFrame;if(this._durations!==null){let s=this._currentTime%1*this._durations[this.currentFrame];for(s+=t/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];const a=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const t=[];for(let r=0;r<e.length;++r)t.push(lt.from(e[r]));return new od(t)}static fromImages(e){const t=[];for(let r=0;r<e.length;++r)t.push(lt.from(e[r]));return new od(t)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof lt)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Un.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Un.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const Vh=new er;class Sy extends Vo{constructor(e,t=100,r=100){super(e),this.tileTransform=new Xf,this._width=t,this._height=r,this.uvMatrix=this.texture.uvMatrix||new gy(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const t=this._texture;!t||!t.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){const e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),s=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,r,s)}getLocalBounds(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new zt),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Vh);const t=this._width,r=this._height,s=-t*this.anchor._x;if(Vh.x>=s&&Vh.x<s+t){const a=-r*this.anchor._y;if(Vh.y>=a&&Vh.y<a+r)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,t){const r=e instanceof lt?e:lt.from(e,t);return new Sy(r,t.width,t.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}}var AA=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,CA=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,IA=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,c0=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,PA=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const lf=new Lr;class dw extends qf{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new vx,this.state=Ua.for2d()}contextChange(){const e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=La.from(c0,PA,t),this.shader=e.context.webGLVersion>1?La.from(CA,AA,t):La.from(c0,IA,t)}render(e){const t=this.renderer,r=this.quad;let s=r.vertices;s[0]=s[6]=e._width*-e.anchor.x,s[1]=s[3]=e._height*-e.anchor.y,s[2]=s[4]=e._width*(1-e.anchor.x),s[5]=s[7]=e._height*(1-e.anchor.y);const a=e.uvRespectAnchor?e.anchor.x:0,c=e.uvRespectAnchor?e.anchor.y:0;s=r.uvs,s[0]=s[6]=-a,s[1]=s[3]=-c,s[2]=s[4]=1-a,s[5]=s[7]=1-c,r.invalidate();const f=e._texture,m=f.baseTexture,_=m.alphaMode>0,w=e.tileTransform.localTransform,d=e.uvMatrix;let v=m.isPowerOfTwo&&f.frame.width===m.width&&f.frame.height===m.height;v&&(m._glTextures[t.CONTEXT_UID]?v=m.wrapMode!==yl.CLAMP:m.wrapMode===yl.CLAMP&&(m.wrapMode=yl.REPEAT));const b=v?this.simpleShader:this.shader,T=f.width,R=f.height,k=e._width,L=e._height;lf.set(w.a*T/k,w.b*T/L,w.c*R/k,w.d*R/L,w.tx/k,w.ty/L),lf.invert(),v?lf.prepend(d.mapCoord):(b.uniforms.uMapCoord=d.mapCoord.toArray(!0),b.uniforms.uClampFrame=d.uClampFrame,b.uniforms.uClampOffset=d.uClampOffset),b.uniforms.uTransform=lf.toArray(!0),b.uniforms.uColor=kr.shared.setValue(e.tint).premultiply(e.worldAlpha,_).toArray(b.uniforms.uColor),b.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),b.uniforms.uSampler=f,t.shader.bind(b),t.geometry.bind(r),this.state.blendMode=sx(e.blendMode,_),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}dw.extension={name:"tilingSprite",type:ct.RendererPlugin};St.add(dw);const fw=class Jh{constructor(e,t,r){this.linkedSheets=[],(e instanceof jt||e instanceof lt)&&(e={texture:e,data:t,resolutionFilename:r});const{texture:s,data:a,resolutionFilename:c=null,cachePrefix:f=""}=e;this.cachePrefix=f,this._texture=s instanceof lt?s:null,this.baseTexture=s instanceof jt?s:this._texture.baseTexture,this.textures={},this.animations={},this.data=a;const m=this.baseTexture.resource;this.resolution=this._updateResolution(c||(m?m.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let r=vl(e,null);return r===null&&(r=typeof t=="number"?t:parseFloat(t??"1")),r!==1&&this.baseTexture.setResolution(r),r}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Jh.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const r=Jh.BATCH_SIZE;for(;t-e<r&&t<this._frameKeys.length;){const s=this._frameKeys[t],a=this._frames[s],c=a.frame;if(c){let f=null,m=null;const _=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,w=new zt(0,0,Math.floor(_.w)/this.resolution,Math.floor(_.h)/this.resolution);a.rotated?f=new zt(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.h)/this.resolution,Math.floor(c.w)/this.resolution):f=new zt(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(m=new zt(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution)),this.textures[s]=new lt(this.baseTexture,f,w,m,a.rotated?2:0,a.anchor,a.borders),lt.addToCache(this.textures[s],this.cachePrefix+s.toString())}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let r=0;r<e[t].length;r++){const s=e[t][r];this.animations[t].push(this.textures[s])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Jh.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Jh.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};fw.BATCH_SIZE=1e3;let h0=fw;const RA=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function pw(n,e,t){const r={};if(n.forEach(s=>{r[s]=e}),Object.keys(e.textures).forEach(s=>{r[`${e.cachePrefix}${s}`]=e.textures[s]}),!t){const s=Gn.dirname(n[0]);e.linkedSheets.forEach((a,c)=>{Object.assign(r,pw([`${s}/${e.data.meta.related_multi_packs[c]}`],a,!0))})}return r}const kA={extension:ct.Asset,cache:{test:n=>n instanceof h0,getCacheableAssets:(n,e)=>pw(n,e,!1)},resolver:{test:n=>{const e=n.split("?")[0].split("."),t=e.pop(),r=e.pop();return t==="json"&&RA.includes(r)},parse:n=>{const e=n.split(".");return{resolution:parseFloat(mt.RETINA_PREFIX.exec(n)?.[1]??"1"),format:e[e.length-2],src:n}}},loader:{name:"spritesheetLoader",extension:{type:ct.LoadParser,priority:Wo.Normal},async testParse(n,e){return Gn.extname(e.src).toLowerCase()===".json"&&!!n.frames},async parse(n,e,t){const{texture:r,imageFilename:s,cachePrefix:a}=e?.data??{};let c=Gn.dirname(e.src);c&&c.lastIndexOf("/")!==c.length-1&&(c+="/");let f;if(r&&r.baseTexture)f=r;else{const w=Vg(c+(s??n.meta.image),e.src);f=(await t.load([w]))[w]}const m=new h0({texture:f.baseTexture,data:n,resolutionFilename:e.src,cachePrefix:a});await m.parse();const _=n?.meta?.related_multi_packs;if(Array.isArray(_)){const w=[];for(const v of _){if(typeof v!="string")continue;let b=c+v;e.data?.ignoreMultiPack||(b=Vg(b,e.src),w.push(t.load({src:b,data:{ignoreMultiPack:!0}})))}const d=await Promise.all(w);m.linkedSheets=d,d.forEach(v=>{v.linkedSheets=[m].concat(m.linkedSheets.filter(b=>b!==v))})}return m},unload(n){n.destroy(!0)}}};St.add(kA);class Nf{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class xf{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const t=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const a in t){const c=t[a].match(/^[a-z]+/gm)[0],f=t[a].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),m={};for(const _ in f){const w=f[_].split("="),d=w[0],v=w[1].replace(/"/gm,""),b=parseFloat(v),T=isNaN(b)?v:b;m[d]=T}r[c].push(m)}const s=new Nf;return r.info.forEach(a=>s.info.push({face:a.face,size:parseInt(a.size,10)})),r.common.forEach(a=>s.common.push({lineHeight:parseInt(a.lineHeight,10)})),r.page.forEach(a=>s.page.push({id:parseInt(a.id,10),file:a.file})),r.char.forEach(a=>s.char.push({id:parseInt(a.id,10),page:parseInt(a.page,10),x:parseInt(a.x,10),y:parseInt(a.y,10),width:parseInt(a.width,10),height:parseInt(a.height,10),xoffset:parseInt(a.xoffset,10),yoffset:parseInt(a.yoffset,10),xadvance:parseInt(a.xadvance,10)})),r.kerning.forEach(a=>s.kerning.push({first:parseInt(a.first,10),second:parseInt(a.second,10),amount:parseInt(a.amount,10)})),r.distanceField.forEach(a=>s.distanceField.push({distanceRange:parseInt(a.distanceRange,10),fieldType:a.fieldType})),s}}class Yg{static test(e){const t=e;return typeof e!="string"&&"getElementsByTagName"in e&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const t=new Nf,r=e.getElementsByTagName("info"),s=e.getElementsByTagName("common"),a=e.getElementsByTagName("page"),c=e.getElementsByTagName("char"),f=e.getElementsByTagName("kerning"),m=e.getElementsByTagName("distanceField");for(let _=0;_<r.length;_++)t.info.push({face:r[_].getAttribute("face"),size:parseInt(r[_].getAttribute("size"),10)});for(let _=0;_<s.length;_++)t.common.push({lineHeight:parseInt(s[_].getAttribute("lineHeight"),10)});for(let _=0;_<a.length;_++)t.page.push({id:parseInt(a[_].getAttribute("id"),10)||0,file:a[_].getAttribute("file")});for(let _=0;_<c.length;_++){const w=c[_];t.char.push({id:parseInt(w.getAttribute("id"),10),page:parseInt(w.getAttribute("page"),10)||0,x:parseInt(w.getAttribute("x"),10),y:parseInt(w.getAttribute("y"),10),width:parseInt(w.getAttribute("width"),10),height:parseInt(w.getAttribute("height"),10),xoffset:parseInt(w.getAttribute("xoffset"),10),yoffset:parseInt(w.getAttribute("yoffset"),10),xadvance:parseInt(w.getAttribute("xadvance"),10)})}for(let _=0;_<f.length;_++)t.kerning.push({first:parseInt(f[_].getAttribute("first"),10),second:parseInt(f[_].getAttribute("second"),10),amount:parseInt(f[_].getAttribute("amount"),10)});for(let _=0;_<m.length;_++)t.distanceField.push({fieldType:m[_].getAttribute("fieldType"),distanceRange:parseInt(m[_].getAttribute("distanceRange"),10)});return t}}class Qg{static test(e){return typeof e=="string"&&e.includes("<font>")?Yg.test(mt.ADAPTER.parseXML(e)):!1}static parse(e){return Yg.parse(mt.ADAPTER.parseXML(e))}}const ng=[xf,Yg,Qg];function MA(n){for(let e=0;e<ng.length;e++)if(ng[e].test(n))return ng[e];return null}function OA(n,e,t,r,s,a){const c=t.fill;if(Array.isArray(c)){if(c.length===1)return c[0]}else return c;let f;const m=t.dropShadow?t.dropShadowDistance:0,_=t.padding||0,w=n.width/r-m-_*2,d=n.height/r-m-_*2,v=c.slice(),b=t.fillGradientStops.slice();if(!b.length){const T=v.length+1;for(let R=1;R<T;++R)b.push(R/T)}if(v.unshift(c[0]),b.unshift(0),v.push(c[c.length-1]),b.push(1),t.fillGradientType===Jf.LINEAR_VERTICAL){f=e.createLinearGradient(w/2,_,w/2,d+_);let T=0;const R=(a.fontProperties.fontSize+t.strokeThickness)/d;for(let k=0;k<s.length;k++){const L=a.lineHeight*k;for(let W=0;W<v.length;W++){let z=0;typeof b[W]=="number"?z=b[W]:z=W/v.length;const te=L/d+z*R;let K=Math.max(T,te);K=Math.min(K,1),f.addColorStop(K,v[W]),T=K}}}else{f=e.createLinearGradient(_,d/2,w+_,d/2);const T=v.length+1;let R=1;for(let k=0;k<v.length;k++){let L;typeof b[k]=="number"?L=b[k]:L=R/T,f.addColorStop(L,v[k]),R++}}return f}function DA(n,e,t,r,s,a,c){const f=t.text,m=t.fontProperties;e.translate(r,s),e.scale(a,a);const _=c.strokeThickness/2,w=-(c.strokeThickness/2);if(e.font=c.toFontString(),e.lineWidth=c.strokeThickness,e.textBaseline=c.textBaseline,e.lineJoin=c.lineJoin,e.miterLimit=c.miterLimit,e.fillStyle=OA(n,e,c,a,[f],t),e.strokeStyle=c.stroke,c.dropShadow){const d=c.dropShadowColor,v=c.dropShadowBlur*a,b=c.dropShadowDistance*a;e.shadowColor=kr.shared.setValue(d).setAlpha(c.dropShadowAlpha).toRgbaString(),e.shadowBlur=v,e.shadowOffsetX=Math.cos(c.dropShadowAngle)*b,e.shadowOffsetY=Math.sin(c.dropShadowAngle)*b}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;c.stroke&&c.strokeThickness&&e.strokeText(f,_,w+t.lineHeight-m.descent),c.fill&&e.fillText(f,_,w+t.lineHeight-m.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function wf(n){return n.codePointAt?n.codePointAt(0):n.charCodeAt(0)}function mw(n){return Array.from?Array.from(n):n.split("")}function LA(n){typeof n=="string"&&(n=[n]);const e=[];for(let t=0,r=n.length;t<r;t++){const s=n[t];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);const a=s[0].charCodeAt(0),c=s[1].charCodeAt(0);if(c<a)throw new Error("[BitmapFont]: Invalid character range.");for(let f=a,m=c;f<=m;f++)e.push(String.fromCharCode(f))}else e.push(...mw(s))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const ru=class Ca{constructor(e,t,r){const[s]=e.info,[a]=e.common,[c]=e.page,[f]=e.distanceField,m=vl(c.file),_={};this._ownsTextures=r,this.font=s.face,this.size=s.size,this.lineHeight=a.lineHeight/m,this.chars={},this.pageTextures=_;for(let w=0;w<e.page.length;w++){const{id:d,file:v}=e.page[w];_[d]=t instanceof Array?t[w]:t[v],f?.fieldType&&f.fieldType!=="none"&&(_[d].baseTexture.alphaMode=ps.NO_PREMULTIPLIED_ALPHA,_[d].baseTexture.mipmap=Na.OFF)}for(let w=0;w<e.char.length;w++){const{id:d,page:v}=e.char[w];let{x:b,y:T,width:R,height:k,xoffset:L,yoffset:W,xadvance:z}=e.char[w];b/=m,T/=m,R/=m,k/=m,L/=m,W/=m,z/=m;const te=new zt(b+_[v].frame.x/m,T+_[v].frame.y/m,R,k);this.chars[d]={xOffset:L,yOffset:W,xAdvance:z,kerning:{},texture:new lt(_[v].baseTexture,te),page:v}}for(let w=0;w<e.kerning.length;w++){let{first:d,second:v,amount:b}=e.kerning[w];d/=m,v/=m,b/=m,this.chars[v]&&(this.chars[v].kerning[d]=b)}this.distanceFieldRange=f?.distanceRange,this.distanceFieldType=f?.fieldType?.toLowerCase()??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,r){let s;if(e instanceof Nf)s=e;else{const c=MA(e);if(!c)throw new Error("Unrecognized data format for font.");s=c.parse(e)}t instanceof lt&&(t=[t]);const a=new Ca(s,t,r);return Ca.available[a.font]=a,a}static uninstall(e){const t=Ca.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete Ca.available[e]}static from(e,t,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:s,padding:a,resolution:c,textureWidth:f,textureHeight:m,..._}=Object.assign({},Ca.defaultOptions,r),w=LA(s),d=t instanceof mu?t:new mu(t),v=f,b=new Nf;b.info[0]={face:d.fontFamily,size:d.fontSize},b.common[0]={lineHeight:d.fontSize};let T=0,R=0,k,L,W,z=0;const te=[];for(let de=0;de<w.length;de++){k||(k=mt.ADAPTER.createCanvas(),k.width=f,k.height=m,L=k.getContext("2d"),W=new jt(k,{resolution:c,..._}),te.push(new lt(W)),b.page.push({id:te.length-1,file:""}));const F=w[de],ie=iu.measureText(F,d,!1,k),ye=ie.width,Oe=Math.ceil(ie.height),Pe=Math.ceil((d.fontStyle==="italic"?2:1)*ye);if(R>=m-Oe*c){if(R===0)throw new Error(`[BitmapFont] textureHeight ${m}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${F}')`);--de,k=null,L=null,W=null,R=0,T=0,z=0;continue}if(z=Math.max(Oe+ie.fontProperties.descent,z),Pe*c+T>=v){if(T===0)throw new Error(`[BitmapFont] textureWidth ${f}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${F}')`);--de,R+=z*c,R=Math.ceil(R),T=0,z=0;continue}DA(k,L,ie,T,R,c,d);const ge=wf(ie.text);b.char.push({id:ge,page:te.length-1,x:T/c,y:R/c,width:Pe,height:Oe,xoffset:0,yoffset:0,xadvance:ye-(d.dropShadow?d.dropShadowDistance:0)-(d.stroke?d.strokeThickness:0)}),T+=(Pe+2*a)*c,T=Math.ceil(T)}if(!r?.skipKerning)for(let de=0,F=w.length;de<F;de++){const ie=w[de];for(let ye=0;ye<F;ye++){const Oe=w[ye],Pe=L.measureText(ie).width,ge=L.measureText(Oe).width,ve=L.measureText(ie+Oe).width-(Pe+ge);ve&&b.kerning.push({first:wf(ie),second:wf(Oe),amount:ve})}}const K=new Ca(b,te,!0);return Ca.available[e]!==void 0&&Ca.uninstall(e),Ca.available[e]=K,K}};ru.ALPHA=[["a","z"],["A","Z"]," "],ru.NUMERIC=[["0","9"]],ru.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],ru.ASCII=[[" ","~"]],ru.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:ru.ALPHANUMERIC},ru.available={};let nu=ru;var NA=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,FA=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const d0=[],f0=[],p0=[],gw=class yw extends Di{constructor(e,t={}){super();const{align:r,tint:s,maxWidth:a,letterSpacing:c,fontName:f,fontSize:m}=Object.assign({},yw.styleDefaults,t);if(!nu.available[f])throw new Error(`Missing BitmapFont "${f}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tintColor=new kr(s),this._font=void 0,this._fontName=f,this._fontSize=m,this.text=e,this._maxWidth=a,this._maxLineHeight=0,this._letterSpacing=c,this._anchor=new Ra(()=>{this.dirty=!0},this,0,0),this._roundPixels=mt.ROUND_PIXELS,this.dirty=!0,this._resolution=mt.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const e=nu.available[this._fontName],t=this.fontSize,r=t/e.size,s=new er,a=[],c=[],f=[],m=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",_=mw(m),w=this._maxWidth*e.size/t,d=e.distanceFieldType==="none"?d0:f0;let v=null,b=0,T=0,R=0,k=-1,L=0,W=0,z=0,te=0;for(let Pe=0;Pe<_.length;Pe++){const ge=_[Pe],ve=wf(ge);if(/(?:\s)/.test(ge)&&(k=Pe,L=b,te++),ge==="\r"||ge===`
`){c.push(b),f.push(-1),T=Math.max(T,b),++R,++W,s.x=0,s.y+=e.lineHeight,v=null,te=0;continue}const we=e.chars[ve];if(!we)continue;v&&we.kerning[v]&&(s.x+=we.kerning[v]);const qe=p0.pop()||{texture:lt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new er};qe.texture=we.texture,qe.line=R,qe.charCode=ve,qe.position.x=Math.round(s.x+we.xOffset+this._letterSpacing/2),qe.position.y=Math.round(s.y+we.yOffset),qe.prevSpaces=te,a.push(qe),b=qe.position.x+Math.max(we.xAdvance-we.xOffset,we.texture.orig.width),s.x+=we.xAdvance+this._letterSpacing,z=Math.max(z,we.yOffset+we.texture.height),v=ve,k!==-1&&w>0&&s.x>w&&(++W,Qc(a,1+k-W,1+Pe-k),Pe=k,k=-1,c.push(L),f.push(a.length>0?a[a.length-1].prevSpaces:0),T=Math.max(T,L),R++,s.x=0,s.y+=e.lineHeight,v=null,te=0)}const K=_[_.length-1];K!=="\r"&&K!==`
`&&(/(?:\s)/.test(K)&&(b=L),c.push(b),T=Math.max(T,b),f.push(-1));const de=[];for(let Pe=0;Pe<=R;Pe++){let ge=0;this._align==="right"?ge=T-c[Pe]:this._align==="center"?ge=(T-c[Pe])/2:this._align==="justify"&&(ge=f[Pe]<0?0:(T-c[Pe])/f[Pe]),de.push(ge)}const F=a.length,ie={},ye=[],Oe=this._activePagesMeshData;d.push(...Oe);for(let Pe=0;Pe<F;Pe++){const ge=a[Pe].texture,ve=ge.baseTexture.uid;if(!ie[ve]){let we=d.pop();if(!we){const H=new Zf;let V,D;e.distanceFieldType==="none"?(V=new sd(lt.EMPTY),D=Dt.NORMAL):(V=new sd(lt.EMPTY,{program:gl.from(FA,NA),uniforms:{uFWidth:0}}),D=Dt.NORMAL_NPM);const Y=new id(H,V);Y.blendMode=D,we={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Y,vertices:null,uvs:null,indices:null}}we.index=0,we.indexCount=0,we.vertexCount=0,we.uvsCount=0,we.total=0;const{_textureCache:qe}=this;qe[ve]=qe[ve]||new lt(ge.baseTexture),we.mesh.texture=qe[ve],we.mesh.tint=this._tintColor.value,ye.push(we),ie[ve]=we}ie[ve].total++}for(let Pe=0;Pe<Oe.length;Pe++)ye.includes(Oe[Pe])||this.removeChild(Oe[Pe].mesh);for(let Pe=0;Pe<ye.length;Pe++)ye[Pe].mesh.parent!==this&&this.addChild(ye[Pe].mesh);this._activePagesMeshData=ye;for(const Pe in ie){const ge=ie[Pe],ve=ge.total;if(!(ge.indices?.length>6*ve)||ge.vertices.length<id.BATCHABLE_SIZE*2)ge.vertices=new Float32Array(8*ve),ge.uvs=new Float32Array(8*ve),ge.indices=new Uint16Array(6*ve);else{const we=ge.total,qe=ge.vertices;for(let H=we*4*2;H<qe.length;H++)qe[H]=0}ge.mesh.size=6*ve}for(let Pe=0;Pe<F;Pe++){const ge=a[Pe];let ve=ge.position.x+de[ge.line]*(this._align==="justify"?ge.prevSpaces:1);this._roundPixels&&(ve=Math.round(ve));const we=ve*r,qe=ge.position.y*r,H=ge.texture,V=ie[H.baseTexture.uid],D=H.frame,Y=H._uvs,j=V.index++;V.indices[j*6+0]=0+j*4,V.indices[j*6+1]=1+j*4,V.indices[j*6+2]=2+j*4,V.indices[j*6+3]=0+j*4,V.indices[j*6+4]=2+j*4,V.indices[j*6+5]=3+j*4,V.vertices[j*8+0]=we,V.vertices[j*8+1]=qe,V.vertices[j*8+2]=we+D.width*r,V.vertices[j*8+3]=qe,V.vertices[j*8+4]=we+D.width*r,V.vertices[j*8+5]=qe+D.height*r,V.vertices[j*8+6]=we,V.vertices[j*8+7]=qe+D.height*r,V.uvs[j*8+0]=Y.x0,V.uvs[j*8+1]=Y.y0,V.uvs[j*8+2]=Y.x1,V.uvs[j*8+3]=Y.y1,V.uvs[j*8+4]=Y.x2,V.uvs[j*8+5]=Y.y2,V.uvs[j*8+6]=Y.x3,V.uvs[j*8+7]=Y.y3}this._textWidth=T*r,this._textHeight=(s.y+e.lineHeight)*r;for(const Pe in ie){const ge=ie[Pe];if(this.anchor.x!==0||this.anchor.y!==0){let H=0;const V=this._textWidth*this.anchor.x,D=this._textHeight*this.anchor.y;for(let Y=0;Y<ge.total;Y++)ge.vertices[H++]-=V,ge.vertices[H++]-=D,ge.vertices[H++]-=V,ge.vertices[H++]-=D,ge.vertices[H++]-=V,ge.vertices[H++]-=D,ge.vertices[H++]-=V,ge.vertices[H++]-=D}this._maxLineHeight=z*r;const ve=ge.mesh.geometry.getBuffer("aVertexPosition"),we=ge.mesh.geometry.getBuffer("aTextureCoord"),qe=ge.mesh.geometry.getIndex();ve.data=ge.vertices,we.data=ge.uvs,qe.data=ge.indices,ve.update(),we.update(),qe.update()}for(let Pe=0;Pe<a.length;Pe++)p0.push(a[Pe]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:r,size:s}=nu.available[this._fontName];if(r!=="none"){const{a,b:c,c:f,d:m}=this.worldTransform,_=Math.sqrt(a*a+c*c),w=Math.sqrt(f*f+m*m),d=(Math.abs(_)+Math.abs(w))/2,v=this.fontSize/s,b=e._view.resolution;for(const T of this._activePagesMeshData)T.mesh.shader.uniforms.uFWidth=d*t*v*b}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=nu.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!nu.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??nu.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,r=nu.available[this._fontName].distanceFieldType==="none"?d0:f0;r.push(...this._activePagesMeshData);for(const s of this._activePagesMeshData)this.removeChild(s.mesh);this._activePagesMeshData=[],r.filter(s=>t[s.mesh.texture.baseTexture.uid]).forEach(s=>{s.mesh.texture=lt.EMPTY});for(const s in t)t[s].destroy(),delete t[s];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};gw.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let BA=gw;const UA=[".xml",".fnt"],GA={extension:{type:ct.LoadParser,priority:Wo.Normal},name:"loadBitmapFont",test(n){return UA.includes(Gn.extname(n).toLowerCase())},async testParse(n){return xf.test(n)||Qg.test(n)},async parse(n,e,t){const r=xf.test(n)?xf.parse(n):Qg.parse(n),{src:s}=e,{page:a}=r,c=[];for(let _=0;_<a.length;++_){const w=a[_].file;let d=Gn.join(Gn.dirname(s),w);d=Vg(d,s),c.push(d)}const f=await t.load(c),m=c.map(_=>f[_]);return nu.install(r,m,!0)},async load(n,e){return(await mt.ADAPTER.fetch(n)).text()},unload(n){n.destroy()}};St.add(GA);const Zg=class Wc extends mu{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new Wc(Object.keys(Wc.defaultOptions).reduce((t,r)=>({...t,[r]:e[r]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete Wc.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:r}=Wc;if(r[e]){const s=r[e];return this._fonts.push(s),s.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return mt.ADAPTER.fetch(e).then(s=>s.blob()).then(async s=>new Promise((a,c)=>{const f=URL.createObjectURL(s),m=new FileReader;m.onload=()=>a([f,m.result]),m.onerror=c,m.readAsDataURL(s)})).then(async([s,a])=>{const c=Object.assign({family:Gn.basename(e,Gn.extname(e)),weight:"normal",style:"normal",display:"auto",src:s,dataSrc:a,refs:1,originalUrl:e,fontFace:null},t);r[e]=c,this._fonts.push(c),this.styleID++;const f=new FontFace(c.family,`url(${c.src})`,{weight:c.weight,style:c.style,display:c.display});c.fontFace=f,await f.load(),document.fonts.add(f),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(r=>!this._overrides.includes(r));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(r=>this._overrides.includes(r));t.length>0&&(this._overrides=this._overrides.filter(r=>!t.includes(r)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style};
                font-display: ${t.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=Sb(e)),typeof e=="number"?bb(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,r=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),s=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const a=`${r}px ${s}px`;return this.dropShadowBlur>0?`text-shadow: ${a} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${a} ${e}`}reset(){Object.assign(this,Wc.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=mt.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};Zg.availableFonts={},Zg.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let ig=Zg;const uf=class $c extends Vo{constructor(e="",t={}){super(lt.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const r=new Image,s=lt.from(r,{scaleMode:mt.SCALE_MODE,resourceOptions:{autoLoad:!1}});s.orig=new zt,s.trim=new zt,this.texture=s;const a="http://www.w3.org/2000/svg",c="http://www.w3.org/1999/xhtml",f=document.createElementNS(a,"svg"),m=document.createElementNS(a,"foreignObject"),_=document.createElementNS(c,"div"),w=document.createElementNS(c,"style");m.setAttribute("width","10000"),m.setAttribute("height","10000"),m.style.overflow="hidden",f.appendChild(m),this.maxWidth=$c.defaultMaxWidth,this.maxHeight=$c.defaultMaxHeight,this._domElement=_,this._styleElement=w,this._svgRoot=f,this._foreignObject=m,this._foreignObject.appendChild(w),this._foreignObject.appendChild(_),this._image=r,this._loadImage=new Image,this._autoResolution=$c.defaultAutoResolution,this._resolution=$c.defaultResolution??mt.RESOLUTION,this.text=e,this.style=t}measureText(e){const{text:t,style:r,resolution:s}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:r.toCSS(s)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);const a=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:c,height:f}=a;(c>this.maxWidth||f>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const m=Math.min(this.maxWidth,Math.ceil(c)),_=Math.min(this.maxHeight,Math.ceil(f));return this._svgRoot.setAttribute("width",m.toString()),this._svgRoot.setAttribute("height",_.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(s)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:m+r.padding*2,height:_+r.padding*2}}async updateText(e=!0){const{style:t,_image:r,_loadImage:s}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:a,height:c}=this.measureText();r.width=s.width=Math.ceil(Math.max(1,a)),r.height=s.height=Math.ceil(Math.max(1,c)),this._updateID++;const f=this._updateID;await new Promise(m=>{s.onload=async()=>{if(f<this._updateID){m();return}await t.onBeforeDraw(),r.src=s.src,s.onload=null,s.src="",this.updateTexture(),m()};const _=new XMLSerializer().serializeToString(this._svgRoot);s.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(_)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:r,resolution:s}=this,{padding:a}=e,{baseTexture:c}=t;t.trim.width=t._frame.width=r.width/s,t.trim.height=t._frame.height=r.height/s,t.trim.x=-a,t.trim.y=-a,t.orig.width=t._frame.width-a*2,t.orig.height=t._frame.height-a*2,this._onTextureUpdate(),c.setRealSize(r.width,r.height,s),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},$c.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=t,this._svgRoot?.remove(),this._svgRoot=t,this._domElement?.remove(),this._domElement=t,this._foreignObject?.remove(),this._foreignObject=t,this._styleElement?.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=lu(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=lu(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof ig?(this.ownsStyle=!1,this._style=e):e instanceof mu?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=ig.from(e)):(this.ownsStyle=!0,this._style=new ig(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};uf.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},uf.defaultMaxWidth=2024,uf.defaultMaxHeight=2024,uf.defaultAutoResolution=!0;class gu{static instance;textures=new Map;animations=new Map;stateAssets=new Map;static getInstance(){return this.instance||(this.instance=new gu),this.instance}async loadManifest(e,t,r){if(this.stateAssets.has(t)&&this.stateAssets.get(t).size>0){r&&r(1);return}const a=await(await fetch(e)).json();this.stateAssets.has(t)||this.stateAssets.set(t,new Set);const c=this.stateAssets.get(t),f=Object.keys(a.spritesheets||{}).length+Object.keys(a.images||{}).length;let m=0;const _=()=>{m++,r&&r(m/f)};for(const[w,d]of Object.entries(a.spritesheets)){const v=await ac.load(d.url);c.add(d.url);for(const[b,T]of Object.entries(d.frames)){const R=new lt(v,new zt(T.x,T.y,T.w,T.h));this.textures.set(b,R),c.add(b)}for(const[b,T]of Object.entries(d.animations)){const R=`${w}_${b}`,k=T.map(L=>this.textures.get(L)).filter(L=>!!L);this.animations.set(R,k),c.add(R)}_()}if(a.images)for(const[w,d]of Object.entries(a.images)){const v=await ac.load(d);this.textures.set(w,v),c.add(w),c.add(d),_()}}uncacheByState(e){const t=this.stateAssets.get(e);t&&(t.forEach(r=>{(r.includes(".")||r.includes("/"))&&ac.unload(r),this.textures.delete(r),this.animations.delete(r)}),this.stateAssets.delete(e))}getTexture(e){return this.textures.get(e)||lt.WHITE}getAnimation(e){return this.animations.get(e)||[]}}var sg={};var m0;function jA(){return m0||(m0=1,(function(n){(function(){var e=function(){this.init()};e.prototype={init:function(){var d=this||t;return d._counter=1e3,d._html5AudioPool=[],d.html5PoolSize=10,d._codecs={},d._howls=[],d._muted=!1,d._volume=1,d._canPlayEvent="canplaythrough",d._navigator=typeof window<"u"&&window.navigator?window.navigator:null,d.masterGain=null,d.noAudio=!1,d.usingWebAudio=!0,d.autoSuspend=!0,d.ctx=null,d.autoUnlock=!0,d._setup(),d},volume:function(d){var v=this||t;if(d=parseFloat(d),v.ctx||w(),typeof d<"u"&&d>=0&&d<=1){if(v._volume=d,v._muted)return v;v.usingWebAudio&&v.masterGain.gain.setValueAtTime(d,t.ctx.currentTime);for(var b=0;b<v._howls.length;b++)if(!v._howls[b]._webAudio)for(var T=v._howls[b]._getSoundIds(),R=0;R<T.length;R++){var k=v._howls[b]._soundById(T[R]);k&&k._node&&(k._node.volume=k._volume*d)}return v}return v._volume},mute:function(d){var v=this||t;v.ctx||w(),v._muted=d,v.usingWebAudio&&v.masterGain.gain.setValueAtTime(d?0:v._volume,t.ctx.currentTime);for(var b=0;b<v._howls.length;b++)if(!v._howls[b]._webAudio)for(var T=v._howls[b]._getSoundIds(),R=0;R<T.length;R++){var k=v._howls[b]._soundById(T[R]);k&&k._node&&(k._node.muted=d?!0:k._muted)}return v},stop:function(){for(var d=this||t,v=0;v<d._howls.length;v++)d._howls[v].stop();return d},unload:function(){for(var d=this||t,v=d._howls.length-1;v>=0;v--)d._howls[v].unload();return d.usingWebAudio&&d.ctx&&typeof d.ctx.close<"u"&&(d.ctx.close(),d.ctx=null,w()),d},codecs:function(d){return(this||t)._codecs[d.replace(/^x-/,"")]},_setup:function(){var d=this||t;if(d.state=d.ctx&&d.ctx.state||"suspended",d._autoSuspend(),!d.usingWebAudio)if(typeof Audio<"u")try{var v=new Audio;typeof v.oncanplaythrough>"u"&&(d._canPlayEvent="canplay")}catch{d.noAudio=!0}else d.noAudio=!0;try{var v=new Audio;v.muted&&(d.noAudio=!0)}catch{}return d.noAudio||d._setupCodecs(),d},_setupCodecs:function(){var d=this||t,v=null;try{v=typeof Audio<"u"?new Audio:null}catch{return d}if(!v||typeof v.canPlayType!="function")return d;var b=v.canPlayType("audio/mpeg;").replace(/^no$/,""),T=d._navigator?d._navigator.userAgent:"",R=T.match(/OPR\/(\d+)/g),k=R&&parseInt(R[0].split("/")[1],10)<33,L=T.indexOf("Safari")!==-1&&T.indexOf("Chrome")===-1,W=T.match(/Version\/(.*?) /),z=L&&W&&parseInt(W[1],10)<15;return d._codecs={mp3:!!(!k&&(b||v.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!b,opus:!!v.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!v.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!v.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(v.canPlayType('audio/wav; codecs="1"')||v.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!v.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!v.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(v.canPlayType("audio/x-m4a;")||v.canPlayType("audio/m4a;")||v.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(v.canPlayType("audio/x-m4b;")||v.canPlayType("audio/m4b;")||v.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(v.canPlayType("audio/x-mp4;")||v.canPlayType("audio/mp4;")||v.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!z&&v.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!z&&v.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!v.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(v.canPlayType("audio/x-flac;")||v.canPlayType("audio/flac;")).replace(/^no$/,"")},d},_unlockAudio:function(){var d=this||t;if(!(d._audioUnlocked||!d.ctx)){d._audioUnlocked=!1,d.autoUnlock=!1,!d._mobileUnloaded&&d.ctx.sampleRate!==44100&&(d._mobileUnloaded=!0,d.unload()),d._scratchBuffer=d.ctx.createBuffer(1,1,22050);var v=function(b){for(;d._html5AudioPool.length<d.html5PoolSize;)try{var T=new Audio;T._unlocked=!0,d._releaseHtml5Audio(T)}catch{d.noAudio=!0;break}for(var R=0;R<d._howls.length;R++)if(!d._howls[R]._webAudio)for(var k=d._howls[R]._getSoundIds(),L=0;L<k.length;L++){var W=d._howls[R]._soundById(k[L]);W&&W._node&&!W._node._unlocked&&(W._node._unlocked=!0,W._node.load())}d._autoResume();var z=d.ctx.createBufferSource();z.buffer=d._scratchBuffer,z.connect(d.ctx.destination),typeof z.start>"u"?z.noteOn(0):z.start(0),typeof d.ctx.resume=="function"&&d.ctx.resume(),z.onended=function(){z.disconnect(0),d._audioUnlocked=!0,document.removeEventListener("touchstart",v,!0),document.removeEventListener("touchend",v,!0),document.removeEventListener("click",v,!0),document.removeEventListener("keydown",v,!0);for(var te=0;te<d._howls.length;te++)d._howls[te]._emit("unlock")}};return document.addEventListener("touchstart",v,!0),document.addEventListener("touchend",v,!0),document.addEventListener("click",v,!0),document.addEventListener("keydown",v,!0),d}},_obtainHtml5Audio:function(){var d=this||t;if(d._html5AudioPool.length)return d._html5AudioPool.pop();var v=new Audio().play();return v&&typeof Promise<"u"&&(v instanceof Promise||typeof v.then=="function")&&v.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(d){var v=this||t;return d._unlocked&&v._html5AudioPool.push(d),v},_autoSuspend:function(){var d=this;if(!(!d.autoSuspend||!d.ctx||typeof d.ctx.suspend>"u"||!t.usingWebAudio)){for(var v=0;v<d._howls.length;v++)if(d._howls[v]._webAudio){for(var b=0;b<d._howls[v]._sounds.length;b++)if(!d._howls[v]._sounds[b]._paused)return d}return d._suspendTimer&&clearTimeout(d._suspendTimer),d._suspendTimer=setTimeout(function(){if(d.autoSuspend){d._suspendTimer=null,d.state="suspending";var T=function(){d.state="suspended",d._resumeAfterSuspend&&(delete d._resumeAfterSuspend,d._autoResume())};d.ctx.suspend().then(T,T)}},3e4),d}},_autoResume:function(){var d=this;if(!(!d.ctx||typeof d.ctx.resume>"u"||!t.usingWebAudio))return d.state==="running"&&d.ctx.state!=="interrupted"&&d._suspendTimer?(clearTimeout(d._suspendTimer),d._suspendTimer=null):d.state==="suspended"||d.state==="running"&&d.ctx.state==="interrupted"?(d.ctx.resume().then(function(){d.state="running";for(var v=0;v<d._howls.length;v++)d._howls[v]._emit("resume")}),d._suspendTimer&&(clearTimeout(d._suspendTimer),d._suspendTimer=null)):d.state==="suspending"&&(d._resumeAfterSuspend=!0),d}};var t=new e,r=function(d){var v=this;if(!d.src||d.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}v.init(d)};r.prototype={init:function(d){var v=this;return t.ctx||w(),v._autoplay=d.autoplay||!1,v._format=typeof d.format!="string"?d.format:[d.format],v._html5=d.html5||!1,v._muted=d.mute||!1,v._loop=d.loop||!1,v._pool=d.pool||5,v._preload=typeof d.preload=="boolean"||d.preload==="metadata"?d.preload:!0,v._rate=d.rate||1,v._sprite=d.sprite||{},v._src=typeof d.src!="string"?d.src:[d.src],v._volume=d.volume!==void 0?d.volume:1,v._xhr={method:d.xhr&&d.xhr.method?d.xhr.method:"GET",headers:d.xhr&&d.xhr.headers?d.xhr.headers:null,withCredentials:d.xhr&&d.xhr.withCredentials?d.xhr.withCredentials:!1},v._duration=0,v._state="unloaded",v._sounds=[],v._endTimers={},v._queue=[],v._playLock=!1,v._onend=d.onend?[{fn:d.onend}]:[],v._onfade=d.onfade?[{fn:d.onfade}]:[],v._onload=d.onload?[{fn:d.onload}]:[],v._onloaderror=d.onloaderror?[{fn:d.onloaderror}]:[],v._onplayerror=d.onplayerror?[{fn:d.onplayerror}]:[],v._onpause=d.onpause?[{fn:d.onpause}]:[],v._onplay=d.onplay?[{fn:d.onplay}]:[],v._onstop=d.onstop?[{fn:d.onstop}]:[],v._onmute=d.onmute?[{fn:d.onmute}]:[],v._onvolume=d.onvolume?[{fn:d.onvolume}]:[],v._onrate=d.onrate?[{fn:d.onrate}]:[],v._onseek=d.onseek?[{fn:d.onseek}]:[],v._onunlock=d.onunlock?[{fn:d.onunlock}]:[],v._onresume=[],v._webAudio=t.usingWebAudio&&!v._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(v),v._autoplay&&v._queue.push({event:"play",action:function(){v.play()}}),v._preload&&v._preload!=="none"&&v.load(),v},load:function(){var d=this,v=null;if(t.noAudio){d._emit("loaderror",null,"No audio support.");return}typeof d._src=="string"&&(d._src=[d._src]);for(var b=0;b<d._src.length;b++){var T,R;if(d._format&&d._format[b])T=d._format[b];else{if(R=d._src[b],typeof R!="string"){d._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}T=/^data:audio\/([^;,]+);/i.exec(R),T||(T=/\.([^.]+)$/.exec(R.split("?",1)[0])),T&&(T=T[1].toLowerCase())}if(T||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),T&&t.codecs(T)){v=d._src[b];break}}if(!v){d._emit("loaderror",null,"No codec support for selected audio sources.");return}return d._src=v,d._state="loading",window.location.protocol==="https:"&&v.slice(0,5)==="http:"&&(d._html5=!0,d._webAudio=!1),new s(d),d._webAudio&&c(d),d},play:function(d,v){var b=this,T=null;if(typeof d=="number")T=d,d=null;else{if(typeof d=="string"&&b._state==="loaded"&&!b._sprite[d])return null;if(typeof d>"u"&&(d="__default",!b._playLock)){for(var R=0,k=0;k<b._sounds.length;k++)b._sounds[k]._paused&&!b._sounds[k]._ended&&(R++,T=b._sounds[k]._id);R===1?d=null:T=null}}var L=T?b._soundById(T):b._inactiveSound();if(!L)return null;if(T&&!d&&(d=L._sprite||"__default"),b._state!=="loaded"){L._sprite=d,L._ended=!1;var W=L._id;return b._queue.push({event:"play",action:function(){b.play(W)}}),W}if(T&&!L._paused)return v||b._loadQueue("play"),L._id;b._webAudio&&t._autoResume();var z=Math.max(0,L._seek>0?L._seek:b._sprite[d][0]/1e3),te=Math.max(0,(b._sprite[d][0]+b._sprite[d][1])/1e3-z),K=te*1e3/Math.abs(L._rate),de=b._sprite[d][0]/1e3,F=(b._sprite[d][0]+b._sprite[d][1])/1e3;L._sprite=d,L._ended=!1;var ie=function(){L._paused=!1,L._seek=z,L._start=de,L._stop=F,L._loop=!!(L._loop||b._sprite[d][2])};if(z>=F){b._ended(L);return}var ye=L._node;if(b._webAudio){var Oe=function(){b._playLock=!1,ie(),b._refreshBuffer(L);var we=L._muted||b._muted?0:L._volume;ye.gain.setValueAtTime(we,t.ctx.currentTime),L._playStart=t.ctx.currentTime,typeof ye.bufferSource.start>"u"?L._loop?ye.bufferSource.noteGrainOn(0,z,86400):ye.bufferSource.noteGrainOn(0,z,te):L._loop?ye.bufferSource.start(0,z,86400):ye.bufferSource.start(0,z,te),K!==1/0&&(b._endTimers[L._id]=setTimeout(b._ended.bind(b,L),K)),v||setTimeout(function(){b._emit("play",L._id),b._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?Oe():(b._playLock=!0,b.once("resume",Oe),b._clearTimer(L._id))}else{var Pe=function(){ye.currentTime=z,ye.muted=L._muted||b._muted||t._muted||ye.muted,ye.volume=L._volume*t.volume(),ye.playbackRate=L._rate;try{var we=ye.play();if(we&&typeof Promise<"u"&&(we instanceof Promise||typeof we.then=="function")?(b._playLock=!0,ie(),we.then(function(){b._playLock=!1,ye._unlocked=!0,v?b._loadQueue():b._emit("play",L._id)}).catch(function(){b._playLock=!1,b._emit("playerror",L._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),L._ended=!0,L._paused=!0})):v||(b._playLock=!1,ie(),b._emit("play",L._id)),ye.playbackRate=L._rate,ye.paused){b._emit("playerror",L._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}d!=="__default"||L._loop?b._endTimers[L._id]=setTimeout(b._ended.bind(b,L),K):(b._endTimers[L._id]=function(){b._ended(L),ye.removeEventListener("ended",b._endTimers[L._id],!1)},ye.addEventListener("ended",b._endTimers[L._id],!1))}catch(qe){b._emit("playerror",L._id,qe)}};ye.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(ye.src=b._src,ye.load());var ge=window&&window.ejecta||!ye.readyState&&t._navigator.isCocoonJS;if(ye.readyState>=3||ge)Pe();else{b._playLock=!0,b._state="loading";var ve=function(){b._state="loaded",Pe(),ye.removeEventListener(t._canPlayEvent,ve,!1)};ye.addEventListener(t._canPlayEvent,ve,!1),b._clearTimer(L._id)}}return L._id},pause:function(d){var v=this;if(v._state!=="loaded"||v._playLock)return v._queue.push({event:"pause",action:function(){v.pause(d)}}),v;for(var b=v._getSoundIds(d),T=0;T<b.length;T++){v._clearTimer(b[T]);var R=v._soundById(b[T]);if(R&&!R._paused&&(R._seek=v.seek(b[T]),R._rateSeek=0,R._paused=!0,v._stopFade(b[T]),R._node))if(v._webAudio){if(!R._node.bufferSource)continue;typeof R._node.bufferSource.stop>"u"?R._node.bufferSource.noteOff(0):R._node.bufferSource.stop(0),v._cleanBuffer(R._node)}else(!isNaN(R._node.duration)||R._node.duration===1/0)&&R._node.pause();arguments[1]||v._emit("pause",R?R._id:null)}return v},stop:function(d,v){var b=this;if(b._state!=="loaded"||b._playLock)return b._queue.push({event:"stop",action:function(){b.stop(d)}}),b;for(var T=b._getSoundIds(d),R=0;R<T.length;R++){b._clearTimer(T[R]);var k=b._soundById(T[R]);k&&(k._seek=k._start||0,k._rateSeek=0,k._paused=!0,k._ended=!0,b._stopFade(T[R]),k._node&&(b._webAudio?k._node.bufferSource&&(typeof k._node.bufferSource.stop>"u"?k._node.bufferSource.noteOff(0):k._node.bufferSource.stop(0),b._cleanBuffer(k._node)):(!isNaN(k._node.duration)||k._node.duration===1/0)&&(k._node.currentTime=k._start||0,k._node.pause(),k._node.duration===1/0&&b._clearSound(k._node))),v||b._emit("stop",k._id))}return b},mute:function(d,v){var b=this;if(b._state!=="loaded"||b._playLock)return b._queue.push({event:"mute",action:function(){b.mute(d,v)}}),b;if(typeof v>"u")if(typeof d=="boolean")b._muted=d;else return b._muted;for(var T=b._getSoundIds(v),R=0;R<T.length;R++){var k=b._soundById(T[R]);k&&(k._muted=d,k._interval&&b._stopFade(k._id),b._webAudio&&k._node?k._node.gain.setValueAtTime(d?0:k._volume,t.ctx.currentTime):k._node&&(k._node.muted=t._muted?!0:d),b._emit("mute",k._id))}return b},volume:function(){var d=this,v=arguments,b,T;if(v.length===0)return d._volume;if(v.length===1||v.length===2&&typeof v[1]>"u"){var R=d._getSoundIds(),k=R.indexOf(v[0]);k>=0?T=parseInt(v[0],10):b=parseFloat(v[0])}else v.length>=2&&(b=parseFloat(v[0]),T=parseInt(v[1],10));var L;if(typeof b<"u"&&b>=0&&b<=1){if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"volume",action:function(){d.volume.apply(d,v)}}),d;typeof T>"u"&&(d._volume=b),T=d._getSoundIds(T);for(var W=0;W<T.length;W++)L=d._soundById(T[W]),L&&(L._volume=b,v[2]||d._stopFade(T[W]),d._webAudio&&L._node&&!L._muted?L._node.gain.setValueAtTime(b,t.ctx.currentTime):L._node&&!L._muted&&(L._node.volume=b*t.volume()),d._emit("volume",L._id))}else return L=T?d._soundById(T):d._sounds[0],L?L._volume:0;return d},fade:function(d,v,b,T){var R=this;if(R._state!=="loaded"||R._playLock)return R._queue.push({event:"fade",action:function(){R.fade(d,v,b,T)}}),R;d=Math.min(Math.max(0,parseFloat(d)),1),v=Math.min(Math.max(0,parseFloat(v)),1),b=parseFloat(b),R.volume(d,T);for(var k=R._getSoundIds(T),L=0;L<k.length;L++){var W=R._soundById(k[L]);if(W){if(T||R._stopFade(k[L]),R._webAudio&&!W._muted){var z=t.ctx.currentTime,te=z+b/1e3;W._volume=d,W._node.gain.setValueAtTime(d,z),W._node.gain.linearRampToValueAtTime(v,te)}R._startFadeInterval(W,d,v,b,k[L],typeof T>"u")}}return R},_startFadeInterval:function(d,v,b,T,R,k){var L=this,W=v,z=b-v,te=Math.abs(z/.01),K=Math.max(4,te>0?T/te:T),de=Date.now();d._fadeTo=b,d._interval=setInterval(function(){var F=(Date.now()-de)/T;de=Date.now(),W+=z*F,W=Math.round(W*100)/100,z<0?W=Math.max(b,W):W=Math.min(b,W),L._webAudio?d._volume=W:L.volume(W,d._id,!0),k&&(L._volume=W),(b<v&&W<=b||b>v&&W>=b)&&(clearInterval(d._interval),d._interval=null,d._fadeTo=null,L.volume(b,d._id),L._emit("fade",d._id))},K)},_stopFade:function(d){var v=this,b=v._soundById(d);return b&&b._interval&&(v._webAudio&&b._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(b._interval),b._interval=null,v.volume(b._fadeTo,d),b._fadeTo=null,v._emit("fade",d)),v},loop:function(){var d=this,v=arguments,b,T,R;if(v.length===0)return d._loop;if(v.length===1)if(typeof v[0]=="boolean")b=v[0],d._loop=b;else return R=d._soundById(parseInt(v[0],10)),R?R._loop:!1;else v.length===2&&(b=v[0],T=parseInt(v[1],10));for(var k=d._getSoundIds(T),L=0;L<k.length;L++)R=d._soundById(k[L]),R&&(R._loop=b,d._webAudio&&R._node&&R._node.bufferSource&&(R._node.bufferSource.loop=b,b&&(R._node.bufferSource.loopStart=R._start||0,R._node.bufferSource.loopEnd=R._stop,d.playing(k[L])&&(d.pause(k[L],!0),d.play(k[L],!0)))));return d},rate:function(){var d=this,v=arguments,b,T;if(v.length===0)T=d._sounds[0]._id;else if(v.length===1){var R=d._getSoundIds(),k=R.indexOf(v[0]);k>=0?T=parseInt(v[0],10):b=parseFloat(v[0])}else v.length===2&&(b=parseFloat(v[0]),T=parseInt(v[1],10));var L;if(typeof b=="number"){if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"rate",action:function(){d.rate.apply(d,v)}}),d;typeof T>"u"&&(d._rate=b),T=d._getSoundIds(T);for(var W=0;W<T.length;W++)if(L=d._soundById(T[W]),L){d.playing(T[W])&&(L._rateSeek=d.seek(T[W]),L._playStart=d._webAudio?t.ctx.currentTime:L._playStart),L._rate=b,d._webAudio&&L._node&&L._node.bufferSource?L._node.bufferSource.playbackRate.setValueAtTime(b,t.ctx.currentTime):L._node&&(L._node.playbackRate=b);var z=d.seek(T[W]),te=(d._sprite[L._sprite][0]+d._sprite[L._sprite][1])/1e3-z,K=te*1e3/Math.abs(L._rate);(d._endTimers[T[W]]||!L._paused)&&(d._clearTimer(T[W]),d._endTimers[T[W]]=setTimeout(d._ended.bind(d,L),K)),d._emit("rate",L._id)}}else return L=d._soundById(T),L?L._rate:d._rate;return d},seek:function(){var d=this,v=arguments,b,T;if(v.length===0)d._sounds.length&&(T=d._sounds[0]._id);else if(v.length===1){var R=d._getSoundIds(),k=R.indexOf(v[0]);k>=0?T=parseInt(v[0],10):d._sounds.length&&(T=d._sounds[0]._id,b=parseFloat(v[0]))}else v.length===2&&(b=parseFloat(v[0]),T=parseInt(v[1],10));if(typeof T>"u")return 0;if(typeof b=="number"&&(d._state!=="loaded"||d._playLock))return d._queue.push({event:"seek",action:function(){d.seek.apply(d,v)}}),d;var L=d._soundById(T);if(L)if(typeof b=="number"&&b>=0){var W=d.playing(T);W&&d.pause(T,!0),L._seek=b,L._ended=!1,d._clearTimer(T),!d._webAudio&&L._node&&!isNaN(L._node.duration)&&(L._node.currentTime=b);var z=function(){W&&d.play(T,!0),d._emit("seek",T)};if(W&&!d._webAudio){var te=function(){d._playLock?setTimeout(te,0):z()};setTimeout(te,0)}else z()}else if(d._webAudio){var K=d.playing(T)?t.ctx.currentTime-L._playStart:0,de=L._rateSeek?L._rateSeek-L._seek:0;return L._seek+(de+K*Math.abs(L._rate))}else return L._node.currentTime;return d},playing:function(d){var v=this;if(typeof d=="number"){var b=v._soundById(d);return b?!b._paused:!1}for(var T=0;T<v._sounds.length;T++)if(!v._sounds[T]._paused)return!0;return!1},duration:function(d){var v=this,b=v._duration,T=v._soundById(d);return T&&(b=v._sprite[T._sprite][1]/1e3),b},state:function(){return this._state},unload:function(){for(var d=this,v=d._sounds,b=0;b<v.length;b++)v[b]._paused||d.stop(v[b]._id),d._webAudio||(d._clearSound(v[b]._node),v[b]._node.removeEventListener("error",v[b]._errorFn,!1),v[b]._node.removeEventListener(t._canPlayEvent,v[b]._loadFn,!1),v[b]._node.removeEventListener("ended",v[b]._endFn,!1),t._releaseHtml5Audio(v[b]._node)),delete v[b]._node,d._clearTimer(v[b]._id);var T=t._howls.indexOf(d);T>=0&&t._howls.splice(T,1);var R=!0;for(b=0;b<t._howls.length;b++)if(t._howls[b]._src===d._src||d._src.indexOf(t._howls[b]._src)>=0){R=!1;break}return a&&R&&delete a[d._src],t.noAudio=!1,d._state="unloaded",d._sounds=[],d=null,null},on:function(d,v,b,T){var R=this,k=R["_on"+d];return typeof v=="function"&&k.push(T?{id:b,fn:v,once:T}:{id:b,fn:v}),R},off:function(d,v,b){var T=this,R=T["_on"+d],k=0;if(typeof v=="number"&&(b=v,v=null),v||b)for(k=0;k<R.length;k++){var L=b===R[k].id;if(v===R[k].fn&&L||!v&&L){R.splice(k,1);break}}else if(d)T["_on"+d]=[];else{var W=Object.keys(T);for(k=0;k<W.length;k++)W[k].indexOf("_on")===0&&Array.isArray(T[W[k]])&&(T[W[k]]=[])}return T},once:function(d,v,b){var T=this;return T.on(d,v,b,1),T},_emit:function(d,v,b){for(var T=this,R=T["_on"+d],k=R.length-1;k>=0;k--)(!R[k].id||R[k].id===v||d==="load")&&(setTimeout((function(L){L.call(this,v,b)}).bind(T,R[k].fn),0),R[k].once&&T.off(d,R[k].fn,R[k].id));return T._loadQueue(d),T},_loadQueue:function(d){var v=this;if(v._queue.length>0){var b=v._queue[0];b.event===d&&(v._queue.shift(),v._loadQueue()),d||b.action()}return v},_ended:function(d){var v=this,b=d._sprite;if(!v._webAudio&&d._node&&!d._node.paused&&!d._node.ended&&d._node.currentTime<d._stop)return setTimeout(v._ended.bind(v,d),100),v;var T=!!(d._loop||v._sprite[b][2]);if(v._emit("end",d._id),!v._webAudio&&T&&v.stop(d._id,!0).play(d._id),v._webAudio&&T){v._emit("play",d._id),d._seek=d._start||0,d._rateSeek=0,d._playStart=t.ctx.currentTime;var R=(d._stop-d._start)*1e3/Math.abs(d._rate);v._endTimers[d._id]=setTimeout(v._ended.bind(v,d),R)}return v._webAudio&&!T&&(d._paused=!0,d._ended=!0,d._seek=d._start||0,d._rateSeek=0,v._clearTimer(d._id),v._cleanBuffer(d._node),t._autoSuspend()),!v._webAudio&&!T&&v.stop(d._id,!0),v},_clearTimer:function(d){var v=this;if(v._endTimers[d]){if(typeof v._endTimers[d]!="function")clearTimeout(v._endTimers[d]);else{var b=v._soundById(d);b&&b._node&&b._node.removeEventListener("ended",v._endTimers[d],!1)}delete v._endTimers[d]}return v},_soundById:function(d){for(var v=this,b=0;b<v._sounds.length;b++)if(d===v._sounds[b]._id)return v._sounds[b];return null},_inactiveSound:function(){var d=this;d._drain();for(var v=0;v<d._sounds.length;v++)if(d._sounds[v]._ended)return d._sounds[v].reset();return new s(d)},_drain:function(){var d=this,v=d._pool,b=0,T=0;if(!(d._sounds.length<v)){for(T=0;T<d._sounds.length;T++)d._sounds[T]._ended&&b++;for(T=d._sounds.length-1;T>=0;T--){if(b<=v)return;d._sounds[T]._ended&&(d._webAudio&&d._sounds[T]._node&&d._sounds[T]._node.disconnect(0),d._sounds.splice(T,1),b--)}}},_getSoundIds:function(d){var v=this;if(typeof d>"u"){for(var b=[],T=0;T<v._sounds.length;T++)b.push(v._sounds[T]._id);return b}else return[d]},_refreshBuffer:function(d){var v=this;return d._node.bufferSource=t.ctx.createBufferSource(),d._node.bufferSource.buffer=a[v._src],d._panner?d._node.bufferSource.connect(d._panner):d._node.bufferSource.connect(d._node),d._node.bufferSource.loop=d._loop,d._loop&&(d._node.bufferSource.loopStart=d._start||0,d._node.bufferSource.loopEnd=d._stop||0),d._node.bufferSource.playbackRate.setValueAtTime(d._rate,t.ctx.currentTime),v},_cleanBuffer:function(d){var v=this,b=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!d.bufferSource)return v;if(t._scratchBuffer&&d.bufferSource&&(d.bufferSource.onended=null,d.bufferSource.disconnect(0),b))try{d.bufferSource.buffer=t._scratchBuffer}catch{}return d.bufferSource=null,v},_clearSound:function(d){var v=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);v||(d.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(d){this._parent=d,this.init()};s.prototype={init:function(){var d=this,v=d._parent;return d._muted=v._muted,d._loop=v._loop,d._volume=v._volume,d._rate=v._rate,d._seek=0,d._paused=!0,d._ended=!0,d._sprite="__default",d._id=++t._counter,v._sounds.push(d),d.create(),d},create:function(){var d=this,v=d._parent,b=t._muted||d._muted||d._parent._muted?0:d._volume;return v._webAudio?(d._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),d._node.gain.setValueAtTime(b,t.ctx.currentTime),d._node.paused=!0,d._node.connect(t.masterGain)):t.noAudio||(d._node=t._obtainHtml5Audio(),d._errorFn=d._errorListener.bind(d),d._node.addEventListener("error",d._errorFn,!1),d._loadFn=d._loadListener.bind(d),d._node.addEventListener(t._canPlayEvent,d._loadFn,!1),d._endFn=d._endListener.bind(d),d._node.addEventListener("ended",d._endFn,!1),d._node.src=v._src,d._node.preload=v._preload===!0?"auto":v._preload,d._node.volume=b*t.volume(),d._node.load()),d},reset:function(){var d=this,v=d._parent;return d._muted=v._muted,d._loop=v._loop,d._volume=v._volume,d._rate=v._rate,d._seek=0,d._rateSeek=0,d._paused=!0,d._ended=!0,d._sprite="__default",d._id=++t._counter,d},_errorListener:function(){var d=this;d._parent._emit("loaderror",d._id,d._node.error?d._node.error.code:0),d._node.removeEventListener("error",d._errorFn,!1)},_loadListener:function(){var d=this,v=d._parent;v._duration=Math.ceil(d._node.duration*10)/10,Object.keys(v._sprite).length===0&&(v._sprite={__default:[0,v._duration*1e3]}),v._state!=="loaded"&&(v._state="loaded",v._emit("load"),v._loadQueue()),d._node.removeEventListener(t._canPlayEvent,d._loadFn,!1)},_endListener:function(){var d=this,v=d._parent;v._duration===1/0&&(v._duration=Math.ceil(d._node.duration*10)/10,v._sprite.__default[1]===1/0&&(v._sprite.__default[1]=v._duration*1e3),v._ended(d)),d._node.removeEventListener("ended",d._endFn,!1)}};var a={},c=function(d){var v=d._src;if(a[v]){d._duration=a[v].duration,_(d);return}if(/^data:[^;]+;base64,/.test(v)){for(var b=atob(v.split(",")[1]),T=new Uint8Array(b.length),R=0;R<b.length;++R)T[R]=b.charCodeAt(R);m(T.buffer,d)}else{var k=new XMLHttpRequest;k.open(d._xhr.method,v,!0),k.withCredentials=d._xhr.withCredentials,k.responseType="arraybuffer",d._xhr.headers&&Object.keys(d._xhr.headers).forEach(function(L){k.setRequestHeader(L,d._xhr.headers[L])}),k.onload=function(){var L=(k.status+"")[0];if(L!=="0"&&L!=="2"&&L!=="3"){d._emit("loaderror",null,"Failed loading audio file with status: "+k.status+".");return}m(k.response,d)},k.onerror=function(){d._webAudio&&(d._html5=!0,d._webAudio=!1,d._sounds=[],delete a[v],d.load())},f(k)}},f=function(d){try{d.send()}catch{d.onerror()}},m=function(d,v){var b=function(){v._emit("loaderror",null,"Decoding audio data failed.")},T=function(R){R&&v._sounds.length>0?(a[v._src]=R,_(v,R)):b()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(d).then(T).catch(b):t.ctx.decodeAudioData(d,T,b)},_=function(d,v){v&&!d._duration&&(d._duration=v.duration),Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue())},w=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var d=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),v=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),b=v?parseInt(v[1],10):null;if(d&&b&&b<9){var T=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!T&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};n.Howler=t,n.Howl=r,typeof Pa<"u"?(Pa.HowlerGlobal=e,Pa.Howler=t,Pa.Howl=r,Pa.Sound=s):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=r,window.Sound=s)})();(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var s=r._howls.length-1;s>=0;s--)r._howls[s].stereo(t);return r},HowlerGlobal.prototype.pos=function(t,r,s){var a=this;if(!a.ctx||!a.ctx.listener)return a;if(r=typeof r!="number"?a._pos[1]:r,s=typeof s!="number"?a._pos[2]:s,typeof t=="number")a._pos=[t,r,s],typeof a.ctx.listener.positionX<"u"?(a.ctx.listener.positionX.setTargetAtTime(a._pos[0],Howler.ctx.currentTime,.1),a.ctx.listener.positionY.setTargetAtTime(a._pos[1],Howler.ctx.currentTime,.1),a.ctx.listener.positionZ.setTargetAtTime(a._pos[2],Howler.ctx.currentTime,.1)):a.ctx.listener.setPosition(a._pos[0],a._pos[1],a._pos[2]);else return a._pos;return a},HowlerGlobal.prototype.orientation=function(t,r,s,a,c,f){var m=this;if(!m.ctx||!m.ctx.listener)return m;var _=m._orientation;if(r=typeof r!="number"?_[1]:r,s=typeof s!="number"?_[2]:s,a=typeof a!="number"?_[3]:a,c=typeof c!="number"?_[4]:c,f=typeof f!="number"?_[5]:f,typeof t=="number")m._orientation=[t,r,s,a,c,f],typeof m.ctx.listener.forwardX<"u"?(m.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),m.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),m.ctx.listener.forwardZ.setTargetAtTime(s,Howler.ctx.currentTime,.1),m.ctx.listener.upX.setTargetAtTime(a,Howler.ctx.currentTime,.1),m.ctx.listener.upY.setTargetAtTime(c,Howler.ctx.currentTime,.1),m.ctx.listener.upZ.setTargetAtTime(f,Howler.ctx.currentTime,.1)):m.ctx.listener.setOrientation(t,r,s,a,c,f);else return _;return m},Howl.prototype.init=(function(t){return function(r){var s=this;return s._orientation=r.orientation||[1,0,0],s._stereo=r.stereo||null,s._pos=r.pos||null,s._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},s._onstereo=r.onstereo?[{fn:r.onstereo}]:[],s._onpos=r.onpos?[{fn:r.onpos}]:[],s._onorientation=r.onorientation?[{fn:r.onorientation}]:[],t.call(this,r)}})(Howl.prototype.init),Howl.prototype.stereo=function(t,r){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"stereo",action:function(){s.stereo(t,r)}}),s;var a=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof t=="number")s._stereo=t,s._pos=[t,0,0];else return s._stereo;for(var c=s._getSoundIds(r),f=0;f<c.length;f++){var m=s._soundById(c[f]);if(m)if(typeof t=="number")m._stereo=t,m._pos=[t,0,0],m._node&&(m._pannerAttr.panningModel="equalpower",(!m._panner||!m._panner.pan)&&e(m,a),a==="spatial"?typeof m._panner.positionX<"u"?(m._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),m._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),m._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):m._panner.setPosition(t,0,0):m._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),s._emit("stereo",m._id);else return m._stereo}return s},Howl.prototype.pos=function(t,r,s,a){var c=this;if(!c._webAudio)return c;if(c._state!=="loaded")return c._queue.push({event:"pos",action:function(){c.pos(t,r,s,a)}}),c;if(r=typeof r!="number"?0:r,s=typeof s!="number"?-.5:s,typeof a>"u")if(typeof t=="number")c._pos=[t,r,s];else return c._pos;for(var f=c._getSoundIds(a),m=0;m<f.length;m++){var _=c._soundById(f[m]);if(_)if(typeof t=="number")_._pos=[t,r,s],_._node&&((!_._panner||_._panner.pan)&&e(_,"spatial"),typeof _._panner.positionX<"u"?(_._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),_._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),_._panner.positionZ.setValueAtTime(s,Howler.ctx.currentTime)):_._panner.setPosition(t,r,s)),c._emit("pos",_._id);else return _._pos}return c},Howl.prototype.orientation=function(t,r,s,a){var c=this;if(!c._webAudio)return c;if(c._state!=="loaded")return c._queue.push({event:"orientation",action:function(){c.orientation(t,r,s,a)}}),c;if(r=typeof r!="number"?c._orientation[1]:r,s=typeof s!="number"?c._orientation[2]:s,typeof a>"u")if(typeof t=="number")c._orientation=[t,r,s];else return c._orientation;for(var f=c._getSoundIds(a),m=0;m<f.length;m++){var _=c._soundById(f[m]);if(_)if(typeof t=="number")_._orientation=[t,r,s],_._node&&(_._panner||(_._pos||(_._pos=c._pos||[0,0,-.5]),e(_,"spatial")),typeof _._panner.orientationX<"u"?(_._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),_._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),_._panner.orientationZ.setValueAtTime(s,Howler.ctx.currentTime)):_._panner.setOrientation(t,r,s)),c._emit("orientation",_._id);else return _._orientation}return c},Howl.prototype.pannerAttr=function(){var t=this,r=arguments,s,a,c;if(!t._webAudio)return t;if(r.length===0)return t._pannerAttr;if(r.length===1)if(typeof r[0]=="object")s=r[0],typeof a>"u"&&(s.pannerAttr||(s.pannerAttr={coneInnerAngle:s.coneInnerAngle,coneOuterAngle:s.coneOuterAngle,coneOuterGain:s.coneOuterGain,distanceModel:s.distanceModel,maxDistance:s.maxDistance,refDistance:s.refDistance,rolloffFactor:s.rolloffFactor,panningModel:s.panningModel}),t._pannerAttr={coneInnerAngle:typeof s.pannerAttr.coneInnerAngle<"u"?s.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof s.pannerAttr.coneOuterAngle<"u"?s.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof s.pannerAttr.coneOuterGain<"u"?s.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof s.pannerAttr.distanceModel<"u"?s.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof s.pannerAttr.maxDistance<"u"?s.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof s.pannerAttr.refDistance<"u"?s.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof s.pannerAttr.rolloffFactor<"u"?s.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof s.pannerAttr.panningModel<"u"?s.pannerAttr.panningModel:t._panningModel});else return c=t._soundById(parseInt(r[0],10)),c?c._pannerAttr:t._pannerAttr;else r.length===2&&(s=r[0],a=parseInt(r[1],10));for(var f=t._getSoundIds(a),m=0;m<f.length;m++)if(c=t._soundById(f[m]),c){var _=c._pannerAttr;_={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:_.coneInnerAngle,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:_.coneOuterAngle,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:_.coneOuterGain,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:_.distanceModel,maxDistance:typeof s.maxDistance<"u"?s.maxDistance:_.maxDistance,refDistance:typeof s.refDistance<"u"?s.refDistance:_.refDistance,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:_.rolloffFactor,panningModel:typeof s.panningModel<"u"?s.panningModel:_.panningModel};var w=c._panner;w||(c._pos||(c._pos=t._pos||[0,0,-.5]),e(c,"spatial"),w=c._panner),w.coneInnerAngle=_.coneInnerAngle,w.coneOuterAngle=_.coneOuterAngle,w.coneOuterGain=_.coneOuterGain,w.distanceModel=_.distanceModel,w.maxDistance=_.maxDistance,w.refDistance=_.refDistance,w.rolloffFactor=_.rolloffFactor,w.panningModel=_.panningModel}return t},Sound.prototype.init=(function(t){return function(){var r=this,s=r._parent;r._orientation=s._orientation,r._stereo=s._stereo,r._pos=s._pos,r._pannerAttr=s._pannerAttr,t.call(this),r._stereo?s.stereo(r._stereo):r._pos&&s.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}})(Sound.prototype.init),Sound.prototype.reset=(function(t){return function(){var r=this,s=r._parent;return r._orientation=s._orientation,r._stereo=s._stereo,r._pos=s._pos,r._pannerAttr=s._pannerAttr,r._stereo?s.stereo(r._stereo):r._pos?s.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,s._refreshBuffer(r)),t.call(this)}})(Sound.prototype.reset);var e=function(t,r){r=r||"spatial",r==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()})(sg)),sg}var zA=jA();class Qn{static instance;data=new Map;isWriteLocked=!1;STORAGE_KEY="engine_settings_global";PERSISTENT_KEYS=["resolution","master_volume","ost_volume","sfx_volume"];SAVABLE_KEYS=["global_hp","global_energy","campaign_id","campaign_step_index"];constructor(){this.data.set("master_volume",.5),this.data.set("ost_volume",.5),this.data.set("sfx_volume",.5),this.data.set("resolution","1080p"),this.loadFromLocalStorage()}static getInstance(){return Qn.instance||(Qn.instance=new Qn),Qn.instance}exportSaveData(){const e={};return this.SAVABLE_KEYS.forEach(t=>{this.data.has(t)&&(e[t]=this.data.get(t))}),e}importSaveData(e){this.SAVABLE_KEYS.forEach(t=>{e[t]!==void 0&&this.forceSet(t,e[t])})}set(e,t){if(this.isWriteLocked&&this.SAVABLE_KEYS.includes(e)){console.warn(`[SharedSession] Blocked stale write to ${e} during lock.`);return}this.data.set(e,t),this.PERSISTENT_KEYS.includes(e)&&this.saveToLocalStorage()}get(e,t){return this.data.has(e)?this.data.get(e):t}clearSavableKeys(){this.SAVABLE_KEYS.forEach(e=>{this.data.delete(e)})}forceSet(e,t){this.data.set(e,t)}lockForLoad(){this.isWriteLocked=!0}unlock(){this.isWriteLocked=!1}loadFromLocalStorage(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(e){const t=JSON.parse(e);Object.entries(t).forEach(([r,s])=>{this.PERSISTENT_KEYS.includes(r)&&this.data.set(r,s)})}}catch(e){console.warn("[SharedSession] Persistence load failed",e)}}saveToLocalStorage(){const e={};this.PERSISTENT_KEYS.forEach(t=>{this.data.has(t)&&(e[t]=this.data.get(t))}),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}}class ka{static instance;sounds=new Map;stateAssets=new Map;volumes={master:1,ost:.7,sfx:1};constructor(){const e=Qn.getInstance();this.volumes.master=e.get("master_volume",1)??1,this.volumes.ost=e.get("ost_volume",.7)??.7,this.volumes.sfx=e.get("sfx_volume",1)??1}static getInstance(){return this.instance||(this.instance=new ka),this.instance}async loadManifest(e,t){const s=await(await fetch(e)).json();if(!s.audio)return;this.stateAssets.has(t)||this.stateAssets.set(t,new Set);const a=this.stateAssets.get(t);Object.entries(s.audio).forEach(([c,f])=>{if(this.sounds.has(c))return;const m=new zA.Howl({src:[f.url],loop:f.loop||!1,volume:f.volume*this.volumes[f.type]*this.volumes.master,html5:f.type==="ost"});this.sounds.set(c,{howl:m,type:f.type,baseVol:f.volume||1}),a.add(c)})}play(e){const t=this.sounds.get(e);t&&t.howl.play()}stop(e){this.sounds.get(e)?.howl.stop()}stopAllByState(e){const t=this.stateAssets.get(e);t&&t.forEach(r=>this.sounds.get(r)?.howl.stop())}uncacheByState(e){const t=this.stateAssets.get(e);t&&(t.forEach(r=>{const s=this.sounds.get(r);s&&(s.howl.stop(),s.howl.unload(),this.sounds.delete(r))}),this.stateAssets.delete(e))}setVolume(e,t){this.volumes[e]=t,Qn.getInstance().set(`settings_${e}_vol`,t),this.sounds.forEach(r=>{const s=r.type==="ost"?this.volumes.ost:this.volumes.sfx;r.howl.volume(r.baseVol*s*this.volumes.master)})}getVolumes(){return{...this.volumes}}}class HA extends oh{constructor(e,t){super(),this.targetState=e,this.config=t,this.isRendering=!0}name="LoadingState";isTargetReady=!1;async init(){this.config.manifestPath&&await Promise.all([gu.getInstance().loadManifest(this.config.manifestPath,this.name),ka.getInstance().loadManifest(this.config.manifestPath,this.name)]),this.startTargetInit()}async startTargetInit(){try{await this.targetState.init(),this.isTargetReady=!0,Ar.getInstance().notify()}catch(e){console.error("Failed to load target state:",e)}}update(e,t){}getView(){const e=this.config.view||v1;return fn.createElement(e,{key:"loading-view",...this.config.props,isFinished:this.isTargetReady,onTransitionComplete:()=>this.finishLoading()})}finishLoading(){Ar.getInstance().replace(this.targetState)}destroy(){gu.getInstance().uncacheByState(this.name),ka.getInstance().uncacheByState(this.name)}}class Ar{static instance;stack=[];listeners=[];constructor(){}static getInstance(){return Ar.instance||(Ar.instance=new Ar),Ar.instance}async push(e,t=!0){t&&this.stack.length>0&&(this.stack[this.stack.length-1].isUpdating=!1,this.stack[this.stack.length-1].isRendering=!0),await e.init(),this.stack.push(e),this.notify()}pop(){if(this.stack.length<=1)return;const e=this.stack.pop();e&&e.destroy(),this.stack.length>0&&(this.stack[this.stack.length-1].isUpdating=!0,this.stack[this.stack.length-1].isRendering=!0),this.notify()}async replace(e,t){this.stack.forEach(s=>s.destroy()),this.stack=[],this.notify();const r=t?new HA(e,t):e;await r.init(),this.stack.push(r),this.notify(),au.getInstance().start()}updateAll(e,t){this.stack.forEach(r=>{r.isUpdating&&r.update(e,t)})}getActiveUpdateStates(){return this.stack.filter(e=>e.isUpdating)}getCurrentStateName(){return this.stack.length>0?this.stack[this.stack.length-1].name:null}subscribe(e){return this.listeners.push(e),this.notify(),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}getUnderlyingStateName(){if(this.stack.length===0)return null;for(let e=this.stack.length-1;e>=0;e--){const t=this.stack[e];if(t.name!=="PauseMenu"&&t.name!=="SaveMenu"&&t.name!=="SettingsMenu")return t.name}return this.stack[0].name}getActiveState(){return this.stack.length>0?this.stack[this.stack.length-1]:null}notify(){const e=this.stack.filter(t=>t.isRendering).map(t=>t.getView());this.listeners.forEach(t=>t(e))}}const VA=()=>{const n=Pt.useRef(null),e=au.getInstance(),t=Ar.getInstance(),r=Pt.useRef(0),s=Pt.useRef([]),a=Pt.useRef(new Set);return Pt.useEffect(()=>{const c=w=>a.current.add(w.key.toUpperCase()),f=w=>a.current.delete(w.key.toUpperCase());window.addEventListener("keydown",c),window.addEventListener("keyup",f);let m;const _=()=>{if(n.current){const w=e.fps||0,d=e.frameCount||0,v=t.stack||[];if(v.length!==r.current){const k=new Date().toLocaleTimeString().split(" ")[0],L=v.length>r.current?"PUSH":"POP",W=v[v.length-1]?.name||"NULL";s.current.unshift(`[${k}] ${L}: ${W}`),s.current.length>3&&s.current.pop(),r.current=v.length}const b=v.map((k,L)=>`${L===v.length-1?" ACTIVE >":"        -"} [${L}] ${k.name}`).reverse().join(`
`),T=Array.from(a.current),R=T.length>0?T.join(" | "):"IDLE";n.current.innerText=`// ENGINE_STATS
FPS:    ${w}
FRAME:  ${d}

// STATE_STACK
${b||"EMPTY"}

// INPUT_MONITOR
KEYS:   ${R}

// RECENT_TRANSITIONS
${s.current.join(`
`)||"NONE"}`}m=requestAnimationFrame(_)};return m=requestAnimationFrame(_),()=>{cancelAnimationFrame(m),window.removeEventListener("keydown",c),window.removeEventListener("keyup",f)}},[e,t]),_e.jsx("div",{ref:n,style:{position:"absolute",top:"1cqw",right:"1cqw",color:"#0f0",fontFamily:"monospace",whiteSpace:"pre",textAlign:"left",fontSize:"0.95cqw",lineHeight:"1.4",textShadow:"0 0 5px rgba(0, 255, 0, 0.5)",backgroundColor:"rgba(5, 5, 5, 0.9)",padding:"1.2cqw",borderRadius:"0.2cqw",pointerEvents:"none",zIndex:9999,borderLeft:"3px solid #0f0",minWidth:"22cqw",boxShadow:"0 10px 30px rgba(0,0,0,0.8)",letterSpacing:"0.05cqw"}})},Ff={hp:"global_hp",energy:"global_energy"};class vw extends oh{constructor(e=!1){super(),this.forceReset=e,this.isRendering=!1,this.isUpdating=!1}vm;controller;instanceId="";isLoadedFromSave=!1;async init(){if(this.isInitialized){this.isUpdating=!0,this.isRendering=!0;return}const e=rh.getInstance(),t=Fo.getInstance(),r=Qn.getInstance();e.activeStateName===this.name&&(this.isLoadedFromSave=!0),this.instanceId=e.prepareForState(this.name),e.setupBuffer(this.logicSchema,this.forceReset),t.prepareForState(this.name),t.setupBuffers(e.sharedBuffer,this.viewSchema);try{await this.internalLoadResources()}catch(s){console.warn(`[${this.name}] Resource load warning:`,s)}this.initMVC(),e.createState(this.name),t.createState(this.name),await this.internalPostInit(e,r),r.unlock(),this.isInitialized=!0,this.isUpdating=!0,this.isRendering=!0}update(e,t){this.isUpdating&&(this.controller&&this.controller.update(),this.vm&&this.vm.update&&this.vm.update())}getView(){return fn.createElement(this.viewComponent,{key:this.instanceId,vm:this.vm,controller:this.controller})}destroy(){const e=Qn.getInstance(),t=rh.getInstance(),r=Fo.getInstance();this.isUpdating=!1,this.isRendering=!1,this.isInitialized=!1,this.syncGlobalsToSession(e),ka.getInstance().stopAllByState(this.name),ka.getInstance().uncacheByState(this.name),gu.getInstance().uncacheByState(this.name),this.controller&&this.controller.destroy(),this.onBeforeDestroy(e,t),t.terminateState(this.name,this.instanceId),r.terminateState(this.name),ou.getInstance().reset()}async onCustomLoadResources(){}onBeforeDestroy(e,t){}async internalLoadResources(){const e=this.getConfig();e.manifestPath&&await Promise.all([gu.getInstance().loadManifest(e.manifestPath,this.name),ka.getInstance().loadManifest(e.manifestPath,this.name)]),await this.onCustomLoadResources()}async internalPostInit(e,t){const r=this.getConfig();if(this.isLoadedFromSave)e.isInitialized=!0;else if(this.forceReset)t.clearSavableKeys(),e.sendInput(this.name,"INITIALIZE",r);else{const s=this.getSessionOverrides(t),a={...r,...s};e.sendInput(this.name,"INITIALIZE",a)}this.vm&&this.vm.notify&&this.vm.notify(),r.bgmKey&&ka.getInstance().play(r.bgmKey)}syncGlobalsToSession(e){this.vm&&Object.entries(Ff).forEach(([t,r])=>{t in this.vm&&e.set(r,this.vm[t])})}}const WA="modulepreload",$A=function(n){return"/LuckyRepo/"+n},g0={},cu=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let m=function(_){return Promise.all(_.map(w=>Promise.resolve(w).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=c?.nonce||c?.getAttribute("nonce");s=m(t.map(_=>{if(_=$A(_),_ in g0)return;g0[_]=!0;const w=_.endsWith(".css"),d=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${d}`))return;const v=document.createElement("link");if(v.rel=w?"stylesheet":WA,w||(v.as="script"),v.crossOrigin="",v.href=_,f&&v.setAttribute("nonce",f),document.head.appendChild(v),w)return new Promise((b,T)=>{v.addEventListener("load",b),v.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${_}`)))})}))}function a(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return s.then(c=>{for(const f of c||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};var bf={exports:{}},XA=bf.exports,y0;function qA(){return y0||(y0=1,(function(n,e){((t,r)=>{n.exports=r()})(XA,function(){var t=function(p,x){return(t=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(A,P){A.__proto__=P}:function(A,P){for(var M in P)Object.prototype.hasOwnProperty.call(P,M)&&(A[M]=P[M])}))(p,x)},r=function(){return(r=Object.assign||function(p){for(var x,A=1,P=arguments.length;A<P;A++)for(var M in x=arguments[A])Object.prototype.hasOwnProperty.call(x,M)&&(p[M]=x[M]);return p}).apply(this,arguments)};function s(p,x,A){for(var P,M=0,N=x.length;M<N;M++)!P&&M in x||((P=P||Array.prototype.slice.call(x,0,M))[M]=x[M]);return p.concat(P||Array.prototype.slice.call(x))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Pa,c=Object.keys,f=Array.isArray;function m(p,x){return typeof x=="object"&&c(x).forEach(function(A){p[A]=x[A]}),p}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var _=Object.getPrototypeOf,w={}.hasOwnProperty;function d(p,x){return w.call(p,x)}function v(p,x){typeof x=="function"&&(x=x(_(p))),(typeof Reflect>"u"?c:Reflect.ownKeys)(x).forEach(function(A){T(p,A,x[A])})}var b=Object.defineProperty;function T(p,x,A,P){b(p,x,m(A&&d(A,"get")&&typeof A.get=="function"?{get:A.get,set:A.set,configurable:!0}:{value:A,configurable:!0,writable:!0},P))}function R(p){return{from:function(x){return p.prototype=Object.create(x.prototype),T(p.prototype,"constructor",p),{extend:v.bind(null,p.prototype)}}}}var k=Object.getOwnPropertyDescriptor,L=[].slice;function W(p,x,A){return L.call(p,x,A)}function z(p,x){return x(p)}function te(p){if(!p)throw new Error("Assertion Failed")}function K(p){a.setImmediate?setImmediate(p):setTimeout(p,0)}function de(p,x){if(typeof x=="string"&&d(p,x))return p[x];if(!x)return p;if(typeof x!="string"){for(var A=[],P=0,M=x.length;P<M;++P){var N=de(p,x[P]);A.push(N)}return A}var G,X=x.indexOf(".");return X===-1||(G=p[x.substr(0,X)])==null?void 0:de(G,x.substr(X+1))}function F(p,x,A){if(p&&x!==void 0&&!("isFrozen"in Object&&Object.isFrozen(p)))if(typeof x!="string"&&"length"in x){te(typeof A!="string"&&"length"in A);for(var P=0,M=x.length;P<M;++P)F(p,x[P],A[P])}else{var N,G,X=x.indexOf(".");X!==-1?(N=x.substr(0,X),(X=x.substr(X+1))===""?A===void 0?f(p)&&!isNaN(parseInt(N))?p.splice(N,1):delete p[N]:p[N]=A:F(G=(G=p[N])&&d(p,N)?G:p[N]={},X,A)):A===void 0?f(p)&&!isNaN(parseInt(x))?p.splice(x,1):delete p[x]:p[x]=A}}function ie(p){var x,A={};for(x in p)d(p,x)&&(A[x]=p[x]);return A}var ye=[].concat;function Oe(p){return ye.apply([],p)}var q="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Oe([8,16,32,64].map(function(p){return["Int","Uint","Float"].map(function(x){return x+p+"Array"})}))).filter(function(p){return a[p]}),Pe=new Set(q.map(function(p){return a[p]})),ge=null;function ve(p){return ge=new WeakMap,p=(function x(A){if(!A||typeof A!="object")return A;var P=ge.get(A);if(P)return P;if(f(A)){P=[],ge.set(A,P);for(var M=0,N=A.length;M<N;++M)P.push(x(A[M]))}else if(Pe.has(A.constructor))P=A;else{var G,X=_(A);for(G in P=X===Object.prototype?{}:Object.create(X),ge.set(A,P),A)d(A,G)&&(P[G]=x(A[G]))}return P})(p),ge=null,p}var we={}.toString;function qe(p){return we.call(p).slice(8,-1)}var H=typeof Symbol<"u"?Symbol.iterator:"@@iterator",V=typeof H=="symbol"?function(p){var x;return p!=null&&(x=p[H])&&x.apply(p)}:function(){return null};function D(p,x){x=p.indexOf(x),0<=x&&p.splice(x,1)}var Y={};function j(p){var x,A,P,M;if(arguments.length===1){if(f(p))return p.slice();if(this===Y&&typeof p=="string")return[p];if(M=V(p))for(A=[];!(P=M.next()).done;)A.push(P.value);else{if(p==null)return[p];if(typeof(x=p.length)!="number")return[p];for(A=new Array(x);x--;)A[x]=p[x]}}else for(x=arguments.length,A=new Array(x);x--;)A[x]=arguments[x];return A}var U=typeof Symbol<"u"?function(p){return p[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},q=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],pn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(q),ce={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ae(p,x){this.name=p,this.message=x}function Me(p,x){return p+". Errors: "+Object.keys(x).map(function(A){return x[A].toString()}).filter(function(A,P,M){return M.indexOf(A)===P}).join(`
`)}function Fe(p,x,A,P){this.failures=x,this.failedKeys=P,this.successCount=A,this.message=Me(p,x)}function je(p,x){this.name="BulkError",this.failures=Object.keys(x).map(function(A){return x[A]}),this.failuresByPos=x,this.message=Me(p,this.failures)}R(Ae).from(Error).extend({toString:function(){return this.name+": "+this.message}}),R(Fe).from(Ae),R(je).from(Ae);var Ke=pn.reduce(function(p,x){return p[x]=x+"Error",p},{}),it=Ae,Se=pn.reduce(function(p,x){var A=x+"Error";function P(M,N){this.name=A,M?typeof M=="string"?(this.message="".concat(M).concat(N?`
 `+N:""),this.inner=N||null):typeof M=="object"&&(this.message="".concat(M.name," ").concat(M.message),this.inner=M):(this.message=ce[x]||A,this.inner=null)}return R(P).from(it),p[x]=P,p},{}),ot=(Se.Syntax=SyntaxError,Se.Type=TypeError,Se.Range=RangeError,q.reduce(function(p,x){return p[x+"Error"]=Se[x],p},{}));q=pn.reduce(function(p,x){return["Syntax","Type","Range"].indexOf(x)===-1&&(p[x+"Error"]=Se[x]),p},{});function Qe(){}function gt(p){return p}function Bt(p,x){return p==null||p===gt?x:function(A){return x(p(A))}}function dt(p,x){return function(){p.apply(this,arguments),x.apply(this,arguments)}}function vt(p,x){return p===Qe?x:function(){var A=p.apply(this,arguments),P=(A!==void 0&&(arguments[0]=A),this.onsuccess),M=this.onerror,N=(this.onsuccess=null,this.onerror=null,x.apply(this,arguments));return P&&(this.onsuccess=this.onsuccess?dt(P,this.onsuccess):P),M&&(this.onerror=this.onerror?dt(M,this.onerror):M),N!==void 0?N:A}}function mr(p,x){return p===Qe?x:function(){p.apply(this,arguments);var A=this.onsuccess,P=this.onerror;this.onsuccess=this.onerror=null,x.apply(this,arguments),A&&(this.onsuccess=this.onsuccess?dt(A,this.onsuccess):A),P&&(this.onerror=this.onerror?dt(P,this.onerror):P)}}function Cr(p,x){return p===Qe?x:function(M){var P=p.apply(this,arguments),M=(m(M,P),this.onsuccess),N=this.onerror,G=(this.onsuccess=null,this.onerror=null,x.apply(this,arguments));return M&&(this.onsuccess=this.onsuccess?dt(M,this.onsuccess):M),N&&(this.onerror=this.onerror?dt(N,this.onerror):N),P===void 0?G===void 0?void 0:G:m(P,G)}}function Li(p,x){return p===Qe?x:function(){return x.apply(this,arguments)!==!1&&p.apply(this,arguments)}}function Nr(p,x){return p===Qe?x:function(){var A=p.apply(this,arguments);if(A&&typeof A.then=="function"){for(var P=this,M=arguments.length,N=new Array(M);M--;)N[M]=arguments[M];return A.then(function(){return x.apply(P,N)})}return x.apply(this,arguments)}}q.ModifyError=Fe,q.DexieError=Ae,q.BulkError=je;var hr=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function yi(p){hr=p}var jn={},Cn=100,Os=typeof Promise>"u"?[]:(pn=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[Os=crypto.subtle.digest("SHA-512",new Uint8Array([0])),_(Os),pn]:[pn,_(pn),pn]),pn=Os[0],Ci=Os[1],Ci=Ci&&Ci.then,Zn=pn&&pn.constructor,Ds=!!Os[2],Jn=function(p,x){Ie.push([p,x]),_i&&(queueMicrotask(xi),_i=!1)},vi=!0,_i=!0,gs=[],ao=[],Ls=gt,zn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Qe,pgp:!1,env:{},finalize:Qe},re=zn,Ie=[],Nt=0,Zt=[];function ze(p){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var x=this._PSD=re;if(typeof p!="function"){if(p!==jn)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&ei(this,this._value)}else this._state=null,this._value=null,++x.ref,(function A(P,M){try{M(function(N){if(P._state===null){if(N===P)throw new TypeError("A promise cannot be resolved with itself.");var G=P._lib&&Mr();N&&typeof N.then=="function"?A(P,function(X,ae){N instanceof ze?N._then(X,ae):N.then(X,ae)}):(P._state=!0,P._value=N,$r(P)),G&&wi()}},ei.bind(null,P))}catch(N){ei(P,N)}})(this,p)}var kt={get:function(){var p=re,x=ri;function A(P,M){var N=this,G=!p.global&&(p!==re||x!==ri),X=G&&!Xr(),ae=new ze(function(fe,se){In(N,new mn(Ga(P,p,G,X),Ga(M,p,G,X),fe,se,p))});return this._consoleTask&&(ae._consoleTask=this._consoleTask),ae}return A.prototype=jn,A},set:function(p){T(this,"then",p&&p.prototype===jn?kt:{get:function(){return p},set:kt.set})}};function mn(p,x,A,P,M){this.onFulfilled=typeof p=="function"?p:null,this.onRejected=typeof x=="function"?x:null,this.resolve=A,this.reject=P,this.psd=M}function ei(p,x){var A,P;ao.push(x),p._state===null&&(A=p._lib&&Mr(),x=Ls(x),p._state=!1,p._value=x,P=p,gs.some(function(M){return M._value===P._value})||gs.push(P),$r(p),A)&&wi()}function $r(p){var x=p._listeners;p._listeners=[];for(var A=0,P=x.length;A<P;++A)In(p,x[A]);var M=p._PSD;--M.ref||M.finalize(),Nt===0&&(++Nt,Jn(function(){--Nt==0&&Ni()},[]))}function In(p,x){if(p._state===null)p._listeners.push(x);else{var A=p._state?x.onFulfilled:x.onRejected;if(A===null)return(p._state?x.resolve:x.reject)(p._value);++x.psd.ref,++Nt,Jn($o,[A,p,x])}}function $o(p,x,A){try{var P,M=x._value;!x._state&&ao.length&&(ao=[]),P=hr&&x._consoleTask?x._consoleTask.run(function(){return p(M)}):p(M),x._state||ao.indexOf(M)!==-1||(N=>{for(var G=gs.length;G;)if(gs[--G]._value===N._value)return gs.splice(G,1)})(x),A.resolve(P)}catch(N){A.reject(N)}finally{--Nt==0&&Ni(),--A.psd.ref||A.psd.finalize()}}function xi(){Hn(zn,function(){Mr()&&wi()})}function Mr(){var p=vi;return _i=vi=!1,p}function wi(){var p,x,A;do for(;0<Ie.length;)for(p=Ie,Ie=[],A=p.length,x=0;x<A;++x){var P=p[x];P[0].apply(null,P[1])}while(0<Ie.length);_i=vi=!0}function Ni(){for(var p=gs,x=(gs=[],p.forEach(function(P){P._PSD.onunhandled.call(null,P._value,P)}),Zt.slice(0)),A=x.length;A;)x[--A]()}function ys(p){return new ze(jn,!1,p)}function qt(p,x){var A=re;return function(){var P=Mr(),M=re;try{return ii(A,!0),p.apply(this,arguments)}catch(N){x&&x(N)}finally{ii(M,!1),P&&wi()}}}v(ze.prototype,{then:kt,_then:function(p,x){In(this,new mn(null,null,p,x,re))},catch:function(p){var x,A;return arguments.length===1?this.then(null,p):(x=p,A=arguments[1],typeof x=="function"?this.then(null,function(P){return(P instanceof x?A:ys)(P)}):this.then(null,function(P){return(P&&P.name===x?A:ys)(P)}))},finally:function(p){return this.then(function(x){return ze.resolve(p()).then(function(){return x})},function(x){return ze.resolve(p()).then(function(){return ys(x)})})},timeout:function(p,x){var A=this;return p<1/0?new ze(function(P,M){var N=setTimeout(function(){return M(new Se.Timeout(x))},p);A.then(P,M).finally(clearTimeout.bind(null,N))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&T(ze.prototype,Symbol.toStringTag,"Dexie.Promise"),zn.env=Fi(),v(ze,{all:function(){var p=j.apply(null,arguments).map(Ns);return new ze(function(x,A){p.length===0&&x([]);var P=p.length;p.forEach(function(M,N){return ze.resolve(M).then(function(G){p[N]=G,--P||x(p)},A)})})},resolve:function(p){return p instanceof ze?p:p&&typeof p.then=="function"?new ze(function(x,A){p.then(x,A)}):new ze(jn,!0,p)},reject:ys,race:function(){var p=j.apply(null,arguments).map(Ns);return new ze(function(x,A){p.map(function(P){return ze.resolve(P).then(x,A)})})},PSD:{get:function(){return re},set:function(p){return re=p}},totalEchoes:{get:function(){return ri}},newPSD:ni,usePSD:Hn,scheduler:{get:function(){return Jn},set:function(p){Jn=p}},rejectionMapper:{get:function(){return Ls},set:function(p){Ls=p}},follow:function(p,x){return new ze(function(A,P){return ni(function(M,N){var G=re;G.unhandleds=[],G.onunhandled=N,G.finalize=dt(function(){var X,ae=this;X=function(){ae.unhandleds.length===0?M():N(ae.unhandleds[0])},Zt.push(function fe(){X(),Zt.splice(Zt.indexOf(fe),1)}),++Nt,Jn(function(){--Nt==0&&Ni()},[])},G.finalize),p()},x,A,P)})}}),Zn&&(Zn.allSettled&&T(ze,"allSettled",function(){var p=j.apply(null,arguments).map(Ns);return new ze(function(x){p.length===0&&x([]);var A=p.length,P=new Array(A);p.forEach(function(M,N){return ze.resolve(M).then(function(G){return P[N]={status:"fulfilled",value:G}},function(G){return P[N]={status:"rejected",reason:G}}).then(function(){return--A||x(P)})})})}),Zn.any&&typeof AggregateError<"u"&&T(ze,"any",function(){var p=j.apply(null,arguments).map(Ns);return new ze(function(x,A){p.length===0&&A(new AggregateError([]));var P=p.length,M=new Array(P);p.forEach(function(N,G){return ze.resolve(N).then(function(X){return x(X)},function(X){M[G]=X,--P||A(new AggregateError(M))})})})}),Zn.withResolvers)&&(ze.withResolvers=Zn.withResolvers);var br={awaits:0,echoes:0,id:0},ti=0,bi=[],Si=0,ri=0,wl=0;function ni(p,G,A,P){var M=re,N=Object.create(M),G=(N.parent=M,N.ref=0,N.global=!1,N.id=++wl,zn.env,N.env=Ds?{Promise:ze,PromiseProp:{value:ze,configurable:!0,writable:!0},all:ze.all,race:ze.race,allSettled:ze.allSettled,any:ze.any,resolve:ze.resolve,reject:ze.reject}:{},G&&m(N,G),++M.ref,N.finalize=function(){--this.parent.ref||this.parent.finalize()},Hn(N,p,A,P));return N.ref===0&&N.finalize(),G}function vs(){return br.id||(br.id=++ti),++br.awaits,br.echoes+=Cn,br.id}function Xr(){return!!br.awaits&&(--br.awaits==0&&(br.id=0),br.echoes=br.awaits*Cn,!0)}function Ns(p){return br.echoes&&p&&p.constructor===Zn?(vs(),p.then(function(x){return Xr(),x},function(x){return Xr(),Or(x)})):p}function bl(){var p=bi[bi.length-1];bi.pop(),ii(p,!1)}function ii(p,x){var A,P,M=re;(x?!br.echoes||Si++&&p===re:!Si||--Si&&p===re)||queueMicrotask(x?(function(N){++ri,br.echoes&&--br.echoes!=0||(br.echoes=br.awaits=br.id=0),bi.push(re),ii(N,!0)}).bind(null,p):bl),p!==re&&(re=p,M===zn&&(zn.env=Fi()),Ds)&&(A=zn.env.Promise,P=p.env,M.global||p.global)&&(Object.defineProperty(a,"Promise",P.PromiseProp),A.all=P.all,A.race=P.race,A.resolve=P.resolve,A.reject=P.reject,P.allSettled&&(A.allSettled=P.allSettled),P.any)&&(A.any=P.any)}function Fi(){var p=a.Promise;return Ds?{Promise:p,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:p.all,race:p.race,allSettled:p.allSettled,any:p.any,resolve:p.resolve,reject:p.reject}:{}}function Hn(p,x,A,P,M){var N=re;try{return ii(p,!0),x(A,P,M)}finally{ii(N,!1)}}function Ga(p,x,A,P){return typeof p!="function"?p:function(){var M=re;A&&vs(),ii(x,!0);try{return p.apply(this,arguments)}finally{ii(M,!1),P&&queueMicrotask(Xr)}}}function lo(p){Promise===Zn&&br.echoes===0?Si===0?p():enqueueNativeMicroTask(p):setTimeout(p,0)}(""+Ci).indexOf("[native code]")===-1&&(vs=Xr=Qe);var Or=ze.reject,uo="",nr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Xo="String expected.",Bi=[],co="__dbnames",qo="readonly",ja="readwrite";function Vn(p,x){return p?x?function(){return p.apply(this,arguments)&&x.apply(this,arguments)}:p:x}var si={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Wt(p){return typeof p!="string"||/\./.test(p)?function(x){return x}:function(x){return x[p]===void 0&&p in x&&delete(x=ve(x))[p],x}}function dr(){throw Se.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Rt(p,x){try{var A=en(p),P=en(x);if(A!==P)return A==="Array"?1:P==="Array"?-1:A==="binary"?1:P==="binary"?-1:A==="string"?1:P==="string"?-1:A==="Date"?1:P!=="Date"?NaN:-1;switch(A){case"number":case"Date":case"string":return x<p?1:p<x?-1:0;case"binary":for(var M=xn(p),N=xn(x),G=M.length,X=N.length,ae=G<X?G:X,fe=0;fe<ae;++fe)if(M[fe]!==N[fe])return M[fe]<N[fe]?-1:1;return G===X?0:G<X?-1:1;case"Array":for(var se=p,ne=x,le=se.length,ee=ne.length,J=le<ee?le:ee,Z=0;Z<J;++Z){var xe=Rt(se[Z],ne[Z]);if(xe!==0)return xe}return le===ee?0:le<ee?-1:1}}catch{}return NaN}function en(p){var x=typeof p;return x=="object"&&(ArrayBuffer.isView(p)||(x=qe(p))==="ArrayBuffer")?"binary":x}function xn(p){return p instanceof Uint8Array?p:ArrayBuffer.isView(p)?new Uint8Array(p.buffer,p.byteOffset,p.byteLength):new Uint8Array(p)}function Ui(p,x,A){var P=p.schema.yProps;return P?(x&&0<A.numFailures&&(x=x.filter(function(M,N){return!A.failures[N]})),Promise.all(P.map(function(M){return M=M.updatesTable,x?p.db.table(M).where("k").anyOf(x).delete():p.db.table(M).clear()})).then(function(){return A})):A}tn.prototype.execute=function(p){var x=this["@@propmod"];if(x.add!==void 0){var A=x.add;if(f(A))return s(s([],f(p)?p:[],!0),A).sort();if(typeof A=="number")return(Number(p)||0)+A;if(typeof A=="bigint")try{return BigInt(p)+A}catch{return BigInt(0)+A}throw new TypeError("Invalid term ".concat(A))}if(x.remove!==void 0){var P=x.remove;if(f(P))return f(p)?p.filter(function(M){return!P.includes(M)}).sort():[];if(typeof P=="number")return Number(p)-P;if(typeof P=="bigint")try{return BigInt(p)-P}catch{return BigInt(0)-P}throw new TypeError("Invalid subtrahend ".concat(P))}return A=(A=x.replacePrefix)==null?void 0:A[0],A&&typeof p=="string"&&p.startsWith(A)?x.replacePrefix[1]+p.substring(A.length):p};var Wn=tn;function tn(p){this["@@propmod"]=p}function Fs(p,x){for(var A=c(x),P=A.length,M=!1,N=0;N<P;++N){var G=A[N],X=x[G],ae=de(p,G);X instanceof Wn?(F(p,G,X.execute(ae)),M=!0):ae!==X&&(F(p,G,X),M=!0)}return M}fr.prototype._trans=function(p,x,A){var P=this._tx||re.trans,M=this.name,N=hr&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(p==="readonly"?"read":"write"," ").concat(this.name));function G(fe,se,ne){if(ne.schema[M])return x(ne.idbtrans,ne);throw new Se.NotFound("Table "+M+" not part of transaction")}var X=Mr();try{var ae=P&&P.db._novip===this.db._novip?P===re.trans?P._promise(p,G,A):ni(function(){return P._promise(p,G,A)},{trans:P,transless:re.transless||re}):(function fe(se,ne,le,ee){if(se.idbdb&&(se._state.openComplete||re.letThrough||se._vip)){var J=se._createTransaction(ne,le,se._dbSchema);try{J.create(),se._state.PR1398_maxLoop=3}catch(Z){return Z.name===Ke.InvalidState&&se.isOpen()&&0<--se._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),se.close({disableAutoOpen:!1}),se.open().then(function(){return fe(se,ne,le,ee)})):Or(Z)}return J._promise(ne,function(Z,xe){return ni(function(){return re.trans=J,ee(Z,xe,J)})}).then(function(Z){if(ne==="readwrite")try{J.idbtrans.commit()}catch{}return ne==="readonly"?Z:J._completion.then(function(){return Z})})}if(se._state.openComplete)return Or(new Se.DatabaseClosed(se._state.dbOpenError));if(!se._state.isBeingOpened){if(!se._state.autoOpen)return Or(new Se.DatabaseClosed);se.open().catch(Qe)}return se._state.dbReadyPromise.then(function(){return fe(se,ne,le,ee)})})(this.db,p,[this.name],G);return N&&(ae._consoleTask=N,ae=ae.catch(function(fe){return console.trace(fe),Or(fe)})),ae}finally{X&&wi()}},fr.prototype.get=function(p,x){var A=this;return p&&p.constructor===Object?this.where(p).first(x):p==null?Or(new Se.Type("Invalid argument to Table.get()")):this._trans("readonly",function(P){return A.core.get({trans:P,key:p}).then(function(M){return A.hook.reading.fire(M)})}).then(x)},fr.prototype.where=function(p){if(typeof p=="string")return new this.db.WhereClause(this,p);if(f(p))return new this.db.WhereClause(this,"[".concat(p.join("+"),"]"));var x=c(p);if(x.length===1)return this.where(x[0]).equals(p[x[0]]);var A=this.schema.indexes.concat(this.schema.primKey).filter(function(X){if(X.compound&&x.every(function(fe){return 0<=X.keyPath.indexOf(fe)})){for(var ae=0;ae<x.length;++ae)if(x.indexOf(X.keyPath[ae])===-1)return!1;return!0}return!1}).sort(function(X,ae){return X.keyPath.length-ae.keyPath.length})[0];if(A&&this.db._maxKey!==uo)return G=A.keyPath.slice(0,x.length),this.where(G).equals(G.map(function(X){return p[X]}));!A&&hr&&console.warn("The query ".concat(JSON.stringify(p)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(x.join("+"),"]"));var P=this.schema.idxByName;function M(X,ae){return Rt(X,ae)===0}var G=x.reduce(function(se,ae){var fe=se[0],se=se[1],ne=P[ae],le=p[ae];return[fe||ne,fe||!ne?Vn(se,ne&&ne.multi?function(ee){return ee=de(ee,ae),f(ee)&&ee.some(function(J){return M(le,J)})}:function(ee){return M(le,de(ee,ae))}):se]},[null,null]),N=G[0],G=G[1];return N?this.where(N.name).equals(p[N.keyPath]).filter(G):A?this.filter(G):this.where(x).equals("")},fr.prototype.filter=function(p){return this.toCollection().and(p)},fr.prototype.count=function(p){return this.toCollection().count(p)},fr.prototype.offset=function(p){return this.toCollection().offset(p)},fr.prototype.limit=function(p){return this.toCollection().limit(p)},fr.prototype.each=function(p){return this.toCollection().each(p)},fr.prototype.toArray=function(p){return this.toCollection().toArray(p)},fr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},fr.prototype.orderBy=function(p){return new this.db.Collection(new this.db.WhereClause(this,f(p)?"[".concat(p.join("+"),"]"):p))},fr.prototype.reverse=function(){return this.toCollection().reverse()},fr.prototype.mapToClass=function(p){for(var x=this.db,A=this.name,P=((this.schema.mappedClass=p).prototype instanceof dr&&(p=(G=>{var X=se,ae=G;if(typeof ae!="function"&&ae!==null)throw new TypeError("Class extends value "+String(ae)+" is not a constructor or null");function fe(){this.constructor=X}function se(){return G!==null&&G.apply(this,arguments)||this}return t(X,ae),X.prototype=ae===null?Object.create(ae):(fe.prototype=ae.prototype,new fe),Object.defineProperty(se.prototype,"db",{get:function(){return x},enumerable:!1,configurable:!0}),se.prototype.table=function(){return A},se})(p)),new Set),M=p.prototype;M;M=_(M))Object.getOwnPropertyNames(M).forEach(function(G){return P.add(G)});function N(G){if(!G)return G;var X,ae=Object.create(p.prototype);for(X in G)if(!P.has(X))try{ae[X]=G[X]}catch{}return ae}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=N,this.hook("reading",N),p},fr.prototype.defineClass=function(){return this.mapToClass(function(p){m(this,p)})},fr.prototype.add=function(p,x){var A=this,P=this.schema.primKey,M=P.auto,N=P.keyPath,G=p;return N&&M&&(G=Wt(N)(p)),this._trans("readwrite",function(X){return A.core.mutate({trans:X,type:"add",keys:x!=null?[x]:null,values:[G]})}).then(function(X){return X.numFailures?ze.reject(X.failures[0]):X.lastResult}).then(function(X){if(N)try{F(p,N,X)}catch{}return X})},fr.prototype.upsert=function(p,x){var A=this,P=this.schema.primKey.keyPath;return this._trans("readwrite",function(M){return A.core.get({trans:M,key:p}).then(function(N){var G=N??{};return Fs(G,x),P&&F(G,P,p),A.core.mutate({trans:M,type:"put",values:[G],keys:[p],upsert:!0,updates:{keys:[p],changeSpecs:[x]}}).then(function(X){return X.numFailures?ze.reject(X.failures[0]):!!N})})})},fr.prototype.update=function(p,x){return typeof p!="object"||f(p)?this.where(":id").equals(p).modify(x):(p=de(p,this.schema.primKey.keyPath))===void 0?Or(new Se.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(p).modify(x)},fr.prototype.put=function(p,x){var A=this,P=this.schema.primKey,M=P.auto,N=P.keyPath,G=p;return N&&M&&(G=Wt(N)(p)),this._trans("readwrite",function(X){return A.core.mutate({trans:X,type:"put",values:[G],keys:x!=null?[x]:null})}).then(function(X){return X.numFailures?ze.reject(X.failures[0]):X.lastResult}).then(function(X){if(N)try{F(p,N,X)}catch{}return X})},fr.prototype.delete=function(p){var x=this;return this._trans("readwrite",function(A){return x.core.mutate({trans:A,type:"delete",keys:[p]}).then(function(P){return Ui(x,[p],P)}).then(function(P){return P.numFailures?ze.reject(P.failures[0]):void 0})})},fr.prototype.clear=function(){var p=this;return this._trans("readwrite",function(x){return p.core.mutate({trans:x,type:"deleteRange",range:si}).then(function(A){return Ui(p,null,A)})}).then(function(x){return x.numFailures?ze.reject(x.failures[0]):void 0})},fr.prototype.bulkGet=function(p){var x=this;return this._trans("readonly",function(A){return x.core.getMany({keys:p,trans:A}).then(function(P){return P.map(function(M){return x.hook.reading.fire(M)})})})},fr.prototype.bulkAdd=function(p,x,A){var P=this,M=Array.isArray(x)?x:void 0,N=(A=A||(M?void 0:x))?A.allKeys:void 0;return this._trans("readwrite",function(G){var X=P.schema.primKey,fe=X.auto,X=X.keyPath;if(X&&M)throw new Se.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(M&&M.length!==p.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");var ae=p.length,fe=X&&fe?p.map(Wt(X)):p;return P.core.mutate({trans:G,type:"add",keys:M,values:fe,wantResults:N}).then(function(se){var ne=se.numFailures,le=se.failures;if(ne===0)return N?se.results:se.lastResult;throw new je("".concat(P.name,".bulkAdd(): ").concat(ne," of ").concat(ae," operations failed"),le)})})},fr.prototype.bulkPut=function(p,x,A){var P=this,M=Array.isArray(x)?x:void 0,N=(A=A||(M?void 0:x))?A.allKeys:void 0;return this._trans("readwrite",function(G){var X=P.schema.primKey,fe=X.auto,X=X.keyPath;if(X&&M)throw new Se.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(M&&M.length!==p.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");var ae=p.length,fe=X&&fe?p.map(Wt(X)):p;return P.core.mutate({trans:G,type:"put",keys:M,values:fe,wantResults:N}).then(function(se){var ne=se.numFailures,le=se.failures;if(ne===0)return N?se.results:se.lastResult;throw new je("".concat(P.name,".bulkPut(): ").concat(ne," of ").concat(ae," operations failed"),le)})})},fr.prototype.bulkUpdate=function(p){var x=this,A=this.core,P=p.map(function(G){return G.key}),M=p.map(function(G){return G.changes}),N=[];return this._trans("readwrite",function(G){return A.getMany({trans:G,keys:P,cache:"clone"}).then(function(X){var ae=[],fe=[],se=(p.forEach(function(ne,le){var ee=ne.key,J=ne.changes,Z=X[le];if(Z){for(var xe=0,Ee=Object.keys(J);xe<Ee.length;xe++){var pe=Ee[xe],De=J[pe];if(pe===x.schema.primKey.keyPath){if(Rt(De,ee)!==0)throw new Se.Constraint("Cannot update primary key in bulkUpdate()")}else F(Z,pe,De)}N.push(le),ae.push(ee),fe.push(Z)}}),ae.length);return A.mutate({trans:G,type:"put",keys:ae,values:fe,updates:{keys:P,changeSpecs:M}}).then(function(ne){var le=ne.numFailures,ee=ne.failures;if(le===0)return se;for(var J=0,Z=Object.keys(ee);J<Z.length;J++){var xe,Ee=Z[J],pe=N[Number(Ee)];pe!=null&&(xe=ee[Ee],delete ee[Ee],ee[pe]=xe)}throw new je("".concat(x.name,".bulkUpdate(): ").concat(le," of ").concat(se," operations failed"),ee)})})})},fr.prototype.bulkDelete=function(p){var x=this,A=p.length;return this._trans("readwrite",function(P){return x.core.mutate({trans:P,type:"delete",keys:p}).then(function(M){return Ui(x,p,M)})}).then(function(P){var M=P.numFailures,N=P.failures;if(M===0)return P.lastResult;throw new je("".concat(x.name,".bulkDelete(): ").concat(M," of ").concat(A," operations failed"),N)})};var Ko=fr;function fr(){}function Bs(p){function x(G,X){if(X){for(var ae=arguments.length,fe=new Array(ae-1);--ae;)fe[ae-1]=arguments[ae];return A[G].subscribe.apply(null,fe),p}if(typeof G=="string")return A[G]}var A={};x.addEventType=N;for(var P=1,M=arguments.length;P<M;++P)N(arguments[P]);return x;function N(G,X,ae){var fe,se;if(typeof G!="object")return X=X||Li,se={subscribers:[],fire:ae=ae||Qe,subscribe:function(ne){se.subscribers.indexOf(ne)===-1&&(se.subscribers.push(ne),se.fire=X(se.fire,ne))},unsubscribe:function(ne){se.subscribers=se.subscribers.filter(function(le){return le!==ne}),se.fire=se.subscribers.reduce(X,ae)}},A[G]=x[G]=se;c(fe=G).forEach(function(ne){var le=fe[ne];if(f(le))N(ne,fe[ne][0],fe[ne][1]);else{if(le!=="asap")throw new Se.InvalidArgument("Invalid event config");var ee=N(ne,gt,function(){for(var J=arguments.length,Z=new Array(J);J--;)Z[J]=arguments[J];ee.subscribers.forEach(function(xe){K(function(){xe.apply(null,Z)})})})}})}}function Us(p,x){return R(x).from({prototype:p}),x}function rn(p,x){return!(p.filter||p.algorithm||p.or)&&(x?p.justLimit:!p.replayFilter)}function za(p,x){p.filter=Vn(p.filter,x)}function ho(p,x,A){var P=p.replayFilter;p.replayFilter=P?function(){return Vn(P(),x())}:x,p.justLimit=A&&!P}function Yo(p,x){if(p.isPrimKey)return x.primaryKey;var A=x.getIndexByKeyPath(p.index);if(A)return A;throw new Se.Schema("KeyPath "+p.index+" on object store "+x.name+" is not indexed")}function Qo(p,x,A){var P=Yo(p,x.schema);return x.openCursor({trans:A,values:!p.keysOnly,reverse:p.dir==="prev",unique:!!p.unique,query:{index:P,range:p.range}})}function $t(p,x,A,P){var M,N,G=p.replayFilter?Vn(p.filter,p.replayFilter()):p.filter;return p.or?(M={},N=function(X,ae,fe){var se,ne;G&&!G(ae,fe,function(le){return ae.stop(le)},function(le){return ae.fail(le)})||((ne=""+(se=ae.primaryKey))=="[object ArrayBuffer]"&&(ne=""+new Uint8Array(se)),d(M,ne))||(M[ne]=!0,x(X,ae,fe))},Promise.all([p.or._iterate(N,A),Zo(Qo(p,P,A),p.algorithm,N,!p.keysOnly&&p.valueMapper)])):Zo(Qo(p,P,A),Vn(p.algorithm,G),x,!p.keysOnly&&p.valueMapper)}function Zo(p,x,A,P){var M=qt(P?function(N,G,X){return A(P(N),G,X)}:A);return p.then(function(N){if(N)return N.start(function(){var G=function(){return N.continue()};x&&!x(N,function(X){return G=X},function(X){N.stop(X),G=Qe},function(X){N.fail(X),G=Qe})||M(N.value,N,function(X){return G=X}),G()})})}Xt.prototype._read=function(p,x){var A=this._ctx;return A.error?A.table._trans(null,Or.bind(null,A.error)):A.table._trans("readonly",p).then(x)},Xt.prototype._write=function(p){var x=this._ctx;return x.error?x.table._trans(null,Or.bind(null,x.error)):x.table._trans("readwrite",p,"locked")},Xt.prototype._addAlgorithm=function(p){var x=this._ctx;x.algorithm=Vn(x.algorithm,p)},Xt.prototype._iterate=function(p,x){return $t(this._ctx,p,x,this._ctx.table.core)},Xt.prototype.clone=function(p){var x=Object.create(this.constructor.prototype),A=Object.create(this._ctx);return p&&m(A,p),x._ctx=A,x},Xt.prototype.raw=function(){return this._ctx.valueMapper=null,this},Xt.prototype.each=function(p){var x=this._ctx;return this._read(function(A){return $t(x,p,A,x.table.core)})},Xt.prototype.count=function(p){var x=this;return this._read(function(A){var P,M=x._ctx,N=M.table.core;return rn(M,!0)?N.count({trans:A,query:{index:Yo(M,N.schema),range:M.range}}).then(function(G){return Math.min(G,M.limit)}):(P=0,$t(M,function(){return++P,!1},A,N).then(function(){return P}))}).then(p)},Xt.prototype.sortBy=function(p,x){var A=p.split(".").reverse(),P=A[0],M=A.length-1;function N(ae,fe){return fe?N(ae[A[fe]],fe-1):ae[P]}var G=this._ctx.dir==="next"?1:-1;function X(ae,fe){return Rt(N(ae,M),N(fe,M))*G}return this.toArray(function(ae){return ae.sort(X)}).then(x)},Xt.prototype.toArray=function(p){var x=this;return this._read(function(A){var P,M,N,G=x._ctx;return G.dir==="next"&&rn(G,!0)&&0<G.limit?(P=G.valueMapper,M=Yo(G,G.table.core.schema),G.table.core.query({trans:A,limit:G.limit,values:!0,query:{index:M,range:G.range}}).then(function(X){return X=X.result,P?X.map(P):X})):(N=[],$t(G,function(X){return N.push(X)},A,G.table.core).then(function(){return N}))},p)},Xt.prototype.offset=function(p){var x=this._ctx;return p<=0||(x.offset+=p,rn(x)?ho(x,function(){var A=p;return function(P,M){return A===0||(A===1?--A:M(function(){P.advance(A),A=0}),!1)}}):ho(x,function(){var A=p;return function(){return--A<0}})),this},Xt.prototype.limit=function(p){return this._ctx.limit=Math.min(this._ctx.limit,p),ho(this._ctx,function(){var x=p;return function(A,P,M){return--x<=0&&P(M),0<=x}},!0),this},Xt.prototype.until=function(p,x){return za(this._ctx,function(A,P,M){return!p(A.value)||(P(M),x)}),this},Xt.prototype.first=function(p){return this.limit(1).toArray(function(x){return x[0]}).then(p)},Xt.prototype.last=function(p){return this.reverse().first(p)},Xt.prototype.filter=function(p){var x;return za(this._ctx,function(A){return p(A.value)}),(x=this._ctx).isMatch=Vn(x.isMatch,p),this},Xt.prototype.and=function(p){return this.filter(p)},Xt.prototype.or=function(p){return new this.db.WhereClause(this._ctx.table,p,this)},Xt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Xt.prototype.desc=function(){return this.reverse()},Xt.prototype.eachKey=function(p){var x=this._ctx;return x.keysOnly=!x.isMatch,this.each(function(A,P){p(P.key,P)})},Xt.prototype.eachUniqueKey=function(p){return this._ctx.unique="unique",this.eachKey(p)},Xt.prototype.eachPrimaryKey=function(p){var x=this._ctx;return x.keysOnly=!x.isMatch,this.each(function(A,P){p(P.primaryKey,P)})},Xt.prototype.keys=function(p){var x=this._ctx,A=(x.keysOnly=!x.isMatch,[]);return this.each(function(P,M){A.push(M.key)}).then(function(){return A}).then(p)},Xt.prototype.primaryKeys=function(p){var x=this._ctx;if(x.dir==="next"&&rn(x,!0)&&0<x.limit)return this._read(function(P){var M=Yo(x,x.table.core.schema);return x.table.core.query({trans:P,values:!1,limit:x.limit,query:{index:M,range:x.range}})}).then(function(P){return P.result}).then(p);x.keysOnly=!x.isMatch;var A=[];return this.each(function(P,M){A.push(M.primaryKey)}).then(function(){return A}).then(p)},Xt.prototype.uniqueKeys=function(p){return this._ctx.unique="unique",this.keys(p)},Xt.prototype.firstKey=function(p){return this.limit(1).keys(function(x){return x[0]}).then(p)},Xt.prototype.lastKey=function(p){return this.reverse().firstKey(p)},Xt.prototype.distinct=function(){var p,x=this._ctx,x=x.index&&x.table.schema.idxByName[x.index];return x&&x.multi&&(p={},za(this._ctx,function(P){var P=P.primaryKey.toString(),M=d(p,P);return p[P]=!0,!M})),this},Xt.prototype.modify=function(p){var x=this,A=this._ctx;return this._write(function(P){function M(Z,xe){var Ee=xe.failures;le+=Z-xe.numFailures;for(var pe=0,De=c(Ee);pe<De.length;pe++){var Ne=De[pe];ne.push(Ee[Ne])}}var N=typeof p=="function"?p:function(Z){return Fs(Z,p)},G=A.table.core,se=G.schema.primaryKey,X=se.outbound,ae=se.extractKey,fe=200,se=x.db._options.modifyChunkSize,ne=(se&&(fe=typeof se=="object"?se[G.name]||se["*"]||200:se),[]),le=0,ee=[],J=p===Sl;return x.clone().primaryKeys().then(function(Z){function xe(pe){var De=Math.min(fe,Z.length-pe),Ne=Z.slice(pe,pe+De);return(J?Promise.resolve([]):G.getMany({trans:P,keys:Ne,cache:"immutable"})).then(function(Je){var rt=[],He=[],st=X?[]:null,et=J?Ne:[];if(!J)for(var Xe=0;Xe<De;++Xe){var ut=Je[Xe],Vt={value:ve(ut),primKey:Z[pe+Xe]};N.call(Vt,Vt.value,Vt)!==!1&&(Vt.value==null?et.push(Z[pe+Xe]):X||Rt(ae(ut),ae(Vt.value))===0?(He.push(Vt.value),X&&st.push(Z[pe+Xe])):(et.push(Z[pe+Xe]),rt.push(Vt.value)))}return Promise.resolve(0<rt.length&&G.mutate({trans:P,type:"add",values:rt}).then(function(Yt){for(var At in Yt.failures)et.splice(parseInt(At),1);M(rt.length,Yt)})).then(function(){return(0<He.length||Ee&&typeof p=="object")&&G.mutate({trans:P,type:"put",keys:st,values:He,criteria:Ee,changeSpec:typeof p!="function"&&p,isAdditionalChunk:0<pe}).then(function(Yt){return M(He.length,Yt)})}).then(function(){return(0<et.length||Ee&&J)&&G.mutate({trans:P,type:"delete",keys:et,criteria:Ee,isAdditionalChunk:0<pe}).then(function(Yt){return Ui(A.table,et,Yt)}).then(function(Yt){return M(et.length,Yt)})}).then(function(){return Z.length>pe+De&&xe(pe+fe)})})}var Ee=rn(A)&&A.limit===1/0&&(typeof p!="function"||J)&&{index:A.index,range:A.range};return xe(0).then(function(){if(0<ne.length)throw new Fe("Error modifying one or more objects",ne,le,ee);return Z.length})})})},Xt.prototype.delete=function(){var p=this._ctx,x=p.range;return!rn(p)||p.table.schema.yProps||!p.isPrimKey&&x.type!==3?this.modify(Sl):this._write(function(A){var P=p.table.core.schema.primaryKey,M=x;return p.table.core.count({trans:A,query:{index:P,range:M}}).then(function(N){return p.table.core.mutate({trans:A,type:"deleteRange",range:M}).then(function(ae){var X=ae.failures,ae=ae.numFailures;if(ae)throw new Fe("Could not delete some values",Object.keys(X).map(function(fe){return X[fe]}),N-ae);return N-ae})})})};var fc=Xt;function Xt(){}var Sl=function(p,x){return x.value=null};function El(p,x){return p<x?-1:p===x?0:1}function Jo(p,x){return x<p?-1:p===x?0:1}function nn(p,x,A){return p=p instanceof ea?new p.Collection(p):p,p._ctx.error=new(A||TypeError)(x),p}function Ut(p){return new p.Collection(p,function(){return Gi("")}).limit(0)}function oi(ee,x,A,P){var M,N,G,X,ae,fe,se,ne=A.length;if(!A.every(function(Z){return typeof Z=="string"}))return nn(ee,Xo);function le(Z){M=Z==="next"?function(Ee){return Ee.toUpperCase()}:function(Ee){return Ee.toLowerCase()},N=Z==="next"?function(Ee){return Ee.toLowerCase()}:function(Ee){return Ee.toUpperCase()},G=Z==="next"?El:Jo;var xe=A.map(function(Ee){return{lower:N(Ee),upper:M(Ee)}}).sort(function(Ee,pe){return G(Ee.lower,pe.lower)});X=xe.map(function(Ee){return Ee.upper}),ae=xe.map(function(Ee){return Ee.lower}),se=(fe=Z)==="next"?"":P}le("next");var ee=new ee.Collection(ee,function(){return sn(X[0],ae[ne-1]+P)}),J=(ee._ondirectionchange=function(Z){le(Z)},0);return ee._addAlgorithm(function(Z,xe,Ee){var pe=Z.key;if(typeof pe=="string"){var De=N(pe);if(x(De,ae,J))return!0;for(var Ne=null,Je=J;Je<ne;++Je){var rt=((He,st,et,Xe,ut,Vt)=>{for(var Yt=Math.min(He.length,Xe.length),At=-1,Ft=0;Ft<Yt;++Ft){var gr=st[Ft];if(gr!==Xe[Ft])return ut(He[Ft],et[Ft])<0?He.substr(0,Ft)+et[Ft]+et.substr(Ft+1):ut(He[Ft],Xe[Ft])<0?He.substr(0,Ft)+Xe[Ft]+et.substr(Ft+1):0<=At?He.substr(0,At)+st[At]+et.substr(At+1):null;ut(He[Ft],gr)<0&&(At=Ft)}return Yt<Xe.length&&Vt==="next"?He+et.substr(He.length):Yt<He.length&&Vt==="prev"?He.substr(0,et.length):At<0?null:He.substr(0,At)+Xe[At]+et.substr(At+1)})(pe,De,X[Je],ae[Je],G,fe);rt===null&&Ne===null?J=Je+1:(Ne===null||0<G(Ne,rt))&&(Ne=rt)}xe(Ne!==null?function(){Z.continue(Ne+se)}:Ee)}return!1}),ee}function sn(p,x,A,P){return{type:2,lower:p,upper:x,lowerOpen:A,upperOpen:P}}function Gi(p){return{type:1,lower:p,upper:p}}Object.defineProperty(Ir.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ir.prototype.between=function(p,x,A,P){A=A!==!1,P=P===!0;try{return 0<this._cmp(p,x)||this._cmp(p,x)===0&&(A||P)&&(!A||!P)?Ut(this):new this.Collection(this,function(){return sn(p,x,!A,!P)})}catch{return nn(this,nr)}},Ir.prototype.equals=function(p){return p==null?nn(this,nr):new this.Collection(this,function(){return Gi(p)})},Ir.prototype.above=function(p){return p==null?nn(this,nr):new this.Collection(this,function(){return sn(p,void 0,!0)})},Ir.prototype.aboveOrEqual=function(p){return p==null?nn(this,nr):new this.Collection(this,function(){return sn(p,void 0,!1)})},Ir.prototype.below=function(p){return p==null?nn(this,nr):new this.Collection(this,function(){return sn(void 0,p,!1,!0)})},Ir.prototype.belowOrEqual=function(p){return p==null?nn(this,nr):new this.Collection(this,function(){return sn(void 0,p)})},Ir.prototype.startsWith=function(p){return typeof p!="string"?nn(this,Xo):this.between(p,p+uo,!0,!0)},Ir.prototype.startsWithIgnoreCase=function(p){return p===""?this.startsWith(p):oi(this,function(x,A){return x.indexOf(A[0])===0},[p],uo)},Ir.prototype.equalsIgnoreCase=function(p){return oi(this,function(x,A){return x===A[0]},[p],"")},Ir.prototype.anyOfIgnoreCase=function(){var p=j.apply(Y,arguments);return p.length===0?Ut(this):oi(this,function(x,A){return A.indexOf(x)!==-1},p,"")},Ir.prototype.startsWithAnyOfIgnoreCase=function(){var p=j.apply(Y,arguments);return p.length===0?Ut(this):oi(this,function(x,A){return A.some(function(P){return x.indexOf(P)===0})},p,uo)},Ir.prototype.anyOf=function(){var p,x,A=this,P=j.apply(Y,arguments),M=this._cmp;try{P.sort(M)}catch{return nn(this,nr)}return P.length===0?Ut(this):((p=new this.Collection(this,function(){return sn(P[0],P[P.length-1])}))._ondirectionchange=function(N){M=N==="next"?A._ascending:A._descending,P.sort(M)},x=0,p._addAlgorithm(function(N,G,X){for(var ae=N.key;0<M(ae,P[x]);)if(++x===P.length)return G(X),!1;return M(ae,P[x])===0||(G(function(){N.continue(P[x])}),!1)}),p)},Ir.prototype.notEqual=function(p){return this.inAnyRange([[-1/0,p],[p,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ir.prototype.noneOf=function(){var p=j.apply(Y,arguments);if(p.length===0)return new this.Collection(this);try{p.sort(this._ascending)}catch{return nn(this,nr)}var x=p.reduce(function(A,P){return A?A.concat([[A[A.length-1][1],P]]):[[-1/0,P]]},null);return x.push([p[p.length-1],this.db._maxKey]),this.inAnyRange(x,{includeLowers:!1,includeUppers:!1})},Ir.prototype.inAnyRange=function(p,Ee){var A=this,P=this._cmp,M=this._ascending,N=this._descending,G=this._min,X=this._max;if(p.length===0)return Ut(this);if(!p.every(function(pe){return pe[0]!==void 0&&pe[1]!==void 0&&M(pe[0],pe[1])<=0}))return nn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Se.InvalidArgument);var ae=!Ee||Ee.includeLowers!==!1,fe=Ee&&Ee.includeUppers===!0,se,ne=M;function le(pe,De){return ne(pe[0],De[0])}try{(se=p.reduce(function(pe,De){for(var Ne=0,Je=pe.length;Ne<Je;++Ne){var rt=pe[Ne];if(P(De[0],rt[1])<0&&0<P(De[1],rt[0])){rt[0]=G(rt[0],De[0]),rt[1]=X(rt[1],De[1]);break}}return Ne===Je&&pe.push(De),pe},[])).sort(le)}catch{return nn(this,nr)}var ee=0,J=fe?function(pe){return 0<M(pe,se[ee][1])}:function(pe){return 0<=M(pe,se[ee][1])},Z=ae?function(pe){return 0<N(pe,se[ee][0])}:function(pe){return 0<=N(pe,se[ee][0])},xe=J,Ee=new this.Collection(this,function(){return sn(se[0][0],se[se.length-1][1],!ae,!fe)});return Ee._ondirectionchange=function(pe){ne=pe==="next"?(xe=J,M):(xe=Z,N),se.sort(le)},Ee._addAlgorithm(function(pe,De,Ne){for(var Je,rt=pe.key;xe(rt);)if(++ee===se.length)return De(Ne),!1;return!J(Je=rt)&&!Z(Je)||(A._cmp(rt,se[ee][1])===0||A._cmp(rt,se[ee][0])===0||De(function(){ne===M?pe.continue(se[ee][0]):pe.continue(se[ee][1])}),!1)}),Ee},Ir.prototype.startsWithAnyOf=function(){var p=j.apply(Y,arguments);return p.every(function(x){return typeof x=="string"})?p.length===0?Ut(this):this.inAnyRange(p.map(function(x){return[x,x+uo]})):nn(this,"startsWithAnyOf() only works with strings")};var ea=Ir;function Ir(){}function Kt(p){return qt(function(x){return fo(x),p(x.target.error),!1})}function fo(p){p.stopPropagation&&p.stopPropagation(),p.preventDefault&&p.preventDefault()}var ta="storagemutated",Gs="x-storagemutated-1",js=Bs(null,ta),Ha=(Pr.prototype._lock=function(){return te(!re.global),++this._reculock,this._reculock!==1||re.global||(re.lockOwnerFor=this),this},Pr.prototype._unlock=function(){if(te(!re.global),--this._reculock==0)for(re.global||(re.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var p=this._blockedFuncs.shift();try{Hn(p[1],p[0])}catch{}}return this},Pr.prototype._locked=function(){return this._reculock&&re.lockOwnerFor!==this},Pr.prototype.create=function(p){var x=this;if(this.mode){var A=this.db.idbdb,P=this.db._state.dbOpenError;if(te(!this.idbtrans),!p&&!A)switch(P&&P.name){case"DatabaseClosedError":throw new Se.DatabaseClosed(P);case"MissingAPIError":throw new Se.MissingAPI(P.message,P);default:throw new Se.OpenFailed(P)}if(!this.active)throw new Se.TransactionInactive;te(this._completion._state===null),(p=this.idbtrans=p||(this.db.core||A).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=qt(function(M){fo(M),x._reject(p.error)}),p.onabort=qt(function(M){fo(M),x.active&&x._reject(new Se.Abort(p.error)),x.active=!1,x.on("abort").fire(M)}),p.oncomplete=qt(function(){x.active=!1,x._resolve(),"mutatedParts"in p&&js.storagemutated.fire(p.mutatedParts)})}return this},Pr.prototype._promise=function(p,x,A){var P,M=this;return p==="readwrite"&&this.mode!=="readwrite"?Or(new Se.ReadOnly("Transaction is readonly")):this.active?this._locked()?new ze(function(N,G){M._blockedFuncs.push([function(){M._promise(p,x,A).then(N,G)},re])}):A?ni(function(){var N=new ze(function(G,X){M._lock();var ae=x(G,X,M);ae&&ae.then&&ae.then(G,X)});return N.finally(function(){return M._unlock()}),N._lib=!0,N}):((P=new ze(function(N,G){var X=x(N,G,M);X&&X.then&&X.then(N,G)}))._lib=!0,P):Or(new Se.TransactionInactive)},Pr.prototype._root=function(){return this.parent?this.parent._root():this},Pr.prototype.waitFor=function(p){var x,A=this._root(),P=ze.resolve(p),M=(A._waitingFor?A._waitingFor=A._waitingFor.then(function(){return P}):(A._waitingFor=P,A._waitingQueue=[],x=A.idbtrans.objectStore(A.storeNames[0]),(function N(){for(++A._spinCount;A._waitingQueue.length;)A._waitingQueue.shift()();A._waitingFor&&(x.get(-1/0).onsuccess=N)})()),A._waitingFor);return new ze(function(N,G){P.then(function(X){return A._waitingQueue.push(qt(N.bind(null,X)))},function(X){return A._waitingQueue.push(qt(G.bind(null,X)))}).finally(function(){A._waitingFor===M&&(A._waitingFor=null)})})},Pr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Se.Abort))},Pr.prototype.table=function(p){var x=this._memoizedTables||(this._memoizedTables={});if(d(x,p))return x[p];var A=this.schema[p];if(A)return(A=new this.db.Table(p,A,this)).core=this.db.core.table(p),x[p]=A;throw new Se.NotFound("Table "+p+" not part of transaction")},Pr);function Pr(){}function Pn(p,x,A,P,M,N,G,X){return{name:p,keyPath:x,unique:A,multi:P,auto:M,compound:N,src:(A&&!G?"&":"")+(P?"*":"")+(M?"++":"")+ji(x),type:X}}function ji(p){return typeof p=="string"?p:p?"["+[].join.call(p,"+")+"]":""}function zi(p,x,A){return{name:p,primKey:x,indexes:A,mappedClass:null,idxByName:(P=function(M){return[M.name,M]},A.reduce(function(M,N,G){return N=P(N,G),N&&(M[N[0]]=N[1]),M},{}))};var P}var Ei=function(p){try{return p.only([[]]),Ei=function(){return[[]]},[[]]}catch{return Ei=function(){return uo},uo}};function _s(p){return p==null?function(){}:typeof p=="string"?(x=p).split(".").length===1?function(A){return A[x]}:function(A){return de(A,x)}:function(A){return de(A,p)};var x}function Rn(p){return[].slice.call(p)}var ra=0;function Hi(p){return p==null?":id":typeof p=="string"?p:"[".concat(p.join("+"),"]")}function na(p,x,ae){function P(J){if(J.type===3)return null;if(J.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var ne=J.lower,le=J.upper,ee=J.lowerOpen,J=J.upperOpen;return ne===void 0?le===void 0?null:x.upperBound(le,!!J):le===void 0?x.lowerBound(ne,!!ee):x.bound(ne,le,!!ee,!!J)}function M(se){var ne,le=se.name;return{name:le,schema:se,mutate:function(ee){var J=ee.trans,Z=ee.type,xe=ee.keys,Ee=ee.values,pe=ee.range;return new Promise(function(De,Ne){De=qt(De);var Je=J.objectStore(le),rt=Je.keyPath==null,He=Z==="put"||Z==="add";if(!He&&Z!=="delete"&&Z!=="deleteRange")throw new Error("Invalid operation type: "+Z);var st,et=(xe||Ee||{length:1}).length;if(xe&&Ee&&xe.length!==Ee.length)throw new Error("Given keys array must have same length as given values array.");if(et===0)return De({numFailures:0,failures:{},results:[],lastResult:void 0});function Xe(rr){++Yt,fo(rr)}var ut=[],Vt=[],Yt=0;if(Z==="deleteRange"){if(pe.type===4)return De({numFailures:Yt,failures:Vt,results:[],lastResult:void 0});pe.type===3?ut.push(st=Je.clear()):ut.push(st=Je.delete(P(pe)))}else{var rt=He?rt?[Ee,xe]:[Ee,null]:[xe,null],At=rt[0],Ft=rt[1];if(He)for(var gr=0;gr<et;++gr)ut.push(st=Ft&&Ft[gr]!==void 0?Je[Z](At[gr],Ft[gr]):Je[Z](At[gr])),st.onerror=Xe;else for(gr=0;gr<et;++gr)ut.push(st=Je[Z](At[gr])),st.onerror=Xe}function Mn(rr){rr=rr.target.result,ut.forEach(function(Zi,da){return Zi.error!=null&&(Vt[da]=Zi.error)}),De({numFailures:Yt,failures:Vt,results:Z==="delete"?xe:ut.map(function(Zi){return Zi.result}),lastResult:rr})}st.onerror=function(rr){Xe(rr),Mn(rr)},st.onsuccess=Mn})},getMany:function(ee){var J=ee.trans,Z=ee.keys;return new Promise(function(xe,Ee){xe=qt(xe);for(var pe,De=J.objectStore(le),Ne=Z.length,Je=new Array(Ne),rt=0,He=0,st=function(ut){ut=ut.target,Je[ut._pos]=ut.result,++He===rt&&xe(Je)},et=Kt(Ee),Xe=0;Xe<Ne;++Xe)Z[Xe]!=null&&((pe=De.get(Z[Xe]))._pos=Xe,pe.onsuccess=st,pe.onerror=et,++rt);rt===0&&xe(Je)})},get:function(ee){var J=ee.trans,Z=ee.key;return new Promise(function(xe,Ee){xe=qt(xe);var pe=J.objectStore(le).get(Z);pe.onsuccess=function(De){return xe(De.target.result)},pe.onerror=Kt(Ee)})},query:(ne=X,function(ee){return new Promise(function(J,Z){J=qt(J);var xe,Ee,pe,He=ee.trans,De=ee.values,Ne=ee.limit,rt=ee.query,Je=Ne===1/0?void 0:Ne,st=rt.index,rt=rt.range,He=He.objectStore(le),He=st.isPrimaryKey?He:He.index(st.name),st=P(rt);if(Ne===0)return J({result:[]});ne?((rt=De?He.getAll(st,Je):He.getAllKeys(st,Je)).onsuccess=function(et){return J({result:et.target.result})},rt.onerror=Kt(Z)):(xe=0,Ee=!De&&"openKeyCursor"in He?He.openKeyCursor(st):He.openCursor(st),pe=[],Ee.onsuccess=function(et){var Xe=Ee.result;return!Xe||(pe.push(De?Xe.value:Xe.primaryKey),++xe===Ne)?J({result:pe}):void Xe.continue()},Ee.onerror=Kt(Z))})}),openCursor:function(ee){var J=ee.trans,Z=ee.values,xe=ee.query,Ee=ee.reverse,pe=ee.unique;return new Promise(function(De,Ne){De=qt(De);var He=xe.index,Je=xe.range,rt=J.objectStore(le),rt=He.isPrimaryKey?rt:rt.index(He.name),He=Ee?pe?"prevunique":"prev":pe?"nextunique":"next",st=!Z&&"openKeyCursor"in rt?rt.openKeyCursor(P(Je),He):rt.openCursor(P(Je),He);st.onerror=Kt(Ne),st.onsuccess=qt(function(et){var Xe,ut,Vt,Yt,At=st.result;At?(At.___id=++ra,At.done=!1,Xe=At.continue.bind(At),ut=(ut=At.continuePrimaryKey)&&ut.bind(At),Vt=At.advance.bind(At),Yt=function(){throw new Error("Cursor not stopped")},At.trans=J,At.stop=At.continue=At.continuePrimaryKey=At.advance=function(){throw new Error("Cursor not started")},At.fail=qt(Ne),At.next=function(){var Ft=this,gr=1;return this.start(function(){return gr--?Ft.continue():Ft.stop()}).then(function(){return Ft})},At.start=function(Ft){function gr(){if(st.result)try{Ft()}catch(rr){At.fail(rr)}else At.done=!0,At.start=function(){throw new Error("Cursor behind last entry")},At.stop()}var Mn=new Promise(function(rr,Zi){rr=qt(rr),st.onerror=Kt(Zi),At.fail=Zi,At.stop=function(da){At.stop=At.continue=At.continuePrimaryKey=At.advance=Yt,rr(da)}});return st.onsuccess=qt(function(rr){st.onsuccess=gr,gr()}),At.continue=Xe,At.continuePrimaryKey=ut,At.advance=Vt,gr(),Mn},De(At)):De(null)},Ne)})},count:function(ee){var J=ee.query,Z=ee.trans,xe=J.index,Ee=J.range;return new Promise(function(pe,De){var Ne=Z.objectStore(le),Ne=xe.isPrimaryKey?Ne:Ne.index(xe.name),Je=P(Ee),Je=Je?Ne.count(Je):Ne.count();Je.onsuccess=qt(function(rt){return pe(rt.target.result)}),Je.onerror=Kt(De)})}}}N=ae,G=Rn((ae=p).objectStoreNames);var N,ae={schema:{name:ae.name,tables:G.map(function(se){return N.objectStore(se)}).map(function(se){var ne=se.keyPath,le=se.autoIncrement,J=f(ne),ee={},J={name:se.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:ne==null,compound:J,keyPath:ne,autoIncrement:le,unique:!0,extractKey:_s(ne)},indexes:Rn(se.indexNames).map(function(Z){return se.index(Z)}).map(function(pe){var De=pe.name,xe=pe.unique,Ee=pe.multiEntry,pe=pe.keyPath,De={name:De,compound:f(pe),keyPath:pe,unique:xe,multiEntry:Ee,extractKey:_s(pe)};return ee[Hi(pe)]=De}),getIndexByKeyPath:function(Z){return ee[Hi(Z)]}};return ee[":id"]=J.primaryKey,ne!=null&&(ee[Hi(ne)]=J.primaryKey),J})},hasGetAll:0<G.length&&"getAll"in N.objectStore(G[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},G=ae.schema,X=ae.hasGetAll,ae=G.tables.map(M),fe={};return ae.forEach(function(se){return fe[se.name]=se}),{stack:"dbcore",transaction:p.transaction.bind(p),table:function(se){if(fe[se])return fe[se];throw new Error("Table '".concat(se,"' not found"))},MIN_KEY:-1/0,MAX_KEY:Ei(x),schema:G}}function po(p,x,A,P){return A=A.IDBKeyRange,x=na(x,A,P),{dbcore:p.dbcore.reduce(function(M,N){return N=N.create,r(r({},M),N(M))},x)}}function on(p,x){var A=x.db,A=po(p._middlewares,A,p._deps,x);p.core=A.dbcore,p.tables.forEach(function(P){var M=P.name;p.core.schema.tables.some(function(N){return N.name===M})&&(P.core=p.core.table(M),p[M]instanceof p.Table)&&(p[M].core=P.core)})}function gn(p,x,A,P){A.forEach(function(M){var N=P[M];x.forEach(function(G){var X=(function ae(fe,se){return k(fe,se)||(fe=_(fe))&&ae(fe,se)})(G,M);(!X||"value"in X&&X.value===void 0)&&(G===p.Transaction.prototype||G instanceof p.Transaction?T(G,M,{get:function(){return this.table(M)},set:function(ae){b(this,M,{value:ae,writable:!0,configurable:!0,enumerable:!0})}}):G[M]=new p.Table(M,N))})})}function yn(p,x){x.forEach(function(A){for(var P in A)A[P]instanceof p.Table&&delete A[P]})}function ai(p,x){return p._cfg.version-x._cfg.version}function li(p,x,A,P){var M=p._dbSchema,N=(A.objectStoreNames.contains("$meta")&&!M.$meta&&(M.$meta=zi("$meta",Vi("")[0],[]),p._storeNames.push("$meta")),p._createTransaction("readwrite",p._storeNames,M)),G=(N.create(A),N._completion.catch(P),N._reject.bind(N)),X=re.transless||re;ni(function(){if(re.trans=N,re.transless=X,x!==0)return on(p,A),fe=x,((ae=N).storeNames.includes("$meta")?ae.table("$meta").get("version").then(function(se){return se??fe}):ze.resolve(fe)).then(function(xe){var ne=p,le=xe,ee=N,J=A,Z=[],xe=ne._versions,Ee=ne._dbSchema=Fr(0,ne.idbdb,J);return(xe=xe.filter(function(pe){return pe._cfg.version>=le})).length===0?ze.resolve():(xe.forEach(function(pe){Z.push(function(){var De,Ne,Je,rt=Ee,He=pe._cfg.dbschema,st=(ir(ne,rt,J),ir(ne,He,J),Ee=ne._dbSchema=He,mo(rt,He)),et=(st.add.forEach(function(Xe){Hs(J,Xe[0],Xe[1].primKey,Xe[1].indexes)}),st.change.forEach(function(Xe){if(Xe.recreate)throw new Se.Upgrade("Not yet support for changing primary key");var ut=J.objectStore(Xe.name);Xe.add.forEach(function(Vt){return lr(ut,Vt)}),Xe.change.forEach(function(Vt){ut.deleteIndex(Vt.name),lr(ut,Vt)}),Xe.del.forEach(function(Vt){return ut.deleteIndex(Vt)})}),pe._cfg.contentUpgrade);if(et&&pe._cfg.version>le)return on(ne,J),ee._memoizedTables={},De=ie(He),st.del.forEach(function(Xe){De[Xe]=rt[Xe]}),yn(ne,[ne.Transaction.prototype]),gn(ne,[ne.Transaction.prototype],c(De),De),ee.schema=De,(Ne=U(et))&&vs(),He=ze.follow(function(){var Xe;(Je=et(ee))&&Ne&&(Xe=Xr.bind(null,null),Je.then(Xe,Xe))}),Je&&typeof Je.then=="function"?ze.resolve(Je):He.then(function(){return Je})}),Z.push(function(De){var Ne,Je,rt=pe._cfg.dbschema;Ne=rt,Je=De,[].slice.call(Je.db.objectStoreNames).forEach(function(He){return Ne[He]==null&&Je.db.deleteObjectStore(He)}),yn(ne,[ne.Transaction.prototype]),gn(ne,[ne.Transaction.prototype],ne._storeNames,ne._dbSchema),ee.schema=ne._dbSchema}),Z.push(function(De){ne.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(ne.idbdb.version/10)===pe._cfg.version?(ne.idbdb.deleteObjectStore("$meta"),delete ne._dbSchema.$meta,ne._storeNames=ne._storeNames.filter(function(Ne){return Ne!=="$meta"})):De.objectStore("$meta").put(pe._cfg.version,"version"))})}),(function pe(){return Z.length?ze.resolve(Z.shift()(ee.idbtrans)).then(pe):ze.resolve()})().then(function(){Va(Ee,J)}))}).catch(G);var ae,fe;c(M).forEach(function(se){Hs(A,se,M[se].primKey,M[se].indexes)}),on(p,A),ze.follow(function(){return p.on.populate.fire(N)}).catch(G)})}function zs(p,x){Va(p._dbSchema,x),x.db.version%10!=0||x.objectStoreNames.contains("$meta")||x.db.createObjectStore("$meta").add(Math.ceil(x.db.version/10-1),"version");var A=Fr(0,p.idbdb,x);ir(p,p._dbSchema,x);for(var P=0,M=mo(A,p._dbSchema).change;P<M.length;P++){var N=(G=>{if(G.change.length||G.recreate)return console.warn("Unable to patch indexes of table ".concat(G.name," because it has changes on the type of index or primary key.")),{value:void 0};var X=x.objectStore(G.name);G.add.forEach(function(ae){hr&&console.debug("Dexie upgrade patch: Creating missing index ".concat(G.name,".").concat(ae.src)),lr(X,ae)})})(M[P]);if(typeof N=="object")return N.value}}function mo(p,x){var A,P={del:[],add:[],change:[]};for(A in p)x[A]||P.del.push(A);for(A in x){var M=p[A],N=x[A];if(M){var G={name:A,def:N,recreate:!1,del:[],add:[],change:[]};if(""+(M.primKey.keyPath||"")!=""+(N.primKey.keyPath||"")||M.primKey.auto!==N.primKey.auto)G.recreate=!0,P.change.push(G);else{var X=M.idxByName,ae=N.idxByName,fe=void 0;for(fe in X)ae[fe]||G.del.push(fe);for(fe in ae){var se=X[fe],ne=ae[fe];se?se.src!==ne.src&&G.change.push(ne):G.add.push(ne)}(0<G.del.length||0<G.add.length||0<G.change.length)&&P.change.push(G)}}else P.add.push([A,N])}return P}function Hs(p,x,A,P){var M=p.db.createObjectStore(x,A.keyPath?{keyPath:A.keyPath,autoIncrement:A.auto}:{autoIncrement:A.auto});P.forEach(function(N){return lr(M,N)})}function Va(p,x){c(p).forEach(function(A){x.db.objectStoreNames.contains(A)||(hr&&console.debug("Dexie: Creating missing table",A),Hs(x,A,p[A].primKey,p[A].indexes))})}function lr(p,x){p.createIndex(x.name,x.keyPath,{unique:x.unique,multiEntry:x.multi})}function Fr(p,x,A){var P={};return W(x.objectStoreNames,0).forEach(function(M){for(var N=A.objectStore(M),G=Pn(ji(fe=N.keyPath),fe||"",!0,!1,!!N.autoIncrement,fe&&typeof fe!="string",!0),X=[],ae=0;ae<N.indexNames.length;++ae){var se=N.index(N.indexNames[ae]),fe=se.keyPath,se=Pn(se.name,fe,!!se.unique,!!se.multiEntry,!1,fe&&typeof fe!="string",!1);X.push(se)}P[M]=zi(M,G,X)}),P}function ir(p,x,A){for(var P=A.db.objectStoreNames,M=0;M<P.length;++M){var N=P[M],G=A.objectStore(N);p._hasGetAll="getAll"in G;for(var X=0;X<G.indexNames.length;++X){var ae,fe=G.indexNames[X],se=G.index(fe).keyPath,se=typeof se=="string"?se:"["+W(se).join("+")+"]";x[N]&&(ae=x[N].idxByName[se])&&(ae.name=fe,delete x[N].idxByName[se],x[N].idxByName[fe]=ae)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(p._hasGetAll=!1)}function Vi(p){return p.split(",").map(function(x,A){var M=x.split(":"),P=(P=M[1])==null?void 0:P.trim(),M=(x=M[0].trim()).replace(/([&*]|\+\+)/g,""),N=/^\[/.test(M)?M.match(/^\[(.*)\]$/)[1].split("+"):M;return Pn(M,N||null,/\&/.test(x),/\*/.test(x),/\+\+/.test(x),f(N),A===0,P)})}xs.prototype._createTableSchema=zi,xs.prototype._parseIndexSyntax=Vi,xs.prototype._parseStoresSpec=function(p,x){var A=this;c(p).forEach(function(P){if(p[P]!==null){var M=A._parseIndexSyntax(p[P]),N=M.shift();if(!N)throw new Se.Schema("Invalid schema for table "+P+": "+p[P]);if(N.unique=!0,N.multi)throw new Se.Schema("Primary key cannot be multiEntry*");M.forEach(function(G){if(G.auto)throw new Se.Schema("Only primary key can be marked as autoIncrement (++)");if(!G.keyPath)throw new Se.Schema("Index must have a name and cannot be an empty string")}),N=A._createTableSchema(P,N,M),x[P]=N}})},xs.prototype.stores=function(A){var x=this.db,A=(this._cfg.storesSource=this._cfg.storesSource?m(this._cfg.storesSource,A):A,x._versions),P={},M={};return A.forEach(function(N){m(P,N._cfg.storesSource),M=N._cfg.dbschema={},N._parseStoresSpec(P,M)}),x._dbSchema=M,yn(x,[x._allTables,x,x.Transaction.prototype]),gn(x,[x._allTables,x,x.Transaction.prototype,this._cfg.tables],c(M),M),x._storeNames=c(M),this},xs.prototype.upgrade=function(p){return this._cfg.contentUpgrade=Nr(this._cfg.contentUpgrade||Qe,p),this};var Ti=xs;function xs(){}function ia(p,x){var A=p._dbNamesDB;return A||(A=p._dbNamesDB=new Yi(co,{addons:[],indexedDB:p,IDBKeyRange:x})).version(1).stores({dbnames:"name"}),A.table("dbnames")}function ws(p){return p&&typeof p.databases=="function"}function Vs(p){return ni(function(){return re.letThrough=!0,p()})}function Wa(p){return!("from"in p)}var zr=function(p,x){var A;if(!this)return A=new zr,p&&"d"in p&&m(A,p),A;m(this,arguments.length?{d:1,from:p,to:1<arguments.length?x:p}:{d:0})};function sa(p,x,A){var P=Rt(x,A);if(!isNaN(P)){if(0<P)throw RangeError();if(Wa(p))return m(p,{from:x,to:A,d:1});var P=p.l,M=p.r;if(Rt(A,p.from)<0)return P?sa(P,x,A):p.l={from:x,to:A,d:1,l:null,r:null},$a(p);if(0<Rt(x,p.to))return M?sa(M,x,A):p.r={from:x,to:A,d:1,l:null,r:null},$a(p);Rt(x,p.from)<0&&(p.from=x,p.l=null,p.d=M?M.d+1:1),0<Rt(A,p.to)&&(p.to=A,p.r=null,p.d=p.l?p.l.d+1:1),x=!p.r,P&&!p.l&&Wi(p,P),M&&x&&Wi(p,M)}}function Wi(p,x){Wa(x)||(function A(P,M){var N=M.from,G=M.l,X=M.r;sa(P,N,M.to),G&&A(P,G),X&&A(P,X)})(p,x)}function oa(p,x){var A=Tl(x),P=A.next();if(!P.done)for(var M=P.value,N=Tl(p),G=N.next(M.from),X=G.value;!P.done&&!G.done;){if(Rt(X.from,M.to)<=0&&0<=Rt(X.to,M.from))return!0;Rt(M.from,X.from)<0?M=(P=A.next(X.from)).value:X=(G=N.next(M.from)).value}return!1}function Tl(p){var x=Wa(p)?null:{s:0,n:p};return{next:function(A){for(var P=0<arguments.length;x;)switch(x.s){case 0:if(x.s=1,P)for(;x.n.l&&Rt(A,x.n.from)<0;)x={up:x,n:x.n.l,s:1};else for(;x.n.l;)x={up:x,n:x.n.l,s:1};case 1:if(x.s=2,!P||Rt(A,x.n.to)<=0)return{value:x.n,done:!1};case 2:if(x.n.r){x.s=3,x={up:x,n:x.n.r,s:0};continue}case 3:x=x.up}return{done:!0}}}}function $a(p){var x,A,P,M=(((M=p.r)==null?void 0:M.d)||0)-(((M=p.l)==null?void 0:M.d)||0),M=1<M?"r":M<-1?"l":"";M&&(x=M=="r"?"l":"r",A=r({},p),P=p[M],p.from=P.from,p.to=P.to,p[M]=P[M],A[M]=P[x],(p[x]=A).d=pc(A)),p.d=pc(p)}function pc(A){var x=A.r,A=A.l;return(x?A?Math.max(x.d,A.d):x.d:A?A.d:0)+1}function kn(p,x){return c(x).forEach(function(A){p[A]?Wi(p[A],x[A]):p[A]=(function P(M){var N,G,X={};for(N in M)d(M,N)&&(G=M[N],X[N]=!G||typeof G!="object"||Pe.has(G.constructor)?G:P(G));return X})(x[A])}),p}function aa(p,x){return p.all||x.all||Object.keys(p).some(function(A){return x[A]&&oa(x[A],p[A])})}v(zr.prototype,((pn={add:function(p){return Wi(this,p),this},addKey:function(p){return sa(this,p,p),this},addKeys:function(p){var x=this;return p.forEach(function(A){return sa(x,A,A)}),this},hasKey:function(p){var x=Tl(this).next(p).value;return x&&Rt(x.from,p)<=0&&0<=Rt(x.to,p)}})[H]=function(){return Tl(this)},pn));var Ai={},Ws={},Xa=!1;function la(p){kn(Ws,p),Xa||(Xa=!0,setTimeout(function(){Xa=!1,Al(Ws,!(Ws={}))},0))}function Al(p,x){x===void 0&&(x=!1);var A=new Set;if(p.all)for(var P=0,M=Object.values(Ai);P<M.length;P++)ua(X=M[P],p,A,x);else for(var N in p){var G,X,N=/^idb\:\/\/(.*)\/(.*)\//.exec(N);N&&(G=N[1],N=N[2],X=Ai["idb://".concat(G,"/").concat(N)])&&ua(X,p,A,x)}A.forEach(function(ae){return ae()})}function ua(p,x,A,P){for(var M=[],N=0,G=Object.entries(p.queries.query);N<G.length;N++){for(var X=G[N],ae=X[0],fe=[],se=0,ne=X[1];se<ne.length;se++){var le=ne[se];aa(x,le.obsSet)?le.subscribers.forEach(function(xe){return A.add(xe)}):P&&fe.push(le)}P&&M.push([ae,fe])}if(P)for(var ee=0,J=M;ee<J.length;ee++){var Z=J[ee],ae=Z[0],fe=Z[1];p.queries.query[ae]=fe}}function _u(p){var x=p._state,A=p._deps.indexedDB;if(x.isBeingOpened||p.idbdb)return x.dbReadyPromise.then(function(){return x.dbOpenError?Or(x.dbOpenError):p});x.isBeingOpened=!0,x.dbOpenError=null,x.openComplete=!1;var P=x.openCanceller,M=Math.round(10*p.verno),N=!1;function G(){if(x.openCanceller!==P)throw new Se.DatabaseClosed("db.open() was cancelled")}function X(){return new ze(function(le,ee){if(G(),!A)throw new Se.MissingAPI;var J=p.name,Z=x.autoSchema||!M?A.open(J):A.open(J,M);if(!Z)throw new Se.MissingAPI;Z.onerror=Kt(ee),Z.onblocked=qt(p._fireOnBlocked),Z.onupgradeneeded=qt(function(xe){var Ee;se=Z.transaction,x.autoSchema&&!p._options.allowEmptyDB?(Z.onerror=fo,se.abort(),Z.result.close(),(Ee=A.deleteDatabase(J)).onsuccess=Ee.onerror=qt(function(){ee(new Se.NoSuchDatabase("Database ".concat(J," doesnt exist")))})):(se.onerror=Kt(ee),Ee=xe.oldVersion>Math.pow(2,62)?0:xe.oldVersion,ne=Ee<1,p.idbdb=Z.result,N&&zs(p,se),li(p,Ee/10,se,ee))},ee),Z.onsuccess=qt(function(){se=null;var xe,Ee,pe,De,Ne,Je,rt=p.idbdb=Z.result,He=W(rt.objectStoreNames);if(0<He.length)try{var st=rt.transaction((Ne=He).length===1?Ne[0]:Ne,"readonly");if(x.autoSchema)Je=rt,De=st,(pe=p).verno=Je.version/10,De=pe._dbSchema=Fr(0,Je,De),pe._storeNames=W(Je.objectStoreNames,0),gn(pe,[pe._allTables],c(De),De);else if(ir(p,p._dbSchema,st),Ee=st,((Ee=mo(Fr(0,(xe=p).idbdb,Ee),xe._dbSchema)).add.length||Ee.change.some(function(et){return et.add.length||et.change.length}))&&!N)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),rt.close(),M=rt.version+1,N=!0,le(X());on(p,st)}catch{}Bi.push(p),rt.onversionchange=qt(function(et){x.vcFired=!0,p.on("versionchange").fire(et)}),rt.onclose=qt(function(){p.close({disableAutoOpen:!1})}),ne&&(He=p._deps,Ne=J,ws(Je=He.indexedDB)||Ne===co||ia(Je,He.IDBKeyRange).put({name:Ne}).catch(Qe)),le()},ee)}).catch(function(le){switch(le?.name){case"UnknownError":if(0<x.PR1398_maxLoop)return x.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),X();break;case"VersionError":if(0<M)return M=0,X()}return ze.reject(le)})}var ae,fe=x.dbReadyResolve,se=null,ne=!1;return ze.race([P,(typeof navigator>"u"?ze.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(le){function ee(){return indexedDB.databases().finally(le)}ae=setInterval(ee,100),ee()}).finally(function(){return clearInterval(ae)}):Promise.resolve()).then(X)]).then(function(){return G(),x.onReadyBeingFired=[],ze.resolve(Vs(function(){return p.on.ready.fire(p.vip)})).then(function le(){var ee;if(0<x.onReadyBeingFired.length)return ee=x.onReadyBeingFired.reduce(Nr,Qe),x.onReadyBeingFired=[],ze.resolve(Vs(function(){return ee(p.vip)})).then(le)})}).finally(function(){x.openCanceller===P&&(x.onReadyBeingFired=null,x.isBeingOpened=!1)}).catch(function(le){x.dbOpenError=le;try{se&&se.abort()}catch{}return P===x.openCanceller&&p._close(),Or(le)}).finally(function(){x.openComplete=!0,fe()}).then(function(){var le;return ne&&(le={},p.tables.forEach(function(ee){ee.schema.indexes.forEach(function(J){J.name&&(le["idb://".concat(p.name,"/").concat(ee.name,"/").concat(J.name)]=new zr(-1/0,[[[]]]))}),le["idb://".concat(p.name,"/").concat(ee.name,"/")]=le["idb://".concat(p.name,"/").concat(ee.name,"/:dels")]=new zr(-1/0,[[[]]])}),js(ta).fire(le),Al(le,!0)),p})}function $s(p){function x(N){return p.next(N)}var A=M(x),P=M(function(N){return p.throw(N)});function M(N){return function(X){var X=N(X),ae=X.value;return X.done?ae:ae&&typeof ae.then=="function"?ae.then(A,P):f(ae)?Promise.all(ae).then(A,P):A(ae)}}return M(x)()}function wn(p,x,A){for(var P=f(p)?p.slice():[p],M=0;M<A;++M)P.push(x);return P}var Xs={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(p){return r(r({},p),{table:function(P){var A=p.table(P),P=A.schema,M={},N=[];function G(le,ee,J){var pe=Hi(le),Z=M[pe]=M[pe]||[],xe=le==null?0:typeof le=="string"?1:le.length,Ee=0<ee,pe=r(r({},J),{name:Ee?"".concat(pe,"(virtual-from:").concat(J.name,")"):J.name,lowLevelIndex:J,isVirtual:Ee,keyTail:ee,keyLength:xe,extractKey:_s(le),unique:!Ee&&J.unique});return Z.push(pe),pe.isPrimaryKey||N.push(pe),1<xe&&G(xe===2?le[0]:le.slice(0,xe-1),ee+1,J),Z.sort(function(De,Ne){return De.keyTail-Ne.keyTail}),pe}var X=G(P.primaryKey.keyPath,0,P.primaryKey);M[":id"]=[X];for(var ae=0,fe=P.indexes;ae<fe.length;ae++){var se=fe[ae];G(se.keyPath,0,se)}function ne(le){var ee,J=le.query.index;return J.isVirtual?r(r({},le),{query:{index:J.lowLevelIndex,range:(ee=le.query.range,J=J.keyTail,{type:ee.type===1?2:ee.type,lower:wn(ee.lower,ee.lowerOpen?p.MAX_KEY:p.MIN_KEY,J),lowerOpen:!0,upper:wn(ee.upper,ee.upperOpen?p.MIN_KEY:p.MAX_KEY,J),upperOpen:!0})}}):le}return r(r({},A),{schema:r(r({},P),{primaryKey:X,indexes:N,getIndexByKeyPath:function(le){return(le=M[Hi(le)])&&le[0]}}),count:function(le){return A.count(ne(le))},query:function(le){return A.query(ne(le))},openCursor:function(le){var ee=le.query.index,J=ee.keyTail,Z=ee.keyLength;return ee.isVirtual?A.openCursor(ne(le)).then(function(Ee){return Ee&&xe(Ee)}):A.openCursor(le);function xe(Ee){return Object.create(Ee,{continue:{value:function(pe){pe!=null?Ee.continue(wn(pe,le.reverse?p.MAX_KEY:p.MIN_KEY,J)):le.unique?Ee.continue(Ee.key.slice(0,Z).concat(le.reverse?p.MIN_KEY:p.MAX_KEY,J)):Ee.continue()}},continuePrimaryKey:{value:function(pe,De){Ee.continuePrimaryKey(wn(pe,p.MAX_KEY,J),De)}},primaryKey:{get:function(){return Ee.primaryKey}},key:{get:function(){var pe=Ee.key;return Z===1?pe[0]:pe.slice(0,Z)}},value:{get:function(){return Ee.value}}})}}})}})}};function qa(p,x,A,P){return A=A||{},P=P||"",c(p).forEach(function(M){var N,G,X;d(x,M)?(N=p[M],G=x[M],typeof N=="object"&&typeof G=="object"&&N&&G?(X=qe(N))!==qe(G)?A[P+M]=x[M]:X==="Object"?qa(N,G,A,P+M+"."):N!==G&&(A[P+M]=x[M]):N!==G&&(A[P+M]=x[M])):A[P+M]=void 0}),c(x).forEach(function(M){d(p,M)||(A[P+M]=x[M])}),A}function Cl(p,x){return x.type==="delete"?x.keys:x.keys||x.values.map(p.extractKey)}var $i={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(p){return r(r({},p),{table:function(x){var A=p.table(x),P=A.schema.primaryKey;return r(r({},A),{mutate:function(M){var N=re.trans,G=N.table(x).hook,X=G.deleting,ae=G.creating,fe=G.updating;switch(M.type){case"add":if(ae.fire===Qe)break;return N._promise("readwrite",function(){return se(M)},!0);case"put":if(ae.fire===Qe&&fe.fire===Qe)break;return N._promise("readwrite",function(){return se(M)},!0);case"delete":if(X.fire===Qe)break;return N._promise("readwrite",function(){return se(M)},!0);case"deleteRange":if(X.fire===Qe)break;return N._promise("readwrite",function(){return(function ne(le,ee,J){return A.query({trans:le,values:!1,query:{index:P,range:ee},limit:J}).then(function(Z){var xe=Z.result;return se({type:"delete",keys:xe,trans:le}).then(function(Ee){return 0<Ee.numFailures?Promise.reject(Ee.failures[0]):xe.length<J?{failures:[],numFailures:0,lastResult:void 0}:ne(le,r(r({},ee),{lower:xe[xe.length-1],lowerOpen:!0}),J)})})})(M.trans,M.range,1e4)},!0)}return A.mutate(M);function se(ne){var le,ee,J,Z=re.trans,xe=ne.keys||Cl(P,ne);if(xe)return(ne=ne.type==="add"||ne.type==="put"?r(r({},ne),{keys:xe}):r({},ne)).type!=="delete"&&(ne.values=s([],ne.values)),ne.keys&&(ne.keys=s([],ne.keys)),le=A,J=xe,((ee=ne).type==="add"?Promise.resolve([]):le.getMany({trans:ee.trans,keys:J,cache:"immutable"})).then(function(Ee){var pe=xe.map(function(De,Ne){var Je,rt,He,st=Ee[Ne],et={onerror:null,onsuccess:null};return ne.type==="delete"?X.fire.call(et,De,st,Z):ne.type==="add"||st===void 0?(Je=ae.fire.call(et,De,ne.values[Ne],Z),De==null&&Je!=null&&(ne.keys[Ne]=De=Je,P.outbound||F(ne.values[Ne],P.keyPath,De))):(Je=qa(st,ne.values[Ne]),(rt=fe.fire.call(et,Je,De,st,Z))&&(He=ne.values[Ne],Object.keys(rt).forEach(function(Xe){d(He,Xe)?He[Xe]=rt[Xe]:F(He,Xe,rt[Xe])}))),et});return A.mutate(ne).then(function(De){for(var Ne=De.failures,Je=De.results,rt=De.numFailures,De=De.lastResult,He=0;He<xe.length;++He){var st=(Je||xe)[He],et=pe[He];st==null?et.onerror&&et.onerror(Ne[He]):et.onsuccess&&et.onsuccess(ne.type==="put"&&Ee[He]?ne.values[He]:st)}return{failures:Ne,results:Je,numFailures:rt,lastResult:De}}).catch(function(De){return pe.forEach(function(Ne){return Ne.onerror&&Ne.onerror(De)}),Promise.reject(De)})});throw new Error("Keys missing")}}})}})}};function bs(p,x,A){try{if(!x||x.keys.length<p.length)return null;for(var P=[],M=0,N=0;M<x.keys.length&&N<p.length;++M)Rt(x.keys[M],p[N])===0&&(P.push(A?ve(x.values[M]):x.values[M]),++N);return P.length===p.length?P:null}catch{return null}}var xu={stack:"dbcore",level:-1,create:function(p){return{table:function(x){var A=p.table(x);return r(r({},A),{getMany:function(P){var M;return P.cache?(M=bs(P.keys,P.trans._cache,P.cache==="clone"))?ze.resolve(M):A.getMany(P).then(function(N){return P.trans._cache={keys:P.keys,values:P.cache==="clone"?ve(N):N},N}):A.getMany(P)},mutate:function(P){return P.type!=="add"&&(P.trans._cache=null),A.mutate(P)}})}}}};function wu(p,x){return p.trans.mode==="readonly"&&!!p.subscr&&!p.trans.explicit&&p.trans.db._options.cache!=="disabled"&&!x.schema.primaryKey.outbound}function Xi(p,x){switch(p){case"query":return x.values&&!x.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var qi={stack:"dbcore",level:0,name:"Observability",create:function(p){var x=p.schema.name,A=new zr(p.MIN_KEY,p.MAX_KEY);return r(r({},p),{transaction:function(P,M,N){if(re.subscr&&M!=="readonly")throw new Se.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(re.querier));return p.transaction(P,M,N)},table:function(P){function M(xe){var Z,xe=xe.query;return[Z=xe.index,new zr((Z=(xe=xe.range).lower)!=null?Z:p.MIN_KEY,(Z=xe.upper)!=null?Z:p.MAX_KEY)]}var N=p.table(P),G=N.schema,X=G.primaryKey,ae=G.indexes,fe=X.extractKey,se=X.outbound,ne=X.autoIncrement&&ae.filter(function(J){return J.compound&&J.keyPath.includes(X.keyPath)}),le=r(r({},N),{mutate:function(J){function Z(ut){return ut="idb://".concat(x,"/").concat(P,"/").concat(ut),Ne[ut]||(Ne[ut]=new zr)}var xe,Ee,pe,De=J.trans,Ne=J.mutatedParts||(J.mutatedParts={}),Je=Z(""),rt=Z(":dels"),He=J.type,et=J.type==="deleteRange"?[J.range]:J.type==="delete"?[J.keys]:J.values.length<50?[Cl(X,J).filter(function(ut){return ut}),J.values]:[],st=et[0],et=et[1],Xe=J.trans._cache;return f(st)?(Je.addKeys(st),(He=He==="delete"||st.length===et.length?bs(st,Xe):null)||rt.addKeys(st),(He||et)&&(xe=Z,Ee=He,pe=et,G.indexes.forEach(function(ut){var Vt=xe(ut.name||"");function Yt(Ft){return Ft!=null?ut.extractKey(Ft):null}function At(Ft){ut.multiEntry&&f(Ft)?Ft.forEach(function(gr){return Vt.addKey(gr)}):Vt.addKey(Ft)}(Ee||pe).forEach(function(Ft,rr){var Mn=Ee&&Yt(Ee[rr]),rr=pe&&Yt(pe[rr]);Rt(Mn,rr)!==0&&(Mn!=null&&At(Mn),rr!=null)&&At(rr)})}))):st?(et={from:(Xe=st.lower)!=null?Xe:p.MIN_KEY,to:(He=st.upper)!=null?He:p.MAX_KEY},rt.add(et),Je.add(et)):(Je.add(A),rt.add(A),G.indexes.forEach(function(ut){return Z(ut.name).add(A)})),N.mutate(J).then(function(ut){return!st||J.type!=="add"&&J.type!=="put"||(Je.addKeys(ut.results),ne&&ne.forEach(function(Vt){for(var Yt=J.values.map(function(Mn){return Vt.extractKey(Mn)}),At=Vt.keyPath.findIndex(function(Mn){return Mn===X.keyPath}),Ft=0,gr=ut.results.length;Ft<gr;++Ft)Yt[Ft][At]=ut.results[Ft];Z(Vt.name).addKeys(Yt)})),De.mutatedParts=kn(De.mutatedParts||{},Ne),ut})}}),ee={get:function(J){return[X,new zr(J.key)]},getMany:function(J){return[X,new zr().addKeys(J.keys)]},count:M,query:M,openCursor:M};return c(ee).forEach(function(J){le[J]=function(Z){var xe=re.subscr,Ee=!!xe,pe=wu(re,N)&&Xi(J,Z)?Z.obsSet={}:xe;if(Ee){var De,xe=function(et){return et="idb://".concat(x,"/").concat(P,"/").concat(et),pe[et]||(pe[et]=new zr)},Ne=xe(""),Je=xe(":dels"),Ee=ee[J](Z),rt=Ee[0],Ee=Ee[1];if((J==="query"&&rt.isPrimaryKey&&!Z.values?Je:xe(rt.name||"")).add(Ee),!rt.isPrimaryKey){if(J!=="count")return De=J==="query"&&se&&Z.values&&N.query(r(r({},Z),{values:!1})),N[J].apply(this,arguments).then(function(et){if(J==="query"){if(se&&Z.values)return De.then(function(Yt){return Yt=Yt.result,Ne.addKeys(Yt),et});var Xe=Z.values?et.result.map(fe):et.result;(Z.values?Ne:Je).addKeys(Xe)}else{var ut,Vt;if(J==="openCursor")return Vt=Z.values,(ut=et)&&Object.create(ut,{key:{get:function(){return Je.addKey(ut.primaryKey),ut.key}},primaryKey:{get:function(){var Yt=ut.primaryKey;return Je.addKey(Yt),Yt}},value:{get:function(){return Vt&&Ne.addKey(ut.primaryKey),ut.value}}})}return et});Je.add(A)}}return N[J].apply(this,arguments)}}),le}})}};function Ss(p,x,A){var P;return A.numFailures===0?x:x.type==="deleteRange"||(P=x.keys?x.keys.length:"values"in x&&x.values?x.values.length:1,A.numFailures===P)?null:(P=r({},x),f(P.keys)&&(P.keys=P.keys.filter(function(M,N){return!(N in A.failures)})),"values"in P&&f(P.values)&&(P.values=P.values.filter(function(M,N){return!(N in A.failures)})),P)}function Il(p,x){return A=p,((P=x).lower===void 0||(P.lowerOpen?0<Rt(A,P.lower):0<=Rt(A,P.lower)))&&(A=p,(P=x).upper===void 0||(P.upperOpen?Rt(A,P.upper)<0:Rt(A,P.upper)<=0));var A,P}function ca(p,x,A,P,M,N){var G,X,ae,fe,se,ne;return!A||A.length===0||(G=x.query.index,X=G.multiEntry,ae=x.query.range,fe=P.schema.primaryKey.extractKey,se=G.extractKey,ne=(G.lowLevelIndex||G).extractKey,(P=A.reduce(function(le,ee){var J=le,Z=[];if(ee.type==="add"||ee.type==="put")for(var xe=new zr,Ee=ee.values.length-1;0<=Ee;--Ee){var pe,De=ee.values[Ee],Ne=fe(De);!xe.hasKey(Ne)&&(pe=se(De),X&&f(pe)?pe.some(function(et){return Il(et,ae)}):Il(pe,ae))&&(xe.addKey(Ne),Z.push(De))}switch(ee.type){case"add":var Je=new zr().addKeys(x.values?le.map(function(Xe){return fe(Xe)}):le),J=le.concat(x.values?Z.filter(function(Xe){return Xe=fe(Xe),!Je.hasKey(Xe)&&(Je.addKey(Xe),!0)}):Z.map(function(Xe){return fe(Xe)}).filter(function(Xe){return!Je.hasKey(Xe)&&(Je.addKey(Xe),!0)}));break;case"put":var rt=new zr().addKeys(ee.values.map(function(Xe){return fe(Xe)}));J=le.filter(function(Xe){return!rt.hasKey(x.values?fe(Xe):Xe)}).concat(x.values?Z:Z.map(function(Xe){return fe(Xe)}));break;case"delete":var He=new zr().addKeys(ee.keys);J=le.filter(function(Xe){return!He.hasKey(x.values?fe(Xe):Xe)});break;case"deleteRange":var st=ee.range;J=le.filter(function(Xe){return!Il(fe(Xe),st)})}return J},p))===p)?p:(P.sort(function(le,ee){return Rt(ne(le),ne(ee))||Rt(fe(le),fe(ee))}),x.limit&&x.limit<1/0&&(P.length>x.limit?P.length=x.limit:p.length===x.limit&&P.length<x.limit&&(M.dirty=!0)),N?Object.freeze(P):P)}function Pl(p,x){return Rt(p.lower,x.lower)===0&&Rt(p.upper,x.upper)===0&&!!p.lowerOpen==!!x.lowerOpen&&!!p.upperOpen==!!x.upperOpen}function bu(p,x){return((A,P,M,N)=>{if(A===void 0)return P!==void 0?-1:0;if(P===void 0)return 1;if((A=Rt(A,P))===0){if(M&&N)return 0;if(M)return 1;if(N)return-1}return A})(p.lower,x.lower,p.lowerOpen,x.lowerOpen)<=0&&0<=((A,P,M,N)=>{if(A===void 0)return P!==void 0?1:0;if(P===void 0)return-1;if((A=Rt(A,P))===0){if(M&&N)return 0;if(M)return-1;if(N)return 1}return A})(p.upper,x.upper,p.upperOpen,x.upperOpen)}function Rl(p,x,A,P){p.subscribers.add(A),P.addEventListener("abort",function(){var M,N;p.subscribers.delete(A),p.subscribers.size===0&&(M=p,N=x,setTimeout(function(){M.subscribers.size===0&&D(N,M)},3e3))})}var Ka={stack:"dbcore",level:0,name:"Cache",create:function(p){var x=p.schema.name;return r(r({},p),{transaction:function(A,P,M){var N,G,X=p.transaction(A,P,M);return P==="readwrite"&&(M=(N=new AbortController).signal,X.addEventListener("abort",(G=function(ae){return function(){if(N.abort(),P==="readwrite"){for(var fe=new Set,se=0,ne=A;se<ne.length;se++){var le=ne[se],ee=Ai["idb://".concat(x,"/").concat(le)];if(ee){var J=p.table(le),Z=ee.optimisticOps.filter(function(ut){return ut.trans===X});if(X._explicit&&ae&&X.mutatedParts)for(var xe=0,Ee=Object.values(ee.queries.query);xe<Ee.length;xe++)for(var pe=0,De=(rt=Ee[xe]).slice();pe<De.length;pe++)aa((He=De[pe]).obsSet,X.mutatedParts)&&(D(rt,He),He.subscribers.forEach(function(ut){return fe.add(ut)}));else if(0<Z.length){ee.optimisticOps=ee.optimisticOps.filter(function(ut){return ut.trans!==X});for(var Ne=0,Je=Object.values(ee.queries.query);Ne<Je.length;Ne++)for(var rt,He,st,et=0,Xe=(rt=Je[Ne]).slice();et<Xe.length;et++)(He=Xe[et]).res!=null&&X.mutatedParts&&(ae&&!He.dirty?(st=Object.isFrozen(He.res),st=ca(He.res,He.req,Z,J,He,st),He.dirty?(D(rt,He),He.subscribers.forEach(function(ut){return fe.add(ut)})):st!==He.res&&(He.res=st,He.promise=ze.resolve({result:st}))):(He.dirty&&D(rt,He),He.subscribers.forEach(function(ut){return fe.add(ut)})))}}}fe.forEach(function(ut){return ut()})}}})(!1),{signal:M}),X.addEventListener("error",G(!1),{signal:M}),X.addEventListener("complete",G(!0),{signal:M})),X},table:function(A){var P=p.table(A),M=P.schema.primaryKey;return r(r({},P),{mutate:function(N){var G,X=re.trans;return!M.outbound&&X.db._options.cache!=="disabled"&&!X.explicit&&X.idbtrans.mode==="readwrite"&&(G=Ai["idb://".concat(x,"/").concat(A)])?(X=P.mutate(N),N.type!=="add"&&N.type!=="put"||!(50<=N.values.length||Cl(M,N).some(function(ae){return ae==null}))?(G.optimisticOps.push(N),N.mutatedParts&&la(N.mutatedParts),X.then(function(ae){0<ae.numFailures&&(D(G.optimisticOps,N),(ae=Ss(0,N,ae))&&G.optimisticOps.push(ae),N.mutatedParts)&&la(N.mutatedParts)}),X.catch(function(){D(G.optimisticOps,N),N.mutatedParts&&la(N.mutatedParts)})):X.then(function(ae){var fe=Ss(0,r(r({},N),{values:N.values.map(function(se,ne){var le;return ae.failures[ne]?se:(F(le=(le=M.keyPath)!=null&&le.includes(".")?ve(se):r({},se),M.keyPath,ae.results[ne]),le)})}),ae);G.optimisticOps.push(fe),queueMicrotask(function(){return N.mutatedParts&&la(N.mutatedParts)})}),X):P.mutate(N)},query:function(N){var G,X,ae,fe,se,ne,le;return wu(re,P)&&Xi("query",N)?(G=((ae=re.trans)==null?void 0:ae.db._options.cache)==="immutable",X=(ae=re).requery,ae=ae.signal,ne=((ee,J,Z,xe)=>{var Ee=Ai["idb://".concat(ee,"/").concat(J)];if(!Ee)return[];if(!(ee=Ee.queries[Z]))return[null,!1,Ee,null];var pe=ee[(xe.query?xe.query.index.name:null)||""];if(!pe)return[null,!1,Ee,null];switch(Z){case"query":var De=pe.find(function(Ne){return Ne.req.limit===xe.limit&&Ne.req.values===xe.values&&Pl(Ne.req.query.range,xe.query.range)});return De?[De,!0,Ee,pe]:[pe.find(function(Ne){return("limit"in Ne.req?Ne.req.limit:1/0)>=xe.limit&&(!xe.values||Ne.req.values)&&bu(Ne.req.query.range,xe.query.range)}),!1,Ee,pe];case"count":return De=pe.find(function(Ne){return Pl(Ne.req.query.range,xe.query.range)}),[De,!!De,Ee,pe]}})(x,A,"query",N),le=ne[0],fe=ne[2],se=ne[3],le&&ne[1]?le.obsSet=N.obsSet:(ne=P.query(N).then(function(ee){var J=ee.result;if(le&&(le.res=J),G){for(var Z=0,xe=J.length;Z<xe;++Z)Object.freeze(J[Z]);Object.freeze(J)}else ee.result=ve(J);return ee}).catch(function(ee){return se&&le&&D(se,le),Promise.reject(ee)}),le={obsSet:N.obsSet,promise:ne,subscribers:new Set,type:"query",req:N,dirty:!1},se?se.push(le):(se=[le],(fe=fe||(Ai["idb://".concat(x,"/").concat(A)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[N.query.index.name||""]=se)),Rl(le,se,X,ae),le.promise.then(function(ee){return{result:ca(ee.result,N,fe?.optimisticOps,P,le,G)}})):P.query(N)}})}})}};function Ki(p,x){return new Proxy(p,{get:function(A,P,M){return P==="db"?x:Reflect.get(A,P,M)}})}Rr.prototype.version=function(p){if(isNaN(p)||p<.1)throw new Se.Type("Given version is not a positive number");if(p=Math.round(10*p)/10,this.idbdb||this._state.isBeingOpened)throw new Se.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,p);var x=this._versions,A=x.filter(function(P){return P._cfg.version===p})[0];return A||(A=new this.Version(p),x.push(A),x.sort(ai),A.stores({}),this._state.autoSchema=!1),A},Rr.prototype._whenReady=function(p){var x=this;return this.idbdb&&(this._state.openComplete||re.letThrough||this._vip)?p():new ze(function(A,P){if(x._state.openComplete)return P(new Se.DatabaseClosed(x._state.dbOpenError));if(!x._state.isBeingOpened){if(!x._state.autoOpen)return void P(new Se.DatabaseClosed);x.open().catch(Qe)}x._state.dbReadyPromise.then(A,P)}).then(p)},Rr.prototype.use=function(M){var x=M.stack,A=M.create,P=M.level,M=M.name,N=(M&&this.unuse({stack:x,name:M}),this._middlewares[x]||(this._middlewares[x]=[]));return N.push({stack:x,create:A,level:P??10,name:M}),N.sort(function(G,X){return G.level-X.level}),this},Rr.prototype.unuse=function(p){var x=p.stack,A=p.name,P=p.create;return x&&this._middlewares[x]&&(this._middlewares[x]=this._middlewares[x].filter(function(M){return P?M.create!==P:!!A&&M.name!==A})),this},Rr.prototype.open=function(){var p=this;return Hn(zn,function(){return _u(p)})},Rr.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var p=this._state,x=Bi.indexOf(this);if(0<=x&&Bi.splice(x,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}p.isBeingOpened||(p.dbReadyPromise=new ze(function(A){p.dbReadyResolve=A}),p.openCanceller=new ze(function(A,P){p.cancelOpen=P}))},Rr.prototype.close=function(x){var x=(x===void 0?{disableAutoOpen:!0}:x).disableAutoOpen,A=this._state;x?(A.isBeingOpened&&A.cancelOpen(new Se.DatabaseClosed),this._close(),A.autoOpen=!1,A.dbOpenError=new Se.DatabaseClosed):(this._close(),A.autoOpen=this._options.autoOpen||A.isBeingOpened,A.openComplete=!1,A.dbOpenError=null)},Rr.prototype.delete=function(p){var x=this,A=(p===void 0&&(p={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),P=this._state;return new ze(function(M,N){function G(){x.close(p);var X=x._deps.indexedDB.deleteDatabase(x.name);X.onsuccess=qt(function(){var ae,fe,se;ae=x._deps,fe=x.name,ws(se=ae.indexedDB)||fe===co||ia(se,ae.IDBKeyRange).delete(fe).catch(Qe),M()}),X.onerror=Kt(N),X.onblocked=x._fireOnBlocked}if(A)throw new Se.InvalidArgument("Invalid closeOptions argument to db.delete()");P.isBeingOpened?P.dbReadyPromise.then(G):G()})},Rr.prototype.backendDB=function(){return this.idbdb},Rr.prototype.isOpen=function(){return this.idbdb!==null},Rr.prototype.hasBeenClosed=function(){var p=this._state.dbOpenError;return p&&p.name==="DatabaseClosed"},Rr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Rr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Rr.prototype,"tables",{get:function(){var p=this;return c(this._allTables).map(function(x){return p._allTables[x]})},enumerable:!1,configurable:!0}),Rr.prototype.transaction=function(){var p=(function(x,A,P){var M=arguments.length;if(M<2)throw new Se.InvalidArgument("Too few arguments");for(var N=new Array(M-1);--M;)N[M-1]=arguments[M];return P=N.pop(),[x,Oe(N),P]}).apply(this,arguments);return this._transaction.apply(this,p)},Rr.prototype._transaction=function(p,x,A){var P,M,N=this,G=re.trans,X=(G&&G.db===this&&p.indexOf("!")===-1||(G=null),p.indexOf("?")!==-1);p=p.replace("!","").replace("?","");try{if(M=x.map(function(fe){if(fe=fe instanceof N.Table?fe.name:fe,typeof fe!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return fe}),p=="r"||p===qo)P=qo;else{if(p!="rw"&&p!=ja)throw new Se.InvalidArgument("Invalid transaction mode: "+p);P=ja}if(G){if(G.mode===qo&&P===ja){if(!X)throw new Se.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");G=null}G&&M.forEach(function(fe){if(G&&G.storeNames.indexOf(fe)===-1){if(!X)throw new Se.SubTransaction("Table "+fe+" not included in parent transaction.");G=null}}),X&&G&&!G.active&&(G=null)}}catch(fe){return G?G._promise(null,function(se,ne){ne(fe)}):Or(fe)}var ae=(function fe(se,ne,le,ee,J){return ze.resolve().then(function(){var pe=re.transless||re,Z=se._createTransaction(ne,le,se._dbSchema,ee),pe=(Z.explicit=!0,{trans:Z,transless:pe});if(ee)Z.idbtrans=ee.idbtrans;else try{Z.create(),Z.idbtrans._explicit=!0,se._state.PR1398_maxLoop=3}catch(De){return De.name===Ke.InvalidState&&se.isOpen()&&0<--se._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),se.close({disableAutoOpen:!1}),se.open().then(function(){return fe(se,ne,le,null,J)})):Or(De)}var xe,Ee=U(J),pe=(Ee&&vs(),ze.follow(function(){var De;(xe=J.call(Z,Z))&&(Ee?(De=Xr.bind(null,null),xe.then(De,De)):typeof xe.next=="function"&&typeof xe.throw=="function"&&(xe=$s(xe)))},pe));return(xe&&typeof xe.then=="function"?ze.resolve(xe).then(function(De){return Z.active?De:Or(new Se.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):pe.then(function(){return xe})).then(function(De){return ee&&Z._resolve(),Z._completion.then(function(){return De})}).catch(function(De){return Z._reject(De),Or(De)})})}).bind(null,this,P,M,G,A);return G?G._promise(P,ae,"lock"):re.trans?Hn(re.transless,function(){return N._whenReady(ae)}):this._whenReady(ae)},Rr.prototype.table=function(p){if(d(this._allTables,p))return this._allTables[p];throw new Se.InvalidTable("Table ".concat(p," does not exist"))};var Yi=Rr;function Rr(p,x){var A,P,M,N,G,X=this,ae=(this._middlewares={},this.verno=0,Rr.dependencies),ae=(this._options=x=r({addons:Rr.addons,autoOpen:!0,indexedDB:ae.indexedDB,IDBKeyRange:ae.IDBKeyRange,cache:"cloned"},x),this._deps={indexedDB:x.indexedDB,IDBKeyRange:x.IDBKeyRange},x.addons),fe=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Qe,dbReadyPromise:null,cancelOpen:Qe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:x.autoOpen}),se=(fe.dbReadyPromise=new ze(function(ne){fe.dbReadyResolve=ne}),fe.openCanceller=new ze(function(ne,le){fe.cancelOpen=le}),this._state=fe,this.name=p,this.on=Bs(this,"populate","blocked","versionchange","close",{ready:[Nr,Qe]}),this.once=function(ne,le){var ee=function(){for(var J=[],Z=0;Z<arguments.length;Z++)J[Z]=arguments[Z];X.on(ne).unsubscribe(ee),le.apply(X,J)};return X.on(ne,ee)},this.on.ready.subscribe=z(this.on.ready.subscribe,function(ne){return function(le,ee){Rr.vip(function(){var J,Z=X._state;Z.openComplete?(Z.dbOpenError||ze.resolve().then(le),ee&&ne(le)):Z.onReadyBeingFired?(Z.onReadyBeingFired.push(le),ee&&ne(le)):(ne(le),J=X,ee||ne(function xe(){J.on.ready.unsubscribe(le),J.on.ready.unsubscribe(xe)}))})}}),this.Collection=(A=this,Us(fc.prototype,function(xe,Z){this.db=A;var ee=si,J=null;if(Z)try{ee=Z()}catch(pe){J=pe}var Z=xe._ctx,xe=Z.table,Ee=xe.hook.reading.fire;this._ctx={table:xe,index:Z.index,isPrimKey:!Z.index||xe.schema.primKey.keyPath&&Z.index===xe.schema.primKey.name,range:ee,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:J,or:Z.or,valueMapper:Ee!==gt?Ee:null}})),this.Table=(P=this,Us(Ko.prototype,function(ne,le,ee){this.db=P,this._tx=ee,this.name=ne,this.schema=le,this.hook=P._allTables[ne]?P._allTables[ne].hook:Bs(null,{creating:[vt,Qe],reading:[Bt,gt],updating:[Cr,Qe],deleting:[mr,Qe]})})),this.Transaction=(M=this,Us(Ha.prototype,function(ne,le,ee,J,Z){var xe=this;ne!=="readonly"&&le.forEach(function(Ee){Ee=(Ee=ee[Ee])==null?void 0:Ee.yProps,Ee&&(le=le.concat(Ee.map(function(pe){return pe.updatesTable})))}),this.db=M,this.mode=ne,this.storeNames=le,this.schema=ee,this.chromeTransactionDurability=J,this.idbtrans=null,this.on=Bs(this,"complete","error","abort"),this.parent=Z||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ze(function(Ee,pe){xe._resolve=Ee,xe._reject=pe}),this._completion.then(function(){xe.active=!1,xe.on.complete.fire()},function(Ee){var pe=xe.active;return xe.active=!1,xe.on.error.fire(Ee),xe.parent?xe.parent._reject(Ee):pe&&xe.idbtrans&&xe.idbtrans.abort(),Or(Ee)})})),this.Version=(N=this,Us(Ti.prototype,function(ne){this.db=N,this._cfg={version:ne,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(G=this,Us(ea.prototype,function(ne,le,ee){if(this.db=G,this._ctx={table:ne,index:le===":id"?null:le,or:ee},this._cmp=this._ascending=Rt,this._descending=function(J,Z){return Rt(Z,J)},this._max=function(J,Z){return 0<Rt(J,Z)?J:Z},this._min=function(J,Z){return Rt(J,Z)<0?J:Z},this._IDBKeyRange=G._deps.IDBKeyRange,!this._IDBKeyRange)throw new Se.MissingAPI})),this.on("versionchange",function(ne){0<ne.newVersion?console.warn("Another connection wants to upgrade database '".concat(X.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(X.name,"'. Closing db now to resume the delete request.")),X.close({disableAutoOpen:!1})}),this.on("blocked",function(ne){!ne.newVersion||ne.newVersion<ne.oldVersion?console.warn("Dexie.delete('".concat(X.name,"') was blocked")):console.warn("Upgrade '".concat(X.name,"' blocked by other connection holding version ").concat(ne.oldVersion/10))}),this._maxKey=Ei(x.IDBKeyRange),this._createTransaction=function(ne,le,ee,J){return new X.Transaction(ne,le,ee,X._options.chromeTransactionDurability,J)},this._fireOnBlocked=function(ne){X.on("blocked").fire(ne),Bi.filter(function(le){return le.name===X.name&&le!==X&&!le._state.vcFired}).map(function(le){return le.on("versionchange").fire(ne)})},this.use(xu),this.use(Ka),this.use(qi),this.use(Xs),this.use($i),new Proxy(this,{get:function(ne,le,ee){var J;return le==="_vip"||(le==="table"?function(Z){return Ki(X.table(Z),se)}:(J=Reflect.get(ne,le,ee))instanceof Ko?Ki(J,se):le==="tables"?J.map(function(Z){return Ki(Z,se)}):le==="_createTransaction"?function(){return Ki(J.apply(this,arguments),se)}:J)}}));this.vip=se,ae.forEach(function(ne){return ne(X)})}var ha,Ci=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ya=(qs.prototype.subscribe=function(p,x,A){return this._subscribe(p&&typeof p!="function"?p:{next:p,error:x,complete:A})},qs.prototype[Ci]=function(){return this},qs);function qs(p){this._subscribe=p}try{ha={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{ha={indexedDB:null,IDBKeyRange:null}}function go(p){var x,A=!1,P=new Ya(function(M){var N=U(p),G,X=!1,ae={},fe={},se={get closed(){return X},unsubscribe:function(){X||(X=!0,G&&G.abort(),ne&&js.storagemutated.unsubscribe(ee))}},ne=(M.start&&M.start(se),!1),le=function(){return lo(J)},ee=function(Z){kn(ae,Z),aa(fe,ae)&&le()},J=function(){var Z,xe,Ee;!X&&ha.indexedDB&&(ae={},Z={},G&&G.abort(),G=new AbortController,Ee=(pe=>{var De=Mr();try{N&&vs();var Ne=ni(p,pe);return Ne=N?Ne.finally(Xr):Ne}finally{De&&wi()}})(xe={subscr:Z,signal:G.signal,requery:le,querier:p,trans:null}),Promise.resolve(Ee).then(function(pe){A=!0,x=pe,X||xe.signal.aborted||(ae={},(De=>{for(var Ne in De)if(d(De,Ne))return;return 1})(fe=Z)||ne||(js(ta,ee),ne=!0),lo(function(){return!X&&M.next&&M.next(pe)}))},function(pe){A=!1,["DatabaseClosedError","AbortError"].includes(pe?.name)||X||lo(function(){X||M.error&&M.error(pe)})}))};return setTimeout(le,0),se});return P.hasValue=function(){return A},P.getValue=function(){return x},P}var ui=Yi;function yo(p){var x=Br;try{Br=!0,js.storagemutated.fire(p),Al(p,!0)}finally{Br=x}}v(ui,r(r({},q),{delete:function(p){return new ui(p,{addons:[]}).delete()},exists:function(p){return new ui(p,{addons:[]}).open().then(function(x){return x.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(p){try{return x=ui.dependencies,A=x.indexedDB,x=x.IDBKeyRange,(ws(A)?Promise.resolve(A.databases()).then(function(P){return P.map(function(M){return M.name}).filter(function(M){return M!==co})}):ia(A,x).toCollection().primaryKeys()).then(p)}catch{return Or(new Se.MissingAPI)}var x,A},defineClass:function(){return function(p){m(this,p)}},ignoreTransaction:function(p){return re.trans?Hn(re.transless,p):p()},vip:Vs,async:function(p){return function(){try{var x=$s(p.apply(this,arguments));return x&&typeof x.then=="function"?x:ze.resolve(x)}catch(A){return Or(A)}}},spawn:function(p,x,A){try{var P=$s(p.apply(A,x||[]));return P&&typeof P.then=="function"?P:ze.resolve(P)}catch(M){return Or(M)}},currentTransaction:{get:function(){return re.trans||null}},waitFor:function(p,x){return p=ze.resolve(typeof p=="function"?ui.ignoreTransaction(p):p).timeout(x||6e4),re.trans?re.trans.waitFor(p):p},Promise:ze,debug:{get:function(){return hr},set:function(p){yi(p)}},derive:R,extend:m,props:v,override:z,Events:Bs,on:js,liveQuery:go,extendObservabilitySet:kn,getByKeyPath:de,setByKeyPath:F,delByKeyPath:function(p,x){typeof x=="string"?F(p,x,void 0):"length"in x&&[].map.call(x,function(A){F(p,A,void 0)})},shallowClone:ie,deepClone:ve,getObjectDiff:qa,cmp:Rt,asap:K,minKey:-1/0,addons:[],connections:Bi,errnames:Ke,dependencies:ha,cache:Ai,semVer:"4.3.0",version:"4.3.0".split(".").map(function(p){return parseInt(p)}).reduce(function(p,x,A){return p+x/Math.pow(10,2*A)})})),ui.maxKey=Ei(ui.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(js(ta,function(p){Br||(p=new CustomEvent(Gs,{detail:p}),Br=!0,dispatchEvent(p),Br=!1)}),addEventListener(Gs,function(p){p=p.detail,Br||yo(p)}));var Qi,Br=!1,Ks=function(){};return typeof BroadcastChannel<"u"&&((Ks=function(){(Qi=new BroadcastChannel(Gs)).onmessage=function(p){return p.data&&yo(p.data)}})(),typeof Qi.unref=="function"&&Qi.unref(),js(ta,function(p){Br||Qi.postMessage(p)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(p){if(!Yi.disableBfCache&&p.persisted){hr&&console.debug("Dexie: handling persisted pagehide"),Qi?.close();for(var x=0,A=Bi;x<A.length;x++)A[x].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(p){!Yi.disableBfCache&&p.persisted&&(hr&&console.debug("Dexie: handling persisted pageshow"),Ks(),yo({all:new zr(-1/0,[[]])}))})),ze.rejectionMapper=function(p,x){return!p||p instanceof Ae||p instanceof TypeError||p instanceof SyntaxError||!p.name||!ot[p.name]?p:(x=new ot[p.name](x||p.message,p),"stack"in p&&T(x,"stack",{get:function(){return this.inner.stack}}),x)},yi(hr),r(Yi,Object.freeze({__proto__:null,Dexie:Yi,Entity:dr,PropModification:Wn,RangeSet:zr,add:function(p){return new Wn({add:p})},cmp:Rt,default:Yi,liveQuery:go,mergeRanges:Wi,rangesOverlap:oa,remove:function(p){return new Wn({remove:p})},replacePrefix:function(p,x){return new Wn({replacePrefix:[p,x]})}}),{default:Yi}),Yi})})(bf)),bf.exports}var KA=qA();const Jg=sh(KA),v0=Symbol.for("Dexie"),ih=globalThis[v0]||(globalThis[v0]=Jg);if(Jg.semVer!==ih.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Jg.semVer} and ${ih.semVer}`);const{liveQuery:HI,mergeRanges:VI,rangesOverlap:WI,RangeSet:$I,cmp:XI,Entity:qI,PropModification:KI,replacePrefix:YI,add:QI,remove:ZI,DexieYProvider:JI}=ih;class YA extends ih{saves;constructor(){super("GameEngineDB"),this.version(1).stores({saves:"++id, stateName, timestamp"})}}const ey=new YA;class Ma{static instance;static getInstance(){return Ma.instance||(Ma.instance=new Ma),Ma.instance}async performSave(e,t){const r=rh.getInstance(),s=Fo.getInstance(),a=Qn.getInstance(),c=await this.requestSnapshot(r.logic,t),f=await this.requestSnapshot(s.worker,t),m=a.get("campaign_id"),_=a.get("campaign_step_index"),w={id:e,stateName:t,timestamp:Date.now(),preview:`Save ${new Date().toLocaleTimeString()}`,campaignId:m||void 0,campaignIndex:_!==void 0?_:void 0,sessionData:a.exportSaveData(),logicSnapshot:c,viewSnapshot:f};await ey.saves.put(w)}async performLoad(e){const t=await ey.saves.get(e);if(!t)throw new Error("Save not found");const r=Qn.getInstance(),s=rh.getInstance(),a=Fo.getInstance();return r.lockForLoad(),r.clearSavableKeys(),r.importSaveData(t.sessionData),s.prepareForState(t.stateName),s.createState(t.stateName),s.sendInput(t.stateName,"LOAD_SNAPSHOT",{data:t.logicSnapshot}),a.prepareForState(t.stateName),a.createState(t.stateName),a.loadSnapshot(t.stateName,t.viewSnapshot),s.isInitialized=!0,a.isInitialized=!0,t}requestSnapshot(e,t){return new Promise(r=>{const s=new MessageChannel;s.port1.onmessage=a=>{s.port1.close(),r(a.data)},e.postMessage({type:"INPUT",stateName:t,payload:{action:"GET_SNAPSHOT"}},[s.port2])})}}class _w{constructor(e,t){this.vm=e,this.stateName=t,this.workers=rh.getInstance(),window.addEventListener("keydown",this.handleKeyDown),this.workers.logic.addEventListener("message",this.handleWorkerMessage),this.captureInitialState()}workers;RESET_SLOT=999;update(){this.vm.update()}destroy(){window.removeEventListener("keydown",this.handleKeyDown),this.workers.logic.removeEventListener("message",this.handleWorkerMessage),this.onInternalDestroy()}send(e,t={}){this.workers.sendInput(this.stateName,e,t)}onInternalDestroy(){}captureInitialState(){setTimeout(async()=>{await Ma.getInstance().performSave(this.RESET_SLOT,this.stateName)},200)}handleWorkerMessage=e=>{const{type:t,name:r,payload:s}=e.data;t==="EVENT"&&this.onWorkerEvent(r,s)};handleKeyDown=e=>{this.onKeyDown(e)}}const _0={"Level 1":{width:960,height:540,initialHP:100,spawnCount:10,heroStartX:480,heroStartY:270,moveSpeed:5,manifestPath:"res/manifest.json",bgmKey:"bgm_level1",levelLabel:"Level 1"},"Level 2":{width:960,height:540,initialHP:80,spawnCount:20,heroStartX:100,heroStartY:100,moveSpeed:6,manifestPath:"res/manifest.json",bgmKey:"bgm_level1",levelLabel:"Level 2"},"Level 3":{width:960,height:540,initialHP:50,spawnCount:35,heroStartX:800,heroStartY:450,moveSpeed:8,manifestPath:"res/manifest.json",bgmKey:"bgm_level1",levelLabel:"Level 3"}};var oo=(n=>(n.Level1="Level 1",n.Level2="Level 2",n.Level3="Level 3",n))(oo||{});const QA=n=>{const e=_0[n];return e||(console.warn(`Config for ${n} not found, falling back to Level 1`),_0["Level 1"])};class qc{static campaigns=new Map;static register(e){this.campaigns.set(e.id,e)}static get(e){return this.campaigns.get(e)}static getAll(){return Array.from(this.campaigns.values())}}class ks{static instance;constructor(){}static getInstance(){return ks.instance||(ks.instance=new ks),ks.instance}startCampaign(e){const t=qc.get(e);if(!t){console.error(`[CampaignManager] Could not find campaign: ${e}`);return}console.log(`[CampaignManager] Starting Campaign: ${e}`);const r=Qn.getInstance();r.clearSavableKeys(),r.set("campaign_id",e),r.set("campaign_step_index",0),this.loadCurrentStep(t,0)}completeCurrentStep(){const e=Qn.getInstance(),t=e.get("campaign_id");let r=e.get("campaign_step_index");if(!t||r===void 0){console.error("[CampaignManager] Cannot advance: No active campaign session.");return}const s=qc.get(t);s&&(r++,e.set("campaign_step_index",r),r>=s.steps.length?this.quitCampaign():this.loadCurrentStep(s,r))}retryCurrentStep(){const e=Qn.getInstance(),t=e.get("campaign_id"),r=e.get("campaign_step_index");if(!t||r===void 0)return;const s=qc.get(t);s&&(console.log(`[CampaignManager] Retrying step ${r}`),e.clearSavableKeys(),e.set("campaign_id",t),e.set("campaign_step_index",r),this.loadCurrentStep(s,r))}failCurrentStep(e){const r=Qn.getInstance().get("campaign_id");if(!r){console.error("No active campaign to fail."),this.quitCampaign();return}const s=qc.get(r);if(s&&s.failFactory){console.log("[CampaignManager] Campaign Failed. Loading Fail State.");const a=s.failFactory(e);Ar.getInstance().replace(a)}else console.warn("No failFactory defined for this campaign. Quitting."),this.quitCampaign()}quitCampaign(){const e=Qn.getInstance();e.clearSavableKeys(),e.set("campaign_id",null),e.set("campaign_step_index",0),console.log("[CampaignManager] Quitting to Menu."),Ar.getInstance().replace(new Dw)}loadCurrentStep(e,t){const r=e.steps[t];console.log(`[CampaignManager] Loading Step ${t}: ${r.name}`);const s=r.factory(r.config);Ar.getInstance().replace(s,r.loadingConfig)}}class ZA extends _w{constructor(e){super(e,"Game1")}takeDamage(){this.send("TAKE_DAMAGE",{amount:15})}async jumpToGame2(){const{Game2State:e}=await cu(async()=>{const{Game2State:t}=await Promise.resolve().then(()=>uy);return{Game2State:t}},void 0);await Ar.getInstance().replace(new e(!1))}async loadLevel(e){const{Game1State:t}=await cu(async()=>{const{Game1State:r}=await Promise.resolve().then(()=>ly);return{Game1State:r}},void 0);await Ar.getInstance().replace(new t(!1,e))}nextLevel(){ks.getInstance().completeCurrentStep()}failLevel(){ks.getInstance().failCurrentStep()}async resetLevel(){await Ma.getInstance().performLoad(this.RESET_SLOT);const{Game1State:e}=await cu(async()=>{const{Game1State:r}=await Promise.resolve().then(()=>ly);return{Game1State:r}},void 0),t=this.vm.currentLevel||oo.Level1;await Ar.getInstance().replace(new e(!1,t))}onKeyDown(e){e.key==="Escape"&&this.openPauseMenu()}onWorkerEvent(e){e==="EXPLOSION_REQ"&&ka.getInstance().play("sfx_explosion")}async openPauseMenu(){const{PauseMenuState:e}=await cu(async()=>{const{PauseMenuState:r}=await import("./PauseMenuState-D2DF8Lc5.js");return{PauseMenuState:r}},[]),t=Ar.getInstance();t.getCurrentStateName()===this.stateName&&await t.push(new e)}}class xw{listeners=[];constructor(){this._sharedView=Fo.getInstance().sharedView}_sharedView;get sharedView(){return this._sharedView}setBuffer(e){this._sharedView=e}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}update(){this.notify()}notify(){for(let e=0;e<this.listeners.length;e++)this.listeners[e]()}}const ro={HERO_X:0,HERO_Y:1,HERO_ROTATION:2,HERO_SCALE:3,HERO_HP_DISPLAY:4,HERO_FRAME:5,ACTIVE_ROCK_COUNT:6,ROCKS_START_INDEX:10,ROCK_STRIDE:3,BUFFER_SIZE:4096};class JA extends xw{get pos(){return{x:this.sharedView[ro.HERO_X]||0,y:this.sharedView[ro.HERO_Y]||0}}get hp(){return this.sharedView[ro.HERO_HP_DISPLAY]||0}get entityCount(){return Math.floor(this.sharedView[ro.ACTIVE_ROCK_COUNT]||0)}get heroVisuals(){return{x:this.sharedView[ro.HERO_X]||0,y:this.sharedView[ro.HERO_Y]||0,rotation:this.sharedView[ro.HERO_ROTATION]||0,scale:this.sharedView[ro.HERO_SCALE]||1,currentFrame:this.sharedView[ro.HERO_FRAME]||0}}getRockViewData(e){const t=ro.ROCKS_START_INDEX+e*ro.ROCK_STRIDE;return{x:this.sharedView[t]||0,y:this.sharedView[t+1]||0,rotation:this.sharedView[t+2]||0}}}var og={exports:{}},ag={exports:{}},lg,x0;function eC(){if(x0)return lg;x0=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return lg=n,lg}var ug,w0;function tC(){if(w0)return ug;w0=1;var n=eC();function e(){}function t(){}return t.resetWarningCache=e,ug=function(){function r(c,f,m,_,w,d){if(d!==n){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},ug}var b0;function rC(){return b0||(b0=1,ag.exports=tC()()),ag.exports}var nC=rC();const Dr=sh(nC);function Ms(n){return Ms=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ms(n)}function ww(n){var e=(function(t,r){if(Ms(t)!=="object"||t===null)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var a=s.call(t,r);if(Ms(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)})(n,"string");return Ms(e)==="symbol"?e:String(e)}function hn(n,e,t){return(e=ww(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cg(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function xl(n){return(function(e){if(Array.isArray(e))return cg(e)})(n)||(function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)})(n)||(function(e,t){if(e){if(typeof e=="string")return cg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cg(e,t):void 0}})(n)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function Jr(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),s=2;s<t;s++)r[s-2]=arguments[s]}var iC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var oC=function(n){return n==null};function ed(n){var e=[];if(n===void 0)return e;if(typeof n=="string")e=n.split(",");else if(typeof n=="number")e=[n];else if(Array.isArray(n))e=xl(n);else{if(n===null||Ms(n)!=="object")return e;e=[n&&n?.x||0,n&&n?.y||0]}return e.filter((function(t){return!oC(t)&&!isNaN(t)})).map(Number)}function S0(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function hg(n){return n instanceof er||n instanceof Ra}var Bf=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function dg(n,e,t){if(hg(n[e])&&hg(t))n[e].copyFrom(t);else if(hg(n[e])){var r=ed(t);Jr(r!==void 0&&r.length>0&&r.length<3,"The property `%s` is a `Point` and must be set to a comma-separated string of either coordinates, an array containing coordinates, or a Point.",e,JSON.stringify(t),Ms(t)),n[e].set(r.shift(),r.shift())}else n[e]=t}var Gc,bw=function(n){var e,t=n;if(!Array.isArray(t)){if(e=n,Object.prototype.toString.call(e)!=="[object Object]")throw new Error("collection needs to be an Array or Object");t=Object.keys(n)}var r={};return t.forEach((function(s){r[s]=!0})),function(s){return r[s]!==void 0}},Sw=function(n){return function(){return!n.apply(void 0,arguments)}},ty="children",aC=(hn(Gc={},ty,!0),hn(Gc,"parent",!0),hn(Gc,"worldAlpha",!0),hn(Gc,"worldTransform",!0),hn(Gc,"worldVisible",!0),Gc),ry={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},Fa=function(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=function(f){return requestAnimationFrame((function(){var m,_;f==null||(m=f.__reactpixi)===null||m===void 0||(_=m.root)===null||_===void 0||_.emit("__REACT_PIXI_REQUEST_RENDER__")}))},s=function(f,m){if(t.hasOwnProperty(f))return Jr(m.typeofs.some((function(_){return Ms(t[f])===_}))||m.instanceofs.some((function(_){return t[f]instanceof _})),"".concat(n," ").concat(f," prop is invalid")),t[f]};if(t.texture)return Jr(t.texture instanceof lt,"".concat(n," texture needs to be typeof `Texture`")),t.texture;var a=s("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||s("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||s("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,lt]});Jr(!!a,"".concat(n," could not get texture from props"));var c=lt.from(a);return c.__reactpixi={root:e},c.once("update",r),c.once("loaded",r),c.valid&&r(c),c},lC=Sw(bw([].concat(xl(Object.keys(aC)),xl(Bf))));function Ba(n,e,t){var r=!1;if(Jr(jr.prototype.isPrototypeOf(n),"instance needs to be typeof `DisplayObject`, got `%s`",Ms(n)),!t.ignoreEvents)for(var s=typeof n.removeListener=="function",a=typeof n.on=="function",c=0;c<Bf.length;c++){var f=Bf[c];e[f]!==t[f]&&(r=!0,typeof e[f]=="function"&&s&&n.removeListener(f,e[f]),typeof t[f]=="function"&&a&&n.on(f,t[f]))}var m=Object.keys(t||{});if(t.overwriteProps){for(var _=0;_<m.length;_++){var w=m[_];e[w]!==t[w]&&(r=!0,dg(n,w,t[w]))}return r}for(var d=m.filter(lC),v=0;v<d.length;v++){var b=d[v],T=t[b];t[b]!==e[b]&&(r=!0),T!==void 0?dg(n,b,T):b in ry?(console.warn("setting default value: ".concat(b,", from: ").concat(n[b]," to: ").concat(T," for"),n),r=!0,dg(n,b,ry[b])):console.warn("ignoring prop: ".concat(b,", from ").concat(n[b]," to ").concat(T," for"),n)}return r}var uC=function(n,e){var t=e.text,r=e.style;return new BA(t,r)},cC=function(){return new Di};function vu(n,e){if(n==null)return{};var t,r,s=(function(c,f){if(c==null)return{};var m,_,w={},d=Object.keys(c);for(_=0;_<d.length;_++)m=d[_],f.indexOf(m)>=0||(w[m]=c[m]);return w})(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}var hC=["draw","geometry"],dC=function(n,e){var t=e.geometry;Jr(!t||t instanceof rd,"Graphics geometry needs to be a `Graphics`");var r=t?new rd(t.geometry):new rd;return r.applyProps=function(s,a,c){var f=c.draw;c.geometry;var m=Ba(s,a,vu(c,hC));return a.draw!==f&&typeof f=="function"&&(m=!0,f.call(r,r)),m},r},fC=["image","texture"],pC=function(n,e){var t=e.leftWidth,r=t===void 0?10:t,s=e.topHeight,a=s===void 0?10:s,c=e.rightWidth,f=c===void 0?10:c,m=e.bottomHeight,_=m===void 0?10:m,w=Fa("NineSlicePlane",n,e),d=new aA(w,r,a,f,_);return d.applyProps=function(v,b,T){var R=T.image,k=T.texture,L=Ba(v,b,vu(T,fC));return(R||k)&&(k!==b.texture&&(L=!0),v.texture=Fa("NineSlicePlane",n,T)),L},d};function E0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.push.apply(t,r)}return t}function cf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?E0(Object(t),!0).forEach((function(r){hn(n,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):E0(Object(t)).forEach((function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))}))}return n}var mC=function(n,e){var t=e.maxSize,r=t===void 0?1500:t,s=e.batchSize,a=s===void 0?16384:s,c=e.autoResize,f=c!==void 0&&c,m=cf(cf({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),e.properties||{}),_=cf(cf({},{children:!1,texture:!1,baseTexture:!1}),e.destroyOptions||{}),w=new cA(r,m,a,f);return w.willUnmount=function(d,v,b){d.destroy(_)},w},gC=["image","texture"],yC=function(n,e){var t=new Vo(Fa("Sprite",n,e));return t.applyProps=function(r,s,a){var c=a.image,f=a.texture,m=Ba(r,s,vu(a,gC));return(f&&s.texture!==a.texture||c&&s.image!==a.image)&&(s.texture!==a.texture&&(m=!0),r.texture=Fa("Sprite",n,a)),m},t},vC=["textures","isPlaying","initialFrame","images"],_C=function(n,e){var t=e.textures,r=e.images,s=e.isPlaying,a=s===void 0||s,c=e.initialFrame,f=function(_){return _.map((function(w){return Jr(w instanceof lt||w?.texture,"AnimationSprite texture needs to be an array of `Texture` or `{ texture: Texture, time:\n                number }`"),w}))},m=r?od.fromImages(r):new od(f(t));return m[a?"gotoAndPlay":"gotoAndStop"](c||0),m.applyProps=function(_,w,d){var v=d.textures,b=d.isPlaying,T=d.initialFrame,R=d.images,k=Ba(_,w,vu(d,vC));if(R&&w.images!==R){for(var L=[],W=0;W<R.length;++W)L.push(lt.from(R[W]));_.textures=L,k=!0}if(v&&w.textures!==v&&(_.textures=f(v),k=!0),b!==w.isPlaying||T!==w.initialFrame){var z=typeof T=="number"?T:m.currentFrame||0;m[b?"gotoAndPlay":"gotoAndStop"](z),k=!0}return k},m},xC=function(n,e){var t=e.text,r=t===void 0?"":t,s=e.style,a=s===void 0?{}:s,c=e.isSprite,f=new by(r,a);return c?(f.updateText(),new Vo(f.texture)):f},wC=["tileScale","tilePosition","image","texture"],bC=function(n,e){var t=e.width,r=t===void 0?100:t,s=e.height,a=s===void 0?100:s,c=Fa("TilingSprite",n,e),f=new Sy(c,r,a);return f.applyProps=function(m,_,w){var d=w.tileScale,v=w.tilePosition,b=w.image,T=w.texture,R=Ba(m,_,vu(w,wC));if(v){var k,L=ed(v);(k=m.tilePosition).set.apply(k,xl(L)),R=!S0(ed(_.tilePosition),L)||R}if(d){var W,z=ed(d);(W=m.tileScale).set.apply(W,xl(z)),R=!S0(ed(_.tileScale),z)||R}return(b||T)&&(T!==_.texture&&(R=!0),m.texture=Fa("Sprite",n,w)),R},f},SC=["image","texture"],EC=function(n,e){var t=Fa("Mesh",n,e),r=e.vertices,s=e.uvs,a=e.indices,c=e.drawMode,f=c===void 0?Bo.TRIANGLES:c,m=new lA(t,r,s,a,f);return m.applyProps=function(_,w,d){var v=d.image,b=d.texture,T=Ba(_,w,vu(d,SC));return(v||b)&&(b!==w.texture&&(T=!0),_.texture=Fa("Mesh",n,d)),T},m},TC=["image","texture"],AC=function(n,e){var t=Fa("SimpleRope",n,e),r=e.points,s=new uA(t,r);return s.applyProps=function(a,c,f){var m=f.image,_=f.texture,w=vu(f,TC);Jr(Array.isArray(f.points),"SimpleRope points needs to be %s","Array<Point>");var d=Ba(a,c,w);return(m||_)&&(_!==c.texture&&(d=!0),a.texture=Fa("SimpleRope",n,f)),d},s},CC=Object.freeze({__proto__:null,BitmapText:uC,Container:cC,Graphics:dC,NineSlicePlane:pC,ParticleContainer:mC,Sprite:yC,Text:xC,TilingSprite:bC,SimpleMesh:EC,SimpleRope:AC,AnimatedSprite:_C});function T0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.push.apply(t,r)}return t}function A0(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?T0(Object(t),!0).forEach((function(r){hn(n,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):T0(Object(t)).forEach((function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))}))}return n}var ms={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},IC=Object.keys(ms).reduce((function(n,e){return A0(A0({},n),{},hn({},e,CC[e]))}),{}),Ew={};function PC(n,e){return Jr(!!n,"Expect type to be defined, got `%s`",n),Jr(!ms[n],"Component `%s` could not be created, already exists in default components.",n),Ew[n]=e,n}var C0,I0,P0,R0,ny={},iy={},RC={get exports(){return iy},set exports(n){iy=n}},k0={};function kC(){return I0||(I0=1,RC.exports=(C0||(C0=1,(function(n){function e(D,Y){var j=D.length;D.push(Y);e:for(;0<j;){var U=j-1>>>1,q=D[U];if(!(0<s(q,Y)))break e;D[U]=Y,D[j]=q,j=U}}function t(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var Y=D[0],j=D.pop();if(j!==Y){D[0]=j;e:for(var U=0,q=D.length,ce=q>>>1;U<ce;){var Ae=2*(U+1)-1,Me=D[Ae],Fe=Ae+1,je=D[Fe];if(0>s(Me,j))Fe<q&&0>s(je,Me)?(D[U]=je,D[Fe]=j,U=Fe):(D[U]=Me,D[Ae]=j,U=Ae);else{if(!(Fe<q&&0>s(je,j)))break e;D[U]=je,D[Fe]=j,U=Fe}}}return Y}function s(D,Y){var j=D.sortIndex-Y.sortIndex;return j!==0?j:D.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],_=[],w=1,d=null,v=3,b=!1,T=!1,R=!1,k=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function z(D){for(var Y=t(_);Y!==null;){if(Y.callback===null)r(_);else{if(!(Y.startTime<=D))break;r(_),Y.sortIndex=Y.expirationTime,e(m,Y)}Y=t(_)}}function te(D){if(R=!1,z(D),!T)if(t(m)!==null)T=!0,H(K);else{var Y=t(_);Y!==null&&V(te,Y.startTime-D)}}function K(D,Y){T=!1,R&&(R=!1,L(ye),ye=-1),b=!0;var j=v;try{for(z(Y),d=t(m);d!==null&&(!(d.expirationTime>Y)||D&&!ge());){var U=d.callback;if(typeof U=="function"){d.callback=null,v=d.priorityLevel;var q=U(d.expirationTime<=Y);Y=n.unstable_now(),typeof q=="function"?d.callback=q:d===t(m)&&r(m),z(Y)}else r(m);d=t(m)}if(d!==null)var ce=!0;else{var Ae=t(_);Ae!==null&&V(te,Ae.startTime-Y),ce=!1}return ce}finally{d=null,v=j,b=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var de,F=!1,ie=null,ye=-1,Oe=5,Pe=-1;function ge(){return!(n.unstable_now()-Pe<Oe)}function ve(){if(ie!==null){var D=n.unstable_now();Pe=D;var Y=!0;try{Y=ie(!0,D)}finally{Y?de():(F=!1,ie=null)}}else F=!1}if(typeof W=="function")de=function(){W(ve)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,qe=we.port2;we.port1.onmessage=ve,de=function(){qe.postMessage(null)}}else de=function(){k(ve,0)};function H(D){ie=D,F||(F=!0,de())}function V(D,Y){ye=k((function(){D(n.unstable_now())}),Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){T||b||(T=!0,H(K))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Oe=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(D){switch(v){case 1:case 2:case 3:var Y=3;break;default:Y=v}var j=v;v=Y;try{return D()}finally{v=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,Y){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var j=v;v=D;try{return Y()}finally{v=j}},n.unstable_scheduleCallback=function(D,Y,j){var U=n.unstable_now();switch(j=typeof j=="object"&&j!==null&&typeof(j=j.delay)=="number"&&0<j?U+j:U,D){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return D={id:w++,callback:Y,priorityLevel:D,startTime:j,expirationTime:q=j+q,sortIndex:-1},j>U?(D.sortIndex=j,e(_,D),t(m)===null&&D===t(_)&&(R?(L(ye),ye=-1):R=!0,V(te,j-U))):(D.sortIndex=q,e(m,D),T||b||(T=!0,H(K))),D},n.unstable_shouldYield=ge,n.unstable_wrapCallback=function(D){var Y=v;return function(){var j=v;v=Y;try{return D.apply(this,arguments)}finally{v=j}}}})(k0)),k0)),iy}function MC(){return R0||(R0=1,P0=function(n){var e={},t=fn,r=kC(),s=Object.assign;function a(l){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+l,y=1;y<arguments.length;y++)u+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,f=Symbol.for("react.element"),m=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),b=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),z=Symbol.for("react.offscreen"),te=Symbol.iterator;function K(l){return l===null||typeof l!="object"?null:typeof(l=te&&l[te]||l["@@iterator"])=="function"?l:null}function de(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case _:return"Fragment";case m:return"Portal";case d:return"Profiler";case w:return"StrictMode";case R:return"Suspense";case k:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case b:return(l.displayName||"Context")+".Consumer";case v:return(l._context.displayName||"Context")+".Provider";case T:var u=l.render;return(l=l.displayName)||(l=(l=u.displayName||u.name||"")!==""?"ForwardRef("+l+")":"ForwardRef"),l;case L:return(u=l.displayName||null)!==null?u:de(l.type)||"Memo";case W:u=l._payload,l=l._init;try{return de(l(u))}catch{}}return null}function F(l){var u=l.type;switch(l.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=(l=u.render).displayName||l.name||"",u.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(u);case 8:return u===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function ie(l){var u=l,y=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do(4098&(u=l).flags)!=0&&(y=u.return),l=u.return;while(l)}return u.tag===3?y:null}function ye(l){if(ie(l)!==l)throw Error(a(188))}function Oe(l){var u=l.alternate;if(!u){if((u=ie(l))===null)throw Error(a(188));return u!==l?null:l}for(var y=l,E=u;;){var C=y.return;if(C===null)break;var O=C.alternate;if(O===null){if((E=C.return)!==null){y=E;continue}break}if(C.child===O.child){for(O=C.child;O;){if(O===y)return ye(C),l;if(O===E)return ye(C),u;O=O.sibling}throw Error(a(188))}if(y.return!==E.return)y=C,E=O;else{for(var $=!1,ue=C.child;ue;){if(ue===y){$=!0,y=C,E=O;break}if(ue===E){$=!0,E=C,y=O;break}ue=ue.sibling}if(!$){for(ue=O.child;ue;){if(ue===y){$=!0,y=O,E=C;break}if(ue===E){$=!0,E=O,y=C;break}ue=ue.sibling}if(!$)throw Error(a(189))}}if(y.alternate!==E)throw Error(a(190))}if(y.tag!==3)throw Error(a(188));return y.stateNode.current===y?l:u}function Pe(l){return(l=Oe(l))!==null?ge(l):null}function ge(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var u=ge(l);if(u!==null)return u;l=l.sibling}return null}function ve(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){if(l.tag!==4){var u=ve(l);if(u!==null)return u}l=l.sibling}return null}var we,qe=Array.isArray,H=n.getPublicInstance,V=n.getRootHostContext,D=n.getChildHostContext,Y=n.prepareForCommit,j=n.resetAfterCommit,U=n.createInstance,q=n.appendInitialChild,ce=n.finalizeInitialChildren,Ae=n.prepareUpdate,Me=n.shouldSetTextContent,Fe=n.createTextInstance,je=n.scheduleTimeout,Ke=n.cancelTimeout,it=n.noTimeout,Se=n.isPrimaryRenderer,ot=n.supportsMutation,Qe=n.supportsPersistence,gt=n.supportsHydration,Bt=n.getInstanceFromNode,dt=n.preparePortalMount,vt=n.getCurrentEventPriority,mr=n.detachDeletedInstance,Cr=n.supportsMicrotasks,Li=n.scheduleMicrotask,Nr=n.supportsTestSelectors,hr=n.findFiberRoot,yi=n.getBoundingRect,jn=n.getTextContent,Cn=n.isHiddenSubtree,Os=n.matchAccessibilityRole,pn=n.setFocusIfFocusable,Zn=n.setupIntersectionObserver,Ds=n.appendChild,Jn=n.appendChildToContainer,vi=n.commitTextUpdate,_i=n.commitMount,gs=n.commitUpdate,ao=n.insertBefore,Ls=n.insertInContainerBefore,zn=n.removeChild,re=n.removeChildFromContainer,Ie=n.resetTextContent,Nt=n.hideInstance,Zt=n.hideTextInstance,ze=n.unhideInstance,kt=n.unhideTextInstance,mn=n.clearContainer,ei=n.cloneInstance,$r=n.createContainerChildSet,In=n.appendChildToContainerChildSet,$o=n.finalizeContainerChildren,xi=n.replaceContainerChildren,Mr=n.cloneHiddenInstance,wi=n.cloneHiddenTextInstance,Ni=n.canHydrateInstance,ys=n.canHydrateTextInstance,qt=n.canHydrateSuspenseInstance,br=n.isSuspenseInstancePending,ti=n.isSuspenseInstanceFallback,bi=n.getSuspenseInstanceFallbackErrorDetails,Si=n.registerSuspenseInstanceRetry,ri=n.getNextHydratableSibling,wl=n.getFirstHydratableChild,ni=n.getFirstHydratableChildWithinContainer,vs=n.getFirstHydratableChildWithinSuspenseInstance,Xr=n.hydrateInstance,Ns=n.hydrateTextInstance,bl=n.hydrateSuspenseInstance,ii=n.getNextHydratableInstanceAfterSuspenseInstance,Fi=n.commitHydratedContainer,Hn=n.commitHydratedSuspenseInstance,Ga=n.clearSuspenseBoundary,lo=n.clearSuspenseBoundaryFromContainer,Or=n.shouldDeleteUnhydratedTailInstances,uo=n.didNotMatchHydratedContainerTextInstance,nr=n.didNotMatchHydratedTextInstance;function Xo(l){if(we===void 0)try{throw Error()}catch(y){var u=y.stack.trim().match(/\n( *(at )?)/);we=u&&u[1]||""}return`
`+we+l}var Bi=!1;function co(l,u){if(!l||Bi)return"";Bi=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Le){var E=Le}Reflect.construct(l,[],u)}else{try{u.call()}catch(Le){E=Le}l.call(u.prototype)}else{try{throw Error()}catch(Le){E=Le}l()}}catch(Le){if(Le&&E&&typeof Le.stack=="string"){for(var C=Le.stack.split(`
`),O=E.stack.split(`
`),$=C.length-1,ue=O.length-1;1<=$&&0<=ue&&C[$]!==O[ue];)ue--;for(;1<=$&&0<=ue;$--,ue--)if(C[$]!==O[ue]){if($!==1||ue!==1)do if($--,0>--ue||C[$]!==O[ue]){var Te=`
`+C[$].replace(" at new "," at ");return l.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",l.displayName)),Te}while(1<=$&&0<=ue);break}}}finally{Bi=!1,Error.prepareStackTrace=y}return(l=l?l.displayName||l.name:"")?Xo(l):""}var qo=Object.prototype.hasOwnProperty,ja=[],Vn=-1;function si(l){return{current:l}}function Wt(l){0>Vn||(l.current=ja[Vn],ja[Vn]=null,Vn--)}function dr(l,u){Vn++,ja[Vn]=l.current,l.current=u}var Rt={},en=si(Rt),xn=si(!1),Ui=Rt;function Wn(l,u){var y=l.type.contextTypes;if(!y)return Rt;var E=l.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===u)return E.__reactInternalMemoizedMaskedChildContext;var C,O={};for(C in y)O[C]=u[C];return E&&((l=l.stateNode).__reactInternalMemoizedUnmaskedChildContext=u,l.__reactInternalMemoizedMaskedChildContext=O),O}function tn(l){return(l=l.childContextTypes)!=null}function Fs(){Wt(xn),Wt(en)}function Ko(l,u,y){if(en.current!==Rt)throw Error(a(168));dr(en,u),dr(xn,y)}function fr(l,u,y){var E=l.stateNode;if(u=u.childContextTypes,typeof E.getChildContext!="function")return y;for(var C in E=E.getChildContext())if(!(C in u))throw Error(a(108,F(l)||"Unknown",C));return s({},y,E)}function Bs(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Rt,Ui=en.current,dr(en,l),dr(xn,xn.current),!0}function Us(l,u,y){var E=l.stateNode;if(!E)throw Error(a(169));y?(l=fr(l,u,Ui),E.__reactInternalMemoizedMergedChildContext=l,Wt(xn),Wt(en),dr(en,l)):Wt(xn),dr(xn,y)}var rn=Math.clz32?Math.clz32:function(l){return(l>>>=0)===0?32:31-(za(l)/ho|0)|0},za=Math.log,ho=Math.LN2,Yo=64,Qo=4194304;function $t(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&l;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&l;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function Zo(l,u){var y=l.pendingLanes;if(y===0)return 0;var E=0,C=l.suspendedLanes,O=l.pingedLanes,$=268435455&y;if($!==0){var ue=$&~C;ue!==0?E=$t(ue):(O&=$)!==0&&(E=$t(O))}else($=y&~C)!==0?E=$t($):O!==0&&(E=$t(O));if(E===0)return 0;if(u!==0&&u!==E&&(u&C)==0&&((C=E&-E)>=(O=u&-u)||C===16&&(4194240&O)!=0))return u;if((4&E)!=0&&(E|=16&y),(u=l.entangledLanes)!==0)for(l=l.entanglements,u&=E;0<u;)C=1<<(y=31-rn(u)),E|=l[y],u&=~C;return E}function fc(l,u){switch(l){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;default:return-1}}function Xt(l){return(l=-1073741825&l.pendingLanes)!==0?l:1073741824&l?1073741824:0}function Sl(){var l=Yo;return(4194240&(Yo<<=1))==0&&(Yo=64),l}function El(l){for(var u=[],y=0;31>y;y++)u.push(l);return u}function Jo(l,u,y){l.pendingLanes|=u,u!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),(l=l.eventTimes)[u=31-rn(u)]=y}function nn(l,u){var y=l.entangledLanes|=u;for(l=l.entanglements;y;){var E=31-rn(y),C=1<<E;C&u|l[E]&u&&(l[E]|=u),y&=~C}}var Ut=0;function oi(l){return 1<(l&=-l)?4<l?(268435455&l)!=0?16:536870912:4:1}var sn=r.unstable_scheduleCallback,Gi=r.unstable_cancelCallback,ea=r.unstable_shouldYield,Ir=r.unstable_requestPaint,Kt=r.unstable_now,fo=r.unstable_ImmediatePriority,ta=r.unstable_UserBlockingPriority,Gs=r.unstable_NormalPriority,js=r.unstable_IdlePriority,Ha=null,Pr=null,Pn=typeof Object.is=="function"?Object.is:function(l,u){return l===u&&(l!==0||1/l==1/u)||l!=l&&u!=u},ji=null,zi=!1,Ei=!1;function _s(l){ji===null?ji=[l]:ji.push(l)}function Rn(){if(!Ei&&ji!==null){Ei=!0;var l=0,u=Ut;try{var y=ji;for(Ut=1;l<y.length;l++){var E=y[l];do E=E(!0);while(E!==null)}ji=null,zi=!1}catch(C){throw ji!==null&&(ji=ji.slice(l+1)),sn(fo,Rn),C}finally{Ut=u,Ei=!1}}return null}var ra=[],Hi=0,na=null,po=0,on=[],gn=0,yn=null,ai=1,li="";function zs(l,u){ra[Hi++]=po,ra[Hi++]=na,na=l,po=u}function mo(l,u,y){on[gn++]=ai,on[gn++]=li,on[gn++]=yn,yn=l;var E=ai;l=li;var C=32-rn(E)-1;E&=~(1<<C),y+=1;var O=32-rn(u)+C;if(30<O){var $=C-C%5;O=(E&(1<<$)-1).toString(32),E>>=$,C-=$,ai=1<<32-rn(u)+C|y<<C|E,li=O+l}else ai=1<<O|y<<C|E,li=l}function Hs(l){l.return!==null&&(zs(l,1),mo(l,1,0))}function Va(l){for(;l===na;)na=ra[--Hi],ra[Hi]=null,po=ra[--Hi],ra[Hi]=null;for(;l===yn;)yn=on[--gn],on[gn]=null,li=on[--gn],on[gn]=null,ai=on[--gn],on[gn]=null}var lr=null,Fr=null,ir=!1,Vi=!1,Ti=null;function xs(l,u){var y=ki(5,null,null,0);y.elementType="DELETED",y.stateNode=u,y.return=l,(u=l.deletions)===null?(l.deletions=[y],l.flags|=16):u.push(y)}function ia(l,u){switch(l.tag){case 5:return(u=Ni(u,l.type,l.pendingProps))!==null&&(l.stateNode=u,lr=l,Fr=wl(u),!0);case 6:return(u=ys(u,l.pendingProps))!==null&&(l.stateNode=u,lr=l,Fr=null,!0);case 13:if((u=qt(u))!==null){var y=yn!==null?{id:ai,overflow:li}:null;return l.memoizedState={dehydrated:u,treeContext:y,retryLane:1073741824},(y=ki(18,null,null,0)).stateNode=u,y.return=l,l.child=y,lr=l,Fr=null,!0}return!1;default:return!1}}function ws(l){return(1&l.mode)!=0&&(128&l.flags)==0}function Vs(l){if(ir){var u=Fr;if(u){var y=u;if(!ia(l,u)){if(ws(l))throw Error(a(418));u=ri(y);var E=lr;u&&ia(l,u)?xs(E,y):(l.flags=-4097&l.flags|2,ir=!1,lr=l)}}else{if(ws(l))throw Error(a(418));l.flags=-4097&l.flags|2,ir=!1,lr=l}}}function Wa(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;lr=l}function zr(l){if(!gt||l!==lr)return!1;if(!ir)return Wa(l),ir=!0,!1;if(l.tag!==3&&(l.tag!==5||Or(l.type)&&!Me(l.type,l.memoizedProps))){var u=Fr;if(u){if(ws(l))throw sa(),Error(a(418));for(;u;)xs(l,u),u=ri(u)}}if(Wa(l),l.tag===13){if(!gt)throw Error(a(316));if(!(l=(l=l.memoizedState)!==null?l.dehydrated:null))throw Error(a(317));Fr=ii(l)}else Fr=lr?ri(l.stateNode):null;return!0}function sa(){for(var l=Fr;l;)l=ri(l)}function Wi(){gt&&(Fr=lr=null,Vi=ir=!1)}function oa(l){Ti===null?Ti=[l]:Ti.push(l)}var Tl=c.ReactCurrentBatchConfig;function $a(l,u){if(Pn(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var y=Object.keys(l),E=Object.keys(u);if(y.length!==E.length)return!1;for(E=0;E<y.length;E++){var C=y[E];if(!qo.call(u,C)||!Pn(l[C],u[C]))return!1}return!0}function pc(l){switch(l.tag){case 5:return Xo(l.type);case 16:return Xo("Lazy");case 13:return Xo("Suspense");case 19:return Xo("SuspenseList");case 0:case 2:case 15:return l=co(l.type,!1);case 11:return l=co(l.type.render,!1);case 1:return l=co(l.type,!0);default:return""}}function kn(l,u){if(l&&l.defaultProps){for(var y in u=s({},u),l=l.defaultProps)u[y]===void 0&&(u[y]=l[y]);return u}return u}var aa=si(null),Ai=null,Ws=null,Xa=null;function la(){Xa=Ws=Ai=null}function Al(l,u,y){Se?(dr(aa,u._currentValue),u._currentValue=y):(dr(aa,u._currentValue2),u._currentValue2=y)}function ua(l){var u=aa.current;Wt(aa),Se?l._currentValue=u:l._currentValue2=u}function _u(l,u,y){for(;l!==null;){var E=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,E!==null&&(E.childLanes|=u)):E!==null&&(E.childLanes&u)!==u&&(E.childLanes|=u),l===y)break;l=l.return}}function $s(l,u){Ai=l,Xa=Ws=null,(l=l.dependencies)!==null&&l.firstContext!==null&&((l.lanes&u)!=0&&(Ur=!0),l.firstContext=null)}function wn(l){var u=Se?l._currentValue:l._currentValue2;if(Xa!==l)if(l={context:l,memoizedValue:u,next:null},Ws===null){if(Ai===null)throw Error(a(308));Ws=l,Ai.dependencies={lanes:0,firstContext:l}}else Ws=Ws.next=l;return u}var Xs=null;function qa(l){Xs===null?Xs=[l]:Xs.push(l)}function Cl(l,u,y,E){var C=u.interleaved;return C===null?(y.next=y,qa(u)):(y.next=C.next,C.next=y),u.interleaved=y,$i(l,E)}function $i(l,u){l.lanes|=u;var y=l.alternate;for(y!==null&&(y.lanes|=u),y=l,l=l.return;l!==null;)l.childLanes|=u,(y=l.alternate)!==null&&(y.childLanes|=u),y=l,l=l.return;return y.tag===3?y.stateNode:null}var bs=!1;function xu(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wu(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Xi(l,u){return{eventTime:l,lane:u,tag:0,payload:null,callback:null,next:null}}function qi(l,u,y){var E=l.updateQueue;if(E===null)return null;if(E=E.shared,(2&Gt)!=0){var C=E.pending;return C===null?u.next=u:(u.next=C.next,C.next=u),E.pending=u,$i(l,y)}return(C=E.interleaved)===null?(u.next=u,qa(E)):(u.next=C.next,C.next=u),E.interleaved=u,$i(l,y)}function Ss(l,u,y){if((u=u.updateQueue)!==null&&(u=u.shared,(4194240&y)!=0)){var E=u.lanes;y|=E&=l.pendingLanes,u.lanes=y,nn(l,y)}}function Il(l,u){var y=l.updateQueue,E=l.alternate;if(E!==null&&y===(E=E.updateQueue)){var C=null,O=null;if((y=y.firstBaseUpdate)!==null){do{var $={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};O===null?C=O=$:O=O.next=$,y=y.next}while(y!==null);O===null?C=O=u:O=O.next=u}else C=O=u;return y={baseState:E.baseState,firstBaseUpdate:C,lastBaseUpdate:O,shared:E.shared,effects:E.effects},void(l.updateQueue=y)}(l=y.lastBaseUpdate)===null?y.firstBaseUpdate=u:l.next=u,y.lastBaseUpdate=u}function ca(l,u,y,E){var C=l.updateQueue;bs=!1;var O=C.firstBaseUpdate,$=C.lastBaseUpdate,ue=C.shared.pending;if(ue!==null){C.shared.pending=null;var Te=ue,Le=Te.next;Te.next=null,$===null?O=Le:$.next=Le,$=Te;var Ue=l.alternate;Ue!==null&&(ue=(Ue=Ue.updateQueue).lastBaseUpdate)!==$&&(ue===null?Ue.firstBaseUpdate=Le:ue.next=Le,Ue.lastBaseUpdate=Te)}if(O!==null){var at=C.baseState;for($=0,Ue=Le=Te=null,ue=O;;){var Be=ue.lane,Ze=ue.eventTime;if((E&Be)===Be){Ue!==null&&(Ue=Ue.next={eventTime:Ze,lane:0,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null});e:{var _t=l,Ht=ue;switch(Be=u,Ze=y,Ht.tag){case 1:if(typeof(_t=Ht.payload)=="function"){at=_t.call(Ze,at,Be);break e}at=_t;break e;case 3:_t.flags=-65537&_t.flags|128;case 0:if((Be=typeof(_t=Ht.payload)=="function"?_t.call(Ze,at,Be):_t)==null)break e;at=s({},at,Be);break e;case 2:bs=!0}}ue.callback!==null&&ue.lane!==0&&(l.flags|=64,(Be=C.effects)===null?C.effects=[ue]:Be.push(ue))}else Ze={eventTime:Ze,lane:Be,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},Ue===null?(Le=Ue=Ze,Te=at):Ue=Ue.next=Ze,$|=Be;if((ue=ue.next)===null){if((ue=C.shared.pending)===null)break;ue=(Be=ue).next,Be.next=null,C.lastBaseUpdate=Be,C.shared.pending=null}}if(Ue===null&&(Te=at),C.baseState=Te,C.firstBaseUpdate=Le,C.lastBaseUpdate=Ue,(u=C.shared.interleaved)!==null){C=u;do $|=C.lane,C=C.next;while(C!==u)}else O===null&&(C.shared.lanes=0);_a|=$,l.lanes=$,l.memoizedState=at}}function Pl(l,u,y){if(l=u.effects,u.effects=null,l!==null)for(u=0;u<l.length;u++){var E=l[u],C=E.callback;if(C!==null){if(E.callback=null,E=y,typeof C!="function")throw Error(a(191,C));C.call(E)}}}var bu=new t.Component().refs;function Rl(l,u,y,E){y=(y=y(E,u=l.memoizedState))==null?u:s({},u,y),l.memoizedState=y,l.lanes===0&&(l.updateQueue.baseState=y)}var Ka={isMounted:function(l){return!!(l=l._reactInternals)&&ie(l)===l},enqueueSetState:function(l,u,y){l=l._reactInternals;var E=ln(),C=cs(l),O=Xi(E,C);O.payload=u,y!=null&&(O.callback=y),(u=qi(l,O,C))!==null&&(Ln(u,l,C,E),Ss(u,l,C))},enqueueReplaceState:function(l,u,y){l=l._reactInternals;var E=ln(),C=cs(l),O=Xi(E,C);O.tag=1,O.payload=u,y!=null&&(O.callback=y),(u=qi(l,O,C))!==null&&(Ln(u,l,C,E),Ss(u,l,C))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var y=ln(),E=cs(l),C=Xi(y,E);C.tag=2,u!=null&&(C.callback=u),(u=qi(l,C,E))!==null&&(Ln(u,l,E,y),Ss(u,l,E))}};function Ki(l,u,y,E,C,O,$){return typeof(l=l.stateNode).shouldComponentUpdate=="function"?l.shouldComponentUpdate(E,O,$):!u.prototype||!u.prototype.isPureReactComponent||!$a(y,E)||!$a(C,O)}function Yi(l,u,y){var E=!1,C=Rt,O=u.contextType;return typeof O=="object"&&O!==null?O=wn(O):(C=tn(u)?Ui:en.current,O=(E=(E=u.contextTypes)!=null)?Wn(l,C):Rt),u=new u(y,O),l.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Ka,l.stateNode=u,u._reactInternals=l,E&&((l=l.stateNode).__reactInternalMemoizedUnmaskedChildContext=C,l.__reactInternalMemoizedMaskedChildContext=O),u}function Rr(l,u,y,E){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(y,E),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(y,E),u.state!==l&&Ka.enqueueReplaceState(u,u.state,null)}function ha(l,u,y,E){var C=l.stateNode;C.props=y,C.state=l.memoizedState,C.refs=bu,xu(l);var O=u.contextType;typeof O=="object"&&O!==null?C.context=wn(O):(O=tn(u)?Ui:en.current,C.context=Wn(l,O)),C.state=l.memoizedState,typeof(O=u.getDerivedStateFromProps)=="function"&&(Rl(l,u,O,y),C.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(u=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),u!==C.state&&Ka.enqueueReplaceState(C,C.state,null),ca(l,y,C,E),C.state=l.memoizedState),typeof C.componentDidMount=="function"&&(l.flags|=4194308)}function Ci(l,u,y){if((l=y.ref)!==null&&typeof l!="function"&&typeof l!="object"){if(y._owner){if(y=y._owner){if(y.tag!==1)throw Error(a(309));var E=y.stateNode}if(!E)throw Error(a(147,l));var C=E,O=""+l;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===O?u.ref:(u=function($){var ue=C.refs;ue===bu&&(ue=C.refs={}),$===null?delete ue[O]:ue[O]=$},u._stringRef=O,u)}if(typeof l!="string")throw Error(a(284));if(!y._owner)throw Error(a(290,l))}return l}function Ya(l,u){throw l=Object.prototype.toString.call(u),Error(a(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l))}function qs(l){return(0,l._init)(l._payload)}function go(l){function u(Ge,me){if(l){var ke=Ge.deletions;ke===null?(Ge.deletions=[me],Ge.flags|=16):ke.push(me)}}function y(Ge,me){if(!l)return null;for(;me!==null;)u(Ge,me),me=me.sibling;return null}function E(Ge,me){for(Ge=new Map;me!==null;)me.key!==null?Ge.set(me.key,me):Ge.set(me.index,me),me=me.sibling;return Ge}function C(Ge,me){return(Ge=Co(Ge,me)).index=0,Ge.sibling=null,Ge}function O(Ge,me,ke){return Ge.index=ke,l?(ke=Ge.alternate)!==null?(ke=ke.index)<me?(Ge.flags|=2,me):ke:(Ge.flags|=2,me):(Ge.flags|=1048576,me)}function $(Ge){return l&&Ge.alternate===null&&(Ge.flags|=2),Ge}function ue(Ge,me,ke,$e){return me===null||me.tag!==6?((me=Mc(ke,Ge.mode,$e)).return=Ge,me):((me=C(me,ke)).return=Ge,me)}function Te(Ge,me,ke,$e){var Ct=ke.type;return Ct===_?Ue(Ge,me,ke.props.children,$e,ke.key):me!==null&&(me.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===W&&qs(Ct)===me.type)?(($e=C(me,ke.props)).ref=Ci(Ge,me,ke),$e.return=Ge,$e):(($e=zu(ke.type,ke.key,ke.props,null,Ge.mode,$e)).ref=Ci(Ge,me,ke),$e.return=Ge,$e)}function Le(Ge,me,ke,$e){return me===null||me.tag!==4||me.stateNode.containerInfo!==ke.containerInfo||me.stateNode.implementation!==ke.implementation?((me=Ph(ke,Ge.mode,$e)).return=Ge,me):((me=C(me,ke.children||[])).return=Ge,me)}function Ue(Ge,me,ke,$e,Ct){return me===null||me.tag!==7?((me=wa(ke,Ge.mode,$e,Ct)).return=Ge,me):((me=C(me,ke)).return=Ge,me)}function at(Ge,me,ke){if(typeof me=="string"&&me!==""||typeof me=="number")return(me=Mc(""+me,Ge.mode,ke)).return=Ge,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case f:return(ke=zu(me.type,me.key,me.props,null,Ge.mode,ke)).ref=Ci(Ge,null,me),ke.return=Ge,ke;case m:return(me=Ph(me,Ge.mode,ke)).return=Ge,me;case W:return at(Ge,(0,me._init)(me._payload),ke)}if(qe(me)||K(me))return(me=wa(me,Ge.mode,ke,null)).return=Ge,me;Ya(Ge,me)}return null}function Be(Ge,me,ke,$e){var Ct=me!==null?me.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number")return Ct!==null?null:ue(Ge,me,""+ke,$e);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case f:return ke.key===Ct?Te(Ge,me,ke,$e):null;case m:return ke.key===Ct?Le(Ge,me,ke,$e):null;case W:return Be(Ge,me,(Ct=ke._init)(ke._payload),$e)}if(qe(ke)||K(ke))return Ct!==null?null:Ue(Ge,me,ke,$e,null);Ya(Ge,ke)}return null}function Ze(Ge,me,ke,$e,Ct){if(typeof $e=="string"&&$e!==""||typeof $e=="number")return ue(me,Ge=Ge.get(ke)||null,""+$e,Ct);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case f:return Te(me,Ge=Ge.get($e.key===null?ke:$e.key)||null,$e,Ct);case m:return Le(me,Ge=Ge.get($e.key===null?ke:$e.key)||null,$e,Ct);case W:return Ze(Ge,me,ke,(0,$e._init)($e._payload),Ct)}if(qe($e)||K($e))return Ue(me,Ge=Ge.get(ke)||null,$e,Ct,null);Ya(me,$e)}return null}function _t(Ge,me,ke,$e){for(var Ct=null,sr=null,wt=me,tr=me=0,un=null;wt!==null&&tr<ke.length;tr++){wt.index>tr?(un=wt,wt=null):un=wt.sibling;var or=Be(Ge,wt,ke[tr],$e);if(or===null){wt===null&&(wt=un);break}l&&wt&&or.alternate===null&&u(Ge,wt),me=O(or,me,tr),sr===null?Ct=or:sr.sibling=or,sr=or,wt=un}if(tr===ke.length)return y(Ge,wt),ir&&zs(Ge,tr),Ct;if(wt===null){for(;tr<ke.length;tr++)(wt=at(Ge,ke[tr],$e))!==null&&(me=O(wt,me,tr),sr===null?Ct=wt:sr.sibling=wt,sr=wt);return ir&&zs(Ge,tr),Ct}for(wt=E(Ge,wt);tr<ke.length;tr++)(un=Ze(wt,Ge,tr,ke[tr],$e))!==null&&(l&&un.alternate!==null&&wt.delete(un.key===null?tr:un.key),me=O(un,me,tr),sr===null?Ct=un:sr.sibling=un,sr=un);return l&&wt.forEach((function(Js){return u(Ge,Js)})),ir&&zs(Ge,tr),Ct}function Ht(Ge,me,ke,$e){var Ct=K(ke);if(typeof Ct!="function")throw Error(a(150));if((ke=Ct.call(ke))==null)throw Error(a(151));for(var sr=Ct=null,wt=me,tr=me=0,un=null,or=ke.next();wt!==null&&!or.done;tr++,or=ke.next()){wt.index>tr?(un=wt,wt=null):un=wt.sibling;var Js=Be(Ge,wt,or.value,$e);if(Js===null){wt===null&&(wt=un);break}l&&wt&&Js.alternate===null&&u(Ge,wt),me=O(Js,me,tr),sr===null?Ct=Js:sr.sibling=Js,sr=Js,wt=un}if(or.done)return y(Ge,wt),ir&&zs(Ge,tr),Ct;if(wt===null){for(;!or.done;tr++,or=ke.next())(or=at(Ge,or.value,$e))!==null&&(me=O(or,me,tr),sr===null?Ct=or:sr.sibling=or,sr=or);return ir&&zs(Ge,tr),Ct}for(wt=E(Ge,wt);!or.done;tr++,or=ke.next())(or=Ze(wt,Ge,tr,or.value,$e))!==null&&(l&&or.alternate!==null&&wt.delete(or.key===null?tr:or.key),me=O(or,me,tr),sr===null?Ct=or:sr.sibling=or,sr=or);return l&&wt.forEach((function(_d){return u(Ge,_d)})),ir&&zs(Ge,tr),Ct}return function Ge(me,ke,$e,Ct){if(typeof $e=="object"&&$e!==null&&$e.type===_&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case f:e:{for(var sr=$e.key,wt=ke;wt!==null;){if(wt.key===sr){if((sr=$e.type)===_){if(wt.tag===7){y(me,wt.sibling),(ke=C(wt,$e.props.children)).return=me,me=ke;break e}}else if(wt.elementType===sr||typeof sr=="object"&&sr!==null&&sr.$$typeof===W&&qs(sr)===wt.type){y(me,wt.sibling),(ke=C(wt,$e.props)).ref=Ci(me,wt,$e),ke.return=me,me=ke;break e}y(me,wt);break}u(me,wt),wt=wt.sibling}$e.type===_?((ke=wa($e.props.children,me.mode,Ct,$e.key)).return=me,me=ke):((Ct=zu($e.type,$e.key,$e.props,null,me.mode,Ct)).ref=Ci(me,ke,$e),Ct.return=me,me=Ct)}return $(me);case m:e:{for(wt=$e.key;ke!==null;){if(ke.key===wt){if(ke.tag===4&&ke.stateNode.containerInfo===$e.containerInfo&&ke.stateNode.implementation===$e.implementation){y(me,ke.sibling),(ke=C(ke,$e.children||[])).return=me,me=ke;break e}y(me,ke);break}u(me,ke),ke=ke.sibling}(ke=Ph($e,me.mode,Ct)).return=me,me=ke}return $(me);case W:return Ge(me,ke,(wt=$e._init)($e._payload),Ct)}if(qe($e))return _t(me,ke,$e,Ct);if(K($e))return Ht(me,ke,$e,Ct);Ya(me,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"?($e=""+$e,ke!==null&&ke.tag===6?(y(me,ke.sibling),(ke=C(ke,$e)).return=me,me=ke):(y(me,ke),(ke=Mc($e,me.mode,Ct)).return=me,me=ke),$(me)):y(me,ke)}}var ui=go(!0),yo=go(!1),Qi={},Br=si(Qi),Ks=si(Qi),p=si(Qi);function x(l){if(l===Qi)throw Error(a(174));return l}function A(l,u){dr(p,u),dr(Ks,l),dr(Br,Qi),l=V(u),Wt(Br),dr(Br,l)}function P(){Wt(Br),Wt(Ks),Wt(p)}function M(l){var u=x(p.current),y=x(Br.current);y!==(u=D(y,l.type,u))&&(dr(Ks,l),dr(Br,u))}function N(l){Ks.current===l&&(Wt(Br),Wt(Ks))}var G=si(0);function X(l){for(var u=l;u!==null;){if(u.tag===13){var y=u.memoizedState;if(y!==null&&((y=y.dehydrated)===null||br(y)||ti(y)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((128&u.flags)!=0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var ae=[];function fe(){for(var l=0;l<ae.length;l++){var u=ae[l];Se?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}ae.length=0}var se=c.ReactCurrentDispatcher,ne=c.ReactCurrentBatchConfig,le=0,ee=null,J=null,Z=null,xe=!1,Ee=!1,pe=0,De=0;function Ne(){throw Error(a(321))}function Je(l,u){if(u===null)return!1;for(var y=0;y<u.length&&y<l.length;y++)if(!Pn(l[y],u[y]))return!1;return!0}function rt(l,u,y,E,C,O){if(le=O,ee=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,se.current=l===null||l.memoizedState===null?dh:fh,l=y(E,C),Ee){O=0;do{if(Ee=!1,pe=0,25<=O)throw Error(a(301));O+=1,Z=J=null,u.updateQueue=null,se.current=ph,l=y(E,C)}while(Ee)}if(se.current=Dl,u=J!==null&&J.next!==null,le=0,Z=J=ee=null,xe=!1,u)throw Error(a(300));return l}function He(){var l=pe!==0;return pe=0,l}function st(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Z===null?ee.memoizedState=Z=l:Z=Z.next=l,Z}function et(){if(J===null){var l=ee.alternate;l=l!==null?l.memoizedState:null}else l=J.next;var u=Z===null?ee.memoizedState:Z.next;if(u!==null)Z=u,J=l;else{if(l===null)throw Error(a(310));l={memoizedState:(J=l).memoizedState,baseState:J.baseState,baseQueue:J.baseQueue,queue:J.queue,next:null},Z===null?ee.memoizedState=Z=l:Z=Z.next=l}return Z}function Xe(l,u){return typeof u=="function"?u(l):u}function ut(l){var u=et(),y=u.queue;if(y===null)throw Error(a(311));y.lastRenderedReducer=l;var E=J,C=E.baseQueue,O=y.pending;if(O!==null){if(C!==null){var $=C.next;C.next=O.next,O.next=$}E.baseQueue=C=O,y.pending=null}if(C!==null){O=C.next,E=E.baseState;var ue=$=null,Te=null,Le=O;do{var Ue=Le.lane;if((le&Ue)===Ue)Te!==null&&(Te=Te.next={lane:0,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),E=Le.hasEagerState?Le.eagerState:l(E,Le.action);else{var at={lane:Ue,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null};Te===null?(ue=Te=at,$=E):Te=Te.next=at,ee.lanes|=Ue,_a|=Ue}Le=Le.next}while(Le!==null&&Le!==O);Te===null?$=E:Te.next=ue,Pn(E,u.memoizedState)||(Ur=!0),u.memoizedState=E,u.baseState=$,u.baseQueue=Te,y.lastRenderedState=E}if((l=y.interleaved)!==null){C=l;do O=C.lane,ee.lanes|=O,_a|=O,C=C.next;while(C!==l)}else C===null&&(y.lanes=0);return[u.memoizedState,y.dispatch]}function Vt(l){var u=et(),y=u.queue;if(y===null)throw Error(a(311));y.lastRenderedReducer=l;var E=y.dispatch,C=y.pending,O=u.memoizedState;if(C!==null){y.pending=null;var $=C=C.next;do O=l(O,$.action),$=$.next;while($!==C);Pn(O,u.memoizedState)||(Ur=!0),u.memoizedState=O,u.baseQueue===null&&(u.baseState=O),y.lastRenderedState=O}return[O,E]}function Yt(){}function At(l,u){var y=ee,E=et(),C=u(),O=!Pn(E.memoizedState,C);if(O&&(E.memoizedState=C,Ur=!0),E=E.queue,gc(Mn.bind(null,y,E,l),[l]),E.getSnapshot!==u||O||Z!==null&&1&Z.memoizedState.tag){if(y.flags|=2048,Su(9,gr.bind(null,y,E,C,u),void 0,null),Kr===null)throw Error(a(349));(30&le)!=0||Ft(y,u,C)}return C}function Ft(l,u,y){l.flags|=16384,l={getSnapshot:u,value:y},(u=ee.updateQueue)===null?(u={lastEffect:null,stores:null},ee.updateQueue=u,u.stores=[l]):(y=u.stores)===null?u.stores=[l]:y.push(l)}function gr(l,u,y,E){u.value=y,u.getSnapshot=E,rr(u)&&Zi(l)}function Mn(l,u,y){return y((function(){rr(u)&&Zi(l)}))}function rr(l){var u=l.getSnapshot;l=l.value;try{var y=u();return!Pn(l,y)}catch{return!0}}function Zi(l){var u=$i(l,1);u!==null&&Ln(u,l,1,-1)}function da(l){var u=st();return typeof l=="function"&&(l=l()),u.memoizedState=u.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xe,lastRenderedState:l},u.queue=l,l=l.dispatch=rp.bind(null,ee,l),[u.memoizedState,l]}function Su(l,u,y,E){return l={tag:l,create:u,destroy:y,deps:E,next:null},(u=ee.updateQueue)===null?(u={lastEffect:null,stores:null},ee.updateQueue=u,u.lastEffect=l.next=l):(y=u.lastEffect)===null?u.lastEffect=l.next=l:(E=y.next,y.next=l,l.next=E,u.lastEffect=l),l}function hd(){return et().memoizedState}function fa(l,u,y,E){var C=st();ee.flags|=l,C.memoizedState=Su(1|u,y,void 0,E===void 0?null:E)}function mc(l,u,y,E){var C=et();E=E===void 0?null:E;var O=void 0;if(J!==null){var $=J.memoizedState;if(O=$.destroy,E!==null&&Je(E,$.deps))return void(C.memoizedState=Su(u,y,O,E))}ee.flags|=l,C.memoizedState=Su(1|u,y,O,E)}function uh(l,u){return fa(8390656,8,l,u)}function gc(l,u){return mc(2048,8,l,u)}function _r(l,u){return mc(4,2,l,u)}function yc(l,u){return mc(4,4,l,u)}function Eu(l,u){return typeof u=="function"?(l=l(),u(l),function(){u(null)}):u!=null?(l=l(),u.current=l,function(){u.current=null}):void 0}function kl(l,u,y){return y=y!=null?y.concat([l]):null,mc(4,4,Eu.bind(null,u,l),y)}function vc(){}function _c(l,u){var y=et();u=u===void 0?null:u;var E=y.memoizedState;return E!==null&&u!==null&&Je(u,E[1])?E[0]:(y.memoizedState=[l,u],l)}function Ml(l,u){var y=et();u=u===void 0?null:u;var E=y.memoizedState;return E!==null&&u!==null&&Je(u,E[1])?E[0]:(l=l(),y.memoizedState=[l,u],l)}function Tu(l,u,y){return(21&le)==0?(l.baseState&&(l.baseState=!1,Ur=!0),l.memoizedState=y):(Pn(y,u)||(y=Sl(),ee.lanes|=y,_a|=y,l.baseState=!0),u)}function Ol(l,u){var y=Ut;Ut=y!==0&&4>y?y:4,l(!0);var E=ne.transition;ne.transition={};try{l(!1),u()}finally{Ut=y,ne.transition=E}}function ch(){return et().memoizedState}function tp(l,u,y){var E=cs(l);y={lane:E,action:y,hasEagerState:!1,eagerState:null,next:null},hh(l)?Au(u,y):(y=Cl(l,u,y,E))!==null&&(Ln(y,l,E,ln()),Cu(y,u,E))}function rp(l,u,y){var E=cs(l),C={lane:E,action:y,hasEagerState:!1,eagerState:null,next:null};if(hh(l))Au(u,C);else{var O=l.alternate;if(l.lanes===0&&(O===null||O.lanes===0)&&(O=u.lastRenderedReducer)!==null)try{var $=u.lastRenderedState,ue=O($,y);if(C.hasEagerState=!0,C.eagerState=ue,Pn(ue,$)){var Te=u.interleaved;return Te===null?(C.next=C,qa(u)):(C.next=Te.next,Te.next=C),void(u.interleaved=C)}}catch{}(y=Cl(l,u,C,E))!==null&&(Ln(y,l,E,C=ln()),Cu(y,u,E))}}function hh(l){var u=l.alternate;return l===ee||u!==null&&u===ee}function Au(l,u){Ee=xe=!0;var y=l.pending;y===null?u.next=u:(u.next=y.next,y.next=u),l.pending=u}function Cu(l,u,y){if((4194240&y)!=0){var E=u.lanes;y|=E&=l.pendingLanes,u.lanes=y,nn(l,y)}}var Dl={readContext:wn,useCallback:Ne,useContext:Ne,useEffect:Ne,useImperativeHandle:Ne,useInsertionEffect:Ne,useLayoutEffect:Ne,useMemo:Ne,useReducer:Ne,useRef:Ne,useState:Ne,useDebugValue:Ne,useDeferredValue:Ne,useTransition:Ne,useMutableSource:Ne,useSyncExternalStore:Ne,useId:Ne,unstable_isNewReconciler:!1},dh={readContext:wn,useCallback:function(l,u){return st().memoizedState=[l,u===void 0?null:u],l},useContext:wn,useEffect:uh,useImperativeHandle:function(l,u,y){return y=y!=null?y.concat([l]):null,fa(4194308,4,Eu.bind(null,u,l),y)},useLayoutEffect:function(l,u){return fa(4194308,4,l,u)},useInsertionEffect:function(l,u){return fa(4,2,l,u)},useMemo:function(l,u){var y=st();return u=u===void 0?null:u,l=l(),y.memoizedState=[l,u],l},useReducer:function(l,u,y){var E=st();return u=y!==void 0?y(u):u,E.memoizedState=E.baseState=u,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:u},E.queue=l,l=l.dispatch=tp.bind(null,ee,l),[E.memoizedState,l]},useRef:function(l){return l={current:l},st().memoizedState=l},useState:da,useDebugValue:vc,useDeferredValue:function(l){return st().memoizedState=l},useTransition:function(){var l=da(!1),u=l[0];return l=Ol.bind(null,l[1]),st().memoizedState=l,[u,l]},useMutableSource:function(){},useSyncExternalStore:function(l,u,y){var E=ee,C=st();if(ir){if(y===void 0)throw Error(a(407));y=y()}else{if(y=u(),Kr===null)throw Error(a(349));(30&le)!=0||Ft(E,u,y)}C.memoizedState=y;var O={value:y,getSnapshot:u};return C.queue=O,uh(Mn.bind(null,E,O,l),[l]),E.flags|=2048,Su(9,gr.bind(null,E,O,y,u),void 0,null),y},useId:function(){var l=st(),u=Kr.identifierPrefix;if(ir){var y=li;u=":"+u+"R"+(y=(ai&~(1<<32-rn(ai)-1)).toString(32)+y),0<(y=pe++)&&(u+="H"+y.toString(32)),u+=":"}else u=":"+u+"r"+(y=De++).toString(32)+":";return l.memoizedState=u},unstable_isNewReconciler:!1},fh={readContext:wn,useCallback:_c,useContext:wn,useEffect:gc,useImperativeHandle:kl,useInsertionEffect:_r,useLayoutEffect:yc,useMemo:Ml,useReducer:ut,useRef:hd,useState:function(){return ut(Xe)},useDebugValue:vc,useDeferredValue:function(l){return Tu(et(),J.memoizedState,l)},useTransition:function(){return[ut(Xe)[0],et().memoizedState]},useMutableSource:Yt,useSyncExternalStore:At,useId:ch,unstable_isNewReconciler:!1},ph={readContext:wn,useCallback:_c,useContext:wn,useEffect:gc,useImperativeHandle:kl,useInsertionEffect:_r,useLayoutEffect:yc,useMemo:Ml,useReducer:Vt,useRef:hd,useState:function(){return Vt(Xe)},useDebugValue:vc,useDeferredValue:function(l){var u=et();return J===null?u.memoizedState=l:Tu(u,J.memoizedState,l)},useTransition:function(){return[Vt(Xe)[0],et().memoizedState]},useMutableSource:Yt,useSyncExternalStore:At,useId:ch,unstable_isNewReconciler:!1};function Ll(l,u){try{var y="",E=u;do y+=pc(E),E=E.return;while(E);var C=y}catch(O){C=`
Error generating stack: `+O.message+`
`+O.stack}return{value:l,source:u,stack:C,digest:null}}function xc(l,u,y){return{value:l,source:null,stack:y??null,digest:u??null}}function mh(l,u){try{console.error(u.value)}catch(y){setTimeout((function(){throw y}))}}var np=typeof WeakMap=="function"?WeakMap:Map;function wc(l,u,y){(y=Xi(-1,y)).tag=3,y.payload={element:null};var E=u.value;return y.callback=function(){wr||(wr=!0,Wl=E),mh(0,u)},y}function vo(l,u,y){(y=Xi(-1,y)).tag=3;var E=l.type.getDerivedStateFromError;if(typeof E=="function"){var C=u.value;y.payload=function(){return E(C)},y.callback=function(){mh(0,u)}}var O=l.stateNode;return O!==null&&typeof O.componentDidCatch=="function"&&(y.callback=function(){mh(0,u),typeof E!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var $=u.stack;this.componentDidCatch(u.value,{componentStack:$!==null?$:""})}),y}function gh(l,u,y){var E=l.pingCache;if(E===null){E=l.pingCache=new np;var C=new Set;E.set(u,C)}else(C=E.get(u))===void 0&&(C=new Set,E.set(u,C));C.has(y)||(C.add(y),l=Rc.bind(null,l,u,y),u.then(l,l))}function Qa(l){do{var u;if((u=l.tag===13)&&(u=(u=l.memoizedState)===null||u.dehydrated!==null),u)return l;l=l.return}while(l!==null);return null}function Es(l,u,y,E,C){return(1&l.mode)==0?(l===u?l.flags|=65536:(l.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:((u=Xi(-1,1)).tag=2,qi(y,u,1))),y.lanes|=1),l):(l.flags|=65536,l.lanes=C,l)}var Iu=c.ReactCurrentOwner,Ur=!1;function On(l,u,y,E){u.child=l===null?yo(u,null,y,E):ui(u,l.child,y,E)}function dd(l,u,y,E,C){y=y.render;var O=u.ref;return $s(u,C),E=rt(l,u,y,E,O,C),y=He(),l===null||Ur?(ir&&y&&Hs(u),u.flags|=1,On(l,u,E,C),u.child):(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~C,ts(l,u,C))}function fd(l,u,y,E,C){if(l===null){var O=y.type;return typeof O!="function"||ju(O)||O.defaultProps!==void 0||y.compare!==null||y.defaultProps!==void 0?((l=zu(y.type,null,E,u,u.mode,C)).ref=u.ref,l.return=u,u.child=l):(u.tag=15,u.type=O,pa(l,u,O,E,C))}if(O=l.child,(l.lanes&C)==0){var $=O.memoizedProps;if((y=(y=y.compare)!==null?y:$a)($,E)&&l.ref===u.ref)return ts(l,u,C)}return u.flags|=1,(l=Co(O,E)).ref=u.ref,l.return=u,u.child=l}function pa(l,u,y,E,C){if(l!==null){var O=l.memoizedProps;if($a(O,E)&&l.ref===u.ref){if(Ur=!1,u.pendingProps=E=O,(l.lanes&C)==0)return u.lanes=l.lanes,ts(l,u,C);(131072&l.flags)!=0&&(Ur=!0)}}return Fl(l,u,y,E,C)}function Nl(l,u,y){var E=u.pendingProps,C=E.children,O=l!==null?l.memoizedState:null;if(E.mode==="hidden")if((1&u.mode)==0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},dr(So,Yr),Yr|=y;else{if((1073741824&y)==0)return l=O!==null?O.baseLanes|y:y,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:l,cachePool:null,transitions:null},u.updateQueue=null,dr(So,Yr),Yr|=l,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},E=O!==null?O.baseLanes:y,dr(So,Yr),Yr|=E}else O!==null?(E=O.baseLanes|y,u.memoizedState=null):E=y,dr(So,Yr),Yr|=E;return On(l,u,C,y),u.child}function Za(l,u){var y=u.ref;(l===null&&y!==null||l!==null&&l.ref!==y)&&(u.flags|=512,u.flags|=2097152)}function Fl(l,u,y,E,C){var O=tn(y)?Ui:en.current;return O=Wn(u,O),$s(u,C),y=rt(l,u,y,E,O,C),E=He(),l===null||Ur?(ir&&E&&Hs(u),u.flags|=1,On(l,u,y,C),u.child):(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~C,ts(l,u,C))}function bc(l,u,y,E,C){if(tn(y)){var O=!0;Bs(u)}else O=!1;if($s(u,C),u.stateNode===null)es(l,u),Yi(u,y,E),ha(u,y,E,C),E=!0;else if(l===null){var $=u.stateNode,ue=u.memoizedProps;$.props=ue;var Te=$.context,Le=y.contextType;typeof Le=="object"&&Le!==null?Le=wn(Le):Le=Wn(u,Le=tn(y)?Ui:en.current);var Ue=y.getDerivedStateFromProps,at=typeof Ue=="function"||typeof $.getSnapshotBeforeUpdate=="function";at||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(ue!==E||Te!==Le)&&Rr(u,$,E,Le),bs=!1;var Be=u.memoizedState;$.state=Be,ca(u,E,$,C),Te=u.memoizedState,ue!==E||Be!==Te||xn.current||bs?(typeof Ue=="function"&&(Rl(u,y,Ue,E),Te=u.memoizedState),(ue=bs||Ki(u,y,ue,E,Be,Te,Le))?(at||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(u.flags|=4194308)):(typeof $.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=E,u.memoizedState=Te),$.props=E,$.state=Te,$.context=Le,E=ue):(typeof $.componentDidMount=="function"&&(u.flags|=4194308),E=!1)}else{$=u.stateNode,wu(l,u),ue=u.memoizedProps,Le=u.type===u.elementType?ue:kn(u.type,ue),$.props=Le,at=u.pendingProps,Be=$.context,typeof(Te=y.contextType)=="object"&&Te!==null?Te=wn(Te):Te=Wn(u,Te=tn(y)?Ui:en.current);var Ze=y.getDerivedStateFromProps;(Ue=typeof Ze=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(ue!==at||Be!==Te)&&Rr(u,$,E,Te),bs=!1,Be=u.memoizedState,$.state=Be,ca(u,E,$,C);var _t=u.memoizedState;ue!==at||Be!==_t||xn.current||bs?(typeof Ze=="function"&&(Rl(u,y,Ze,E),_t=u.memoizedState),(Le=bs||Ki(u,y,Le,E,Be,_t,Te)||!1)?(Ue||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(E,_t,Te),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(E,_t,Te)),typeof $.componentDidUpdate=="function"&&(u.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof $.componentDidUpdate!="function"||ue===l.memoizedProps&&Be===l.memoizedState||(u.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||ue===l.memoizedProps&&Be===l.memoizedState||(u.flags|=1024),u.memoizedProps=E,u.memoizedState=_t),$.props=E,$.state=_t,$.context=Te,E=Le):(typeof $.componentDidUpdate!="function"||ue===l.memoizedProps&&Be===l.memoizedState||(u.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||ue===l.memoizedProps&&Be===l.memoizedState||(u.flags|=1024),E=!1)}return ma(l,u,y,E,O,C)}function ma(l,u,y,E,C,O){Za(l,u);var $=(128&u.flags)!=0;if(!E&&!$)return C&&Us(u,y,!1),ts(l,u,O);E=u.stateNode,Iu.current=u;var ue=$&&typeof y.getDerivedStateFromError!="function"?null:E.render();return u.flags|=1,l!==null&&$?(u.child=ui(u,l.child,null,O),u.child=ui(u,null,ue,O)):On(l,u,ue,O),u.memoizedState=E.state,C&&Us(u,y,!0),u.child}function _o(l){var u=l.stateNode;u.pendingContext?Ko(0,u.pendingContext,u.pendingContext!==u.context):u.context&&Ko(0,u.context,!1),A(l,u.containerInfo)}function xr(l,u,y,E,C){return Wi(),oa(C),u.flags|=256,On(l,u,y,E),u.child}var ur,Ji,an,bn,xo={dehydrated:null,treeContext:null,retryLane:0};function ga(l){return{baseLanes:l,cachePool:null,transitions:null}}function $n(l,u,y){var E,C=u.pendingProps,O=G.current,$=!1,ue=(128&u.flags)!=0;if((E=ue)||(E=(l===null||l.memoizedState!==null)&&(2&O)!=0),E?($=!0,u.flags&=-129):l!==null&&l.memoizedState===null||(O|=1),dr(G,1&O),l===null)return Vs(u),(l=u.memoizedState)!==null&&(l=l.dehydrated)!==null?((1&u.mode)==0?u.lanes=1:ti(l)?u.lanes=8:u.lanes=1073741824,null):(ue=C.children,l=C.fallback,$?(C=u.mode,$=u.child,ue={mode:"hidden",children:ue},(1&C)==0&&$!==null?($.childLanes=0,$.pendingProps=ue):$=kc(ue,C,0,null),l=wa(l,C,y,null),$.return=u,l.return=u,$.sibling=l,u.child=$,u.child.memoizedState=ga(y),u.memoizedState=xo,l):Bl(u,ue));if((O=l.memoizedState)!==null&&(E=O.dehydrated)!==null)return(function(Le,Ue,at,Be,Ze,_t,Ht){if(at)return 256&Ue.flags?(Ue.flags&=-257,Pu(Le,Ue,Ht,Be=xc(Error(a(422))))):Ue.memoizedState!==null?(Ue.child=Le.child,Ue.flags|=128,null):(_t=Be.fallback,Ze=Ue.mode,Be=kc({mode:"visible",children:Be.children},Ze,0,null),(_t=wa(_t,Ze,Ht,null)).flags|=2,Be.return=Ue,_t.return=Ue,Be.sibling=_t,Ue.child=Be,(1&Ue.mode)!=0&&ui(Ue,Le.child,null,Ht),Ue.child.memoizedState=ga(Ht),Ue.memoizedState=xo,_t);if((1&Ue.mode)==0)return Pu(Le,Ue,Ht,null);if(ti(Ze))return Be=bi(Ze).digest,_t=Error(a(419)),Be=xc(_t,Be,void 0),Pu(Le,Ue,Ht,Be);if(at=(Ht&Le.childLanes)!=0,Ur||at){if((Be=Kr)!==null){switch(Ht&-Ht){case 4:Ze=2;break;case 16:Ze=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Ze=32;break;case 536870912:Ze=268435456;break;default:Ze=0}(Ze=(Ze&(Be.suspendedLanes|Ht))!=0?0:Ze)!==0&&Ze!==_t.retryLane&&(_t.retryLane=Ze,$i(Le,Ze),Ln(Be,Le,Ze,-1))}return Pc(),Pu(Le,Ue,Ht,Be=xc(Error(a(421))))}return br(Ze)?(Ue.flags|=128,Ue.child=Le.child,Ue=Ch.bind(null,Le),Si(Ze,Ue),null):(Le=_t.treeContext,gt&&(Fr=vs(Ze),lr=Ue,ir=!0,Ti=null,Vi=!1,Le!==null&&(on[gn++]=ai,on[gn++]=li,on[gn++]=yn,ai=Le.id,li=Le.overflow,yn=Ue)),Ue=Bl(Ue,Be.children),Ue.flags|=4096,Ue)})(l,u,ue,C,E,O,y);if($){$=C.fallback,ue=u.mode,E=(O=l.child).sibling;var Te={mode:"hidden",children:C.children};return(1&ue)==0&&u.child!==O?((C=u.child).childLanes=0,C.pendingProps=Te,u.deletions=null):(C=Co(O,Te)).subtreeFlags=14680064&O.subtreeFlags,E!==null?$=Co(E,$):($=wa($,ue,y,null)).flags|=2,$.return=u,C.return=u,C.sibling=$,u.child=C,C=$,$=u.child,ue=(ue=l.child.memoizedState)===null?ga(y):{baseLanes:ue.baseLanes|y,cachePool:null,transitions:ue.transitions},$.memoizedState=ue,$.childLanes=l.childLanes&~y,u.memoizedState=xo,C}return l=($=l.child).sibling,C=Co($,{mode:"visible",children:C.children}),(1&u.mode)==0&&(C.lanes=y),C.return=u,C.sibling=null,l!==null&&((y=u.deletions)===null?(u.deletions=[l],u.flags|=16):y.push(l)),u.child=C,u.memoizedState=null,C}function Bl(l,u){return(u=kc({mode:"visible",children:u},l.mode,0,null)).return=l,l.child=u}function Pu(l,u,y,E){return E!==null&&oa(E),ui(u,l.child,null,y),(l=Bl(u,u.pendingProps.children)).flags|=2,u.memoizedState=null,l}function yh(l,u,y){l.lanes|=u;var E=l.alternate;E!==null&&(E.lanes|=u),_u(l.return,u,y)}function Ul(l,u,y,E,C){var O=l.memoizedState;O===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:E,tail:y,tailMode:C}:(O.isBackwards=u,O.rendering=null,O.renderingStartTime=0,O.last=E,O.tail=y,O.tailMode=C)}function vh(l,u,y){var E=u.pendingProps,C=E.revealOrder,O=E.tail;if(On(l,u,E.children,y),(2&(E=G.current))!=0)E=1&E|2,u.flags|=128;else{if(l!==null&&(128&l.flags)!=0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&yh(l,y,u);else if(l.tag===19)yh(l,y,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}E&=1}if(dr(G,E),(1&u.mode)==0)u.memoizedState=null;else switch(C){case"forwards":for(y=u.child,C=null;y!==null;)(l=y.alternate)!==null&&X(l)===null&&(C=y),y=y.sibling;(y=C)===null?(C=u.child,u.child=null):(C=y.sibling,y.sibling=null),Ul(u,!1,C,y,O);break;case"backwards":for(y=null,C=u.child,u.child=null;C!==null;){if((l=C.alternate)!==null&&X(l)===null){u.child=C;break}l=C.sibling,C.sibling=y,y=C,C=l}Ul(u,!0,y,null,O);break;case"together":Ul(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function es(l,u){(1&u.mode)==0&&l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2)}function ts(l,u,y){if(l!==null&&(u.dependencies=l.dependencies),_a|=u.lanes,(y&u.childLanes)==0)return null;if(l!==null&&u.child!==l.child)throw Error(a(153));if(u.child!==null){for(y=Co(l=u.child,l.pendingProps),u.child=y,y.return=u;l.sibling!==null;)l=l.sibling,(y=y.sibling=Co(l,l.pendingProps)).return=u;y.sibling=null}return u.child}function rs(l){l.flags|=4}function _h(l,u){if(l!==null&&l.child===u.child)return!0;if((16&u.flags)!=0)return!1;for(l=u.child;l!==null;){if((12854&l.flags)!=0||(12854&l.subtreeFlags)!=0)return!1;l=l.sibling}return!0}if(ot)ur=function(l,u){for(var y=u.child;y!==null;){if(y.tag===5||y.tag===6)q(l,y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===u)break;for(;y.sibling===null;){if(y.return===null||y.return===u)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},Ji=function(){},an=function(l,u,y,E,C){if((l=l.memoizedProps)!==E){var O=u.stateNode,$=x(Br.current);y=Ae(O,y,l,E,C,$),(u.updateQueue=y)&&rs(u)}},bn=function(l,u,y,E){y!==E&&rs(u)};else if(Qe){ur=function(l,u,y,E){for(var C=u.child;C!==null;){if(C.tag===5){var O=C.stateNode;y&&E&&(O=Mr(O,C.type,C.memoizedProps,C)),q(l,O)}else if(C.tag===6)O=C.stateNode,y&&E&&(O=wi(O,C.memoizedProps,C)),q(l,O);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)(O=C.child)!==null&&(O.return=C),ur(l,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===u)break;for(;C.sibling===null;){if(C.return===null||C.return===u)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};var pd=function(l,u,y,E){for(var C=u.child;C!==null;){if(C.tag===5){var O=C.stateNode;y&&E&&(O=Mr(O,C.type,C.memoizedProps,C)),In(l,O)}else if(C.tag===6)O=C.stateNode,y&&E&&(O=wi(O,C.memoizedProps,C)),In(l,O);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)(O=C.child)!==null&&(O.return=C),pd(l,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===u)break;for(;C.sibling===null;){if(C.return===null||C.return===u)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};Ji=function(l,u){var y=u.stateNode;if(!_h(l,u)){l=y.containerInfo;var E=$r(l);pd(E,u,!1,!1),y.pendingChildren=E,rs(u),$o(l,E)}},an=function(l,u,y,E,C){var O=l.stateNode,$=l.memoizedProps;if((l=_h(l,u))&&$===E)u.stateNode=O;else{var ue=u.stateNode,Te=x(Br.current),Le=null;$!==E&&(Le=Ae(ue,y,$,E,C,Te)),l&&Le===null?u.stateNode=O:(O=ei(O,Le,y,$,E,u,l,ue),ce(O,y,E,C,Te)&&rs(u),u.stateNode=O,l?rs(u):ur(O,u,!1,!1))}},bn=function(l,u,y,E){y!==E?(l=x(p.current),y=x(Br.current),u.stateNode=Fe(E,l,y,u),rs(u)):u.stateNode=l.stateNode}}else Ji=function(){},an=function(){},bn=function(){};function ns(l,u){if(!ir)switch(l.tailMode){case"hidden":u=l.tail;for(var y=null;u!==null;)u.alternate!==null&&(y=u),u=u.sibling;y===null?l.tail=null:y.sibling=null;break;case"collapsed":y=l.tail;for(var E=null;y!==null;)y.alternate!==null&&(E=y),y=y.sibling;E===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:E.sibling=null}}function qr(l){var u=l.alternate!==null&&l.alternate.child===l.child,y=0,E=0;if(u)for(var C=l.child;C!==null;)y|=C.lanes|C.childLanes,E|=14680064&C.subtreeFlags,E|=14680064&C.flags,C.return=l,C=C.sibling;else for(C=l.child;C!==null;)y|=C.lanes|C.childLanes,E|=C.subtreeFlags,E|=C.flags,C.return=l,C=C.sibling;return l.subtreeFlags|=E,l.childLanes=y,u}function Gl(l,u,y){var E=u.pendingProps;switch(Va(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qr(u),null;case 1:case 17:return tn(u.type)&&Fs(),qr(u),null;case 3:return y=u.stateNode,P(),Wt(xn),Wt(en),fe(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),l!==null&&l.child!==null||(zr(u)?rs(u):l===null||l.memoizedState.isDehydrated&&(256&u.flags)==0||(u.flags|=1024,Ti!==null&&(Uu(Ti),Ti=null))),Ji(l,u),qr(u),null;case 5:N(u),y=x(p.current);var C=u.type;if(l!==null&&u.stateNode!=null)an(l,u,C,E,y),l.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!E){if(u.stateNode===null)throw Error(a(166));return qr(u),null}if(l=x(Br.current),zr(u)){if(!gt)throw Error(a(175));l=Xr(u.stateNode,u.type,u.memoizedProps,y,l,u,!Vi),u.updateQueue=l,l!==null&&rs(u)}else{var O=U(C,E,y,l,u);ur(O,u,!1,!1),u.stateNode=O,ce(O,C,E,y,l)&&rs(u)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return qr(u),null;case 6:if(l&&u.stateNode!=null)bn(l,u,l.memoizedProps,E);else{if(typeof E!="string"&&u.stateNode===null)throw Error(a(166));if(l=x(p.current),y=x(Br.current),zr(u)){if(!gt)throw Error(a(176));if(l=u.stateNode,y=u.memoizedProps,(E=Ns(l,y,u,!Vi))&&(C=lr)!==null)switch(C.tag){case 3:uo(C.stateNode.containerInfo,l,y,(1&C.mode)!=0);break;case 5:nr(C.type,C.memoizedProps,C.stateNode,l,y,(1&C.mode)!=0)}E&&rs(u)}else u.stateNode=Fe(E,l,y,u)}return qr(u),null;case 13:if(Wt(G),E=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(ir&&Fr!==null&&(1&u.mode)!=0&&(128&u.flags)==0)sa(),Wi(),u.flags|=98560,C=!1;else if(C=zr(u),E!==null&&E.dehydrated!==null){if(l===null){if(!C)throw Error(a(318));if(!gt)throw Error(a(344));if(!(C=(C=u.memoizedState)!==null?C.dehydrated:null))throw Error(a(317));bl(C,u)}else Wi(),(128&u.flags)==0&&(u.memoizedState=null),u.flags|=4;qr(u),C=!1}else Ti!==null&&(Uu(Ti),Ti=null),C=!0;if(!C)return 65536&u.flags?u:null}return(128&u.flags)!=0?(u.lanes=y,u):((y=E!==null)!=(l!==null&&l.memoizedState!==null)&&y&&(u.child.flags|=8192,(1&u.mode)!=0&&(l===null||(1&G.current)!=0?Qr===0&&(Qr=3):Pc())),u.updateQueue!==null&&(u.flags|=4),qr(u),null);case 4:return P(),Ji(l,u),l===null&&dt(u.stateNode.containerInfo),qr(u),null;case 10:return ua(u.type._context),qr(u),null;case 19:if(Wt(G),(C=u.memoizedState)===null)return qr(u),null;if(E=(128&u.flags)!=0,(O=C.rendering)===null)if(E)ns(C,!1);else{if(Qr!==0||l!==null&&(128&l.flags)!=0)for(l=u.child;l!==null;){if((O=X(l))!==null){for(u.flags|=128,ns(C,!1),(l=O.updateQueue)!==null&&(u.updateQueue=l,u.flags|=4),u.subtreeFlags=0,l=y,y=u.child;y!==null;)C=l,(E=y).flags&=14680066,(O=E.alternate)===null?(E.childLanes=0,E.lanes=C,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=O.childLanes,E.lanes=O.lanes,E.child=O.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=O.memoizedProps,E.memoizedState=O.memoizedState,E.updateQueue=O.updateQueue,E.type=O.type,C=O.dependencies,E.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext}),y=y.sibling;return dr(G,1&G.current|2),u.child}l=l.sibling}C.tail!==null&&Kt()>Fu&&(u.flags|=128,E=!0,ns(C,!1),u.lanes=4194304)}else{if(!E)if((l=X(O))!==null){if(u.flags|=128,E=!0,(l=l.updateQueue)!==null&&(u.updateQueue=l,u.flags|=4),ns(C,!0),C.tail===null&&C.tailMode==="hidden"&&!O.alternate&&!ir)return qr(u),null}else 2*Kt()-C.renderingStartTime>Fu&&y!==1073741824&&(u.flags|=128,E=!0,ns(C,!1),u.lanes=4194304);C.isBackwards?(O.sibling=u.child,u.child=O):((l=C.last)!==null?l.sibling=O:u.child=O,C.last=O)}return C.tail!==null?(u=C.tail,C.rendering=u,C.tail=u.sibling,C.renderingStartTime=Kt(),u.sibling=null,l=G.current,dr(G,E?1&l|2:1&l),u):(qr(u),null);case 22:case 23:return al(),y=u.memoizedState!==null,l!==null&&l.memoizedState!==null!==y&&(u.flags|=8192),y&&(1&u.mode)!=0?(1073741824&Yr)!=0&&(qr(u),ot&&6&u.subtreeFlags&&(u.flags|=8192)):qr(u),null;case 24:case 25:return null}throw Error(a(156,u.tag))}function Sc(l,u){switch(Va(u),u.tag){case 1:return tn(u.type)&&Fs(),65536&(l=u.flags)?(u.flags=-65537&l|128,u):null;case 3:return P(),Wt(xn),Wt(en),fe(),(65536&(l=u.flags))!=0&&(128&l)==0?(u.flags=-65537&l|128,u):null;case 5:return N(u),null;case 13:if(Wt(G),(l=u.memoizedState)!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(a(340));Wi()}return 65536&(l=u.flags)?(u.flags=-65537&l|128,u):null;case 19:return Wt(G),null;case 4:return P(),null;case 10:return ua(u.type._context),null;case 22:case 23:return al(),null;default:return null}}var Ja=!1,yr=!1,is=typeof WeakSet=="function"?WeakSet:Set,ht=null;function ci(l,u){var y=l.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(E){vr(l,u,E)}else y.current=null}function Ys(l,u,y){try{y()}catch(E){vr(l,u,E)}}var ya=!1;function jl(l,u,y){var E=u.updateQueue;if((E=E!==null?E.lastEffect:null)!==null){var C=E=E.next;do{if((C.tag&l)===l){var O=C.destroy;C.destroy=void 0,O!==void 0&&Ys(u,y,O)}C=C.next}while(C!==E)}}function zl(l,u){if((u=(u=u.updateQueue)!==null?u.lastEffect:null)!==null){var y=u=u.next;do{if((y.tag&l)===l){var E=y.create;y.destroy=E()}y=y.next}while(y!==u)}}function Ru(l){var u=l.ref;if(u!==null){var y=l.stateNode;l.tag===5?l=H(y):l=y,typeof u=="function"?u(l):u.current=l}}function hi(l){var u=l.alternate;u!==null&&(l.alternate=null,hi(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode)!==null&&mr(u),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function di(l){return l.tag===5||l.tag===3||l.tag===4}function Sr(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||di(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(2&l.flags||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(2&l.flags))return l.stateNode}}function Ii(l,u,y){var E=l.tag;if(E===5||E===6)l=l.stateNode,u?Ls(y,l,u):Jn(y,l);else if(E!==4&&(l=l.child)!==null)for(Ii(l,u,y),l=l.sibling;l!==null;)Ii(l,u,y),l=l.sibling}function Ec(l,u,y){var E=l.tag;if(E===5||E===6)l=l.stateNode,u?ao(y,l,u):Ds(y,l);else if(E!==4&&(l=l.child)!==null)for(Ec(l,u,y),l=l.sibling;l!==null;)Ec(l,u,y),l=l.sibling}var Dn=null,ss=!1;function os(l,u,y){for(y=y.child;y!==null;)Tc(l,u,y),y=y.sibling}function Tc(l,u,y){if(Pr&&typeof Pr.onCommitFiberUnmount=="function")try{Pr.onCommitFiberUnmount(Ha,y)}catch{}switch(y.tag){case 5:yr||ci(y,u);case 6:if(ot){var E=Dn,C=ss;Dn=null,os(l,u,y),ss=C,(Dn=E)!==null&&(ss?re(Dn,y.stateNode):zn(Dn,y.stateNode))}else os(l,u,y);break;case 18:ot&&Dn!==null&&(ss?lo(Dn,y.stateNode):Ga(Dn,y.stateNode));break;case 4:ot?(E=Dn,C=ss,Dn=y.stateNode.containerInfo,ss=!0,os(l,u,y),Dn=E,ss=C):(Qe&&(E=y.stateNode.containerInfo,C=$r(E),xi(E,C)),os(l,u,y));break;case 0:case 11:case 14:case 15:if(!yr&&(E=y.updateQueue)!==null&&(E=E.lastEffect)!==null){C=E=E.next;do{var O=C,$=O.destroy;O=O.tag,$!==void 0&&((2&O)!=0||(4&O)!=0)&&Ys(y,u,$),C=C.next}while(C!==E)}os(l,u,y);break;case 1:if(!yr&&(ci(y,u),typeof(E=y.stateNode).componentWillUnmount=="function"))try{E.props=y.memoizedProps,E.state=y.memoizedState,E.componentWillUnmount()}catch(ue){vr(y,u,ue)}os(l,u,y);break;case 21:os(l,u,y);break;case 22:1&y.mode?(yr=(E=yr)||y.memoizedState!==null,os(l,u,y),yr=E):os(l,u,y);break;default:os(l,u,y)}}function ku(l){var u=l.updateQueue;if(u!==null){l.updateQueue=null;var y=l.stateNode;y===null&&(y=l.stateNode=new is),u.forEach((function(E){var C=yd.bind(null,l,E);y.has(E)||(y.add(E),E.then(C,C))}))}}function as(l,u){var y=u.deletions;if(y!==null)for(var E=0;E<y.length;E++){var C=y[E];try{var O=l,$=u;if(ot){var ue=$;e:for(;ue!==null;){switch(ue.tag){case 5:Dn=ue.stateNode,ss=!1;break e;case 3:case 4:Dn=ue.stateNode.containerInfo,ss=!0;break e}ue=ue.return}if(Dn===null)throw Error(a(160));Tc(O,$,C),Dn=null,ss=!1}else Tc(O,$,C);var Te=C.alternate;Te!==null&&(Te.return=null),C.return=null}catch(Le){vr(C,u,Le)}}if(12854&u.subtreeFlags)for(u=u.child;u!==null;)el(u,l),u=u.sibling}function el(l,u){var y=l.alternate,E=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(as(u,l),ls(l),4&E){try{jl(3,l,l.return),zl(3,l)}catch(Be){vr(l,l.return,Be)}try{jl(5,l,l.return)}catch(Be){vr(l,l.return,Be)}}break;case 1:as(u,l),ls(l),512&E&&y!==null&&ci(y,y.return);break;case 5:if(as(u,l),ls(l),512&E&&y!==null&&ci(y,y.return),ot){if(32&l.flags){var C=l.stateNode;try{Ie(C)}catch(Be){vr(l,l.return,Be)}}if(4&E&&(C=l.stateNode)!=null){var O=l.memoizedProps;if(y=y!==null?y.memoizedProps:O,E=l.type,u=l.updateQueue,l.updateQueue=null,u!==null)try{gs(C,u,E,y,O,l)}catch(Be){vr(l,l.return,Be)}}}break;case 6:if(as(u,l),ls(l),4&E&&ot){if(l.stateNode===null)throw Error(a(162));C=l.stateNode,O=l.memoizedProps,y=y!==null?y.memoizedProps:O;try{vi(C,y,O)}catch(Be){vr(l,l.return,Be)}}break;case 3:if(as(u,l),ls(l),4&E){if(ot&&gt&&y!==null&&y.memoizedState.isDehydrated)try{Fi(u.containerInfo)}catch(Be){vr(l,l.return,Be)}if(Qe){C=u.containerInfo,O=u.pendingChildren;try{xi(C,O)}catch(Be){vr(l,l.return,Be)}}}break;case 4:if(as(u,l),ls(l),4&E&&Qe){C=(O=l.stateNode).containerInfo,O=O.pendingChildren;try{xi(C,O)}catch(Be){vr(l,l.return,Be)}}break;case 13:as(u,l),ls(l),8192&(C=l.child).flags&&(O=C.memoizedState!==null,C.stateNode.isHidden=O,!O||C.alternate!==null&&C.alternate.memoizedState!==null||(To=Kt())),4&E&&ku(l);break;case 22:var $=y!==null&&y.memoizedState!==null;if(1&l.mode?(yr=(y=yr)||$,as(u,l),yr=y):as(u,l),ls(l),8192&E){if(y=l.memoizedState!==null,(l.stateNode.isHidden=y)&&!$&&(1&l.mode)!=0)for(ht=l,E=l.child;E!==null;){for(u=ht=E;ht!==null;){var ue=($=ht).child;switch($.tag){case 0:case 11:case 14:case 15:jl(4,$,$.return);break;case 1:ci($,$.return);var Te=$.stateNode;if(typeof Te.componentWillUnmount=="function"){var Le=$,Ue=$.return;try{var at=Le;Te.props=at.memoizedProps,Te.state=at.memoizedState,Te.componentWillUnmount()}catch(Be){vr(Le,Ue,Be)}}break;case 5:ci($,$.return);break;case 22:if($.memoizedState!==null){xh(u);continue}}ue!==null?(ue.return=$,ht=ue):xh(u)}E=E.sibling}if(ot){e:if(E=null,ot)for(u=l;;){if(u.tag===5){if(E===null){E=u;try{C=u.stateNode,y?Nt(C):ze(u.stateNode,u.memoizedProps)}catch(Be){vr(l,l.return,Be)}}}else if(u.tag===6){if(E===null)try{O=u.stateNode,y?Zt(O):kt(O,u.memoizedProps)}catch(Be){vr(l,l.return,Be)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;E===u&&(E=null),u=u.return}E===u&&(E=null),u.sibling.return=u.return,u=u.sibling}}}break;case 19:as(u,l),ls(l),4&E&&ku(l);break;case 21:break;default:as(u,l),ls(l)}}function ls(l){var u=l.flags;if(2&u){try{if(ot){e:{for(var y=l.return;y!==null;){if(di(y)){var E=y;break e}y=y.return}throw Error(a(160))}switch(E.tag){case 5:var C=E.stateNode;32&E.flags&&(Ie(C),E.flags&=-33),Ec(l,Sr(l),C);break;case 3:case 4:var O=E.stateNode.containerInfo;Ii(l,Sr(l),O);break;default:throw Error(a(161))}}}catch($){vr(l,l.return,$)}l.flags&=-3}4096&u&&(l.flags&=-4097)}function ip(l,u,y){ht=l,Hl(l)}function Hl(l,u,y){for(var E=(1&l.mode)!=0;ht!==null;){var C=ht,O=C.child;if(C.tag===22&&E){var $=C.memoizedState!==null||Ja;if(!$){var ue=C.alternate,Te=ue!==null&&ue.memoizedState!==null||yr;ue=Ja;var Le=yr;if(Ja=$,(yr=Te)&&!Le)for(ht=C;ht!==null;)Te=($=ht).child,$.tag===22&&$.memoizedState!==null?wh(C):Te!==null?(Te.return=$,ht=Te):wh(C);for(;O!==null;)ht=O,Hl(O),O=O.sibling;ht=C,Ja=ue,yr=Le}Mu(l)}else(8772&C.subtreeFlags)!=0&&O!==null?(O.return=C,ht=O):Mu(l)}}function Mu(l){for(;ht!==null;){var u=ht;if((8772&u.flags)!=0){var y=u.alternate;try{if((8772&u.flags)!=0)switch(u.tag){case 0:case 11:case 15:yr||zl(5,u);break;case 1:var E=u.stateNode;if(4&u.flags&&!yr)if(y===null)E.componentDidMount();else{var C=u.elementType===u.type?y.memoizedProps:kn(u.type,y.memoizedProps);E.componentDidUpdate(C,y.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var O=u.updateQueue;O!==null&&Pl(u,O,E);break;case 3:var $=u.updateQueue;if($!==null){if(y=null,u.child!==null)switch(u.child.tag){case 5:y=H(u.child.stateNode);break;case 1:y=u.child.stateNode}Pl(u,$,y)}break;case 5:var ue=u.stateNode;y===null&&4&u.flags&&_i(ue,u.type,u.memoizedProps,u);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(gt&&u.memoizedState===null){var Te=u.alternate;if(Te!==null){var Le=Te.memoizedState;if(Le!==null){var Ue=Le.dehydrated;Ue!==null&&Hn(Ue)}}}break;default:throw Error(a(163))}yr||512&u.flags&&Ru(u)}catch(at){vr(u,u.return,at)}}if(u===l){ht=null;break}if((y=u.sibling)!==null){y.return=u.return,ht=y;break}ht=u.return}}function xh(l){for(;ht!==null;){var u=ht;if(u===l){ht=null;break}var y=u.sibling;if(y!==null){y.return=u.return,ht=y;break}ht=u.return}}function wh(l){for(;ht!==null;){var u=ht;try{switch(u.tag){case 0:case 11:case 15:var y=u.return;try{zl(4,u)}catch(Te){vr(u,y,Te)}break;case 1:var E=u.stateNode;if(typeof E.componentDidMount=="function"){var C=u.return;try{E.componentDidMount()}catch(Te){vr(u,C,Te)}}var O=u.return;try{Ru(u)}catch(Te){vr(u,O,Te)}break;case 5:var $=u.return;try{Ru(u)}catch(Te){vr(u,$,Te)}}}catch(Te){vr(u,u.return,Te)}if(u===l){ht=null;break}var ue=u.sibling;if(ue!==null){ue.return=u.return,ht=ue;break}ht=u.return}}var wo=0,Ou=1,tl=2,rl=3,bo=4;if(typeof Symbol=="function"&&Symbol.for){var nl=Symbol.for;wo=nl("selector.component"),Ou=nl("selector.has_pseudo_class"),tl=nl("selector.role"),rl=nl("selector.test_id"),bo=nl("selector.text")}function Du(l){var u=Bt(l);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(a(364));return u}if((l=hr(l))===null)throw Error(a(362));return l.stateNode.current}function Lu(l,u){switch(u.$$typeof){case wo:if(l.type===u.value)return!0;break;case Ou:e:{u=u.value,l=[l,0];for(var y=0;y<l.length;){var E=l[y++],C=l[y++],O=u[C];if(E.tag!==5||!Cn(E)){for(;O!=null&&Lu(E,O);)O=u[++C];if(C===u.length){u=!0;break e}for(E=E.child;E!==null;)l.push(E,C),E=E.sibling}}u=!1}return u;case tl:if(l.tag===5&&Os(l.stateNode,u.value))return!0;break;case bo:if((l.tag===5||l.tag===6)&&(l=jn(l))!==null&&0<=l.indexOf(u.value))return!0;break;case rl:if(l.tag===5&&typeof(l=l.memoizedProps["data-testname"])=="string"&&l.toLowerCase()===u.value.toLowerCase())return!0;break;default:throw Error(a(365))}return!1}function Nu(l){switch(l.$$typeof){case wo:return"<"+(de(l.value)||"Unknown")+">";case Ou:return":has("+(Nu(l)||"")+")";case tl:return'[role="'+l.value+'"]';case bo:return'"'+l.value+'"';case rl:return'[data-testname="'+l.value+'"]';default:throw Error(a(365))}}function il(l,u){var y=[];l=[l,0];for(var E=0;E<l.length;){var C=l[E++],O=l[E++],$=u[O];if(C.tag!==5||!Cn(C)){for(;$!=null&&Lu(C,$);)$=u[++O];if(O===u.length)y.push(C);else for(C=C.child;C!==null;)l.push(C,O),C=C.sibling}}return y}function fi(l,u){if(!Nr)throw Error(a(363));l=il(l=Du(l),u),u=[],l=Array.from(l);for(var y=0;y<l.length;){var E=l[y++];if(E.tag===5)Cn(E)||u.push(E.stateNode);else for(E=E.child;E!==null;)l.push(E),E=E.sibling}return u}var sl=Math.ceil,Vl=c.ReactCurrentDispatcher,Ac=c.ReactCurrentOwner,pr=c.ReactCurrentBatchConfig,Gt=0,Kr=null,Hr=null,Er=0,Yr=0,So=si(0),Qr=0,va=null,_a=0,xa=0,us=0,Eo=null,Sn=null,To=0,Fu=1/0,Pi=null;function ol(){Fu=Kt()+500}var Cc,wr=!1,Wl=null,Qs=null,$l=!1,Ts=null,Xl=0,As=0,Tr=null,Gr=-1,Vr=0;function ln(){return(6&Gt)!=0?Kt():Gr!==-1?Gr:Gr=Kt()}function cs(l){return(1&l.mode)==0?1:(2&Gt)!=0&&Er!==0?Er&-Er:Tl.transition!==null?(Vr===0&&(Vr=Sl()),Vr):(l=Ut)!==0?l:vt()}function Ln(l,u,y,E){if(50<As)throw As=0,Tr=null,Error(a(185));Jo(l,y,E),(2&Gt)!=0&&l===Kr||(l===Kr&&((2&Gt)==0&&(xa|=y),Qr===4&&Zs(l,Er)),pi(l,E),y===1&&Gt===0&&(1&u.mode)==0&&(ol(),zi&&Rn()))}function pi(l,u){var y=l.callbackNode;(function(C,O){for(var $=C.suspendedLanes,ue=C.pingedLanes,Te=C.expirationTimes,Le=C.pendingLanes;0<Le;){var Ue=31-rn(Le),at=1<<Ue,Be=Te[Ue];Be===-1?(at&$)!=0&&(at&ue)==0||(Te[Ue]=fc(at,O)):Be<=O&&(C.expiredLanes|=at),Le&=~at}})(l,u);var E=Zo(l,l===Kr?Er:0);if(E===0)y!==null&&Gi(y),l.callbackNode=null,l.callbackPriority=0;else if(u=E&-E,l.callbackPriority!==u){if(y!=null&&Gi(y),u===1)l.tag===0?(function(C){zi=!0,_s(C)})(Cs.bind(null,l)):_s(Cs.bind(null,l)),Cr?Li((function(){(6&Gt)==0&&Rn()})):sn(fo,Rn),y=null;else{switch(oi(E)){case 1:y=fo;break;case 4:y=ta;break;case 16:default:y=Gs;break;case 536870912:y=js}y=Ih(y,En.bind(null,l))}l.callbackPriority=u,l.callbackNode=y}}function En(l,u){if(Gr=-1,Vr=0,(6&Gt)!=0)throw Error(a(327));var y=l.callbackNode;if(Is()&&l.callbackNode!==y)return null;var E=Zo(l,l===Kr?Er:0);if(E===0)return null;if((30&E)!=0||(E&l.expiredLanes)!=0||u)u=Gu(l,E);else{u=E;var C=Gt;Gt|=2;var O=bh();for(Kr===l&&Er===u||(Pi=null,ol(),Ao(l,u));;)try{gd();break}catch(ue){Ic(l,ue)}la(),Vl.current=O,Gt=C,Hr!==null?u=0:(Kr=null,Er=0,u=Qr)}if(u!==0){if(u===2&&(C=Xt(l))!==0&&(E=C,u=Bu(l,C)),u===1)throw y=va,Ao(l,0),Zs(l,E),pi(l,Kt()),y;if(u===6)Zs(l,E);else{if(C=l.current.alternate,(30&E)==0&&!(function(ue){for(var Te=ue;;){if(16384&Te.flags){var Le=Te.updateQueue;if(Le!==null&&(Le=Le.stores)!==null)for(var Ue=0;Ue<Le.length;Ue++){var at=Le[Ue],Be=at.getSnapshot;at=at.value;try{if(!Pn(Be(),at))return!1}catch{return!1}}}if(Le=Te.child,16384&Te.subtreeFlags&&Le!==null)Le.return=Te,Te=Le;else{if(Te===ue)break;for(;Te.sibling===null;){if(Te.return===null||Te.return===ue)return!0;Te=Te.return}Te.sibling.return=Te.return,Te=Te.sibling}}return!0})(C)&&((u=Gu(l,E))===2&&(O=Xt(l))!==0&&(E=O,u=Bu(l,O)),u===1))throw y=va,Ao(l,0),Zs(l,E),pi(l,Kt()),y;switch(l.finishedWork=C,l.finishedLanes=E,u){case 0:case 1:throw Error(a(345));case 2:case 5:ll(l,Sn,Pi);break;case 3:if(Zs(l,E),(130023424&E)===E&&10<(u=To+500-Kt())){if(Zo(l,0)!==0)break;if(((C=l.suspendedLanes)&E)!==E){ln(),l.pingedLanes|=l.suspendedLanes&C;break}l.timeoutHandle=je(ll.bind(null,l,Sn,Pi),u);break}ll(l,Sn,Pi);break;case 4:if(Zs(l,E),(4194240&E)===E)break;for(u=l.eventTimes,C=-1;0<E;){var $=31-rn(E);O=1<<$,($=u[$])>C&&(C=$),E&=~O}if(E=C,10<(E=(120>(E=Kt()-E)?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*sl(E/1960))-E)){l.timeoutHandle=je(ll.bind(null,l,Sn,Pi),E);break}ll(l,Sn,Pi);break;default:throw Error(a(329))}}}return pi(l,Kt()),l.callbackNode===y?En.bind(null,l):null}function Bu(l,u){var y=Eo;return l.current.memoizedState.isDehydrated&&(Ao(l,u).flags|=256),(l=Gu(l,u))!==2&&(u=Sn,Sn=y,u!==null&&Uu(u)),l}function Uu(l){Sn===null?Sn=l:Sn.push.apply(Sn,l)}function Zs(l,u){for(u&=~us,u&=~xa,l.suspendedLanes|=u,l.pingedLanes&=~u,l=l.expirationTimes;0<u;){var y=31-rn(u),E=1<<y;l[y]=-1,u&=~E}}function Cs(l){if((6&Gt)!=0)throw Error(a(327));Is();var u=Zo(l,0);if((1&u)==0)return pi(l,Kt()),null;var y=Gu(l,u);if(l.tag!==0&&y===2){var E=Xt(l);E!==0&&(u=E,y=Bu(l,E))}if(y===1)throw y=va,Ao(l,0),Zs(l,u),pi(l,Kt()),y;if(y===6)throw Error(a(345));return l.finishedWork=l.current.alternate,l.finishedLanes=u,ll(l,Sn,Pi),pi(l,Kt()),null}function Ri(l){Ts!==null&&Ts.tag===0&&(6&Gt)==0&&Is();var u=Gt;Gt|=1;var y=pr.transition,E=Ut;try{if(pr.transition=null,Ut=1,l)return l()}finally{Ut=E,pr.transition=y,(6&(Gt=u))==0&&Rn()}}function al(){Yr=So.current,Wt(So)}function Ao(l,u){l.finishedWork=null,l.finishedLanes=0;var y=l.timeoutHandle;if(y!==it&&(l.timeoutHandle=it,Ke(y)),Hr!==null)for(y=Hr.return;y!==null;){var E=y;switch(Va(E),E.tag){case 1:(E=E.type.childContextTypes)!=null&&Fs();break;case 3:P(),Wt(xn),Wt(en),fe();break;case 5:N(E);break;case 4:P();break;case 13:case 19:Wt(G);break;case 10:ua(E.type._context);break;case 22:case 23:al()}y=y.return}if(Kr=l,Hr=l=Co(l.current,null),Er=Yr=u,Qr=0,va=null,us=xa=_a=0,Sn=Eo=null,Xs!==null){for(u=0;u<Xs.length;u++)if((E=(y=Xs[u]).interleaved)!==null){y.interleaved=null;var C=E.next,O=y.pending;if(O!==null){var $=O.next;O.next=C,E.next=$}y.pending=E}Xs=null}return l}function Ic(l,u){for(;;){var y=Hr;try{if(la(),se.current=Dl,xe){for(var E=ee.memoizedState;E!==null;){var C=E.queue;C!==null&&(C.pending=null),E=E.next}xe=!1}if(le=0,Z=J=ee=null,Ee=!1,pe=0,Ac.current=null,y===null||y.return===null){Qr=1,va=u,Hr=null;break}e:{var O=l,$=y.return,ue=y,Te=u;if(u=Er,ue.flags|=32768,Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var Le=Te,Ue=ue,at=Ue.tag;if((1&Ue.mode)==0&&(at===0||at===11||at===15)){var Be=Ue.alternate;Be?(Ue.updateQueue=Be.updateQueue,Ue.memoizedState=Be.memoizedState,Ue.lanes=Be.lanes):(Ue.updateQueue=null,Ue.memoizedState=null)}var Ze=Qa($);if(Ze!==null){Ze.flags&=-257,Es(Ze,$,ue,0,u),1&Ze.mode&&gh(O,Le,u),Te=Le;var _t=(u=Ze).updateQueue;if(_t===null){var Ht=new Set;Ht.add(Te),u.updateQueue=Ht}else _t.add(Te);break e}if((1&u)==0){gh(O,Le,u),Pc();break e}Te=Error(a(426))}else if(ir&&1&ue.mode){var Ge=Qa($);if(Ge!==null){(65536&Ge.flags)==0&&(Ge.flags|=256),Es(Ge,$,ue,0,u),oa(Ll(Te,ue));break e}}O=Te=Ll(Te,ue),Qr!==4&&(Qr=2),Eo===null?Eo=[O]:Eo.push(O),O=$;do{switch(O.tag){case 3:O.flags|=65536,u&=-u,O.lanes|=u,Il(O,wc(0,Te,u));break e;case 1:ue=Te;var me=O.type,ke=O.stateNode;if((128&O.flags)==0&&(typeof me.getDerivedStateFromError=="function"||ke!==null&&typeof ke.componentDidCatch=="function"&&(Qs===null||!Qs.has(ke)))){O.flags|=65536,u&=-u,O.lanes|=u,Il(O,vo(O,ue,u));break e}}O=O.return}while(O!==null)}Eh(y)}catch($e){u=$e,Hr===y&&y!==null&&(Hr=y=y.return);continue}break}}function bh(){var l=Vl.current;return Vl.current=Dl,l===null?Dl:l}function Pc(){Qr!==0&&Qr!==3&&Qr!==2||(Qr=4),Kr===null||(268435455&_a)==0&&(268435455&xa)==0||Zs(Kr,Er)}function Gu(l,u){var y=Gt;Gt|=2;var E=bh();for(Kr===l&&Er===u||(Pi=null,Ao(l,u));;)try{md();break}catch(C){Ic(l,C)}if(la(),Gt=y,Vl.current=E,Hr!==null)throw Error(a(261));return Kr=null,Er=0,Qr}function md(){for(;Hr!==null;)Sh(Hr)}function gd(){for(;Hr!==null&&!ea();)Sh(Hr)}function Sh(l){var u=Cc(l.alternate,l,Yr);l.memoizedProps=l.pendingProps,u===null?Eh(l):Hr=u,Ac.current=null}function Eh(l){var u=l;do{var y=u.alternate;if(l=u.return,(32768&u.flags)==0){if((y=Gl(y,u,Yr))!==null)return void(Hr=y)}else{if((y=Sc(y,u))!==null)return y.flags&=32767,void(Hr=y);if(l===null)return Qr=6,void(Hr=null);l.flags|=32768,l.subtreeFlags=0,l.deletions=null}if((u=u.sibling)!==null)return void(Hr=u);Hr=u=l}while(u!==null);Qr===0&&(Qr=5)}function ll(l,u,y){var E=Ut,C=pr.transition;try{pr.transition=null,Ut=1,(function(O,$,ue,Te){do Is();while(Ts!==null);if((6&Gt)!=0)throw Error(a(327));ue=O.finishedWork;var Le=O.finishedLanes;if(ue===null)return null;if(O.finishedWork=null,O.finishedLanes=0,ue===O.current)throw Error(a(177));O.callbackNode=null,O.callbackPriority=0;var Ue=ue.lanes|ue.childLanes;if((function(Ze,_t){var Ht=Ze.pendingLanes&~_t;Ze.pendingLanes=_t,Ze.suspendedLanes=0,Ze.pingedLanes=0,Ze.expiredLanes&=_t,Ze.mutableReadLanes&=_t,Ze.entangledLanes&=_t,_t=Ze.entanglements;var Ge=Ze.eventTimes;for(Ze=Ze.expirationTimes;0<Ht;){var me=31-rn(Ht),ke=1<<me;_t[me]=0,Ge[me]=-1,Ze[me]=-1,Ht&=~ke}})(O,Ue),O===Kr&&(Hr=Kr=null,Er=0),(2064&ue.subtreeFlags)==0&&(2064&ue.flags)==0||$l||($l=!0,Ih(Gs,(function(){return Is(),null}))),Ue=(15990&ue.flags)!=0,(15990&ue.subtreeFlags)!=0||Ue){Ue=pr.transition,pr.transition=null;var at=Ut;Ut=1;var Be=Gt;Gt|=4,Ac.current=null,(function(Ze,_t){for(Y(Ze.containerInfo),ht=_t;ht!==null;)if(_t=(Ze=ht).child,(1028&Ze.subtreeFlags)!=0&&_t!==null)_t.return=Ze,ht=_t;else for(;ht!==null;){Ze=ht;try{var Ht=Ze.alternate;if((1024&Ze.flags)!=0)switch(Ze.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(Ht!==null){var Ge=Ht.memoizedProps,me=Ht.memoizedState,ke=Ze.stateNode,$e=ke.getSnapshotBeforeUpdate(Ze.elementType===Ze.type?Ge:kn(Ze.type,Ge),me);ke.__reactInternalSnapshotBeforeUpdate=$e}break;case 3:ot&&mn(Ze.stateNode.containerInfo);break;default:throw Error(a(163))}}catch(Ct){vr(Ze,Ze.return,Ct)}if((_t=Ze.sibling)!==null){_t.return=Ze.return,ht=_t;break}ht=Ze.return}Ht=ya,ya=!1})(O,ue),el(ue,O),j(O.containerInfo),O.current=ue,ip(ue),Ir(),Gt=Be,Ut=at,pr.transition=Ue}else O.current=ue;if($l&&($l=!1,Ts=O,Xl=Le),Ue=O.pendingLanes,Ue===0&&(Qs=null),(function(Ze){if(Pr&&typeof Pr.onCommitFiberRoot=="function")try{Pr.onCommitFiberRoot(Ha,Ze,void 0,(128&Ze.current.flags)==128)}catch{}})(ue.stateNode),pi(O,Kt()),$!==null)for(Te=O.onRecoverableError,ue=0;ue<$.length;ue++)Le=$[ue],Te(Le.value,{componentStack:Le.stack,digest:Le.digest});if(wr)throw wr=!1,O=Wl,Wl=null,O;(1&Xl)!=0&&O.tag!==0&&Is(),Ue=O.pendingLanes,(1&Ue)!=0?O===Tr?As++:(As=0,Tr=O):As=0,Rn()})(l,u,y,E)}finally{pr.transition=C,Ut=E}return null}function Is(){if(Ts!==null){var l=oi(Xl),u=pr.transition,y=Ut;try{if(pr.transition=null,Ut=16>l?16:l,Ts===null)var E=!1;else{if(l=Ts,Ts=null,Xl=0,(6&Gt)!=0)throw Error(a(331));var C=Gt;for(Gt|=4,ht=l.current;ht!==null;){var O=ht,$=O.child;if((16&ht.flags)!=0){var ue=O.deletions;if(ue!==null){for(var Te=0;Te<ue.length;Te++){var Le=ue[Te];for(ht=Le;ht!==null;){var Ue=ht;switch(Ue.tag){case 0:case 11:case 15:jl(8,Ue,O)}var at=Ue.child;if(at!==null)at.return=Ue,ht=at;else for(;ht!==null;){var Be=(Ue=ht).sibling,Ze=Ue.return;if(hi(Ue),Ue===Le){ht=null;break}if(Be!==null){Be.return=Ze,ht=Be;break}ht=Ze}}}var _t=O.alternate;if(_t!==null){var Ht=_t.child;if(Ht!==null){_t.child=null;do{var Ge=Ht.sibling;Ht.sibling=null,Ht=Ge}while(Ht!==null)}}ht=O}}if((2064&O.subtreeFlags)!=0&&$!==null)$.return=O,ht=$;else e:for(;ht!==null;){if((2048&(O=ht).flags)!=0)switch(O.tag){case 0:case 11:case 15:jl(9,O,O.return)}var me=O.sibling;if(me!==null){me.return=O.return,ht=me;break e}ht=O.return}}var ke=l.current;for(ht=ke;ht!==null;){var $e=($=ht).child;if((2064&$.subtreeFlags)!=0&&$e!==null)$e.return=$,ht=$e;else e:for($=ke;ht!==null;){if((2048&(ue=ht).flags)!=0)try{switch(ue.tag){case 0:case 11:case 15:zl(9,ue)}}catch(sr){vr(ue,ue.return,sr)}if(ue===$){ht=null;break e}var Ct=ue.sibling;if(Ct!==null){Ct.return=ue.return,ht=Ct;break e}ht=ue.return}}if(Gt=C,Rn(),Pr&&typeof Pr.onPostCommitFiberRoot=="function")try{Pr.onPostCommitFiberRoot(Ha,l)}catch{}E=!0}return E}finally{Ut=y,pr.transition=u}}return!1}function Th(l,u,y){l=qi(l,u=wc(0,u=Ll(y,u),1),1),u=ln(),l!==null&&(Jo(l,1,u),pi(l,u))}function vr(l,u,y){if(l.tag===3)Th(l,l,y);else for(;u!==null;){if(u.tag===3){Th(u,l,y);break}if(u.tag===1){var E=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Qs===null||!Qs.has(E))){u=qi(u,l=vo(u,l=Ll(y,l),1),1),l=ln(),u!==null&&(Jo(u,1,l),pi(u,l));break}}u=u.return}}function Rc(l,u,y){var E=l.pingCache;E!==null&&E.delete(u),u=ln(),l.pingedLanes|=l.suspendedLanes&y,Kr===l&&(Er&y)===y&&(Qr===4||Qr===3&&(130023424&Er)===Er&&500>Kt()-To?Ao(l,0):us|=y),pi(l,u)}function Ah(l,u){u===0&&((1&l.mode)==0?u=1:(u=Qo,(130023424&(Qo<<=1))==0&&(Qo=4194304)));var y=ln();(l=$i(l,u))!==null&&(Jo(l,u,y),pi(l,y))}function Ch(l){var u=l.memoizedState,y=0;u!==null&&(y=u.retryLane),Ah(l,y)}function yd(l,u){var y=0;switch(l.tag){case 13:var E=l.stateNode,C=l.memoizedState;C!==null&&(y=C.retryLane);break;case 19:E=l.stateNode;break;default:throw Error(a(314))}E!==null&&E.delete(u),Ah(l,y)}function Ih(l,u){return sn(l,u)}function vd(l,u,y,E){this.tag=l,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ki(l,u,y,E){return new vd(l,u,y,E)}function ju(l){return!(!(l=l.prototype)||!l.isReactComponent)}function Co(l,u){var y=l.alternate;return y===null?((y=ki(l.tag,u,l.key,l.mode)).elementType=l.elementType,y.type=l.type,y.stateNode=l.stateNode,y.alternate=l,l.alternate=y):(y.pendingProps=u,y.type=l.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=14680064&l.flags,y.childLanes=l.childLanes,y.lanes=l.lanes,y.child=l.child,y.memoizedProps=l.memoizedProps,y.memoizedState=l.memoizedState,y.updateQueue=l.updateQueue,u=l.dependencies,y.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},y.sibling=l.sibling,y.index=l.index,y.ref=l.ref,y}function zu(l,u,y,E,C,O){var $=2;if(E=l,typeof l=="function")ju(l)&&($=1);else if(typeof l=="string")$=5;else e:switch(l){case _:return wa(y.children,C,O,u);case w:$=8,C|=8;break;case d:return(l=ki(12,y,u,2|C)).elementType=d,l.lanes=O,l;case R:return(l=ki(13,y,u,C)).elementType=R,l.lanes=O,l;case k:return(l=ki(19,y,u,C)).elementType=k,l.lanes=O,l;case z:return kc(y,C,O,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case v:$=10;break e;case b:$=9;break e;case T:$=11;break e;case L:$=14;break e;case W:$=16,E=null;break e}throw Error(a(130,l==null?l:typeof l,""))}return(u=ki($,y,u,C)).elementType=l,u.type=E,u.lanes=O,u}function wa(l,u,y,E){return(l=ki(7,l,E,u)).lanes=y,l}function kc(l,u,y,E){return(l=ki(22,l,E,u)).elementType=z,l.lanes=y,l.stateNode={isHidden:!1},l}function Mc(l,u,y){return(l=ki(6,l,null,u)).lanes=y,l}function Ph(l,u,y){return(u=ki(4,l.children!==null?l.children:[],l.key,u)).lanes=y,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function sp(l,u,y,E,C){this.tag=u,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=it,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=El(0),this.expirationTimes=El(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=El(0),this.identifierPrefix=E,this.onRecoverableError=C,gt&&(this.mutableSourceEagerHydrationData=null)}function Rh(l,u,y,E,C,O,$,ue,Te){return l=new sp(l,u,y,ue,Te),u===1?(u=1,O===!0&&(u|=8)):u=0,O=ki(3,null,null,u),l.current=O,O.stateNode=l,O.memoizedState={element:E,isDehydrated:y,cache:null,transitions:null,pendingSuspenseBoundaries:null},xu(O),l}function kh(l){if(!l)return Rt;e:{if(ie(l=l._reactInternals)!==l||l.tag!==1)throw Error(a(170));var u=l;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(tn(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(a(171))}if(l.tag===1){var y=l.type;if(tn(y))return fr(l,y,u)}return u}function Mh(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(a(188)):(l=Object.keys(l).join(","),Error(a(268,l)));return(l=Pe(u))===null?null:l.stateNode}function Hu(l,u){if((l=l.memoizedState)!==null&&l.dehydrated!==null){var y=l.retryLane;l.retryLane=y!==0&&y<u?y:u}}function Oc(l,u){Hu(l,u),(l=l.alternate)&&Hu(l,u)}function op(l){return(l=Pe(l))===null?null:l.stateNode}function ap(){return null}return Cc=function(l,u,y){if(l!==null)if(l.memoizedProps!==u.pendingProps||xn.current)Ur=!0;else{if((l.lanes&y)==0&&(128&u.flags)==0)return Ur=!1,(function(at,Be,Ze){switch(Be.tag){case 3:_o(Be),Wi();break;case 5:M(Be);break;case 1:tn(Be.type)&&Bs(Be);break;case 4:A(Be,Be.stateNode.containerInfo);break;case 10:Al(0,Be.type._context,Be.memoizedProps.value);break;case 13:var _t=Be.memoizedState;if(_t!==null)return _t.dehydrated!==null?(dr(G,1&G.current),Be.flags|=128,null):(Ze&Be.child.childLanes)!=0?$n(at,Be,Ze):(dr(G,1&G.current),(at=ts(at,Be,Ze))!==null?at.sibling:null);dr(G,1&G.current);break;case 19:if(_t=(Ze&Be.childLanes)!=0,(128&at.flags)!=0){if(_t)return vh(at,Be,Ze);Be.flags|=128}var Ht=Be.memoizedState;if(Ht!==null&&(Ht.rendering=null,Ht.tail=null,Ht.lastEffect=null),dr(G,G.current),_t)break;return null;case 22:case 23:return Be.lanes=0,Nl(at,Be,Ze)}return ts(at,Be,Ze)})(l,u,y);Ur=(131072&l.flags)!=0}else Ur=!1,ir&&(1048576&u.flags)!=0&&mo(u,po,u.index);switch(u.lanes=0,u.tag){case 2:var E=u.type;es(l,u),l=u.pendingProps;var C=Wn(u,en.current);$s(u,y),C=rt(null,u,E,l,C,y);var O=He();return u.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,tn(E)?(O=!0,Bs(u)):O=!1,u.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,xu(u),C.updater=Ka,u.stateNode=C,C._reactInternals=u,ha(u,E,l,y),u=ma(null,u,E,!0,O,y)):(u.tag=0,ir&&O&&Hs(u),On(null,u,C,y),u=u.child),u;case 16:E=u.elementType;e:{switch(es(l,u),l=u.pendingProps,E=(C=E._init)(E._payload),u.type=E,C=u.tag=(function(at){if(typeof at=="function")return ju(at)?1:0;if(at!=null){if((at=at.$$typeof)===T)return 11;if(at===L)return 14}return 2})(E),l=kn(E,l),C){case 0:u=Fl(null,u,E,l,y);break e;case 1:u=bc(null,u,E,l,y);break e;case 11:u=dd(null,u,E,l,y);break e;case 14:u=fd(null,u,E,kn(E.type,l),y);break e}throw Error(a(306,E,""))}return u;case 0:return E=u.type,C=u.pendingProps,Fl(l,u,E,C=u.elementType===E?C:kn(E,C),y);case 1:return E=u.type,C=u.pendingProps,bc(l,u,E,C=u.elementType===E?C:kn(E,C),y);case 3:e:{if(_o(u),l===null)throw Error(a(387));E=u.pendingProps,C=(O=u.memoizedState).element,wu(l,u),ca(u,E,null,y);var $=u.memoizedState;if(E=$.element,gt&&O.isDehydrated){if(O={element:E,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},u.updateQueue.baseState=O,u.memoizedState=O,256&u.flags){u=xr(l,u,E,y,C=Ll(Error(a(423)),u));break e}if(E!==C){u=xr(l,u,E,y,C=Ll(Error(a(424)),u));break e}for(gt&&(Fr=ni(u.stateNode.containerInfo),lr=u,ir=!0,Ti=null,Vi=!1),y=yo(u,null,E,y),u.child=y;y;)y.flags=-3&y.flags|4096,y=y.sibling}else{if(Wi(),E===C){u=ts(l,u,y);break e}On(l,u,E,y)}u=u.child}return u;case 5:return M(u),l===null&&Vs(u),E=u.type,C=u.pendingProps,O=l!==null?l.memoizedProps:null,$=C.children,Me(E,C)?$=null:O!==null&&Me(E,O)&&(u.flags|=32),Za(l,u),On(l,u,$,y),u.child;case 6:return l===null&&Vs(u),null;case 13:return $n(l,u,y);case 4:return A(u,u.stateNode.containerInfo),E=u.pendingProps,l===null?u.child=ui(u,null,E,y):On(l,u,E,y),u.child;case 11:return E=u.type,C=u.pendingProps,dd(l,u,E,C=u.elementType===E?C:kn(E,C),y);case 7:return On(l,u,u.pendingProps,y),u.child;case 8:case 12:return On(l,u,u.pendingProps.children,y),u.child;case 10:e:{if(E=u.type._context,C=u.pendingProps,O=u.memoizedProps,Al(0,E,$=C.value),O!==null)if(Pn(O.value,$)){if(O.children===C.children&&!xn.current){u=ts(l,u,y);break e}}else for((O=u.child)!==null&&(O.return=u);O!==null;){var ue=O.dependencies;if(ue!==null){$=O.child;for(var Te=ue.firstContext;Te!==null;){if(Te.context===E){if(O.tag===1){(Te=Xi(-1,y&-y)).tag=2;var Le=O.updateQueue;if(Le!==null){var Ue=(Le=Le.shared).pending;Ue===null?Te.next=Te:(Te.next=Ue.next,Ue.next=Te),Le.pending=Te}}O.lanes|=y,(Te=O.alternate)!==null&&(Te.lanes|=y),_u(O.return,y,u),ue.lanes|=y;break}Te=Te.next}}else if(O.tag===10)$=O.type===u.type?null:O.child;else if(O.tag===18){if(($=O.return)===null)throw Error(a(341));$.lanes|=y,(ue=$.alternate)!==null&&(ue.lanes|=y),_u($,y,u),$=O.sibling}else $=O.child;if($!==null)$.return=O;else for($=O;$!==null;){if($===u){$=null;break}if((O=$.sibling)!==null){O.return=$.return,$=O;break}$=$.return}O=$}On(l,u,C.children,y),u=u.child}return u;case 9:return C=u.type,E=u.pendingProps.children,$s(u,y),E=E(C=wn(C)),u.flags|=1,On(l,u,E,y),u.child;case 14:return C=kn(E=u.type,u.pendingProps),fd(l,u,E,C=kn(E.type,C),y);case 15:return pa(l,u,u.type,u.pendingProps,y);case 17:return E=u.type,C=u.pendingProps,C=u.elementType===E?C:kn(E,C),es(l,u),u.tag=1,tn(E)?(l=!0,Bs(u)):l=!1,$s(u,y),Yi(u,E,C),ha(u,E,C,y),ma(null,u,E,!0,l,y);case 19:return vh(l,u,y);case 22:return Nl(l,u,y)}throw Error(a(156,u.tag))},e.attemptContinuousHydration=function(l){if(l.tag===13){var u=$i(l,134217728);u!==null&&Ln(u,l,134217728,ln()),Oc(l,134217728)}},e.attemptDiscreteHydration=function(l){if(l.tag===13){var u=$i(l,1);u!==null&&Ln(u,l,1,ln()),Oc(l,1)}},e.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var u=cs(l),y=$i(l,u);y!==null&&Ln(y,l,u,ln()),Oc(l,u)}},e.attemptSynchronousHydration=function(l){switch(l.tag){case 3:var u=l.stateNode;if(u.current.memoizedState.isDehydrated){var y=$t(u.pendingLanes);y!==0&&(nn(u,1|y),pi(u,Kt()),(6&Gt)==0&&(ol(),Rn()))}break;case 13:Ri((function(){var E=$i(l,1);if(E!==null){var C=ln();Ln(E,l,1,C)}})),Oc(l,1)}},e.batchedUpdates=function(l,u){var y=Gt;Gt|=1;try{return l(u)}finally{(Gt=y)===0&&(ol(),zi&&Rn())}},e.createComponentSelector=function(l){return{$$typeof:wo,value:l}},e.createContainer=function(l,u,y,E,C,O,$){return Rh(l,u,!1,null,0,E,0,O,$)},e.createHasPseudoClassSelector=function(l){return{$$typeof:Ou,value:l}},e.createHydrationContainer=function(l,u,y,E,C,O,$,ue,Te){return(l=Rh(y,E,!0,l,0,O,0,ue,Te)).context=kh(null),y=l.current,(O=Xi(E=ln(),C=cs(y))).callback=u??null,qi(y,O,C),l.current.lanes=C,Jo(l,C,E),pi(l,E),l},e.createPortal=function(l,u,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:E==null?null:""+E,children:l,containerInfo:u,implementation:y}},e.createRoleSelector=function(l){return{$$typeof:tl,value:l}},e.createTestNameSelector=function(l){return{$$typeof:rl,value:l}},e.createTextSelector=function(l){return{$$typeof:bo,value:l}},e.deferredUpdates=function(l){var u=Ut,y=pr.transition;try{return pr.transition=null,Ut=16,l()}finally{Ut=u,pr.transition=y}},e.discreteUpdates=function(l,u,y,E,C){var O=Ut,$=pr.transition;try{return pr.transition=null,Ut=1,l(u,y,E,C)}finally{Ut=O,pr.transition=$,Gt===0&&ol()}},e.findAllNodes=fi,e.findBoundingRects=function(l,u){if(!Nr)throw Error(a(363));u=fi(l,u),l=[];for(var y=0;y<u.length;y++)l.push(yi(u[y]));for(u=l.length-1;0<u;u--)for(var E=(y=l[u]).x,C=E+y.width,O=y.y,$=O+y.height,ue=u-1;0<=ue;ue--)if(u!==ue){var Te=l[ue],Le=Te.x,Ue=Le+Te.width,at=Te.y,Be=at+Te.height;if(E>=Le&&O>=at&&C<=Ue&&$<=Be){l.splice(u,1);break}if(!(E!==Le||y.width!==Te.width||Be<O||at>$)){at>O&&(Te.height+=at-O,Te.y=O),Be<$&&(Te.height=$-at),l.splice(u,1);break}if(!(O!==at||y.height!==Te.height||Ue<E||Le>C)){Le>E&&(Te.width+=Le-E,Te.x=E),Ue<C&&(Te.width=C-Le),l.splice(u,1);break}}return l},e.findHostInstance=Mh,e.findHostInstanceWithNoPortals=function(l){return(l=(l=Oe(l))!==null?ve(l):null)===null?null:l.stateNode},e.findHostInstanceWithWarning=function(l){return Mh(l)},e.flushControlled=function(l){var u=Gt;Gt|=1;var y=pr.transition,E=Ut;try{pr.transition=null,Ut=1,l()}finally{Ut=E,pr.transition=y,(Gt=u)===0&&(ol(),Rn())}},e.flushPassiveEffects=Is,e.flushSync=Ri,e.focusWithin=function(l,u){if(!Nr)throw Error(a(363));for(u=il(l=Du(l),u),u=Array.from(u),l=0;l<u.length;){var y=u[l++];if(!Cn(y)){if(y.tag===5&&pn(y.stateNode))return!0;for(y=y.child;y!==null;)u.push(y),y=y.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Ut},e.getFindAllNodesFailureDescription=function(l,u){if(!Nr)throw Error(a(363));var y=0,E=[];l=[Du(l),0];for(var C=0;C<l.length;){var O=l[C++],$=l[C++],ue=u[$];if((O.tag!==5||!Cn(O))&&(Lu(O,ue)&&(E.push(Nu(ue)),++$>y&&(y=$)),$<u.length))for(O=O.child;O!==null;)l.push(O,$),O=O.sibling}if(y<u.length){for(l=[];y<u.length;y++)l.push(Nu(u[y]));return`findAllNodes was able to match part of the selector:
  `+E.join(" > ")+`

No matching component was found for:
  `+l.join(" > ")}return null},e.getPublicRootInstance=function(l){return(l=l.current).child?l.child.tag===5?H(l.child.stateNode):l.child.stateNode:null},e.injectIntoDevTools=function(l){if(l={bundleType:l.bundleType,version:l.version,rendererPackageName:l.rendererPackageName,rendererConfig:l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:c.ReactCurrentDispatcher,findHostInstanceByFiber:op,findFiberByHostInstance:l.findFiberByHostInstance||ap,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)l=!0;else{try{Ha=u.inject(l),Pr=u}catch{}l=!!u.checkDCE}}return l},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(l,u,y,E){if(!Nr)throw Error(a(363));l=fi(l,u);var C=Zn(l,y,E).disconnect;return{disconnect:function(){C()}}},e.registerMutableSourceForHydration=function(l,u){var y=u._getVersion;y=y(u._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[u,y]:l.mutableSourceEagerHydrationData.push(u,y)},e.runWithPriority=function(l,u){var y=Ut;try{return Ut=l,u()}finally{Ut=y}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(l,u,y,E){var C=u.current,O=ln(),$=cs(C);return y=kh(y),u.context===null?u.context=y:u.pendingContext=y,(u=Xi(O,$)).payload={element:l},(E=E===void 0?null:E)!==null&&(u.callback=E),(l=qi(C,u,$))!==null&&(Ln(l,C,$,O),Ss(l,C,$)),$},e}),P0}({get exports(){return ny},set exports(n){ny=n}}).exports=MC();var OC=sC(ny),Tw={name:"root",dependencies:{"react-dom":"^18.0.0"}},sy={},hf={get exports(){return sy},set exports(n){sy=n}};(function(){var n,e,t,r,s,a;typeof performance<"u"&&performance!==null&&performance.now?hf.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(hf.exports=function(){return(n()-s)/1e6},e=process.hrtime,r=(n=function(){var c;return 1e9*(c=e())[0]+c[1]})(),a=1e9*process.uptime(),s=r-a):Date.now?(hf.exports=function(){return Date.now()-t},t=Date.now()):(hf.exports=function(){return new Date().getTime()-t},t=new Date().getTime())}).call(iC);var M0,Kc={},Zu={};({get exports(){return Kc},set exports(n){Kc=n}}).exports=(M0||(M0=1,Zu.ConcurrentRoot=1,Zu.ContinuousEventPriority=4,Zu.DefaultEventPriority=16,Zu.DiscreteEventPriority=1,Zu.IdleEventPriority=536870912,Zu.LegacyRoot=0),Zu);var DC={};function fg(n,e){n.addChild&&(n.addChild(e),typeof e.didMount=="function"&&e.didMount(e,n))}function Aw(n,e){var t,r,s;(t=n.willUnmount)===null||t===void 0||t.call(n,n,e),((r=n.config)===null||r===void 0?void 0:r.destroyChildren)!==!1&&(s=n.children)!==null&&s!==void 0&&s.length&&xl(n.children).forEach((function(a){Aw(a,n)}))}function O0(n,e){var t;Aw(e,n),n.removeChild(e);var r=(t=e.config)!==null&&t!==void 0?t:{},s=r.destroy,a=s===void 0||s,c=r.destroyChildren,f=c===void 0||c,m=r.destroyTexture,_=m!==void 0&&m,w=r.destroyBaseTexture,d=w!==void 0&&w;a&&e.destroy({children:f,texture:_,baseTexture:d})}function D0(n,e,t){var r,s;Jr(e!==t,"Cannot insert node before itself"),n.children.indexOf(e)!==-1&&n.removeChild(e);var a=n.getChildIndex(t);n.addChildAt(e,a),(r=n.__reactpixi)===null||r===void 0||(s=r.root)===null||s===void 0||s.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertBefore"})}var L0=null,Uo=OC({getRootHostContext:function(){return DC},getChildHostContext:function(n){return n},getChildHostContextForEventComponent:function(n){return n},getPublicInstance:function(n){return n},getCurrentEventPriority:function(){return(function(){var n,e;if(typeof window>"u")return Kc.DefaultEventPriority;switch((n=window)===null||n===void 0||(e=n.event)===null||e===void 0?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Kc.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Kc.ContinuousEventPriority;default:return Kc.DefaultEventPriority}})()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=IC[n];if(typeof a=="function"&&(e=a(s,r)),!e){var c=Ew[n];c&&((e=c.create(r,{root:s})).didMount=c.didMount?c.didMount.bind(e):void 0,e.willUnmount=c.willUnmount?c.willUnmount.bind(e):void 0,e.applyProps=c.applyProps?c.applyProps.bind(e):void 0,e.config=c.config)}return e&&(e.__reactpixi={root:s},(typeof((t=e)===null||t===void 0?void 0:t.applyProps)=="function"?e.applyProps:Ba)(e,{},r)),e},hideInstance:function(n){n.visible=!1},unhideInstance:function(n,e){var t=e==null||!e.hasOwnProperty("visible")||e.visible;n.visible=t},finalizeInitialChildren:function(n,e,t){return!1},prepareUpdate:function(n,e,t,r,s,a){return L0=(function(c,f,m,_){var w=null;for(var d in m)!_.hasOwnProperty(d)&&m.hasOwnProperty(d)&&m[d]!==null&&(d===ty||(w||(w=[]),w.push(d,null)));for(var v in _){var b=_[v],T=m!==null?m[v]:void 0;!_.hasOwnProperty(v)||b===T||b===null&&T===null||v===ty||(w||(w=[]),w.push(v,b))}return w})(0,0,t,r)},shouldSetTextContent:function(n,e){return!1},shouldDeprioritizeSubtree:function(n,e){var t=e.alpha===void 0||e.alpha>0,r=e.renderable===void 0||e.renderable===!0,s=e.visible===void 0||e.visible===!0;return!(t&&r&&s)},createTextInstance:function(n,e,t){Jr(!1,'Error trying to add text node "'.concat(n,'"'),"text strings as children of a Pixi component is not supported. To add some text, use &lt;Text text={string} /&gt;")},unhideTextInstance:function(n,e){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:sy,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var n,e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=fg.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),a},appendChild:function(){for(var n,e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=fg.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),a},appendChildToContainer:function(){for(var n,e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=fg.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),a},removeChild:function(){for(var n,e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=O0.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),a},removeChildFromContainer:function(){for(var n,e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=O0.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),a},insertBefore:D0,insertInContainerBefore:function(){for(var n,e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=D0.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),a},commitUpdate:function(n,e,t,r,s){var a,c,f=n&&n.applyProps;typeof f!="function"&&(f=Ba),(f(n,r,s)||L0)&&((a=n.__reactpixi)===null||a===void 0||(c=a.root)===null||c===void 0||c.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(n,e,t,r,s){},commitTextUpdate:function(n,e,t){},resetTextContent:function(n){},clearContainer:function(n){},getFundamentalComponentInstance:function(n){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(n){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(n){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(n){throw new Error("Not yet implemented.")},getInstanceFromNode:function(n){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(n){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(n){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(n){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(n){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(n){}}),LC=Tw.dependencies["react-dom"].replace(/[^0-9.]/g,""),NC=Tw.name;Uo.injectIntoDevTools({bundleType:0,version:LC,rendererPackageName:NC,findHostInstanceByFiber:Uo.findHostInstance});var hu=new Map;function Cw(n){if(Jr(Di.prototype.isPrototypeOf(n),"Invalid argument `container`, expected instance of `Container`."),hu.has(n)){var e=hu.get(n).pixiFiberContainer;Uo.updateContainer(null,e,void 0,(function(){hu.delete(n)}))}}function Iw(n){Jr(Di.prototype.isPrototypeOf(n),"Invalid argument `container`, expected instance of `Container`.");var e=hu.get(n);if(Jr(!e,"createRoot should only be called once"),!e){var t=Uo.createContainer(n);e={pixiFiberContainer:t,reactRoot:{render:function(r){return Uo.updateContainer(r,t,void 0),Uo.getPublicRootInstance(t)},unmount:function(){Cw(n),hu.delete(n)}}},hu.set(n,e)}return e.reactRoot}function FC(n,e,t){var r;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),t!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),hu.has(e)?r=hu.get(e).reactRoot:r=Iw(e),r.render(n)}function BC(n){Cw(n)}function ad(){return ad=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ad.apply(this,arguments)}function UC(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function GC(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,ww(r.key),r)}}function fl(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Uf(n,e){return Uf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Uf(n,e)}function jC(n,e){if(e&&(Ms(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fl(n)}function Gf(n){return Gf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gf(n)}var ep=fn.createContext(null),Pw=ep.Provider,Rw=ep.Consumer,zC=function(n){var e=fn.forwardRef((function(t,r){return fn.createElement(Rw,null,(function(s){return fn.createElement(n,ad({},t,{ref:r,app:s}))}))}));return e.displayName="withPIXIApp(".concat(n.displayName||n.name,")"),e};function HC(n){var e=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})();return function(){var t,r=Gf(n);if(e){var s=Gf(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return jC(this,t)}}function N0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.push.apply(t,r)}return t}function df(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?N0(Object(t),!0).forEach((function(r){hn(n,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):N0(Object(t)).forEach((function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))}))}return n}var F0=function(){},kw={width:Dr.number,height:Dr.number,onMount:Dr.func,onUnmount:Dr.func,raf:Dr.bool,renderOnComponentChange:Dr.bool,children:Dr.node,options:Dr.shape({autoStart:Dr.bool,width:Dr.number,height:Dr.number,useContextAlpha:Dr.bool,backgroundAlpha:Dr.number,autoDensity:Dr.bool,antialias:Dr.bool,preserveDrawingBuffer:Dr.bool,resolution:Dr.number,forceCanvas:Dr.bool,backgroundColor:Dr.number,clearBeforeRender:Dr.bool,powerPreference:Dr.string,sharedTicker:Dr.bool,sharedLoader:Dr.bool,resizeTo:function(n,e){var t=n[e];t&&Jr(t===window||t instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(Ms(t),", expect `window` or an `HTMLElement`."))},view:function(n,e,t){var r=n[e];r&&Jr(r instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(Ms(r),", supplied to ").concat(t,", expected `<canvas> Element`"))}})},VC={width:800,height:600,onMount:F0,onUnmount:F0,raf:!0,renderOnComponentChange:!0},oy=(function(n){(function(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),c&&Uf(a,c)})(s,fn.Component);var e,t,r=HC(s);function s(){var a;UC(this,s);for(var c=arguments.length,f=new Array(c),m=0;m<c;m++)f[m]=arguments[m];return hn(fl(a=r.call.apply(r,[this].concat(f))),"_canvas",null),hn(fl(a),"_mediaQuery",null),hn(fl(a),"_ticker",null),hn(fl(a),"_needsUpdate",!0),hn(fl(a),"app",null),hn(fl(a),"updateSize",(function(){var _=a.props,w=_.width,d=_.height,v=_.options;v!=null&&v.resolution||(a.app.renderer.resolution=window.devicePixelRatio,a.resetInteractionManager()),a.app.renderer.resize(w,d)})),hn(fl(a),"needsRenderUpdate",(function(){a._needsUpdate=!0})),hn(fl(a),"renderStage",(function(){var _=a.props,w=_.renderOnComponentChange;!_.raf&&w&&a._needsUpdate&&(a._needsUpdate=!1,a.app.renderer.render(a.app.stage))})),a}return e=s,(t=[{key:"componentDidMount",value:function(){var a=this.props,c=a.onMount,f=a.width,m=a.height,_=a.options,w=a.raf,d=a.renderOnComponentChange;this.app=new Kf(df(df({width:f,height:m,view:this._canvas},_),{},{autoDensity:_?.autoDensity!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[w?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=Uo.createContainer(this.app.stage),Uo.updateContainer(this.getChildren(),this.mountNode,this),c(this.app),_!=null&&_.autoDensity&&window.matchMedia&&_?.resolution===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),d&&!w&&(this._ticker=new Un,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(a,c,f){var m,_=this.props,w=_.width,d=_.height,v=_.raf,b=_.renderOnComponentChange,T=_.options;T?.resolution!==void 0&&a?.options.resolution!==T?.resolution&&(this.app.renderer.resolution=T.resolution,this.resetInteractionManager()),a.height===d&&a.width===w&&((m=a.options)===null||m===void 0?void 0:m.resolution)===T?.resolution||this.updateSize(),a.raf!==v&&this.app.ticker[v?"start":"stop"](),Uo.updateContainer(this.getChildren(),this.mountNode,this),a.width===w&&a.height===d&&a.raf===v&&a.renderOnComponentChange===b&&a.options===T||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var a=this.app.renderer.plugins.interaction;a!=null&&a.resolution&&(a.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var a=this.props.children;return fn.createElement(Pw,{value:this.app},a)}},{key:"componentDidCatch",value:function(a,c){console.error("Error occurred in `Stage`."),console.error(a),console.error(c)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),Uo.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var a,c,f=this,m=this.props.options;return m&&m.view?(Jr(m.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):fn.createElement("canvas",ad({},(a=this.props,c=[].concat(xl(Object.keys(kw)),xl(Object.keys(ry))),Object.keys(a).filter((function(_){return!c.includes(_)})).reduce((function(_,w){return df(df({},_),{},hn({},w,a[w]))}),{})),{ref:function(_){return f._canvas=_}}))}}])&&GC(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),s})();oy.propTypes=kw,oy.defaultProps=VC;var WC=oy;function Mw(){var n=Pt.useContext(ep);return Jr(n instanceof Kf,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider"),n}function $C(n){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],t=Mw();Jr(typeof n=="function","`useTick` needs a callback function."),Jr(t instanceof Kf,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider");var r=Pt.useRef(null);Pt.useEffect((function(){r.current=n}),[n]),Pt.useEffect((function(){if(e){var s=function(a){return r.current.apply(t.ticker,[a,t.ticker])};return t.ticker.add(s),function(){t.ticker&&t.ticker.remove(s)}}}),[e])}function XC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}function ay(n,e,t){return ay=XC()?Reflect.construct.bind():function(r,s,a){var c=[null];c.push.apply(c,s);var f=new(Function.bind.apply(r,c));return a&&Uf(f,a.prototype),f},ay.apply(null,arguments)}var qC=["children","apply"];function B0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.push.apply(t,r)}return t}function ff(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?B0(Object(t),!0).forEach((function(r){hn(n,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):B0(Object(t)).forEach((function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))}))}return n}var KC=function(n,e){Jr(Ms(e)==="object","Second argument needs to be an indexed object with { prop: Filter }");var t=Object.keys(e),r=function(s){var a=s.children,c=s.apply,f=vu(s,qC),m=Pt.useRef(Pt.useMemo((function(){return t.map((function(d){var v,b=(f==null||(v=f[d])===null||v===void 0?void 0:v.construct)||[];return ay(e[d],xl(b))}))}),[t])),_=Pt.useMemo((function(){return t.reduce((function(d,v,b){return ff(ff({},d),{},hn({},v,m.current[b]))}),{})}),[t]),w=Pt.useMemo((function(){return Object.keys(f).filter(Sw(bw(t))).reduce((function(d,v){return ff(ff({},d),{},hn({},v,f[v]))}),{})}),[f,t]);return t.forEach((function(d,v){return Object.assign(m.current[v],f[d])})),c&&(function(){for(var d=arguments.length,v=new Array(d),b=0;b<d;b++)v[b]=arguments[b];return v.every((function(T){return typeof T=="function"}))})(c)&&c.call(n,_),fn.createElement(n,ad({},w,{filters:m.current}),a)};return r.displayName="FilterWrapper",r.propTypes={children:Dr.node,apply:Dr.func},r},YC=ms.BitmapText,QC=ms.Container,ZC=ms.Graphics,JC=ms.NineSlicePlane,eI=ms.ParticleContainer,tI=ms.Sprite,rI=ms.AnimatedSprite,nI=ms.Text,iI=ms.TilingSprite,sI=ms.SimpleMesh,oI=ms.SimpleRope;const aI=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:rI,AppConsumer:Rw,AppContext:ep,AppProvider:Pw,BitmapText:YC,Container:QC,Graphics:ZC,NineSlicePlane:JC,ParticleContainer:eI,PixiComponent:PC,PixiFiber:Uo,SimpleMesh:sI,SimpleRope:oI,Sprite:tI,Stage:WC,TYPES:ms,Text:nI,TilingSprite:iI,applyDefaultProps:Ba,createRoot:Iw,eventHandlers:Bf,render:FC,unmountComponentAtNode:BC,useApp:Mw,useTick:$C,withFilters:KC,withPixiApp:zC},Symbol.toStringTag,{value:"Module"})),lI=H0(aI);var U0;function uI(){return U0||(U0=1,og.exports=lI),og.exports}var zo=uI();const cI=({sheetName:n,animationName:e,imageName:t,x:r,y:s,scale:a=1,rotation:c=0,anchor:f=.5,isPlaying:m=!0,currentFrame:_=0})=>{const w=gu.getInstance(),d=Pt.useRef(null),v=fn.useMemo(()=>t?w.getTexture(t):null,[t,w]),b=fn.useMemo(()=>{if(t)return null;const T=`${n}_${e}`;return w.getAnimation(T)},[n,e,t,w]);return Pt.useEffect(()=>{if(d.current&&b&&b.length>0){const T=Math.floor(_)%b.length;d.current.gotoAndStop(T)}},[_,b]),t&&v?_e.jsx(zo.Sprite,{texture:v,x:r,y:s,scale:a,rotation:c,anchor:f}):b&&b.length>0?_e.jsx(zo.AnimatedSprite,{ref:d,textures:b,isPlaying:!1,x:r,y:s,scale:a,rotation:c,anchor:f}):null},hI=({w:n,h:e})=>{const t=zo.useApp();return Pt.useEffect(()=>{t?.renderer&&(t.renderer.resize(n,e),t.view instanceof HTMLCanvasElement&&(t.view.width=n,t.view.height=e))},[t,n,e]),null},dI=({paused:n,w:e,h:t})=>{const r=Pt.useRef(null),s=Pt.useRef(0);return Pt.useEffect(()=>{r.current?.clear().beginFill(16777215).drawRect(0,0,e,t).endFill()},[e,t]),zo.useTick(a=>{if(!r.current||n)return;s.current+=Math.PI/60*a;const c=(Math.sin(s.current)+1)/2,f=Math.round(26+c*4),m=Math.round(26+c*54),_=Math.round(46+c*104);r.current.tint=(f<<16)+(m<<8)+_}),_e.jsx(zo.Graphics,{ref:r})},fI=({vm:n,paused:e})=>{const t=Pt.useRef(null),r=Pt.useRef([]),s=gu.getInstance();return Pt.useEffect(()=>()=>{r.current.forEach(a=>{a&&!a.destroyed&&a.destroy()}),r.current=[]},[]),zo.useTick(()=>{if(!t.current)return;const a=n.entityCount,c=r.current;if(a>c.length)for(let f=c.length;f<a;f++){const m=s.getTexture("static_rock");if(m){const _=new Vo(m);_.anchor.set(.5),_.scale.set(.8),t.current.addChild(_),c.push(_)}}else if(a<c.length)for(let f=c.length-1;f>=a;f--){const m=c.pop();m&&(t.current.removeChild(m),m.destroy())}for(let f=0;f<a;f++){const m=c[f],_=n.getRockViewData(f);if(!_||e){m&&(m.visible=!1);continue}m.visible=!0,m.x=_.x,m.y=_.y,m.rotation=_.rotation}}),_e.jsx(zo.Container,{ref:t})},pI=({vm:n,paused:e,width:t,height:r,scale:s,heroPos:a,hp:c})=>{const f=Pt.useRef(null),[m,_]=Pt.useState(n.heroVisuals);return zo.useTick(()=>{const w=n.heroVisuals;f.current&&(f.current.x=w.x,f.current.y=w.y,f.current.rotation=w.rotation,f.current.scale.set(w.scale),a.current.x=w.x,a.current.y=w.y,_(w))}),_e.jsxs(_e.Fragment,{children:[_e.jsx(hI,{w:t,h:r}),_e.jsx(dI,{paused:e,w:t,h:r}),_e.jsxs(zo.Container,{scale:s,children:[_e.jsx(fI,{vm:n,paused:e}),_e.jsx(zo.Container,{ref:f,children:_e.jsx(cI,{sheetName:"hero_sheet",animationName:"idle",x:0,y:0,scale:1,anchor:.5,currentFrame:m.currentFrame})})]})]})},mI=({hp:n,rockCount:e,shieldBarRef:t,shieldTextRef:r,damageBtnRef:s,onDamage:a,onJumpToG2:c,onLevel1:f,onLevel2:m,onLevel3:_,onResetG1:w,onNextLevel:d,onFailLevel:v})=>{const b={padding:"0.6cqw 1cqw",cursor:"pointer",color:"#fff",border:"none",borderRadius:"0.4cqw",fontWeight:"bold",fontFamily:"monospace",fontSize:"0.8cqw",pointerEvents:"auto",textAlign:"center"};return _e.jsxs("div",{style:{position:"absolute",inset:0,pointerEvents:"none",containerType:"size"},children:[_e.jsxs("div",{style:{position:"absolute",top:"5cqh",left:"50%",transform:"translateX(-50%)",width:"35cqw"},children:[_e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#fff",marginBottom:"0.5cqh",fontWeight:"bold",fontFamily:"monospace",fontSize:"1.2cqw"},children:[_e.jsx("span",{children:"SHIELD ENERGY"}),_e.jsxs("span",{ref:r,children:[Math.round(n),"%"]})]}),_e.jsx("div",{style:{width:"100%",height:"2cqh",backgroundColor:"#222",borderRadius:"1cqw",border:"0.2cqw solid #fff",overflow:"hidden"},children:_e.jsx("div",{ref:t,style:{width:`${Math.max(0,n)}%`,height:"100%",backgroundColor:n<30?"#c0392b":"#27ae60"}})})]}),_e.jsxs("div",{style:{position:"absolute",top:"3cqh",right:"3cqw",color:"#fff",fontFamily:"monospace",textAlign:"right",fontSize:"1.2cqw"},children:["ROCKS_ACTIVE: ",e]}),_e.jsxs("div",{style:{position:"absolute",top:"3cqh",left:"3cqw",display:"flex",flexDirection:"column",gap:"1cqh"},children:[_e.jsx("button",{ref:s,onClick:a,style:{...b,background:"#333",border:"0.1cqw solid #fff"},children:"TAKE DAMAGE (-15)"}),_e.jsxs("div",{style:{display:"flex",gap:"0.5cqw"},children:[_e.jsx("button",{onClick:f,style:{...b,background:"#408240",flex:1},children:"LVL 1"}),_e.jsx("button",{onClick:m,style:{...b,background:"#C29F19",flex:1},children:"LVL 2"}),_e.jsx("button",{onClick:_,style:{...b,background:"#C21919",flex:1},children:"LVL 3"})]}),_e.jsx("div",{style:{display:"flex",gap:"0.5cqw"},children:_e.jsx("button",{onClick:d,style:{...b,background:"#67ad44",flex:2},children:"Next Level (Campaign)"})}),_e.jsx("div",{style:{display:"flex",gap:"0.5cqw"},children:_e.jsx("button",{onClick:v,style:{...b,background:"#ad4444",flex:2},children:"Fail Level (Campaign)"})}),_e.jsx("button",{onClick:c,style:{...b,background:"#2980b9"},children:"Go to Game 2"}),_e.jsx("div",{style:{display:"flex",gap:"0.5cqw"},children:_e.jsx("button",{onClick:w,style:{...b,background:"#c0392b",flex:1},children:"Quick Load"})})]})]})},gI=({vm:n,controller:e,width:t=960,height:r=540})=>{const[s,a]=Pt.useState(n.hp),[c,f]=Pt.useState(n.entityCount),[m,_]=Pt.useState(!1),w=Pt.useRef(null),d=Pt.useRef(null),v=Pt.useRef(null),b=Pt.useRef({x:n.pos.x,y:n.pos.y});Pt.useEffect(()=>{const R=n.subscribe(()=>{const W=Ar.getInstance().getActiveState()?.name!=="Game1";m!==W&&_(W);const z=n.hp;b.current.x=n.pos.x,b.current.y=n.pos.y,w.current&&(w.current.style.width=`${Math.max(0,z)}%`),d.current&&(d.current.innerText=`${Math.round(z)}%`),Math.abs(s-z)>1&&a(z),c!==n.entityCount&&f(n.entityCount)});return()=>R()},[n,s,c,m]);const T=Pt.useMemo(()=>t/960,[t]);return _e.jsxs("div",{style:{position:"absolute",inset:0,background:"#000",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:[_e.jsx("div",{style:{position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:_e.jsx(zo.Stage,{width:t,height:r,options:{backgroundColor:0,antialias:!0,resolution:1,autoDensity:!1},style:{display:"block",width:"100%",height:"100%",objectFit:"contain",imageRendering:"pixelated"},children:_e.jsx(pI,{vm:n,paused:m,width:t,height:r,scale:T,heroPos:b,hp:s})},`stage-${t}-${r}`)}),_e.jsx(mI,{hp:s,rockCount:c,shieldBarRef:w,shieldTextRef:d,damageBtnRef:v,onDamage:()=>e.takeDamage(),onJumpToG2:()=>e.jumpToGame2(),onLevel1:()=>e.loadLevel(oo.Level1),onLevel2:()=>e.loadLevel(oo.Level2),onLevel3:()=>e.loadLevel(oo.Level3),onResetG1:()=>e.resetLevel(),onNextLevel:()=>e.nextLevel(),onFailLevel:()=>e.failLevel()})]})},yI={HERO_HP:0,HERO_X:1,HERO_Y:2,TICK_COUNT:3,FRAME_COUNT:4,FPS:5,REVISION:6,LAST_HIT_FRAME:7,ENTITY_COUNT:8,ROCKS_START_INDEX:10,ROCK_STRIDE:3,MAX_ROCKS:1e3,BUFFER_SIZE:4096};class Oa extends vw{constructor(e=!1,t=oo.Level1){super(e),this.currentLevel=t}name="Game1";logicSchema=yI;viewSchema=ro;viewComponent=gI;getConfig(){return QA(this.currentLevel)}getSessionOverrides(e){const t=e.get(Ff.hp);return t!==void 0?{initialHP:t}:{}}initMVC(){this.vm=new JA,this.controller=new ZA(this.vm)}}const ly=Object.freeze(Object.defineProperty({__proto__:null,Game1State:Oa},Symbol.toStringTag,{value:"Module"})),vI={HERO_HP:0,ENERGY:1,SCRAP_COUNT:2,TICK_COUNT:3,FRAME_COUNT:4,FPS:5,REVISION:6,BUFFER_SIZE:1024},sc={HERO_HP_DISPLAY:0,ENERGY_DISPLAY:1,SCRAP_DISPLAY:2,UI_BOUNCE:3,GLITCH_INTENSITY:4,VIGNETTE_PULSE:5,BUFFER_SIZE:1024},_I=({stats:n,onAction:e,onJumpG1:t,onLevel1:r,onLevel2:s,onLevel3:a,onQuickLoad:c,onNextLevel:f,onFailLevel:m})=>{const _={padding:"1.5cqw",border:"0.1cqw solid",borderRadius:"0.5cqw",display:"flex",flexDirection:"column",gap:"1cqh"},w={padding:"0.5cqw 1cqw",cursor:"pointer",background:"#222",color:"#eee",border:"0.1cqw solid #444",fontSize:"0.8cqw",pointerEvents:"auto"};return _e.jsxs("div",{style:{position:"absolute",inset:0,pointerEvents:"none",containerType:"size",padding:"2cqw"},children:[_e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#00ff00",fontFamily:"monospace"},children:[_e.jsx("h2",{style:{fontSize:"1.5cqw",margin:0},children:"SYSTEM_DIAGNOSTICS"}),_e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5cqh",alignItems:"flex-end"},children:[_e.jsxs("div",{style:{display:"flex",gap:"0.5cqw"},children:[_e.jsx("button",{onClick:r,style:{...w,background:"#1b4d1b"},children:"LVL 1"}),_e.jsx("button",{onClick:s,style:{...w,background:"#4d431b"},children:"LVL 2"}),_e.jsx("button",{onClick:a,style:{...w,background:"#4d1b1b"},children:"LVL 3"})]}),_e.jsxs("div",{style:{display:"flex",gap:"0.5cqw"},children:[_e.jsx("button",{onClick:f,style:{...w,borderColor:"#8e44ad",color:"#67ad44"},children:"NEXT_STEP"}),_e.jsx("button",{onClick:m,style:{...w,borderColor:"#8e44ad",color:"#ad4444"},children:"FAIL_STEP"}),_e.jsx("button",{onClick:t,style:{...w,borderColor:"#3498db"},children:"GOTO_G1"}),_e.jsx("button",{onClick:c,style:{...w,borderColor:"#c0392b"},children:"RELOAD"})]})]})]}),_e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"2cqw",marginTop:"2cqh",pointerEvents:"auto"},children:[_e.jsxs("div",{style:{..._,borderColor:"#00ff00",color:"#00ff00"},children:[_e.jsx("span",{children:"GLOBAL_HP"}),_e.jsx("b",{style:{fontSize:"2cqw"},children:n.hp.toFixed(1)}),_e.jsxs("div",{style:{display:"flex",gap:"0.5cqw"},children:[_e.jsx("button",{onClick:()=>e("MOD_HP",10),style:w,children:"+10"}),_e.jsx("button",{onClick:()=>e("MOD_HP",-10),style:w,children:"-10"})]})]}),_e.jsxs("div",{style:{..._,borderColor:"#3498db",color:"#3498db"},children:[_e.jsx("span",{children:"GLOBAL_ENERGY"}),_e.jsx("b",{style:{fontSize:"2cqw"},children:n.energy}),_e.jsx("button",{onClick:()=>e("MOD_ENERGY",5),style:w,children:"RECHARGE"})]}),_e.jsxs("div",{style:{..._,borderColor:"#f1c40f",color:"#f1c40f"},children:[_e.jsx("span",{children:"LOCAL_SCRAP"}),_e.jsx("b",{style:{fontSize:"2cqw"},children:n.scrap}),_e.jsx("button",{onClick:()=>e("ADD_SCRAP"),style:w,children:"COLLECT"})]})]})]})},G0={"Level 1":{initialHP:100,initialEnergy:50,initialScrap:0,maxEnergy:100,regenRate:60,manifestPath:"res/manifest.json",bgmKey:"bgm_level1"},"Level 2":{initialHP:80,initialEnergy:30,initialScrap:40,maxEnergy:80,regenRate:90,manifestPath:"res/manifest.json",bgmKey:"bgm_level1"},"Level 3":{initialHP:50,initialEnergy:10,initialScrap:10,maxEnergy:50,regenRate:120,manifestPath:"res/manifest.json",bgmKey:"bgm_level1"}};var Ho=(n=>(n.Level1="Level 1",n.Level2="Level 2",n.Level3="Level 3",n))(Ho||{});const xI=n=>G0[n]||G0["Level 1"],wI=({vm:n,controller:e})=>{const[t,r]=Pt.useState({hp:n.hp,energy:n.energy,scrap:n.scrap}),[s,a]=Pt.useState({uiOffset:0,glitch:0,pulse:0});Pt.useEffect(()=>{const m=n.subscribe(()=>{r({hp:n.hp,energy:n.energy,scrap:n.scrap});const _=n.visualEffects;a({uiOffset:_.uiOffset,glitch:_.glitchIntensity,pulse:_.vignettePulse})});return()=>m()},[n]);const c=(Math.random()-.5)*20*s.glitch,f=(Math.random()-.5)*20*s.glitch;return _e.jsx("div",{style:{position:"absolute",inset:0,background:"#000",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:_e.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",maxWidth:"calc(100vh * (16 / 9))",maxHeight:"calc(100vw * (9 / 16))",aspectRatio:"16 / 9",background:"#adadad",overflow:"hidden",transform:`translate(${c}px, ${f}px)`,textShadow:s.glitch>.1?`${s.glitch*5}px 0 #f00, -${s.glitch*5}px 0 #0ff`:"none"},children:[_e.jsx("div",{style:{position:"absolute",inset:0,background:`radial-gradient(circle, transparent 40%, rgba(0,0,0,${.8*s.pulse}))`,pointerEvents:"none",zIndex:1}}),_e.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:"#050505",fontSize:"10cqw",fontWeight:"bold",transform:`translateY(${s.uiOffset}px)`,opacity:.3+s.glitch*.7},children:"LAB_02"}),_e.jsx(_I,{stats:t,onAction:(m,_)=>e.modifyStat(m,_),onJumpG1:e.jumpToGame1,onLevel1:()=>e.loadLevel(Ho.Level1),onLevel2:()=>e.loadLevel(Ho.Level2),onLevel3:()=>e.loadLevel(Ho.Level3),onQuickLoad:()=>e.resetLevel(),onNextLevel:()=>e.nextLevel(),onFailLevel:()=>e.failLevel()})]})})};class bI extends xw{get hp(){return this.sharedView[sc.HERO_HP_DISPLAY]||0}get energy(){return this.sharedView[sc.ENERGY_DISPLAY]||0}get scrap(){return this.sharedView[sc.SCRAP_DISPLAY]||0}get visualEffects(){return{uiOffset:this.sharedView[sc.UI_BOUNCE]||0,glitchIntensity:this.sharedView[sc.GLITCH_INTENSITY]||0,vignettePulse:this.sharedView[sc.VIGNETTE_PULSE]||0}}}class SI extends _w{constructor(e){super(e,"Game2")}modifyStat(e,t){this.send(e,{amount:t})}async jumpToGame1(){const{Game1State:e}=await cu(async()=>{const{Game1State:t}=await Promise.resolve().then(()=>ly);return{Game1State:t}},void 0);Ar.getInstance().replace(new e(!1))}async loadLevel(e){const{Game2State:t}=await cu(async()=>{const{Game2State:r}=await Promise.resolve().then(()=>uy);return{Game2State:r}},void 0);Ar.getInstance().replace(new t(!1,e))}async resetLevel(){await Ma.getInstance().performLoad(this.RESET_SLOT);const{Game2State:e}=await cu(async()=>{const{Game2State:r}=await Promise.resolve().then(()=>uy);return{Game2State:r}},void 0),t=this.vm.currentLevel||Ho.Level1;Ar.getInstance().replace(new e(!1,t))}onKeyDown(e){e.key==="Escape"&&this.handleEscape()}onWorkerEvent(e){}async handleEscape(){const{PauseMenuState:e}=await cu(async()=>{const{PauseMenuState:t}=await import("./PauseMenuState-D2DF8Lc5.js");return{PauseMenuState:t}},[]);Ar.getInstance().push(new e)}nextLevel(){ks.getInstance().completeCurrentStep()}failLevel(){ks.getInstance().failCurrentStep()}}class du extends vw{constructor(e=!1,t=Ho.Level1){super(e),this.currentLevel=t}name="Game2";logicSchema=vI;viewSchema=sc;viewComponent=wI;getConfig(){return xI(this.currentLevel)}getSessionOverrides(e){const t={},r=e.get(Ff.hp);r!==void 0&&(t.initialHP=r);const s=e.get(Ff.energy);return s!==void 0&&(t.initialEnergy=s),t}initMVC(){this.vm=new bI,this.controller=new SI(this.vm)}}const uy=Object.freeze(Object.defineProperty({__proto__:null,Game2State:du},Symbol.toStringTag,{value:"Module"}));class EI extends oh{constructor(){super(),this.handleKeyDown=this.handleKeyDown.bind(this)}async init(){this.isRendering=!0,window.addEventListener("keydown",this.handleKeyDown,!0)}destroy(){window.removeEventListener("keydown",this.handleKeyDown,!0)}onClose(){Ar.getInstance().pop()}handleKeyDown(e){e.key==="Escape"&&(e.stopImmediatePropagation(),e.preventDefault(),this.onClose())}}function TI(n,e,t){var r,s;typeof n=="function"?(r=e||[],s=t):(r=[],s=e);var a=fn.useRef({hasResult:!1,result:s,error:null}),c=fn.useReducer(function(_){return _+1},0);c[0];var f=c[1],m=fn.useMemo(function(){var _=typeof n=="function"?n():n;if(!_||typeof _.subscribe!="function")throw n===_?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!a.current.hasResult&&typeof window<"u"&&(typeof _.hasValue!="function"||_.hasValue()))if(typeof _.getValue=="function")a.current.result=_.getValue(),a.current.hasResult=!0;else{var w=_.subscribe(function(d){a.current.result=d,a.current.hasResult=!0});typeof w=="function"?w():w.unsubscribe()}return _},r);if(fn.useDebugValue(a.current.result),fn.useEffect(function(){var _=m.subscribe(function(w){var d=a.current;(d.error!==null||d.result!==w)&&(d.error=null,d.result=w,d.hasResult=!0,f())},function(w){var d=a.current;d.error!==w&&(d.error=w,f())});return typeof _=="function"?_:_.unsubscribe.bind(_)},r),a.current.error)throw a.current.error;return a.current.result}function AI(n,e,t){return TI(function(){return ih.liveQuery(n)},[],t)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(n){var e=ih.DexieYProvider;e&&e.release(n)});const CI=({activeStateName:n,onSave:e,onLoad:t,onBack:r})=>{const s=AI(()=>ey.saves.toArray()),a=[1,2,3];return _e.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center"},children:_e.jsxs("div",{style:II,children:[_e.jsx("h2",{style:{fontSize:"2.5cqw",color:"#0f0",letterSpacing:"0.2cqw"},children:"DATA_STORAGE_INTERFACE"}),_e.jsx("div",{style:{display:"flex",gap:"2cqw"},children:a.map(c=>{const f=s?.find(m=>m.id===c);return _e.jsxs("div",{style:PI,children:[_e.jsxs("div",{style:{color:"#888",fontSize:"0.8cqw"},children:["SLOT_0",c]}),_e.jsx("div",{style:{margin:"1.5cqw 0",height:"4cqw",borderBottom:"1px solid #222"},children:f?_e.jsxs(_e.Fragment,{children:[_e.jsx("div",{style:{color:"#fff",fontSize:"1.1cqw"},children:f.stateName}),_e.jsx("div",{style:{color:"#444",fontSize:"0.7cqw",marginTop:"0.4cqw"},children:new Date(f.timestamp).toLocaleString()})]}):_e.jsx("div",{style:{color:"#333",fontSize:"0.9cqw"},children:"--- EMPTY_SECTOR ---"})}),_e.jsx("button",{onClick:()=>e(c),style:pg("#27ae60"),children:"OVERWRITE"}),f&&_e.jsx("button",{onClick:()=>t(c),style:pg("#2980b9"),children:"RESTORE"})]},c)})}),_e.jsx("button",{onClick:r,style:{...pg("#c0392b"),marginTop:"3cqw",width:"12cqw"},children:"RETURN_TO_SYSTEM"})]})})},II={position:"relative",width:"100%",height:"100%",maxWidth:"calc(100vh * (16 / 9))",maxHeight:"calc(100vw * (9 / 16))",aspectRatio:"16 / 9",backgroundColor:"rgba(5, 5, 5, 0.95)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:"monospace",zIndex:3e3,containerType:"size"},PI={width:"18cqw",padding:"1.5cqw",border:"1px solid #333",backgroundColor:"#0a0a0a",borderRadius:"0.4cqw",boxShadow:"0 0 1cqw rgba(0,0,0,0.5)"},pg=n=>({width:"100%",padding:"0.8cqw",marginBottom:"0.5cqw",backgroundColor:n,color:"white",border:"none",cursor:"pointer",fontFamily:"monospace",fontWeight:"bold",fontSize:"0.8cqw",borderRadius:"0.2cqw",transition:"filter 0.1s"});class RI extends EI{name="SaveMenu";stateRegistry={Game1:Oa,Game2:du};getView(){const e=Ar.getInstance(),t=e.getUnderlyingStateName()||"Unknown";return fn.createElement(CI,{activeStateName:t,onBack:()=>e.pop(),onSave:async r=>{const s=e.getUnderlyingStateName();s&&await Ma.getInstance().performSave(r,s)},onLoad:async r=>{const s=await Ma.getInstance().performLoad(r),a=this.stateRegistry[s.stateName];if(a){const c=new a(!1);a.loadingConfig,e.pop(),e.replace(c)}}})}}const Ow=({isFinished:n,onTransitionComplete:e})=>{const[t,r]=Pt.useState(1),[s,a]=Pt.useState("");return Pt.useEffect(()=>{if(n)return;const c=setInterval(()=>{a(f=>f.length>=3?"":f+".")},400);return()=>clearInterval(c)},[n]),Pt.useEffect(()=>{if(n){const c=setTimeout(()=>{r(0)},600);return()=>clearTimeout(c)}},[n]),Pt.useEffect(()=>{if(t===0){const c=setTimeout(e,500);return()=>clearTimeout(c)}},[t,e]),_e.jsx("div",{style:{position:"absolute",inset:0,background:"#000",display:"flex",alignItems:"center",justifyContent:"center"},children:_e.jsx("div",{style:{width:"100%",height:"100%",maxWidth:"calc(100vh * (16 / 9))",maxHeight:"calc(100vw * (9 / 16))",aspectRatio:"16 / 9",backgroundColor:"#000",opacity:t,transition:"opacity 0.5s ease-in-out",display:"flex",alignItems:"center",justifyContent:"center",color:"#00ff00",fontFamily:"monospace",textTransform:"uppercase"},children:_e.jsx("div",{style:{fontSize:"1.5cqw",letterSpacing:"0.2cqw",textAlign:"center"},children:n?_e.jsx("span",{style:{color:"#fff"},children:"Loaded"}):_e.jsxs("span",{children:["Loading",s]})})})})},Oo=({label:n,onClick:e,active:t,color:r="#444",subLabel:s})=>_e.jsxs("button",{onClick:e,disabled:!e,style:{padding:"1cqw",backgroundColor:t?"#4f4":e?r:"#222",color:t?"#000":e?"#fff":"#666",border:"0.1cqw solid #555",borderRadius:"0.4cqw",cursor:e?"pointer":"default",fontSize:"0.8cqw",fontWeight:"bold",textAlign:"center",transition:"all 0.1s",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[_e.jsx("span",{children:n}),s&&_e.jsx("span",{style:{fontSize:"0.6cqw",fontWeight:"normal",opacity:.8},children:s})]}),mg=({label:n,value:e,onChange:t})=>_e.jsxs("div",{style:{marginBottom:"1.2cqw"},children:[_e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.7cqw",color:"#00ff00",marginBottom:"0.4cqw"},children:[_e.jsx("span",{children:n}),_e.jsxs("span",{children:[Math.round(e*100),"%"]})]}),_e.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:e,onChange:r=>t(parseFloat(r.target.value)),style:{width:"100%",cursor:"pointer",accentColor:"#00ff00",height:"0.8cqh"}})]}),kI=({onNavigate:n,res:e,setRes:t})=>{const r=Qn.getInstance(),s=ka.getInstance(),[a,c]=Pt.useState({master:r.get("master_volume")??.5,ost:r.get("ost_volume")??.5,sfx:r.get("sfx_volume")??.5}),f=()=>{Ar.getInstance().push(new RI)},m=(b,T)=>{s.setVolume(b,T),r.set(`${b}_volume`,T),c(R=>({...R,[b]:T}))},_=b=>{t?.(b),r.set("resolution",b)},w=()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()},d=(b,T)=>{r.clearSavableKeys(),r.set("campaign_id",null),r.set("campaign_step_index",0);const R=new b(!1,T),k=b===Oa?{view:Ow}:{};Ar.getInstance().replace(R,k)},v=b=>{ks.getInstance().startCampaign(b)};return _e.jsx("div",{style:{position:"absolute",inset:0,background:"#000",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:_e.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",maxWidth:"calc(100vh * (16 / 9))",maxHeight:"calc(100vw * (9 / 16))",aspectRatio:"16 / 9",backgroundColor:"#0a0a0a",color:"#00ff00",padding:"2cqw",boxSizing:"border-box",fontFamily:"monospace",border:"0.2cqw solid #333",display:"flex",gap:"2cqw",containerType:"size"},children:[_e.jsxs("div",{style:{flex:2},children:[_e.jsx("h2",{style:{fontSize:"2cqw",letterSpacing:"0.2cqw",borderBottom:"0.1cqw solid #333",paddingBottom:"1cqw",margin:0,display:"flex",justifyContent:"space-between",alignItems:"center"},children:_e.jsx("span",{children:"DEV_SWITCHBOARD_V1"})}),_e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1.5cqw",marginTop:"2cqw"},children:[_e.jsxs("div",{style:{gridColumn:"span 2",display:"flex",flexDirection:"column",gap:"0.5cqw"},children:[_e.jsx("div",{style:{fontSize:"0.8cqw",color:"#e74c3c",marginBottom:"0.5cqw"},children:"CAMPAIGN_MODES"}),_e.jsxs("div",{style:{display:"flex",gap:"1cqw"},children:[_e.jsx("div",{style:{flex:1},children:_e.jsx(Oo,{label:"STORY MODE",subLabel:"Full Progression",onClick:()=>v("story_mode"),color:"#e74c3c"})}),_e.jsx("div",{style:{flex:1},children:_e.jsx(Oo,{label:"ARCADE MODE",subLabel:"Quick Action",onClick:()=>v("arcade_mode"),color:"#f39c12"})})]})]}),_e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5cqw"},children:[_e.jsx("div",{style:{fontSize:"0.8cqw",color:"#888",marginBottom:"0.5cqw"},children:"MODULE: GAME_01"}),_e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.5cqw"},children:[_e.jsx(Oo,{label:"LVL 1",onClick:()=>d(Oa,oo.Level1),color:"#27ae60"}),_e.jsx(Oo,{label:"LVL 2",onClick:()=>d(Oa,oo.Level2),color:"#2980b9"}),_e.jsx(Oo,{label:"LVL 3",onClick:()=>d(Oa,oo.Level3),color:"#8e44ad"})]})]}),_e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5cqw"},children:[_e.jsx("div",{style:{fontSize:"0.8cqw",color:"#888",marginBottom:"0.5cqw"},children:"MODULE: GAME_02"}),_e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.5cqw"},children:[_e.jsx(Oo,{label:"LVL 1",onClick:()=>d(du,Ho.Level1),color:"#c0392b"}),_e.jsx(Oo,{label:"LVL 2",onClick:()=>d(du,Ho.Level2),color:"#d35400"}),_e.jsx(Oo,{label:"LVL 3",onClick:()=>d(du,Ho.Level3),color:"#f39c12"})]})]}),_e.jsxs("div",{style:{gridColumn:"span 2",marginTop:"1cqw"},children:[_e.jsx("div",{style:{fontSize:"0.8cqw",color:"#888",marginBottom:"0.5cqw"},children:"SYSTEM_NAVIGATION"}),_e.jsx(Oo,{label:"OPEN SAVE / LOAD MENU",onClick:f,color:"#d35400"})]})]})]}),_e.jsxs("div",{style:{flex:1,backgroundColor:"#111",padding:"1.5cqw",borderRadius:"0.4cqw",borderLeft:"0.1cqw solid #333",display:"flex",flexDirection:"column"},children:[_e.jsx("h3",{style:{fontSize:"1.2cqw",margin:"0 0 2cqw 0",borderBottom:"0.1cqw solid #333",paddingBottom:"0.5cqw"},children:"GLOBAL_CONFIG"}),_e.jsx(mg,{label:"MASTER_VOLUME",value:a.master,onChange:b=>m("master",b)}),_e.jsx(mg,{label:"OST_VOLUME",value:a.ost,onChange:b=>m("ost",b)}),_e.jsx(mg,{label:"SFX_VOLUME",value:a.sfx,onChange:b=>m("sfx",b)}),_e.jsxs("div",{style:{marginTop:"1cqw",marginBottom:"1.5cqw"},children:[_e.jsx("div",{style:{fontSize:"0.7cqw",color:"#888",marginBottom:"0.6cqw"},children:"DISPLAY_RESOLUTION"}),_e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.4cqw"},children:["540p","720p","1080p","1440p","4k","fit"].map(b=>_e.jsx(Oo,{label:b.toUpperCase(),active:e===b,onClick:()=>_(b)},b))})]}),_e.jsxs("div",{style:{marginBottom:"2cqw"},children:[_e.jsx("div",{style:{fontSize:"0.7cqw",color:"#888",marginBottom:"0.6cqw"},children:"WINDOW_MODE"}),_e.jsx(Oo,{label:"TOGGLE FULLSCREEN",onClick:w,color:"#b33939"})]}),_e.jsxs("div",{style:{marginTop:"auto",fontSize:"0.7cqw",color:"#444",lineHeight:"1.4"},children:["PERSISTENCE: ACTIVE",_e.jsx("br",{}),"SETTINGS_SYNC: LOCAL_STORAGE",_e.jsx("br",{}),"ACTIVE_RES: ",e?.toUpperCase()]})]})]})})};class Dw extends oh{name="DevMenu";async init(){this.isRendering=!0}update(e,t){}getView(){return fn.createElement(kI,{key:this.name,onNavigate:(e,...t)=>{const r=new e(...t);Ar.getInstance().replace(r)}})}destroy(){}}class j0{static states=new Map;static register(e,t){this.states.set(e,t)}static get(e){return this.states.get(e)}}class MI extends oh{name="ContinueScreen";async init(){this.isInitialized=!0,this.isRendering=!0,this.isUpdating=!0}update(e,t){}destroy(){}getView(){return _e.jsx(OI,{},"continue-view")}}const OI=()=>{const[n,e]=Pt.useState(9);Pt.useEffect(()=>{const s=setInterval(()=>{e(c=>c<=0?(clearInterval(s),r(),0):c-1)},1e3),a=c=>{c.key==="Enter"&&t(),c.key==="Escape"&&r()};return window.addEventListener("keydown",a),()=>{clearInterval(s),window.removeEventListener("keydown",a)}},[]);const t=()=>{ks.getInstance().retryCurrentStep()},r=()=>{ks.getInstance().quitCampaign()};return _e.jsxs("div",{style:{width:"100%",height:"100%",background:"#000",color:"#fff",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:"Impact, sans-serif",textTransform:"uppercase"},children:[_e.jsx("h1",{style:{fontSize:"4rem",marginBottom:"20px",letterSpacing:"2px"},children:"CONTINUE?"}),_e.jsx("div",{style:{fontSize:"6rem",color:n<4?"#e74c3c":"#f1c40f",marginBottom:"40px"},children:n}),_e.jsxs("div",{style:{display:"flex",gap:"40px"},children:[_e.jsx("button",{onClick:t,style:{padding:"15px 30px",fontSize:"1.5rem",background:"transparent",border:"3px solid white",color:"white",cursor:"pointer"},children:"YES (ENTER)"}),_e.jsx("button",{onClick:r,style:{padding:"15px 30px",fontSize:"1.5rem",background:"transparent",border:"3px solid #666",color:"#666",cursor:"pointer"},children:"NO (ESC)"})]})]})};class DI extends oh{name="GameOverScreen";async init(){this.isInitialized=!0,this.isRendering=!0}update(e,t){}destroy(){}getView(){return _e.jsx(LI,{},"game-over-view")}}const LI=()=>(Pt.useEffect(()=>{const n=()=>{ks.getInstance().quitCampaign()},e=setTimeout(()=>{window.addEventListener("keydown",n),window.addEventListener("click",n)},500);return()=>{clearTimeout(e),window.removeEventListener("keydown",n),window.removeEventListener("click",n)}},[]),_e.jsxs("div",{style:{width:"100%",height:"100%",background:"#000",color:"#e74c3c",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:"monospace"},children:[_e.jsx("h1",{style:{fontSize:"5rem",margin:0},children:"GAME OVER"}),_e.jsx("p",{style:{marginTop:"20px",color:"#666",animation:"blink 1s infinite"},children:"PRESS ANY KEY"}),_e.jsx("style",{children:`
                @keyframes blink { 50% { opacity: 0; } }
            `})]})),NI=()=>{j0.register("Game1",Oa),j0.register("Game2",du)},z0=n=>_e.jsxs("div",{style:{width:"100%",height:"100%",background:"#111",color:"#ccc",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:"monospace"},children:[_e.jsx("h1",{style:{color:"#e74c3c"},children:"MISSION BRIEFING"}),_e.jsx("p",{style:{maxWidth:"60%",textAlign:"center",lineHeight:"1.6"},children:n.message}),n.isFinished&&_e.jsx("button",{onClick:n.onTransitionComplete,style:{marginTop:"20px",padding:"10px 20px",background:"#e74c3c",border:"none",color:"white",cursor:"pointer"},children:"DEPLOY"})]}),FI=[{name:"Prologue: The Awakening",factory:n=>new Oa(!1,n),config:oo.Level1,loadingConfig:{view:z0,props:{message:"System initializing. Hostiles detected in Sector 7. Engage immediately."}}},{name:"Chapter 1: The Descent",factory:n=>new Oa(!1,n),config:oo.Level2,loadingConfig:{view:z0,props:{message:"Surface cleared. Descending into the sub-levels. Energy signatures rising."}}},{name:"Intermission: Resupply",factory:n=>new du(!1,n),config:Ho.Level1,loadingConfig:{view:Ow,props:{message:"Returning to Base..."}}}],BI=[{name:"Stage 1",factory:n=>new du(!1,n),config:Ho.Level1,loadingConfig:{props:{message:"Arcade Mode: Stage 1"}}},{name:"Stage 2",factory:n=>new Oa(!1,n),config:oo.Level3,loadingConfig:{props:{message:"Arcade Mode: Stage 2"}}}],UI=()=>{qc.register({id:"story_mode",steps:FI,failFactory:()=>new MI}),qc.register({id:"arcade_mode",steps:BI,failFactory:()=>new DI})},GI=()=>{const[n,e]=Pt.useState([]),[t,r]=Pt.useState(!1),[s,a]=Pt.useState("fit"),[c,f]=Pt.useState(1),[m,_]=Pt.useState(window.devicePixelRatio||1),w=Pt.useRef(!1);Pt.useEffect(()=>{const v=Ar.getInstance(),b=W=>e([...W]),T=()=>_(window.devicePixelRatio||1),R=window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);R.addEventListener("change",T);const k=W=>{W.key==="F3"&&(W.preventDefault(),r(z=>!z))};window.addEventListener("keydown",k);const L=v.subscribe(b);return w.current||(v.replace(new Dw),NI(),UI(),w.current=!0),()=>{window.removeEventListener("keydown",k),R.removeEventListener("change",T),L()}},[]),Pt.useEffect(()=>{let v=document.querySelector("link[rel~='icon']");v||(v=document.createElement("link"),v.rel="icon",document.head.appendChild(v)),v.href="res/sprite/icon/icon.png"},[]);const d=Pt.useMemo(()=>{switch(s){case"540p":return{w:960,h:540};case"720p":return{w:1280,h:720};case"1080p":return{w:1920,h:1080};case"1440p":return{w:2560,h:1440};case"4k":return{w:3840,h:2160};default:return null}},[s]);return _e.jsx("div",{className:"engine-wrapper",style:{width:"100vw",height:"100vh",backgroundColor:"#000",display:"flex",alignItems:"center",justifyContent:"center",overflow:"auto"},children:_e.jsxs("div",{className:"engine-root",style:{width:d?`${d.w/m}px`:"100%",height:d?`${d.h/m}px`:"auto",maxWidth:s==="fit"?"100vw":"none",maxHeight:s==="fit"?"100vh":"none",aspectRatio:"16 / 9",position:"relative",backgroundColor:"#111",imageRendering:"pixelated",containerType:"size",flexShrink:0,margin:"auto"},children:[n.map((v,b)=>_e.jsx("div",{style:{position:"absolute",inset:0,zIndex:b,pointerEvents:b===n.length-1?"auto":"none"},children:Pt.cloneElement(v,{width:d?.w||960,height:d?.h||540,res:s,setRes:a,uiScale:c,setUiScale:f})},b)),t&&_e.jsx(VA,{})]})})},Lw=document.getElementById("root");if(!Lw)throw new Error("Failed to find the root element.");au.getInstance().start();m1.createRoot(Lw).render(_e.jsx(fn.StrictMode,{children:_e.jsx(GI,{})}));export{ka as A,Dw as D,EI as M,fn as R,Qn as S,Ar as a,RI as b,_e as j,Pt as r};
