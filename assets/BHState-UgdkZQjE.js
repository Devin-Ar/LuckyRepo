import{B as ee,a as te,b as se,G as ne}from"./BasePresenter-KhSD_HDc.js";import{F as _,S as T,a as m,B as y,I as N,A as re,C as W,r as u,j as r,b as G,c as oe,l as U,m as ie}from"./index-SB0jwsSG.js";import{S as ae}from"./SaveManager-DuHkbwFV.js";import{m as d,A as ce,G as le}from"./GameSprite-GkIwotE9.js";class ue extends ee{isDead=!1;hasExited=!1;constructor(s){super(s,_.BH_GAME)}takeDamage(){this.send("TAKE_DAMAGE",{amount:15})}async jumpToGame2(){const s=await T.create(_.GAME_2,{reset:!1});await m.getInstance().replace(s)}async loadLevel(s){const e=await T.create(_.BH_GAME,{reset:!1,level:s});await m.getInstance().replace(e)}async resetLevel(){await ae.getInstance().performLoad(this.QUICK_SAVE_KEY);const s=this.vm.currentLevel||y.Level1,e=await T.create(_.BH_GAME,{reset:!1,level:s});await m.getInstance().replace(e)}onKeyDown(s){N.getInstance().isKeyAction(s.key,"PAUSE")&&this.openPauseMenu()}onWorkerEvent(s){s==="EXPLOSION_REQ"&&re.getInstance().play("sfx_explosion"),s==="PLAYER_DEAD"&&!this.isDead&&(this.isDead=!0,this.handlePlayerDeath()),s==="EXIT_DOOR_ENTERED"&&!this.hasExited&&(this.hasExited=!0,this.handleExitDoor())}handlePlayerDeath(){W.getInstance().failCurrentStep()}handleExitDoor(){W.getInstance().completeCurrentStep()}async openPauseMenu(){const s=m.getInstance();if(s.getCurrentStateName()===this.stateName){const e=await T.create(_.PAUSE_MENU);await s.push(e)}}}const h={HERO_X:0,HERO_Y:1,HERO_VX:36,HERO_VY:37,HERO_ROTATION:2,HERO_SCALE:3,HERO_HP_DISPLAY:4,HERO_FRAME:5,HERO_WIDTH:6,HERO_HEIGHT:7,CURRENT_WAVE:10,TOTAL_WAVES:11,WAVE_STATE:12,WAVE_DELAY_TIMER:13,EXIT_DOOR_ACTIVE:14,EXIT_DOOR_X:15,EXIT_DOOR_Y:16,CURRENT_LEVEL:17,BOSS_HP:18,BOSS_VULNERABLE:19,BOSS_X:20,BOSS_Y:21,BOSS_ACTIVE:22,ROCK_COUNT:30,PPROJ_COUNT:31,EPROJ_COUNT:32,MOUSE_RELATIVE:33,MAP_WIDTH:34,MAP_HEIGHT:35,BUFFER_SIZE:128},v={STRIDE:10,FRAME:8,BUFFER_SIZE:9e3},X={STRIDE:5,BUFFER_SIZE:500},Y={STRIDE:5,BUFFER_SIZE:5e3},he={main:h,rocks:v,pProjs:X,eProjs:Y},fe=["IDLE","DELAY","ACTIVE","CLEARED","ALL_CLEARED"];class de extends te{get mainView(){return this.sharedView}get rocksView(){return this.getBuffer("rocks")||new Float32Array(0)}get pProjsView(){return this.getBuffer("pProjs")||new Float32Array(0)}get eProjsView(){return this.getBuffer("eProjs")||new Float32Array(0)}get pos(){return{x:this.mainView[h.HERO_X]||0,y:this.mainView[h.HERO_Y]||0}}get hp(){return this.mainView[h.HERO_HP_DISPLAY]||0}get entityCount(){return Math.floor(this.mainView[h.ROCK_COUNT]||0)}get projCount(){return Math.floor(this.mainView[h.PPROJ_COUNT]||0)}get projEnemyCount(){return Math.floor(this.mainView[h.EPROJ_COUNT]||0)}get currentWave(){return Math.floor(this.mainView[h.CURRENT_WAVE]||0)}get totalWaves(){return Math.floor(this.mainView[h.TOTAL_WAVES]||0)}get waveState(){const s=Math.floor(this.mainView[h.WAVE_STATE]||0);return fe[s]||"IDLE"}get waveDelayTimer(){return Math.floor(this.mainView[h.WAVE_DELAY_TIMER]||0)}get isRoomCleared(){return this.waveState==="ALL_CLEARED"&&this.entityCount===0}get exitDoorActive(){return(this.mainView[h.EXIT_DOOR_ACTIVE]||0)===1}get exitDoorX(){return this.mainView[h.EXIT_DOOR_X]||0}get exitDoorY(){return this.mainView[h.EXIT_DOOR_Y]||0}get currentLevelIndex(){return Math.floor(this.mainView[h.CURRENT_LEVEL]||0)}get bossHp(){return this.mainView[h.BOSS_HP]||0}get bossVulnerable(){return(this.mainView[h.BOSS_VULNERABLE]||0)===1}get bossPos(){return{x:this.mainView[h.BOSS_X]||0,y:this.mainView[h.BOSS_Y]||0}}get bossActive(){return(this.mainView[h.BOSS_ACTIVE]||0)===1}get heroVisuals(){return{x:this.mainView[h.HERO_X]||0,y:this.mainView[h.HERO_Y]||0,vx:this.mainView[h.HERO_VX]||0,vy:this.mainView[h.HERO_VY]||0,rotation:this.mainView[h.HERO_ROTATION]||0,scale:this.mainView[h.HERO_SCALE]||1,currentFrame:this.mainView[h.HERO_FRAME]||0,mousePos:this.mainView[h.MOUSE_RELATIVE]||0,width:this.mainView[h.HERO_WIDTH]||0,height:this.mainView[h.HERO_HEIGHT]||0}}getRockViewData(s){const e=s*v.STRIDE;return{x:this.rocksView[e]||0,y:this.rocksView[e+1]||0,rotation:this.rocksView[e+2]||0,width:this.rocksView[e+6]||0,height:this.rocksView[e+7]||0,currentFrame:this.rocksView[e+8]||0,type:this.rocksView[e+9]||0}}getRockAttackData(s){const e=s*v.STRIDE;return{primedMode:this.rocksView[e+3]||0,endX:this.rocksView[e+4]||0,endY:this.rocksView[e+5]||0}}getPlayerProjData(s){const e=s*X.STRIDE;return{x:this.pProjsView[e]||0,y:this.pProjsView[e+1]||0,width:this.pProjsView[e+2]||0,height:this.pProjsView[e+3]||0,seed:this.pProjsView[e+4]||0}}getEnemyProjData(s){const e=s*Y.STRIDE;return{x:this.eProjsView[e]||0,y:this.eProjsView[e+1]||0,width:this.eProjsView[e+2]||0,height:this.eProjsView[e+3]||0,seed:this.eProjsView[e+4]||0}}get worldWidth(){return this.mainView[h.MAP_WIDTH]||960}get worldHeight(){return this.mainView[h.MAP_HEIGHT]||540}}const Ee=({paused:t,w:s,h:e})=>{const c=u.useRef(null),a=u.useRef(0);return u.useEffect(()=>{c.current?.clear().beginFill(16777215).drawRect(0,0,s,e).endFill()},[s,e]),d.useTick(l=>{if(!c.current||t)return;a.current+=Math.PI/60*l;const o=(Math.sin(a.current)+1)/2,n=Math.round(26+o*4),i=Math.round(26+o*54),f=Math.round(46+o*104);c.current.tint=(n<<16)+(i<<8)+f}),r.jsx(d.Graphics,{ref:c})},ge=({vm:t,paused:s,heroRef:e})=>{const[c,a]=u.useState(t.heroVisuals),[l,o]=u.useState("idle");return d.useTick(()=>{if(s)return;const n=t.heroVisuals;n.vx!=0||n.vy!=0?o("walk"):o("idle"),n.currentFrame!==c.currentFrame&&a(n)}),r.jsx(d.Container,{ref:e,children:r.jsx(le,{sheetName:"gold_shipBH",animationName:l,anchor:.5,currentFrame:c.currentFrame})})},xe=({vm:t,paused:s})=>{const e=u.useRef(null),c=u.useRef([]),a=G.getInstance();return d.useTick(()=>{if(!e.current)return;const l=t.entityCount,o=c.current;if(l>o.length)for(let n=o.length;n<l;n++){const i=t.getRockViewData(n);let f;if(i.type===1?f=a.getAnimation("shot_drone_movement"):f=a.getAnimation("laser_drone_movement"),f.length>0){const E=new ce(f);E.anchor.set(.5),E.scale.set(1.5),e.current.addChild(E),o.push(E)}}else if(l<o.length)for(let n=o.length-1;n>=l;n--){const i=o.pop();i&&(e.current.removeChild(i),i.destroy())}for(let n=0;n<l;n++){const i=o[n],f=t.getRockViewData(n);if(!f||s){i&&(i.visible=!1);continue}if(i.visible=!0,i.x=f.x,i.y=f.y,i.rotation=f.rotation,i.textures.length>0){const E=Math.floor(f.currentFrame)%i.textures.length;i.gotoAndStop(E)}}}),r.jsx(d.Container,{ref:e})},pe=({vm:t,paused:s})=>{const e=u.useRef(null),c=u.useRef([]),a=G.getInstance();return d.useTick(()=>{if(!e.current)return;const l=c.current;if(1>l.length){const n=a.getTexture("Gold Ship Gun");if(n){const i=new oe(n);i.anchor.set(.5,.7),e.current.addChild(i),l.push(i)}}const o=t.heroVisuals;if(l[0]){const n=l[0];if(s)n.visible=!1;else{n.visible=!0,n.x=o.x,n.y=o.y+12;const i=o.mousePos>=1.5||o.mousePos<=-1.5;n.scale.set(i?-1:1,1),n.rotation=i?o.mousePos+Math.PI:o.mousePos}}}),r.jsx(d.Container,{ref:e})},Re=({vm:t,paused:s,heroRef:e})=>r.jsxs(d.Container,{name:"foreground",children:[r.jsx(xe,{vm:t,paused:s}),r.jsx(ge,{vm:t,paused:s,heroRef:e}),r.jsx(pe,{vm:t,paused:s})]}),we=({vm:t,paused:s})=>{const e=u.useRef(null),c=u.useRef([]);return u.useEffect(()=>()=>{c.current.forEach(a=>a&&!a.destroyed&&a.destroy()),c.current=[]},[]),d.useTick(()=>{if(!e.current)return;const a=t.entityCount,l=c.current;if(a>l.length)for(let o=l.length;o<a;o++){const n=new U;n.visible=!1,e.current.addChild(n),l.push(n)}else if(a<l.length)for(let o=l.length-1;o>=a;o--){const n=l.pop();n&&(e.current.removeChild(n),n.destroy())}for(let o=0;o<a;o++){const n=l[o],i=t.getRockAttackData(o),f=t.getRockViewData(o);if(!i||s||i.primedMode!==1){n&&(n.visible=!1);continue}n.visible=!0,n.clear().lineStyle(30,16711680).moveTo(f.x,f.y).lineTo(i.endX,i.endY)}}),r.jsx(d.Container,{ref:e})},q=({vm:t,paused:s,type:e})=>{const c=u.useRef(null),a=u.useRef([]);return d.useTick(()=>{if(!c.current)return;const l=e==="player"?t.projCount:t.projEnemyCount,o=a.current;if(l>o.length)for(let n=o.length;n<l;n++){const i=new U;c.current.addChild(i),o.push(i)}else if(l<o.length)for(let n=o.length-1;n>=l;n--){const i=o.pop();i&&(c.current.removeChild(i),i.destroy())}for(let n=0;n<l;n++){const i=o[n],f=e==="player"?t.getPlayerProjData(n):t.getEnemyProjData(n);if(!f||s){i&&(i.visible=!1);continue}const E=e==="player"?65280:16711680;i.visible=!0,i.clear().lineStyle(2,E).beginFill(E,.4).drawRect(f.x-(f.width||10)/2,f.y-(f.height||10)/2,f.width||10,f.height||10).endFill()}}),r.jsx(d.Container,{ref:c})},Se=({vm:t,paused:s})=>{const e=u.useRef(null);return d.useTick(()=>{if(!e.current||s)return;const c=e.current;c.clear();const a=t.heroVisuals;a.width>0&&c.lineStyle(2,65535,.8).drawRect(a.x-a.width/2,a.y-a.height/2,a.width,a.height);const l=t.entityCount;c.lineStyle(2,16776960,.8);for(let o=0;o<l;o++){const n=t.getRockViewData(o);n.width>0&&c.drawRect(n.x-n.width/2,n.y-n.height/2,n.width,n.height)}}),r.jsx(d.Graphics,{ref:e})},_e=({vm:t,paused:s})=>{const e=u.useRef(null);return d.useTick(()=>{if(!e.current)return;if(!t.bossActive||s){e.current.visible=!1;return}const c=t.bossPos;e.current.visible=!0,e.current.clear().beginFill(t.bossVulnerable?15158332:4473924).lineStyle(4,16777215).drawCircle(c.x+100,c.y+100,100).endFill()}),r.jsx(d.Graphics,{ref:e})},ye=({vm:t,paused:s})=>r.jsxs(d.Container,{name:"hitbox_layer",children:[r.jsx(we,{vm:t,paused:s}),r.jsx(q,{vm:t,paused:s,type:"player"}),r.jsx(q,{vm:t,paused:s,type:"enemy"}),r.jsx(_e,{vm:t,paused:s}),r.jsx(Se,{vm:t,paused:s})]}),me=({w:t,h:s})=>{const e=d.useApp();return u.useEffect(()=>{e?.renderer&&(e.renderer.resize(t,s),e.view instanceof HTMLCanvasElement&&(e.view.width=t,e.view.height=s))},[e,t,s]),null},Ve=({vm:t,paused:s,width:e,height:c,scale:a,heroPos:l})=>{const o=u.useRef(null),n=u.useRef(null);return d.useTick(()=>{if(!o.current||!n.current)return;const i=t.heroVisuals,f=t.worldWidth,E=t.worldHeight;n.current.x=i.x,n.current.y=i.y,n.current.scale.x=i.mousePos>=1.5||i.mousePos<=-1.5?-1:1,l.current.x=i.x,l.current.y=i.y;const g=o.current;let x=e/2-i.x*a,p=c/2-i.y*a;const w=f*a,S=E*a;w>e?x=Math.min(0,Math.max(x,e-w)):x=(e-w)/2,S>c?p=Math.min(0,Math.max(p,c-S)):p=(c-S)/2,g.x=x,g.y=p}),r.jsxs(r.Fragment,{children:[r.jsx(me,{w:e,h:c}),r.jsx(Ee,{paused:s,w:e,h:c}),r.jsxs(d.Container,{ref:o,scale:a,children:[r.jsx(ye,{vm:t,paused:s}),r.jsx(Re,{vm:t,paused:s,heroRef:n})]})]})},Ae=({hp:t,rockCount:s,currentWave:e,totalWaves:c,waveState:a,waveDelayTimer:l,isRoomCleared:o,exitDoorActive:n,exitDoorX:i,exitDoorY:f,bossHp:E,bossVulnerable:g,gameWidth:x,gameHeight:p,shieldBarRef:w,shieldTextRef:S,damageBtnRef:C,onDamage:O,onJumpToG2:j,onLevel1:b,onLevel2:I,onLevel3:D,onLevel4:H,onResetG1:L})=>{const R={padding:"0.6cqw 1cqw",cursor:"pointer",color:"#fff",border:"none",borderRadius:"0.4cqw",fontWeight:"bold",fontFamily:"monospace",fontSize:"0.8cqw",pointerEvents:"auto",textAlign:"center"},P=()=>o?"ROOM CLEARED!":a==="DELAY"?`NEXT WAVE IN ${Math.ceil(l/60)}s`:a==="ACTIVE"?`ENEMIES: ${s}`:a==="CLEARED"?"WAVE CLEARED!":"STANDBY",V=()=>o?"#f1c40f":a==="DELAY"?"#e67e22":a==="ACTIVE"?"#e74c3c":a==="CLEARED"?"#2ecc71":"#888";return r.jsxs("div",{style:{position:"absolute",inset:0,pointerEvents:"none",containerType:"size"},children:[r.jsxs("div",{style:{position:"absolute",top:"5cqh",left:"50%",transform:"translateX(-50%)",width:"35cqw"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#fff",marginBottom:"0.5cqh",fontWeight:"bold",fontFamily:"monospace",fontSize:"1.2cqw"},children:[r.jsx("span",{children:"SHIELD ENERGY"}),r.jsxs("span",{ref:S,children:[Math.round(t),"%"]})]}),r.jsx("div",{style:{width:"100%",height:"2cqh",backgroundColor:"#222",borderRadius:"1cqw",border:"0.2cqw solid #fff",overflow:"hidden"},children:r.jsx("div",{ref:w,style:{width:`${Math.max(0,t)}%`,height:"100%",backgroundColor:t<30?"#c0392b":"#27ae60"}})})]}),E>0&&r.jsxs("div",{style:{position:"absolute",top:"15cqh",left:"50%",transform:"translateX(-50%)",width:"50cqw"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:g?"#e74c3c":"#888",marginBottom:"0.5cqh",fontWeight:"bold",fontFamily:"monospace",fontSize:"1cqw"},children:[r.jsxs("span",{children:["THE CORE ",g?"(VULNERABLE)":"(PROTECTED)"]}),r.jsxs("span",{children:[Math.max(0,E)," / 300"]})]}),r.jsx("div",{style:{width:"100%",height:"1.5cqh",backgroundColor:"#111",borderRadius:"0.75cqw",border:`0.2cqw solid ${g?"#e74c3c":"#444"}`,overflow:"hidden",boxShadow:g?"0 0 10px rgba(231, 76, 60, 0.4)":"none"},children:r.jsx("div",{style:{width:`${Math.max(0,E)/300*100}%`,height:"100%",backgroundColor:g?"#e74c3c":"#444",transition:"width 0.3s ease-out, background-color 0.3s ease"}})})]}),r.jsxs("div",{style:{position:"absolute",top:"3cqh",right:"3cqw",color:"#fff",fontFamily:"monospace",textAlign:"right",fontSize:"1.2cqw"},children:[r.jsxs("div",{style:{color:V(),fontSize:"1.4cqw",fontWeight:"bold",marginBottom:"0.5cqh"},children:["WAVE ",e+1," / ",c]}),r.jsx("div",{style:{color:V(),fontSize:"1cqw"},children:P()}),r.jsxs("div",{style:{color:"#888",fontSize:"0.8cqw",marginTop:"0.3cqh"},children:["ENEMIES_ACTIVE: ",s]})]}),o&&r.jsxs("div",{style:{position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",color:"#f1c40f",fontFamily:"monospace",fontSize:"3cqw",fontWeight:"bold",textShadow:"0 0 20px rgba(241, 196, 60, 0.6)",textAlign:"center",letterSpacing:"0.3cqw"},children:["ALL WAVES CLEARED",r.jsx("div",{style:{fontSize:"1.2cqw",color:"#fff",marginTop:"1cqh"},children:"PROCEED TO EXIT"})]}),n&&x>0&&p>0&&r.jsx("div",{style:{position:"absolute",left:`${i/x*100}%`,top:`${f/p*100}%`,transform:"translate(-50%, -50%)",width:"6.25%",height:"11.1%",border:"3px solid #f1c40f",backgroundColor:"rgba(241, 196, 60, 0.25)",boxShadow:"0 0 20px rgba(241, 196, 60, 0.5), inset 0 0 15px rgba(241, 196, 60, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",animation:"exitDoorPulse 1.5s ease-in-out infinite"},children:r.jsx("span",{style:{color:"#f1c40f",fontFamily:"monospace",fontWeight:"bold",fontSize:"0.9cqw",textShadow:"0 0 8px rgba(241, 196, 60, 0.8)"},children:"EXIT"})}),n&&r.jsx("style",{children:`
                    @keyframes exitDoorPulse {
                        0%, 100% { box-shadow: 0 0 20px rgba(241, 196, 60, 0.5), inset 0 0 15px rgba(241, 196, 60, 0.3); }
                        50% { box-shadow: 0 0 35px rgba(241, 196, 60, 0.8), inset 0 0 25px rgba(241, 196, 60, 0.5); }
                    }
                `}),a==="DELAY"&&l>0&&r.jsxs("div",{style:{position:"absolute",top:"35%",left:"50%",transform:"translate(-50%, -50%)",color:"#e67e22",fontFamily:"monospace",fontSize:"2cqw",fontWeight:"bold",textShadow:"0 0 15px rgba(230, 126, 34, 0.5)",textAlign:"center",opacity:.9},children:["WAVE ",e+1," INCOMING",r.jsx("div",{style:{fontSize:"4cqw",color:"#fff",marginTop:"0.5cqh"},children:Math.ceil(l/60)})]}),r.jsxs("div",{style:{position:"absolute",top:"3cqh",left:"3cqw",display:"flex",flexDirection:"column",gap:"1cqh"},children:[r.jsx("button",{ref:C,onClick:O,style:{...R,background:"#333",border:"0.1cqw solid #fff"},children:"TAKE DAMAGE (-15)"}),r.jsxs("div",{style:{display:"flex",gap:"0.5cqw"},children:[r.jsx("button",{onClick:b,style:{...R,background:"#408240",flex:1},children:"LVL 1"}),r.jsx("button",{onClick:I,style:{...R,background:"#C29F19",flex:1},children:"LVL 2"}),r.jsx("button",{onClick:D,style:{...R,background:"#C21919",flex:1},children:"LVL 3"}),r.jsx("button",{onClick:H,style:{...R,background:"#8E44AD",flex:1},children:"LVL 4"})]}),r.jsx("button",{onClick:j,style:{...R,background:"#2980b9"},children:"Go to Game 2"}),r.jsx("div",{style:{display:"flex",gap:"0.5cqw"},children:r.jsx("button",{onClick:L,style:{...R,background:"#c0392b",flex:1},children:"Quick Load"})})]})]})},Te=({vm:t,controller:s,width:e=960,height:c=540})=>{const[a,l]=u.useState(t.hp),[o,n]=u.useState(t.entityCount),[i,f]=u.useState(!1),[E,g]=u.useState(t.currentWave),[x,p]=u.useState(t.totalWaves),[w,S]=u.useState(t.waveState),[C,O]=u.useState(t.waveDelayTimer),[j,b]=u.useState(t.isRoomCleared),[I,D]=u.useState(t.exitDoorActive),[H,L]=u.useState(t.exitDoorX),[R,P]=u.useState(t.exitDoorY),[V,z]=u.useState(t.bossHp),[$,K]=u.useState(t.bossVulnerable),M=u.useRef(null),B=u.useRef(null),Z=u.useRef(null),k=u.useRef({x:t.pos.x,y:t.pos.y});u.useEffect(()=>{const Q=t.subscribe(()=>{const F=m.getInstance().getActiveState()?.name!=="BHGame";i!==F&&f(F);const A=t.hp;k.current.x=t.pos.x,k.current.y=t.pos.y,M.current&&(M.current.style.width=`${Math.max(0,A)}%`),B.current&&(B.current.innerText=`${Math.round(A)}%`),Math.abs(a-A)>1&&l(A),o!==t.entityCount&&n(t.entityCount),g(t.currentWave),p(t.totalWaves),S(t.waveState),O(t.waveDelayTimer),b(t.isRoomCleared),D(t.exitDoorActive),L(t.exitDoorX),P(t.exitDoorY),z(t.bossHp),K(t.bossVulnerable)});return()=>Q()},[t,a,o,i]);const J=u.useMemo(()=>e/960,[e]);return r.jsxs("div",{style:{position:"absolute",inset:0,background:"#000",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:[r.jsx("div",{style:{position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(d.Stage,{width:e,height:c,options:{backgroundColor:0,antialias:!0,resolution:1,autoDensity:!1},style:{display:"block",width:"100%",height:"100%",objectFit:"contain",imageRendering:"pixelated"},children:r.jsx(Ve,{vm:t,paused:i,width:e,height:c,scale:J,heroPos:k,hp:a})},`stage-${e}-${c}`)}),r.jsx(Ae,{hp:a,rockCount:o,currentWave:E,totalWaves:x,waveState:w,waveDelayTimer:C,isRoomCleared:j,exitDoorActive:I,exitDoorX:H,exitDoorY:R,bossHp:V,bossVulnerable:$,gameWidth:e,gameHeight:c,shieldBarRef:M,shieldTextRef:B,damageBtnRef:Z,onDamage:()=>s.takeDamage(),onJumpToG2:()=>s.jumpToGame2(),onLevel1:()=>s.loadLevel(y.Level1),onLevel2:()=>s.loadLevel(y.Level2),onLevel3:()=>s.loadLevel(y.Level3),onLevel4:()=>s.loadLevel(y.Level4),onResetG1:()=>s.resetLevel()})]})},Ce={REVISION:0,FRAME_COUNT:1,FPS:2,TICK_COUNT:3,HERO_HP:4,HERO_X:5,HERO_Y:6,HERO_VX:36,HERO_VY:37,HERO_WIDTH:7,HERO_HEIGHT:8,LAST_HIT_FRAME:9,CURRENT_WAVE:10,TOTAL_WAVES:11,WAVE_STATE:12,WAVE_DELAY_TIMER:13,EXIT_DOOR_ACTIVE:14,EXIT_DOOR_X:15,EXIT_DOOR_Y:16,CURRENT_LEVEL:17,BOSS_HP:18,BOSS_VULNERABLE:19,BOSS_X:20,BOSS_Y:21,BOSS_ACTIVE:22,ROCK_COUNT:30,PPROJ_COUNT:31,EPROJ_COUNT:32,MOUSE_RELATIVE:33,MAP_WIDTH:34,MAP_HEIGHT:35,BUFFER_SIZE:128},Oe={STRIDE:10,FRAME:8,BUFFER_SIZE:9e3},je={STRIDE:5,BUFFER_SIZE:500},be={STRIDE:5,BUFFER_SIZE:5e3},Ie={main:Ce,rocks:Oe,pProjs:je,eProjs:be};class ke extends se{name=_.BH_GAME;logicSchema=Ie;viewSchema=he;viewComponent=Te;currentLevel;constructor(s={}){super(s.reset??!1),this.currentLevel=s.level??y.Level1}getConfig(){return ie(this.currentLevel)}getSessionOverrides(s){const e=s.get(ne.hp);return e!==void 0?{initialHP:e}:{}}initMVC(){this.vm=new de,this.controller=new ue(this.vm)}async init(){N.getInstance().refreshBindings(this.name),await super.init()}}export{ke as BHState};
//# sourceMappingURL=BHState-UgdkZQjE.js.map
