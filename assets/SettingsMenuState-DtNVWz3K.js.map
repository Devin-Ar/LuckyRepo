{"version":3,"file":"SettingsMenuState-DtNVWz3K.js","sources":["../../src/features/shared-menus/controllers/SettingsMenuController.ts","../../src/features/shared-menus/views/SettingsView.tsx","../../src/features/shared-menus/states/SettingsMenuState.ts"],"sourcesContent":["// src/features/shared-menus/controllers/SettingsMenuController.ts\r\nimport { BaseMenuController } from \"../../../core/templates/BaseMenuController\";\r\nimport { SharedSession } from \"../../../core/session/SharedSession\";\r\nimport { AudioManager } from \"../../../core/managers/AudioManager\";\r\nimport { StateManager } from \"../../../core/managers/StateManager\"; // Import explicitly\r\nimport { INPUT_REGISTRY } from \"../../../core/registry/InputRegistry\";\r\n\r\nexport class SettingsMenuController extends BaseMenuController {\r\n    private session = SharedSession.getInstance();\r\n    private audio = AudioManager.getInstance();\r\n\r\n    private onRefreshBinds?: () => void;\r\n\r\n    public registerBindRefresh(cb: () => void) {\r\n        this.onRefreshBinds = cb;\r\n    }\r\n\r\n    public onBack(): void {\r\n        StateManager.getInstance().pop();\r\n    }\r\n\r\n    public getVolume(type: 'master' | 'ost' | 'sfx'): number {\r\n        return this.session.get<number>(`${type}_volume`) ?? 0.5;\r\n    }\r\n\r\n    public setVolume(type: 'master' | 'ost' | 'sfx', value: number) {\r\n        this.session.set(`${type}_volume`, value);\r\n        this.audio.setVolume(type, value);\r\n    }\r\n\r\n    public getResolution(): string {\r\n        return this.session.get<string>('resolution') ?? '1080p';\r\n    }\r\n\r\n    public setResolution(res: string) {\r\n        this.session.set('resolution', res);\r\n    }\r\n\r\n    public async toggleFullscreen(): Promise<boolean> {\r\n        if (!document.fullscreenElement) {\r\n            await document.documentElement.requestFullscreen().catch(() => {});\r\n            return true;\r\n        } else {\r\n            if (document.exitFullscreen) await document.exitFullscreen();\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public getRegistryProfiles(): string[] {\r\n        return Object.keys(INPUT_REGISTRY);\r\n    }\r\n\r\n    public getBindingsForGame(gameName: string): Record<string, { keys: string[], label: string }> {\r\n        const rawRegistry = INPUT_REGISTRY[gameName] || {};\r\n        const overrides = this.session.get<Record<string, string[]>>(`bind_${gameName}`) || {};\r\n\r\n        const result: Record<string, { keys: string[], label: string }> = {};\r\n\r\n        for (const [action, data] of Object.entries(rawRegistry)) {\r\n            result[action] = {\r\n                label: data.label,\r\n                keys: overrides[action] ? [...overrides[action]] : [...data.keys]\r\n            };\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public setBinding(action: string, key: string, gameName: string, slotIndex: number) {\r\n        this.input.setBinding(action, key, gameName, slotIndex);\r\n\r\n        if (this.onRefreshBinds) this.onRefreshBinds();\r\n    }\r\n\r\n    public resetBindings(gameName: string) {\r\n        this.input.resetBindings(gameName);\r\n        if (this.onRefreshBinds) this.onRefreshBinds();\r\n    }\r\n}","// src/features/shared-menus/views/SettingsViews.tsx\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { SettingsMenuController } from '../controllers/SettingsMenuController';\r\n\r\ninterface SettingsViewProps {\r\n    controller: SettingsMenuController;\r\n    res?: string;\r\n    setRes?: (r: string) => void;\r\n}\r\n\r\nconst btnStyle: React.CSSProperties = {\r\n    padding: '0.8cqw 2cqw', cursor: 'pointer', border: '1px solid #00ff00',\r\n    background: '#000', color: '#00ff00', fontWeight: 'bold', fontFamily: 'monospace'\r\n};\r\nconst rowStyle: React.CSSProperties = {\r\n    display: 'flex', justifyContent: 'space-between', alignItems: 'center',\r\n    padding: '1cqw 1.5cqw', borderBottom: '1px solid #1a1a1a'\r\n};\r\nconst controlGroupStyle: React.CSSProperties = {\r\n    display: 'flex', alignItems: 'center', gap: '1.5cqw',\r\n    minWidth: '20cqw', justifyContent: 'flex-end'\r\n};\r\nconst sliderStyle: React.CSSProperties = { cursor: 'pointer', accentColor: '#00ff00', width: '12cqw' };\r\nconst inputStyle: React.CSSProperties = {\r\n    backgroundColor: '#000', color: '#00ff00', border: '1px solid #00ff00',\r\n    padding: '0.5cqw', fontFamily: 'monospace', outline: 'none'\r\n};\r\n\r\nexport const SettingsView: React.FC<SettingsViewProps> = ({ controller, res, setRes }) => {\r\n    const [activeTab, setActiveTab] = useState<'system' | 'controls'>('system');\r\n    const [isFullscreen, setIsFullscreen] = useState(!!document.fullscreenElement);\r\n    const [localRes, setLocalRes] = useState(res || controller.getResolution());\r\n    const [vols, setVols] = useState({\r\n        master: controller.getVolume('master'),\r\n        ost: controller.getVolume('ost'),\r\n        sfx: controller.getVolume('sfx')\r\n    });\r\n\r\n    const [selectedProfile, setSelectedProfile] = useState<string>(\"Shared\");\r\n    const [bindingTarget, setBindingTarget] = useState<{action: string, slot: number} | null>(null);\r\n    const [viewBinds, setViewBinds] = useState<Record<string, { keys: string[], label: string }>>({});\r\n\r\n    const refreshViewBinds = useCallback(() => {\r\n        const merged = controller.getBindingsForGame(selectedProfile);\r\n        setViewBinds(merged);\r\n    }, [selectedProfile, controller]);\r\n\r\n    useEffect(() => {\r\n        controller.registerBindRefresh(refreshViewBinds);\r\n        refreshViewBinds();\r\n    }, [refreshViewBinds, controller]);\r\n\r\n    useEffect(() => {\r\n        if (!bindingTarget) return;\r\n\r\n        const handleKeyDown = (e: KeyboardEvent) => {\r\n            e.preventDefault();\r\n            e.stopImmediatePropagation();\r\n\r\n            const key = e.key.toUpperCase();\r\n            controller.setBinding(bindingTarget.action, key, selectedProfile, bindingTarget.slot);\r\n\r\n            setBindingTarget(null);\r\n            refreshViewBinds();\r\n        };\r\n\r\n        window.addEventListener('keydown', handleKeyDown, true);\r\n        return () => window.removeEventListener('keydown', handleKeyDown, true);\r\n    }, [bindingTarget, controller, refreshViewBinds, selectedProfile]);\r\n\r\n    const handleVolumeChange = (cat: 'master' | 'ost' | 'sfx', val: number) => {\r\n        setVols(prev => ({ ...prev, [cat]: val }));\r\n        controller.setVolume(cat, val);\r\n    };\r\n\r\n    const handleResChange = (newRes: string) => {\r\n        setLocalRes(newRes);\r\n        controller.setResolution(newRes);\r\n        if (setRes) setRes(newRes);\r\n    };\r\n\r\n    const toggleFullscreen = async () => {\r\n        const isFull = await controller.toggleFullscreen();\r\n        setIsFullscreen(isFull);\r\n    };\r\n\r\n    const handleReset = () => {\r\n        controller.resetBindings(selectedProfile);\r\n        refreshViewBinds();\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'absolute', inset: 0, background: 'rgba(0,0,0,0.85)',\r\n            display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 1200\r\n        }}>\r\n            <div style={{\r\n                width: '85%', height: '80%', background: '#050505', border: '2px solid #00ff00',\r\n                padding: '2cqw', display: 'flex', flexDirection: 'column', color: '#00ff00',\r\n                fontFamily: 'monospace', containerType: 'size'\r\n            }}>\r\n\r\n                <div style={{ display: 'flex', gap: '2cqw', borderBottom: '2px solid #00ff00', marginBottom: '1cqw' }}>\r\n                    <h2 onClick={() => setActiveTab('system')}\r\n                        style={{ cursor: 'pointer', opacity: activeTab === 'system' ? 1 : 0.4, paddingBottom: '0.5cqw' }}>\r\n                        [ SYSTEM_CONFIGURATION ]\r\n                    </h2>\r\n                    <h2 onClick={() => setActiveTab('controls')}\r\n                        style={{ cursor: 'pointer', opacity: activeTab === 'controls' ? 1 : 0.4, paddingBottom: '0.5cqw' }}>\r\n                        [ INPUT_BINDINGS ]\r\n                    </h2>\r\n                </div>\r\n\r\n                <div style={{ flex: 1, overflowY: 'auto', paddingRight: '1cqw' }}>\r\n                    {activeTab === 'system' ? (\r\n                        <>\r\n                            <div style={rowStyle}>\r\n                                <span>MASTER_OUTPUT_LEVEL</span>\r\n                                <div style={controlGroupStyle}>\r\n                                    <span>{Math.round(vols.master * 100)}%</span>\r\n                                    <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" value={vols.master}\r\n                                           onChange={(e) => handleVolumeChange('master', parseFloat(e.target.value))}\r\n                                           style={sliderStyle}/>\r\n                                </div>\r\n                            </div>\r\n                            <div style={rowStyle}>\r\n                                <span>OST_SEQUENCE_LEVEL</span>\r\n                                <div style={controlGroupStyle}>\r\n                                    <span>{Math.round(vols.ost * 100)}%</span>\r\n                                    <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" value={vols.ost}\r\n                                           onChange={(e) => handleVolumeChange('ost', parseFloat(e.target.value))}\r\n                                           style={sliderStyle}/>\r\n                                </div>\r\n                            </div>\r\n                            <div style={rowStyle}>\r\n                                <span>SFX_IMPULSE_LEVEL</span>\r\n                                <div style={controlGroupStyle}>\r\n                                    <span>{Math.round(vols.sfx * 100)}%</span>\r\n                                    <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" value={vols.sfx}\r\n                                           onChange={(e) => handleVolumeChange('sfx', parseFloat(e.target.value))}\r\n                                           style={sliderStyle}/>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div style={rowStyle}>\r\n                                <span>DISPLAY_RESOLUTION</span>\r\n                                <select value={localRes} onChange={(e) => handleResChange(e.target.value)} style={inputStyle}>\r\n                                    {['540p', '720p', '1080p', '1440p', '4k', 'fit'].map(r => (\r\n                                        <option key={r} value={r}>{r.toUpperCase()}</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                            <div style={rowStyle}>\r\n                                <span>WINDOW_MODE</span>\r\n                                <button onClick={toggleFullscreen} style={btnStyle}>\r\n                                    {isFullscreen ? '[ FULLSCREEN ]' : '[ WINDOWED ]'}\r\n                                </button>\r\n                            </div>\r\n                        </>\r\n                    ) : (\r\n                        <div>\r\n                            {/* Registry Profile Selector */}\r\n                            <div style={{ ...rowStyle, borderBottom: '2px solid #333', marginBottom: '1.5cqw' }}>\r\n                                <span style={{ color: '#888' }}>SELECT_REGISTRY_CONTEXT:</span>\r\n                                <select\r\n                                    value={selectedProfile}\r\n                                    onChange={(e) => setSelectedProfile(e.target.value)}\r\n                                    style={{...inputStyle, width: '25cqw'}}\r\n                                >\r\n                                    {controller.getRegistryProfiles().map(name => (\r\n                                        <option key={name} value={name}>{name.toUpperCase()}</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n\r\n                            <p style={{ color: '#888', marginBottom: '1cqw', fontSize: '0.8em' }}>\r\n                                CONFIGURING: {selectedProfile.toUpperCase()}\r\n                            </p>\r\n\r\n                            {Object.entries(viewBinds).map(([action, data]) => (\r\n                                <div key={action} style={rowStyle}>\r\n                                    <span style={{ flex: 1 }}>{data.label}</span>\r\n                                    <div style={{ display: 'flex', gap: '1cqw' }}>\r\n                                        {[0, 1].map(slotIndex => {\r\n                                            const isBinding = bindingTarget?.action === action && bindingTarget?.slot === slotIndex;\r\n                                            return (\r\n                                                <button\r\n                                                    key={slotIndex}\r\n                                                    onClick={() => setBindingTarget({ action, slot: slotIndex })}\r\n                                                    style={{\r\n                                                        ...btnStyle,\r\n                                                        width: '12cqw',\r\n                                                        borderColor: isBinding ? '#fff' : '#00ff00',\r\n                                                        color: isBinding ? '#fff' : '#00ff00'\r\n                                                    }}\r\n                                                >\r\n                                                    {isBinding ? '???' : `[ ${data.keys[slotIndex] || '---'} ]`}\r\n                                                </button>\r\n                                            );\r\n                                        })}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div style={{\r\n                    marginTop: 'auto',\r\n                    textAlign: 'right',\r\n                    paddingTop: '1cqw',\r\n                    borderTop: '1px solid #00ff00',\r\n                    display: 'flex',\r\n                    justifyContent: 'flex-end',\r\n                    gap: '1cqw'\r\n                }}>\r\n                    {activeTab === 'controls' && (\r\n                        <button\r\n                            onClick={handleReset}\r\n                            style={{\r\n                                ...btnStyle,\r\n                                borderColor: '#ff4444',\r\n                                color: '#ff4444',\r\n                                background: 'rgba(255, 0, 0, 0.1)'\r\n                            }}\r\n                        >\r\n                            RESET_DEFAULTS_[{selectedProfile.toUpperCase()}]\r\n                        </button>\r\n                    )}\r\n\r\n                    <button\r\n                        onClick={() => controller.onBack()}\r\n                        style={{...btnStyle, background: '#111', borderColor: '#444', color: '#888'}}\r\n                    >\r\n                        EXIT_CONFIG\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};","import React, { JSX } from 'react';\r\nimport { MenuState } from '../../../core/templates/MenuState';\r\nimport { FeatureEnum } from '../../FeatureEnum';\r\nimport { SettingsMenuController } from '../controllers/SettingsMenuController';\r\nimport { SettingsView } from '../views/SettingsView';\r\n\r\nexport class SettingsMenuState extends MenuState<SettingsMenuController> {\r\n    public name = FeatureEnum.SETTINGS_MENU;\r\n    private params: any;\r\n\r\n    constructor(params?: any) {\r\n        super(() => new SettingsMenuController());\r\n        this.params = params;\r\n    }\r\n\r\n    public getView(): JSX.Element {\r\n        return React.createElement(SettingsView, {\r\n            controller: this.controller,\r\n            res: this.params?.res,\r\n            setRes: this.params?.setRes\r\n        });\r\n    }\r\n}"],"names":["SettingsMenuController","BaseMenuController","SharedSession","AudioManager","cb","StateManager","type","value","res","INPUT_REGISTRY","gameName","rawRegistry","overrides","result","action","data","key","slotIndex","btnStyle","rowStyle","controlGroupStyle","sliderStyle","inputStyle","SettingsView","controller","setRes","activeTab","setActiveTab","useState","isFullscreen","setIsFullscreen","localRes","setLocalRes","vols","setVols","selectedProfile","setSelectedProfile","bindingTarget","setBindingTarget","viewBinds","setViewBinds","refreshViewBinds","useCallback","merged","useEffect","handleKeyDown","e","handleVolumeChange","cat","val","prev","handleResChange","newRes","toggleFullscreen","isFull","handleReset","jsx","jsxs","Fragment","r","name","isBinding","SettingsMenuState","MenuState","FeatureEnum","params","React"],"mappings":"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"}