import{B as ee,a as te,b as se,G as re}from"./BasePresenter-L_1_5L1C.js";import{F as x,S as T,a as S,B as R,I as N,A as ne,r as l,j as o,k as F,b as U,c as G,l as oe}from"./index-DiqBmJr0.js";import{C as q}from"./CampaignManager-BPr2ukeD.js";import{S as ie}from"./SaveManager-BLmqGNYY.js";import{m as d,G as ae}from"./GameSprite--bwXP6am.js";class ce extends ee{isDead=!1;hasExited=!1;constructor(r){super(r,x.BH_GAME)}takeDamage(){this.send("TAKE_DAMAGE",{amount:15})}async jumpToGame2(){const r=await T.create(x.GAME_2,{reset:!1});await S.getInstance().replace(r)}async loadLevel(r){const e=await T.create(x.BH_GAME,{reset:!1,level:r});await S.getInstance().replace(e)}async resetLevel(){await ie.getInstance().performLoad(this.QUICK_SAVE_KEY);const r=this.vm.currentLevel||R.Level1,e=await T.create(x.BH_GAME,{reset:!1,level:r});await S.getInstance().replace(e)}onKeyDown(r){N.getInstance().isKeyAction(r.key,"PAUSE")&&this.openPauseMenu()}onWorkerEvent(r){r==="EXPLOSION_REQ"&&ne.getInstance().play("sfx_explosion"),r==="PLAYER_DEAD"&&!this.isDead&&(this.isDead=!0,this.handlePlayerDeath()),r==="EXIT_DOOR_ENTERED"&&!this.hasExited&&(this.hasExited=!0,this.handleExitDoor())}handlePlayerDeath(){q.getInstance().failCurrentStep()}handleExitDoor(){q.getInstance().completeCurrentStep()}async openPauseMenu(){const r=S.getInstance();if(r.getCurrentStateName()===this.stateName){const e=await T.create(x.PAUSE_MENU);await r.push(e)}}}const f={HERO_X:0,HERO_Y:1,HERO_ROTATION:2,HERO_SCALE:3,HERO_HP_DISPLAY:4,HERO_FRAME:5,HERO_WIDTH:6,HERO_HEIGHT:7,CURRENT_WAVE:10,TOTAL_WAVES:11,WAVE_STATE:12,WAVE_DELAY_TIMER:13,EXIT_DOOR_ACTIVE:14,EXIT_DOOR_X:15,EXIT_DOOR_Y:16,CURRENT_LEVEL:17,BOSS_HP:18,BOSS_VULNERABLE:19,BOSS_X:20,BOSS_Y:21,BOSS_ACTIVE:22,ROCK_COUNT:30,PPROJ_COUNT:31,EPROJ_COUNT:32,MOUSE_RELATIVE:33,BUFFER_SIZE:128},M={STRIDE:8,BUFFER_SIZE:8e3},X={STRIDE:5,BUFFER_SIZE:500},Y={STRIDE:5,BUFFER_SIZE:5e3},le={main:f,rocks:M,pProjs:X,eProjs:Y},ue=["IDLE","DELAY","ACTIVE","CLEARED","ALL_CLEARED"];class he extends te{get mainView(){return this.sharedView}get rocksView(){return this.getBuffer("rocks")||new Float32Array(0)}get pProjsView(){return this.getBuffer("pProjs")||new Float32Array(0)}get eProjsView(){return this.getBuffer("eProjs")||new Float32Array(0)}get pos(){return{x:this.mainView[f.HERO_X]||0,y:this.mainView[f.HERO_Y]||0}}get hp(){return this.mainView[f.HERO_HP_DISPLAY]||0}get entityCount(){return Math.floor(this.mainView[f.ROCK_COUNT]||0)}get projCount(){return Math.floor(this.mainView[f.PPROJ_COUNT]||0)}get projEnemyCount(){return Math.floor(this.mainView[f.EPROJ_COUNT]||0)}get currentWave(){return Math.floor(this.mainView[f.CURRENT_WAVE]||0)}get totalWaves(){return Math.floor(this.mainView[f.TOTAL_WAVES]||0)}get waveState(){const r=Math.floor(this.mainView[f.WAVE_STATE]||0);return ue[r]||"IDLE"}get waveDelayTimer(){return Math.floor(this.mainView[f.WAVE_DELAY_TIMER]||0)}get isRoomCleared(){return this.waveState==="ALL_CLEARED"&&this.entityCount===0}get exitDoorActive(){return(this.mainView[f.EXIT_DOOR_ACTIVE]||0)===1}get exitDoorX(){return this.mainView[f.EXIT_DOOR_X]||0}get exitDoorY(){return this.mainView[f.EXIT_DOOR_Y]||0}get currentLevelIndex(){return Math.floor(this.mainView[f.CURRENT_LEVEL]||0)}get bossHp(){return this.mainView[f.BOSS_HP]||0}get bossVulnerable(){return(this.mainView[f.BOSS_VULNERABLE]||0)===1}get bossPos(){return{x:this.mainView[f.BOSS_X]||0,y:this.mainView[f.BOSS_Y]||0}}get bossActive(){return(this.mainView[f.BOSS_ACTIVE]||0)===1}get heroVisuals(){return{x:this.mainView[f.HERO_X]||0,y:this.mainView[f.HERO_Y]||0,rotation:this.mainView[f.HERO_ROTATION]||0,scale:this.mainView[f.HERO_SCALE]||1,currentFrame:this.mainView[f.HERO_FRAME]||0,mousePos:this.mainView[f.MOUSE_RELATIVE]||0}}getRockViewData(r){const e=r*M.STRIDE;return{x:this.rocksView[e]||0,y:this.rocksView[e+1]||0,rotation:this.rocksView[e+2]||0,width:this.rocksView[e+6]||0,height:this.rocksView[e+7]||0}}getRockAttackData(r){const e=r*M.STRIDE;return{primedMode:this.rocksView[e+3]||0,endX:this.rocksView[e+4]||0,endY:this.rocksView[e+5]||0}}getPlayerProjData(r){const e=r*X.STRIDE;return{x:this.pProjsView[e]||0,y:this.pProjsView[e+1]||0,width:this.pProjsView[e+2]||0,height:this.pProjsView[e+3]||0,seed:this.pProjsView[e+4]||0}}getEnemyProjData(r){const e=r*Y.STRIDE;return{x:this.eProjsView[e]||0,y:this.eProjsView[e+1]||0,width:this.eProjsView[e+2]||0,height:this.eProjsView[e+3]||0,seed:this.eProjsView[e+4]||0}}}const fe=({w:s,h:r})=>{const e=d.useApp();return l.useEffect(()=>{e?.renderer&&(e.renderer.resize(s,r),e.view instanceof HTMLCanvasElement&&(e.view.width=s,e.view.height=r))},[e,s,r]),null},de=({paused:s,w:r,h:e})=>{const u=l.useRef(null),i=l.useRef(0);return l.useEffect(()=>{u.current?.clear().beginFill(16777215).drawRect(0,0,r,e).endFill()},[r,e]),d.useTick(a=>{if(!u.current||s)return;i.current+=Math.PI/60*a;const n=(Math.sin(i.current)+1)/2,t=Math.round(26+n*4),c=Math.round(26+n*54),h=Math.round(46+n*104);u.current.tint=(t<<16)+(c<<8)+h}),o.jsx(d.Graphics,{ref:u})},Ee=({vm:s,paused:r})=>{const e=l.useRef(null),u=l.useRef([]),i=U.getInstance();return l.useEffect(()=>()=>{u.current.forEach(a=>{a&&!a.destroyed&&a.destroy()}),u.current=[]},[]),d.useTick(()=>{if(!e.current)return;const a=s.entityCount,n=u.current;if(a>n.length)for(let t=n.length;t<a;t++){const c=i.getTexture("static_rock");if(c){const h=new G(c);h.anchor.set(.5),h.scale.set(.8),e.current.addChild(h),n.push(h)}}else if(a<n.length)for(let t=n.length-1;t>=a;t--){const c=n.pop();c&&(e.current.removeChild(c),c.destroy())}for(let t=0;t<a;t++){const c=n[t],h=s.getRockViewData(t);if(!h||r){c&&(c.visible=!1);continue}c.visible=!0,c.x=h.x,c.y=h.y,c.rotation=h.rotation}}),o.jsx(d.Container,{ref:e})},ge=({vm:s,paused:r})=>{const e=l.useRef(null),u=l.useRef([]),i=U.getInstance();return l.useEffect(()=>()=>{u.current.forEach(a=>{a&&!a.destroyed&&a.destroy()}),u.current=[]},[]),d.useTick(()=>{if(!e.current)return;const a=1,n=u.current;if(a>n.length)for(let c=n.length;c<a;c++){const h=i.getTexture("Gold Ship Gun");if(h){const E=new G(h);E.anchor.set(.5,.7),e.current.addChild(E),n.push(E)}}const t=s.heroVisuals;for(let c=0;c<n.length;c++){const h=n[c];if(r){h.visible=!1;continue}h.visible=!0,h.x=t.x,h.y=t.y+12,t.mousePos>=1.5||t.mousePos<=-1.5?(h.scale.set(-1,1),h.rotation=t.mousePos+Math.PI):(h.scale.set(1,1),h.rotation=t.mousePos),console.log(t.mousePos)}}),o.jsx(d.Container,{ref:e})},pe=({vm:s,paused:r})=>{const e=l.useRef(null),u=l.useRef([]);return l.useEffect(()=>()=>{u.current.forEach(i=>{i&&!i.destroyed&&i.destroy()}),u.current=[]},[]),d.useTick(()=>{if(!e.current)return;const i=s.entityCount,a=u.current;if(i>a.length)for(let n=a.length;n<i;n++){const t=new F;t.visible=!1,e.current.addChild(t),a.push(t)}else if(i<a.length)for(let n=a.length-1;n>=i;n--){const t=a.pop();t&&(e.current.removeChild(t),t.destroy())}for(let n=0;n<i;n++){const t=a[n],c=s.getRockAttackData(n),h=s.getRockViewData(n);if(!c||r){t&&(t.visible=!1);continue}c.primedMode===1?(t.visible=!0,t.clear(),t.lineStyle(30,16711680),t.moveTo(h.x,h.y),t.lineTo(c.endX,c.endY)):t.visible=!1}}),o.jsx(d.Container,{ref:e})},xe=({vm:s,paused:r})=>{const e=l.useRef(null),u=l.useRef([]);return l.useEffect(()=>()=>{u.current.forEach(i=>{i&&!i.destroyed&&i.destroy()}),u.current=[]},[]),d.useTick(()=>{if(!e.current)return;const i=s.projCount,a=u.current;if(i>a.length)for(let n=a.length;n<i;n++){const t=new F;t.visible=!1,e.current.addChild(t),a.push(t)}else if(i<a.length)for(let n=a.length-1;n>=i;n--){const t=a.pop();t&&(e.current.removeChild(t),t.destroy())}for(let n=0;n<i;n++){const t=a[n],c=s.getPlayerProjData(n);if(!c||r){t&&(t.visible=!1);continue}t.visible=!0,t.clear(),t.lineStyle(10,65280),t.drawRect(c.x,c.y,20,20)}}),o.jsx(d.Container,{ref:e})},Re=({vm:s,paused:r})=>{const e=l.useRef(null),u=l.useRef([]);return l.useEffect(()=>()=>{u.current.forEach(i=>{i&&!i.destroyed&&i.destroy()}),u.current=[]},[]),d.useTick(()=>{if(!e.current)return;const i=s.projEnemyCount,a=u.current;if(i>a.length)for(let n=a.length;n<i;n++){const t=new F;t.visible=!1,e.current.addChild(t),a.push(t)}else if(i<a.length)for(let n=a.length-1;n>=i;n--){const t=a.pop();t&&(e.current.removeChild(t),t.destroy())}for(let n=0;n<i;n++){const t=a[n],c=s.getEnemyProjData(n);if(!c||r){t&&(t.visible=!1);continue}t.visible=!0,t.clear(),t.lineStyle(10,16711680),t.drawRect(c.x,c.y,20,20)}}),o.jsx(d.Container,{ref:e})},Se=({vm:s,paused:r})=>{const e=l.useRef(null);return d.useTick(()=>{if(!e.current)return;if(!s.bossActive||r){e.current.visible=!1;return}const u=s.bossPos,i=s.bossVulnerable;e.current.visible=!0,e.current.clear(),e.current.beginFill(i?15158332:4473924),e.current.lineStyle(4,16777215),e.current.drawRect(u.x,u.y,200,200),e.current.endFill()}),o.jsx(d.Graphics,{ref:e})},we=({vm:s,paused:r,width:e,height:u,scale:i,heroPos:a,hp:n})=>{const t=l.useRef(null),[c,h]=l.useState(s.heroVisuals);return d.useTick(()=>{const E=s.heroVisuals;t.current&&(t.current.x=E.x,t.current.y=E.y,c.mousePos>=1.5||c.mousePos<=-1.5?t.current.scale.set(-1,1):t.current.scale.set(1,1),a.current.x=E.x,a.current.y=E.y,h(E))}),o.jsxs(o.Fragment,{children:[o.jsx(fe,{w:e,h:u}),o.jsx(de,{paused:r,w:e,h:u}),o.jsxs(d.Container,{scale:i,children:[o.jsx(xe,{vm:s,paused:r}),o.jsx(Re,{vm:s,paused:r}),o.jsx(pe,{vm:s,paused:r}),o.jsx(Ee,{vm:s,paused:r}),o.jsx(Se,{vm:s,paused:r}),o.jsx(d.Container,{ref:t,children:o.jsx(ae,{sheetName:"gold_shipBH",animationName:"idle",x:0,y:0,scale:1,anchor:.5,currentFrame:c.currentFrame})}),o.jsx(ge,{vm:s,paused:r})]})]})},ye=({hp:s,rockCount:r,currentWave:e,totalWaves:u,waveState:i,waveDelayTimer:a,isRoomCleared:n,exitDoorActive:t,exitDoorX:c,exitDoorY:h,bossHp:E,bossVulnerable:p,gameWidth:w,gameHeight:y,shieldBarRef:A,shieldTextRef:m,damageBtnRef:V,onDamage:b,onJumpToG2:j,onLevel1:O,onLevel2:L,onLevel3:D,onLevel4:P,onResetG1:I})=>{const g={padding:"0.6cqw 1cqw",cursor:"pointer",color:"#fff",border:"none",borderRadius:"0.4cqw",fontWeight:"bold",fontFamily:"monospace",fontSize:"0.8cqw",pointerEvents:"auto",textAlign:"center"},B=()=>n?"ROOM CLEARED!":i==="DELAY"?`NEXT WAVE IN ${Math.ceil(a/60)}s`:i==="ACTIVE"?`ENEMIES: ${r}`:i==="CLEARED"?"WAVE CLEARED!":"STANDBY",_=()=>n?"#f1c40f":i==="DELAY"?"#e67e22":i==="ACTIVE"?"#e74c3c":i==="CLEARED"?"#2ecc71":"#888";return o.jsxs("div",{style:{position:"absolute",inset:0,pointerEvents:"none",containerType:"size"},children:[o.jsxs("div",{style:{position:"absolute",top:"5cqh",left:"50%",transform:"translateX(-50%)",width:"35cqw"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#fff",marginBottom:"0.5cqh",fontWeight:"bold",fontFamily:"monospace",fontSize:"1.2cqw"},children:[o.jsx("span",{children:"SHIELD ENERGY"}),o.jsxs("span",{ref:m,children:[Math.round(s),"%"]})]}),o.jsx("div",{style:{width:"100%",height:"2cqh",backgroundColor:"#222",borderRadius:"1cqw",border:"0.2cqw solid #fff",overflow:"hidden"},children:o.jsx("div",{ref:A,style:{width:`${Math.max(0,s)}%`,height:"100%",backgroundColor:s<30?"#c0392b":"#27ae60"}})})]}),E>0&&o.jsxs("div",{style:{position:"absolute",top:"15cqh",left:"50%",transform:"translateX(-50%)",width:"50cqw"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:p?"#e74c3c":"#888",marginBottom:"0.5cqh",fontWeight:"bold",fontFamily:"monospace",fontSize:"1cqw"},children:[o.jsxs("span",{children:["THE CORE ",p?"(VULNERABLE)":"(PROTECTED)"]}),o.jsxs("span",{children:[Math.max(0,E)," / 300"]})]}),o.jsx("div",{style:{width:"100%",height:"1.5cqh",backgroundColor:"#111",borderRadius:"0.75cqw",border:`0.2cqw solid ${p?"#e74c3c":"#444"}`,overflow:"hidden",boxShadow:p?"0 0 10px rgba(231, 76, 60, 0.4)":"none"},children:o.jsx("div",{style:{width:`${Math.max(0,E)/300*100}%`,height:"100%",backgroundColor:p?"#e74c3c":"#444",transition:"width 0.3s ease-out, background-color 0.3s ease"}})})]}),o.jsxs("div",{style:{position:"absolute",top:"3cqh",right:"3cqw",color:"#fff",fontFamily:"monospace",textAlign:"right",fontSize:"1.2cqw"},children:[o.jsxs("div",{style:{color:_(),fontSize:"1.4cqw",fontWeight:"bold",marginBottom:"0.5cqh"},children:["WAVE ",e+1," / ",u]}),o.jsx("div",{style:{color:_(),fontSize:"1cqw"},children:B()}),o.jsxs("div",{style:{color:"#888",fontSize:"0.8cqw",marginTop:"0.3cqh"},children:["ENEMIES_ACTIVE: ",r]})]}),n&&o.jsxs("div",{style:{position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",color:"#f1c40f",fontFamily:"monospace",fontSize:"3cqw",fontWeight:"bold",textShadow:"0 0 20px rgba(241, 196, 60, 0.6)",textAlign:"center",letterSpacing:"0.3cqw"},children:["ALL WAVES CLEARED",o.jsx("div",{style:{fontSize:"1.2cqw",color:"#fff",marginTop:"1cqh"},children:"PROCEED TO EXIT"})]}),t&&w>0&&y>0&&o.jsx("div",{style:{position:"absolute",left:`${c/w*100}%`,top:`${h/y*100}%`,transform:"translate(-50%, -50%)",width:"6.25%",height:"11.1%",border:"3px solid #f1c40f",backgroundColor:"rgba(241, 196, 60, 0.25)",boxShadow:"0 0 20px rgba(241, 196, 60, 0.5), inset 0 0 15px rgba(241, 196, 60, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",animation:"exitDoorPulse 1.5s ease-in-out infinite"},children:o.jsx("span",{style:{color:"#f1c40f",fontFamily:"monospace",fontWeight:"bold",fontSize:"0.9cqw",textShadow:"0 0 8px rgba(241, 196, 60, 0.8)"},children:"EXIT"})}),t&&o.jsx("style",{children:`
                    @keyframes exitDoorPulse {
                        0%, 100% { box-shadow: 0 0 20px rgba(241, 196, 60, 0.5), inset 0 0 15px rgba(241, 196, 60, 0.3); }
                        50% { box-shadow: 0 0 35px rgba(241, 196, 60, 0.8), inset 0 0 25px rgba(241, 196, 60, 0.5); }
                    }
                `}),i==="DELAY"&&a>0&&o.jsxs("div",{style:{position:"absolute",top:"35%",left:"50%",transform:"translate(-50%, -50%)",color:"#e67e22",fontFamily:"monospace",fontSize:"2cqw",fontWeight:"bold",textShadow:"0 0 15px rgba(230, 126, 34, 0.5)",textAlign:"center",opacity:.9},children:["WAVE ",e+1," INCOMING",o.jsx("div",{style:{fontSize:"4cqw",color:"#fff",marginTop:"0.5cqh"},children:Math.ceil(a/60)})]}),o.jsxs("div",{style:{position:"absolute",top:"3cqh",left:"3cqw",display:"flex",flexDirection:"column",gap:"1cqh"},children:[o.jsx("button",{ref:V,onClick:b,style:{...g,background:"#333",border:"0.1cqw solid #fff"},children:"TAKE DAMAGE (-15)"}),o.jsxs("div",{style:{display:"flex",gap:"0.5cqw"},children:[o.jsx("button",{onClick:O,style:{...g,background:"#408240",flex:1},children:"LVL 1"}),o.jsx("button",{onClick:L,style:{...g,background:"#C29F19",flex:1},children:"LVL 2"}),o.jsx("button",{onClick:D,style:{...g,background:"#C21919",flex:1},children:"LVL 3"}),o.jsx("button",{onClick:P,style:{...g,background:"#8E44AD",flex:1},children:"LVL 4"})]}),o.jsx("button",{onClick:j,style:{...g,background:"#2980b9"},children:"Go to Game 2"}),o.jsx("div",{style:{display:"flex",gap:"0.5cqw"},children:o.jsx("button",{onClick:I,style:{...g,background:"#c0392b",flex:1},children:"Quick Load"})})]})]})},_e=({vm:s,controller:r,width:e=960,height:u=540})=>{const[i,a]=l.useState(s.hp),[n,t]=l.useState(s.entityCount),[c,h]=l.useState(!1),[E,p]=l.useState(s.currentWave),[w,y]=l.useState(s.totalWaves),[A,m]=l.useState(s.waveState),[V,b]=l.useState(s.waveDelayTimer),[j,O]=l.useState(s.isRoomCleared),[L,D]=l.useState(s.exitDoorActive),[P,I]=l.useState(s.exitDoorX),[g,B]=l.useState(s.exitDoorY),[_,z]=l.useState(s.bossHp),[$,K]=l.useState(s.bossVulnerable),v=l.useRef(null),H=l.useRef(null),Z=l.useRef(null),k=l.useRef({x:s.pos.x,y:s.pos.y});l.useEffect(()=>{const Q=s.subscribe(()=>{const W=S.getInstance().getActiveState()?.name!=="BHGame";c!==W&&h(W);const C=s.hp;k.current.x=s.pos.x,k.current.y=s.pos.y,v.current&&(v.current.style.width=`${Math.max(0,C)}%`),H.current&&(H.current.innerText=`${Math.round(C)}%`),Math.abs(i-C)>1&&a(C),n!==s.entityCount&&t(s.entityCount),p(s.currentWave),y(s.totalWaves),m(s.waveState),b(s.waveDelayTimer),O(s.isRoomCleared),D(s.exitDoorActive),I(s.exitDoorX),B(s.exitDoorY),z(s.bossHp),K(s.bossVulnerable)});return()=>Q()},[s,i,n,c]);const J=l.useMemo(()=>e/960,[e]);return o.jsxs("div",{style:{position:"absolute",inset:0,background:"#000",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:[o.jsx("div",{style:{position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(d.Stage,{width:e,height:u,options:{backgroundColor:0,antialias:!0,resolution:1,autoDensity:!1},style:{display:"block",width:"100%",height:"100%",objectFit:"contain",imageRendering:"pixelated"},children:o.jsx(we,{vm:s,paused:c,width:e,height:u,scale:J,heroPos:k,hp:i})},`stage-${e}-${u}`)}),o.jsx(ye,{hp:i,rockCount:n,currentWave:E,totalWaves:w,waveState:A,waveDelayTimer:V,isRoomCleared:j,exitDoorActive:L,exitDoorX:P,exitDoorY:g,bossHp:_,bossVulnerable:$,gameWidth:e,gameHeight:u,shieldBarRef:v,shieldTextRef:H,damageBtnRef:Z,onDamage:()=>r.takeDamage(),onJumpToG2:()=>r.jumpToGame2(),onLevel1:()=>r.loadLevel(R.Level1),onLevel2:()=>r.loadLevel(R.Level2),onLevel3:()=>r.loadLevel(R.Level3),onLevel4:()=>r.loadLevel(R.Level4),onResetG1:()=>r.resetLevel()})]})},Ce={REVISION:0,FRAME_COUNT:1,FPS:2,TICK_COUNT:3,HERO_HP:4,HERO_X:5,HERO_Y:6,HERO_WIDTH:7,HERO_HEIGHT:8,LAST_HIT_FRAME:9,CURRENT_WAVE:10,TOTAL_WAVES:11,WAVE_STATE:12,WAVE_DELAY_TIMER:13,EXIT_DOOR_ACTIVE:14,EXIT_DOOR_X:15,EXIT_DOOR_Y:16,CURRENT_LEVEL:17,BOSS_HP:18,BOSS_VULNERABLE:19,BOSS_X:20,BOSS_Y:21,BOSS_ACTIVE:22,ROCK_COUNT:30,PPROJ_COUNT:31,EPROJ_COUNT:32,MOUSE_RELATIVE:33,BUFFER_SIZE:128},Te={STRIDE:8,BUFFER_SIZE:8e3},Ae={STRIDE:5,BUFFER_SIZE:500},me={STRIDE:5,BUFFER_SIZE:5e3},Ve={main:Ce,rocks:Te,pProjs:Ae,eProjs:me};class Be extends se{name=x.BH_GAME;logicSchema=Ve;viewSchema=le;viewComponent=_e;currentLevel;constructor(r={}){super(r.reset??!1),this.currentLevel=r.level??R.Level1}getConfig(){return oe(this.currentLevel)}getSessionOverrides(r){const e=r.get(re.hp);return e!==void 0?{initialHP:e}:{}}initMVC(){this.vm=new he,this.controller=new ce(this.vm)}async init(){N.getInstance().refreshBindings(this.name),await super.init()}}export{Be as BHState};
//# sourceMappingURL=BHState-BW6SOYl0.js.map
