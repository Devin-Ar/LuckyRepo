import{G as t}from"./Game2LogicSchema-Dlclrcjf.js";import{B as r,a as h}from"./BaseDispatcher-CXAw-hAN.js";const n={INITIALIZE:{execute(e,i){e.applyConfig(i),e.setInitialized(!0)}},MOD_HP:{execute(e,i){e.modifyHp(i.amount)}},MOD_ENERGY:{execute(e,i){e.modifyEnergy(i.amount)}},ADD_SCRAP:{execute(e){e.addScrap(1)}}};class g extends r{dispatcher;hp=100;energy=50;scrap=0;currentFrame=0;constructor(){super(t.REVISION),this.dispatcher=new h(this,n,"Game2")}applyConfig(i){this.config=i,this.hp=i.initialHP,this.energy=i.initialEnergy,this.scrap=i.initialScrap}modifyHp(i){this.hp=Math.max(0,this.hp+i)}modifyEnergy(i){this.config&&(this.energy=Math.max(0,this.energy+i))}addScrap(i=1){this.scrap+=i}destroy(){super.destroy(),this.hp=100,this.energy=50,this.scrap=0}getSnapshot(){return{hp:this.hp,energy:this.energy,scrap:this.scrap,currentFrame:this.currentFrame,config:this.config}}loadSnapshot(i){i&&(this.config=i.config,this.hp=i.hp??100,this.energy=i.energy??50,this.scrap=i.scrap??0,this.isInitialized=!0)}onUpdate(i,a,s,p){this.config&&(this.currentFrame=s,s%this.config.regenRate===0&&this.energy<this.config.maxEnergy&&this.modifyEnergy(1),i[t.HERO_HP]=this.hp,i[t.ENERGY]=this.energy,i[t.SCRAP_COUNT]=this.scrap,i[t.TICK_COUNT]=s)}}export{g as Game2Logic};
//# sourceMappingURL=Game2Logic-B1dLFliD.js.map
