import{B as t}from"./BHLogicSchema-NSRl24ta.js";import{B as w}from"./BaseViewLogic-fTOOk9Vw.js";const i={HERO_X:0,HERO_Y:1,HERO_ROTATION:2,HERO_SCALE:3,HERO_HP_DISPLAY:4,HERO_FRAME:5,ACTIVE_ROCK_COUNT:8,CURRENT_WAVE:9,TOTAL_WAVES:12,WAVE_STATE:13,WAVE_DELAY_TIMER:14,EXIT_DOOR_ACTIVE:15,EXIT_DOOR_X:16,EXIT_DOOR_Y:17,CURRENT_LEVEL:18,BOSS_HP:19,BOSS_VULNERABLE:20,BOSS_X:21,BOSS_Y:22,BOSS_ACTIVE:23,ROCKS_START_INDEX_ACTUAL:24,ROCK_STRIDE:6,PPROJ_START_INDEX:200,PPROJ_STRIDE:2,EPROJ_START_INDEX:300,EPROJ_STRIDE:2};class a extends w{heroRotation=0;globalRockRotation=0;heroFrame=0;update(_,A){if(!this.hasBuffers())return;const O=this.logicView[t.HERO_X],u=this.logicView[t.HERO_Y],E=this.logicView[t.HERO_HP];this.heroRotation+=.03*(_/16.67),this.heroFrame+=.15*(_/16.67),this.outputView[i.HERO_X]=O,this.outputView[i.HERO_Y]=u,this.outputView[i.HERO_ROTATION]=this.heroRotation,this.outputView[i.HERO_SCALE]=.5+E/100,this.outputView[i.HERO_HP_DISPLAY]=E,this.outputView[i.HERO_FRAME]=this.heroFrame;const s=this.logicView[t.ENTITY_COUNT];this.outputView[i.ACTIVE_ROCK_COUNT]=s,this.globalRockRotation+=.02*(_/16.67);for(let o=0;o<s;o++){const R=t.ROCKS_START_INDEX_ACTUAL+o*t.ROCK_STRIDE,e=i.ROCKS_START_INDEX_ACTUAL+o*i.ROCK_STRIDE;this.outputView[e]=this.logicView[R],this.outputView[e+1]=this.logicView[R+1];const T=this.logicView[R+2],S=(Math.floor(T)%5+1)*.5;this.outputView[e+2]=this.globalRockRotation*S+T,this.outputView[e+3]=this.logicView[R+3],this.outputView[e+4]=this.logicView[R+4],this.outputView[e+5]=this.logicView[R+5]}const h=this.logicView[t.PPROJ_START_INDEX-1];this.outputView[i.PPROJ_START_INDEX-1]=h;for(let o=0;o<h;o++){const R=t.PPROJ_START_INDEX+o*t.PPROJ_STRIDE,e=i.PPROJ_START_INDEX+o*i.PPROJ_STRIDE;this.outputView[e]=this.logicView[R],this.outputView[e+1]=this.logicView[R+1]}const V=this.logicView[t.EPROJ_START_INDEX-1];this.outputView[i.EPROJ_START_INDEX-1]=V;for(let o=0;o<V;o++){const R=t.EPROJ_START_INDEX+o*t.EPROJ_STRIDE,e=i.EPROJ_START_INDEX+o*i.EPROJ_STRIDE;this.outputView[e]=this.logicView[R],this.outputView[e+1]=this.logicView[R+1]}this.outputView[i.CURRENT_WAVE]=this.logicView[t.CURRENT_WAVE],this.outputView[i.TOTAL_WAVES]=this.logicView[t.TOTAL_WAVES],this.outputView[i.WAVE_STATE]=this.logicView[t.WAVE_STATE],this.outputView[i.WAVE_DELAY_TIMER]=this.logicView[t.WAVE_DELAY_TIMER],this.outputView[i.EXIT_DOOR_ACTIVE]=this.logicView[t.EXIT_DOOR_ACTIVE],this.outputView[i.EXIT_DOOR_X]=this.logicView[t.EXIT_DOOR_X],this.outputView[i.EXIT_DOOR_Y]=this.logicView[t.EXIT_DOOR_Y],this.outputView[i.CURRENT_LEVEL]=this.logicView[t.CURRENT_LEVEL],this.outputView[i.BOSS_HP]=this.logicView[t.BOSS_HP],this.outputView[i.BOSS_VULNERABLE]=this.logicView[t.BOSS_VULNERABLE],this.outputView[i.BOSS_X]=this.logicView[t.BOSS_X],this.outputView[i.BOSS_Y]=this.logicView[t.BOSS_Y],this.outputView[i.BOSS_ACTIVE]=this.logicView[t.BOSS_ACTIVE]}getSnapshot(){return{heroRotation:this.heroRotation,globalRockRotation:this.globalRockRotation,heroFrame:this.heroFrame}}loadSnapshot(_){_&&(this.heroRotation=_.heroRotation??0,this.globalRockRotation=_.globalRockRotation??0,this.heroFrame=_.heroFrame??0)}}export{a as BHViewLogic};
//# sourceMappingURL=BHViewLogic-CzRQTVeb.js.map
