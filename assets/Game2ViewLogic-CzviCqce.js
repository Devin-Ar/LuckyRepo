import{G as e}from"./Game2LogicSchema-Dlclrcjf.js";import{B as I}from"./BaseViewLogic-fTOOk9Vw.js";const i={HERO_HP_DISPLAY:0,ENERGY_DISPLAY:1,SCRAP_DISPLAY:2,UI_BOUNCE:3,GLITCH_INTENSITY:4,VIGNETTE_PULSE:5};class a extends I{uiBounce=0;glitchIntensity=0;lastHp=-1;update(t,h){if(!this.hasBuffers())return;const s=this.logicView[e.HERO_HP],n=this.logicView[e.ENERGY];this.lastHp!==-1&&s<this.lastHp&&(this.glitchIntensity=1),this.lastHp=s,this.glitchIntensity*=.92,this.outputView[i.HERO_HP_DISPLAY]=s,this.outputView[i.ENERGY_DISPLAY]=n,this.outputView[i.SCRAP_DISPLAY]=this.logicView[e.SCRAP_COUNT];const o=t/16.67;this.uiBounce+=.05*o;const u=n<20?.15:.05,c=.5+Math.sin(h*u)*.2;this.outputView[i.UI_BOUNCE]=Math.sin(this.uiBounce)*5,this.outputView[i.GLITCH_INTENSITY]=this.glitchIntensity,this.outputView[i.VIGNETTE_PULSE]=c}getSnapshot(){return{uiBounce:this.uiBounce,glitchIntensity:this.glitchIntensity,lastHp:this.lastHp}}loadSnapshot(t){t&&(this.uiBounce=t.uiBounce??0,this.glitchIntensity=t.glitchIntensity??0,this.lastHp=t.lastHp??-1)}}export{a as Game2ViewLogic};
//# sourceMappingURL=Game2ViewLogic-CzviCqce.js.map
