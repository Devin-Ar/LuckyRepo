{"version":3,"file":"SaveMenuState-Bl-iY5xd.js","sources":["../../src/features/shared-menus/controllers/SaveMenuController.ts","../../node_modules/dexie-react-hooks/dist/dexie-react-hooks.mjs","../../src/features/shared-menus/views/SaveSlotView.tsx","../../src/features/shared-menus/states/SaveMenuState.ts"],"sourcesContent":["// src/features/shared-menus/controllers/SaveMenuController.ts\r\nimport { BaseMenuController } from \"../../../core/templates/BaseMenuController\";\r\nimport { SaveManager, SAVE_EXTENSION } from \"../../../core/managers/SaveManager\";\r\nimport { StateRegistry } from \"../../../core/registry/StateRegistry\";\r\n\r\nexport class SaveMenuController extends BaseMenuController {\r\n    private saveManager = SaveManager.getInstance();\r\n\r\n    public onBack(): void {\r\n        this.stateManager.pop();\r\n    }\r\n\r\n    public getActiveGameName(): string {\r\n        return this.stateManager.getUnderlyingStateName() || \"Unknown\";\r\n    }\r\n\r\n    public async handleSave(slotName: string): Promise<void> {\r\n        const targetName = this.getActiveGameName();\r\n        if (targetName) {\r\n            await this.saveManager.performSave(slotName, targetName);\r\n        }\r\n    }\r\n\r\n    public async handleLoad(slotName: string): Promise<void> {\r\n        try {\r\n            const saveData = await this.saveManager.performLoad(slotName);\r\n            const targetState = await StateRegistry.create(saveData.stateName, { reset: false });\r\n\r\n            this.stateManager.pop();\r\n            this.stateManager.replace(targetState);\r\n        } catch (e) {\r\n            console.error(\"Failed to load save:\", e);\r\n        }\r\n    }\r\n\r\n    public async handleDelete(slotName: string): Promise<void> {\r\n        await this.saveManager.deleteSave(slotName);\r\n    }\r\n\r\n    public async handleExport(slotName: string): Promise<void> {\r\n        const json = await this.saveManager.exportSave(slotName);\r\n        const blob = new Blob([json], { type: \"application/octet-stream\" });\r\n        const url = URL.createObjectURL(blob);\r\n\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `${slotName}${SAVE_EXTENSION}`;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        URL.revokeObjectURL(url);\r\n    }\r\n\r\n    public async handleImport(file: File): Promise<void> {\r\n        const text = await file.text();\r\n        await this.saveManager.importSave(text);\r\n    }\r\n}","import { Dexie } from 'dexie';\nimport React from 'react';\n\nfunction useObservable(observableFactory, arg2, arg3) {\n    // Resolve vars from overloading variants of this function:\n    var deps;\n    var defaultResult;\n    if (typeof observableFactory === 'function') {\n        deps = arg2 || [];\n        defaultResult = arg3;\n    }\n    else {\n        deps = [];\n        defaultResult = arg2;\n    }\n    // Create a ref that keeps the state we need\n    var monitor = React.useRef({\n        hasResult: false,\n        result: defaultResult,\n        error: null,\n    });\n    // We control when component should rerender. Make triggerUpdate\n    // as examplified on React's docs at:\n    // https://reactjs.org/docs/hooks-faq.html#is-there-something-like-forceupdate\n    var _a = React.useReducer(function (x) { return x + 1; }, 0); _a[0]; var triggerUpdate = _a[1];\n    // Memoize the observable based on deps\n    var observable = React.useMemo(function () {\n        // Make it remember previous subscription's default value when\n        // resubscribing.\n        var observable = typeof observableFactory === 'function'\n            ? observableFactory()\n            : observableFactory;\n        if (!observable || typeof observable.subscribe !== 'function') {\n            if (observableFactory === observable) {\n                throw new TypeError(\"Given argument to useObservable() was neither a valid observable nor a function.\");\n            }\n            else {\n                throw new TypeError(\"Observable factory given to useObservable() did not return a valid observable.\");\n            }\n        }\n        if (!monitor.current.hasResult &&\n            typeof window !== 'undefined' // Don't do this in SSR\n        ) {\n            // Optimize for BehaviorSubject and other observables implementing getValue():\n            if (typeof observable.hasValue !== 'function' || observable.hasValue()) {\n                if (typeof observable.getValue === 'function') {\n                    monitor.current.result = observable.getValue();\n                    monitor.current.hasResult = true;\n                }\n                else {\n                    // Find out if the observable has a current value: try get it by subscribing and\n                    // unsubscribing synchronously\n                    var subscription = observable.subscribe(function (val) {\n                        monitor.current.result = val;\n                        monitor.current.hasResult = true;\n                    });\n                    // Unsubscribe directly. We only needed any synchronous value if it was possible.\n                    if (typeof subscription === 'function') {\n                        subscription();\n                    }\n                    else {\n                        subscription.unsubscribe();\n                    }\n                }\n            }\n        }\n        return observable;\n    }, deps);\n    // Integrate with react devtools:\n    React.useDebugValue(monitor.current.result);\n    // Subscribe to the observable\n    React.useEffect(function () {\n        var subscription = observable.subscribe(function (val) {\n            var current = monitor.current;\n            if (current.error !== null || current.result !== val) {\n                current.error = null;\n                current.result = val;\n                current.hasResult = true;\n                triggerUpdate();\n            }\n        }, function (err) {\n            var current = monitor.current;\n            if (current.error !== err) {\n                current.error = err;\n                triggerUpdate();\n            }\n        });\n        return typeof subscription === 'function'\n            ? subscription // Support observables that return unsubscribe directly\n            : subscription.unsubscribe.bind(subscription);\n    }, deps);\n    // Throw if observable has emitted error so that\n    // an ErrorBoundrary can catch it\n    if (monitor.current.error)\n        throw monitor.current.error;\n    // Return the current result\n    return monitor.current.result;\n}\n\nfunction useLiveQuery(querier, deps, defaultResult) {\n    return useObservable(function () { return Dexie.liveQuery(querier); }, deps || [], defaultResult);\n}\n\nfunction usePermissions(firstArg, table, obj) {\n    if (!firstArg)\n        throw new TypeError(\"Invalid arguments to usePermissions(): undefined or null\");\n    var db;\n    if (arguments.length >= 3) {\n        if (!('transaction' in firstArg)) {\n            // Using ducktyping instead of instanceof in case there are multiple Dexie modules in app.\n            // First arg is  ensures first arg is a Dexie instance\n            throw new TypeError(\"Invalid arguments to usePermission(db, table, obj): 1st arg must be a Dexie instance\");\n        }\n        if (typeof table !== 'string')\n            throw new TypeError(\"Invalid arguments to usePermission(db, table, obj): 2nd arg must be string\");\n        if (!obj || typeof obj !== 'object')\n            throw new TypeError(\"Invalid arguments to usePermission(db, table, obj): 3rd arg must be an object\");\n        db = firstArg;\n    }\n    else {\n        if (firstArg instanceof Dexie)\n            throw new TypeError(\"Invalid arguments to usePermission(db, table, obj): Missing table and obj arguments.\");\n        if (typeof firstArg.table === 'function' &&\n            typeof firstArg.db === 'object') {\n            db = firstArg.db;\n            obj = firstArg;\n            table = firstArg.table();\n        }\n        else {\n            throw new TypeError(\"Invalid arguments to usePermissions(). \" +\n                \"Expected usePermissions(entity: DexieCloudEntity) or \" +\n                \"usePermissions(db: Dexie, table: string, obj: DexieCloudObject)\");\n        }\n    }\n    if (!('cloud' in db))\n        throw new Error(\"usePermissions() is only for Dexie Cloud but there's no dexie-cloud-addon active in given db.\");\n    if (!('permissions' in db.cloud))\n        throw new Error(\"usePermissions() requires a newer version of dexie-cloud-addon. Please upgrade it.\");\n    return useObservable(\n    // @ts-ignore\n    function () { return db.cloud.permissions(obj, table); }, [obj.realmId, obj.owner, table]);\n}\n\nvar gracePeriod = 100; // 100 ms = grace period to optimize for unload/reload scenarios\nvar fr = typeof FinalizationRegistry !== 'undefined' && new FinalizationRegistry(function (doc) {\n    // If coming here, react effect never ran. This is a fallback cleanup mechanism.\n    var DexieYProvider = Dexie['DexieYProvider'];\n    if (DexieYProvider)\n        DexieYProvider.release(doc);\n});\nfunction useDocument(doc) {\n    var _a, _b;\n    if (!fr)\n        throw new TypeError('FinalizationRegistry not supported.');\n    var providerRef = React.useRef(null);\n    var DexieYProvider = Dexie['DexieYProvider'];\n    if (!DexieYProvider) {\n        throw new Error('DexieYProvider is not available. Make sure `y-dexie` is installed and imported.');\n    }\n    var unregisterToken = undefined;\n    if (doc) {\n        if (doc !== ((_a = providerRef.current) === null || _a === void 0 ? void 0 : _a.doc)) {\n            providerRef.current = DexieYProvider.load(doc, { gracePeriod: gracePeriod });\n            unregisterToken = Object.create(null);\n            fr.register(providerRef, doc, unregisterToken);\n        }\n    }\n    else if ((_b = providerRef.current) === null || _b === void 0 ? void 0 : _b.doc) {\n        providerRef.current = null;\n    }\n    React.useEffect(function () {\n        if (doc) {\n            // Doc is set or changed. Unregister provider from FinalizationRegistry\n            // and instead take over from here to release the doc when component is unmounted\n            // or when doc is changed. What we're doing here is to avoid relying on FinalizationRegistry\n            // in all the normal cases and instead rely on React's lifecycle to release the doc.\n            // But there can be situations when react never calls this effect and therefore, we\n            // need to rely on FinalizationRegistry to release the doc as a fallback.\n            // We cannot wait with loading the document until the effect happens, because the doc\n            // could have been destroyed in the meantime.\n            if (unregisterToken)\n                fr.unregister(unregisterToken);\n            var provider = DexieYProvider.for(doc);\n            if (provider) {\n                return function () {\n                    DexieYProvider.release(doc);\n                };\n            }\n            else {\n                // Maybe the doc was destroyed in the meantime.\n                // Can not happen if React and FinalizationRegistry works as we expect them to.\n                // Except if a user had called DexieYProvider.release() on the doc\n                throw new Error(\"FATAL. DexieYProvider.release() has been called somewhere in application code, making us lose the document.\");\n            }\n        }\n    }, [doc, unregisterToken]);\n    return providerRef.current;\n}\n\nexport { useDocument, useLiveQuery, useObservable, usePermissions };\n//# sourceMappingURL=dexie-react-hooks.mjs.map\n","// src/features/shared-menus/views/SaveSlotView.tsx\r\nimport React, {useRef, useState} from 'react';\r\nimport {useLiveQuery} from 'dexie-react-hooks';\r\nimport {SAVE_EXTENSION} from '../../../core/managers/SaveManager';\r\nimport {db} from '../../../core/session/SaveDatabase';\r\n\r\ninterface SaveSlotViewProps {\r\n    activeStateName: string;\r\n    onSave: (name: string) => Promise<void>;\r\n    onLoad: (name: string) => Promise<void>;\r\n    onDelete: (name: string) => Promise<void>;\r\n    onExport: (name: string) => Promise<void>;\r\n    onImport: (file: File) => Promise<void>;\r\n    onBack: () => void;\r\n}\r\n\r\nexport const SaveSlotView: React.FC<SaveSlotViewProps> = ({\r\n                                                              activeStateName,\r\n                                                              onSave,\r\n                                                              onLoad,\r\n                                                              onDelete,\r\n                                                              onExport,\r\n                                                              onImport,\r\n                                                              onBack\r\n                                                          }) => {\r\n    const saves = useLiveQuery(() => db.saves.orderBy('timestamp').reverse().toArray());\r\n    const [inputName, setInputName] = useState('');\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    const handleNewSave = () => {\r\n        if (!inputName.trim()) return;\r\n        onSave(inputName.trim());\r\n        setInputName('');\r\n    };\r\n\r\n    const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (e.target.files && e.target.files[0]) {\r\n            onImport(e.target.files[0]);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={containerStyle}>\r\n            <div style={overlayStyle}>\r\n                <h2 style={headerStyle}>DATA_STORAGE_INTERFACE</h2>\r\n\r\n                {/* --- Control Bar: Create New & Import --- */}\r\n                <div style={controlBarStyle}>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={inputName}\r\n                        onChange={(e) => setInputName(e.target.value)}\r\n                        placeholder=\"ENTER_SAVE_NAME...\"\r\n                        style={inputStyle}\r\n                        onKeyDown={(e) => e.key === 'Enter' && handleNewSave()}\r\n                    />\r\n                    <button onClick={handleNewSave} style={actionBtnStyle('#27ae60')}>\r\n                        SAVE_NEW\r\n                    </button>\r\n                    <div style={{width: '2cqw'}}></div>\r\n                    {/* Spacer */}\r\n                    <button onClick={() => fileInputRef.current?.click()} style={actionBtnStyle('#8e44ad')}>\r\n                        IMPORT_FILE\r\n                    </button>\r\n                    <input\r\n                        type=\"file\"\r\n                        ref={fileInputRef}\r\n                        style={{display: 'none'}}\r\n                        accept={SAVE_EXTENSION}\r\n                        onChange={handleFileChange}\r\n                    />\r\n                </div>\r\n\r\n                {/* --- Scrollable List of Saves --- */}\r\n                <div style={listContainerStyle}>\r\n                    {!saves || saves.length === 0 ? (\r\n                        <div style={{color: '#555', marginTop: '2cqw'}}>NO_DATA_FOUND</div>\r\n                    ) : (\r\n                        saves.map(save => (\r\n                            <div key={save.saveName} style={rowStyle}>\r\n                                <div style={{flex: 1, display: 'flex', flexDirection: 'column'}}>\r\n                                    <span style={{color: '#fff', fontSize: '1.2cqw', fontWeight: 'bold'}}>\r\n                                        {save.saveName}\r\n                                    </span>\r\n                                    <span style={{color: '#888', fontSize: '0.8cqw'}}>\r\n                                        {save.stateName} | {new Date(save.timestamp).toLocaleString()}\r\n                                    </span>\r\n                                </div>\r\n\r\n                                <div style={{display: 'flex', gap: '0.5cqw'}}>\r\n                                    <button onClick={() => onSave(save.saveName)} style={smBtnStyle('#27ae60')}>\r\n                                        OVERWRITE\r\n                                    </button>\r\n                                    <button onClick={() => onLoad(save.saveName)} style={smBtnStyle('#2980b9')}>\r\n                                        LOAD\r\n                                    </button>\r\n                                    <button onClick={() => onExport(save.saveName)} style={smBtnStyle('#d35400')}>\r\n                                        EXPORT\r\n                                    </button>\r\n                                    <button onClick={() => onDelete(save.saveName)} style={smBtnStyle('#c0392b')}>\r\n                                        DEL\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        ))\r\n                    )}\r\n                </div>\r\n\r\n                <button onClick={onBack} style={backBtnStyle}>\r\n                    RETURN_TO_SYSTEM\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst containerStyle: React.CSSProperties = {\r\n    position: 'absolute', inset: 0, background: 'rgba(0,0,0,0.5)',\r\n    display: 'flex', alignItems: 'center', justifyContent: 'center'\r\n};\r\n\r\nconst overlayStyle: React.CSSProperties = {\r\n    position: 'relative',\r\n    width: '100%', height: '100%',\r\n    maxWidth: 'calc(100vh * (16 / 9))', maxHeight: 'calc(100vw * (9 / 16))',\r\n    aspectRatio: '16 / 9',\r\n    backgroundColor: 'rgba(5, 5, 5, 0.95)',\r\n    display: 'flex', flexDirection: 'column', alignItems: 'center',\r\n    padding: '2cqw',\r\n    fontFamily: 'monospace', zIndex: 3000,\r\n    containerType: 'size'\r\n};\r\n\r\nconst headerStyle: React.CSSProperties = {\r\n    fontSize: '2.5cqw', color: '#0f0', letterSpacing: '0.2cqw', marginBottom: '1.5cqw'\r\n};\r\n\r\nconst controlBarStyle: React.CSSProperties = {\r\n    display: 'flex', width: '80%', gap: '1cqw', marginBottom: '1.5cqw'\r\n};\r\n\r\nconst listContainerStyle: React.CSSProperties = {\r\n    flex: 1, width: '80%', overflowY: 'auto',\r\n    border: '1px solid #333', padding: '1cqw', backgroundColor: '#0a0a0a',\r\n    display: 'flex', flexDirection: 'column', gap: '0.5cqw'\r\n};\r\n\r\nconst rowStyle: React.CSSProperties = {\r\n    display: 'flex', alignItems: 'center', justifyContent: 'space-between',\r\n    backgroundColor: '#111', padding: '1cqw', borderRadius: '0.3cqw',\r\n    borderLeft: '0.3cqw solid #444'\r\n};\r\n\r\nconst inputStyle: React.CSSProperties = {\r\n    flex: 1, backgroundColor: '#222', border: '1px solid #444', color: 'white',\r\n    padding: '0.5cqw', fontFamily: 'monospace', fontSize: '1cqw'\r\n};\r\n\r\nconst actionBtnStyle = (bg: string): React.CSSProperties => ({\r\n    padding: '0 1.5cqw', backgroundColor: bg, color: 'white', border: 'none',\r\n    cursor: 'pointer', fontFamily: 'monospace', fontWeight: 'bold', fontSize: '1cqw'\r\n});\r\n\r\nconst smBtnStyle = (bg: string): React.CSSProperties => ({\r\n    padding: '0.4cqw 0.8cqw', backgroundColor: bg, color: 'white', border: 'none',\r\n    cursor: 'pointer', fontFamily: 'monospace', fontSize: '0.8cqw', borderRadius: '0.2cqw'\r\n});\r\n\r\nconst backBtnStyle: React.CSSProperties = {\r\n    marginTop: '1.5cqw', width: '15cqw', padding: '0.8cqw',\r\n    backgroundColor: '#c0392b', color: 'white', border: 'none',\r\n    cursor: 'pointer', fontFamily: 'monospace', fontWeight: 'bold', fontSize: '1cqw'\r\n};","// src/features/shared-menus/states/SaveMenuState.ts\r\nimport React, { JSX } from 'react';\r\nimport { MenuState } from '../../../core/templates/MenuState';\r\nimport { FeatureEnum } from '../../FeatureEnum';\r\nimport { SaveMenuController } from '../controllers/SaveMenuController';\r\nimport { SaveSlotView } from '../views/SaveSlotView';\r\n\r\nexport class SaveMenuState extends MenuState<SaveMenuController> {\r\n    public name = FeatureEnum.SAVE_MENU;\r\n\r\n    constructor() {\r\n        super(() => new SaveMenuController());\r\n    }\r\n\r\n    public getView(): JSX.Element {\r\n        return React.createElement(SaveSlotView, {\r\n            activeStateName: this.controller.getActiveGameName(),\r\n            onBack: () => this.controller.onBack(),\r\n            onSave: (name) => this.controller.handleSave(name),\r\n            onLoad: (name) => this.controller.handleLoad(name),\r\n            onDelete: (name) => this.controller.handleDelete(name),\r\n            onExport: (name) => this.controller.handleExport(name),\r\n            onImport: (file) => this.controller.handleImport(file)\r\n        });\r\n    }\r\n}"],"names":["SaveMenuController","BaseMenuController","SaveManager","slotName","targetName","saveData","targetState","StateRegistry","e","json","blob","url","a","SAVE_EXTENSION","file","text","useObservable","observableFactory","arg2","arg3","deps","defaultResult","monitor","React","_a","x","triggerUpdate","observable","subscription","val","current","err","useLiveQuery","querier","Dexie","doc","DexieYProvider","SaveSlotView","activeStateName","onSave","onLoad","onDelete","onExport","onImport","onBack","saves","db","inputName","setInputName","useState","fileInputRef","useRef","handleNewSave","handleFileChange","containerStyle","jsxs","overlayStyle","jsx","headerStyle","controlBarStyle","inputStyle","actionBtnStyle","listContainerStyle","save","rowStyle","smBtnStyle","backBtnStyle","bg","SaveMenuState","MenuState","FeatureEnum","name"],"mappings":"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","x_google_ignoreList":[1]}