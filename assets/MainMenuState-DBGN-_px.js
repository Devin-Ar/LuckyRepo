import{A as o,I as p,F as r,S as d,a as l,r as h,j as a,h as g,R as m}from"./index-BGo7J5MW.js";import{B as y}from"./BaseMenuController-Dz3YILTc.js";import{C as x}from"./CampaignManager-B1pa6BPN.js";class I extends y{campaign=x.getInstance();audio=o.getInstance();selectedIndex=0;MENU_COUNT=4;onViewUpdate;resOverride;setResOverride;bindView(e,s,t){this.onViewUpdate=e,this.resOverride=s,this.setResOverride=t,this.onViewUpdate(this.selectedIndex)}unbindView(){this.onViewUpdate=void 0}playBGM(){this.audio.play("bgm_menu")}stopBGM(){this.audio.stop("bgm_menu")}playNavSFX(){this.audio.play("sfx_nav")}setHoverIndex(e){this.selectedIndex!==e&&(this.selectedIndex=e,this.playNavSFX(),this.onViewUpdate?.(this.selectedIndex))}onKeyDown(e){const s=p.getInstance();let t=!1;s.isKeyAction(e.key,"UI_DOWN")?(this.selectedIndex=(this.selectedIndex+1)%this.MENU_COUNT,t=!0):s.isKeyAction(e.key,"UI_UP")?(this.selectedIndex=(this.selectedIndex-1+this.MENU_COUNT)%this.MENU_COUNT,t=!0):s.isKeyAction(e.key,"UI_ACCEPT")&&this.executeSelected(),t&&(this.playNavSFX(),this.onViewUpdate?.(this.selectedIndex))}executeSelected(){switch(this.selectedIndex){case 0:this.campaign.startCampaign("cross_game");break;case 1:this.openPopup(r.SAVE_MENU);break;case 2:this.openPopup(r.SETTINGS_MENU,{res:this.resOverride,setRes:this.setResOverride});break;case 3:this.handleNav(r.DEV_MENU);break}}async handleNav(e,s={}){const t=await d.create(e,{reset:!1,...s});l.getInstance().replace(t)}async openPopup(e,s={}){const t=await d.create(e,s);l.getInstance().push(t)}onBack(){}}const w=({controller:i,res:e,setRes:s})=>{const[t,u]=h.useState(0);h.useEffect(()=>(i.bindView(u,e,s),()=>i.unbindView()),[i,e,s]);const f=["Start Game","Load Game","Options","Legacy Menu"];return a.jsx("div",{style:{position:"absolute",inset:0,background:"#000",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:a.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",maxWidth:"calc(100vh * (16 / 9))",maxHeight:"calc(100vw * (9 / 16))",aspectRatio:"16 / 9",backgroundColor:"#0a0a0a",color:"#00ff00",boxSizing:"border-box",fontFamily:"monospace",border:"0.2cqw solid #333",display:"flex"},children:[a.jsx("div",{style:{flex:1,borderRight:"0.2cqw solid #333",padding:"3cqw",display:"flex",flexDirection:"column",justifyContent:"center",gap:"1.5cqw",backgroundColor:"#050505"},children:f.map((c,n)=>a.jsx("button",{onMouseEnter:()=>i.setHoverIndex(n),onClick:()=>i.executeSelected(),style:{padding:"1.2cqw",backgroundColor:t===n?"#00ff00":"#111",color:t===n?"#000":"#888",border:t===n?"0.1cqw solid #fff":"0.1cqw solid #333",borderRadius:"0.4cqw",cursor:"pointer",fontSize:"1cqw",fontWeight:"bold",textAlign:"left",textTransform:"uppercase",transition:"all 0.1s ease-in-out"},children:t===n?`> ${c}`:c},n))}),a.jsx("div",{style:{flex:3,position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:a.jsx("div",{style:{opacity:.2,fontSize:"2cqw",color:"#00ff00",fontStyle:"italic"},children:"[ *TBD* ]"})})]})})};class b extends g{name=r.MAIN_MENU;controller;params;MANIFEST_PATH="res/mainManifest.json";constructor(e){super(),this.params=e||{},this.controller=new I}async init(){await o.getInstance().loadManifest(this.MANIFEST_PATH,this.name),p.getInstance().refreshBindings("Shared"),this.isRendering=!0,this.controller.init(this.name),this.controller.playBGM()}update(e,s){}getView(){return m.createElement(w,{key:this.name,controller:this.controller,res:this.params.res,setRes:this.params.setRes})}destroy(){this.controller.stopBGM(),o.getInstance().uncacheByState(this.name),this.controller.destroy()}}export{b as MainMenuState};
//# sourceMappingURL=MainMenuState-DBGN-_px.js.map
