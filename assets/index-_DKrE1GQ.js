const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Game1State-DsDAw-Cb.js","assets/BasePresenter-1Bp8xzT5.js","assets/SaveManager-Ch1OEj4Z.js","assets/GameSprite-BZwYSXzk.js","assets/Game2State-FmdBOEbH.js","assets/DevMenuState-BCxfJw8m.js","assets/BaseMenuController-BrIAdAWT.js","assets/MainMenuState-D-RWstby.js","assets/PauseMenuState-BmMaqnSh.js","assets/MenuState-CWovCLre.js","assets/SaveMenuState-GJyh1nQE.js","assets/SettingsMenuState-COFxkG6g.js","assets/BHState-DoiKewee.js","assets/Game3State-CRsnG8el.js","assets/CinematicState-D8sSohbz.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();var hn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vl(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function gx(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var e=i.default;if(typeof e=="function"){var t=function r(){var o=!1;try{o=this instanceof r}catch{}return o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(r){var o=Object.getOwnPropertyDescriptor(i,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return i[r]}})}),t}var Oh={exports:{}},yo={},Bh={exports:{}},Ne={};var Im;function yx(){if(Im)return Ne;Im=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),h=Symbol.iterator;function p(C){return C===null||typeof C!="object"?null:(C=h&&C[h]||C["@@iterator"],typeof C=="function"?C:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function E(C,O,H){this.props=C,this.context=O,this.refs=w,this.updater=H||y}E.prototype.isReactComponent={},E.prototype.setState=function(C,O){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,O,"setState")},E.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function T(){}T.prototype=E.prototype;function k(C,O,H){this.props=C,this.context=O,this.refs=w,this.updater=H||y}var R=k.prototype=new T;R.constructor=k,x(R,E.prototype),R.isPureReactComponent=!0;var N=Array.isArray,L=Object.prototype.hasOwnProperty,V={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function U(C,O,H){var J,te={},ne=null,ae=null;if(O!=null)for(J in O.ref!==void 0&&(ae=O.ref),O.key!==void 0&&(ne=""+O.key),O)L.call(O,J)&&!b.hasOwnProperty(J)&&(te[J]=O[J]);var le=arguments.length-2;if(le===1)te.children=H;else if(1<le){for(var de=Array(le),ie=0;ie<le;ie++)de[ie]=arguments[ie+2];te.children=de}if(C&&C.defaultProps)for(J in le=C.defaultProps,le)te[J]===void 0&&(te[J]=le[J]);return{$$typeof:i,type:C,key:ne,ref:ae,props:te,_owner:V.current}}function $(C,O){return{$$typeof:i,type:C.type,key:O,ref:C.ref,props:C.props,_owner:C._owner}}function ee(C){return typeof C=="object"&&C!==null&&C.$$typeof===i}function Z(C){var O={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(H){return O[H]})}var z=/\/+/g;function Y(C,O){return typeof C=="object"&&C!==null&&C.key!=null?Z(""+C.key):O.toString(36)}function j(C,O,H,J,te){var ne=typeof C;(ne==="undefined"||ne==="boolean")&&(C=null);var ae=!1;if(C===null)ae=!0;else switch(ne){case"string":case"number":ae=!0;break;case"object":switch(C.$$typeof){case i:case e:ae=!0}}if(ae)return ae=C,te=te(ae),C=J===""?"."+Y(ae,0):J,N(te)?(H="",C!=null&&(H=C.replace(z,"$&/")+"/"),j(te,O,H,"",function(ie){return ie})):te!=null&&(ee(te)&&(te=$(te,H+(!te.key||ae&&ae.key===te.key?"":(""+te.key).replace(z,"$&/")+"/")+C)),O.push(te)),1;if(ae=0,J=J===""?".":J+":",N(C))for(var le=0;le<C.length;le++){ne=C[le];var de=J+Y(ne,le);ae+=j(ne,O,H,de,te)}else if(de=p(C),typeof de=="function")for(C=de.call(C),le=0;!(ne=C.next()).done;)ne=ne.value,de=J+Y(ne,le++),ae+=j(ne,O,H,de,te);else if(ne==="object")throw O=String(C),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return ae}function ce(C,O,H){if(C==null)return C;var J=[],te=0;return j(C,J,"","",function(ne){return O.call(H,ne,te++)}),J}function I(C){if(C._status===-1){var O=C._result;O=O(),O.then(function(H){(C._status===0||C._status===-1)&&(C._status=1,C._result=H)},function(H){(C._status===0||C._status===-1)&&(C._status=2,C._result=H)}),C._status===-1&&(C._status=0,C._result=O)}if(C._status===1)return C._result.default;throw C._result}var P={current:null},A={transition:null},F={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:A,ReactCurrentOwner:V};function M(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:ce,forEach:function(C,O,H){ce(C,function(){O.apply(this,arguments)},H)},count:function(C){var O=0;return ce(C,function(){O++}),O},toArray:function(C){return ce(C,function(O){return O})||[]},only:function(C){if(!ee(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Ne.Component=E,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=k,Ne.StrictMode=r,Ne.Suspense=f,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,Ne.act=M,Ne.cloneElement=function(C,O,H){if(C==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+C+".");var J=x({},C.props),te=C.key,ne=C.ref,ae=C._owner;if(O!=null){if(O.ref!==void 0&&(ne=O.ref,ae=V.current),O.key!==void 0&&(te=""+O.key),C.type&&C.type.defaultProps)var le=C.type.defaultProps;for(de in O)L.call(O,de)&&!b.hasOwnProperty(de)&&(J[de]=O[de]===void 0&&le!==void 0?le[de]:O[de])}var de=arguments.length-2;if(de===1)J.children=H;else if(1<de){le=Array(de);for(var ie=0;ie<de;ie++)le[ie]=arguments[ie+2];J.children=le}return{$$typeof:i,type:C.type,key:te,ref:ne,props:J,_owner:ae}},Ne.createContext=function(C){return C={$$typeof:u,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},C.Provider={$$typeof:a,_context:C},C.Consumer=C},Ne.createElement=U,Ne.createFactory=function(C){var O=U.bind(null,C);return O.type=C,O},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(C){return{$$typeof:c,render:C}},Ne.isValidElement=ee,Ne.lazy=function(C){return{$$typeof:v,_payload:{_status:-1,_result:C},_init:I}},Ne.memo=function(C,O){return{$$typeof:m,type:C,compare:O===void 0?null:O}},Ne.startTransition=function(C){var O=A.transition;A.transition={};try{C()}finally{A.transition=O}},Ne.unstable_act=M,Ne.useCallback=function(C,O){return P.current.useCallback(C,O)},Ne.useContext=function(C){return P.current.useContext(C)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(C){return P.current.useDeferredValue(C)},Ne.useEffect=function(C,O){return P.current.useEffect(C,O)},Ne.useId=function(){return P.current.useId()},Ne.useImperativeHandle=function(C,O,H){return P.current.useImperativeHandle(C,O,H)},Ne.useInsertionEffect=function(C,O){return P.current.useInsertionEffect(C,O)},Ne.useLayoutEffect=function(C,O){return P.current.useLayoutEffect(C,O)},Ne.useMemo=function(C,O){return P.current.useMemo(C,O)},Ne.useReducer=function(C,O,H){return P.current.useReducer(C,O,H)},Ne.useRef=function(C){return P.current.useRef(C)},Ne.useState=function(C){return P.current.useState(C)},Ne.useSyncExternalStore=function(C,O,H){return P.current.useSyncExternalStore(C,O,H)},Ne.useTransition=function(){return P.current.useTransition()},Ne.version="18.3.1",Ne}var Rm;function $d(){return Rm||(Rm=1,Bh.exports=yx()),Bh.exports}var Pm;function vx(){if(Pm)return yo;Pm=1;var i=$d(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(c,f,m){var v,h={},p=null,y=null;m!==void 0&&(p=""+m),f.key!==void 0&&(p=""+f.key),f.ref!==void 0&&(y=f.ref);for(v in f)r.call(f,v)&&!a.hasOwnProperty(v)&&(h[v]=f[v]);if(c&&c.defaultProps)for(v in f=c.defaultProps,f)h[v]===void 0&&(h[v]=f[v]);return{$$typeof:e,type:c,key:p,ref:y,props:h,_owner:o.current}}return yo.Fragment=t,yo.jsx=u,yo.jsxs=u,yo}var Mm;function _x(){return Mm||(Mm=1,Oh.exports=vx()),Oh.exports}var ct=_x(),at=$d();const Yy=Vl(at);var qa={},Fh={exports:{}},$t={},Nh={exports:{}},Uh={};var km;function xx(){return km||(km=1,(function(i){function e(A,F){var M=A.length;A.push(F);e:for(;0<M;){var C=M-1>>>1,O=A[C];if(0<o(O,F))A[C]=F,A[M]=O,M=C;else break e}}function t(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var F=A[0],M=A.pop();if(M!==F){A[0]=M;e:for(var C=0,O=A.length,H=O>>>1;C<H;){var J=2*(C+1)-1,te=A[J],ne=J+1,ae=A[ne];if(0>o(te,M))ne<O&&0>o(ae,te)?(A[C]=ae,A[ne]=M,C=ne):(A[C]=te,A[J]=M,C=J);else if(ne<O&&0>o(ae,M))A[C]=ae,A[ne]=M,C=ne;else break e}}return F}function o(A,F){var M=A.sortIndex-F.sortIndex;return M!==0?M:A.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var u=Date,c=u.now();i.unstable_now=function(){return u.now()-c}}var f=[],m=[],v=1,h=null,p=3,y=!1,x=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(A){for(var F=t(m);F!==null;){if(F.callback===null)r(m);else if(F.startTime<=A)r(m),F.sortIndex=F.expirationTime,e(f,F);else break;F=t(m)}}function N(A){if(w=!1,R(A),!x)if(t(f)!==null)x=!0,I(L);else{var F=t(m);F!==null&&P(N,F.startTime-A)}}function L(A,F){x=!1,w&&(w=!1,T(U),U=-1),y=!0;var M=p;try{for(R(F),h=t(f);h!==null&&(!(h.expirationTime>F)||A&&!Z());){var C=h.callback;if(typeof C=="function"){h.callback=null,p=h.priorityLevel;var O=C(h.expirationTime<=F);F=i.unstable_now(),typeof O=="function"?h.callback=O:h===t(f)&&r(f),R(F)}else r(f);h=t(f)}if(h!==null)var H=!0;else{var J=t(m);J!==null&&P(N,J.startTime-F),H=!1}return H}finally{h=null,p=M,y=!1}}var V=!1,b=null,U=-1,$=5,ee=-1;function Z(){return!(i.unstable_now()-ee<$)}function z(){if(b!==null){var A=i.unstable_now();ee=A;var F=!0;try{F=b(!0,A)}finally{F?Y():(V=!1,b=null)}}else V=!1}var Y;if(typeof k=="function")Y=function(){k(z)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,ce=j.port2;j.port1.onmessage=z,Y=function(){ce.postMessage(null)}}else Y=function(){E(z,0)};function I(A){b=A,V||(V=!0,Y())}function P(A,F){U=E(function(){A(i.unstable_now())},F)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(A){A.callback=null},i.unstable_continueExecution=function(){x||y||(x=!0,I(L))},i.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<A?Math.floor(1e3/A):5},i.unstable_getCurrentPriorityLevel=function(){return p},i.unstable_getFirstCallbackNode=function(){return t(f)},i.unstable_next=function(A){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var M=p;p=F;try{return A()}finally{p=M}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(A,F){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var M=p;p=A;try{return F()}finally{p=M}},i.unstable_scheduleCallback=function(A,F,M){var C=i.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?C+M:C):M=C,A){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=M+O,A={id:v++,callback:F,priorityLevel:A,startTime:M,expirationTime:O,sortIndex:-1},M>C?(A.sortIndex=M,e(m,A),t(f)===null&&A===t(m)&&(w?(T(U),U=-1):w=!0,P(N,M-C))):(A.sortIndex=O,e(f,A),x||y||(x=!0,I(L))),A},i.unstable_shouldYield=Z,i.unstable_wrapCallback=function(A){var F=p;return function(){var M=p;p=F;try{return A.apply(this,arguments)}finally{p=M}}}})(Uh)),Uh}var Lm;function wx(){return Lm||(Lm=1,Nh.exports=xx()),Nh.exports}var Dm;function Ex(){if(Dm)return $t;Dm=1;var i=$d(),e=wx();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(n,s){u(n,s),u(n+"Capture",s)}function u(n,s){for(o[n]=s,n=0;n<s.length;n++)r.add(s[n])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},h={};function p(n){return f.call(h,n)?!0:f.call(v,n)?!1:m.test(n)?h[n]=!0:(v[n]=!0,!1)}function y(n,s,l,d){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function x(n,s,l,d){if(s===null||typeof s>"u"||y(n,s,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function w(n,s,l,d,g,_,S){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=g,this.mustUseProperty=l,this.propertyName=n,this.type=s,this.sanitizeURL=_,this.removeEmptyString=S}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){E[n]=new w(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];E[s]=new w(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){E[n]=new w(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){E[n]=new w(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){E[n]=new w(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){E[n]=new w(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){E[n]=new w(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){E[n]=new w(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){E[n]=new w(n,5,!1,n.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function k(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(T,k);E[s]=new w(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(T,k);E[s]=new w(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(T,k);E[s]=new w(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){E[n]=new w(n,1,!1,n.toLowerCase(),null,!1,!1)}),E.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){E[n]=new w(n,1,!1,n.toLowerCase(),null,!0,!0)});function R(n,s,l,d){var g=E.hasOwnProperty(s)?E[s]:null;(g!==null?g.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(x(s,l,g,d)&&(l=null),d||g===null?p(s)&&(l===null?n.removeAttribute(s):n.setAttribute(s,""+l)):g.mustUseProperty?n[g.propertyName]=l===null?g.type===3?!1:"":l:(s=g.attributeName,d=g.attributeNamespace,l===null?n.removeAttribute(s):(g=g.type,l=g===3||g===4&&l===!0?"":""+l,d?n.setAttributeNS(d,s,l):n.setAttribute(s,l))))}var N=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),V=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),ee=Symbol.for("react.provider"),Z=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),P=Symbol.for("react.offscreen"),A=Symbol.iterator;function F(n){return n===null||typeof n!="object"?null:(n=A&&n[A]||n["@@iterator"],typeof n=="function"?n:null)}var M=Object.assign,C;function O(n){if(C===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);C=s&&s[1]||""}return`
`+C+n}var H=!1;function J(n,s){if(!n||H)return"";H=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(K){var d=K}Reflect.construct(n,[],s)}else{try{s.call()}catch(K){d=K}n.call(s.prototype)}else{try{throw Error()}catch(K){d=K}n()}}catch(K){if(K&&d&&typeof K.stack=="string"){for(var g=K.stack.split(`
`),_=d.stack.split(`
`),S=g.length-1,D=_.length-1;1<=S&&0<=D&&g[S]!==_[D];)D--;for(;1<=S&&0<=D;S--,D--)if(g[S]!==_[D]){if(S!==1||D!==1)do if(S--,D--,0>D||g[S]!==_[D]){var B=`
`+g[S].replace(" at new "," at ");return n.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",n.displayName)),B}while(1<=S&&0<=D);break}}}finally{H=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?O(n):""}function te(n){switch(n.tag){case 5:return O(n.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return n=J(n.type,!1),n;case 11:return n=J(n.type.render,!1),n;case 1:return n=J(n.type,!0),n;default:return""}}function ne(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case b:return"Fragment";case V:return"Portal";case $:return"Profiler";case U:return"StrictMode";case Y:return"Suspense";case j:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Z:return(n.displayName||"Context")+".Consumer";case ee:return(n._context.displayName||"Context")+".Provider";case z:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ce:return s=n.displayName||null,s!==null?s:ne(n.type)||"Memo";case I:s=n._payload,n=n._init;try{return ne(n(s))}catch{}}return null}function ae(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(s);case 8:return s===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function le(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function de(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ie(n){var s=de(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),d=""+n[s];if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,_=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){d=""+S,_.call(this,S)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(S){d=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function ve(n){n._valueTracker||(n._valueTracker=ie(n))}function Se(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),d="";return n&&(d=de(n)?n.checked?"true":"false":n.value),n=d,n!==l?(s.setValue(n),!0):!1}function ke(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Fe(n,s){var l=s.checked;return M({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function Ee(n,s){var l=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;l=le(s.value!=null?s.value:l),n._wrapperState={initialChecked:d,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ae(n,s){s=s.checked,s!=null&&R(n,"checked",s,!1)}function qe(n,s){Ae(n,s);var l=le(s.value),d=s.type;if(l!=null)d==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(d==="submit"||d==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Ir(n,s.type,l):s.hasOwnProperty("defaultValue")&&Ir(n,s.type,le(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function st(n,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,l||s===n.value||(n.value=s),n.defaultValue=s}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function Ir(n,s,l){(s!=="number"||ke(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var Nt=Array.isArray;function yt(n,s,l,d){if(n=n.options,s){s={};for(var g=0;g<l.length;g++)s["$"+l[g]]=!0;for(l=0;l<n.length;l++)g=s.hasOwnProperty("$"+n[l].value),n[l].selected!==g&&(n[l].selected=g),g&&d&&(n[l].defaultSelected=!0)}else{for(l=""+le(l),s=null,g=0;g<n.length;g++){if(n[g].value===l){n[g].selected=!0,d&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function Rr(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return M({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Yr(n,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(Nt(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}n._wrapperState={initialValue:le(l)}}function qr(n,s){var l=le(s.value),d=le(s.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),s.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),d!=null&&(n.defaultValue=""+d)}function Fo(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function No(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Li(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?No(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Di,yn=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,d,g){MSApp.execUnsafeLocalFunction(function(){return n(s,l,d,g)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Di=Di||document.createElement("div"),Di.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Di.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Kr(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var vn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eu=["Webkit","ms","Moz","O"];Object.keys(vn).forEach(function(n){eu.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),vn[s]=vn[n]})});function Uo(n,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||vn.hasOwnProperty(n)&&vn[n]?(""+s).trim():s+"px"}function Oi(n,s){n=n.style;for(var l in s)if(s.hasOwnProperty(l)){var d=l.indexOf("--")===0,g=Uo(l,s[l],d);l==="float"&&(l="cssFloat"),d?n.setProperty(l,g):n[l]=g}}var Bi=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function q(n,s){if(s){if(Bi[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Q(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ge=null;function We(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var je=null,De=null,kt=null;function Pr(n){if(n=to(n)){if(typeof je!="function")throw Error(t(280));var s=n.stateNode;s&&(s=ha(s),je(n.stateNode,n.type,s))}}function Ct(n){De?kt?kt.push(n):kt=[n]:De=n}function ur(){if(De){var n=De,s=kt;if(kt=De=null,Pr(n),s)for(n=0;n<s.length;n++)Pr(s[n])}}function Fi(n,s){return n(s)}function Qr(){}var Lt=!1;function Ms(n,s,l){if(Lt)return n(s,l);Lt=!0;try{return Fi(n,s,l)}finally{Lt=!1,(De!==null||kt!==null)&&(Qr(),ur())}}function _n(n,s){var l=n.stateNode;if(l===null)return null;var d=ha(l);if(d===null)return null;l=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var Ni=!1;if(c)try{var hr={};Object.defineProperty(hr,"passive",{get:function(){Ni=!0}}),window.addEventListener("test",hr,hr),window.removeEventListener("test",hr,hr)}catch{Ni=!1}function ks(n,s,l,d,g,_,S,D,B){var K=Array.prototype.slice.call(arguments,3);try{s.apply(l,K)}catch(se){this.onError(se)}}var Mr=!1,xn=null,wn=!1,Ui=null,Go={onError:function(n){Mr=!0,xn=n}};function Ls(n,s,l,d,g,_,S,D,B){Mr=!1,xn=null,ks.apply(Go,arguments)}function Ho(n,s,l,d,g,_,S,D,B){if(Ls.apply(this,arguments),Mr){if(Mr){var K=xn;Mr=!1,xn=null}else throw Error(t(198));wn||(wn=!0,Ui=K)}}function cr(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function Ds(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function zo(n){if(cr(n)!==n)throw Error(t(188))}function Os(n){var s=n.alternate;if(!s){if(s=cr(n),s===null)throw Error(t(188));return s!==n?null:n}for(var l=n,d=s;;){var g=l.return;if(g===null)break;var _=g.alternate;if(_===null){if(d=g.return,d!==null){l=d;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===l)return zo(g),n;if(_===d)return zo(g),s;_=_.sibling}throw Error(t(188))}if(l.return!==d.return)l=g,d=_;else{for(var S=!1,D=g.child;D;){if(D===l){S=!0,l=g,d=_;break}if(D===d){S=!0,d=g,l=_;break}D=D.sibling}if(!S){for(D=_.child;D;){if(D===l){S=!0,l=_,d=g;break}if(D===d){S=!0,d=_,l=g;break}D=D.sibling}if(!S)throw Error(t(189))}}if(l.alternate!==d)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?n:s}function Zr(n){return n=Os(n),n!==null?ei(n):null}function ei(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=ei(n);if(s!==null)return s;n=n.sibling}return null}var Vo=e.unstable_scheduleCallback,Bs=e.unstable_cancelCallback,C_=e.unstable_shouldYield,I_=e.unstable_requestPaint,lt=e.unstable_now,R_=e.unstable_getCurrentPriorityLevel,tu=e.unstable_ImmediatePriority,rf=e.unstable_UserBlockingPriority,$o=e.unstable_NormalPriority,P_=e.unstable_LowPriority,nf=e.unstable_IdlePriority,Wo=null,kr=null;function M_(n){if(kr&&typeof kr.onCommitFiberRoot=="function")try{kr.onCommitFiberRoot(Wo,n,void 0,(n.current.flags&128)===128)}catch{}}var dr=Math.clz32?Math.clz32:D_,k_=Math.log,L_=Math.LN2;function D_(n){return n>>>=0,n===0?32:31-(k_(n)/L_|0)|0}var jo=64,Xo=4194304;function Fs(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Yo(n,s){var l=n.pendingLanes;if(l===0)return 0;var d=0,g=n.suspendedLanes,_=n.pingedLanes,S=l&268435455;if(S!==0){var D=S&~g;D!==0?d=Fs(D):(_&=S,_!==0&&(d=Fs(_)))}else S=l&~g,S!==0?d=Fs(S):_!==0&&(d=Fs(_));if(d===0)return 0;if(s!==0&&s!==d&&(s&g)===0&&(g=d&-d,_=s&-s,g>=_||g===16&&(_&4194240)!==0))return s;if((d&4)!==0&&(d|=l&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=d;0<s;)l=31-dr(s),g=1<<l,d|=n[l],s&=~g;return d}function O_(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function B_(n,s){for(var l=n.suspendedLanes,d=n.pingedLanes,g=n.expirationTimes,_=n.pendingLanes;0<_;){var S=31-dr(_),D=1<<S,B=g[S];B===-1?((D&l)===0||(D&d)!==0)&&(g[S]=O_(D,s)):B<=s&&(n.expiredLanes|=D),_&=~D}}function ru(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function sf(){var n=jo;return jo<<=1,(jo&4194240)===0&&(jo=64),n}function nu(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function Ns(n,s,l){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-dr(s),n[s]=l}function F_(n,s){var l=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var d=n.eventTimes;for(n=n.expirationTimes;0<l;){var g=31-dr(l),_=1<<g;s[g]=0,d[g]=-1,n[g]=-1,l&=~_}}function iu(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var d=31-dr(l),g=1<<d;g&s|n[d]&s&&(n[d]|=s),l&=~g}}var Xe=0;function of(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var af,su,lf,uf,hf,ou=!1,qo=[],En=null,Tn=null,Sn=null,Us=new Map,Gs=new Map,An=[],N_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cf(n,s){switch(n){case"focusin":case"focusout":En=null;break;case"dragenter":case"dragleave":Tn=null;break;case"mouseover":case"mouseout":Sn=null;break;case"pointerover":case"pointerout":Us.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gs.delete(s.pointerId)}}function Hs(n,s,l,d,g,_){return n===null||n.nativeEvent!==_?(n={blockedOn:s,domEventName:l,eventSystemFlags:d,nativeEvent:_,targetContainers:[g]},s!==null&&(s=to(s),s!==null&&su(s)),n):(n.eventSystemFlags|=d,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function U_(n,s,l,d,g){switch(s){case"focusin":return En=Hs(En,n,s,l,d,g),!0;case"dragenter":return Tn=Hs(Tn,n,s,l,d,g),!0;case"mouseover":return Sn=Hs(Sn,n,s,l,d,g),!0;case"pointerover":var _=g.pointerId;return Us.set(_,Hs(Us.get(_)||null,n,s,l,d,g)),!0;case"gotpointercapture":return _=g.pointerId,Gs.set(_,Hs(Gs.get(_)||null,n,s,l,d,g)),!0}return!1}function df(n){var s=ti(n.target);if(s!==null){var l=cr(s);if(l!==null){if(s=l.tag,s===13){if(s=Ds(l),s!==null){n.blockedOn=s,hf(n.priority,function(){lf(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ko(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=lu(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var d=new l.constructor(l.type,l);Ge=d,l.target.dispatchEvent(d),Ge=null}else return s=to(l),s!==null&&su(s),n.blockedOn=l,!1;s.shift()}return!0}function ff(n,s,l){Ko(n)&&l.delete(s)}function G_(){ou=!1,En!==null&&Ko(En)&&(En=null),Tn!==null&&Ko(Tn)&&(Tn=null),Sn!==null&&Ko(Sn)&&(Sn=null),Us.forEach(ff),Gs.forEach(ff)}function zs(n,s){n.blockedOn===s&&(n.blockedOn=null,ou||(ou=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,G_)))}function Vs(n){function s(g){return zs(g,n)}if(0<qo.length){zs(qo[0],n);for(var l=1;l<qo.length;l++){var d=qo[l];d.blockedOn===n&&(d.blockedOn=null)}}for(En!==null&&zs(En,n),Tn!==null&&zs(Tn,n),Sn!==null&&zs(Sn,n),Us.forEach(s),Gs.forEach(s),l=0;l<An.length;l++)d=An[l],d.blockedOn===n&&(d.blockedOn=null);for(;0<An.length&&(l=An[0],l.blockedOn===null);)df(l),l.blockedOn===null&&An.shift()}var Gi=N.ReactCurrentBatchConfig,Qo=!0;function H_(n,s,l,d){var g=Xe,_=Gi.transition;Gi.transition=null;try{Xe=1,au(n,s,l,d)}finally{Xe=g,Gi.transition=_}}function z_(n,s,l,d){var g=Xe,_=Gi.transition;Gi.transition=null;try{Xe=4,au(n,s,l,d)}finally{Xe=g,Gi.transition=_}}function au(n,s,l,d){if(Qo){var g=lu(n,s,l,d);if(g===null)Au(n,s,d,Zo,l),cf(n,d);else if(U_(g,n,s,l,d))d.stopPropagation();else if(cf(n,d),s&4&&-1<N_.indexOf(n)){for(;g!==null;){var _=to(g);if(_!==null&&af(_),_=lu(n,s,l,d),_===null&&Au(n,s,d,Zo,l),_===g)break;g=_}g!==null&&d.stopPropagation()}else Au(n,s,d,null,l)}}var Zo=null;function lu(n,s,l,d){if(Zo=null,n=We(d),n=ti(n),n!==null)if(s=cr(n),s===null)n=null;else if(l=s.tag,l===13){if(n=Ds(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Zo=n,null}function pf(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(R_()){case tu:return 1;case rf:return 4;case $o:case P_:return 16;case nf:return 536870912;default:return 16}default:return 16}}var bn=null,uu=null,Jo=null;function mf(){if(Jo)return Jo;var n,s=uu,l=s.length,d,g="value"in bn?bn.value:bn.textContent,_=g.length;for(n=0;n<l&&s[n]===g[n];n++);var S=l-n;for(d=1;d<=S&&s[l-d]===g[_-d];d++);return Jo=g.slice(n,1<d?1-d:void 0)}function ea(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function ta(){return!0}function gf(){return!1}function jt(n){function s(l,d,g,_,S){this._reactName=l,this._targetInst=g,this.type=d,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var D in n)n.hasOwnProperty(D)&&(l=n[D],this[D]=l?l(_):_[D]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?ta:gf,this.isPropagationStopped=gf,this}return M(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ta)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ta)},persist:function(){},isPersistent:ta}),s}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hu=jt(Hi),$s=M({},Hi,{view:0,detail:0}),V_=jt($s),cu,du,Ws,ra=M({},$s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ws&&(Ws&&n.type==="mousemove"?(cu=n.screenX-Ws.screenX,du=n.screenY-Ws.screenY):du=cu=0,Ws=n),cu)},movementY:function(n){return"movementY"in n?n.movementY:du}}),yf=jt(ra),$_=M({},ra,{dataTransfer:0}),W_=jt($_),j_=M({},$s,{relatedTarget:0}),fu=jt(j_),X_=M({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),Y_=jt(X_),q_=M({},Hi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),K_=jt(q_),Q_=M({},Hi,{data:0}),vf=jt(Q_),Z_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},J_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t0(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=e0[n])?!!s[n]:!1}function pu(){return t0}var r0=M({},$s,{key:function(n){if(n.key){var s=Z_[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ea(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?J_[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pu,charCode:function(n){return n.type==="keypress"?ea(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ea(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),n0=jt(r0),i0=M({},ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_f=jt(i0),s0=M({},$s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pu}),o0=jt(s0),a0=M({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),l0=jt(a0),u0=M({},ra,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),h0=jt(u0),c0=[9,13,27,32],mu=c&&"CompositionEvent"in window,js=null;c&&"documentMode"in document&&(js=document.documentMode);var d0=c&&"TextEvent"in window&&!js,xf=c&&(!mu||js&&8<js&&11>=js),wf=" ",Ef=!1;function Tf(n,s){switch(n){case"keyup":return c0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var zi=!1;function f0(n,s){switch(n){case"compositionend":return Sf(s);case"keypress":return s.which!==32?null:(Ef=!0,wf);case"textInput":return n=s.data,n===wf&&Ef?null:n;default:return null}}function p0(n,s){if(zi)return n==="compositionend"||!mu&&Tf(n,s)?(n=mf(),Jo=uu=bn=null,zi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return xf&&s.locale!=="ko"?null:s.data;default:return null}}var m0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Af(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!m0[n.type]:s==="textarea"}function bf(n,s,l,d){Ct(d),s=aa(s,"onChange"),0<s.length&&(l=new hu("onChange","change",null,l,d),n.push({event:l,listeners:s}))}var Xs=null,Ys=null;function g0(n){$f(n,0)}function na(n){var s=Xi(n);if(Se(s))return n}function y0(n,s){if(n==="change")return s}var Cf=!1;if(c){var gu;if(c){var yu="oninput"in document;if(!yu){var If=document.createElement("div");If.setAttribute("oninput","return;"),yu=typeof If.oninput=="function"}gu=yu}else gu=!1;Cf=gu&&(!document.documentMode||9<document.documentMode)}function Rf(){Xs&&(Xs.detachEvent("onpropertychange",Pf),Ys=Xs=null)}function Pf(n){if(n.propertyName==="value"&&na(Ys)){var s=[];bf(s,Ys,n,We(n)),Ms(g0,s)}}function v0(n,s,l){n==="focusin"?(Rf(),Xs=s,Ys=l,Xs.attachEvent("onpropertychange",Pf)):n==="focusout"&&Rf()}function _0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return na(Ys)}function x0(n,s){if(n==="click")return na(s)}function w0(n,s){if(n==="input"||n==="change")return na(s)}function E0(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var fr=typeof Object.is=="function"?Object.is:E0;function qs(n,s){if(fr(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),d=Object.keys(s);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var g=l[d];if(!f.call(s,g)||!fr(n[g],s[g]))return!1}return!0}function Mf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function kf(n,s){var l=Mf(n);n=0;for(var d;l;){if(l.nodeType===3){if(d=n+l.textContent.length,n<=s&&d>=s)return{node:l,offset:s-n};n=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Mf(l)}}function Lf(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Lf(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Df(){for(var n=window,s=ke();s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=ke(n.document)}return s}function vu(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function T0(n){var s=Df(),l=n.focusedElem,d=n.selectionRange;if(s!==l&&l&&l.ownerDocument&&Lf(l.ownerDocument.documentElement,l)){if(d!==null&&vu(l)){if(s=d.start,n=d.end,n===void 0&&(n=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(n,l.value.length);else if(n=(s=l.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var g=l.textContent.length,_=Math.min(d.start,g);d=d.end===void 0?_:Math.min(d.end,g),!n.extend&&_>d&&(g=d,d=_,_=g),g=kf(l,_);var S=kf(l,d);g&&S&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(s=s.createRange(),s.setStart(g.node,g.offset),n.removeAllRanges(),_>d?(n.addRange(s),n.extend(S.node,S.offset)):(s.setEnd(S.node,S.offset),n.addRange(s)))}}for(s=[],n=l;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)n=s[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var S0=c&&"documentMode"in document&&11>=document.documentMode,Vi=null,_u=null,Ks=null,xu=!1;function Of(n,s,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;xu||Vi==null||Vi!==ke(d)||(d=Vi,"selectionStart"in d&&vu(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ks&&qs(Ks,d)||(Ks=d,d=aa(_u,"onSelect"),0<d.length&&(s=new hu("onSelect","select",null,s,l),n.push({event:s,listeners:d}),s.target=Vi)))}function ia(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var $i={animationend:ia("Animation","AnimationEnd"),animationiteration:ia("Animation","AnimationIteration"),animationstart:ia("Animation","AnimationStart"),transitionend:ia("Transition","TransitionEnd")},wu={},Bf={};c&&(Bf=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function sa(n){if(wu[n])return wu[n];if(!$i[n])return n;var s=$i[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in Bf)return wu[n]=s[l];return n}var Ff=sa("animationend"),Nf=sa("animationiteration"),Uf=sa("animationstart"),Gf=sa("transitionend"),Hf=new Map,zf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cn(n,s){Hf.set(n,s),a(s,[n])}for(var Eu=0;Eu<zf.length;Eu++){var Tu=zf[Eu],A0=Tu.toLowerCase(),b0=Tu[0].toUpperCase()+Tu.slice(1);Cn(A0,"on"+b0)}Cn(Ff,"onAnimationEnd"),Cn(Nf,"onAnimationIteration"),Cn(Uf,"onAnimationStart"),Cn("dblclick","onDoubleClick"),Cn("focusin","onFocus"),Cn("focusout","onBlur"),Cn(Gf,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qs));function Vf(n,s,l){var d=n.type||"unknown-event";n.currentTarget=l,Ho(d,s,void 0,n),n.currentTarget=null}function $f(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var d=n[l],g=d.event;d=d.listeners;e:{var _=void 0;if(s)for(var S=d.length-1;0<=S;S--){var D=d[S],B=D.instance,K=D.currentTarget;if(D=D.listener,B!==_&&g.isPropagationStopped())break e;Vf(g,D,K),_=B}else for(S=0;S<d.length;S++){if(D=d[S],B=D.instance,K=D.currentTarget,D=D.listener,B!==_&&g.isPropagationStopped())break e;Vf(g,D,K),_=B}}}if(wn)throw n=Ui,wn=!1,Ui=null,n}function Ke(n,s){var l=s[Mu];l===void 0&&(l=s[Mu]=new Set);var d=n+"__bubble";l.has(d)||(Wf(s,n,2,!1),l.add(d))}function Su(n,s,l){var d=0;s&&(d|=4),Wf(l,n,d,s)}var oa="_reactListening"+Math.random().toString(36).slice(2);function Zs(n){if(!n[oa]){n[oa]=!0,r.forEach(function(l){l!=="selectionchange"&&(C0.has(l)||Su(l,!1,n),Su(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[oa]||(s[oa]=!0,Su("selectionchange",!1,s))}}function Wf(n,s,l,d){switch(pf(s)){case 1:var g=H_;break;case 4:g=z_;break;default:g=au}l=g.bind(null,s,l,n),g=void 0,!Ni||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),d?g!==void 0?n.addEventListener(s,l,{capture:!0,passive:g}):n.addEventListener(s,l,!0):g!==void 0?n.addEventListener(s,l,{passive:g}):n.addEventListener(s,l,!1)}function Au(n,s,l,d,g){var _=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var D=d.stateNode.containerInfo;if(D===g||D.nodeType===8&&D.parentNode===g)break;if(S===4)for(S=d.return;S!==null;){var B=S.tag;if((B===3||B===4)&&(B=S.stateNode.containerInfo,B===g||B.nodeType===8&&B.parentNode===g))return;S=S.return}for(;D!==null;){if(S=ti(D),S===null)return;if(B=S.tag,B===5||B===6){d=_=S;continue e}D=D.parentNode}}d=d.return}Ms(function(){var K=_,se=We(l),oe=[];e:{var re=Hf.get(n);if(re!==void 0){var pe=hu,_e=n;switch(n){case"keypress":if(ea(l)===0)break e;case"keydown":case"keyup":pe=n0;break;case"focusin":_e="focus",pe=fu;break;case"focusout":_e="blur",pe=fu;break;case"beforeblur":case"afterblur":pe=fu;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=yf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=W_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=o0;break;case Ff:case Nf:case Uf:pe=Y_;break;case Gf:pe=l0;break;case"scroll":pe=V_;break;case"wheel":pe=h0;break;case"copy":case"cut":case"paste":pe=K_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=_f}var we=(s&4)!==0,ut=!we&&n==="scroll",W=we?re!==null?re+"Capture":null:re;we=[];for(var G=K,X;G!==null;){X=G;var he=X.stateNode;if(X.tag===5&&he!==null&&(X=he,W!==null&&(he=_n(G,W),he!=null&&we.push(Js(G,he,X)))),ut)break;G=G.return}0<we.length&&(re=new pe(re,_e,null,l,se),oe.push({event:re,listeners:we}))}}if((s&7)===0){e:{if(re=n==="mouseover"||n==="pointerover",pe=n==="mouseout"||n==="pointerout",re&&l!==Ge&&(_e=l.relatedTarget||l.fromElement)&&(ti(_e)||_e[Jr]))break e;if((pe||re)&&(re=se.window===se?se:(re=se.ownerDocument)?re.defaultView||re.parentWindow:window,pe?(_e=l.relatedTarget||l.toElement,pe=K,_e=_e?ti(_e):null,_e!==null&&(ut=cr(_e),_e!==ut||_e.tag!==5&&_e.tag!==6)&&(_e=null)):(pe=null,_e=K),pe!==_e)){if(we=yf,he="onMouseLeave",W="onMouseEnter",G="mouse",(n==="pointerout"||n==="pointerover")&&(we=_f,he="onPointerLeave",W="onPointerEnter",G="pointer"),ut=pe==null?re:Xi(pe),X=_e==null?re:Xi(_e),re=new we(he,G+"leave",pe,l,se),re.target=ut,re.relatedTarget=X,he=null,ti(se)===K&&(we=new we(W,G+"enter",_e,l,se),we.target=X,we.relatedTarget=ut,he=we),ut=he,pe&&_e)t:{for(we=pe,W=_e,G=0,X=we;X;X=Wi(X))G++;for(X=0,he=W;he;he=Wi(he))X++;for(;0<G-X;)we=Wi(we),G--;for(;0<X-G;)W=Wi(W),X--;for(;G--;){if(we===W||W!==null&&we===W.alternate)break t;we=Wi(we),W=Wi(W)}we=null}else we=null;pe!==null&&jf(oe,re,pe,we,!1),_e!==null&&ut!==null&&jf(oe,ut,_e,we,!0)}}e:{if(re=K?Xi(K):window,pe=re.nodeName&&re.nodeName.toLowerCase(),pe==="select"||pe==="input"&&re.type==="file")var be=y0;else if(Af(re))if(Cf)be=w0;else{be=_0;var Re=v0}else(pe=re.nodeName)&&pe.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(be=x0);if(be&&(be=be(n,K))){bf(oe,be,l,se);break e}Re&&Re(n,re,K),n==="focusout"&&(Re=re._wrapperState)&&Re.controlled&&re.type==="number"&&Ir(re,"number",re.value)}switch(Re=K?Xi(K):window,n){case"focusin":(Af(Re)||Re.contentEditable==="true")&&(Vi=Re,_u=K,Ks=null);break;case"focusout":Ks=_u=Vi=null;break;case"mousedown":xu=!0;break;case"contextmenu":case"mouseup":case"dragend":xu=!1,Of(oe,l,se);break;case"selectionchange":if(S0)break;case"keydown":case"keyup":Of(oe,l,se)}var Pe;if(mu)e:{switch(n){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else zi?Tf(n,l)&&(Le="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(Le="onCompositionStart");Le&&(xf&&l.locale!=="ko"&&(zi||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&zi&&(Pe=mf()):(bn=se,uu="value"in bn?bn.value:bn.textContent,zi=!0)),Re=aa(K,Le),0<Re.length&&(Le=new vf(Le,n,null,l,se),oe.push({event:Le,listeners:Re}),Pe?Le.data=Pe:(Pe=Sf(l),Pe!==null&&(Le.data=Pe)))),(Pe=d0?f0(n,l):p0(n,l))&&(K=aa(K,"onBeforeInput"),0<K.length&&(se=new vf("onBeforeInput","beforeinput",null,l,se),oe.push({event:se,listeners:K}),se.data=Pe))}$f(oe,s)})}function Js(n,s,l){return{instance:n,listener:s,currentTarget:l}}function aa(n,s){for(var l=s+"Capture",d=[];n!==null;){var g=n,_=g.stateNode;g.tag===5&&_!==null&&(g=_,_=_n(n,l),_!=null&&d.unshift(Js(n,_,g)),_=_n(n,s),_!=null&&d.push(Js(n,_,g))),n=n.return}return d}function Wi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function jf(n,s,l,d,g){for(var _=s._reactName,S=[];l!==null&&l!==d;){var D=l,B=D.alternate,K=D.stateNode;if(B!==null&&B===d)break;D.tag===5&&K!==null&&(D=K,g?(B=_n(l,_),B!=null&&S.unshift(Js(l,B,D))):g||(B=_n(l,_),B!=null&&S.push(Js(l,B,D)))),l=l.return}S.length!==0&&n.push({event:s,listeners:S})}var I0=/\r\n?/g,R0=/\u0000|\uFFFD/g;function Xf(n){return(typeof n=="string"?n:""+n).replace(I0,`
`).replace(R0,"")}function la(n,s,l){if(s=Xf(s),Xf(n)!==s&&l)throw Error(t(425))}function ua(){}var bu=null,Cu=null;function Iu(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ru=typeof setTimeout=="function"?setTimeout:void 0,P0=typeof clearTimeout=="function"?clearTimeout:void 0,Yf=typeof Promise=="function"?Promise:void 0,M0=typeof queueMicrotask=="function"?queueMicrotask:typeof Yf<"u"?function(n){return Yf.resolve(null).then(n).catch(k0)}:Ru;function k0(n){setTimeout(function(){throw n})}function Pu(n,s){var l=s,d=0;do{var g=l.nextSibling;if(n.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(d===0){n.removeChild(g),Vs(s);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=g}while(l);Vs(s)}function In(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function qf(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return n;s--}else l==="/$"&&s++}n=n.previousSibling}return null}var ji=Math.random().toString(36).slice(2),Lr="__reactFiber$"+ji,eo="__reactProps$"+ji,Jr="__reactContainer$"+ji,Mu="__reactEvents$"+ji,L0="__reactListeners$"+ji,D0="__reactHandles$"+ji;function ti(n){var s=n[Lr];if(s)return s;for(var l=n.parentNode;l;){if(s=l[Jr]||l[Lr]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=qf(n);n!==null;){if(l=n[Lr])return l;n=qf(n)}return s}n=l,l=n.parentNode}return null}function to(n){return n=n[Lr]||n[Jr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Xi(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function ha(n){return n[eo]||null}var ku=[],Yi=-1;function Rn(n){return{current:n}}function Qe(n){0>Yi||(n.current=ku[Yi],ku[Yi]=null,Yi--)}function Ye(n,s){Yi++,ku[Yi]=n.current,n.current=s}var Pn={},It=Rn(Pn),Ut=Rn(!1),ri=Pn;function qi(n,s){var l=n.type.contextTypes;if(!l)return Pn;var d=n.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var g={},_;for(_ in l)g[_]=s[_];return d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=g),g}function Gt(n){return n=n.childContextTypes,n!=null}function ca(){Qe(Ut),Qe(It)}function Kf(n,s,l){if(It.current!==Pn)throw Error(t(168));Ye(It,s),Ye(Ut,l)}function Qf(n,s,l){var d=n.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var g in d)if(!(g in s))throw Error(t(108,ae(n)||"Unknown",g));return M({},l,d)}function da(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Pn,ri=It.current,Ye(It,n),Ye(Ut,Ut.current),!0}function Zf(n,s,l){var d=n.stateNode;if(!d)throw Error(t(169));l?(n=Qf(n,s,ri),d.__reactInternalMemoizedMergedChildContext=n,Qe(Ut),Qe(It),Ye(It,n)):Qe(Ut),Ye(Ut,l)}var en=null,fa=!1,Lu=!1;function Jf(n){en===null?en=[n]:en.push(n)}function O0(n){fa=!0,Jf(n)}function Mn(){if(!Lu&&en!==null){Lu=!0;var n=0,s=Xe;try{var l=en;for(Xe=1;n<l.length;n++){var d=l[n];do d=d(!0);while(d!==null)}en=null,fa=!1}catch(g){throw en!==null&&(en=en.slice(n+1)),Vo(tu,Mn),g}finally{Xe=s,Lu=!1}}return null}var Ki=[],Qi=0,pa=null,ma=0,Jt=[],er=0,ni=null,tn=1,rn="";function ii(n,s){Ki[Qi++]=ma,Ki[Qi++]=pa,pa=n,ma=s}function ep(n,s,l){Jt[er++]=tn,Jt[er++]=rn,Jt[er++]=ni,ni=n;var d=tn;n=rn;var g=32-dr(d)-1;d&=~(1<<g),l+=1;var _=32-dr(s)+g;if(30<_){var S=g-g%5;_=(d&(1<<S)-1).toString(32),d>>=S,g-=S,tn=1<<32-dr(s)+g|l<<g|d,rn=_+n}else tn=1<<_|l<<g|d,rn=n}function Du(n){n.return!==null&&(ii(n,1),ep(n,1,0))}function Ou(n){for(;n===pa;)pa=Ki[--Qi],Ki[Qi]=null,ma=Ki[--Qi],Ki[Qi]=null;for(;n===ni;)ni=Jt[--er],Jt[er]=null,rn=Jt[--er],Jt[er]=null,tn=Jt[--er],Jt[er]=null}var Xt=null,Yt=null,et=!1,pr=null;function tp(n,s){var l=ir(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=n,s=n.deletions,s===null?(n.deletions=[l],n.flags|=16):s.push(l)}function rp(n,s){switch(n.tag){case 5:var l=n.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Xt=n,Yt=In(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Xt=n,Yt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=ni!==null?{id:tn,overflow:rn}:null,n.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=ir(18,null,null,0),l.stateNode=s,l.return=n,n.child=l,Xt=n,Yt=null,!0):!1;default:return!1}}function Bu(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Fu(n){if(et){var s=Yt;if(s){var l=s;if(!rp(n,s)){if(Bu(n))throw Error(t(418));s=In(l.nextSibling);var d=Xt;s&&rp(n,s)?tp(d,l):(n.flags=n.flags&-4097|2,et=!1,Xt=n)}}else{if(Bu(n))throw Error(t(418));n.flags=n.flags&-4097|2,et=!1,Xt=n}}}function np(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Xt=n}function ga(n){if(n!==Xt)return!1;if(!et)return np(n),et=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Iu(n.type,n.memoizedProps)),s&&(s=Yt)){if(Bu(n))throw ip(),Error(t(418));for(;s;)tp(n,s),s=In(s.nextSibling)}if(np(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(s===0){Yt=In(n.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}n=n.nextSibling}Yt=null}}else Yt=Xt?In(n.stateNode.nextSibling):null;return!0}function ip(){for(var n=Yt;n;)n=In(n.nextSibling)}function Zi(){Yt=Xt=null,et=!1}function Nu(n){pr===null?pr=[n]:pr.push(n)}var B0=N.ReactCurrentBatchConfig;function ro(n,s,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var d=l.stateNode}if(!d)throw Error(t(147,n));var g=d,_=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===_?s.ref:(s=function(S){var D=g.refs;S===null?delete D[_]:D[_]=S},s._stringRef=_,s)}if(typeof n!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,n))}return n}function ya(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function sp(n){var s=n._init;return s(n._payload)}function op(n){function s(W,G){if(n){var X=W.deletions;X===null?(W.deletions=[G],W.flags|=16):X.push(G)}}function l(W,G){if(!n)return null;for(;G!==null;)s(W,G),G=G.sibling;return null}function d(W,G){for(W=new Map;G!==null;)G.key!==null?W.set(G.key,G):W.set(G.index,G),G=G.sibling;return W}function g(W,G){return W=Un(W,G),W.index=0,W.sibling=null,W}function _(W,G,X){return W.index=X,n?(X=W.alternate,X!==null?(X=X.index,X<G?(W.flags|=2,G):X):(W.flags|=2,G)):(W.flags|=1048576,G)}function S(W){return n&&W.alternate===null&&(W.flags|=2),W}function D(W,G,X,he){return G===null||G.tag!==6?(G=Rh(X,W.mode,he),G.return=W,G):(G=g(G,X),G.return=W,G)}function B(W,G,X,he){var be=X.type;return be===b?se(W,G,X.props.children,he,X.key):G!==null&&(G.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===I&&sp(be)===G.type)?(he=g(G,X.props),he.ref=ro(W,G,X),he.return=W,he):(he=Ha(X.type,X.key,X.props,null,W.mode,he),he.ref=ro(W,G,X),he.return=W,he)}function K(W,G,X,he){return G===null||G.tag!==4||G.stateNode.containerInfo!==X.containerInfo||G.stateNode.implementation!==X.implementation?(G=Ph(X,W.mode,he),G.return=W,G):(G=g(G,X.children||[]),G.return=W,G)}function se(W,G,X,he,be){return G===null||G.tag!==7?(G=di(X,W.mode,he,be),G.return=W,G):(G=g(G,X),G.return=W,G)}function oe(W,G,X){if(typeof G=="string"&&G!==""||typeof G=="number")return G=Rh(""+G,W.mode,X),G.return=W,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case L:return X=Ha(G.type,G.key,G.props,null,W.mode,X),X.ref=ro(W,null,G),X.return=W,X;case V:return G=Ph(G,W.mode,X),G.return=W,G;case I:var he=G._init;return oe(W,he(G._payload),X)}if(Nt(G)||F(G))return G=di(G,W.mode,X,null),G.return=W,G;ya(W,G)}return null}function re(W,G,X,he){var be=G!==null?G.key:null;if(typeof X=="string"&&X!==""||typeof X=="number")return be!==null?null:D(W,G,""+X,he);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case L:return X.key===be?B(W,G,X,he):null;case V:return X.key===be?K(W,G,X,he):null;case I:return be=X._init,re(W,G,be(X._payload),he)}if(Nt(X)||F(X))return be!==null?null:se(W,G,X,he,null);ya(W,X)}return null}function pe(W,G,X,he,be){if(typeof he=="string"&&he!==""||typeof he=="number")return W=W.get(X)||null,D(G,W,""+he,be);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case L:return W=W.get(he.key===null?X:he.key)||null,B(G,W,he,be);case V:return W=W.get(he.key===null?X:he.key)||null,K(G,W,he,be);case I:var Re=he._init;return pe(W,G,X,Re(he._payload),be)}if(Nt(he)||F(he))return W=W.get(X)||null,se(G,W,he,be,null);ya(G,he)}return null}function _e(W,G,X,he){for(var be=null,Re=null,Pe=G,Le=G=0,xt=null;Pe!==null&&Le<X.length;Le++){Pe.index>Le?(xt=Pe,Pe=null):xt=Pe.sibling;var Ve=re(W,Pe,X[Le],he);if(Ve===null){Pe===null&&(Pe=xt);break}n&&Pe&&Ve.alternate===null&&s(W,Pe),G=_(Ve,G,Le),Re===null?be=Ve:Re.sibling=Ve,Re=Ve,Pe=xt}if(Le===X.length)return l(W,Pe),et&&ii(W,Le),be;if(Pe===null){for(;Le<X.length;Le++)Pe=oe(W,X[Le],he),Pe!==null&&(G=_(Pe,G,Le),Re===null?be=Pe:Re.sibling=Pe,Re=Pe);return et&&ii(W,Le),be}for(Pe=d(W,Pe);Le<X.length;Le++)xt=pe(Pe,W,Le,X[Le],he),xt!==null&&(n&&xt.alternate!==null&&Pe.delete(xt.key===null?Le:xt.key),G=_(xt,G,Le),Re===null?be=xt:Re.sibling=xt,Re=xt);return n&&Pe.forEach(function(Gn){return s(W,Gn)}),et&&ii(W,Le),be}function we(W,G,X,he){var be=F(X);if(typeof be!="function")throw Error(t(150));if(X=be.call(X),X==null)throw Error(t(151));for(var Re=be=null,Pe=G,Le=G=0,xt=null,Ve=X.next();Pe!==null&&!Ve.done;Le++,Ve=X.next()){Pe.index>Le?(xt=Pe,Pe=null):xt=Pe.sibling;var Gn=re(W,Pe,Ve.value,he);if(Gn===null){Pe===null&&(Pe=xt);break}n&&Pe&&Gn.alternate===null&&s(W,Pe),G=_(Gn,G,Le),Re===null?be=Gn:Re.sibling=Gn,Re=Gn,Pe=xt}if(Ve.done)return l(W,Pe),et&&ii(W,Le),be;if(Pe===null){for(;!Ve.done;Le++,Ve=X.next())Ve=oe(W,Ve.value,he),Ve!==null&&(G=_(Ve,G,Le),Re===null?be=Ve:Re.sibling=Ve,Re=Ve);return et&&ii(W,Le),be}for(Pe=d(W,Pe);!Ve.done;Le++,Ve=X.next())Ve=pe(Pe,W,Le,Ve.value,he),Ve!==null&&(n&&Ve.alternate!==null&&Pe.delete(Ve.key===null?Le:Ve.key),G=_(Ve,G,Le),Re===null?be=Ve:Re.sibling=Ve,Re=Ve);return n&&Pe.forEach(function(mx){return s(W,mx)}),et&&ii(W,Le),be}function ut(W,G,X,he){if(typeof X=="object"&&X!==null&&X.type===b&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case L:e:{for(var be=X.key,Re=G;Re!==null;){if(Re.key===be){if(be=X.type,be===b){if(Re.tag===7){l(W,Re.sibling),G=g(Re,X.props.children),G.return=W,W=G;break e}}else if(Re.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===I&&sp(be)===Re.type){l(W,Re.sibling),G=g(Re,X.props),G.ref=ro(W,Re,X),G.return=W,W=G;break e}l(W,Re);break}else s(W,Re);Re=Re.sibling}X.type===b?(G=di(X.props.children,W.mode,he,X.key),G.return=W,W=G):(he=Ha(X.type,X.key,X.props,null,W.mode,he),he.ref=ro(W,G,X),he.return=W,W=he)}return S(W);case V:e:{for(Re=X.key;G!==null;){if(G.key===Re)if(G.tag===4&&G.stateNode.containerInfo===X.containerInfo&&G.stateNode.implementation===X.implementation){l(W,G.sibling),G=g(G,X.children||[]),G.return=W,W=G;break e}else{l(W,G);break}else s(W,G);G=G.sibling}G=Ph(X,W.mode,he),G.return=W,W=G}return S(W);case I:return Re=X._init,ut(W,G,Re(X._payload),he)}if(Nt(X))return _e(W,G,X,he);if(F(X))return we(W,G,X,he);ya(W,X)}return typeof X=="string"&&X!==""||typeof X=="number"?(X=""+X,G!==null&&G.tag===6?(l(W,G.sibling),G=g(G,X),G.return=W,W=G):(l(W,G),G=Rh(X,W.mode,he),G.return=W,W=G),S(W)):l(W,G)}return ut}var Ji=op(!0),ap=op(!1),va=Rn(null),_a=null,es=null,Uu=null;function Gu(){Uu=es=_a=null}function Hu(n){var s=va.current;Qe(va),n._currentValue=s}function zu(n,s,l){for(;n!==null;){var d=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),n===l)break;n=n.return}}function ts(n,s){_a=n,Uu=es=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Ht=!0),n.firstContext=null)}function tr(n){var s=n._currentValue;if(Uu!==n)if(n={context:n,memoizedValue:s,next:null},es===null){if(_a===null)throw Error(t(308));es=n,_a.dependencies={lanes:0,firstContext:n}}else es=es.next=n;return s}var si=null;function Vu(n){si===null?si=[n]:si.push(n)}function lp(n,s,l,d){var g=s.interleaved;return g===null?(l.next=l,Vu(s)):(l.next=g.next,g.next=l),s.interleaved=l,nn(n,d)}function nn(n,s){n.lanes|=s;var l=n.alternate;for(l!==null&&(l.lanes|=s),l=n,n=n.return;n!==null;)n.childLanes|=s,l=n.alternate,l!==null&&(l.childLanes|=s),l=n,n=n.return;return l.tag===3?l.stateNode:null}var kn=!1;function $u(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function up(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function sn(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Ln(n,s,l){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(ze&2)!==0){var g=d.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),d.pending=s,nn(n,l)}return g=d.interleaved,g===null?(s.next=s,Vu(d)):(s.next=g.next,g.next=s),d.interleaved=s,nn(n,l)}function xa(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var d=s.lanes;d&=n.pendingLanes,l|=d,s.lanes=l,iu(n,l)}}function hp(n,s){var l=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var g=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var S={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};_===null?g=_=S:_=_.next=S,l=l.next}while(l!==null);_===null?g=_=s:_=_.next=s}else g=_=s;l={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:d.shared,effects:d.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}function wa(n,s,l,d){var g=n.updateQueue;kn=!1;var _=g.firstBaseUpdate,S=g.lastBaseUpdate,D=g.shared.pending;if(D!==null){g.shared.pending=null;var B=D,K=B.next;B.next=null,S===null?_=K:S.next=K,S=B;var se=n.alternate;se!==null&&(se=se.updateQueue,D=se.lastBaseUpdate,D!==S&&(D===null?se.firstBaseUpdate=K:D.next=K,se.lastBaseUpdate=B))}if(_!==null){var oe=g.baseState;S=0,se=K=B=null,D=_;do{var re=D.lane,pe=D.eventTime;if((d&re)===re){se!==null&&(se=se.next={eventTime:pe,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var _e=n,we=D;switch(re=s,pe=l,we.tag){case 1:if(_e=we.payload,typeof _e=="function"){oe=_e.call(pe,oe,re);break e}oe=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=we.payload,re=typeof _e=="function"?_e.call(pe,oe,re):_e,re==null)break e;oe=M({},oe,re);break e;case 2:kn=!0}}D.callback!==null&&D.lane!==0&&(n.flags|=64,re=g.effects,re===null?g.effects=[D]:re.push(D))}else pe={eventTime:pe,lane:re,tag:D.tag,payload:D.payload,callback:D.callback,next:null},se===null?(K=se=pe,B=oe):se=se.next=pe,S|=re;if(D=D.next,D===null){if(D=g.shared.pending,D===null)break;re=D,D=re.next,re.next=null,g.lastBaseUpdate=re,g.shared.pending=null}}while(!0);if(se===null&&(B=oe),g.baseState=B,g.firstBaseUpdate=K,g.lastBaseUpdate=se,s=g.shared.interleaved,s!==null){g=s;do S|=g.lane,g=g.next;while(g!==s)}else _===null&&(g.shared.lanes=0);li|=S,n.lanes=S,n.memoizedState=oe}}function cp(n,s,l){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var d=n[s],g=d.callback;if(g!==null){if(d.callback=null,d=l,typeof g!="function")throw Error(t(191,g));g.call(d)}}}var no={},Dr=Rn(no),io=Rn(no),so=Rn(no);function oi(n){if(n===no)throw Error(t(174));return n}function Wu(n,s){switch(Ye(so,s),Ye(io,n),Ye(Dr,no),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Li(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Li(s,n)}Qe(Dr),Ye(Dr,s)}function rs(){Qe(Dr),Qe(io),Qe(so)}function dp(n){oi(so.current);var s=oi(Dr.current),l=Li(s,n.type);s!==l&&(Ye(io,n),Ye(Dr,l))}function ju(n){io.current===n&&(Qe(Dr),Qe(io))}var tt=Rn(0);function Ea(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Xu=[];function Yu(){for(var n=0;n<Xu.length;n++)Xu[n]._workInProgressVersionPrimary=null;Xu.length=0}var Ta=N.ReactCurrentDispatcher,qu=N.ReactCurrentBatchConfig,ai=0,rt=null,pt=null,vt=null,Sa=!1,oo=!1,ao=0,F0=0;function Rt(){throw Error(t(321))}function Ku(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!fr(n[l],s[l]))return!1;return!0}function Qu(n,s,l,d,g,_){if(ai=_,rt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ta.current=n===null||n.memoizedState===null?H0:z0,n=l(d,g),oo){_=0;do{if(oo=!1,ao=0,25<=_)throw Error(t(301));_+=1,vt=pt=null,s.updateQueue=null,Ta.current=V0,n=l(d,g)}while(oo)}if(Ta.current=Ca,s=pt!==null&&pt.next!==null,ai=0,vt=pt=rt=null,Sa=!1,s)throw Error(t(300));return n}function Zu(){var n=ao!==0;return ao=0,n}function Or(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?rt.memoizedState=vt=n:vt=vt.next=n,vt}function rr(){if(pt===null){var n=rt.alternate;n=n!==null?n.memoizedState:null}else n=pt.next;var s=vt===null?rt.memoizedState:vt.next;if(s!==null)vt=s,pt=n;else{if(n===null)throw Error(t(310));pt=n,n={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},vt===null?rt.memoizedState=vt=n:vt=vt.next=n}return vt}function lo(n,s){return typeof s=="function"?s(n):s}function Ju(n){var s=rr(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var d=pt,g=d.baseQueue,_=l.pending;if(_!==null){if(g!==null){var S=g.next;g.next=_.next,_.next=S}d.baseQueue=g=_,l.pending=null}if(g!==null){_=g.next,d=d.baseState;var D=S=null,B=null,K=_;do{var se=K.lane;if((ai&se)===se)B!==null&&(B=B.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),d=K.hasEagerState?K.eagerState:n(d,K.action);else{var oe={lane:se,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};B===null?(D=B=oe,S=d):B=B.next=oe,rt.lanes|=se,li|=se}K=K.next}while(K!==null&&K!==_);B===null?S=d:B.next=D,fr(d,s.memoizedState)||(Ht=!0),s.memoizedState=d,s.baseState=S,s.baseQueue=B,l.lastRenderedState=d}if(n=l.interleaved,n!==null){g=n;do _=g.lane,rt.lanes|=_,li|=_,g=g.next;while(g!==n)}else g===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function eh(n){var s=rr(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var d=l.dispatch,g=l.pending,_=s.memoizedState;if(g!==null){l.pending=null;var S=g=g.next;do _=n(_,S.action),S=S.next;while(S!==g);fr(_,s.memoizedState)||(Ht=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),l.lastRenderedState=_}return[_,d]}function fp(){}function pp(n,s){var l=rt,d=rr(),g=s(),_=!fr(d.memoizedState,g);if(_&&(d.memoizedState=g,Ht=!0),d=d.queue,th(yp.bind(null,l,d,n),[n]),d.getSnapshot!==s||_||vt!==null&&vt.memoizedState.tag&1){if(l.flags|=2048,uo(9,gp.bind(null,l,d,g,s),void 0,null),_t===null)throw Error(t(349));(ai&30)!==0||mp(l,s,g)}return g}function mp(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function gp(n,s,l,d){s.value=l,s.getSnapshot=d,vp(s)&&_p(n)}function yp(n,s,l){return l(function(){vp(s)&&_p(n)})}function vp(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!fr(n,l)}catch{return!0}}function _p(n){var s=nn(n,1);s!==null&&vr(s,n,1,-1)}function xp(n){var s=Or();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lo,lastRenderedState:n},s.queue=n,n=n.dispatch=G0.bind(null,rt,n),[s.memoizedState,n]}function uo(n,s,l,d){return n={tag:n,create:s,destroy:l,deps:d,next:null},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.lastEffect=n.next=n):(l=s.lastEffect,l===null?s.lastEffect=n.next=n:(d=l.next,l.next=n,n.next=d,s.lastEffect=n)),n}function wp(){return rr().memoizedState}function Aa(n,s,l,d){var g=Or();rt.flags|=n,g.memoizedState=uo(1|s,l,void 0,d===void 0?null:d)}function ba(n,s,l,d){var g=rr();d=d===void 0?null:d;var _=void 0;if(pt!==null){var S=pt.memoizedState;if(_=S.destroy,d!==null&&Ku(d,S.deps)){g.memoizedState=uo(s,l,_,d);return}}rt.flags|=n,g.memoizedState=uo(1|s,l,_,d)}function Ep(n,s){return Aa(8390656,8,n,s)}function th(n,s){return ba(2048,8,n,s)}function Tp(n,s){return ba(4,2,n,s)}function Sp(n,s){return ba(4,4,n,s)}function Ap(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function bp(n,s,l){return l=l!=null?l.concat([n]):null,ba(4,4,Ap.bind(null,s,n),l)}function rh(){}function Cp(n,s){var l=rr();s=s===void 0?null:s;var d=l.memoizedState;return d!==null&&s!==null&&Ku(s,d[1])?d[0]:(l.memoizedState=[n,s],n)}function Ip(n,s){var l=rr();s=s===void 0?null:s;var d=l.memoizedState;return d!==null&&s!==null&&Ku(s,d[1])?d[0]:(n=n(),l.memoizedState=[n,s],n)}function Rp(n,s,l){return(ai&21)===0?(n.baseState&&(n.baseState=!1,Ht=!0),n.memoizedState=l):(fr(l,s)||(l=sf(),rt.lanes|=l,li|=l,n.baseState=!0),s)}function N0(n,s){var l=Xe;Xe=l!==0&&4>l?l:4,n(!0);var d=qu.transition;qu.transition={};try{n(!1),s()}finally{Xe=l,qu.transition=d}}function Pp(){return rr().memoizedState}function U0(n,s,l){var d=Fn(n);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},Mp(n))kp(s,l);else if(l=lp(n,s,l,d),l!==null){var g=Ot();vr(l,n,d,g),Lp(l,s,d)}}function G0(n,s,l){var d=Fn(n),g={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(Mp(n))kp(s,g);else{var _=n.alternate;if(n.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var S=s.lastRenderedState,D=_(S,l);if(g.hasEagerState=!0,g.eagerState=D,fr(D,S)){var B=s.interleaved;B===null?(g.next=g,Vu(s)):(g.next=B.next,B.next=g),s.interleaved=g;return}}catch{}l=lp(n,s,g,d),l!==null&&(g=Ot(),vr(l,n,d,g),Lp(l,s,d))}}function Mp(n){var s=n.alternate;return n===rt||s!==null&&s===rt}function kp(n,s){oo=Sa=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function Lp(n,s,l){if((l&4194240)!==0){var d=s.lanes;d&=n.pendingLanes,l|=d,s.lanes=l,iu(n,l)}}var Ca={readContext:tr,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},H0={readContext:tr,useCallback:function(n,s){return Or().memoizedState=[n,s===void 0?null:s],n},useContext:tr,useEffect:Ep,useImperativeHandle:function(n,s,l){return l=l!=null?l.concat([n]):null,Aa(4194308,4,Ap.bind(null,s,n),l)},useLayoutEffect:function(n,s){return Aa(4194308,4,n,s)},useInsertionEffect:function(n,s){return Aa(4,2,n,s)},useMemo:function(n,s){var l=Or();return s=s===void 0?null:s,n=n(),l.memoizedState=[n,s],n},useReducer:function(n,s,l){var d=Or();return s=l!==void 0?l(s):s,d.memoizedState=d.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},d.queue=n,n=n.dispatch=U0.bind(null,rt,n),[d.memoizedState,n]},useRef:function(n){var s=Or();return n={current:n},s.memoizedState=n},useState:xp,useDebugValue:rh,useDeferredValue:function(n){return Or().memoizedState=n},useTransition:function(){var n=xp(!1),s=n[0];return n=N0.bind(null,n[1]),Or().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,l){var d=rt,g=Or();if(et){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),_t===null)throw Error(t(349));(ai&30)!==0||mp(d,s,l)}g.memoizedState=l;var _={value:l,getSnapshot:s};return g.queue=_,Ep(yp.bind(null,d,_,n),[n]),d.flags|=2048,uo(9,gp.bind(null,d,_,l,s),void 0,null),l},useId:function(){var n=Or(),s=_t.identifierPrefix;if(et){var l=rn,d=tn;l=(d&~(1<<32-dr(d)-1)).toString(32)+l,s=":"+s+"R"+l,l=ao++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=F0++,s=":"+s+"r"+l.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},z0={readContext:tr,useCallback:Cp,useContext:tr,useEffect:th,useImperativeHandle:bp,useInsertionEffect:Tp,useLayoutEffect:Sp,useMemo:Ip,useReducer:Ju,useRef:wp,useState:function(){return Ju(lo)},useDebugValue:rh,useDeferredValue:function(n){var s=rr();return Rp(s,pt.memoizedState,n)},useTransition:function(){var n=Ju(lo)[0],s=rr().memoizedState;return[n,s]},useMutableSource:fp,useSyncExternalStore:pp,useId:Pp,unstable_isNewReconciler:!1},V0={readContext:tr,useCallback:Cp,useContext:tr,useEffect:th,useImperativeHandle:bp,useInsertionEffect:Tp,useLayoutEffect:Sp,useMemo:Ip,useReducer:eh,useRef:wp,useState:function(){return eh(lo)},useDebugValue:rh,useDeferredValue:function(n){var s=rr();return pt===null?s.memoizedState=n:Rp(s,pt.memoizedState,n)},useTransition:function(){var n=eh(lo)[0],s=rr().memoizedState;return[n,s]},useMutableSource:fp,useSyncExternalStore:pp,useId:Pp,unstable_isNewReconciler:!1};function mr(n,s){if(n&&n.defaultProps){s=M({},s),n=n.defaultProps;for(var l in n)s[l]===void 0&&(s[l]=n[l]);return s}return s}function nh(n,s,l,d){s=n.memoizedState,l=l(d,s),l=l==null?s:M({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Ia={isMounted:function(n){return(n=n._reactInternals)?cr(n)===n:!1},enqueueSetState:function(n,s,l){n=n._reactInternals;var d=Ot(),g=Fn(n),_=sn(d,g);_.payload=s,l!=null&&(_.callback=l),s=Ln(n,_,g),s!==null&&(vr(s,n,g,d),xa(s,n,g))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var d=Ot(),g=Fn(n),_=sn(d,g);_.tag=1,_.payload=s,l!=null&&(_.callback=l),s=Ln(n,_,g),s!==null&&(vr(s,n,g,d),xa(s,n,g))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=Ot(),d=Fn(n),g=sn(l,d);g.tag=2,s!=null&&(g.callback=s),s=Ln(n,g,d),s!==null&&(vr(s,n,d,l),xa(s,n,d))}};function Dp(n,s,l,d,g,_,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,_,S):s.prototype&&s.prototype.isPureReactComponent?!qs(l,d)||!qs(g,_):!0}function Op(n,s,l){var d=!1,g=Pn,_=s.contextType;return typeof _=="object"&&_!==null?_=tr(_):(g=Gt(s)?ri:It.current,d=s.contextTypes,_=(d=d!=null)?qi(n,g):Pn),s=new s(l,_),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ia,n.stateNode=s,s._reactInternals=n,d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=_),s}function Bp(n,s,l,d){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,d),s.state!==n&&Ia.enqueueReplaceState(s,s.state,null)}function ih(n,s,l,d){var g=n.stateNode;g.props=l,g.state=n.memoizedState,g.refs={},$u(n);var _=s.contextType;typeof _=="object"&&_!==null?g.context=tr(_):(_=Gt(s)?ri:It.current,g.context=qi(n,_)),g.state=n.memoizedState,_=s.getDerivedStateFromProps,typeof _=="function"&&(nh(n,s,_,l),g.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(s=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),s!==g.state&&Ia.enqueueReplaceState(g,g.state,null),wa(n,l,g,d),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function ns(n,s){try{var l="",d=s;do l+=te(d),d=d.return;while(d);var g=l}catch(_){g=`
Error generating stack: `+_.message+`
`+_.stack}return{value:n,source:s,stack:g,digest:null}}function sh(n,s,l){return{value:n,source:null,stack:l??null,digest:s??null}}function oh(n,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var $0=typeof WeakMap=="function"?WeakMap:Map;function Fp(n,s,l){l=sn(-1,l),l.tag=3,l.payload={element:null};var d=s.value;return l.callback=function(){Oa||(Oa=!0,wh=d),oh(n,s)},l}function Np(n,s,l){l=sn(-1,l),l.tag=3;var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var g=s.value;l.payload=function(){return d(g)},l.callback=function(){oh(n,s)}}var _=n.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(l.callback=function(){oh(n,s),typeof d!="function"&&(On===null?On=new Set([this]):On.add(this));var S=s.stack;this.componentDidCatch(s.value,{componentStack:S!==null?S:""})}),l}function Up(n,s,l){var d=n.pingCache;if(d===null){d=n.pingCache=new $0;var g=new Set;d.set(s,g)}else g=d.get(s),g===void 0&&(g=new Set,d.set(s,g));g.has(l)||(g.add(l),n=ix.bind(null,n,s,l),s.then(n,n))}function Gp(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Hp(n,s,l,d,g){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=sn(-1,1),s.tag=2,Ln(l,s,1))),l.lanes|=1),n):(n.flags|=65536,n.lanes=g,n)}var W0=N.ReactCurrentOwner,Ht=!1;function Dt(n,s,l,d){s.child=n===null?ap(s,null,l,d):Ji(s,n.child,l,d)}function zp(n,s,l,d,g){l=l.render;var _=s.ref;return ts(s,g),d=Qu(n,s,l,d,_,g),l=Zu(),n!==null&&!Ht?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,on(n,s,g)):(et&&l&&Du(s),s.flags|=1,Dt(n,s,d,g),s.child)}function Vp(n,s,l,d,g){if(n===null){var _=l.type;return typeof _=="function"&&!Ih(_)&&_.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=_,$p(n,s,_,d,g)):(n=Ha(l.type,null,d,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(_=n.child,(n.lanes&g)===0){var S=_.memoizedProps;if(l=l.compare,l=l!==null?l:qs,l(S,d)&&n.ref===s.ref)return on(n,s,g)}return s.flags|=1,n=Un(_,d),n.ref=s.ref,n.return=s,s.child=n}function $p(n,s,l,d,g){if(n!==null){var _=n.memoizedProps;if(qs(_,d)&&n.ref===s.ref)if(Ht=!1,s.pendingProps=d=_,(n.lanes&g)!==0)(n.flags&131072)!==0&&(Ht=!0);else return s.lanes=n.lanes,on(n,s,g)}return ah(n,s,l,d,g)}function Wp(n,s,l){var d=s.pendingProps,g=d.children,_=n!==null?n.memoizedState:null;if(d.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(ss,qt),qt|=l;else{if((l&1073741824)===0)return n=_!==null?_.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Ye(ss,qt),qt|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=_!==null?_.baseLanes:l,Ye(ss,qt),qt|=d}else _!==null?(d=_.baseLanes|l,s.memoizedState=null):d=l,Ye(ss,qt),qt|=d;return Dt(n,s,g,l),s.child}function jp(n,s){var l=s.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function ah(n,s,l,d,g){var _=Gt(l)?ri:It.current;return _=qi(s,_),ts(s,g),l=Qu(n,s,l,d,_,g),d=Zu(),n!==null&&!Ht?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,on(n,s,g)):(et&&d&&Du(s),s.flags|=1,Dt(n,s,l,g),s.child)}function Xp(n,s,l,d,g){if(Gt(l)){var _=!0;da(s)}else _=!1;if(ts(s,g),s.stateNode===null)Pa(n,s),Op(s,l,d),ih(s,l,d,g),d=!0;else if(n===null){var S=s.stateNode,D=s.memoizedProps;S.props=D;var B=S.context,K=l.contextType;typeof K=="object"&&K!==null?K=tr(K):(K=Gt(l)?ri:It.current,K=qi(s,K));var se=l.getDerivedStateFromProps,oe=typeof se=="function"||typeof S.getSnapshotBeforeUpdate=="function";oe||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(D!==d||B!==K)&&Bp(s,S,d,K),kn=!1;var re=s.memoizedState;S.state=re,wa(s,d,S,g),B=s.memoizedState,D!==d||re!==B||Ut.current||kn?(typeof se=="function"&&(nh(s,l,se,d),B=s.memoizedState),(D=kn||Dp(s,l,D,d,re,B,K))?(oe||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(s.flags|=4194308)):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=B),S.props=d,S.state=B,S.context=K,d=D):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{S=s.stateNode,up(n,s),D=s.memoizedProps,K=s.type===s.elementType?D:mr(s.type,D),S.props=K,oe=s.pendingProps,re=S.context,B=l.contextType,typeof B=="object"&&B!==null?B=tr(B):(B=Gt(l)?ri:It.current,B=qi(s,B));var pe=l.getDerivedStateFromProps;(se=typeof pe=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(D!==oe||re!==B)&&Bp(s,S,d,B),kn=!1,re=s.memoizedState,S.state=re,wa(s,d,S,g);var _e=s.memoizedState;D!==oe||re!==_e||Ut.current||kn?(typeof pe=="function"&&(nh(s,l,pe,d),_e=s.memoizedState),(K=kn||Dp(s,l,K,d,re,_e,B)||!1)?(se||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(d,_e,B),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(d,_e,B)),typeof S.componentDidUpdate=="function"&&(s.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof S.componentDidUpdate!="function"||D===n.memoizedProps&&re===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===n.memoizedProps&&re===n.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=_e),S.props=d,S.state=_e,S.context=B,d=K):(typeof S.componentDidUpdate!="function"||D===n.memoizedProps&&re===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===n.memoizedProps&&re===n.memoizedState||(s.flags|=1024),d=!1)}return lh(n,s,l,d,_,g)}function lh(n,s,l,d,g,_){jp(n,s);var S=(s.flags&128)!==0;if(!d&&!S)return g&&Zf(s,l,!1),on(n,s,_);d=s.stateNode,W0.current=s;var D=S&&typeof l.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,n!==null&&S?(s.child=Ji(s,n.child,null,_),s.child=Ji(s,null,D,_)):Dt(n,s,D,_),s.memoizedState=d.state,g&&Zf(s,l,!0),s.child}function Yp(n){var s=n.stateNode;s.pendingContext?Kf(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Kf(n,s.context,!1),Wu(n,s.containerInfo)}function qp(n,s,l,d,g){return Zi(),Nu(g),s.flags|=256,Dt(n,s,l,d),s.child}var uh={dehydrated:null,treeContext:null,retryLane:0};function hh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Kp(n,s,l){var d=s.pendingProps,g=tt.current,_=!1,S=(s.flags&128)!==0,D;if((D=S)||(D=n!==null&&n.memoizedState===null?!1:(g&2)!==0),D?(_=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Ye(tt,g&1),n===null)return Fu(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(S=d.children,n=d.fallback,_?(d=s.mode,_=s.child,S={mode:"hidden",children:S},(d&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=S):_=za(S,d,0,null),n=di(n,d,l,null),_.return=s,n.return=s,_.sibling=n,s.child=_,s.child.memoizedState=hh(l),s.memoizedState=uh,n):ch(s,S));if(g=n.memoizedState,g!==null&&(D=g.dehydrated,D!==null))return j0(n,s,S,d,D,g,l);if(_){_=d.fallback,S=s.mode,g=n.child,D=g.sibling;var B={mode:"hidden",children:d.children};return(S&1)===0&&s.child!==g?(d=s.child,d.childLanes=0,d.pendingProps=B,s.deletions=null):(d=Un(g,B),d.subtreeFlags=g.subtreeFlags&14680064),D!==null?_=Un(D,_):(_=di(_,S,l,null),_.flags|=2),_.return=s,d.return=s,d.sibling=_,s.child=d,d=_,_=s.child,S=n.child.memoizedState,S=S===null?hh(l):{baseLanes:S.baseLanes|l,cachePool:null,transitions:S.transitions},_.memoizedState=S,_.childLanes=n.childLanes&~l,s.memoizedState=uh,d}return _=n.child,n=_.sibling,d=Un(_,{mode:"visible",children:d.children}),(s.mode&1)===0&&(d.lanes=l),d.return=s,d.sibling=null,n!==null&&(l=s.deletions,l===null?(s.deletions=[n],s.flags|=16):l.push(n)),s.child=d,s.memoizedState=null,d}function ch(n,s){return s=za({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Ra(n,s,l,d){return d!==null&&Nu(d),Ji(s,n.child,null,l),n=ch(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function j0(n,s,l,d,g,_,S){if(l)return s.flags&256?(s.flags&=-257,d=sh(Error(t(422))),Ra(n,s,S,d)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(_=d.fallback,g=s.mode,d=za({mode:"visible",children:d.children},g,0,null),_=di(_,g,S,null),_.flags|=2,d.return=s,_.return=s,d.sibling=_,s.child=d,(s.mode&1)!==0&&Ji(s,n.child,null,S),s.child.memoizedState=hh(S),s.memoizedState=uh,_);if((s.mode&1)===0)return Ra(n,s,S,null);if(g.data==="$!"){if(d=g.nextSibling&&g.nextSibling.dataset,d)var D=d.dgst;return d=D,_=Error(t(419)),d=sh(_,d,void 0),Ra(n,s,S,d)}if(D=(S&n.childLanes)!==0,Ht||D){if(d=_t,d!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(d.suspendedLanes|S))!==0?0:g,g!==0&&g!==_.retryLane&&(_.retryLane=g,nn(n,g),vr(d,n,g,-1))}return Ch(),d=sh(Error(t(421))),Ra(n,s,S,d)}return g.data==="$?"?(s.flags|=128,s.child=n.child,s=sx.bind(null,n),g._reactRetry=s,null):(n=_.treeContext,Yt=In(g.nextSibling),Xt=s,et=!0,pr=null,n!==null&&(Jt[er++]=tn,Jt[er++]=rn,Jt[er++]=ni,tn=n.id,rn=n.overflow,ni=s),s=ch(s,d.children),s.flags|=4096,s)}function Qp(n,s,l){n.lanes|=s;var d=n.alternate;d!==null&&(d.lanes|=s),zu(n.return,s,l)}function dh(n,s,l,d,g){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:g}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=d,_.tail=l,_.tailMode=g)}function Zp(n,s,l){var d=s.pendingProps,g=d.revealOrder,_=d.tail;if(Dt(n,s,d.children,l),d=tt.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Qp(n,l,s);else if(n.tag===19)Qp(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}if(Ye(tt,d),(s.mode&1)===0)s.memoizedState=null;else switch(g){case"forwards":for(l=s.child,g=null;l!==null;)n=l.alternate,n!==null&&Ea(n)===null&&(g=l),l=l.sibling;l=g,l===null?(g=s.child,s.child=null):(g=l.sibling,l.sibling=null),dh(s,!1,g,l,_);break;case"backwards":for(l=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&Ea(n)===null){s.child=g;break}n=g.sibling,g.sibling=l,l=g,g=n}dh(s,!0,l,null,_);break;case"together":dh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Pa(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function on(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),li|=s.lanes,(l&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,l=Un(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=Un(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function X0(n,s,l){switch(s.tag){case 3:Yp(s),Zi();break;case 5:dp(s);break;case 1:Gt(s.type)&&da(s);break;case 4:Wu(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,g=s.memoizedProps.value;Ye(va,d._currentValue),d._currentValue=g;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(Ye(tt,tt.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?Kp(n,s,l):(Ye(tt,tt.current&1),n=on(n,s,l),n!==null?n.sibling:null);Ye(tt,tt.current&1);break;case 19:if(d=(l&s.childLanes)!==0,(n.flags&128)!==0){if(d)return Zp(n,s,l);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Ye(tt,tt.current),d)break;return null;case 22:case 23:return s.lanes=0,Wp(n,s,l)}return on(n,s,l)}var Jp,fh,em,tm;Jp=function(n,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},fh=function(){},em=function(n,s,l,d){var g=n.memoizedProps;if(g!==d){n=s.stateNode,oi(Dr.current);var _=null;switch(l){case"input":g=Fe(n,g),d=Fe(n,d),_=[];break;case"select":g=M({},g,{value:void 0}),d=M({},d,{value:void 0}),_=[];break;case"textarea":g=Rr(n,g),d=Rr(n,d),_=[];break;default:typeof g.onClick!="function"&&typeof d.onClick=="function"&&(n.onclick=ua)}q(l,d);var S;l=null;for(K in g)if(!d.hasOwnProperty(K)&&g.hasOwnProperty(K)&&g[K]!=null)if(K==="style"){var D=g[K];for(S in D)D.hasOwnProperty(S)&&(l||(l={}),l[S]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(o.hasOwnProperty(K)?_||(_=[]):(_=_||[]).push(K,null));for(K in d){var B=d[K];if(D=g?.[K],d.hasOwnProperty(K)&&B!==D&&(B!=null||D!=null))if(K==="style")if(D){for(S in D)!D.hasOwnProperty(S)||B&&B.hasOwnProperty(S)||(l||(l={}),l[S]="");for(S in B)B.hasOwnProperty(S)&&D[S]!==B[S]&&(l||(l={}),l[S]=B[S])}else l||(_||(_=[]),_.push(K,l)),l=B;else K==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,D=D?D.__html:void 0,B!=null&&D!==B&&(_=_||[]).push(K,B)):K==="children"?typeof B!="string"&&typeof B!="number"||(_=_||[]).push(K,""+B):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(o.hasOwnProperty(K)?(B!=null&&K==="onScroll"&&Ke("scroll",n),_||D===B||(_=[])):(_=_||[]).push(K,B))}l&&(_=_||[]).push("style",l);var K=_;(s.updateQueue=K)&&(s.flags|=4)}},tm=function(n,s,l,d){l!==d&&(s.flags|=4)};function ho(n,s){if(!et)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Pt(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,d=0;if(s)for(var g=n.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags&14680064,d|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=d,n.childLanes=l,s}function Y0(n,s,l){var d=s.pendingProps;switch(Ou(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(s),null;case 1:return Gt(s.type)&&ca(),Pt(s),null;case 3:return d=s.stateNode,rs(),Qe(Ut),Qe(It),Yu(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(ga(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,pr!==null&&(Sh(pr),pr=null))),fh(n,s),Pt(s),null;case 5:ju(s);var g=oi(so.current);if(l=s.type,n!==null&&s.stateNode!=null)em(n,s,l,d,g),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(t(166));return Pt(s),null}if(n=oi(Dr.current),ga(s)){d=s.stateNode,l=s.type;var _=s.memoizedProps;switch(d[Lr]=s,d[eo]=_,n=(s.mode&1)!==0,l){case"dialog":Ke("cancel",d),Ke("close",d);break;case"iframe":case"object":case"embed":Ke("load",d);break;case"video":case"audio":for(g=0;g<Qs.length;g++)Ke(Qs[g],d);break;case"source":Ke("error",d);break;case"img":case"image":case"link":Ke("error",d),Ke("load",d);break;case"details":Ke("toggle",d);break;case"input":Ee(d,_),Ke("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!_.multiple},Ke("invalid",d);break;case"textarea":Yr(d,_),Ke("invalid",d)}q(l,_),g=null;for(var S in _)if(_.hasOwnProperty(S)){var D=_[S];S==="children"?typeof D=="string"?d.textContent!==D&&(_.suppressHydrationWarning!==!0&&la(d.textContent,D,n),g=["children",D]):typeof D=="number"&&d.textContent!==""+D&&(_.suppressHydrationWarning!==!0&&la(d.textContent,D,n),g=["children",""+D]):o.hasOwnProperty(S)&&D!=null&&S==="onScroll"&&Ke("scroll",d)}switch(l){case"input":ve(d),st(d,_,!0);break;case"textarea":ve(d),Fo(d);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(d.onclick=ua)}d=g,s.updateQueue=d,d!==null&&(s.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=No(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof d.is=="string"?n=S.createElement(l,{is:d.is}):(n=S.createElement(l),l==="select"&&(S=n,d.multiple?S.multiple=!0:d.size&&(S.size=d.size))):n=S.createElementNS(n,l),n[Lr]=s,n[eo]=d,Jp(n,s,!1,!1),s.stateNode=n;e:{switch(S=Q(l,d),l){case"dialog":Ke("cancel",n),Ke("close",n),g=d;break;case"iframe":case"object":case"embed":Ke("load",n),g=d;break;case"video":case"audio":for(g=0;g<Qs.length;g++)Ke(Qs[g],n);g=d;break;case"source":Ke("error",n),g=d;break;case"img":case"image":case"link":Ke("error",n),Ke("load",n),g=d;break;case"details":Ke("toggle",n),g=d;break;case"input":Ee(n,d),g=Fe(n,d),Ke("invalid",n);break;case"option":g=d;break;case"select":n._wrapperState={wasMultiple:!!d.multiple},g=M({},d,{value:void 0}),Ke("invalid",n);break;case"textarea":Yr(n,d),g=Rr(n,d),Ke("invalid",n);break;default:g=d}q(l,g),D=g;for(_ in D)if(D.hasOwnProperty(_)){var B=D[_];_==="style"?Oi(n,B):_==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,B!=null&&yn(n,B)):_==="children"?typeof B=="string"?(l!=="textarea"||B!=="")&&Kr(n,B):typeof B=="number"&&Kr(n,""+B):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(o.hasOwnProperty(_)?B!=null&&_==="onScroll"&&Ke("scroll",n):B!=null&&R(n,_,B,S))}switch(l){case"input":ve(n),st(n,d,!1);break;case"textarea":ve(n),Fo(n);break;case"option":d.value!=null&&n.setAttribute("value",""+le(d.value));break;case"select":n.multiple=!!d.multiple,_=d.value,_!=null?yt(n,!!d.multiple,_,!1):d.defaultValue!=null&&yt(n,!!d.multiple,d.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=ua)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Pt(s),null;case 6:if(n&&s.stateNode!=null)tm(n,s,n.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(t(166));if(l=oi(so.current),oi(Dr.current),ga(s)){if(d=s.stateNode,l=s.memoizedProps,d[Lr]=s,(_=d.nodeValue!==l)&&(n=Xt,n!==null))switch(n.tag){case 3:la(d.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&la(d.nodeValue,l,(n.mode&1)!==0)}_&&(s.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[Lr]=s,s.stateNode=d}return Pt(s),null;case 13:if(Qe(tt),d=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(et&&Yt!==null&&(s.mode&1)!==0&&(s.flags&128)===0)ip(),Zi(),s.flags|=98560,_=!1;else if(_=ga(s),d!==null&&d.dehydrated!==null){if(n===null){if(!_)throw Error(t(318));if(_=s.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[Lr]=s}else Zi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Pt(s),_=!1}else pr!==null&&(Sh(pr),pr=null),_=!0;if(!_)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(d=d!==null,d!==(n!==null&&n.memoizedState!==null)&&d&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(tt.current&1)!==0?mt===0&&(mt=3):Ch())),s.updateQueue!==null&&(s.flags|=4),Pt(s),null);case 4:return rs(),fh(n,s),n===null&&Zs(s.stateNode.containerInfo),Pt(s),null;case 10:return Hu(s.type._context),Pt(s),null;case 17:return Gt(s.type)&&ca(),Pt(s),null;case 19:if(Qe(tt),_=s.memoizedState,_===null)return Pt(s),null;if(d=(s.flags&128)!==0,S=_.rendering,S===null)if(d)ho(_,!1);else{if(mt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(S=Ea(n),S!==null){for(s.flags|=128,ho(_,!1),d=S.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=l,l=s.child;l!==null;)_=l,n=d,_.flags&=14680066,S=_.alternate,S===null?(_.childLanes=0,_.lanes=n,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=S.childLanes,_.lanes=S.lanes,_.child=S.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=S.memoizedProps,_.memoizedState=S.memoizedState,_.updateQueue=S.updateQueue,_.type=S.type,n=S.dependencies,_.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Ye(tt,tt.current&1|2),s.child}n=n.sibling}_.tail!==null&&lt()>os&&(s.flags|=128,d=!0,ho(_,!1),s.lanes=4194304)}else{if(!d)if(n=Ea(S),n!==null){if(s.flags|=128,d=!0,l=n.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),ho(_,!0),_.tail===null&&_.tailMode==="hidden"&&!S.alternate&&!et)return Pt(s),null}else 2*lt()-_.renderingStartTime>os&&l!==1073741824&&(s.flags|=128,d=!0,ho(_,!1),s.lanes=4194304);_.isBackwards?(S.sibling=s.child,s.child=S):(l=_.last,l!==null?l.sibling=S:s.child=S,_.last=S)}return _.tail!==null?(s=_.tail,_.rendering=s,_.tail=s.sibling,_.renderingStartTime=lt(),s.sibling=null,l=tt.current,Ye(tt,d?l&1|2:l&1),s):(Pt(s),null);case 22:case 23:return bh(),d=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==d&&(s.flags|=8192),d&&(s.mode&1)!==0?(qt&1073741824)!==0&&(Pt(s),s.subtreeFlags&6&&(s.flags|=8192)):Pt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function q0(n,s){switch(Ou(s),s.tag){case 1:return Gt(s.type)&&ca(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return rs(),Qe(Ut),Qe(It),Yu(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return ju(s),null;case 13:if(Qe(tt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Zi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Qe(tt),null;case 4:return rs(),null;case 10:return Hu(s.type._context),null;case 22:case 23:return bh(),null;case 24:return null;default:return null}}var Ma=!1,Mt=!1,K0=typeof WeakSet=="function"?WeakSet:Set,ye=null;function is(n,s){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){ot(n,s,d)}else l.current=null}function ph(n,s,l){try{l()}catch(d){ot(n,s,d)}}var rm=!1;function Q0(n,s){if(bu=Qo,n=Df(),vu(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var g=d.anchorOffset,_=d.focusNode;d=d.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var S=0,D=-1,B=-1,K=0,se=0,oe=n,re=null;t:for(;;){for(var pe;oe!==l||g!==0&&oe.nodeType!==3||(D=S+g),oe!==_||d!==0&&oe.nodeType!==3||(B=S+d),oe.nodeType===3&&(S+=oe.nodeValue.length),(pe=oe.firstChild)!==null;)re=oe,oe=pe;for(;;){if(oe===n)break t;if(re===l&&++K===g&&(D=S),re===_&&++se===d&&(B=S),(pe=oe.nextSibling)!==null)break;oe=re,re=oe.parentNode}oe=pe}l=D===-1||B===-1?null:{start:D,end:B}}else l=null}l=l||{start:0,end:0}}else l=null;for(Cu={focusedElem:n,selectionRange:l},Qo=!1,ye=s;ye!==null;)if(s=ye,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ye=n;else for(;ye!==null;){s=ye;try{var _e=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(_e!==null){var we=_e.memoizedProps,ut=_e.memoizedState,W=s.stateNode,G=W.getSnapshotBeforeUpdate(s.elementType===s.type?we:mr(s.type,we),ut);W.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var X=s.stateNode.containerInfo;X.nodeType===1?X.textContent="":X.nodeType===9&&X.documentElement&&X.removeChild(X.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(he){ot(s,s.return,he)}if(n=s.sibling,n!==null){n.return=s.return,ye=n;break}ye=s.return}return _e=rm,rm=!1,_e}function co(n,s,l){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&n)===n){var _=g.destroy;g.destroy=void 0,_!==void 0&&ph(s,l,_)}g=g.next}while(g!==d)}}function ka(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&n)===n){var d=l.create;l.destroy=d()}l=l.next}while(l!==s)}}function mh(n){var s=n.ref;if(s!==null){var l=n.stateNode;n.tag,n=l,typeof s=="function"?s(n):s.current=n}}function nm(n){var s=n.alternate;s!==null&&(n.alternate=null,nm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Lr],delete s[eo],delete s[Mu],delete s[L0],delete s[D0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function im(n){return n.tag===5||n.tag===3||n.tag===4}function sm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||im(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function gh(n,s,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(n,s):l.insertBefore(n,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(n,l)):(s=l,s.appendChild(n)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=ua));else if(d!==4&&(n=n.child,n!==null))for(gh(n,s,l),n=n.sibling;n!==null;)gh(n,s,l),n=n.sibling}function yh(n,s,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(d!==4&&(n=n.child,n!==null))for(yh(n,s,l),n=n.sibling;n!==null;)yh(n,s,l),n=n.sibling}var Tt=null,gr=!1;function Dn(n,s,l){for(l=l.child;l!==null;)om(n,s,l),l=l.sibling}function om(n,s,l){if(kr&&typeof kr.onCommitFiberUnmount=="function")try{kr.onCommitFiberUnmount(Wo,l)}catch{}switch(l.tag){case 5:Mt||is(l,s);case 6:var d=Tt,g=gr;Tt=null,Dn(n,s,l),Tt=d,gr=g,Tt!==null&&(gr?(n=Tt,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):Tt.removeChild(l.stateNode));break;case 18:Tt!==null&&(gr?(n=Tt,l=l.stateNode,n.nodeType===8?Pu(n.parentNode,l):n.nodeType===1&&Pu(n,l),Vs(n)):Pu(Tt,l.stateNode));break;case 4:d=Tt,g=gr,Tt=l.stateNode.containerInfo,gr=!0,Dn(n,s,l),Tt=d,gr=g;break;case 0:case 11:case 14:case 15:if(!Mt&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){g=d=d.next;do{var _=g,S=_.destroy;_=_.tag,S!==void 0&&((_&2)!==0||(_&4)!==0)&&ph(l,s,S),g=g.next}while(g!==d)}Dn(n,s,l);break;case 1:if(!Mt&&(is(l,s),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(D){ot(l,s,D)}Dn(n,s,l);break;case 21:Dn(n,s,l);break;case 22:l.mode&1?(Mt=(d=Mt)||l.memoizedState!==null,Dn(n,s,l),Mt=d):Dn(n,s,l);break;default:Dn(n,s,l)}}function am(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new K0),s.forEach(function(d){var g=ox.bind(null,n,d);l.has(d)||(l.add(d),d.then(g,g))})}}function yr(n,s){var l=s.deletions;if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];try{var _=n,S=s,D=S;e:for(;D!==null;){switch(D.tag){case 5:Tt=D.stateNode,gr=!1;break e;case 3:Tt=D.stateNode.containerInfo,gr=!0;break e;case 4:Tt=D.stateNode.containerInfo,gr=!0;break e}D=D.return}if(Tt===null)throw Error(t(160));om(_,S,g),Tt=null,gr=!1;var B=g.alternate;B!==null&&(B.return=null),g.return=null}catch(K){ot(g,s,K)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)lm(s,n),s=s.sibling}function lm(n,s){var l=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(yr(s,n),Br(n),d&4){try{co(3,n,n.return),ka(3,n)}catch(we){ot(n,n.return,we)}try{co(5,n,n.return)}catch(we){ot(n,n.return,we)}}break;case 1:yr(s,n),Br(n),d&512&&l!==null&&is(l,l.return);break;case 5:if(yr(s,n),Br(n),d&512&&l!==null&&is(l,l.return),n.flags&32){var g=n.stateNode;try{Kr(g,"")}catch(we){ot(n,n.return,we)}}if(d&4&&(g=n.stateNode,g!=null)){var _=n.memoizedProps,S=l!==null?l.memoizedProps:_,D=n.type,B=n.updateQueue;if(n.updateQueue=null,B!==null)try{D==="input"&&_.type==="radio"&&_.name!=null&&Ae(g,_),Q(D,S);var K=Q(D,_);for(S=0;S<B.length;S+=2){var se=B[S],oe=B[S+1];se==="style"?Oi(g,oe):se==="dangerouslySetInnerHTML"?yn(g,oe):se==="children"?Kr(g,oe):R(g,se,oe,K)}switch(D){case"input":qe(g,_);break;case"textarea":qr(g,_);break;case"select":var re=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!_.multiple;var pe=_.value;pe!=null?yt(g,!!_.multiple,pe,!1):re!==!!_.multiple&&(_.defaultValue!=null?yt(g,!!_.multiple,_.defaultValue,!0):yt(g,!!_.multiple,_.multiple?[]:"",!1))}g[eo]=_}catch(we){ot(n,n.return,we)}}break;case 6:if(yr(s,n),Br(n),d&4){if(n.stateNode===null)throw Error(t(162));g=n.stateNode,_=n.memoizedProps;try{g.nodeValue=_}catch(we){ot(n,n.return,we)}}break;case 3:if(yr(s,n),Br(n),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Vs(s.containerInfo)}catch(we){ot(n,n.return,we)}break;case 4:yr(s,n),Br(n);break;case 13:yr(s,n),Br(n),g=n.child,g.flags&8192&&(_=g.memoizedState!==null,g.stateNode.isHidden=_,!_||g.alternate!==null&&g.alternate.memoizedState!==null||(xh=lt())),d&4&&am(n);break;case 22:if(se=l!==null&&l.memoizedState!==null,n.mode&1?(Mt=(K=Mt)||se,yr(s,n),Mt=K):yr(s,n),Br(n),d&8192){if(K=n.memoizedState!==null,(n.stateNode.isHidden=K)&&!se&&(n.mode&1)!==0)for(ye=n,se=n.child;se!==null;){for(oe=ye=se;ye!==null;){switch(re=ye,pe=re.child,re.tag){case 0:case 11:case 14:case 15:co(4,re,re.return);break;case 1:is(re,re.return);var _e=re.stateNode;if(typeof _e.componentWillUnmount=="function"){d=re,l=re.return;try{s=d,_e.props=s.memoizedProps,_e.state=s.memoizedState,_e.componentWillUnmount()}catch(we){ot(d,l,we)}}break;case 5:is(re,re.return);break;case 22:if(re.memoizedState!==null){cm(oe);continue}}pe!==null?(pe.return=re,ye=pe):cm(oe)}se=se.sibling}e:for(se=null,oe=n;;){if(oe.tag===5){if(se===null){se=oe;try{g=oe.stateNode,K?(_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(D=oe.stateNode,B=oe.memoizedProps.style,S=B!=null&&B.hasOwnProperty("display")?B.display:null,D.style.display=Uo("display",S))}catch(we){ot(n,n.return,we)}}}else if(oe.tag===6){if(se===null)try{oe.stateNode.nodeValue=K?"":oe.memoizedProps}catch(we){ot(n,n.return,we)}}else if((oe.tag!==22&&oe.tag!==23||oe.memoizedState===null||oe===n)&&oe.child!==null){oe.child.return=oe,oe=oe.child;continue}if(oe===n)break e;for(;oe.sibling===null;){if(oe.return===null||oe.return===n)break e;se===oe&&(se=null),oe=oe.return}se===oe&&(se=null),oe.sibling.return=oe.return,oe=oe.sibling}}break;case 19:yr(s,n),Br(n),d&4&&am(n);break;case 21:break;default:yr(s,n),Br(n)}}function Br(n){var s=n.flags;if(s&2){try{e:{for(var l=n.return;l!==null;){if(im(l)){var d=l;break e}l=l.return}throw Error(t(160))}switch(d.tag){case 5:var g=d.stateNode;d.flags&32&&(Kr(g,""),d.flags&=-33);var _=sm(n);yh(n,_,g);break;case 3:case 4:var S=d.stateNode.containerInfo,D=sm(n);gh(n,D,S);break;default:throw Error(t(161))}}catch(B){ot(n,n.return,B)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Z0(n,s,l){ye=n,um(n)}function um(n,s,l){for(var d=(n.mode&1)!==0;ye!==null;){var g=ye,_=g.child;if(g.tag===22&&d){var S=g.memoizedState!==null||Ma;if(!S){var D=g.alternate,B=D!==null&&D.memoizedState!==null||Mt;D=Ma;var K=Mt;if(Ma=S,(Mt=B)&&!K)for(ye=g;ye!==null;)S=ye,B=S.child,S.tag===22&&S.memoizedState!==null?dm(g):B!==null?(B.return=S,ye=B):dm(g);for(;_!==null;)ye=_,um(_),_=_.sibling;ye=g,Ma=D,Mt=K}hm(n)}else(g.subtreeFlags&8772)!==0&&_!==null?(_.return=g,ye=_):hm(n)}}function hm(n){for(;ye!==null;){var s=ye;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Mt||ka(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!Mt)if(l===null)d.componentDidMount();else{var g=s.elementType===s.type?l.memoizedProps:mr(s.type,l.memoizedProps);d.componentDidUpdate(g,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var _=s.updateQueue;_!==null&&cp(s,_,d);break;case 3:var S=s.updateQueue;if(S!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}cp(s,S,l)}break;case 5:var D=s.stateNode;if(l===null&&s.flags&4){l=D;var B=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":B.autoFocus&&l.focus();break;case"img":B.src&&(l.src=B.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var K=s.alternate;if(K!==null){var se=K.memoizedState;if(se!==null){var oe=se.dehydrated;oe!==null&&Vs(oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Mt||s.flags&512&&mh(s)}catch(re){ot(s,s.return,re)}}if(s===n){ye=null;break}if(l=s.sibling,l!==null){l.return=s.return,ye=l;break}ye=s.return}}function cm(n){for(;ye!==null;){var s=ye;if(s===n){ye=null;break}var l=s.sibling;if(l!==null){l.return=s.return,ye=l;break}ye=s.return}}function dm(n){for(;ye!==null;){var s=ye;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{ka(4,s)}catch(B){ot(s,l,B)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var g=s.return;try{d.componentDidMount()}catch(B){ot(s,g,B)}}var _=s.return;try{mh(s)}catch(B){ot(s,_,B)}break;case 5:var S=s.return;try{mh(s)}catch(B){ot(s,S,B)}}}catch(B){ot(s,s.return,B)}if(s===n){ye=null;break}var D=s.sibling;if(D!==null){D.return=s.return,ye=D;break}ye=s.return}}var J0=Math.ceil,La=N.ReactCurrentDispatcher,vh=N.ReactCurrentOwner,nr=N.ReactCurrentBatchConfig,ze=0,_t=null,dt=null,St=0,qt=0,ss=Rn(0),mt=0,fo=null,li=0,Da=0,_h=0,po=null,zt=null,xh=0,os=1/0,an=null,Oa=!1,wh=null,On=null,Ba=!1,Bn=null,Fa=0,mo=0,Eh=null,Na=-1,Ua=0;function Ot(){return(ze&6)!==0?lt():Na!==-1?Na:Na=lt()}function Fn(n){return(n.mode&1)===0?1:(ze&2)!==0&&St!==0?St&-St:B0.transition!==null?(Ua===0&&(Ua=sf()),Ua):(n=Xe,n!==0||(n=window.event,n=n===void 0?16:pf(n.type)),n)}function vr(n,s,l,d){if(50<mo)throw mo=0,Eh=null,Error(t(185));Ns(n,l,d),((ze&2)===0||n!==_t)&&(n===_t&&((ze&2)===0&&(Da|=l),mt===4&&Nn(n,St)),Vt(n,d),l===1&&ze===0&&(s.mode&1)===0&&(os=lt()+500,fa&&Mn()))}function Vt(n,s){var l=n.callbackNode;B_(n,s);var d=Yo(n,n===_t?St:0);if(d===0)l!==null&&Bs(l),n.callbackNode=null,n.callbackPriority=0;else if(s=d&-d,n.callbackPriority!==s){if(l!=null&&Bs(l),s===1)n.tag===0?O0(pm.bind(null,n)):Jf(pm.bind(null,n)),M0(function(){(ze&6)===0&&Mn()}),l=null;else{switch(of(d)){case 1:l=tu;break;case 4:l=rf;break;case 16:l=$o;break;case 536870912:l=nf;break;default:l=$o}l=Em(l,fm.bind(null,n))}n.callbackPriority=s,n.callbackNode=l}}function fm(n,s){if(Na=-1,Ua=0,(ze&6)!==0)throw Error(t(327));var l=n.callbackNode;if(as()&&n.callbackNode!==l)return null;var d=Yo(n,n===_t?St:0);if(d===0)return null;if((d&30)!==0||(d&n.expiredLanes)!==0||s)s=Ga(n,d);else{s=d;var g=ze;ze|=2;var _=gm();(_t!==n||St!==s)&&(an=null,os=lt()+500,hi(n,s));do try{rx();break}catch(D){mm(n,D)}while(!0);Gu(),La.current=_,ze=g,dt!==null?s=0:(_t=null,St=0,s=mt)}if(s!==0){if(s===2&&(g=ru(n),g!==0&&(d=g,s=Th(n,g))),s===1)throw l=fo,hi(n,0),Nn(n,d),Vt(n,lt()),l;if(s===6)Nn(n,d);else{if(g=n.current.alternate,(d&30)===0&&!ex(g)&&(s=Ga(n,d),s===2&&(_=ru(n),_!==0&&(d=_,s=Th(n,_))),s===1))throw l=fo,hi(n,0),Nn(n,d),Vt(n,lt()),l;switch(n.finishedWork=g,n.finishedLanes=d,s){case 0:case 1:throw Error(t(345));case 2:ci(n,zt,an);break;case 3:if(Nn(n,d),(d&130023424)===d&&(s=xh+500-lt(),10<s)){if(Yo(n,0)!==0)break;if(g=n.suspendedLanes,(g&d)!==d){Ot(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=Ru(ci.bind(null,n,zt,an),s);break}ci(n,zt,an);break;case 4:if(Nn(n,d),(d&4194240)===d)break;for(s=n.eventTimes,g=-1;0<d;){var S=31-dr(d);_=1<<S,S=s[S],S>g&&(g=S),d&=~_}if(d=g,d=lt()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*J0(d/1960))-d,10<d){n.timeoutHandle=Ru(ci.bind(null,n,zt,an),d);break}ci(n,zt,an);break;case 5:ci(n,zt,an);break;default:throw Error(t(329))}}}return Vt(n,lt()),n.callbackNode===l?fm.bind(null,n):null}function Th(n,s){var l=po;return n.current.memoizedState.isDehydrated&&(hi(n,s).flags|=256),n=Ga(n,s),n!==2&&(s=zt,zt=l,s!==null&&Sh(s)),n}function Sh(n){zt===null?zt=n:zt.push.apply(zt,n)}function ex(n){for(var s=n;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var g=l[d],_=g.getSnapshot;g=g.value;try{if(!fr(_(),g))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Nn(n,s){for(s&=~_h,s&=~Da,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var l=31-dr(s),d=1<<l;n[l]=-1,s&=~d}}function pm(n){if((ze&6)!==0)throw Error(t(327));as();var s=Yo(n,0);if((s&1)===0)return Vt(n,lt()),null;var l=Ga(n,s);if(n.tag!==0&&l===2){var d=ru(n);d!==0&&(s=d,l=Th(n,d))}if(l===1)throw l=fo,hi(n,0),Nn(n,s),Vt(n,lt()),l;if(l===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ci(n,zt,an),Vt(n,lt()),null}function Ah(n,s){var l=ze;ze|=1;try{return n(s)}finally{ze=l,ze===0&&(os=lt()+500,fa&&Mn())}}function ui(n){Bn!==null&&Bn.tag===0&&(ze&6)===0&&as();var s=ze;ze|=1;var l=nr.transition,d=Xe;try{if(nr.transition=null,Xe=1,n)return n()}finally{Xe=d,nr.transition=l,ze=s,(ze&6)===0&&Mn()}}function bh(){qt=ss.current,Qe(ss)}function hi(n,s){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,P0(l)),dt!==null)for(l=dt.return;l!==null;){var d=l;switch(Ou(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&ca();break;case 3:rs(),Qe(Ut),Qe(It),Yu();break;case 5:ju(d);break;case 4:rs();break;case 13:Qe(tt);break;case 19:Qe(tt);break;case 10:Hu(d.type._context);break;case 22:case 23:bh()}l=l.return}if(_t=n,dt=n=Un(n.current,null),St=qt=s,mt=0,fo=null,_h=Da=li=0,zt=po=null,si!==null){for(s=0;s<si.length;s++)if(l=si[s],d=l.interleaved,d!==null){l.interleaved=null;var g=d.next,_=l.pending;if(_!==null){var S=_.next;_.next=g,d.next=S}l.pending=d}si=null}return n}function mm(n,s){do{var l=dt;try{if(Gu(),Ta.current=Ca,Sa){for(var d=rt.memoizedState;d!==null;){var g=d.queue;g!==null&&(g.pending=null),d=d.next}Sa=!1}if(ai=0,vt=pt=rt=null,oo=!1,ao=0,vh.current=null,l===null||l.return===null){mt=1,fo=s,dt=null;break}e:{var _=n,S=l.return,D=l,B=s;if(s=St,D.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var K=B,se=D,oe=se.tag;if((se.mode&1)===0&&(oe===0||oe===11||oe===15)){var re=se.alternate;re?(se.updateQueue=re.updateQueue,se.memoizedState=re.memoizedState,se.lanes=re.lanes):(se.updateQueue=null,se.memoizedState=null)}var pe=Gp(S);if(pe!==null){pe.flags&=-257,Hp(pe,S,D,_,s),pe.mode&1&&Up(_,K,s),s=pe,B=K;var _e=s.updateQueue;if(_e===null){var we=new Set;we.add(B),s.updateQueue=we}else _e.add(B);break e}else{if((s&1)===0){Up(_,K,s),Ch();break e}B=Error(t(426))}}else if(et&&D.mode&1){var ut=Gp(S);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),Hp(ut,S,D,_,s),Nu(ns(B,D));break e}}_=B=ns(B,D),mt!==4&&(mt=2),po===null?po=[_]:po.push(_),_=S;do{switch(_.tag){case 3:_.flags|=65536,s&=-s,_.lanes|=s;var W=Fp(_,B,s);hp(_,W);break e;case 1:D=B;var G=_.type,X=_.stateNode;if((_.flags&128)===0&&(typeof G.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(On===null||!On.has(X)))){_.flags|=65536,s&=-s,_.lanes|=s;var he=Np(_,D,s);hp(_,he);break e}}_=_.return}while(_!==null)}vm(l)}catch(be){s=be,dt===l&&l!==null&&(dt=l=l.return);continue}break}while(!0)}function gm(){var n=La.current;return La.current=Ca,n===null?Ca:n}function Ch(){(mt===0||mt===3||mt===2)&&(mt=4),_t===null||(li&268435455)===0&&(Da&268435455)===0||Nn(_t,St)}function Ga(n,s){var l=ze;ze|=2;var d=gm();(_t!==n||St!==s)&&(an=null,hi(n,s));do try{tx();break}catch(g){mm(n,g)}while(!0);if(Gu(),ze=l,La.current=d,dt!==null)throw Error(t(261));return _t=null,St=0,mt}function tx(){for(;dt!==null;)ym(dt)}function rx(){for(;dt!==null&&!C_();)ym(dt)}function ym(n){var s=wm(n.alternate,n,qt);n.memoizedProps=n.pendingProps,s===null?vm(n):dt=s,vh.current=null}function vm(n){var s=n;do{var l=s.alternate;if(n=s.return,(s.flags&32768)===0){if(l=Y0(l,s,qt),l!==null){dt=l;return}}else{if(l=q0(l,s),l!==null){l.flags&=32767,dt=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{mt=6,dt=null;return}}if(s=s.sibling,s!==null){dt=s;return}dt=s=n}while(s!==null);mt===0&&(mt=5)}function ci(n,s,l){var d=Xe,g=nr.transition;try{nr.transition=null,Xe=1,nx(n,s,l,d)}finally{nr.transition=g,Xe=d}return null}function nx(n,s,l,d){do as();while(Bn!==null);if((ze&6)!==0)throw Error(t(327));l=n.finishedWork;var g=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var _=l.lanes|l.childLanes;if(F_(n,_),n===_t&&(dt=_t=null,St=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Ba||(Ba=!0,Em($o,function(){return as(),null})),_=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||_){_=nr.transition,nr.transition=null;var S=Xe;Xe=1;var D=ze;ze|=4,vh.current=null,Q0(n,l),lm(l,n),T0(Cu),Qo=!!bu,Cu=bu=null,n.current=l,Z0(l),I_(),ze=D,Xe=S,nr.transition=_}else n.current=l;if(Ba&&(Ba=!1,Bn=n,Fa=g),_=n.pendingLanes,_===0&&(On=null),M_(l.stateNode),Vt(n,lt()),s!==null)for(d=n.onRecoverableError,l=0;l<s.length;l++)g=s[l],d(g.value,{componentStack:g.stack,digest:g.digest});if(Oa)throw Oa=!1,n=wh,wh=null,n;return(Fa&1)!==0&&n.tag!==0&&as(),_=n.pendingLanes,(_&1)!==0?n===Eh?mo++:(mo=0,Eh=n):mo=0,Mn(),null}function as(){if(Bn!==null){var n=of(Fa),s=nr.transition,l=Xe;try{if(nr.transition=null,Xe=16>n?16:n,Bn===null)var d=!1;else{if(n=Bn,Bn=null,Fa=0,(ze&6)!==0)throw Error(t(331));var g=ze;for(ze|=4,ye=n.current;ye!==null;){var _=ye,S=_.child;if((ye.flags&16)!==0){var D=_.deletions;if(D!==null){for(var B=0;B<D.length;B++){var K=D[B];for(ye=K;ye!==null;){var se=ye;switch(se.tag){case 0:case 11:case 15:co(8,se,_)}var oe=se.child;if(oe!==null)oe.return=se,ye=oe;else for(;ye!==null;){se=ye;var re=se.sibling,pe=se.return;if(nm(se),se===K){ye=null;break}if(re!==null){re.return=pe,ye=re;break}ye=pe}}}var _e=_.alternate;if(_e!==null){var we=_e.child;if(we!==null){_e.child=null;do{var ut=we.sibling;we.sibling=null,we=ut}while(we!==null)}}ye=_}}if((_.subtreeFlags&2064)!==0&&S!==null)S.return=_,ye=S;else e:for(;ye!==null;){if(_=ye,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:co(9,_,_.return)}var W=_.sibling;if(W!==null){W.return=_.return,ye=W;break e}ye=_.return}}var G=n.current;for(ye=G;ye!==null;){S=ye;var X=S.child;if((S.subtreeFlags&2064)!==0&&X!==null)X.return=S,ye=X;else e:for(S=G;ye!==null;){if(D=ye,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:ka(9,D)}}catch(be){ot(D,D.return,be)}if(D===S){ye=null;break e}var he=D.sibling;if(he!==null){he.return=D.return,ye=he;break e}ye=D.return}}if(ze=g,Mn(),kr&&typeof kr.onPostCommitFiberRoot=="function")try{kr.onPostCommitFiberRoot(Wo,n)}catch{}d=!0}return d}finally{Xe=l,nr.transition=s}}return!1}function _m(n,s,l){s=ns(l,s),s=Fp(n,s,1),n=Ln(n,s,1),s=Ot(),n!==null&&(Ns(n,1,s),Vt(n,s))}function ot(n,s,l){if(n.tag===3)_m(n,n,l);else for(;s!==null;){if(s.tag===3){_m(s,n,l);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(On===null||!On.has(d))){n=ns(l,n),n=Np(s,n,1),s=Ln(s,n,1),n=Ot(),s!==null&&(Ns(s,1,n),Vt(s,n));break}}s=s.return}}function ix(n,s,l){var d=n.pingCache;d!==null&&d.delete(s),s=Ot(),n.pingedLanes|=n.suspendedLanes&l,_t===n&&(St&l)===l&&(mt===4||mt===3&&(St&130023424)===St&&500>lt()-xh?hi(n,0):_h|=l),Vt(n,s)}function xm(n,s){s===0&&((n.mode&1)===0?s=1:(s=Xo,Xo<<=1,(Xo&130023424)===0&&(Xo=4194304)));var l=Ot();n=nn(n,s),n!==null&&(Ns(n,s,l),Vt(n,l))}function sx(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),xm(n,l)}function ox(n,s){var l=0;switch(n.tag){case 13:var d=n.stateNode,g=n.memoizedState;g!==null&&(l=g.retryLane);break;case 19:d=n.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(s),xm(n,l)}var wm;wm=function(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps||Ut.current)Ht=!0;else{if((n.lanes&l)===0&&(s.flags&128)===0)return Ht=!1,X0(n,s,l);Ht=(n.flags&131072)!==0}else Ht=!1,et&&(s.flags&1048576)!==0&&ep(s,ma,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;Pa(n,s),n=s.pendingProps;var g=qi(s,It.current);ts(s,l),g=Qu(null,s,d,n,g,l);var _=Zu();return s.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Gt(d)?(_=!0,da(s)):_=!1,s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,$u(s),g.updater=Ia,s.stateNode=g,g._reactInternals=s,ih(s,d,n,l),s=lh(null,s,d,!0,_,l)):(s.tag=0,et&&_&&Du(s),Dt(null,s,g,l),s=s.child),s;case 16:d=s.elementType;e:{switch(Pa(n,s),n=s.pendingProps,g=d._init,d=g(d._payload),s.type=d,g=s.tag=lx(d),n=mr(d,n),g){case 0:s=ah(null,s,d,n,l);break e;case 1:s=Xp(null,s,d,n,l);break e;case 11:s=zp(null,s,d,n,l);break e;case 14:s=Vp(null,s,d,mr(d.type,n),l);break e}throw Error(t(306,d,""))}return s;case 0:return d=s.type,g=s.pendingProps,g=s.elementType===d?g:mr(d,g),ah(n,s,d,g,l);case 1:return d=s.type,g=s.pendingProps,g=s.elementType===d?g:mr(d,g),Xp(n,s,d,g,l);case 3:e:{if(Yp(s),n===null)throw Error(t(387));d=s.pendingProps,_=s.memoizedState,g=_.element,up(n,s),wa(s,d,null,l);var S=s.memoizedState;if(d=S.element,_.isDehydrated)if(_={element:d,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){g=ns(Error(t(423)),s),s=qp(n,s,d,l,g);break e}else if(d!==g){g=ns(Error(t(424)),s),s=qp(n,s,d,l,g);break e}else for(Yt=In(s.stateNode.containerInfo.firstChild),Xt=s,et=!0,pr=null,l=ap(s,null,d,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Zi(),d===g){s=on(n,s,l);break e}Dt(n,s,d,l)}s=s.child}return s;case 5:return dp(s),n===null&&Fu(s),d=s.type,g=s.pendingProps,_=n!==null?n.memoizedProps:null,S=g.children,Iu(d,g)?S=null:_!==null&&Iu(d,_)&&(s.flags|=32),jp(n,s),Dt(n,s,S,l),s.child;case 6:return n===null&&Fu(s),null;case 13:return Kp(n,s,l);case 4:return Wu(s,s.stateNode.containerInfo),d=s.pendingProps,n===null?s.child=Ji(s,null,d,l):Dt(n,s,d,l),s.child;case 11:return d=s.type,g=s.pendingProps,g=s.elementType===d?g:mr(d,g),zp(n,s,d,g,l);case 7:return Dt(n,s,s.pendingProps,l),s.child;case 8:return Dt(n,s,s.pendingProps.children,l),s.child;case 12:return Dt(n,s,s.pendingProps.children,l),s.child;case 10:e:{if(d=s.type._context,g=s.pendingProps,_=s.memoizedProps,S=g.value,Ye(va,d._currentValue),d._currentValue=S,_!==null)if(fr(_.value,S)){if(_.children===g.children&&!Ut.current){s=on(n,s,l);break e}}else for(_=s.child,_!==null&&(_.return=s);_!==null;){var D=_.dependencies;if(D!==null){S=_.child;for(var B=D.firstContext;B!==null;){if(B.context===d){if(_.tag===1){B=sn(-1,l&-l),B.tag=2;var K=_.updateQueue;if(K!==null){K=K.shared;var se=K.pending;se===null?B.next=B:(B.next=se.next,se.next=B),K.pending=B}}_.lanes|=l,B=_.alternate,B!==null&&(B.lanes|=l),zu(_.return,l,s),D.lanes|=l;break}B=B.next}}else if(_.tag===10)S=_.type===s.type?null:_.child;else if(_.tag===18){if(S=_.return,S===null)throw Error(t(341));S.lanes|=l,D=S.alternate,D!==null&&(D.lanes|=l),zu(S,l,s),S=_.sibling}else S=_.child;if(S!==null)S.return=_;else for(S=_;S!==null;){if(S===s){S=null;break}if(_=S.sibling,_!==null){_.return=S.return,S=_;break}S=S.return}_=S}Dt(n,s,g.children,l),s=s.child}return s;case 9:return g=s.type,d=s.pendingProps.children,ts(s,l),g=tr(g),d=d(g),s.flags|=1,Dt(n,s,d,l),s.child;case 14:return d=s.type,g=mr(d,s.pendingProps),g=mr(d.type,g),Vp(n,s,d,g,l);case 15:return $p(n,s,s.type,s.pendingProps,l);case 17:return d=s.type,g=s.pendingProps,g=s.elementType===d?g:mr(d,g),Pa(n,s),s.tag=1,Gt(d)?(n=!0,da(s)):n=!1,ts(s,l),Op(s,d,g),ih(s,d,g,l),lh(null,s,d,!0,n,l);case 19:return Zp(n,s,l);case 22:return Wp(n,s,l)}throw Error(t(156,s.tag))};function Em(n,s){return Vo(n,s)}function ax(n,s,l,d){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(n,s,l,d){return new ax(n,s,l,d)}function Ih(n){return n=n.prototype,!(!n||!n.isReactComponent)}function lx(n){if(typeof n=="function")return Ih(n)?1:0;if(n!=null){if(n=n.$$typeof,n===z)return 11;if(n===ce)return 14}return 2}function Un(n,s){var l=n.alternate;return l===null?(l=ir(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function Ha(n,s,l,d,g,_){var S=2;if(d=n,typeof n=="function")Ih(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case b:return di(l.children,g,_,s);case U:S=8,g|=8;break;case $:return n=ir(12,l,s,g|2),n.elementType=$,n.lanes=_,n;case Y:return n=ir(13,l,s,g),n.elementType=Y,n.lanes=_,n;case j:return n=ir(19,l,s,g),n.elementType=j,n.lanes=_,n;case P:return za(l,g,_,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ee:S=10;break e;case Z:S=9;break e;case z:S=11;break e;case ce:S=14;break e;case I:S=16,d=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=ir(S,l,s,g),s.elementType=n,s.type=d,s.lanes=_,s}function di(n,s,l,d){return n=ir(7,n,d,s),n.lanes=l,n}function za(n,s,l,d){return n=ir(22,n,d,s),n.elementType=P,n.lanes=l,n.stateNode={isHidden:!1},n}function Rh(n,s,l){return n=ir(6,n,null,s),n.lanes=l,n}function Ph(n,s,l){return s=ir(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function ux(n,s,l,d,g){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nu(0),this.expirationTimes=nu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nu(0),this.identifierPrefix=d,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Mh(n,s,l,d,g,_,S,D,B){return n=new ux(n,s,l,D,B),s===1?(s=1,_===!0&&(s|=8)):s=0,_=ir(3,null,null,s),n.current=_,_.stateNode=n,_.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},$u(_),n}function hx(n,s,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:d==null?null:""+d,children:n,containerInfo:s,implementation:l}}function Tm(n){if(!n)return Pn;n=n._reactInternals;e:{if(cr(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Gt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var l=n.type;if(Gt(l))return Qf(n,l,s)}return s}function Sm(n,s,l,d,g,_,S,D,B){return n=Mh(l,d,!0,n,g,_,S,D,B),n.context=Tm(null),l=n.current,d=Ot(),g=Fn(l),_=sn(d,g),_.callback=s??null,Ln(l,_,g),n.current.lanes=g,Ns(n,g,d),Vt(n,d),n}function Va(n,s,l,d){var g=s.current,_=Ot(),S=Fn(g);return l=Tm(l),s.context===null?s.context=l:s.pendingContext=l,s=sn(_,S),s.payload={element:n},d=d===void 0?null:d,d!==null&&(s.callback=d),n=Ln(g,s,S),n!==null&&(vr(n,g,S,_),xa(n,g,S)),S}function $a(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function Am(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function kh(n,s){Am(n,s),(n=n.alternate)&&Am(n,s)}function cx(){return null}var bm=typeof reportError=="function"?reportError:function(n){console.error(n)};function Lh(n){this._internalRoot=n}Wa.prototype.render=Lh.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Va(n,s,null,null)},Wa.prototype.unmount=Lh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ui(function(){Va(null,n,null,null)}),s[Jr]=null}};function Wa(n){this._internalRoot=n}Wa.prototype.unstable_scheduleHydration=function(n){if(n){var s=uf();n={blockedOn:null,target:n,priority:s};for(var l=0;l<An.length&&s!==0&&s<An[l].priority;l++);An.splice(l,0,n),l===0&&df(n)}};function Dh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ja(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Cm(){}function dx(n,s,l,d,g){if(g){if(typeof d=="function"){var _=d;d=function(){var K=$a(S);_.call(K)}}var S=Sm(s,d,n,0,null,!1,!1,"",Cm);return n._reactRootContainer=S,n[Jr]=S.current,Zs(n.nodeType===8?n.parentNode:n),ui(),S}for(;g=n.lastChild;)n.removeChild(g);if(typeof d=="function"){var D=d;d=function(){var K=$a(B);D.call(K)}}var B=Mh(n,0,!1,null,null,!1,!1,"",Cm);return n._reactRootContainer=B,n[Jr]=B.current,Zs(n.nodeType===8?n.parentNode:n),ui(function(){Va(s,B,l,d)}),B}function Xa(n,s,l,d,g){var _=l._reactRootContainer;if(_){var S=_;if(typeof g=="function"){var D=g;g=function(){var B=$a(S);D.call(B)}}Va(s,S,n,g)}else S=dx(l,s,n,g,d);return $a(S)}af=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var l=Fs(s.pendingLanes);l!==0&&(iu(s,l|1),Vt(s,lt()),(ze&6)===0&&(os=lt()+500,Mn()))}break;case 13:ui(function(){var d=nn(n,1);if(d!==null){var g=Ot();vr(d,n,1,g)}}),kh(n,1)}},su=function(n){if(n.tag===13){var s=nn(n,134217728);if(s!==null){var l=Ot();vr(s,n,134217728,l)}kh(n,134217728)}},lf=function(n){if(n.tag===13){var s=Fn(n),l=nn(n,s);if(l!==null){var d=Ot();vr(l,n,s,d)}kh(n,s)}},uf=function(){return Xe},hf=function(n,s){var l=Xe;try{return Xe=n,s()}finally{Xe=l}},je=function(n,s,l){switch(s){case"input":if(qe(n,l),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var d=l[s];if(d!==n&&d.form===n.form){var g=ha(d);if(!g)throw Error(t(90));Se(d),qe(d,g)}}}break;case"textarea":qr(n,l);break;case"select":s=l.value,s!=null&&yt(n,!!l.multiple,s,!1)}},Fi=Ah,Qr=ui;var fx={usingClientEntryPoint:!1,Events:[to,Xi,ha,Ct,ur,Ah]},go={findFiberByHostInstance:ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},px={bundleType:go.bundleType,version:go.version,rendererPackageName:go.rendererPackageName,rendererConfig:go.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Zr(n),n===null?null:n.stateNode},findFiberByHostInstance:go.findFiberByHostInstance||cx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ya.isDisabled&&Ya.supportsFiber)try{Wo=Ya.inject(px),kr=Ya}catch{}}return $t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fx,$t.createPortal=function(n,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dh(s))throw Error(t(200));return hx(n,s,null,l)},$t.createRoot=function(n,s){if(!Dh(n))throw Error(t(299));var l=!1,d="",g=bm;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),s=Mh(n,1,!1,null,null,l,!1,d,g),n[Jr]=s.current,Zs(n.nodeType===8?n.parentNode:n),new Lh(s)},$t.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Zr(s),n=n===null?null:n.stateNode,n},$t.flushSync=function(n){return ui(n)},$t.hydrate=function(n,s,l){if(!ja(s))throw Error(t(200));return Xa(null,n,s,!0,l)},$t.hydrateRoot=function(n,s,l){if(!Dh(n))throw Error(t(405));var d=l!=null&&l.hydratedSources||null,g=!1,_="",S=bm;if(l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(_=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),s=Sm(s,null,n,1,l??null,g,!1,_,S),n[Jr]=s.current,Zs(n),d)for(n=0;n<d.length;n++)l=d[n],g=l._getVersion,g=g(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,g]:s.mutableSourceEagerHydrationData.push(l,g);return new Wa(s)},$t.render=function(n,s,l){if(!ja(s))throw Error(t(200));return Xa(null,n,s,!1,l)},$t.unmountComponentAtNode=function(n){if(!ja(n))throw Error(t(40));return n._reactRootContainer?(ui(function(){Xa(null,null,n,!1,function(){n._reactRootContainer=null,n[Jr]=null})}),!0):!1},$t.unstable_batchedUpdates=Ah,$t.unstable_renderSubtreeIntoContainer=function(n,s,l,d){if(!ja(l))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Xa(n,s,l,!1,d)},$t.version="18.3.1-next-f1338f8080-20240426",$t}var Om;function Tx(){if(Om)return Fh.exports;Om=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Fh.exports=Ex(),Fh.exports}var Bm;function Sx(){if(Bm)return qa;Bm=1;var i=Tx();return qa.createRoot=i.createRoot,qa.hydrateRoot=i.hydrateRoot,qa}var Ax=Sx();const bx=Vl(Ax);function Cx(i){return new Worker("/LuckyRepo/assets/logic.worker-Da2ij2er.js",{type:"module",name:i?.name})}function Ix(i){return new Worker("/LuckyRepo/assets/view.worker-Cz0wtAL7.js",{type:"module",name:i?.name})}class Ti{static instance;worker;sharedBuffers=new Map;sharedViews=new Map;isInitialized=!1;activeStateName=null;activeInstanceId=null;constructor(){this.worker=new Ix,this.worker.onerror=e=>console.error("View Worker Error:",e),this.worker.onmessage=e=>{e.data.type==="REQUEST_RESIZE_OUTPUT"&&this.resizeOutputBuffer(e.data.payload.bufferName,e.data.payload.newSize)}}static getInstance(){return Ti.instance||(Ti.instance=new Ti),Ti.instance}updateInputBuffer(e,t){this.worker.postMessage({type:"UPDATE_BUFFER",payload:{name:e,buffer:t,isInput:!0}})}resizeOutputBuffer(e,t){const r=this.sharedViews.get(e),o=t*4,a=new SharedArrayBuffer(o),u=new Float32Array(a);r&&u.set(r),this.sharedBuffers.set(e,a),this.sharedViews.set(e,u),this.worker.postMessage({type:"UPDATE_BUFFER",payload:{name:e,buffer:a,isInput:!1}})}setupBuffers(e,t){this.isInitialized=!1,this.sharedBuffers.clear(),this.sharedViews.clear();const r="BUFFER_SIZE"in t?{main:t}:t,o={};Object.entries(r).forEach(([a,u])=>{const c=u.BUFFER_SIZE*4,f=new SharedArrayBuffer(c);this.sharedBuffers.set(a,f),this.sharedViews.set(a,new Float32Array(f)),o[a]=f}),this.worker.postMessage({type:"INIT_SABS",payload:{inputBuffers:e,outputBuffers:o}}),this.isInitialized=!0}prepareForState(e){const t=crypto.randomUUID();return this.activeStateName!==e&&(this.isInitialized=!1),this.activeInstanceId=t,this.activeStateName=e,t}createState(e){this.worker.postMessage({type:"CREATE_STATE",stateName:e})}terminateState(e,t){t&&t!==this.activeInstanceId||(this.activeStateName===e&&(this.activeStateName=null,this.activeInstanceId=null,this.isInitialized=!1),this.worker.postMessage({type:"TERMINATE_STATE",stateName:e}))}tick(e,t,r){!this.isInitialized||this.sharedViews.size===0||e!==this.activeStateName||this.worker.postMessage({type:"TICK",stateName:e,dt:t,frameCount:r})}forceClearWorker(){this.isInitialized=!1,this.activeStateName=null,this.activeInstanceId=null,this.worker.postMessage({type:"TERMINATE_ALL"})}sendInput(e,t,r={}){this.worker.postMessage({type:"INPUT",stateName:e,payload:{action:t,...r}})}loadSnapshot(e,t){this.worker.postMessage({type:"INPUT",stateName:e,payload:{action:"LOAD_SNAPSHOT",data:t}})}}let Rx=class Eo{static instance;logic;buffers=new Map;views=new Map;isInitialized=!1;activeStateName=null;activeInstanceId=null;constructor(){if(this.logic=new Cx,typeof SharedArrayBuffer>"u")throw new Error("COOP/COEP headers missing for SharedArrayBuffer.");this.logic.onerror=e=>console.error("Logic Worker Error:",e),this.logic.onmessage=e=>{e.data.type==="REQUEST_RESIZE"&&this.resizeBuffer(e.data.payload.bufferName,e.data.payload.newSize)}}static getInstance(){return Eo.instance||(Eo.instance=new Eo),Eo.instance}setupBuffers(e,t=!1){this.isInitialized=!1,this.buffers.clear(),this.views.clear();const r="BUFFER_SIZE"in e?{main:e}:e,o={};Object.entries(r).forEach(([a,u])=>{const c=u.BUFFER_SIZE*4,f=new SharedArrayBuffer(c);t&&new Float32Array(f).fill(0),this.buffers.set(a,f),this.views.set(a,new Float32Array(f)),o[a]=f}),this.logic.postMessage({type:"INIT_SABS",payload:{buffers:o}}),this.isInitialized=!0}resizeBuffer(e,t){const r=this.views.get(e),o=t*4,a=new SharedArrayBuffer(o),u=new Float32Array(a);r&&u.set(r),this.buffers.set(e,a),this.views.set(e,u),this.logic.postMessage({type:"UPDATE_BUFFER",payload:{name:e,buffer:a}}),Ti.getInstance().updateInputBuffer(e,a)}getBuffers(){const e={};return this.buffers.forEach((t,r)=>e[r]=t),e}prepareForState(e){const t=crypto.randomUUID();return this.activeStateName!==e&&(this.isInitialized=!1),this.activeInstanceId=t,this.activeStateName=e,t}createState(e,t=!1){this.logic.postMessage({type:"CREATE_STATE",stateName:e,payload:{force:t}})}terminateState(e,t){t&&t!==this.activeInstanceId||(this.activeStateName===e&&(this.activeStateName=null,this.activeInstanceId=null,this.isInitialized=!1),this.logic.postMessage({type:"TERMINATE_STATE",stateName:e}))}sendInput(e,t,r={}){this.logic.postMessage({type:"INPUT",stateName:e,payload:{action:t,...r}})}tick(e,t,r){!this.isInitialized||this.views.size===0||e!==this.activeStateName||this.logic.postMessage({type:"TICK",stateName:e,frameCount:t,fps:r})}forceClearWorker(){this.isInitialized=!1,this.activeStateName=null,this.activeInstanceId=null,this.logic.postMessage({type:"TERMINATE_ALL"})}};class Bt{static instance;data=new Map;isWriteLocked=!1;STORAGE_KEY="engine_settings_global";PERSISTENT_KEYS=["resolution","master_volume","ost_volume","sfx_volume"];SAVABLE_KEYS=["global_hp","global_energy","campaign_id","campaign_step_index"];constructor(){this.data.set("master_volume",.5),this.data.set("ost_volume",.5),this.data.set("sfx_volume",.5),this.data.set("resolution","1080p"),this.loadFromLocalStorage()}static getInstance(){return Bt.instance||(Bt.instance=new Bt),Bt.instance}exportSaveData(){const e={};return this.SAVABLE_KEYS.forEach(t=>{this.data.has(t)&&(e[t]=this.data.get(t))}),e}importSaveData(e){this.SAVABLE_KEYS.forEach(t=>{e[t]!==void 0&&this.forceSet(t,e[t])})}set(e,t){if(this.isWriteLocked&&this.SAVABLE_KEYS.includes(e)){console.warn(`[SharedSession] Blocked stale write to ${e} during lock.`);return}this.data.set(e,t),(this.PERSISTENT_KEYS.includes(e)||e.startsWith("bind_"))&&this.saveToLocalStorage()}get(e,t){return this.data.has(e)?this.data.get(e):t}clearSavableKeys(){this.SAVABLE_KEYS.forEach(e=>{this.data.delete(e)})}forceSet(e,t){this.data.set(e,t)}lockForLoad(){this.isWriteLocked=!0}unlock(){this.isWriteLocked=!1}loadFromLocalStorage(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(e){const t=JSON.parse(e);Object.entries(t).forEach(([r,o])=>{(this.PERSISTENT_KEYS.includes(r)||r.startsWith("bind_"))&&this.data.set(r,o)})}}catch(e){console.warn("[SharedSession] Persistence load failed",e)}}saveToLocalStorage(){const e={};this.data.forEach((t,r)=>{(this.PERSISTENT_KEYS.includes(r)||r.startsWith("bind_"))&&(e[r]=t)}),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}}const Px={Shared:{UI_BACK:{keys:["ESCAPE","BACKSPACE"],label:"Back"},PAUSE:{keys:["ESCAPE","P"],label:"Pause"},UI_UP:{keys:["W","ARROWUP"],label:"Menu Up"},UI_DOWN:{keys:["S","ARROWDOWN"],label:"Menu Down"},UI_ACCEPT:{keys:["ENTER"," ","E"],label:"Accept"}},Game1:{MOVE_UP:{keys:["W","ARROWUP"],label:"Move Up"},MOVE_DOWN:{keys:["S","ARROWDOWN"],label:"Move Down"},MOVE_LEFT:{keys:["A","ARROWLEFT"],label:"Move Left"},MOVE_RIGHT:{keys:["D","ARROWRIGHT"],label:"Move Right"}},Game2:{MOVE_UP:{keys:["G","H"],label:"Unused"}},BHGame:{MOVE_UP:{keys:["W","ARROWUP"],label:"Move Up"},MOVE_DOWN:{keys:["S","ARROWDOWN"],label:"Move Down"},MOVE_LEFT:{keys:["A","ARROWLEFT"],label:"Move Left"},MOVE_RIGHT:{keys:["D","ARROWRIGHT"],label:"Move Right"}},Game3:{MOVE_LEFT:{keys:["A","ARROWLEFT"],label:"Move Left"},MOVE_RIGHT:{keys:["D","ARROWRIGHT"],label:"Move Right"},MOVE_DOWN:{keys:["S","ARROWDOWN"],label:"Move Down"},JUMP:{keys:["W","ARROWUP"," "],label:"Jump"}}};class Si{static instance;mouseX=0;mouseY=0;isHoveringButton=!1;isMouseDown=!1;activeKeys=new Set;currentBindings=new Map;currentGame="Shared";constructor(){this.setupGlobalListeners(),this.refreshBindings("Shared")}static getInstance(){return Si.instance||(Si.instance=new Si),Si.instance}getSnapshot(){const e=[];return this.currentBindings.forEach((t,r)=>{t.some(o=>this.activeKeys.has(o))&&e.push(r)}),{isHoveringButton:this.isHoveringButton,isMouseDown:this.isMouseDown,mouseX:this.mouseX,mouseY:this.mouseY,actions:e}}reset(){this.activeKeys.clear(),this.isMouseDown=!1,this.isHoveringButton=!1}refreshBindings(e){this.currentGame=e;const t=Bt.getInstance(),r=u=>{const c={},f=Px[u]||{};for(const[m,v]of Object.entries(f))c[m]=v.keys;return c},o={...r("Shared"),...r(e)},a=t.get("bind_Shared");if(a&&Object.assign(o,a),e!=="Shared"){const u=t.get(`bind_${e}`);u&&Object.assign(o,u)}this.currentBindings=new Map(Object.entries(o))}isKeyAction(e,t){const r=this.currentBindings.get(t);return r?r.includes(e.toUpperCase()):!1}setBinding(e,t,r=this.currentGame,o=0){const a=Bt.getInstance(),u=`bind_${r}`,c=a.get(u)||{};if(!c[e]){const f=this.currentBindings.get(e)||[];c[e]=[...f]}c[e][o]=t.toUpperCase(),a.set(u,c),this.refreshBindings(this.currentGame)}resetBindings(e=this.currentGame){const t=Bt.getInstance(),r=`bind_${e}`;t.set(r,void 0),this.refreshBindings(this.currentGame)}setupGlobalListeners(){window.addEventListener("keydown",e=>this.activeKeys.add(e.key.toUpperCase())),window.addEventListener("keyup",e=>this.activeKeys.delete(e.key.toUpperCase())),window.addEventListener("mousemove",e=>{const t=window.innerWidth,r=window.innerHeight,o=16/9,a=t/r;let u,c,f=0,m=0;a>o?(c=r,u=r*o,f=(t-u)/2):(u=t,c=t/o,m=(r-c)/2);const v=(e.clientX-f)/u,h=(e.clientY-m)/c;this.mouseX=Math.max(0,Math.min(1,v)),this.mouseY=Math.max(0,Math.min(1,h))}),window.addEventListener("mousedown",()=>this.isMouseDown=!0),window.addEventListener("mouseup",()=>this.isMouseDown=!1),window.addEventListener("mouseover",e=>{const t=e.target;this.isHoveringButton=!!t.closest("button, .interactable")}),window.addEventListener("blur",()=>this.reset())}}class jn{static instance;TARGET_FPS=60;MS_PER_FRAME=1e3/this.TARGET_FPS;lastFrameTime=0;isRunning=!1;requestRef=0;frameCount=0;fps=0;lastFpsUpdate=0;framesSinceLastUpdate=0;constructor(){}static getInstance(){return jn.instance||(jn.instance=new jn),jn.instance}start(){this.isRunning||(this.isRunning=!0,this.lastFrameTime=performance.now(),this.lastFpsUpdate=performance.now(),Si.getInstance(),this.requestRef=requestAnimationFrame(this.loop),console.log("[Engine] Core Loop Started"))}stop(){this.isRunning=!1,cancelAnimationFrame(this.requestRef),console.log("[Engine] Core Loop Stopped")}loop=e=>{if(!this.isRunning)return;const t=e-this.lastFrameTime;if(t<this.MS_PER_FRAME){this.requestRef=requestAnimationFrame(this.loop);return}this.lastFrameTime=e-t%this.MS_PER_FRAME;const r=Zt.getInstance();if(r.stack.length===0){this.requestRef=requestAnimationFrame(this.loop);return}this.framesSinceLastUpdate++,e>this.lastFpsUpdate+1e3&&(this.fps=Math.round(this.framesSinceLastUpdate*1e3/(e-this.lastFpsUpdate)),this.lastFpsUpdate=e,this.framesSinceLastUpdate=0),this.dispatchLogicTick(r),this.dispatchViewTick(r,this.MS_PER_FRAME),r.updateAll(this.MS_PER_FRAME,this.frameCount),this.frameCount++,this.requestRef=requestAnimationFrame(this.loop)};dispatchLogicTick(e){const t=Rx.getInstance(),r=t.activeStateName;if(!r)return;const a=e.stack.find(f=>f.name===r);if(!a||!a.isUpdating)return;const c=Si.getInstance().getSnapshot();t.sendInput(r,"SYNC_INPUT",{actions:c.actions,mouseX:c.mouseX,mouseY:c.mouseY,isMouseDown:c.isMouseDown,isHovering:c.isHoveringButton}),t.tick(r,this.frameCount,this.fps||60)}dispatchViewTick(e,t){const r=Ti.getInstance(),o=r.activeStateName;if(!o)return;const u=e.stack.find(f=>f.name===o);if(!u||!u.isRendering)return;const c=u.isUpdating?t:0;r.tick(o,c,this.frameCount)}}let Mx=class{isUpdating=!1;isRendering=!1;priority=0;isInitialized=!1;update(e,t){}};const kx=({isFinished:i,onTransitionComplete:e})=>(at.useEffect(()=>{i&&e()},[i,e]),ct.jsx("div",{style:{position:"absolute",inset:0,background:"#000",display:"flex",alignItems:"center",justifyContent:"center"},children:ct.jsx("div",{style:{width:"100%",height:"100%",maxWidth:"calc(100vh * (16 / 9))",maxHeight:"calc(100vw * (9 / 16))",aspectRatio:"16 / 9",backgroundColor:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center"},children:ct.jsx("div",{style:{color:"#000",fontFamily:"monospace",fontWeight:"bold"},children:"LOADING..."})})}));var Mi=(i=>(i[i.WEBGL_LEGACY=0]="WEBGL_LEGACY",i[i.WEBGL=1]="WEBGL",i[i.WEBGL2=2]="WEBGL2",i))(Mi||{}),qy=(i=>(i[i.UNKNOWN=0]="UNKNOWN",i[i.WEBGL=1]="WEBGL",i[i.CANVAS=2]="CANVAS",i))(qy||{}),ad=(i=>(i[i.COLOR=16384]="COLOR",i[i.DEPTH=256]="DEPTH",i[i.STENCIL=1024]="STENCIL",i))(ad||{}),Me=(i=>(i[i.NORMAL=0]="NORMAL",i[i.ADD=1]="ADD",i[i.MULTIPLY=2]="MULTIPLY",i[i.SCREEN=3]="SCREEN",i[i.OVERLAY=4]="OVERLAY",i[i.DARKEN=5]="DARKEN",i[i.LIGHTEN=6]="LIGHTEN",i[i.COLOR_DODGE=7]="COLOR_DODGE",i[i.COLOR_BURN=8]="COLOR_BURN",i[i.HARD_LIGHT=9]="HARD_LIGHT",i[i.SOFT_LIGHT=10]="SOFT_LIGHT",i[i.DIFFERENCE=11]="DIFFERENCE",i[i.EXCLUSION=12]="EXCLUSION",i[i.HUE=13]="HUE",i[i.SATURATION=14]="SATURATION",i[i.COLOR=15]="COLOR",i[i.LUMINOSITY=16]="LUMINOSITY",i[i.NORMAL_NPM=17]="NORMAL_NPM",i[i.ADD_NPM=18]="ADD_NPM",i[i.SCREEN_NPM=19]="SCREEN_NPM",i[i.NONE=20]="NONE",i[i.SRC_OVER=0]="SRC_OVER",i[i.SRC_IN=21]="SRC_IN",i[i.SRC_OUT=22]="SRC_OUT",i[i.SRC_ATOP=23]="SRC_ATOP",i[i.DST_OVER=24]="DST_OVER",i[i.DST_IN=25]="DST_IN",i[i.DST_OUT=26]="DST_OUT",i[i.DST_ATOP=27]="DST_ATOP",i[i.ERASE=26]="ERASE",i[i.SUBTRACT=28]="SUBTRACT",i[i.XOR=29]="XOR",i))(Me||{}),Vr=(i=>(i[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN",i))(Vr||{}),ue=(i=>(i[i.RGBA=6408]="RGBA",i[i.RGB=6407]="RGB",i[i.RG=33319]="RG",i[i.RED=6403]="RED",i[i.RGBA_INTEGER=36249]="RGBA_INTEGER",i[i.RGB_INTEGER=36248]="RGB_INTEGER",i[i.RG_INTEGER=33320]="RG_INTEGER",i[i.RED_INTEGER=36244]="RED_INTEGER",i[i.ALPHA=6406]="ALPHA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL",i))(ue||{}),xs=(i=>(i[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",i))(xs||{}),Ie=(i=>(i[i.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",i[i.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",i[i.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",i[i.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",i[i.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",i[i.UNSIGNED_INT=5125]="UNSIGNED_INT",i[i.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",i[i.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",i[i.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",i[i.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",i[i.BYTE=5120]="BYTE",i[i.SHORT=5122]="SHORT",i[i.INT=5124]="INT",i[i.FLOAT=5126]="FLOAT",i[i.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",i[i.HALF_FLOAT=36193]="HALF_FLOAT",i))(Ie||{}),me=(i=>(i[i.FLOAT=0]="FLOAT",i[i.INT=1]="INT",i[i.UINT=2]="UINT",i))(me||{}),cn=(i=>(i[i.NEAREST=0]="NEAREST",i[i.LINEAR=1]="LINEAR",i))(cn||{}),Kn=(i=>(i[i.CLAMP=33071]="CLAMP",i[i.REPEAT=10497]="REPEAT",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",i))(Kn||{}),jr=(i=>(i[i.OFF=0]="OFF",i[i.POW2=1]="POW2",i[i.ON=2]="ON",i[i.ON_MANUAL=3]="ON_MANUAL",i))(jr||{}),Wt=(i=>(i[i.NPM=0]="NPM",i[i.UNPACK=1]="UNPACK",i[i.PMA=2]="PMA",i[i.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",i[i.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",i[i.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",i))(Wt||{}),zr=(i=>(i[i.NO=0]="NO",i[i.YES=1]="YES",i[i.AUTO=2]="AUTO",i[i.BLEND=0]="BLEND",i[i.CLEAR=1]="CLEAR",i[i.BLIT=2]="BLIT",i))(zr||{}),Wd=(i=>(i[i.AUTO=0]="AUTO",i[i.MANUAL=1]="MANUAL",i))(Wd||{}),ar=(i=>(i.LOW="lowp",i.MEDIUM="mediump",i.HIGH="highp",i))(ar||{}),gt=(i=>(i[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE",i[i.COLOR=4]="COLOR",i))(gt||{}),ft=(i=>(i[i.NONE=0]="NONE",i[i.LOW=2]="LOW",i[i.MEDIUM=4]="MEDIUM",i[i.HIGH=8]="HIGH",i))(ft||{}),$r=(i=>(i[i.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",i[i.ARRAY_BUFFER=34962]="ARRAY_BUFFER",i[i.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",i))($r||{});const Lx={createCanvas:(i,e)=>{const t=document.createElement("canvas");return t.width=i,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(i,e)=>fetch(i,e),parseXML:i=>new DOMParser().parseFromString(i,"text/xml")},ge={ADAPTER:Lx,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Gh=/iPhone/i,Fm=/iPod/i,Nm=/iPad/i,Um=/\biOS-universal(?:.+)Mac\b/i,Hh=/\bAndroid(?:.+)Mobile\b/i,Gm=/Android/i,ls=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Ka=/Silk/i,ln=/Windows Phone/i,Hm=/\bWindows(?:.+)ARM\b/i,zm=/BlackBerry/i,Vm=/BB10/i,$m=/Opera Mini/i,Wm=/\b(CriOS|Chrome)(?:.+)Mobile/i,jm=/Mobile(?:.+)Firefox\b/i,Xm=function(i){return typeof i<"u"&&i.platform==="MacIntel"&&typeof i.maxTouchPoints=="number"&&i.maxTouchPoints>1&&typeof MSStream>"u"};function Dx(i){return function(e){return e.test(i)}}function Ym(i){var e={userAgent:"",platform:"",maxTouchPoints:0};!i&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof i=="string"?e.userAgent=i:i&&i.userAgent&&(e={userAgent:i.userAgent,platform:i.platform,maxTouchPoints:i.maxTouchPoints||0});var t=e.userAgent,r=t.split("[FBAN");typeof r[1]<"u"&&(t=r[0]),r=t.split("Twitter"),typeof r[1]<"u"&&(t=r[0]);var o=Dx(t),a={apple:{phone:o(Gh)&&!o(ln),ipod:o(Fm),tablet:!o(Gh)&&(o(Nm)||Xm(e))&&!o(ln),universal:o(Um),device:(o(Gh)||o(Fm)||o(Nm)||o(Um)||Xm(e))&&!o(ln)},amazon:{phone:o(ls),tablet:!o(ls)&&o(Ka),device:o(ls)||o(Ka)},android:{phone:!o(ln)&&o(ls)||!o(ln)&&o(Hh),tablet:!o(ln)&&!o(ls)&&!o(Hh)&&(o(Ka)||o(Gm)),device:!o(ln)&&(o(ls)||o(Ka)||o(Hh)||o(Gm))||o(/\bokhttp\b/i)},windows:{phone:o(ln),tablet:o(Hm),device:o(ln)||o(Hm)},other:{blackberry:o(zm),blackberry10:o(Vm),opera:o($m),firefox:o(jm),chrome:o(Wm),device:o(zm)||o(Vm)||o($m)||o(jm)||o(Wm)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}const Ox=Ym.default??Ym,dn=Ox(globalThis.navigator);ge.RETINA_PREFIX=/@([0-9\.]+)x/;ge.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var zh={exports:{}},qm;function Bx(){return qm||(qm=1,(function(i){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function o(f,m,v){this.fn=f,this.context=m,this.once=v||!1}function a(f,m,v,h,p){if(typeof v!="function")throw new TypeError("The listener must be a function");var y=new o(v,h||f,p),x=t?t+m:m;return f._events[x]?f._events[x].fn?f._events[x]=[f._events[x],y]:f._events[x].push(y):(f._events[x]=y,f._eventsCount++),f}function u(f,m){--f._eventsCount===0?f._events=new r:delete f._events[m]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var m=[],v,h;if(this._eventsCount===0)return m;for(h in v=this._events)e.call(v,h)&&m.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(v)):m},c.prototype.listeners=function(m){var v=t?t+m:m,h=this._events[v];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,y=h.length,x=new Array(y);p<y;p++)x[p]=h[p].fn;return x},c.prototype.listenerCount=function(m){var v=t?t+m:m,h=this._events[v];return h?h.fn?1:h.length:0},c.prototype.emit=function(m,v,h,p,y,x){var w=t?t+m:m;if(!this._events[w])return!1;var E=this._events[w],T=arguments.length,k,R;if(E.fn){switch(E.once&&this.removeListener(m,E.fn,void 0,!0),T){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,v),!0;case 3:return E.fn.call(E.context,v,h),!0;case 4:return E.fn.call(E.context,v,h,p),!0;case 5:return E.fn.call(E.context,v,h,p,y),!0;case 6:return E.fn.call(E.context,v,h,p,y,x),!0}for(R=1,k=new Array(T-1);R<T;R++)k[R-1]=arguments[R];E.fn.apply(E.context,k)}else{var N=E.length,L;for(R=0;R<N;R++)switch(E[R].once&&this.removeListener(m,E[R].fn,void 0,!0),T){case 1:E[R].fn.call(E[R].context);break;case 2:E[R].fn.call(E[R].context,v);break;case 3:E[R].fn.call(E[R].context,v,h);break;case 4:E[R].fn.call(E[R].context,v,h,p);break;default:if(!k)for(L=1,k=new Array(T-1);L<T;L++)k[L-1]=arguments[L];E[R].fn.apply(E[R].context,k)}}return!0},c.prototype.on=function(m,v,h){return a(this,m,v,h,!1)},c.prototype.once=function(m,v,h){return a(this,m,v,h,!0)},c.prototype.removeListener=function(m,v,h,p){var y=t?t+m:m;if(!this._events[y])return this;if(!v)return u(this,y),this;var x=this._events[y];if(x.fn)x.fn===v&&(!p||x.once)&&(!h||x.context===h)&&u(this,y);else{for(var w=0,E=[],T=x.length;w<T;w++)(x[w].fn!==v||p&&!x[w].once||h&&x[w].context!==h)&&E.push(x[w]);E.length?this._events[y]=E.length===1?E[0]:E:u(this,y)}return this},c.prototype.removeAllListeners=function(m){var v;return m?(v=t?t+m:m,this._events[v]&&u(this,v)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,i.exports=c})(zh)),zh.exports}var Fx=Bx();const Do=Vl(Fx);var Qa={exports:{}},Km;function Nx(){if(Km)return Qa.exports;Km=1,Qa.exports=i,Qa.exports.default=i;function i(I,P,A){A=A||2;var F=P&&P.length,M=F?P[0]*A:I.length,C=e(I,0,M,A,!0),O=[];if(!C||C.next===C.prev)return O;var H,J,te,ne,ae,le,de;if(F&&(C=f(I,P,C,A)),I.length>80*A){H=te=I[0],J=ne=I[1];for(var ie=A;ie<M;ie+=A)ae=I[ie],le=I[ie+1],ae<H&&(H=ae),le<J&&(J=le),ae>te&&(te=ae),le>ne&&(ne=le);de=Math.max(te-H,ne-J),de=de!==0?32767/de:0}return r(C,O,A,H,J,de,0),O}function e(I,P,A,F,M){var C,O;if(M===ce(I,P,A,F)>0)for(C=P;C<A;C+=F)O=z(C,I[C],I[C+1],O);else for(C=A-F;C>=P;C-=F)O=z(C,I[C],I[C+1],O);return O&&N(O,O.next)&&(Y(O),O=O.next),O}function t(I,P){if(!I)return I;P||(P=I);var A=I,F;do if(F=!1,!A.steiner&&(N(A,A.next)||R(A.prev,A,A.next)===0)){if(Y(A),A=P=A.prev,A===A.next)break;F=!0}else A=A.next;while(F||A!==P);return P}function r(I,P,A,F,M,C,O){if(I){!O&&C&&y(I,F,M,C);for(var H=I,J,te;I.prev!==I.next;){if(J=I.prev,te=I.next,C?a(I,F,M,C):o(I)){P.push(J.i/A|0),P.push(I.i/A|0),P.push(te.i/A|0),Y(I),I=te.next,H=te.next;continue}if(I=te,I===H){O?O===1?(I=u(t(I),P,A),r(I,P,A,F,M,C,2)):O===2&&c(I,P,A,F,M,C):r(t(I),P,A,F,M,C,1);break}}}}function o(I){var P=I.prev,A=I,F=I.next;if(R(P,A,F)>=0)return!1;for(var M=P.x,C=A.x,O=F.x,H=P.y,J=A.y,te=F.y,ne=M<C?M<O?M:O:C<O?C:O,ae=H<J?H<te?H:te:J<te?J:te,le=M>C?M>O?M:O:C>O?C:O,de=H>J?H>te?H:te:J>te?J:te,ie=F.next;ie!==P;){if(ie.x>=ne&&ie.x<=le&&ie.y>=ae&&ie.y<=de&&T(M,H,C,J,O,te,ie.x,ie.y)&&R(ie.prev,ie,ie.next)>=0)return!1;ie=ie.next}return!0}function a(I,P,A,F){var M=I.prev,C=I,O=I.next;if(R(M,C,O)>=0)return!1;for(var H=M.x,J=C.x,te=O.x,ne=M.y,ae=C.y,le=O.y,de=H<J?H<te?H:te:J<te?J:te,ie=ne<ae?ne<le?ne:le:ae<le?ae:le,ve=H>J?H>te?H:te:J>te?J:te,Se=ne>ae?ne>le?ne:le:ae>le?ae:le,ke=w(de,ie,P,A,F),Fe=w(ve,Se,P,A,F),Ee=I.prevZ,Ae=I.nextZ;Ee&&Ee.z>=ke&&Ae&&Ae.z<=Fe;){if(Ee.x>=de&&Ee.x<=ve&&Ee.y>=ie&&Ee.y<=Se&&Ee!==M&&Ee!==O&&T(H,ne,J,ae,te,le,Ee.x,Ee.y)&&R(Ee.prev,Ee,Ee.next)>=0||(Ee=Ee.prevZ,Ae.x>=de&&Ae.x<=ve&&Ae.y>=ie&&Ae.y<=Se&&Ae!==M&&Ae!==O&&T(H,ne,J,ae,te,le,Ae.x,Ae.y)&&R(Ae.prev,Ae,Ae.next)>=0))return!1;Ae=Ae.nextZ}for(;Ee&&Ee.z>=ke;){if(Ee.x>=de&&Ee.x<=ve&&Ee.y>=ie&&Ee.y<=Se&&Ee!==M&&Ee!==O&&T(H,ne,J,ae,te,le,Ee.x,Ee.y)&&R(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.prevZ}for(;Ae&&Ae.z<=Fe;){if(Ae.x>=de&&Ae.x<=ve&&Ae.y>=ie&&Ae.y<=Se&&Ae!==M&&Ae!==O&&T(H,ne,J,ae,te,le,Ae.x,Ae.y)&&R(Ae.prev,Ae,Ae.next)>=0)return!1;Ae=Ae.nextZ}return!0}function u(I,P,A){var F=I;do{var M=F.prev,C=F.next.next;!N(M,C)&&L(M,F,F.next,C)&&$(M,C)&&$(C,M)&&(P.push(M.i/A|0),P.push(F.i/A|0),P.push(C.i/A|0),Y(F),Y(F.next),F=I=C),F=F.next}while(F!==I);return t(F)}function c(I,P,A,F,M,C){var O=I;do{for(var H=O.next.next;H!==O.prev;){if(O.i!==H.i&&k(O,H)){var J=Z(O,H);O=t(O,O.next),J=t(J,J.next),r(O,P,A,F,M,C,0),r(J,P,A,F,M,C,0);return}H=H.next}O=O.next}while(O!==I)}function f(I,P,A,F){var M=[],C,O,H,J,te;for(C=0,O=P.length;C<O;C++)H=P[C]*F,J=C<O-1?P[C+1]*F:I.length,te=e(I,H,J,F,!1),te===te.next&&(te.steiner=!0),M.push(E(te));for(M.sort(m),C=0;C<M.length;C++)A=v(M[C],A);return A}function m(I,P){return I.x-P.x}function v(I,P){var A=h(I,P);if(!A)return P;var F=Z(A,I);return t(F,F.next),t(A,A.next)}function h(I,P){var A=P,F=I.x,M=I.y,C=-1/0,O;do{if(M<=A.y&&M>=A.next.y&&A.next.y!==A.y){var H=A.x+(M-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(H<=F&&H>C&&(C=H,O=A.x<A.next.x?A:A.next,H===F))return O}A=A.next}while(A!==P);if(!O)return null;var J=O,te=O.x,ne=O.y,ae=1/0,le;A=O;do F>=A.x&&A.x>=te&&F!==A.x&&T(M<ne?F:C,M,te,ne,M<ne?C:F,M,A.x,A.y)&&(le=Math.abs(M-A.y)/(F-A.x),$(A,I)&&(le<ae||le===ae&&(A.x>O.x||A.x===O.x&&p(O,A)))&&(O=A,ae=le)),A=A.next;while(A!==J);return O}function p(I,P){return R(I.prev,I,P.prev)<0&&R(P.next,I,I.next)<0}function y(I,P,A,F){var M=I;do M.z===0&&(M.z=w(M.x,M.y,P,A,F)),M.prevZ=M.prev,M.nextZ=M.next,M=M.next;while(M!==I);M.prevZ.nextZ=null,M.prevZ=null,x(M)}function x(I){var P,A,F,M,C,O,H,J,te=1;do{for(A=I,I=null,C=null,O=0;A;){for(O++,F=A,H=0,P=0;P<te&&(H++,F=F.nextZ,!!F);P++);for(J=te;H>0||J>0&&F;)H!==0&&(J===0||!F||A.z<=F.z)?(M=A,A=A.nextZ,H--):(M=F,F=F.nextZ,J--),C?C.nextZ=M:I=M,M.prevZ=C,C=M;A=F}C.nextZ=null,te*=2}while(O>1);return I}function w(I,P,A,F,M){return I=(I-A)*M|0,P=(P-F)*M|0,I=(I|I<<8)&16711935,I=(I|I<<4)&252645135,I=(I|I<<2)&858993459,I=(I|I<<1)&1431655765,P=(P|P<<8)&16711935,P=(P|P<<4)&252645135,P=(P|P<<2)&858993459,P=(P|P<<1)&1431655765,I|P<<1}function E(I){var P=I,A=I;do(P.x<A.x||P.x===A.x&&P.y<A.y)&&(A=P),P=P.next;while(P!==I);return A}function T(I,P,A,F,M,C,O,H){return(M-O)*(P-H)>=(I-O)*(C-H)&&(I-O)*(F-H)>=(A-O)*(P-H)&&(A-O)*(C-H)>=(M-O)*(F-H)}function k(I,P){return I.next.i!==P.i&&I.prev.i!==P.i&&!U(I,P)&&($(I,P)&&$(P,I)&&ee(I,P)&&(R(I.prev,I,P.prev)||R(I,P.prev,P))||N(I,P)&&R(I.prev,I,I.next)>0&&R(P.prev,P,P.next)>0)}function R(I,P,A){return(P.y-I.y)*(A.x-P.x)-(P.x-I.x)*(A.y-P.y)}function N(I,P){return I.x===P.x&&I.y===P.y}function L(I,P,A,F){var M=b(R(I,P,A)),C=b(R(I,P,F)),O=b(R(A,F,I)),H=b(R(A,F,P));return!!(M!==C&&O!==H||M===0&&V(I,A,P)||C===0&&V(I,F,P)||O===0&&V(A,I,F)||H===0&&V(A,P,F))}function V(I,P,A){return P.x<=Math.max(I.x,A.x)&&P.x>=Math.min(I.x,A.x)&&P.y<=Math.max(I.y,A.y)&&P.y>=Math.min(I.y,A.y)}function b(I){return I>0?1:I<0?-1:0}function U(I,P){var A=I;do{if(A.i!==I.i&&A.next.i!==I.i&&A.i!==P.i&&A.next.i!==P.i&&L(A,A.next,I,P))return!0;A=A.next}while(A!==I);return!1}function $(I,P){return R(I.prev,I,I.next)<0?R(I,P,I.next)>=0&&R(I,I.prev,P)>=0:R(I,P,I.prev)<0||R(I,I.next,P)<0}function ee(I,P){var A=I,F=!1,M=(I.x+P.x)/2,C=(I.y+P.y)/2;do A.y>C!=A.next.y>C&&A.next.y!==A.y&&M<(A.next.x-A.x)*(C-A.y)/(A.next.y-A.y)+A.x&&(F=!F),A=A.next;while(A!==I);return F}function Z(I,P){var A=new j(I.i,I.x,I.y),F=new j(P.i,P.x,P.y),M=I.next,C=P.prev;return I.next=P,P.prev=I,A.next=M,M.prev=A,F.next=A,A.prev=F,C.next=F,F.prev=C,F}function z(I,P,A,F){var M=new j(I,P,A);return F?(M.next=F.next,M.prev=F,F.next.prev=M,F.next=M):(M.prev=M,M.next=M),M}function Y(I){I.next.prev=I.prev,I.prev.next=I.next,I.prevZ&&(I.prevZ.nextZ=I.nextZ),I.nextZ&&(I.nextZ.prevZ=I.prevZ)}function j(I,P,A){this.i=I,this.x=P,this.y=A,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}i.deviation=function(I,P,A,F){var M=P&&P.length,C=M?P[0]*A:I.length,O=Math.abs(ce(I,0,C,A));if(M)for(var H=0,J=P.length;H<J;H++){var te=P[H]*A,ne=H<J-1?P[H+1]*A:I.length;O-=Math.abs(ce(I,te,ne,A))}var ae=0;for(H=0;H<F.length;H+=3){var le=F[H]*A,de=F[H+1]*A,ie=F[H+2]*A;ae+=Math.abs((I[le]-I[ie])*(I[de+1]-I[le+1])-(I[le]-I[de])*(I[ie+1]-I[le+1]))}return O===0&&ae===0?0:Math.abs((ae-O)/O)};function ce(I,P,A,F){for(var M=0,C=P,O=A-F;C<A;C+=F)M+=(I[O]-I[C])*(I[C+1]+I[O+1]),O=C;return M}return i.flatten=function(I){for(var P=I[0][0].length,A={vertices:[],holes:[],dimensions:P},F=0,M=0;M<I.length;M++){for(var C=0;C<I[M].length;C++)for(var O=0;O<P;O++)A.vertices.push(I[M][C][O]);M>0&&(F+=I[M-1].length,A.holes.push(F))}return A},Qa.exports}var Ux=Nx();const Gx=Vl(Ux);var fi={},To={exports:{}};var Hx=To.exports,Qm;function zx(){return Qm||(Qm=1,(function(i,e){(function(t){var r=e&&!e.nodeType&&e,o=i&&!i.nodeType&&i,a=typeof hn=="object"&&hn;(a.global===a||a.window===a||a.self===a)&&(t=a);var u,c=2147483647,f=36,m=1,v=26,h=38,p=700,y=72,x=128,w="-",E=/^xn--/,T=/[^\x20-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=f-m,L=Math.floor,V=String.fromCharCode,b;function U(M){throw new RangeError(R[M])}function $(M,C){for(var O=M.length,H=[];O--;)H[O]=C(M[O]);return H}function ee(M,C){var O=M.split("@"),H="";O.length>1&&(H=O[0]+"@",M=O[1]),M=M.replace(k,".");var J=M.split("."),te=$(J,C).join(".");return H+te}function Z(M){for(var C=[],O=0,H=M.length,J,te;O<H;)J=M.charCodeAt(O++),J>=55296&&J<=56319&&O<H?(te=M.charCodeAt(O++),(te&64512)==56320?C.push(((J&1023)<<10)+(te&1023)+65536):(C.push(J),O--)):C.push(J);return C}function z(M){return $(M,function(C){var O="";return C>65535&&(C-=65536,O+=V(C>>>10&1023|55296),C=56320|C&1023),O+=V(C),O}).join("")}function Y(M){return M-48<10?M-22:M-65<26?M-65:M-97<26?M-97:f}function j(M,C){return M+22+75*(M<26)-((C!=0)<<5)}function ce(M,C,O){var H=0;for(M=O?L(M/p):M>>1,M+=L(M/C);M>N*v>>1;H+=f)M=L(M/N);return L(H+(N+1)*M/(M+h))}function I(M){var C=[],O=M.length,H,J=0,te=x,ne=y,ae,le,de,ie,ve,Se,ke,Fe,Ee;for(ae=M.lastIndexOf(w),ae<0&&(ae=0),le=0;le<ae;++le)M.charCodeAt(le)>=128&&U("not-basic"),C.push(M.charCodeAt(le));for(de=ae>0?ae+1:0;de<O;){for(ie=J,ve=1,Se=f;de>=O&&U("invalid-input"),ke=Y(M.charCodeAt(de++)),(ke>=f||ke>L((c-J)/ve))&&U("overflow"),J+=ke*ve,Fe=Se<=ne?m:Se>=ne+v?v:Se-ne,!(ke<Fe);Se+=f)Ee=f-Fe,ve>L(c/Ee)&&U("overflow"),ve*=Ee;H=C.length+1,ne=ce(J-ie,H,ie==0),L(J/H)>c-te&&U("overflow"),te+=L(J/H),J%=H,C.splice(J++,0,te)}return z(C)}function P(M){var C,O,H,J,te,ne,ae,le,de,ie,ve,Se=[],ke,Fe,Ee,Ae;for(M=Z(M),ke=M.length,C=x,O=0,te=y,ne=0;ne<ke;++ne)ve=M[ne],ve<128&&Se.push(V(ve));for(H=J=Se.length,J&&Se.push(w);H<ke;){for(ae=c,ne=0;ne<ke;++ne)ve=M[ne],ve>=C&&ve<ae&&(ae=ve);for(Fe=H+1,ae-C>L((c-O)/Fe)&&U("overflow"),O+=(ae-C)*Fe,C=ae,ne=0;ne<ke;++ne)if(ve=M[ne],ve<C&&++O>c&&U("overflow"),ve==C){for(le=O,de=f;ie=de<=te?m:de>=te+v?v:de-te,!(le<ie);de+=f)Ae=le-ie,Ee=f-ie,Se.push(V(j(ie+Ae%Ee,0))),le=L(Ae/Ee);Se.push(V(j(le,0))),te=ce(O,Fe,H==J),O=0,++H}++O,++C}return Se.join("")}function A(M){return ee(M,function(C){return E.test(C)?I(C.slice(4).toLowerCase()):C})}function F(M){return ee(M,function(C){return T.test(C)?"xn--"+P(C):C})}if(u={version:"1.4.1",ucs2:{decode:Z,encode:z},decode:I,encode:P,toASCII:F,toUnicode:A},r&&o)if(i.exports==r)o.exports=u;else for(b in u)u.hasOwnProperty(b)&&(r[b]=u[b]);else t.punycode=u})(Hx)})(To,To.exports)),To.exports}var Vh,Zm;function Is(){return Zm||(Zm=1,Vh=TypeError),Vh}const Vx={},$x=Object.freeze(Object.defineProperty({__proto__:null,default:Vx},Symbol.toStringTag,{value:"Module"})),Wx=gx($x);var $h,Jm;function $l(){if(Jm)return $h;Jm=1;var i=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=i&&e&&typeof e.get=="function"?e.get:null,r=i&&Map.prototype.forEach,o=typeof Set=="function"&&Set.prototype,a=Object.getOwnPropertyDescriptor&&o?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=o&&a&&typeof a.get=="function"?a.get:null,c=o&&Set.prototype.forEach,f=typeof WeakMap=="function"&&WeakMap.prototype,m=f?WeakMap.prototype.has:null,v=typeof WeakSet=="function"&&WeakSet.prototype,h=v?WeakSet.prototype.has:null,p=typeof WeakRef=="function"&&WeakRef.prototype,y=p?WeakRef.prototype.deref:null,x=Boolean.prototype.valueOf,w=Object.prototype.toString,E=Function.prototype.toString,T=String.prototype.match,k=String.prototype.slice,R=String.prototype.replace,N=String.prototype.toUpperCase,L=String.prototype.toLowerCase,V=RegExp.prototype.test,b=Array.prototype.concat,U=Array.prototype.join,$=Array.prototype.slice,ee=Math.floor,Z=typeof BigInt=="function"?BigInt.prototype.valueOf:null,z=Object.getOwnPropertySymbols,Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,j=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ce=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===j||!0)?Symbol.toStringTag:null,I=Object.prototype.propertyIsEnumerable,P=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(q){return q.__proto__}:null);function A(q,Q){if(q===1/0||q===-1/0||q!==q||q&&q>-1e3&&q<1e3||V.call(/e/,Q))return Q;var Ge=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof q=="number"){var We=q<0?-ee(-q):ee(q);if(We!==q){var je=String(We),De=k.call(Q,je.length+1);return R.call(je,Ge,"$&_")+"."+R.call(R.call(De,/([0-9]{3})/g,"$&_"),/_$/,"")}}return R.call(Q,Ge,"$&_")}var F=Wx,M=F.custom,C=Fe(M)?M:null,O={__proto__:null,double:'"',single:"'"},H={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};$h=function q(Q,Ge,We,je){var De=Ge||{};if(qe(De,"quoteStyle")&&!qe(O,De.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(qe(De,"maxStringLength")&&(typeof De.maxStringLength=="number"?De.maxStringLength<0&&De.maxStringLength!==1/0:De.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var kt=qe(De,"customInspect")?De.customInspect:!0;if(typeof kt!="boolean"&&kt!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(qe(De,"indent")&&De.indent!==null&&De.indent!=="	"&&!(parseInt(De.indent,10)===De.indent&&De.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(qe(De,"numericSeparator")&&typeof De.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Pr=De.numericSeparator;if(typeof Q>"u")return"undefined";if(Q===null)return"null";if(typeof Q=="boolean")return Q?"true":"false";if(typeof Q=="string")return Li(Q,De);if(typeof Q=="number"){if(Q===0)return 1/0/Q>0?"0":"-0";var Ct=String(Q);return Pr?A(Q,Ct):Ct}if(typeof Q=="bigint"){var ur=String(Q)+"n";return Pr?A(Q,ur):ur}var Fi=typeof De.depth>"u"?5:De.depth;if(typeof We>"u"&&(We=0),We>=Fi&&Fi>0&&typeof Q=="object")return ae(Q)?"[Array]":"[Object]";var Qr=Uo(De,We);if(typeof je>"u")je=[];else if(Nt(je,Q)>=0)return"[Circular]";function Lt(Zr,ei,Vo){if(ei&&(je=$.call(je),je.push(ei)),Vo){var Bs={depth:De.depth};return qe(De,"quoteStyle")&&(Bs.quoteStyle=De.quoteStyle),q(Zr,Bs,We+1,je)}return q(Zr,De,We+1,je)}if(typeof Q=="function"&&!de(Q)){var Ms=Ir(Q),_n=Bi(Q,Lt);return"[Function"+(Ms?": "+Ms:" (anonymous)")+"]"+(_n.length>0?" { "+U.call(_n,", ")+" }":"")}if(Fe(Q)){var Ni=j?R.call(String(Q),/^(Symbol\(.*\))_[^)]*$/,"$1"):Y.call(Q);return typeof Q=="object"&&!j?yn(Ni):Ni}if(No(Q)){for(var hr="<"+L.call(String(Q.nodeName)),ks=Q.attributes||[],Mr=0;Mr<ks.length;Mr++)hr+=" "+ks[Mr].name+"="+J(te(ks[Mr].value),"double",De);return hr+=">",Q.childNodes&&Q.childNodes.length&&(hr+="..."),hr+="</"+L.call(String(Q.nodeName))+">",hr}if(ae(Q)){if(Q.length===0)return"[]";var xn=Bi(Q,Lt);return Qr&&!eu(xn)?"["+Oi(xn,Qr)+"]":"[ "+U.call(xn,", ")+" ]"}if(ie(Q)){var wn=Bi(Q,Lt);return!("cause"in Error.prototype)&&"cause"in Q&&!I.call(Q,"cause")?"{ ["+String(Q)+"] "+U.call(b.call("[cause]: "+Lt(Q.cause),wn),", ")+" }":wn.length===0?"["+String(Q)+"]":"{ ["+String(Q)+"] "+U.call(wn,", ")+" }"}if(typeof Q=="object"&&kt){if(C&&typeof Q[C]=="function"&&F)return F(Q,{depth:Fi-We});if(kt!=="symbol"&&typeof Q.inspect=="function")return Q.inspect()}if(yt(Q)){var Ui=[];return r&&r.call(Q,function(Zr,ei){Ui.push(Lt(ei,Q,!0)+" => "+Lt(Zr,Q))}),vn("Map",t.call(Q),Ui,Qr)}if(qr(Q)){var Go=[];return c&&c.call(Q,function(Zr){Go.push(Lt(Zr,Q))}),vn("Set",u.call(Q),Go,Qr)}if(Rr(Q))return Kr("WeakMap");if(Fo(Q))return Kr("WeakSet");if(Yr(Q))return Kr("WeakRef");if(Se(Q))return yn(Lt(Number(Q)));if(Ee(Q))return yn(Lt(Z.call(Q)));if(ke(Q))return yn(x.call(Q));if(ve(Q))return yn(Lt(String(Q)));if(typeof window<"u"&&Q===window)return"{ [object Window] }";if(typeof globalThis<"u"&&Q===globalThis||typeof hn<"u"&&Q===hn)return"{ [object globalThis] }";if(!le(Q)&&!de(Q)){var Ls=Bi(Q,Lt),Ho=P?P(Q)===Object.prototype:Q instanceof Object||Q.constructor===Object,cr=Q instanceof Object?"":"null prototype",Ds=!Ho&&ce&&Object(Q)===Q&&ce in Q?k.call(st(Q),8,-1):cr?"Object":"",zo=Ho||typeof Q.constructor!="function"?"":Q.constructor.name?Q.constructor.name+" ":"",Os=zo+(Ds||cr?"["+U.call(b.call([],Ds||[],cr||[]),": ")+"] ":"");return Ls.length===0?Os+"{}":Qr?Os+"{"+Oi(Ls,Qr)+"}":Os+"{ "+U.call(Ls,", ")+" }"}return String(Q)};function J(q,Q,Ge){var We=Ge.quoteStyle||Q,je=O[We];return je+q+je}function te(q){return R.call(String(q),/"/g,"&quot;")}function ne(q){return!ce||!(typeof q=="object"&&(ce in q||typeof q[ce]<"u"))}function ae(q){return st(q)==="[object Array]"&&ne(q)}function le(q){return st(q)==="[object Date]"&&ne(q)}function de(q){return st(q)==="[object RegExp]"&&ne(q)}function ie(q){return st(q)==="[object Error]"&&ne(q)}function ve(q){return st(q)==="[object String]"&&ne(q)}function Se(q){return st(q)==="[object Number]"&&ne(q)}function ke(q){return st(q)==="[object Boolean]"&&ne(q)}function Fe(q){if(j)return q&&typeof q=="object"&&q instanceof Symbol;if(typeof q=="symbol")return!0;if(!q||typeof q!="object"||!Y)return!1;try{return Y.call(q),!0}catch{}return!1}function Ee(q){if(!q||typeof q!="object"||!Z)return!1;try{return Z.call(q),!0}catch{}return!1}var Ae=Object.prototype.hasOwnProperty||function(q){return q in this};function qe(q,Q){return Ae.call(q,Q)}function st(q){return w.call(q)}function Ir(q){if(q.name)return q.name;var Q=T.call(E.call(q),/^function\s*([\w$]+)/);return Q?Q[1]:null}function Nt(q,Q){if(q.indexOf)return q.indexOf(Q);for(var Ge=0,We=q.length;Ge<We;Ge++)if(q[Ge]===Q)return Ge;return-1}function yt(q){if(!t||!q||typeof q!="object")return!1;try{t.call(q);try{u.call(q)}catch{return!0}return q instanceof Map}catch{}return!1}function Rr(q){if(!m||!q||typeof q!="object")return!1;try{m.call(q,m);try{h.call(q,h)}catch{return!0}return q instanceof WeakMap}catch{}return!1}function Yr(q){if(!y||!q||typeof q!="object")return!1;try{return y.call(q),!0}catch{}return!1}function qr(q){if(!u||!q||typeof q!="object")return!1;try{u.call(q);try{t.call(q)}catch{return!0}return q instanceof Set}catch{}return!1}function Fo(q){if(!h||!q||typeof q!="object")return!1;try{h.call(q,h);try{m.call(q,m)}catch{return!0}return q instanceof WeakSet}catch{}return!1}function No(q){return!q||typeof q!="object"?!1:typeof HTMLElement<"u"&&q instanceof HTMLElement?!0:typeof q.nodeName=="string"&&typeof q.getAttribute=="function"}function Li(q,Q){if(q.length>Q.maxStringLength){var Ge=q.length-Q.maxStringLength,We="... "+Ge+" more character"+(Ge>1?"s":"");return Li(k.call(q,0,Q.maxStringLength),Q)+We}var je=H[Q.quoteStyle||"single"];je.lastIndex=0;var De=R.call(R.call(q,je,"\\$1"),/[\x00-\x1f]/g,Di);return J(De,"single",Q)}function Di(q){var Q=q.charCodeAt(0),Ge={8:"b",9:"t",10:"n",12:"f",13:"r"}[Q];return Ge?"\\"+Ge:"\\x"+(Q<16?"0":"")+N.call(Q.toString(16))}function yn(q){return"Object("+q+")"}function Kr(q){return q+" { ? }"}function vn(q,Q,Ge,We){var je=We?Oi(Ge,We):U.call(Ge,", ");return q+" ("+Q+") {"+je+"}"}function eu(q){for(var Q=0;Q<q.length;Q++)if(Nt(q[Q],`
`)>=0)return!1;return!0}function Uo(q,Q){var Ge;if(q.indent==="	")Ge="	";else if(typeof q.indent=="number"&&q.indent>0)Ge=U.call(Array(q.indent+1)," ");else return null;return{base:Ge,prev:U.call(Array(Q+1),Ge)}}function Oi(q,Q){if(q.length===0)return"";var Ge=`
`+Q.prev+Q.base;return Ge+U.call(q,","+Ge)+`
`+Q.prev}function Bi(q,Q){var Ge=ae(q),We=[];if(Ge){We.length=q.length;for(var je=0;je<q.length;je++)We[je]=qe(q,je)?Q(q[je],q):""}var De=typeof z=="function"?z(q):[],kt;if(j){kt={};for(var Pr=0;Pr<De.length;Pr++)kt["$"+De[Pr]]=De[Pr]}for(var Ct in q)qe(q,Ct)&&(Ge&&String(Number(Ct))===Ct&&Ct<q.length||j&&kt["$"+Ct]instanceof Symbol||(V.call(/[^\w$]/,Ct)?We.push(Q(Ct,q)+": "+Q(q[Ct],q)):We.push(Ct+": "+Q(q[Ct],q))));if(typeof z=="function")for(var ur=0;ur<De.length;ur++)I.call(q,De[ur])&&We.push("["+Q(De[ur])+"]: "+Q(q[De[ur]],q));return We}return $h}var Wh,eg;function jx(){if(eg)return Wh;eg=1;var i=$l(),e=Is(),t=function(c,f,m){for(var v=c,h;(h=v.next)!=null;v=h)if(h.key===f)return v.next=h.next,m||(h.next=c.next,c.next=h),h},r=function(c,f){if(c){var m=t(c,f);return m&&m.value}},o=function(c,f,m){var v=t(c,f);v?v.value=m:c.next={key:f,next:c.next,value:m}},a=function(c,f){return c?!!t(c,f):!1},u=function(c,f){if(c)return t(c,f,!0)};return Wh=function(){var f,m={assert:function(v){if(!m.has(v))throw new e("Side channel does not contain "+i(v))},delete:function(v){var h=f&&f.next,p=u(f,v);return p&&h&&h===p&&(f=void 0),!!p},get:function(v){return r(f,v)},has:function(v){return a(f,v)},set:function(v,h){f||(f={next:void 0}),o(f,v,h)}};return m},Wh}var jh,tg;function Ky(){return tg||(tg=1,jh=Object),jh}var Xh,rg;function Xx(){return rg||(rg=1,Xh=Error),Xh}var Yh,ng;function Yx(){return ng||(ng=1,Yh=EvalError),Yh}var qh,ig;function qx(){return ig||(ig=1,qh=RangeError),qh}var Kh,sg;function Kx(){return sg||(sg=1,Kh=ReferenceError),Kh}var Qh,og;function Qx(){return og||(og=1,Qh=SyntaxError),Qh}var Zh,ag;function Zx(){return ag||(ag=1,Zh=URIError),Zh}var Jh,lg;function Jx(){return lg||(lg=1,Jh=Math.abs),Jh}var ec,ug;function ew(){return ug||(ug=1,ec=Math.floor),ec}var tc,hg;function tw(){return hg||(hg=1,tc=Math.max),tc}var rc,cg;function rw(){return cg||(cg=1,rc=Math.min),rc}var nc,dg;function nw(){return dg||(dg=1,nc=Math.pow),nc}var ic,fg;function iw(){return fg||(fg=1,ic=Math.round),ic}var sc,pg;function sw(){return pg||(pg=1,sc=Number.isNaN||function(e){return e!==e}),sc}var oc,mg;function ow(){if(mg)return oc;mg=1;var i=sw();return oc=function(t){return i(t)||t===0?t:t<0?-1:1},oc}var ac,gg;function aw(){return gg||(gg=1,ac=Object.getOwnPropertyDescriptor),ac}var lc,yg;function Qy(){if(yg)return lc;yg=1;var i=aw();if(i)try{i([],"length")}catch{i=null}return lc=i,lc}var uc,vg;function lw(){if(vg)return uc;vg=1;var i=Object.defineProperty||!1;if(i)try{i({},"a",{value:1})}catch{i=!1}return uc=i,uc}var hc,_g;function uw(){return _g||(_g=1,hc=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var o=42;e[t]=o;for(var a in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var u=Object.getOwnPropertySymbols(e);if(u.length!==1||u[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(e,t);if(c.value!==o||c.enumerable!==!0)return!1}return!0}),hc}var cc,xg;function hw(){if(xg)return cc;xg=1;var i=typeof Symbol<"u"&&Symbol,e=uw();return cc=function(){return typeof i!="function"||typeof Symbol!="function"||typeof i("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},cc}var dc,wg;function Zy(){return wg||(wg=1,dc=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),dc}var fc,Eg;function Jy(){if(Eg)return fc;Eg=1;var i=Ky();return fc=i.getPrototypeOf||null,fc}var pc,Tg;function cw(){if(Tg)return pc;Tg=1;var i="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",o=function(f,m){for(var v=[],h=0;h<f.length;h+=1)v[h]=f[h];for(var p=0;p<m.length;p+=1)v[p+f.length]=m[p];return v},a=function(f,m){for(var v=[],h=m,p=0;h<f.length;h+=1,p+=1)v[p]=f[h];return v},u=function(c,f){for(var m="",v=0;v<c.length;v+=1)m+=c[v],v+1<c.length&&(m+=f);return m};return pc=function(f){var m=this;if(typeof m!="function"||e.apply(m)!==r)throw new TypeError(i+m);for(var v=a(arguments,1),h,p=function(){if(this instanceof h){var T=m.apply(this,o(v,arguments));return Object(T)===T?T:this}return m.apply(f,o(v,arguments))},y=t(0,m.length-v.length),x=[],w=0;w<y;w++)x[w]="$"+w;if(h=Function("binder","return function ("+u(x,",")+"){ return binder.apply(this,arguments); }")(p),m.prototype){var E=function(){};E.prototype=m.prototype,h.prototype=new E,E.prototype=null}return h},pc}var mc,Sg;function Wl(){if(Sg)return mc;Sg=1;var i=cw();return mc=Function.prototype.bind||i,mc}var gc,Ag;function jd(){return Ag||(Ag=1,gc=Function.prototype.call),gc}var yc,bg;function ev(){return bg||(bg=1,yc=Function.prototype.apply),yc}var vc,Cg;function dw(){return Cg||(Cg=1,vc=typeof Reflect<"u"&&Reflect&&Reflect.apply),vc}var _c,Ig;function fw(){if(Ig)return _c;Ig=1;var i=Wl(),e=ev(),t=jd(),r=dw();return _c=r||i.call(t,e),_c}var xc,Rg;function tv(){if(Rg)return xc;Rg=1;var i=Wl(),e=Is(),t=jd(),r=fw();return xc=function(a){if(a.length<1||typeof a[0]!="function")throw new e("a function is required");return r(i,t,a)},xc}var wc,Pg;function pw(){if(Pg)return wc;Pg=1;var i=tv(),e=Qy(),t;try{t=[].__proto__===Array.prototype}catch(u){if(!u||typeof u!="object"||!("code"in u)||u.code!=="ERR_PROTO_ACCESS")throw u}var r=!!t&&e&&e(Object.prototype,"__proto__"),o=Object,a=o.getPrototypeOf;return wc=r&&typeof r.get=="function"?i([r.get]):typeof a=="function"?function(c){return a(c==null?c:o(c))}:!1,wc}var Ec,Mg;function mw(){if(Mg)return Ec;Mg=1;var i=Zy(),e=Jy(),t=pw();return Ec=i?function(o){return i(o)}:e?function(o){if(!o||typeof o!="object"&&typeof o!="function")throw new TypeError("getProto: not an object");return e(o)}:t?function(o){return t(o)}:null,Ec}var Tc,kg;function gw(){if(kg)return Tc;kg=1;var i=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=Wl();return Tc=t.call(i,e),Tc}var Sc,Lg;function Xd(){if(Lg)return Sc;Lg=1;var i,e=Ky(),t=Xx(),r=Yx(),o=qx(),a=Kx(),u=Qx(),c=Is(),f=Zx(),m=Jx(),v=ew(),h=tw(),p=rw(),y=nw(),x=iw(),w=ow(),E=Function,T=function(de){try{return E('"use strict"; return ('+de+").constructor;")()}catch{}},k=Qy(),R=lw(),N=function(){throw new c},L=k?(function(){try{return arguments.callee,N}catch{try{return k(arguments,"callee").get}catch{return N}}})():N,V=hw()(),b=mw(),U=Jy(),$=Zy(),ee=ev(),Z=jd(),z={},Y=typeof Uint8Array>"u"||!b?i:b(Uint8Array),j={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?i:ArrayBuffer,"%ArrayIteratorPrototype%":V&&b?b([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":z,"%AsyncGenerator%":z,"%AsyncGeneratorFunction%":z,"%AsyncIteratorPrototype%":z,"%Atomics%":typeof Atomics>"u"?i:Atomics,"%BigInt%":typeof BigInt>"u"?i:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?i:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?i:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":r,"%Float16Array%":typeof Float16Array>"u"?i:Float16Array,"%Float32Array%":typeof Float32Array>"u"?i:Float32Array,"%Float64Array%":typeof Float64Array>"u"?i:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?i:FinalizationRegistry,"%Function%":E,"%GeneratorFunction%":z,"%Int8Array%":typeof Int8Array>"u"?i:Int8Array,"%Int16Array%":typeof Int16Array>"u"?i:Int16Array,"%Int32Array%":typeof Int32Array>"u"?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":V&&b?b(b([][Symbol.iterator]())):i,"%JSON%":typeof JSON=="object"?JSON:i,"%Map%":typeof Map>"u"?i:Map,"%MapIteratorPrototype%":typeof Map>"u"||!V||!b?i:b(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":k,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?i:Promise,"%Proxy%":typeof Proxy>"u"?i:Proxy,"%RangeError%":o,"%ReferenceError%":a,"%Reflect%":typeof Reflect>"u"?i:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?i:Set,"%SetIteratorPrototype%":typeof Set>"u"||!V||!b?i:b(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":V&&b?b(""[Symbol.iterator]()):i,"%Symbol%":V?Symbol:i,"%SyntaxError%":u,"%ThrowTypeError%":L,"%TypedArray%":Y,"%TypeError%":c,"%Uint8Array%":typeof Uint8Array>"u"?i:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?i:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?i:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?i:Uint32Array,"%URIError%":f,"%WeakMap%":typeof WeakMap>"u"?i:WeakMap,"%WeakRef%":typeof WeakRef>"u"?i:WeakRef,"%WeakSet%":typeof WeakSet>"u"?i:WeakSet,"%Function.prototype.call%":Z,"%Function.prototype.apply%":ee,"%Object.defineProperty%":R,"%Object.getPrototypeOf%":U,"%Math.abs%":m,"%Math.floor%":v,"%Math.max%":h,"%Math.min%":p,"%Math.pow%":y,"%Math.round%":x,"%Math.sign%":w,"%Reflect.getPrototypeOf%":$};if(b)try{null.error}catch(de){var ce=b(b(de));j["%Error.prototype%"]=ce}var I=function de(ie){var ve;if(ie==="%AsyncFunction%")ve=T("async function () {}");else if(ie==="%GeneratorFunction%")ve=T("function* () {}");else if(ie==="%AsyncGeneratorFunction%")ve=T("async function* () {}");else if(ie==="%AsyncGenerator%"){var Se=de("%AsyncGeneratorFunction%");Se&&(ve=Se.prototype)}else if(ie==="%AsyncIteratorPrototype%"){var ke=de("%AsyncGenerator%");ke&&b&&(ve=b(ke.prototype))}return j[ie]=ve,ve},P={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},A=Wl(),F=gw(),M=A.call(Z,Array.prototype.concat),C=A.call(ee,Array.prototype.splice),O=A.call(Z,String.prototype.replace),H=A.call(Z,String.prototype.slice),J=A.call(Z,RegExp.prototype.exec),te=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ne=/\\(\\)?/g,ae=function(ie){var ve=H(ie,0,1),Se=H(ie,-1);if(ve==="%"&&Se!=="%")throw new u("invalid intrinsic syntax, expected closing `%`");if(Se==="%"&&ve!=="%")throw new u("invalid intrinsic syntax, expected opening `%`");var ke=[];return O(ie,te,function(Fe,Ee,Ae,qe){ke[ke.length]=Ae?O(qe,ne,"$1"):Ee||Fe}),ke},le=function(ie,ve){var Se=ie,ke;if(F(P,Se)&&(ke=P[Se],Se="%"+ke[0]+"%"),F(j,Se)){var Fe=j[Se];if(Fe===z&&(Fe=I(Se)),typeof Fe>"u"&&!ve)throw new c("intrinsic "+ie+" exists, but is not available. Please file an issue!");return{alias:ke,name:Se,value:Fe}}throw new u("intrinsic "+ie+" does not exist!")};return Sc=function(ie,ve){if(typeof ie!="string"||ie.length===0)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof ve!="boolean")throw new c('"allowMissing" argument must be a boolean');if(J(/^%?[^%]*%?$/,ie)===null)throw new u("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Se=ae(ie),ke=Se.length>0?Se[0]:"",Fe=le("%"+ke+"%",ve),Ee=Fe.name,Ae=Fe.value,qe=!1,st=Fe.alias;st&&(ke=st[0],C(Se,M([0,1],st)));for(var Ir=1,Nt=!0;Ir<Se.length;Ir+=1){var yt=Se[Ir],Rr=H(yt,0,1),Yr=H(yt,-1);if((Rr==='"'||Rr==="'"||Rr==="`"||Yr==='"'||Yr==="'"||Yr==="`")&&Rr!==Yr)throw new u("property names with quotes must have matching quotes");if((yt==="constructor"||!Nt)&&(qe=!0),ke+="."+yt,Ee="%"+ke+"%",F(j,Ee))Ae=j[Ee];else if(Ae!=null){if(!(yt in Ae)){if(!ve)throw new c("base intrinsic for "+ie+" exists, but the property is not available.");return}if(k&&Ir+1>=Se.length){var qr=k(Ae,yt);Nt=!!qr,Nt&&"get"in qr&&!("originalValue"in qr.get)?Ae=qr.get:Ae=Ae[yt]}else Nt=F(Ae,yt),Ae=Ae[yt];Nt&&!qe&&(j[Ee]=Ae)}}return Ae},Sc}var Ac,Dg;function rv(){if(Dg)return Ac;Dg=1;var i=Xd(),e=tv(),t=e([i("%String.prototype.indexOf%")]);return Ac=function(o,a){var u=i(o,!!a);return typeof u=="function"&&t(o,".prototype.")>-1?e([u]):u},Ac}var bc,Og;function nv(){if(Og)return bc;Og=1;var i=Xd(),e=rv(),t=$l(),r=Is(),o=i("%Map%",!0),a=e("Map.prototype.get",!0),u=e("Map.prototype.set",!0),c=e("Map.prototype.has",!0),f=e("Map.prototype.delete",!0),m=e("Map.prototype.size",!0);return bc=!!o&&function(){var h,p={assert:function(y){if(!p.has(y))throw new r("Side channel does not contain "+t(y))},delete:function(y){if(h){var x=f(h,y);return m(h)===0&&(h=void 0),x}return!1},get:function(y){if(h)return a(h,y)},has:function(y){return h?c(h,y):!1},set:function(y,x){h||(h=new o),u(h,y,x)}};return p},bc}var Cc,Bg;function yw(){if(Bg)return Cc;Bg=1;var i=Xd(),e=rv(),t=$l(),r=nv(),o=Is(),a=i("%WeakMap%",!0),u=e("WeakMap.prototype.get",!0),c=e("WeakMap.prototype.set",!0),f=e("WeakMap.prototype.has",!0),m=e("WeakMap.prototype.delete",!0);return Cc=a?function(){var h,p,y={assert:function(x){if(!y.has(x))throw new o("Side channel does not contain "+t(x))},delete:function(x){if(a&&x&&(typeof x=="object"||typeof x=="function")){if(h)return m(h,x)}else if(r&&p)return p.delete(x);return!1},get:function(x){return a&&x&&(typeof x=="object"||typeof x=="function")&&h?u(h,x):p&&p.get(x)},has:function(x){return a&&x&&(typeof x=="object"||typeof x=="function")&&h?f(h,x):!!p&&p.has(x)},set:function(x,w){a&&x&&(typeof x=="object"||typeof x=="function")?(h||(h=new a),c(h,x,w)):r&&(p||(p=r()),p.set(x,w))}};return y}:r,Cc}var Ic,Fg;function iv(){if(Fg)return Ic;Fg=1;var i=Is(),e=$l(),t=jx(),r=nv(),o=yw(),a=o||r||t;return Ic=function(){var c,f={assert:function(m){if(!f.has(m))throw new i("Side channel does not contain "+e(m))},delete:function(m){return!!c&&c.delete(m)},get:function(m){return c&&c.get(m)},has:function(m){return!!c&&c.has(m)},set:function(m,v){c||(c=a()),c.set(m,v)}};return f},Ic}var Rc,Ng;function Yd(){if(Ng)return Rc;Ng=1;var i=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Rc={default:t.RFC3986,formatters:{RFC1738:function(r){return i.call(r,e,"+")},RFC3986:function(r){return String(r)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},Rc}var Pc,Ug;function sv(){if(Ug)return Pc;Ug=1;var i=Yd(),e=iv(),t=Object.prototype.hasOwnProperty,r=Array.isArray,o=e(),a=function(b,U){return o.set(b,U),b},u=function(b){return o.has(b)},c=function(b){return o.get(b)},f=function(b,U){o.set(b,U)},m=(function(){for(var V=[],b=0;b<256;++b)V.push("%"+((b<16?"0":"")+b.toString(16)).toUpperCase());return V})(),v=function(b){for(;b.length>1;){var U=b.pop(),$=U.obj[U.prop];if(r($)){for(var ee=[],Z=0;Z<$.length;++Z)typeof $[Z]<"u"&&ee.push($[Z]);U.obj[U.prop]=ee}}},h=function(b,U){for(var $=U&&U.plainObjects?{__proto__:null}:{},ee=0;ee<b.length;++ee)typeof b[ee]<"u"&&($[ee]=b[ee]);return $},p=function V(b,U,$){if(!U)return b;if(typeof U!="object"&&typeof U!="function"){if(r(b))b.push(U);else if(b&&typeof b=="object")if(u(b)){var ee=c(b)+1;b[ee]=U,f(b,ee)}else($&&($.plainObjects||$.allowPrototypes)||!t.call(Object.prototype,U))&&(b[U]=!0);else return[b,U];return b}if(!b||typeof b!="object"){if(u(U)){for(var Z=Object.keys(U),z=$&&$.plainObjects?{__proto__:null,0:b}:{0:b},Y=0;Y<Z.length;Y++){var j=parseInt(Z[Y],10);z[j+1]=U[Z[Y]]}return a(z,c(U)+1)}return[b].concat(U)}var ce=b;return r(b)&&!r(U)&&(ce=h(b,$)),r(b)&&r(U)?(U.forEach(function(I,P){if(t.call(b,P)){var A=b[P];A&&typeof A=="object"&&I&&typeof I=="object"?b[P]=V(A,I,$):b.push(I)}else b[P]=I}),b):Object.keys(U).reduce(function(I,P){var A=U[P];return t.call(I,P)?I[P]=V(I[P],A,$):I[P]=A,I},ce)},y=function(b,U){return Object.keys(U).reduce(function($,ee){return $[ee]=U[ee],$},b)},x=function(V,b,U){var $=V.replace(/\+/g," ");if(U==="iso-8859-1")return $.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent($)}catch{return $}},w=1024,E=function(b,U,$,ee,Z){if(b.length===0)return b;var z=b;if(typeof b=="symbol"?z=Symbol.prototype.toString.call(b):typeof b!="string"&&(z=String(b)),$==="iso-8859-1")return escape(z).replace(/%u[0-9a-f]{4}/gi,function(F){return"%26%23"+parseInt(F.slice(2),16)+"%3B"});for(var Y="",j=0;j<z.length;j+=w){for(var ce=z.length>=w?z.slice(j,j+w):z,I=[],P=0;P<ce.length;++P){var A=ce.charCodeAt(P);if(A===45||A===46||A===95||A===126||A>=48&&A<=57||A>=65&&A<=90||A>=97&&A<=122||Z===i.RFC1738&&(A===40||A===41)){I[I.length]=ce.charAt(P);continue}if(A<128){I[I.length]=m[A];continue}if(A<2048){I[I.length]=m[192|A>>6]+m[128|A&63];continue}if(A<55296||A>=57344){I[I.length]=m[224|A>>12]+m[128|A>>6&63]+m[128|A&63];continue}P+=1,A=65536+((A&1023)<<10|ce.charCodeAt(P)&1023),I[I.length]=m[240|A>>18]+m[128|A>>12&63]+m[128|A>>6&63]+m[128|A&63]}Y+=I.join("")}return Y},T=function(b){for(var U=[{obj:{o:b},prop:"o"}],$=[],ee=0;ee<U.length;++ee)for(var Z=U[ee],z=Z.obj[Z.prop],Y=Object.keys(z),j=0;j<Y.length;++j){var ce=Y[j],I=z[ce];typeof I=="object"&&I!==null&&$.indexOf(I)===-1&&(U.push({obj:z,prop:ce}),$.push(I))}return v(U),b},k=function(b){return Object.prototype.toString.call(b)==="[object RegExp]"},R=function(b){return!b||typeof b!="object"?!1:!!(b.constructor&&b.constructor.isBuffer&&b.constructor.isBuffer(b))},N=function(b,U,$,ee){if(u(b)){var Z=c(b)+1;return b[Z]=U,f(b,Z),b}var z=[].concat(b,U);return z.length>$?a(h(z,{plainObjects:ee}),z.length-1):z},L=function(b,U){if(r(b)){for(var $=[],ee=0;ee<b.length;ee+=1)$.push(U(b[ee]));return $}return U(b)};return Pc={arrayToObject:h,assign:y,combine:N,compact:T,decode:x,encode:E,isBuffer:R,isOverflow:u,isRegExp:k,maybeMap:L,merge:p},Pc}var Mc,Gg;function vw(){if(Gg)return Mc;Gg=1;var i=iv(),e=sv(),t=Yd(),r=Object.prototype.hasOwnProperty,o={brackets:function(E){return E+"[]"},comma:"comma",indices:function(E,T){return E+"["+T+"]"},repeat:function(E){return E}},a=Array.isArray,u=Array.prototype.push,c=function(w,E){u.apply(w,a(E)?E:[E])},f=Date.prototype.toISOString,m=t.default,v={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:m,formatter:t.formatters[m],indices:!1,serializeDate:function(E){return f.call(E)},skipNulls:!1,strictNullHandling:!1},h=function(E){return typeof E=="string"||typeof E=="number"||typeof E=="boolean"||typeof E=="symbol"||typeof E=="bigint"},p={},y=function w(E,T,k,R,N,L,V,b,U,$,ee,Z,z,Y,j,ce,I,P){for(var A=E,F=P,M=0,C=!1;(F=F.get(p))!==void 0&&!C;){var O=F.get(E);if(M+=1,typeof O<"u"){if(O===M)throw new RangeError("Cyclic object value");C=!0}typeof F.get(p)>"u"&&(M=0)}if(typeof $=="function"?A=$(T,A):A instanceof Date?A=z(A):k==="comma"&&a(A)&&(A=e.maybeMap(A,function(Ee){return Ee instanceof Date?z(Ee):Ee})),A===null){if(L)return U&&!ce?U(T,v.encoder,I,"key",Y):T;A=""}if(h(A)||e.isBuffer(A)){if(U){var H=ce?T:U(T,v.encoder,I,"key",Y);return[j(H)+"="+j(U(A,v.encoder,I,"value",Y))]}return[j(T)+"="+j(String(A))]}var J=[];if(typeof A>"u")return J;var te;if(k==="comma"&&a(A))ce&&U&&(A=e.maybeMap(A,U)),te=[{value:A.length>0?A.join(",")||null:void 0}];else if(a($))te=$;else{var ne=Object.keys(A);te=ee?ne.sort(ee):ne}var ae=b?String(T).replace(/\./g,"%2E"):String(T),le=R&&a(A)&&A.length===1?ae+"[]":ae;if(N&&a(A)&&A.length===0)return le+"[]";for(var de=0;de<te.length;++de){var ie=te[de],ve=typeof ie=="object"&&ie&&typeof ie.value<"u"?ie.value:A[ie];if(!(V&&ve===null)){var Se=Z&&b?String(ie).replace(/\./g,"%2E"):String(ie),ke=a(A)?typeof k=="function"?k(le,Se):le:le+(Z?"."+Se:"["+Se+"]");P.set(E,M);var Fe=i();Fe.set(p,P),c(J,w(ve,ke,k,R,N,L,V,b,k==="comma"&&ce&&a(A)?null:U,$,ee,Z,z,Y,j,ce,I,Fe))}}return J},x=function(E){if(!E)return v;if(typeof E.allowEmptyArrays<"u"&&typeof E.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof E.encodeDotInKeys<"u"&&typeof E.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(E.encoder!==null&&typeof E.encoder<"u"&&typeof E.encoder!="function")throw new TypeError("Encoder has to be a function.");var T=E.charset||v.charset;if(typeof E.charset<"u"&&E.charset!=="utf-8"&&E.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var k=t.default;if(typeof E.format<"u"){if(!r.call(t.formatters,E.format))throw new TypeError("Unknown format option provided.");k=E.format}var R=t.formatters[k],N=v.filter;(typeof E.filter=="function"||a(E.filter))&&(N=E.filter);var L;if(E.arrayFormat in o?L=E.arrayFormat:"indices"in E?L=E.indices?"indices":"repeat":L=v.arrayFormat,"commaRoundTrip"in E&&typeof E.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var V=typeof E.allowDots>"u"?E.encodeDotInKeys===!0?!0:v.allowDots:!!E.allowDots;return{addQueryPrefix:typeof E.addQueryPrefix=="boolean"?E.addQueryPrefix:v.addQueryPrefix,allowDots:V,allowEmptyArrays:typeof E.allowEmptyArrays=="boolean"?!!E.allowEmptyArrays:v.allowEmptyArrays,arrayFormat:L,charset:T,charsetSentinel:typeof E.charsetSentinel=="boolean"?E.charsetSentinel:v.charsetSentinel,commaRoundTrip:!!E.commaRoundTrip,delimiter:typeof E.delimiter>"u"?v.delimiter:E.delimiter,encode:typeof E.encode=="boolean"?E.encode:v.encode,encodeDotInKeys:typeof E.encodeDotInKeys=="boolean"?E.encodeDotInKeys:v.encodeDotInKeys,encoder:typeof E.encoder=="function"?E.encoder:v.encoder,encodeValuesOnly:typeof E.encodeValuesOnly=="boolean"?E.encodeValuesOnly:v.encodeValuesOnly,filter:N,format:k,formatter:R,serializeDate:typeof E.serializeDate=="function"?E.serializeDate:v.serializeDate,skipNulls:typeof E.skipNulls=="boolean"?E.skipNulls:v.skipNulls,sort:typeof E.sort=="function"?E.sort:null,strictNullHandling:typeof E.strictNullHandling=="boolean"?E.strictNullHandling:v.strictNullHandling}};return Mc=function(w,E){var T=w,k=x(E),R,N;typeof k.filter=="function"?(N=k.filter,T=N("",T)):a(k.filter)&&(N=k.filter,R=N);var L=[];if(typeof T!="object"||T===null)return"";var V=o[k.arrayFormat],b=V==="comma"&&k.commaRoundTrip;R||(R=Object.keys(T)),k.sort&&R.sort(k.sort);for(var U=i(),$=0;$<R.length;++$){var ee=R[$],Z=T[ee];k.skipNulls&&Z===null||c(L,y(Z,ee,V,b,k.allowEmptyArrays,k.strictNullHandling,k.skipNulls,k.encodeDotInKeys,k.encode?k.encoder:null,k.filter,k.sort,k.allowDots,k.serializeDate,k.format,k.formatter,k.encodeValuesOnly,k.charset,U))}var z=L.join(k.delimiter),Y=k.addQueryPrefix===!0?"?":"";return k.charsetSentinel&&(k.charset==="iso-8859-1"?Y+="utf8=%26%2310003%3B&":Y+="utf8=%E2%9C%93&"),z.length>0?Y+z:""},Mc}var kc,Hg;function _w(){if(Hg)return kc;Hg=1;var i=sv(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:i.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},o=function(y){return y.replace(/&#(\d+);/g,function(x,w){return String.fromCharCode(parseInt(w,10))})},a=function(y,x,w){if(y&&typeof y=="string"&&x.comma&&y.indexOf(",")>-1)return y.split(",");if(x.throwOnLimitExceeded&&w>=x.arrayLimit)throw new RangeError("Array limit exceeded. Only "+x.arrayLimit+" element"+(x.arrayLimit===1?"":"s")+" allowed in an array.");return y},u="utf8=%26%2310003%3B",c="utf8=%E2%9C%93",f=function(x,w){var E={__proto__:null},T=w.ignoreQueryPrefix?x.replace(/^\?/,""):x;T=T.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var k=w.parameterLimit===1/0?void 0:w.parameterLimit,R=T.split(w.delimiter,w.throwOnLimitExceeded?k+1:k);if(w.throwOnLimitExceeded&&R.length>k)throw new RangeError("Parameter limit exceeded. Only "+k+" parameter"+(k===1?"":"s")+" allowed.");var N=-1,L,V=w.charset;if(w.charsetSentinel)for(L=0;L<R.length;++L)R[L].indexOf("utf8=")===0&&(R[L]===c?V="utf-8":R[L]===u&&(V="iso-8859-1"),N=L,L=R.length);for(L=0;L<R.length;++L)if(L!==N){var b=R[L],U=b.indexOf("]="),$=U===-1?b.indexOf("="):U+1,ee,Z;if($===-1?(ee=w.decoder(b,r.decoder,V,"key"),Z=w.strictNullHandling?null:""):(ee=w.decoder(b.slice(0,$),r.decoder,V,"key"),ee!==null&&(Z=i.maybeMap(a(b.slice($+1),w,t(E[ee])?E[ee].length:0),function(Y){return w.decoder(Y,r.decoder,V,"value")}))),Z&&w.interpretNumericEntities&&V==="iso-8859-1"&&(Z=o(String(Z))),b.indexOf("[]=")>-1&&(Z=t(Z)?[Z]:Z),ee!==null){var z=e.call(E,ee);z&&w.duplicates==="combine"?E[ee]=i.combine(E[ee],Z,w.arrayLimit,w.plainObjects):(!z||w.duplicates==="last")&&(E[ee]=Z)}}return E},m=function(y,x,w,E){var T=0;if(y.length>0&&y[y.length-1]==="[]"){var k=y.slice(0,-1).join("");T=Array.isArray(x)&&x[k]?x[k].length:0}for(var R=E?x:a(x,w,T),N=y.length-1;N>=0;--N){var L,V=y[N];if(V==="[]"&&w.parseArrays)i.isOverflow(R)?L=R:L=w.allowEmptyArrays&&(R===""||w.strictNullHandling&&R===null)?[]:i.combine([],R,w.arrayLimit,w.plainObjects);else{L=w.plainObjects?{__proto__:null}:{};var b=V.charAt(0)==="["&&V.charAt(V.length-1)==="]"?V.slice(1,-1):V,U=w.decodeDotInKeys?b.replace(/%2E/g,"."):b,$=parseInt(U,10);!w.parseArrays&&U===""?L={0:R}:!isNaN($)&&V!==U&&String($)===U&&$>=0&&w.parseArrays&&$<=w.arrayLimit?(L=[],L[$]=R):U!=="__proto__"&&(L[U]=R)}R=L}return R},v=function(x,w){var E=w.allowDots?x.replace(/\.([^.[]+)/g,"[$1]"):x;if(w.depth<=0)return!w.plainObjects&&e.call(Object.prototype,E)&&!w.allowPrototypes?void 0:[E];var T=/(\[[^[\]]*])/,k=/(\[[^[\]]*])/g,R=T.exec(E),N=R?E.slice(0,R.index):E,L=[];if(N){if(!w.plainObjects&&e.call(Object.prototype,N)&&!w.allowPrototypes)return;L.push(N)}for(var V=0;(R=k.exec(E))!==null&&V<w.depth;){V+=1;var b=R[1].slice(1,-1);if(!w.plainObjects&&e.call(Object.prototype,b)&&!w.allowPrototypes)return;L.push(R[1])}if(R){if(w.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+w.depth+" and strictDepth is true");L.push("["+E.slice(R.index)+"]")}return L},h=function(x,w,E,T){if(x){var k=v(x,E);if(k)return m(k,w,E,T)}},p=function(x){if(!x)return r;if(typeof x.allowEmptyArrays<"u"&&typeof x.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof x.decodeDotInKeys<"u"&&typeof x.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(x.decoder!==null&&typeof x.decoder<"u"&&typeof x.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof x.charset<"u"&&x.charset!=="utf-8"&&x.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof x.throwOnLimitExceeded<"u"&&typeof x.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var w=typeof x.charset>"u"?r.charset:x.charset,E=typeof x.duplicates>"u"?r.duplicates:x.duplicates;if(E!=="combine"&&E!=="first"&&E!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var T=typeof x.allowDots>"u"?x.decodeDotInKeys===!0?!0:r.allowDots:!!x.allowDots;return{allowDots:T,allowEmptyArrays:typeof x.allowEmptyArrays=="boolean"?!!x.allowEmptyArrays:r.allowEmptyArrays,allowPrototypes:typeof x.allowPrototypes=="boolean"?x.allowPrototypes:r.allowPrototypes,allowSparse:typeof x.allowSparse=="boolean"?x.allowSparse:r.allowSparse,arrayLimit:typeof x.arrayLimit=="number"?x.arrayLimit:r.arrayLimit,charset:w,charsetSentinel:typeof x.charsetSentinel=="boolean"?x.charsetSentinel:r.charsetSentinel,comma:typeof x.comma=="boolean"?x.comma:r.comma,decodeDotInKeys:typeof x.decodeDotInKeys=="boolean"?x.decodeDotInKeys:r.decodeDotInKeys,decoder:typeof x.decoder=="function"?x.decoder:r.decoder,delimiter:typeof x.delimiter=="string"||i.isRegExp(x.delimiter)?x.delimiter:r.delimiter,depth:typeof x.depth=="number"||x.depth===!1?+x.depth:r.depth,duplicates:E,ignoreQueryPrefix:x.ignoreQueryPrefix===!0,interpretNumericEntities:typeof x.interpretNumericEntities=="boolean"?x.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof x.parameterLimit=="number"?x.parameterLimit:r.parameterLimit,parseArrays:x.parseArrays!==!1,plainObjects:typeof x.plainObjects=="boolean"?x.plainObjects:r.plainObjects,strictDepth:typeof x.strictDepth=="boolean"?!!x.strictDepth:r.strictDepth,strictNullHandling:typeof x.strictNullHandling=="boolean"?x.strictNullHandling:r.strictNullHandling,throwOnLimitExceeded:typeof x.throwOnLimitExceeded=="boolean"?x.throwOnLimitExceeded:!1}};return kc=function(y,x){var w=p(x);if(y===""||y===null||typeof y>"u")return w.plainObjects?{__proto__:null}:{};for(var E=typeof y=="string"?f(y,w):y,T=w.plainObjects?{__proto__:null}:{},k=Object.keys(E),R=0;R<k.length;++R){var N=k[R],L=h(N,E[N],w,typeof y=="string");T=i.merge(T,L,w)}return w.allowSparse===!0?T:i.compact(T)},kc}var Lc,zg;function xw(){if(zg)return Lc;zg=1;var i=vw(),e=_w(),t=Yd();return Lc={formats:t,parse:e,stringify:i},Lc}var Vg;function ww(){if(Vg)return fi;Vg=1;var i=zx();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,o=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,a=["<",">",'"',"`"," ","\r",`
`,"	"],u=["{","}","|","\\","^","`"].concat(a),c=["'"].concat(u),f=["%","/","?",";","#"].concat(c),m=["/","?","#"],v=255,h=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},E=xw();function T(L,V,b){if(L&&typeof L=="object"&&L instanceof e)return L;var U=new e;return U.parse(L,V,b),U}e.prototype.parse=function(L,V,b){if(typeof L!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof L);var U=L.indexOf("?"),$=U!==-1&&U<L.indexOf("#")?"?":"#",ee=L.split($),Z=/\\/g;ee[0]=ee[0].replace(Z,"/"),L=ee.join($);var z=L;if(z=z.trim(),!b&&L.split("#").length===1){var Y=o.exec(z);if(Y)return this.path=z,this.href=z,this.pathname=Y[1],Y[2]?(this.search=Y[2],V?this.query=E.parse(this.search.substr(1)):this.query=this.search.substr(1)):V&&(this.search="",this.query={}),this}var j=t.exec(z);if(j){j=j[0];var ce=j.toLowerCase();this.protocol=ce,z=z.substr(j.length)}if(b||j||z.match(/^\/\/[^@/]+@[^@/]+/)){var I=z.substr(0,2)==="//";I&&!(j&&x[j])&&(z=z.substr(2),this.slashes=!0)}if(!x[j]&&(I||j&&!w[j])){for(var P=-1,A=0;A<m.length;A++){var F=z.indexOf(m[A]);F!==-1&&(P===-1||F<P)&&(P=F)}var M,C;P===-1?C=z.lastIndexOf("@"):C=z.lastIndexOf("@",P),C!==-1&&(M=z.slice(0,C),z=z.slice(C+1),this.auth=decodeURIComponent(M)),P=-1;for(var A=0;A<f.length;A++){var F=z.indexOf(f[A]);F!==-1&&(P===-1||F<P)&&(P=F)}P===-1&&(P=z.length),this.host=z.slice(0,P),z=z.slice(P),this.parseHost(),this.hostname=this.hostname||"";var O=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!O)for(var H=this.hostname.split(/\./),A=0,J=H.length;A<J;A++){var te=H[A];if(te&&!te.match(h)){for(var ne="",ae=0,le=te.length;ae<le;ae++)te.charCodeAt(ae)>127?ne+="x":ne+=te[ae];if(!ne.match(h)){var de=H.slice(0,A),ie=H.slice(A+1),ve=te.match(p);ve&&(de.push(ve[1]),ie.unshift(ve[2])),ie.length&&(z="/"+ie.join(".")+z),this.hostname=de.join(".");break}}}this.hostname.length>v?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=i.toASCII(this.hostname));var Se=this.port?":"+this.port:"",ke=this.hostname||"";this.host=ke+Se,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),z[0]!=="/"&&(z="/"+z))}if(!y[ce])for(var A=0,J=c.length;A<J;A++){var Fe=c[A];if(z.indexOf(Fe)!==-1){var Ee=encodeURIComponent(Fe);Ee===Fe&&(Ee=escape(Fe)),z=z.split(Fe).join(Ee)}}var Ae=z.indexOf("#");Ae!==-1&&(this.hash=z.substr(Ae),z=z.slice(0,Ae));var qe=z.indexOf("?");if(qe!==-1?(this.search=z.substr(qe),this.query=z.substr(qe+1),V&&(this.query=E.parse(this.query)),z=z.slice(0,qe)):V&&(this.search="",this.query={}),z&&(this.pathname=z),w[ce]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Se=this.pathname||"",st=this.search||"";this.path=Se+st}return this.href=this.format(),this};function k(L){return typeof L=="string"&&(L=T(L)),L instanceof e?L.format():e.prototype.format.call(L)}e.prototype.format=function(){var L=this.auth||"";L&&(L=encodeURIComponent(L),L=L.replace(/%3A/i,":"),L+="@");var V=this.protocol||"",b=this.pathname||"",U=this.hash||"",$=!1,ee="";this.host?$=L+this.host:this.hostname&&($=L+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&($+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(ee=E.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var Z=this.search||ee&&"?"+ee||"";return V&&V.substr(-1)!==":"&&(V+=":"),this.slashes||(!V||w[V])&&$!==!1?($="//"+($||""),b&&b.charAt(0)!=="/"&&(b="/"+b)):$||($=""),U&&U.charAt(0)!=="#"&&(U="#"+U),Z&&Z.charAt(0)!=="?"&&(Z="?"+Z),b=b.replace(/[?#]/g,function(z){return encodeURIComponent(z)}),Z=Z.replace("#","%23"),V+$+b+Z+U};function R(L,V){return T(L,!1,!0).resolve(V)}e.prototype.resolve=function(L){return this.resolveObject(T(L,!1,!0)).format()};function N(L,V){return L?T(L,!1,!0).resolveObject(V):V}return e.prototype.resolveObject=function(L){if(typeof L=="string"){var V=new e;V.parse(L,!1,!0),L=V}for(var b=new e,U=Object.keys(this),$=0;$<U.length;$++){var ee=U[$];b[ee]=this[ee]}if(b.hash=L.hash,L.href==="")return b.href=b.format(),b;if(L.slashes&&!L.protocol){for(var Z=Object.keys(L),z=0;z<Z.length;z++){var Y=Z[z];Y!=="protocol"&&(b[Y]=L[Y])}return w[b.protocol]&&b.hostname&&!b.pathname&&(b.pathname="/",b.path=b.pathname),b.href=b.format(),b}if(L.protocol&&L.protocol!==b.protocol){if(!w[L.protocol]){for(var j=Object.keys(L),ce=0;ce<j.length;ce++){var I=j[ce];b[I]=L[I]}return b.href=b.format(),b}if(b.protocol=L.protocol,!L.host&&!x[L.protocol]){for(var J=(L.pathname||"").split("/");J.length&&!(L.host=J.shift()););L.host||(L.host=""),L.hostname||(L.hostname=""),J[0]!==""&&J.unshift(""),J.length<2&&J.unshift(""),b.pathname=J.join("/")}else b.pathname=L.pathname;if(b.search=L.search,b.query=L.query,b.host=L.host||"",b.auth=L.auth,b.hostname=L.hostname||L.host,b.port=L.port,b.pathname||b.search){var P=b.pathname||"",A=b.search||"";b.path=P+A}return b.slashes=b.slashes||L.slashes,b.href=b.format(),b}var F=b.pathname&&b.pathname.charAt(0)==="/",M=L.host||L.pathname&&L.pathname.charAt(0)==="/",C=M||F||b.host&&L.pathname,O=C,H=b.pathname&&b.pathname.split("/")||[],J=L.pathname&&L.pathname.split("/")||[],te=b.protocol&&!w[b.protocol];if(te&&(b.hostname="",b.port=null,b.host&&(H[0]===""?H[0]=b.host:H.unshift(b.host)),b.host="",L.protocol&&(L.hostname=null,L.port=null,L.host&&(J[0]===""?J[0]=L.host:J.unshift(L.host)),L.host=null),C=C&&(J[0]===""||H[0]==="")),M)b.host=L.host||L.host===""?L.host:b.host,b.hostname=L.hostname||L.hostname===""?L.hostname:b.hostname,b.search=L.search,b.query=L.query,H=J;else if(J.length)H||(H=[]),H.pop(),H=H.concat(J),b.search=L.search,b.query=L.query;else if(L.search!=null){if(te){b.host=H.shift(),b.hostname=b.host;var ne=b.host&&b.host.indexOf("@")>0?b.host.split("@"):!1;ne&&(b.auth=ne.shift(),b.hostname=ne.shift(),b.host=b.hostname)}return b.search=L.search,b.query=L.query,(b.pathname!==null||b.search!==null)&&(b.path=(b.pathname?b.pathname:"")+(b.search?b.search:"")),b.href=b.format(),b}if(!H.length)return b.pathname=null,b.search?b.path="/"+b.search:b.path=null,b.href=b.format(),b;for(var ae=H.slice(-1)[0],le=(b.host||L.host||H.length>1)&&(ae==="."||ae==="..")||ae==="",de=0,ie=H.length;ie>=0;ie--)ae=H[ie],ae==="."?H.splice(ie,1):ae===".."?(H.splice(ie,1),de++):de&&(H.splice(ie,1),de--);if(!C&&!O)for(;de--;de)H.unshift("..");C&&H[0]!==""&&(!H[0]||H[0].charAt(0)!=="/")&&H.unshift(""),le&&H.join("/").substr(-1)!=="/"&&H.push("");var ve=H[0]===""||H[0]&&H[0].charAt(0)==="/";if(te){b.hostname=ve?"":H.length?H.shift():"",b.host=b.hostname;var ne=b.host&&b.host.indexOf("@")>0?b.host.split("@"):!1;ne&&(b.auth=ne.shift(),b.hostname=ne.shift(),b.host=b.hostname)}return C=C||b.host&&H.length,C&&!ve&&H.unshift(""),H.length>0?b.pathname=H.join("/"):(b.pathname=null,b.path=null),(b.pathname!==null||b.search!==null)&&(b.path=(b.pathname?b.pathname:"")+(b.search?b.search:"")),b.auth=L.auth||b.auth,b.slashes=b.slashes||L.slashes,b.href=b.format(),b},e.prototype.parseHost=function(){var L=this.host,V=r.exec(L);V&&(V=V[0],V!==":"&&(this.port=V.substr(1)),L=L.substr(0,L.length-V.length)),L&&(this.hostname=L)},fi.parse=T,fi.resolve=R,fi.resolveObject=N,fi.format=k,fi.Url=e,fi}ww();const $g={};function Ue(i,e,t=3){if($g[e])return;let r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${i}`):(r=r.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${i}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${i}`),console.warn(r))),$g[e]=!0}function _r(i){if(typeof i!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(i)}`)}function vo(i){return i.split("?")[0].split("#")[0]}function Ew(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Tw(i,e,t){return i.replace(new RegExp(Ew(e),"g"),t)}function Sw(i,e){let t="",r=0,o=-1,a=0,u=-1;for(let c=0;c<=i.length;++c){if(c<i.length)u=i.charCodeAt(c);else{if(u===47)break;u=47}if(u===47){if(!(o===c-1||a===1))if(o!==c-1&&a===2){if(t.length<2||r!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const f=t.lastIndexOf("/");if(f!==t.length-1){f===-1?(t="",r=0):(t=t.slice(0,f),r=t.length-1-t.lastIndexOf("/")),o=c,a=0;continue}}else if(t.length===2||t.length===1){t="",r=0,o=c,a=0;continue}}}else t.length>0?t+=`/${i.slice(o+1,c)}`:t=i.slice(o+1,c),r=c-o-1;o=c,a=0}else u===46&&a!==-1?++a:a=-1}return t}const Et={toPosix(i){return Tw(i,"\\","/")},isUrl(i){return/^https?:/.test(this.toPosix(i))},isDataUrl(i){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(i)},isBlobUrl(i){return i.startsWith("blob:")},hasProtocol(i){return/^[^/:]+:/.test(this.toPosix(i))},getProtocol(i){_r(i),i=this.toPosix(i);const e=/^file:\/\/\//.exec(i);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(i);return t?t[0]:""},toAbsolute(i,e,t){if(_r(i),this.isDataUrl(i)||this.isBlobUrl(i))return i;const r=vo(this.toPosix(e??ge.ADAPTER.getBaseUrl())),o=vo(this.toPosix(t??this.rootname(r)));return i=this.toPosix(i),i.startsWith("/")?Et.join(o,i.slice(1)):this.isAbsolute(i)?i:this.join(r,i)},normalize(i){if(_r(i),i.length===0)return".";if(this.isDataUrl(i)||this.isBlobUrl(i))return i;i=this.toPosix(i);let e="";const t=i.startsWith("/");this.hasProtocol(i)&&(e=this.rootname(i),i=i.slice(e.length));const r=i.endsWith("/");return i=Sw(i),i.length>0&&r&&(i+="/"),t?`/${i}`:e+i},isAbsolute(i){return _r(i),i=this.toPosix(i),this.hasProtocol(i)?!0:i.startsWith("/")},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){const r=i[t];if(_r(r),r.length>0)if(e===void 0)e=r;else{const o=i[t-1]??"";this.joinExtensions.includes(this.extname(o).toLowerCase())?e+=`/../${r}`:e+=`/${r}`}}return e===void 0?".":this.normalize(e)},dirname(i){if(_r(i),i.length===0)return".";i=this.toPosix(i);let e=i.charCodeAt(0);const t=e===47;let r=-1,o=!0;const a=this.getProtocol(i),u=i;i=i.slice(a.length);for(let c=i.length-1;c>=1;--c)if(e=i.charCodeAt(c),e===47){if(!o){r=c;break}}else o=!1;return r===-1?t?"/":this.isUrl(u)?a+i:a:t&&r===1?"//":a+i.slice(0,r)},rootname(i){_r(i),i=this.toPosix(i);let e="";if(i.startsWith("/")?e="/":e=this.getProtocol(i),this.isUrl(i)){const t=i.indexOf("/",e.length);t!==-1?e=i.slice(0,t):e=i,e.endsWith("/")||(e+="/")}return e},basename(i,e){_r(i),e&&_r(e),i=vo(this.toPosix(i));let t=0,r=-1,o=!0,a;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e.length===i.length&&e===i)return"";let u=e.length-1,c=-1;for(a=i.length-1;a>=0;--a){const f=i.charCodeAt(a);if(f===47){if(!o){t=a+1;break}}else c===-1&&(o=!1,c=a+1),u>=0&&(f===e.charCodeAt(u)?--u===-1&&(r=a):(u=-1,r=c))}return t===r?r=c:r===-1&&(r=i.length),i.slice(t,r)}for(a=i.length-1;a>=0;--a)if(i.charCodeAt(a)===47){if(!o){t=a+1;break}}else r===-1&&(o=!1,r=a+1);return r===-1?"":i.slice(t,r)},extname(i){_r(i),i=vo(this.toPosix(i));let e=-1,t=0,r=-1,o=!0,a=0;for(let u=i.length-1;u>=0;--u){const c=i.charCodeAt(u);if(c===47){if(!o){t=u+1;break}continue}r===-1&&(o=!1,r=u+1),c===46?e===-1?e=u:a!==1&&(a=1):e!==-1&&(a=-1)}return e===-1||r===-1||a===0||a===1&&e===r-1&&e===t+1?"":i.slice(e,r)},parse(i){_r(i);const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;i=vo(this.toPosix(i));let t=i.charCodeAt(0);const r=this.isAbsolute(i);let o;e.root=this.rootname(i),r||this.hasProtocol(i)?o=1:o=0;let a=-1,u=0,c=-1,f=!0,m=i.length-1,v=0;for(;m>=o;--m){if(t=i.charCodeAt(m),t===47){if(!f){u=m+1;break}continue}c===-1&&(f=!1,c=m+1),t===46?a===-1?a=m:v!==1&&(v=1):a!==-1&&(v=-1)}return a===-1||c===-1||v===0||v===1&&a===c-1&&a===u+1?c!==-1&&(u===0&&r?e.base=e.name=i.slice(1,c):e.base=e.name=i.slice(u,c)):(u===0&&r?(e.name=i.slice(1,a),e.base=i.slice(1,c)):(e.name=i.slice(u,a),e.base=i.slice(u,c)),e.ext=i.slice(a,c)),e.dir=this.dirname(i),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let Dc;async function Aw(){return Dc??(Dc=(async()=>{const i=document.createElement("canvas").getContext("webgl");if(!i)return Wt.UNPACK;const e=await new Promise(a=>{const u=document.createElement("video");u.onloadeddata=()=>a(u),u.onerror=()=>a(null),u.autoplay=!1,u.crossOrigin="anonymous",u.preload="auto",u.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",u.load()});if(!e)return Wt.UNPACK;const t=i.createTexture();i.bindTexture(i.TEXTURE_2D,t);const r=i.createFramebuffer();i.bindFramebuffer(i.FRAMEBUFFER,r),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t,0),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e);const o=new Uint8Array(4);return i.readPixels(0,0,1,1,i.RGBA,i.UNSIGNED_BYTE,o),i.deleteFramebuffer(r),i.deleteTexture(t),i.getExtension("WEBGL_lose_context")?.loseContext(),o[0]<=o[3]?Wt.PMA:Wt.UNPACK})()),Dc}let Oc;function bw(){return typeof Oc>"u"&&(Oc=(function(){const i={stencil:!0,failIfMajorPerformanceCaveat:ge.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!ge.ADAPTER.getWebGLRenderingContext())return!1;const e=ge.ADAPTER.createCanvas();let t=e.getContext("webgl",i)||e.getContext("experimental-webgl",i);const r=!!t?.getContextAttributes()?.stencil;if(t){const o=t.getExtension("WEBGL_lose_context");o&&o.loseContext()}return t=null,r}catch{return!1}})()),Oc}var Cw={grad:.9,turn:360,rad:360/(2*Math.PI)},un=function(i){return typeof i=="string"?i.length>0:typeof i=="number"},wt=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*i)/t+0},lr=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),i>t?t:i>e?i:e},ov=function(i){return(i=isFinite(i)?i%360:0)>0?i:i+360},Wg=function(i){return{r:lr(i.r,0,255),g:lr(i.g,0,255),b:lr(i.b,0,255),a:lr(i.a)}},Bc=function(i){return{r:wt(i.r),g:wt(i.g),b:wt(i.b),a:wt(i.a,3)}},Iw=/^#([0-9a-f]{3,8})$/i,Za=function(i){var e=i.toString(16);return e.length<2?"0"+e:e},av=function(i){var e=i.r,t=i.g,r=i.b,o=i.a,a=Math.max(e,t,r),u=a-Math.min(e,t,r),c=u?a===e?(t-r)/u:a===t?2+(r-e)/u:4+(e-t)/u:0;return{h:60*(c<0?c+6:c),s:a?u/a*100:0,v:a/255*100,a:o}},lv=function(i){var e=i.h,t=i.s,r=i.v,o=i.a;e=e/360*6,t/=100,r/=100;var a=Math.floor(e),u=r*(1-t),c=r*(1-(e-a)*t),f=r*(1-(1-e+a)*t),m=a%6;return{r:255*[r,c,u,u,f,r][m],g:255*[f,r,r,c,u,u][m],b:255*[u,u,f,r,r,c][m],a:o}},jg=function(i){return{h:ov(i.h),s:lr(i.s,0,100),l:lr(i.l,0,100),a:lr(i.a)}},Xg=function(i){return{h:wt(i.h),s:wt(i.s),l:wt(i.l),a:wt(i.a,3)}},Yg=function(i){return lv((t=(e=i).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},ko=function(i){return{h:(e=av(i)).h,s:(o=(200-(t=e.s))*(r=e.v)/100)>0&&o<200?t*r/100/(o<=100?o:200-o)*100:0,l:o/2,a:e.a};var e,t,r,o},Rw=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Pw=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Mw=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,kw=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ld={string:[[function(i){var e=Iw.exec(i);return e?(i=e[1]).length<=4?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?wt(parseInt(i[3]+i[3],16)/255,2):1}:i.length===6||i.length===8?{r:parseInt(i.substr(0,2),16),g:parseInt(i.substr(2,2),16),b:parseInt(i.substr(4,2),16),a:i.length===8?wt(parseInt(i.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(i){var e=Mw.exec(i)||kw.exec(i);return e?e[2]!==e[4]||e[4]!==e[6]?null:Wg({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(i){var e=Rw.exec(i)||Pw.exec(i);if(!e)return null;var t,r,o=jg({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(Cw[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Yg(o)},"hsl"]],object:[[function(i){var e=i.r,t=i.g,r=i.b,o=i.a,a=o===void 0?1:o;return un(e)&&un(t)&&un(r)?Wg({r:Number(e),g:Number(t),b:Number(r),a:Number(a)}):null},"rgb"],[function(i){var e=i.h,t=i.s,r=i.l,o=i.a,a=o===void 0?1:o;if(!un(e)||!un(t)||!un(r))return null;var u=jg({h:Number(e),s:Number(t),l:Number(r),a:Number(a)});return Yg(u)},"hsl"],[function(i){var e=i.h,t=i.s,r=i.v,o=i.a,a=o===void 0?1:o;if(!un(e)||!un(t)||!un(r))return null;var u=(function(c){return{h:ov(c.h),s:lr(c.s,0,100),v:lr(c.v,0,100),a:lr(c.a)}})({h:Number(e),s:Number(t),v:Number(r),a:Number(a)});return lv(u)},"hsv"]]},qg=function(i,e){for(var t=0;t<e.length;t++){var r=e[t][0](i);if(r)return[r,e[t][1]]}return[null,void 0]},Lw=function(i){return typeof i=="string"?qg(i.trim(),ld.string):typeof i=="object"&&i!==null?qg(i,ld.object):[null,void 0]},Fc=function(i,e){var t=ko(i);return{h:t.h,s:lr(t.s+100*e,0,100),l:t.l,a:t.a}},Nc=function(i){return(299*i.r+587*i.g+114*i.b)/1e3/255},Kg=function(i,e){var t=ko(i);return{h:t.h,s:t.s,l:lr(t.l+100*e,0,100),a:t.a}},ud=(function(){function i(e){this.parsed=Lw(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return i.prototype.isValid=function(){return this.parsed!==null},i.prototype.brightness=function(){return wt(Nc(this.rgba),2)},i.prototype.isDark=function(){return Nc(this.rgba)<.5},i.prototype.isLight=function(){return Nc(this.rgba)>=.5},i.prototype.toHex=function(){return e=Bc(this.rgba),t=e.r,r=e.g,o=e.b,u=(a=e.a)<1?Za(wt(255*a)):"","#"+Za(t)+Za(r)+Za(o)+u;var e,t,r,o,a,u},i.prototype.toRgb=function(){return Bc(this.rgba)},i.prototype.toRgbString=function(){return e=Bc(this.rgba),t=e.r,r=e.g,o=e.b,(a=e.a)<1?"rgba("+t+", "+r+", "+o+", "+a+")":"rgb("+t+", "+r+", "+o+")";var e,t,r,o,a},i.prototype.toHsl=function(){return Xg(ko(this.rgba))},i.prototype.toHslString=function(){return e=Xg(ko(this.rgba)),t=e.h,r=e.s,o=e.l,(a=e.a)<1?"hsla("+t+", "+r+"%, "+o+"%, "+a+")":"hsl("+t+", "+r+"%, "+o+"%)";var e,t,r,o,a},i.prototype.toHsv=function(){return e=av(this.rgba),{h:wt(e.h),s:wt(e.s),v:wt(e.v),a:wt(e.a,3)};var e},i.prototype.invert=function(){return Fr({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},i.prototype.saturate=function(e){return e===void 0&&(e=.1),Fr(Fc(this.rgba,e))},i.prototype.desaturate=function(e){return e===void 0&&(e=.1),Fr(Fc(this.rgba,-e))},i.prototype.grayscale=function(){return Fr(Fc(this.rgba,-1))},i.prototype.lighten=function(e){return e===void 0&&(e=.1),Fr(Kg(this.rgba,e))},i.prototype.darken=function(e){return e===void 0&&(e=.1),Fr(Kg(this.rgba,-e))},i.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},i.prototype.alpha=function(e){return typeof e=="number"?Fr({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):wt(this.rgba.a,3);var t},i.prototype.hue=function(e){var t=ko(this.rgba);return typeof e=="number"?Fr({h:e,s:t.s,l:t.l,a:t.a}):wt(t.h)},i.prototype.isEqual=function(e){return this.toHex()===Fr(e).toHex()},i})(),Fr=function(i){return i instanceof ud?i:new ud(i)},Qg=[],Dw=function(i){i.forEach(function(e){Qg.indexOf(e)<0&&(e(ud,ld),Qg.push(e))})};function Ow(i,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var o in t)r[t[o]]=o;var a={};i.prototype.toName=function(u){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var c,f,m=r[this.toHex()];if(m)return m;if(u?.closest){var v=this.toRgb(),h=1/0,p="black";if(!a.length)for(var y in t)a[y]=new i(t[y]).toRgb();for(var x in t){var w=(c=v,f=a[x],Math.pow(c.r-f.r,2)+Math.pow(c.g-f.g,2)+Math.pow(c.b-f.b,2));w<h&&(h=w,p=x)}return p}},e.string.push([function(u){var c=u.toLowerCase(),f=c==="transparent"?"#0000":t[c];return f?new i(f).toRgb():null},"name"])}Dw([Ow]);const hs=class yl{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof yl)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const r=typeof e;if(r!==typeof t)return!1;if(r==="number"||r==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((o,a)=>o===t[a]);if(e!==null&&t!==null){const o=Object.keys(e),a=Object.keys(t);return o.length!==a.length?!1:o.every(u=>e[u]===t[u])}return e===t}toRgba(){const[e,t,r,o]=this._components;return{r:e,g:t,b:r,a:o}}toRgb(){const[e,t,r]=this._components;return{r:e,g:t,b:r}}toRgbaString(){const[e,t,r]=this.toUint8RgbArray();return`rgba(${e},${t},${r},${this.alpha})`}toUint8RgbArray(e){const[t,r,o]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(r*255),e[2]=Math.round(o*255),e}toRgbArray(e){e=e??[];const[t,r,o]=this._components;return e[0]=t,e[1]=r,e[2]=o,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,r,o,a]=yl.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=r,this._components[2]*=o,this._components[3]*=a,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let r=this._int>>16&255,o=this._int>>8&255,a=this._int&255;return t&&(r=r*e+.5|0,o=o*e+.5|0,a=a*e+.5|0),(e*255<<24)+(r<<16)+(o<<8)+a}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,r,o]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(r*e)/e,this._components[2]=Math.round(o*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,r,o,a]=this._components;return e[0]=t,e[1]=r,e[2]=o,e[3]=a,e}normalize(e){let t,r,o,a;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const u=e;t=(u>>16&255)/255,r=(u>>8&255)/255,o=(u&255)/255,a=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,r,o,a=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,r,o,a=255]=e,t/=255,r/=255,o/=255,a/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const c=yl.HEX_PATTERN.exec(e);c&&(e=`#${c[2]}`)}const u=Fr(e);u.isValid()&&({r:t,g:r,b:o,a}=u.rgba,t/=255,r/=255,o/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=r,this._components[2]=o,this._components[3]=a,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,r]=this._components;this._int=(e*255<<16)+(t*255<<8)+(r*255|0)}_clamp(e,t=0,r=1){return typeof e=="number"?Math.min(Math.max(e,t),r):(e.forEach((o,a)=>{e[a]=Math.min(Math.max(o,t),r)}),e)}};hs.shared=new hs,hs.temp=new hs,hs.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Ze=hs;function Bw(i){return Ue("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Ze.shared.setValue(i).toHex()}function Fw(i){return Ue("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Ze.shared.setValue(i).toNumber()}function Nw(){const i=[],e=[];for(let r=0;r<32;r++)i[r]=r,e[r]=r;i[Me.NORMAL_NPM]=Me.NORMAL,i[Me.ADD_NPM]=Me.ADD,i[Me.SCREEN_NPM]=Me.SCREEN,e[Me.NORMAL]=Me.NORMAL_NPM,e[Me.ADD]=Me.ADD_NPM,e[Me.SCREEN]=Me.SCREEN_NPM;const t=[];return t.push(e),t.push(i),t}const uv=Nw();function hv(i,e){return uv[e?1:0][i]}function Uw(i,e=null){const t=i*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let r=0,o=0;r<t;r+=6,o+=4)e[r+0]=o+0,e[r+1]=o+1,e[r+2]=o+2,e[r+3]=o+0,e[r+4]=o+2,e[r+5]=o+3;return e}function cv(i){if(i.BYTES_PER_ELEMENT===4)return i instanceof Float32Array?"Float32Array":i instanceof Uint32Array?"Uint32Array":"Int32Array";if(i.BYTES_PER_ELEMENT===2){if(i instanceof Uint16Array)return"Uint16Array"}else if(i.BYTES_PER_ELEMENT===1&&i instanceof Uint8Array)return"Uint8Array";return null}function Cl(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1}function Zg(i){return!(i&i-1)&&!!i}function Jg(i){let e=(i>65535?1:0)<<4;i>>>=e;let t=(i>255?1:0)<<3;return i>>>=t,e|=t,t=(i>15?1:0)<<2,i>>>=t,e|=t,t=(i>3?1:0)<<1,i>>>=t,e|=t,e|i>>1}function ws(i,e,t){const r=i.length;let o;if(e>=r||t===0)return;t=e+t>r?r-e:t;const a=r-t;for(o=e;o<a;++o)i[o]=i[o+t];i.length=a}function Xn(i){return i===0?0:i<0?-1:1}let Gw=0;function Ri(){return++Gw}const hd=class{constructor(i,e,t,r){this.left=i,this.top=e,this.right=t,this.bottom=r}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};hd.EMPTY=new hd(0,0,0,0);let ey=hd;const ty={},Nr=Object.create(null),Hn=Object.create(null);class Hw{constructor(e,t,r){this._canvas=ge.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||ge.RESOLUTION,this.resize(e,t)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function ry(i,e,t){for(let r=0,o=4*t*e;r<e;++r,o+=4)if(i[o+3]!==0)return!1;return!0}function ny(i,e,t,r,o){const a=4*e;for(let u=r,c=r*a+4*t;u<=o;++u,c+=a)if(i[c+3]!==0)return!1;return!0}function zw(i){const{width:e,height:t}=i,r=i.getContext("2d",{willReadFrequently:!0});if(r===null)throw new TypeError("Failed to get canvas 2D context");const o=r.getImageData(0,0,e,t).data;let a=0,u=0,c=e-1,f=t-1;for(;u<t&&ry(o,e,u);)++u;if(u===t)return ey.EMPTY;for(;ry(o,e,f);)--f;for(;ny(o,e,a,u,f);)++a;for(;ny(o,e,c,u,f);)--c;return++c,++f,new ey(a,u,c,f)}function Vw(i){const e=zw(i),{width:t,height:r}=e;let o=null;if(!e.isEmpty()){const a=i.getContext("2d");if(a===null)throw new TypeError("Failed to get canvas 2D context");o=a.getImageData(e.left,e.top,t,r)}return{width:t,height:r,data:o}}function $w(i,e=globalThis.location){if(i.startsWith("data:"))return"";e=e||globalThis.location;const t=new URL(i,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function mn(i,e=1){const t=ge.RETINA_PREFIX?.exec(i);return t?parseFloat(t[1]):e}var fe=(i=>(i.Renderer="renderer",i.Application="application",i.RendererSystem="renderer-webgl-system",i.RendererPlugin="renderer-webgl-plugin",i.CanvasRendererSystem="renderer-canvas-system",i.CanvasRendererPlugin="renderer-canvas-plugin",i.Asset="asset",i.LoadParser="load-parser",i.ResolveParser="resolve-parser",i.CacheParser="cache-parser",i.DetectionParser="detection-parser",i))(fe||{});const cd=i=>{if(typeof i=="function"||typeof i=="object"&&i.extension){if(!i.extension)throw new Error("Extension class must have an extension object");i={...typeof i.extension!="object"?{type:i.extension}:i.extension,ref:i}}if(typeof i=="object")i={...i};else throw new Error("Invalid extension type");return typeof i.type=="string"&&(i.type=[i.type]),i},iy=(i,e)=>cd(i).priority??e,Te={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...i){return i.map(cd).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...i){return i.map(cd).forEach(e=>{e.type.forEach(t=>{const r=this._addHandlers,o=this._queue;r[t]?r[t]?.(e):(o[t]=o[t]||[],o[t]?.push(e))})}),this},handle(i,e,t){const r=this._addHandlers,o=this._removeHandlers;if(r[i]||o[i])throw new Error(`Extension type ${i} already has a handler`);r[i]=e,o[i]=t;const a=this._queue;return a[i]&&(a[i]?.forEach(u=>e(u)),delete a[i]),this},handleByMap(i,e){return this.handle(i,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByList(i,e,t=-1){return this.handle(i,r=>{e.includes(r.ref)||(e.push(r.ref),e.sort((o,a)=>iy(a,t)-iy(o,t)))},r=>{const o=e.indexOf(r.ref);o!==-1&&e.splice(o,1)})}};class dd{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const Ww=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function jw(i){let e="";for(let t=0;t<i;++t)t>0&&(e+=`
else `),t<i-1&&(e+=`if(test == ${t}.0){}`);return e}function Xw(i,e){if(i===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);for(;;){const r=Ww.replace(/%forloop%/gi,jw(i));if(e.shaderSource(t,r),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))i=i/2|0;else break}return i}const Uc=0,Gc=1,Hc=2,zc=3,Vc=4,$c=5;class Xr{constructor(){this.data=0,this.blendMode=Me.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Uc)}set blend(e){!!(this.data&1<<Uc)!==e&&(this.data^=1<<Uc)}get offsets(){return!!(this.data&1<<Gc)}set offsets(e){!!(this.data&1<<Gc)!==e&&(this.data^=1<<Gc)}get culling(){return!!(this.data&1<<Hc)}set culling(e){!!(this.data&1<<Hc)!==e&&(this.data^=1<<Hc)}get depthTest(){return!!(this.data&1<<zc)}set depthTest(e){!!(this.data&1<<zc)!==e&&(this.data^=1<<zc)}get depthMask(){return!!(this.data&1<<$c)}set depthMask(e){!!(this.data&1<<$c)!==e&&(this.data^=1<<$c)}get clockwiseFrontFace(){return!!(this.data&1<<Vc)}set clockwiseFrontFace(e){!!(this.data&1<<Vc)!==e&&(this.data^=1<<Vc)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Me.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new Xr;return e.depthTest=!1,e.blend=!0,e}}Xr.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const fd=[];function dv(i,e){if(!i)return null;let t="";if(typeof i=="string"){const r=/\.(\w{3,4})(?:$|\?|#)/i.exec(i);r&&(t=r[1].toLowerCase())}for(let r=fd.length-1;r>=0;--r){const o=fd[r];if(o.test&&o.test(i,t))return new o(i,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Sr{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,r,o,a,u,c,f){if(arguments.length>8)throw new Error("max arguments reached");const{name:m,items:v}=this;this._aliasCount++;for(let h=0,p=v.length;h<p;h++)v[h][m](e,t,r,o,a,u,c,f);return v===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Sr.prototype,{dispatch:{value:Sr.prototype.emit},run:{value:Sr.prototype.emit}});class Lo{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Sr("setRealSize"),this.onUpdate=new Sr("update"),this.onError=new Sr("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class jl extends Lo{constructor(e,t){const{width:r,height:o}=t||{};if(!r||!o)throw new Error("BufferResource width or height invalid");super(r,o),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,r){const o=e.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,this.unpackAlignment),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===Wt.UNPACK);const a=t.realWidth,u=t.realHeight;return r.width===a&&r.height===u?o.texSubImage2D(t.target,0,0,0,a,u,t.format,r.type,this.data):(r.width=a,r.height=u,o.texImage2D(t.target,0,r.internalFormat,a,u,0,t.format,r.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const Yw={scaleMode:cn.NEAREST,alphaMode:Wt.NPM},pd=class cs extends Do{constructor(e=null,t=null){super(),t=Object.assign({},cs.defaultOptions,t);const{alphaMode:r,mipmap:o,anisotropicLevel:a,scaleMode:u,width:c,height:f,wrapMode:m,format:v,type:h,target:p,resolution:y,resourceOptions:x}=t;e&&!(e instanceof Lo)&&(e=dv(e,x),e.internal=!0),this.resolution=y||ge.RESOLUTION,this.width=Math.round((c||0)*this.resolution)/this.resolution,this.height=Math.round((f||0)*this.resolution)/this.resolution,this._mipmap=o,this.anisotropicLevel=a,this._wrapMode=m,this._scaleMode=u,this.format=v,this.type=h,this.target=p,this.alphaMode=r,this.uid=Ri(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=c>0&&f>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let r;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,r=!0),r&&this.dirtyStyleId++,this}setSize(e,t,r){return r=r||this.resolution,this.setRealSize(e*r,t*r,r)}setRealSize(e,t,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=Zg(this.realWidth)&&Zg(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Hn[this.cacheId],delete Nr[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),cs.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,r=ge.STRICT_TEXTURE_CACHE){const o=typeof e=="string";let a=null;if(o)a=e;else{if(!e._pixiId){const c=t?.pixiIdPrefix||"pixiid";e._pixiId=`${c}_${Ri()}`}a=e._pixiId}let u=Hn[a];if(o&&r&&!u)throw new Error(`The cacheId "${a}" does not exist in BaseTextureCache.`);return u||(u=new cs(e,t),u.cacheId=a,cs.addToCache(u,a)),u}static fromBuffer(e,t,r,o){e=e||new Float32Array(t*r*4);const a=new jl(e,{width:t,height:r,...o?.resourceOptions});let u,c;return e instanceof Float32Array?(u=ue.RGBA,c=Ie.FLOAT):e instanceof Int32Array?(u=ue.RGBA_INTEGER,c=Ie.INT):e instanceof Uint32Array?(u=ue.RGBA_INTEGER,c=Ie.UNSIGNED_INT):e instanceof Int16Array?(u=ue.RGBA_INTEGER,c=Ie.SHORT):e instanceof Uint16Array?(u=ue.RGBA_INTEGER,c=Ie.UNSIGNED_SHORT):e instanceof Int8Array?(u=ue.RGBA,c=Ie.BYTE):(u=ue.RGBA,c=Ie.UNSIGNED_BYTE),a.internal=!0,new cs(a,Object.assign({},Yw,{type:c,format:u},o))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Hn[t]&&Hn[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),Hn[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=Hn[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete Hn[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete Hn[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};pd.defaultOptions={mipmap:jr.POW2,anisotropicLevel:0,scaleMode:cn.LINEAR,wrapMode:Kn.CLAMP,alphaMode:Wt.UNPACK,target:xs.TEXTURE_2D,format:ue.RGBA,type:Ie.UNSIGNED_BYTE},pd._globalBatch=0;let Oe=pd;class md{constructor(){this.texArray=null,this.blend=0,this.type=Vr.TRIANGLES,this.start=0,this.size=0,this.data=null}}let qw=0;class ht{constructor(e,t=!0,r=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=t,this.id=qw++,this.disposeRunner=new Sr("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?$r.ELEMENT_ARRAY_BUFFER:$r.ARRAY_BUFFER}get index(){return this.type===$r.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new ht(e)}}class Il{constructor(e,t=0,r=!1,o=Ie.FLOAT,a,u,c,f=1){this.buffer=e,this.size=t,this.normalized=r,this.type=o,this.stride=a,this.start=u,this.instance=c,this.divisor=f}destroy(){this.buffer=null}static from(e,t,r,o,a){return new Il(e,t,r,o,a)}}const Kw={Float32Array,Uint32Array,Int32Array,Uint8Array};function Qw(i,e){let t=0,r=0;const o={};for(let f=0;f<i.length;f++)r+=e[f],t+=i[f].length;const a=new ArrayBuffer(t*4);let u=null,c=0;for(let f=0;f<i.length;f++){const m=e[f],v=i[f],h=cv(v);o[h]||(o[h]=new Kw[h](a)),u=o[h];for(let p=0;p<v.length;p++){const y=(p/m|0)*r+c,x=p%m;u[y+x]=v[p]}c+=m}return new Float32Array(a)}const sy={5126:4,5123:2,5121:1};let Zw=0;const Jw={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Qn{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=Zw++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Sr("disposeGeometry"),this.refCount=0}addAttribute(e,t,r=0,o=!1,a,u,c,f=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof ht||(t instanceof Array&&(t=new Float32Array(t)),t=new ht(t));const m=e.split("|");if(m.length>1){for(let h=0;h<m.length;h++)this.addAttribute(m[h],t,r,o,a);return this}let v=this.buffers.indexOf(t);return v===-1&&(this.buffers.push(t),v=this.buffers.length-1),this.attributes[e]=new Il(v,r,o,a,u,c,f),this.instanced=this.instanced||f,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof ht||(e instanceof Array&&(e=new Uint16Array(e)),e=new ht(e)),e.type=$r.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],t=[],r=new ht;let o;for(o in this.attributes){const a=this.attributes[o],u=this.buffers[a.buffer];e.push(u.data),t.push(a.size*sy[a.type]/4),a.buffer=0}for(r.data=Qw(e,t),o=0;o<this.buffers.length;o++)this.buffers[o]!==this.indexBuffer&&this.buffers[o].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new Qn;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new ht(this.buffers[t].data.slice(0));for(const t in this.attributes){const r=this.attributes[t];e.attributes[t]=new Il(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=$r.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new Qn,r=[],o=[],a=[];let u;for(let c=0;c<e.length;c++){u=e[c];for(let f=0;f<u.buffers.length;f++)o[f]=o[f]||0,o[f]+=u.buffers[f].data.length,a[f]=0}for(let c=0;c<u.buffers.length;c++)r[c]=new Jw[cv(u.buffers[c].data)](o[c]),t.buffers[c]=new ht(r[c]);for(let c=0;c<e.length;c++){u=e[c];for(let f=0;f<u.buffers.length;f++)r[f].set(u.buffers[f].data,a[f]),a[f]+=u.buffers[f].data.length}if(t.attributes=u.attributes,u.indexBuffer){t.indexBuffer=t.buffers[u.buffers.indexOf(u.indexBuffer)],t.indexBuffer.type=$r.ELEMENT_ARRAY_BUFFER;let c=0,f=0,m=0,v=0;for(let h=0;h<u.buffers.length;h++)if(u.buffers[h]!==u.indexBuffer){v=h;break}for(const h in u.attributes){const p=u.attributes[h];(p.buffer|0)===v&&(f+=p.size*sy[p.type]/4)}for(let h=0;h<e.length;h++){const p=e[h].indexBuffer.data;for(let y=0;y<p.length;y++)t.indexBuffer.data[y+m]+=c;c+=e[h].buffers[v].data.length/f,m+=p.length}}return t}}class fv extends Qn{constructor(e=!1){super(),this._buffer=new ht(null,e,!1),this._indexBuffer=new ht(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Ie.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Ie.FLOAT).addAttribute("aColor",this._buffer,4,!0,Ie.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Ie.FLOAT).addIndex(this._indexBuffer)}}const Rl=Math.PI*2,e1=180/Math.PI,t1=Math.PI/180;var bt=(i=>(i[i.POLY=0]="POLY",i[i.RECT=1]="RECT",i[i.CIRC=2]="CIRC",i[i.ELIP=3]="ELIP",i[i.RREC=4]="RREC",i))(bt||{});class He{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new He(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}}He.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Ja=[new He,new He,new He,new He];class Be{constructor(e=0,t=0,r=0,o=0){this.x=Number(e),this.y=Number(t),this.width=Number(r),this.height=Number(o),this.type=bt.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Be(0,0,0,0)}clone(){return new Be(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t){const U=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=U)return!1;const $=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>$}const r=this.left,o=this.right,a=this.top,u=this.bottom;if(o<=r||u<=a)return!1;const c=Ja[0].set(e.left,e.top),f=Ja[1].set(e.left,e.bottom),m=Ja[2].set(e.right,e.top),v=Ja[3].set(e.right,e.bottom);if(m.x<=c.x||f.y<=c.y)return!1;const h=Math.sign(t.a*t.d-t.b*t.c);if(h===0||(t.apply(c,c),t.apply(f,f),t.apply(m,m),t.apply(v,v),Math.max(c.x,f.x,m.x,v.x)<=r||Math.min(c.x,f.x,m.x,v.x)>=o||Math.max(c.y,f.y,m.y,v.y)<=a||Math.min(c.y,f.y,m.y,v.y)>=u))return!1;const p=h*(f.y-c.y),y=h*(c.x-f.x),x=p*r+y*a,w=p*o+y*a,E=p*r+y*u,T=p*o+y*u;if(Math.max(x,w,E,T)<=p*c.x+y*c.y||Math.min(x,w,E,T)>=p*v.x+y*v.y)return!1;const k=h*(c.y-m.y),R=h*(m.x-c.x),N=k*r+R*a,L=k*o+R*a,V=k*r+R*u,b=k*o+R*u;return!(Math.max(N,L,V,b)<=k*c.x+R*c.y||Math.min(N,L,V,b)>=k*v.x+R*v.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),o=Math.max(this.y,e.y),a=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(r-t,0),this.y=o,this.height=Math.max(a-o,0),this}ceil(e=1,t=.001){const r=Math.ceil((this.x+this.width-t)*e)/e,o=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=r-this.x,this.height=o-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),o=Math.min(this.y,e.y),a=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=r-t,this.y=o,this.height=a-o,this}}Be.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Xl{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.radius=r,this.type=bt.CIRC}clone(){return new Xl(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const r=this.radius*this.radius;let o=this.x-e,a=this.y-t;return o*=o,a*=a,o+a<=r}getBounds(){return new Be(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Xl.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Yl{constructor(e=0,t=0,r=0,o=0){this.x=e,this.y=t,this.width=r,this.height=o,this.type=bt.ELIP}clone(){return new Yl(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let r=(e-this.x)/this.width,o=(t-this.y)/this.height;return r*=r,o*=o,r+o<=1}getBounds(){return new Be(this.x-this.width,this.y-this.height,this.width,this.height)}}Yl.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class bi{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const r=[];for(let o=0,a=t.length;o<a;o++)r.push(t[o].x,t[o].y);t=r}this.points=t,this.type=bt.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),t=new bi(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let r=!1;const o=this.points.length/2;for(let a=0,u=o-1;a<o;u=a++){const c=this.points[a*2],f=this.points[a*2+1],m=this.points[u*2],v=this.points[u*2+1];f>t!=v>t&&e<(m-c)*((t-f)/(v-f))+c&&(r=!r)}return r}}bi.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((i,e)=>`${i}, ${e}`,"")}]`};class ql{constructor(e=0,t=0,r=0,o=0,a=20){this.x=e,this.y=t,this.width=r,this.height=o,this.radius=a,this.type=bt.RREC}clone(){return new ql(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+r&&t<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;let o=e-(this.x+r),a=t-(this.y+r);const u=r*r;if(o*o+a*a<=u||(o=e-(this.x+this.width-r),o*o+a*a<=u)||(a=t-(this.y+this.height-r),o*o+a*a<=u)||(o=e-(this.x+r),o*o+a*a<=u))return!0}return!1}}ql.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Je{constructor(e=1,t=0,r=0,o=1,a=0,u=0){this.array=null,this.a=e,this.b=t,this.c=r,this.d=o,this.tx=a,this.ty=u}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,r,o,a,u){return this.a=e,this.b=t,this.c=r,this.d=o,this.tx=a,this.ty=u,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,t){t=t||new He;const r=e.x,o=e.y;return t.x=this.a*r+this.c*o+this.tx,t.y=this.b*r+this.d*o+this.ty,t}applyInverse(e,t){t=t||new He;const r=1/(this.a*this.d+this.c*-this.b),o=e.x,a=e.y;return t.x=this.d*r*o+-this.c*r*a+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*a+-this.b*r*o+(-this.ty*this.a+this.tx*this.b)*r,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),o=this.a,a=this.c,u=this.tx;return this.a=o*t-this.b*r,this.b=o*r+this.b*t,this.c=a*t-this.d*r,this.d=a*r+this.d*t,this.tx=u*t-this.ty*r,this.ty=u*r+this.ty*t,this}append(e){const t=this.a,r=this.b,o=this.c,a=this.d;return this.a=e.a*t+e.b*o,this.b=e.a*r+e.b*a,this.c=e.c*t+e.d*o,this.d=e.c*r+e.d*a,this.tx=e.tx*t+e.ty*o+this.tx,this.ty=e.tx*r+e.ty*a+this.ty,this}setTransform(e,t,r,o,a,u,c,f,m){return this.a=Math.cos(c+m)*a,this.b=Math.sin(c+m)*a,this.c=-Math.sin(c-f)*u,this.d=Math.cos(c-f)*u,this.tx=e-(r*this.a+o*this.c),this.ty=t-(r*this.b+o*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const r=this.a,o=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=o*e.a+this.d*e.c,this.d=o*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,r=this.b,o=this.c,a=this.d,u=e.pivot,c=-Math.atan2(-o,a),f=Math.atan2(r,t),m=Math.abs(c+f);return m<1e-5||Math.abs(Rl-m)<1e-5?(e.rotation=f,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=c,e.skew.y=f),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(o*o+a*a),e.position.x=this.tx+(u.x*t+u.y*o),e.position.y=this.ty+(u.x*r+u.y*a),e}invert(){const e=this.a,t=this.b,r=this.c,o=this.d,a=this.tx,u=e*o-t*r;return this.a=o/u,this.b=-t/u,this.c=-r/u,this.d=e/u,this.tx=(r*this.ty-o*a)/u,this.ty=-(e*this.ty-t*a)/u,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Je;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new Je}static get TEMP_MATRIX(){return new Je}}Je.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const gi=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],yi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vi=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],_i=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],gd=[],pv=[],el=Math.sign;function r1(){for(let i=0;i<16;i++){const e=[];gd.push(e);for(let t=0;t<16;t++){const r=el(gi[i]*gi[t]+vi[i]*yi[t]),o=el(yi[i]*gi[t]+_i[i]*yi[t]),a=el(gi[i]*vi[t]+vi[i]*_i[t]),u=el(yi[i]*vi[t]+_i[i]*_i[t]);for(let c=0;c<16;c++)if(gi[c]===r&&yi[c]===o&&vi[c]===a&&_i[c]===u){e.push(c);break}}}for(let i=0;i<16;i++){const e=new Je;e.set(gi[i],yi[i],vi[i],_i[i],0,0),pv.push(e)}}r1();const nt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:i=>gi[i],uY:i=>yi[i],vX:i=>vi[i],vY:i=>_i[i],inv:i=>i&8?i&15:-i&7,add:(i,e)=>gd[i][e],sub:(i,e)=>gd[i][nt.inv(e)],rotate180:i=>i^4,isVertical:i=>(i&3)===2,byDirection:(i,e)=>Math.abs(i)*2<=Math.abs(e)?e>=0?nt.S:nt.N:Math.abs(e)*2<=Math.abs(i)?i>0?nt.E:nt.W:e>0?i>0?nt.SE:nt.SW:i>0?nt.NE:nt.NW,matrixAppendRotationInv:(i,e,t=0,r=0)=>{const o=pv[nt.inv(e)];o.tx=t,o.ty=r,i.append(o)}};class fn{constructor(e,t,r=0,o=0){this._x=r,this._y=o,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new fn(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}fn.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const yd=class{constructor(){this.worldTransform=new Je,this.localTransform=new Je,this.position=new fn(this.onChange,this,0,0),this.scale=new fn(this.onChange,this,1,1),this.pivot=new fn(this.onChange,this,0,0),this.skew=new fn(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(i){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==i._worldID){const t=i.worldTransform,r=this.worldTransform;r.a=e.a*t.a+e.b*t.c,r.b=e.a*t.b+e.b*t.d,r.c=e.c*t.a+e.d*t.c,r.d=e.c*t.b+e.d*t.d,r.tx=e.tx*t.a+e.ty*t.c+t.tx,r.ty=e.tx*t.b+e.ty*t.d+t.ty,this._parentID=i._worldID,this._worldID++}}setFromMatrix(i){i.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(i){this._rotation!==i&&(this._rotation=i,this.updateSkew())}};yd.IDENTITY=new yd;let qd=yd;qd.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var n1=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,i1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function oy(i,e,t){const r=i.createShader(e);return i.shaderSource(r,t),i.compileShader(r),r}function Wc(i){const e=new Array(i);for(let t=0;t<e.length;t++)e[t]=!1;return e}function mv(i,e){switch(i){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Wc(2*e);case"bvec3":return Wc(3*e);case"bvec4":return Wc(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Es=[{test:i=>i.type==="float"&&i.size===1&&!i.isArray,code:i=>`
            if(uv["${i}"] !== ud["${i}"].value)
            {
                ud["${i}"].value = uv["${i}"]
                gl.uniform1f(ud["${i}"].location, uv["${i}"])
            }
            `},{test:(i,e)=>(i.type==="sampler2D"||i.type==="samplerCube"||i.type==="sampler2DArray")&&i.size===1&&!i.isArray&&(e==null||e.castToBaseTexture!==void 0),code:i=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${i}"], t);

            if(ud["${i}"].value !== t)
            {
                ud["${i}"].value = t;
                gl.uniform1i(ud["${i}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(i,e)=>i.type==="mat3"&&i.size===1&&!i.isArray&&e.a!==void 0,code:i=>`
            gl.uniformMatrix3fv(ud["${i}"].location, false, uv["${i}"].toArray(true));
            `,codeUbo:i=>`
                var ${i}_matrix = uv.${i}.toArray(true);

                data[offset] = ${i}_matrix[0];
                data[offset+1] = ${i}_matrix[1];
                data[offset+2] = ${i}_matrix[2];
        
                data[offset + 4] = ${i}_matrix[3];
                data[offset + 5] = ${i}_matrix[4];
                data[offset + 6] = ${i}_matrix[5];
        
                data[offset + 8] = ${i}_matrix[6];
                data[offset + 9] = ${i}_matrix[7];
                data[offset + 10] = ${i}_matrix[8];
            `},{test:(i,e)=>i.type==="vec2"&&i.size===1&&!i.isArray&&e.x!==void 0,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${i}"].location, v.x, v.y);
                }`,codeUbo:i=>`
                v = uv.${i};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:i=>i.type==="vec2"&&i.size===1&&!i.isArray,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${i}"].location, v[0], v[1]);
                }
            `},{test:(i,e)=>i.type==="vec4"&&i.size===1&&!i.isArray&&e.width!==void 0,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${i}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:i=>`
                    v = uv.${i};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(i,e)=>i.type==="vec4"&&i.size===1&&!i.isArray&&e.red!==void 0,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${i}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:i=>`
                    v = uv.${i};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(i,e)=>i.type==="vec3"&&i.size===1&&!i.isArray&&e.red!==void 0,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${i}"].location, v.red, v.green, v.blue)
                }`,codeUbo:i=>`
                    v = uv.${i};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:i=>i.type==="vec4"&&i.size===1&&!i.isArray,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${i}"].location, v[0], v[1], v[2], v[3])
                }`}],s1={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},o1={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function a1(i,e){const t=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const r in i.uniforms){const o=e[r];if(!o){i.uniforms[r]?.group===!0&&(i.uniforms[r].ubo?t.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${r}, '${r}');
                    `):t.push(`
                        renderer.shader.syncUniformGroup(uv.${r}, syncData);
                    `));continue}const a=i.uniforms[r];let u=!1;for(let c=0;c<Es.length;c++)if(Es[c].test(o,a)){t.push(Es[c].code(r,a)),u=!0;break}if(!u){const c=(o.size===1&&!o.isArray?s1:o1)[o.type].replace("location",`ud["${r}"].location`);t.push(`
            cu = ud["${r}"];
            cv = cu.value;
            v = uv["${r}"];
            ${c};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}const gv={};let tl=gv;function l1(){if(tl===gv||tl?.isContextLost()){const i=ge.ADAPTER.createCanvas();let e;ge.PREFER_ENV>=Mi.WEBGL2&&(e=i.getContext("webgl2",{})),e||(e=i.getContext("webgl",{})||i.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),tl=e}return tl}let rl;function u1(){if(!rl){rl=ar.MEDIUM;const i=l1();if(i&&i.getShaderPrecisionFormat){const e=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);e&&(rl=e.precision?ar.HIGH:ar.MEDIUM)}}return rl}function ay(i,e){const t=i.getShaderSource(e).split(`
`).map((m,v)=>`${v}: ${m}`),r=i.getShaderInfoLog(e),o=r.split(`
`),a={},u=o.map(m=>parseFloat(m.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(m=>m&&!a[m]?(a[m]=!0,!0):!1),c=[""];u.forEach(m=>{t[m-1]=`%c${t[m-1]}%c`,c.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const f=t.join(`
`);c[0]=f,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn(...c),console.groupEnd()}function h1(i,e,t,r){i.getProgramParameter(e,i.LINK_STATUS)||(i.getShaderParameter(t,i.COMPILE_STATUS)||ay(i,t),i.getShaderParameter(r,i.COMPILE_STATUS)||ay(i,r),console.error("PixiJS Error: Could not initialize shader."),i.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",i.getProgramInfoLog(e)))}const c1={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function yv(i){return c1[i]}let nl=null;const ly={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function vv(i,e){if(!nl){const t=Object.keys(ly);nl={};for(let r=0;r<t.length;++r){const o=t[r];nl[i[o]]=ly[o]}}return nl[e]}function uy(i,e,t){if(i.substring(0,9)!=="precision"){let r=e;return e===ar.HIGH&&t!==ar.HIGH&&(r=ar.MEDIUM),`precision ${r} float;
${i}`}else if(t!==ar.HIGH&&i.substring(0,15)==="precision highp")return i.replace("precision highp","precision mediump");return i}let _o;function d1(){if(typeof _o=="boolean")return _o;try{_o=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{_o=!1}return _o}let f1=0;const il={},vd=class ds{constructor(e,t,r="pixi-shader",o={}){this.extra={},this.id=f1++,this.vertexSrc=e||ds.defaultVertexSrc,this.fragmentSrc=t||ds.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=o,this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),il[r]?(il[r]++,r+=`-${il[r]}`):il[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}
${this.fragmentSrc}`,this.vertexSrc=uy(this.vertexSrc,ds.defaultVertexPrecision,ar.HIGH),this.fragmentSrc=uy(this.fragmentSrc,ds.defaultFragmentPrecision,u1())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return i1}static get defaultFragmentSrc(){return n1}static from(e,t,r){const o=e+t;let a=ty[o];return a||(ty[o]=a=new ds(e,t,r)),a}};vd.defaultVertexPrecision=ar.HIGH,vd.defaultFragmentPrecision=dn.apple.device?ar.HIGH:ar.MEDIUM;let pn=vd,p1=0;class Ar{constructor(e,t,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=p1++,this.static=!!t,this.ubo=!!r,e instanceof ht?(this.buffer=e,this.buffer.type=$r.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new ht(new Float32Array(1)),this.buffer.type=$r.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,r){if(!this.ubo)this.uniforms[e]=new Ar(t,r);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,t,r){return new Ar(e,t,r)}static uboFrom(e,t){return new Ar(e,t??!0,!0)}}class Wr{constructor(e,t){this.uniformBindCount=0,this.program=e,t?t instanceof Ar?this.uniformGroup=t:this.uniformGroup=new Ar(t):this.uniformGroup=new Ar({}),this.disposeRunner=new Sr("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const r in t.uniforms){const o=t.uniforms[r];if(o.group===!0&&this.checkUniformExists(e,o))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,r){const o=pn.from(e,t);return new Wr(o,r)}}class m1{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const r=new Int32Array(e);for(let a=0;a<e;a++)r[a]=a;this.defaultGroupCache[e]=Ar.from({uSamplers:r},!0);let o=this.fragTemplate;o=o.replace(/%count%/gi,`${e}`),o=o.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new pn(this.vertexSrc,o)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new Je,default:this.defaultGroupCache[e]};return new Wr(this.programCache[e],t)}generateSampleSrc(e){let t="";t+=`
`,t+=`
`;for(let r=0;r<e;r++)r>0&&(t+=`
else `),r<e-1&&(t+=`if(vTextureId < ${r}.5)`),t+=`
{`,t+=`
	color = texture2D(uSamplers[${r}], vTextureCoord);`,t+=`
}`;return t+=`
`,t+=`
`,t}}class _d{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function g1(){return!dn.apple.device}function y1(i){let e=!0;const t=ge.ADAPTER.getNavigator();if(dn.tablet||dn.phone){if(dn.apple.device){const r=t.userAgent.match(/OS (\d+)_(\d+)?/);r&&parseInt(r[1],10)<11&&(e=!1)}if(dn.android.device){const r=t.userAgent.match(/Android\s([0-9.]*)/);r&&parseInt(r[1],10)<7&&(e=!1)}}return e?i:4}class Kl{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var v1=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,_1=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const So=class wr extends Kl{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=fv,this.vertexSize=6,this.state=Xr.for2d(),this.size=wr.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??y1(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??g1(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return Ue("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return _1}static get defaultFragmentTemplate(){return v1}setShaderGenerator({vertex:e=wr.defaultVertexSrc,fragment:t=wr.defaultFragmentTemplate}={}){this.shaderGenerator=new m1(e,t)}contextChange(){const e=this.renderer.gl;ge.PREFER_ENV===Mi.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),wr.defaultMaxTextures),this.maxTextures=Xw(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=wr,r=this.size/4,o=Math.floor(r/this.maxTextures)+1;for(;e.length<r;)e.push(new md);for(;t.length<o;)t.push(new _d);for(let a=0;a<this.maxTextures;a++)this._tempBoundTextures[a]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,r=wr._textureArrayPool,o=this.renderer.batch,a=this._tempBoundTextures,u=this.renderer.textureGC.count;let c=++Oe._globalBatch,f=0,m=r[0],v=0;o.copyBoundTextures(a,t);for(let h=0;h<this._bufferSize;++h){const p=e[h];e[h]=null,p._batchEnabled!==c&&(m.count>=t&&(o.boundArray(m,a,c,t),this.buildDrawCalls(m,v,h),v=h,m=r[++f],++c),p._batchEnabled=c,p.touched=u,m.elements[m.count++]=p)}m.count>0&&(o.boundArray(m,a,c,t),this.buildDrawCalls(m,v,this._bufferSize),++f,++c);for(let h=0;h<a.length;h++)a[h]=null;Oe._globalBatch=c}buildDrawCalls(e,t,r){const{_bufferedElements:o,_attributeBuffer:a,_indexBuffer:u,vertexSize:c}=this,f=wr._drawCallPool;let m=this._dcIndex,v=this._aIndex,h=this._iIndex,p=f[m];p.start=this._iIndex,p.texArray=e;for(let y=t;y<r;++y){const x=o[y],w=x._texture.baseTexture,E=uv[w.alphaMode?1:0][x.blendMode];o[y]=null,t<y&&p.blend!==E&&(p.size=h-p.start,t=y,p=f[++m],p.texArray=e,p.start=h),this.packInterleavedGeometry(x,a,u,v,h),v+=x.vertexData.length/2*c,h+=x.indices.length,p.blend=E}t<r&&(p.size=h-p.start,++m),this._dcIndex=m,this._aIndex=v,this._iIndex=h}bindAndClearTexArray(e){const t=this.renderer.texture;for(let r=0;r<e.count;r++)t.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:r}=this;wr.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:r}=this.renderer,o=wr._drawCallPool;let a=null;for(let u=0;u<e;u++){const{texArray:c,type:f,size:m,start:v,blend:h}=o[u];a!==c&&(a=c,this.bindAndClearTexArray(c)),this.state.blendMode=h,r.set(this.state),t.drawElements(f,m,t.UNSIGNED_SHORT,v*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),wr.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=Cl(Math.ceil(e/8)),r=Jg(t),o=t*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let a=this._aBuffers[o];return a||(this._aBuffers[o]=a=new dd(o*this.vertexSize*4)),a}getIndexBuffer(e){const t=Cl(Math.ceil(e/12)),r=Jg(t),o=t*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let a=this._iBuffers[r];return a||(this._iBuffers[r]=a=new Uint16Array(o)),a}packInterleavedGeometry(e,t,r,o,a){const{uint32View:u,float32View:c}=t,f=o/this.vertexSize,m=e.uvs,v=e.indices,h=e.vertexData,p=e._texture.baseTexture._batchLocation,y=Math.min(e.worldAlpha,1),x=Ze.shared.setValue(e._tintRGB).toPremultiplied(y,e._texture.baseTexture.alphaMode>0);for(let w=0;w<h.length;w+=2)c[o++]=h[w],c[o++]=h[w+1],c[o++]=m[w],c[o++]=m[w+1],u[o++]=x,c[o++]=p;for(let w=0;w<v.length;w++)r[a++]=f+v[w]}};So.defaultBatchSize=4096,So.extension={name:"batch",type:fe.RendererPlugin},So._drawCallPool=[],So._textureArrayPool=[];let xi=So;Te.add(xi);var x1=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,w1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const xd=class Ao extends Wr{constructor(e,t,r){const o=pn.from(e||Ao.defaultVertexSrc,t||Ao.defaultFragmentSrc);super(o,r),this.padding=0,this.resolution=Ao.defaultResolution,this.multisample=Ao.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Xr}apply(e,t,r,o,a){e.applyFilter(this,t,r,o)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return w1}static get defaultFragmentSrc(){return x1}};xd.defaultResolution=1,xd.defaultMultisample=ft.NONE;let Ft=xd;class Pl{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Ze(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:t,background:r,backgroundAlpha:o}=e,a=r??t;a!==void 0&&(this.color=a),this.alpha=o}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}Pl.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Pl.extension={type:[fe.RendererSystem,fe.CanvasRendererSystem],name:"background"};Te.add(Pl);class _v{constructor(e){this.renderer=e,this.emptyRenderer=new Kl(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:r}=this.renderer.texture;for(let o=t-1;o>=0;--o)e[o]=r[o]||null,e[o]&&(e[o]._batchLocation=o)}boundArray(e,t,r,o){const{elements:a,ids:u,count:c}=e;let f=0;for(let m=0;m<c;m++){const v=a[m],h=v._batchLocation;if(h>=0&&h<o&&t[h]===v){u[m]=h;continue}for(;f<o;){const p=t[f];if(p&&p._batchEnabled===r&&p._batchLocation===f){f++;continue}u[m]=f,v._batchLocation=f,t[f]=v;break}}}destroy(){this.renderer=null}}_v.extension={type:fe.RendererSystem,name:"batch"};Te.add(_v);let hy=0;class Ml{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=hy++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,r=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:r,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=hy++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;t.addEventListener!==void 0&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let r;if(ge.PREFER_ENV>=Mi.WEBGL2&&(r=e.getContext("webgl2",t)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const o=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=o,o||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Ml.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Ml.extension={type:fe.RendererSystem,name:"context"};Te.add(Ml);class wd{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Sr("disposeFramebuffer"),this.multisample=ft.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new Oe(null,{scaleMode:cn.NEAREST,resolution:1,mipmap:jr.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new Oe(null,{scaleMode:cn.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:jr.OFF,format:ue.DEPTH_COMPONENT,type:Ie.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const o=this.colorTextures[r],a=o.resolution;o.setSize(e/a,t/a)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(e/r,t/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class xv extends Oe{constructor(e={}){if(typeof e=="number"){const t=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3];e={width:t,height:r,scaleMode:o,resolution:a}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=ft.NONE),super(null,e),this.mipmap=jr.OFF,this.valid=!0,this._clear=new Ze([0,0,0,0]),this.framebuffer=new wd(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class gn extends Lo{constructor(e){const t=e,r=t.naturalWidth||t.videoWidth||t.displayWidth||t.width,o=t.naturalHeight||t.videoHeight||t.displayHeight||t.height;super(r,o),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,r){r===void 0&&!t.startsWith("data:")?e.crossOrigin=$w(t):r!==!1&&(e.crossOrigin=typeof r=="string"?r:"anonymous")}upload(e,t,r,o){const a=e.gl,u=t.realWidth,c=t.realHeight;if(o=o||this.source,typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement){if(!o.complete||o.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement&&o.readyState<=1)return!1;return a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===Wt.UNPACK),!this.noSubImage&&t.target===a.TEXTURE_2D&&r.width===u&&r.height===c?a.texSubImage2D(a.TEXTURE_2D,0,0,0,t.format,r.type,o):(r.width=u,r.height=c,a.texImage2D(t.target,0,r.internalFormat,t.format,r.type,o)),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(t,r),super.update()}dispose(){this.source=null}}class wv extends gn{constructor(e,t){if(t=t||{},typeof e=="string"){const r=new Image;gn.crossOrigin(r,e,t.crossorigin),r.src=e,e=r}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??ge.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.bitmap=null,this._load=null,t.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((t,r)=>{const o=this.source;this.url=o.src;const a=()=>{this.destroyed||(o.onload=null,o.onerror=null,this.update(),this._load=null,this.createBitmap?t(this.process()):t(this))};o.complete&&o.src?a():(o.onload=a,o.onerror=u=>{r(u),this.onError.emit(u)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,r=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then(o=>o.blob()).then(o=>t(o,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Wt.UNPACK?"premultiply":"none"})).then(o=>this.destroyed?Promise.reject():(this.bitmap=o,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,r){if(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,r,this.bitmap),!this.preserveBitmap){let o=!0;const a=t._glTextures;for(const u in a){const c=a[u];if(c!==r&&c.dirtyId!==t.dirtyId){o=!1;break}}o&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class Kd{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,r){const o=t.width,a=t.height;if(r){const u=e.width/2/o,c=e.height/2/a,f=e.x/o+u,m=e.y/a+c;r=nt.add(r,nt.NW),this.x0=f+u*nt.uX(r),this.y0=m+c*nt.uY(r),r=nt.add(r,2),this.x1=f+u*nt.uX(r),this.y1=m+c*nt.uY(r),r=nt.add(r,2),this.x2=f+u*nt.uX(r),this.y2=m+c*nt.uY(r),r=nt.add(r,2),this.x3=f+u*nt.uX(r),this.y3=m+c*nt.uY(r)}else this.x0=e.x/o,this.y0=e.y/a,this.x1=(e.x+e.width)/o,this.y1=e.y/a,this.x2=(e.x+e.width)/o,this.y2=(e.y+e.height)/a,this.x3=e.x/o,this.y3=(e.y+e.height)/a;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}Kd.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const cy=new Kd;function sl(i){i.destroy=function(){},i.on=function(){},i.once=function(){},i.emit=function(){}}class xe extends Do{constructor(e,t,r,o,a,u,c){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new Be(0,0,1,1)),e instanceof xe&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=o,this.valid=!1,this.destroyed=!1,this._uvs=cy,this.uvMatrix=null,this.orig=r||t,this._rotate=Number(a||0),a===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=u?new He(u.x,u.y):new He(0,0),this.defaultBorders=c,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:t}=this.baseTexture;t?.url&&Nr[t.url]&&xe.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,xe.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),r=new xe(this.baseTexture,!this.noFrame&&e,t,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=e),r}updateUvs(){this._uvs===cy&&(this._uvs=new Kd),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},r=ge.STRICT_TEXTURE_CACHE){const o=typeof e=="string";let a=null;if(o)a=e;else if(e instanceof Oe){if(!e.cacheId){const c=t?.pixiIdPrefix||"pixiid";e.cacheId=`${c}-${Ri()}`,Oe.addToCache(e,e.cacheId)}a=e.cacheId}else{if(!e._pixiId){const c=t?.pixiIdPrefix||"pixiid";e._pixiId=`${c}_${Ri()}`}a=e._pixiId}let u=Nr[a];if(o&&r&&!u)throw new Error(`The cacheId "${a}" does not exist in TextureCache.`);return!u&&!(e instanceof Oe)?(t.resolution||(t.resolution=mn(e)),u=new xe(new Oe(e,t)),u.baseTexture.cacheId=a,Oe.addToCache(u.baseTexture,a),xe.addToCache(u,a)):!u&&e instanceof Oe&&(u=new xe(e),xe.addToCache(u,a)),u}static fromURL(e,t){const r=Object.assign({autoLoad:!1},t?.resourceOptions),o=xe.from(e,Object.assign({resourceOptions:r},t),!1),a=o.baseTexture.resource;return o.baseTexture.valid?Promise.resolve(o):a.load().then(()=>Promise.resolve(o))}static fromBuffer(e,t,r,o){return new xe(Oe.fromBuffer(e,t,r,o))}static fromLoader(e,t,r,o){const a=new Oe(e,Object.assign({scaleMode:Oe.defaultOptions.scaleMode,resolution:mn(t)},o)),{resource:u}=a;u instanceof wv&&(u.url=t);const c=new xe(a);return r||(r=t),Oe.addToCache(c.baseTexture,r),xe.addToCache(c,r),r!==t&&(Oe.addToCache(c.baseTexture,t),xe.addToCache(c,t)),c.baseTexture.valid?Promise.resolve(c):new Promise(f=>{c.baseTexture.once("loaded",()=>f(c))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Nr[t]&&Nr[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),Nr[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=Nr[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete Nr[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)Nr[e.textureCacheIds[t]]===e&&delete Nr[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:r,width:o,height:a}=e,u=t+o>this.baseTexture.width,c=r+a>this.baseTexture.height;if(u||c){const f=u&&c?"and":"or",m=`X: ${t} + ${o} = ${t+o} > ${this.baseTexture.width}`,v=`Y: ${r} + ${a} = ${r+a} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${m} ${f} ${v}`)}this.valid=o&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return xe._EMPTY||(xe._EMPTY=new xe(new Oe),sl(xe._EMPTY),sl(xe._EMPTY.baseTexture)),xe._EMPTY}static get WHITE(){if(!xe._WHITE){const e=ge.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),xe._WHITE=new xe(Oe.from(e)),sl(xe._WHITE),sl(xe._WHITE.baseTexture)}return xe._WHITE}}class ki extends xe{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,r=!0){const o=this.baseTexture.resolution,a=Math.round(e*o)/o,u=Math.round(t*o)/o;this.valid=a>0&&u>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=u,r&&this.baseTexture.resize(a,u),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new ki(new xv(e))}}class Ev{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t,r=ft.NONE){const o=new xv(Object.assign({width:e,height:t,resolution:1,multisample:r},this.textureOptions));return new ki(o)}getOptimalTexture(e,t,r=1,o=ft.NONE){let a;e=Math.max(Math.ceil(e*r-1e-6),1),t=Math.max(Math.ceil(t*r-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||t!==this._pixelsHeight?(e=Cl(e),t=Cl(t),a=((e&65535)<<16|t&65535)>>>0,o>1&&(a+=o*4294967296)):a=o>1?-o:-1,this.texturePool[a]||(this.texturePool[a]=[]);let u=this.texturePool[a].pop();return u||(u=this.createTexture(e,t,o)),u.filterPoolKey=a,u.setResolution(r),u}getFilterTexture(e,t,r){const o=this.getOptimalTexture(e.width,e.height,t||e.resolution,r||ft.NONE);return o.filterFrame=e.filterFrame,o}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const t in this.texturePool){const r=this.texturePool[t];if(r)for(let o=0;o<r.length;o++)r[o].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const t in this.texturePool){if(!(Number(t)<0))continue;const r=this.texturePool[t];if(r)for(let o=0;o<r.length;o++)r[o].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}Ev.SCREEN_KEY=-1;class E1 extends Qn{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Tv extends Qn{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ht(this.vertices),this.uvBuffer=new ht(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let r=0,o=0;return this.uvs[0]=r,this.uvs[1]=o,this.uvs[2]=r+t.width/e.width,this.uvs[3]=o,this.uvs[4]=r+t.width/e.width,this.uvs[5]=o+t.height/e.height,this.uvs[6]=r,this.uvs[7]=o+t.height/e.height,r=t.x,o=t.y,this.vertices[0]=r,this.vertices[1]=o,this.vertices[2]=r+t.width,this.vertices[3]=o,this.vertices[4]=r+t.width,this.vertices[5]=o+t.height,this.vertices[6]=r,this.vertices[7]=o+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class T1{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=ft.NONE,this.sourceFrame=new Be,this.destinationFrame=new Be,this.bindingSourceFrame=new Be,this.bindingDestinationFrame=new Be,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const ol=[new He,new He,new He,new He],jc=new Je;class Sv{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new Ev,this.statePool=[],this.quad=new E1,this.quadUv=new Tv,this.tempRect=new Be,this.activeState={},this.globalUniforms=new Ar({outputFrame:new Be,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const r=this.renderer,o=this.defaultFilterStack,a=this.statePool.pop()||new T1,u=r.renderTexture;let c,f;if(u.current){const E=u.current;c=E.resolution,f=E.multisample}else c=r.resolution,f=r.multisample;let m=t[0].resolution||c,v=t[0].multisample??f,h=t[0].padding,p=t[0].autoFit,y=t[0].legacy??!0;for(let E=1;E<t.length;E++){const T=t[E];m=Math.min(m,T.resolution||c),v=Math.min(v,T.multisample??f),h=this.useMaxPadding?Math.max(h,T.padding):h+T.padding,p=p&&T.autoFit,y=y||(T.legacy??!0)}o.length===1&&(this.defaultFilterStack[0].renderTexture=u.current),o.push(a),a.resolution=m,a.multisample=v,a.legacy=y,a.target=e,a.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),a.sourceFrame.pad(h);const x=this.tempRect.copyFrom(u.sourceFrame);r.projection.transform&&this.transformAABB(jc.copyFrom(r.projection.transform).invert(),x),p?(a.sourceFrame.fit(x),(a.sourceFrame.width<=0||a.sourceFrame.height<=0)&&(a.sourceFrame.width=0,a.sourceFrame.height=0)):a.sourceFrame.intersects(x)||(a.sourceFrame.width=0,a.sourceFrame.height=0),this.roundFrame(a.sourceFrame,u.current?u.current.resolution:r.resolution,u.sourceFrame,u.destinationFrame,r.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,m,v),a.filters=t,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;const w=this.tempRect;w.x=0,w.y=0,w.width=a.sourceFrame.width,w.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(u.sourceFrame),a.bindingDestinationFrame.copyFrom(u.destinationFrame),a.transform=r.projection.transform,r.projection.transform=null,u.bind(a.renderTexture,a.sourceFrame,w),r.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),r=t.filters;this.activeState=t;const o=this.globalUniforms.uniforms;o.outputFrame=t.sourceFrame,o.resolution=t.resolution;const a=o.inputSize,u=o.inputPixel,c=o.inputClamp;if(a[0]=t.destinationFrame.width,a[1]=t.destinationFrame.height,a[2]=1/a[0],a[3]=1/a[1],u[0]=Math.round(a[0]*t.resolution),u[1]=Math.round(a[1]*t.resolution),u[2]=1/u[0],u[3]=1/u[1],c[0]=.5*u[2],c[1]=.5*u[3],c[2]=t.sourceFrame.width*a[2]-.5*u[2],c[3]=t.sourceFrame.height*a[3]-.5*u[3],t.legacy){const m=o.filterArea;m[0]=t.destinationFrame.width,m[1]=t.destinationFrame.height,m[2]=t.sourceFrame.x,m[3]=t.sourceFrame.y,o.filterClamp=o.inputClamp}this.globalUniforms.update();const f=e[e.length-1];if(this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,t.renderTexture,f.renderTexture,zr.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let m=t.renderTexture,v=this.getOptimalFilterTexture(m.width,m.height,t.resolution);v.filterFrame=m.filterFrame;let h=0;for(h=0;h<r.length-1;++h){h===1&&t.multisample>1&&(v=this.getOptimalFilterTexture(m.width,m.height,t.resolution),v.filterFrame=m.filterFrame),r[h].apply(this,m,v,zr.CLEAR,t);const p=m;m=v,v=p}r[h].apply(this,m,f.renderTexture,zr.BLEND,t),h>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(m),this.returnFilterTexture(v)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=zr.CLEAR){const{renderTexture:r,state:o}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e?.filterFrame){const u=this.tempRect;u.x=0,u.y=0,u.width=e.filterFrame.width,u.height=e.filterFrame.height,r.bind(e,e.filterFrame,u)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const a=o.stateId&1||this.forceClear;(t===zr.CLEAR||t===zr.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,r,o){const a=this.renderer;a.state.set(e.state),this.bindAndClear(r,o),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,a.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),a.geometry.bind(this.quadUv),a.geometry.draw(Vr.TRIANGLES)):(a.geometry.bind(this.quad),a.geometry.draw(Vr.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:r,destinationFrame:o}=this.activeState,{orig:a}=t._texture,u=e.set(o.width,0,0,o.height,r.x,r.y),c=t.worldTransform.copyTo(Je.TEMP_MATRIX);return c.invert(),u.prepend(c),u.scale(1/a.width,1/a.height),u.translate(t.anchor.x,t.anchor.y),u}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,r=1,o=ft.NONE){return this.texturePool.getOptimalTexture(e,t,r,o)}getFilterTexture(e,t,r){if(typeof e=="number"){const a=e;e=t,t=a}e=e||this.activeState.renderTexture;const o=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,r||ft.NONE);return o.filterFrame=e.filterFrame,o}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const r=ol[0],o=ol[1],a=ol[2],u=ol[3];r.set(t.left,t.top),o.set(t.left,t.bottom),a.set(t.right,t.top),u.set(t.right,t.bottom),e.apply(r,r),e.apply(o,o),e.apply(a,a),e.apply(u,u);const c=Math.min(r.x,o.x,a.x,u.x),f=Math.min(r.y,o.y,a.y,u.y),m=Math.max(r.x,o.x,a.x,u.x),v=Math.max(r.y,o.y,a.y,u.y);t.x=c,t.y=f,t.width=m-c,t.height=v-f}roundFrame(e,t,r,o,a){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(a){const{a:u,b:c,c:f,d:m}=a;if((Math.abs(c)>1e-4||Math.abs(f)>1e-4)&&(Math.abs(u)>1e-4||Math.abs(m)>1e-4))return}a=a?jc.copyFrom(a):jc.identity(),a.translate(-r.x,-r.y).scale(o.width/r.width,o.height/r.height).translate(o.x,o.y),this.transformAABB(a,e),e.ceil(t),this.transformAABB(a.invert(),e)}}}Sv.extension={type:fe.RendererSystem,name:"filter"};Te.add(Sv);class S1{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=ft.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const A1=new Be;class Av{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new wd(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Be,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let t=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;ge.PREFER_ENV===Mi.WEBGL_LEGACY&&(t=null,r=null),t?e.drawBuffers=o=>t.drawBuffersWEBGL(o):(this.hasMRT=!1,e.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,r=0){const{gl:o}=this;if(e){const a=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,o.bindFramebuffer(o.FRAMEBUFFER,a.framebuffer)),a.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,a.mipLevel=r),a.dirtyId!==e.dirtyId&&(a.dirtyId=e.dirtyId,a.dirtyFormat!==e.dirtyFormat?(a.dirtyFormat=e.dirtyFormat,a.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):a.dirtySize!==e.dirtySize&&(a.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let u=0;u<e.colorTextures.length;u++){const c=e.colorTextures[u];this.renderer.texture.unbind(c.parentTextureArray||c)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const u=t.width>>r,c=t.height>>r,f=u/t.width;this.setViewport(t.x*f,t.y*f,u,c)}else{const u=e.width>>r,c=e.height>>r;this.setViewport(0,0,u,c)}}else this.current&&(this.current=null,o.bindFramebuffer(o.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,r,o){const a=this.viewport;e=Math.round(e),t=Math.round(t),r=Math.round(r),o=Math.round(o),(a.width!==r||a.height!==o||a.x!==e||a.y!==t)&&(a.x=e,a.y=t,a.width=r,a.height=o,this.gl.viewport(e,t,r,o))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,r,o,a=ad.COLOR|ad.DEPTH){const{gl:u}=this;u.clearColor(e,t,r,o),u.clear(a)}initFramebuffer(e){const{gl:t}=this,r=new S1(t.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r}resizeFramebuffer(e){const{gl:t}=this,r=e.glFramebuffers[this.CONTEXT_UID];if(r.stencil){t.bindRenderbuffer(t.RENDERBUFFER,r.stencil);let u;this.renderer.context.webGLVersion===1?u=t.DEPTH_STENCIL:e.depth&&e.stencil?u=t.DEPTH24_STENCIL8:e.depth?u=t.DEPTH_COMPONENT24:u=t.STENCIL_INDEX8,r.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,u,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,u,e.width,e.height)}const o=e.colorTextures;let a=o.length;t.drawBuffers||(a=Math.min(a,1));for(let u=0;u<a;u++){const c=o[u],f=c.parentTextureArray||c;this.renderer.texture.bind(f,0),u===0&&r.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,f._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:r}=this,o=e.glFramebuffers[this.CONTEXT_UID],a=e.colorTextures;let u=a.length;r.drawBuffers||(u=Math.min(u,1)),o.multisample>1&&this.canMultisampleFramebuffer(e)?o.msaaBuffer=o.msaaBuffer||r.createRenderbuffer():o.msaaBuffer&&(r.deleteRenderbuffer(o.msaaBuffer),o.msaaBuffer=null,o.blitFramebuffer&&(o.blitFramebuffer.dispose(),o.blitFramebuffer=null));const c=[];for(let f=0;f<u;f++){const m=a[f],v=m.parentTextureArray||m;this.renderer.texture.bind(v,0),f===0&&o.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,o.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,o.multisample,v._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,o.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+f,m.target,v._glTextures[this.CONTEXT_UID].texture,t),c.push(r.COLOR_ATTACHMENT0+f))}if(c.length>1&&r.drawBuffers(c),e.depthTexture&&this.writeDepthTexture){const f=e.depthTexture;this.renderer.texture.bind(f,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,f._glTextures[this.CONTEXT_UID].texture,t)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){o.stencil=o.stencil||r.createRenderbuffer();let f,m;this.renderer.context.webGLVersion===1?(f=r.DEPTH_STENCIL_ATTACHMENT,m=r.DEPTH_STENCIL):e.depth&&e.stencil?(f=r.DEPTH_STENCIL_ATTACHMENT,m=r.DEPTH24_STENCIL8):e.depth?(f=r.DEPTH_ATTACHMENT,m=r.DEPTH_COMPONENT24):(f=r.STENCIL_ATTACHMENT,m=r.STENCIL_INDEX8),r.bindRenderbuffer(r.RENDERBUFFER,o.stencil),o.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,o.multisample,m,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,m,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,f,r.RENDERBUFFER,o.stencil)}else o.stencil&&(r.deleteRenderbuffer(o.stencil),o.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let r=ft.NONE;if(e<=1||t===null)return r;for(let o=0;o<t.length;o++)if(t[o]<=e){r=t[o];break}return r===1&&(r=ft.NONE),r}blit(e,t,r){const{current:o,renderer:a,gl:u,CONTEXT_UID:c}=this;if(a.context.webGLVersion!==2||!o)return;const f=o.glFramebuffers[c];if(!f)return;if(!e){if(!f.msaaBuffer)return;const v=o.colorTextures[0];if(!v)return;f.blitFramebuffer||(f.blitFramebuffer=new wd(o.width,o.height),f.blitFramebuffer.addColorTexture(0,v)),e=f.blitFramebuffer,e.colorTextures[0]!==v&&(e.colorTextures[0]=v,e.dirtyId++,e.dirtyFormat++),(e.width!==o.width||e.height!==o.height)&&(e.width=o.width,e.height=o.height,e.dirtyId++,e.dirtySize++)}t||(t=A1,t.width=o.width,t.height=o.height),r||(r=t);const m=t.width===r.width&&t.height===r.height;this.bind(e),u.bindFramebuffer(u.READ_FRAMEBUFFER,f.framebuffer),u.blitFramebuffer(t.left,t.top,t.right,t.bottom,r.left,r.top,r.right,r.bottom,u.COLOR_BUFFER_BIT,m?u.NEAREST:u.LINEAR),u.bindFramebuffer(u.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){const r=e.glFramebuffers[this.CONTEXT_UID],o=this.gl;if(!r)return;delete e.glFramebuffers[this.CONTEXT_UID];const a=this.managedFramebuffers.indexOf(e);a>=0&&this.managedFramebuffers.splice(a,1),e.disposeRunner.remove(this),t||(o.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&o.deleteRenderbuffer(r.msaaBuffer),r.stencil&&o.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,t)}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<t.length;r++)this.disposeFramebuffer(t[r],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;const r=e.width,o=e.height,a=this.gl,u=t.stencil=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,u);let c,f;this.renderer.context.webGLVersion===1?(c=a.DEPTH_STENCIL_ATTACHMENT,f=a.DEPTH_STENCIL):e.depth?(c=a.DEPTH_STENCIL_ATTACHMENT,f=a.DEPTH24_STENCIL8):(c=a.STENCIL_ATTACHMENT,f=a.STENCIL_INDEX8),t.msaaBuffer?a.renderbufferStorageMultisample(a.RENDERBUFFER,t.multisample,f,r,o):a.renderbufferStorage(a.RENDERBUFFER,f,r,o),a.framebufferRenderbuffer(a.FRAMEBUFFER,c,a.RENDERBUFFER,u)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Be}destroy(){this.renderer=null}}Av.extension={type:fe.RendererSystem,name:"framebuffer"};Te.add(Av);const Xc={5126:4,5123:2,5121:1};class bv{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){let r=this.renderer.context.extensions.vertexArrayObject;ge.PREFER_ENV===Mi.WEBGL_LEGACY&&(r=null),r?(e.createVertexArray=()=>r.createVertexArrayOES(),e.bindVertexArray=o=>r.bindVertexArrayOES(o),e.deleteVertexArray=o=>r.deleteVertexArrayOES(o)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(t.webGLVersion!==2){const r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=(o,a)=>r.vertexAttribDivisorANGLE(o,a),e.drawElementsInstanced=(o,a,u,c,f)=>r.drawElementsInstancedANGLE(o,a,u,c,f),e.drawArraysInstanced=(o,a,u,c)=>r.drawArraysInstancedANGLE(o,a,u,c)):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:r}=this;let o=e.glVertexArrayObjects[this.CONTEXT_UID],a=!1;o||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=o={},a=!0);const u=o[t.program.id]||this.initGeometryVao(e,t,a);this._activeGeometry=e,this._activeVao!==u&&(this._activeVao=u,this.hasVao?r.bindVertexArray(u):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let r=0;r<e.buffers.length;r++){const o=e.buffers[r];t.update(o)}}checkCompatibility(e,t){const r=e.attributes,o=t.attributeData;for(const a in o)if(!r[a])throw new Error(`shader and geometry incompatible, geometry missing the "${a}" attribute`)}getSignature(e,t){const r=e.attributes,o=t.attributeData,a=["g",e.id];for(const u in r)o[u]&&a.push(u,o[u].location);return a.join("-")}initGeometryVao(e,t,r=!0){const o=this.gl,a=this.CONTEXT_UID,u=this.renderer.buffer,c=t.program;c.glPrograms[a]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,c);const f=this.getSignature(e,c),m=e.glVertexArrayObjects[this.CONTEXT_UID];let v=m[f];if(v)return m[c.id]=v,v;const h=e.buffers,p=e.attributes,y={},x={};for(const w in h)y[w]=0,x[w]=0;for(const w in p)!p[w].size&&c.attributeData[w]?p[w].size=c.attributeData[w].size:p[w].size||console.warn(`PIXI Geometry attribute '${w}' size cannot be determined (likely the bound shader does not have the attribute)`),y[p[w].buffer]+=p[w].size*Xc[p[w].type];for(const w in p){const E=p[w],T=E.size;E.stride===void 0&&(y[E.buffer]===T*Xc[E.type]?E.stride=0:E.stride=y[E.buffer]),E.start===void 0&&(E.start=x[E.buffer],x[E.buffer]+=T*Xc[E.type])}v=o.createVertexArray(),o.bindVertexArray(v);for(let w=0;w<h.length;w++){const E=h[w];u.bind(E),r&&E._glBuffers[a].refCount++}return this.activateVao(e,c),m[c.id]=v,m[f]=v,o.bindVertexArray(null),u.unbind($r.ARRAY_BUFFER),v}disposeGeometry(e,t){if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const r=e.glVertexArrayObjects[this.CONTEXT_UID],o=this.gl,a=e.buffers,u=this.renderer?.buffer;if(e.disposeRunner.remove(this),!!r){if(u)for(let c=0;c<a.length;c++){const f=a[c]._glBuffers[this.CONTEXT_UID];f&&(f.refCount--,f.refCount===0&&!t&&u.dispose(a[c],t))}if(!t){for(const c in r)if(c[0]==="g"){const f=r[c];this._activeVao===f&&this.unbind(),o.deleteVertexArray(f)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let r=0;r<t.length;r++)this.disposeGeometry(this.managedGeometries[t[r]],e)}activateVao(e,t){const r=this.gl,o=this.CONTEXT_UID,a=this.renderer.buffer,u=e.buffers,c=e.attributes;e.indexBuffer&&a.bind(e.indexBuffer);let f=null;for(const m in c){const v=c[m],h=u[v.buffer],p=h._glBuffers[o];if(t.attributeData[m]){f!==p&&(a.bind(h),f=p);const y=t.attributeData[m].location;if(r.enableVertexAttribArray(y),r.vertexAttribPointer(y,v.size,v.type||r.FLOAT,v.normalized,v.stride,v.start),v.instance)if(this.hasInstance)r.vertexAttribDivisor(y,v.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,r,o){const{gl:a}=this,u=this._activeGeometry;if(u.indexBuffer){const c=u.indexBuffer.data.BYTES_PER_ELEMENT,f=c===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;c===2||c===4&&this.canUseUInt32ElementIndex?u.instanced?a.drawElementsInstanced(e,t||u.indexBuffer.data.length,f,(r||0)*c,o||1):a.drawElements(e,t||u.indexBuffer.data.length,f,(r||0)*c):console.warn("unsupported index buffer type: uint32")}else u.instanced?a.drawArraysInstanced(e,r,t||u.getSize(),o||1):a.drawArrays(e,r,t||u.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}bv.extension={type:fe.RendererSystem,name:"geometry"};Te.add(bv);const dy=new Je;class Cv{constructor(e,t){this._texture=e,this.mapCoord=new Je,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){t===void 0&&(t=e);const r=this.mapCoord;for(let o=0;o<e.length;o+=2){const a=e[o],u=e[o+1];t[o]=a*r.a+u*r.c+r.tx,t[o+1]=a*r.b+u*r.d+r.ty}return t}update(e){const t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const o=t.orig,a=t.trim;a&&(dy.set(o.width/a.width,0,0,o.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(dy));const u=t.baseTexture,c=this.uClampFrame,f=this.clampMargin/u.resolution,m=this.clampOffset;return c[0]=(t._frame.x+f+m)/u.width,c[1]=(t._frame.y+f+m)/u.height,c[2]=(t._frame.x+t._frame.width-f+m)/u.width,c[3]=(t._frame.y+t._frame.height-f+m)/u.height,this.uClampOffset[0]=m/u.realWidth,this.uClampOffset[1]=m/u.realHeight,this.isSimple=t._frame.width===u.width&&t._frame.height===u.height&&t.rotate===0,!0}}var b1=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,C1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class I1 extends Ft{constructor(e,t,r){let o=null;typeof e!="string"&&t===void 0&&r===void 0&&(o=e,e=void 0,t=void 0,r=void 0),super(e||C1,t||b1,r),this.maskSprite=o,this.maskMatrix=new Je}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,r,o){const a=this._maskSprite,u=a._texture;u.valid&&(u.uvMatrix||(u.uvMatrix=new Cv(u,0)),u.uvMatrix.update(),this.uniforms.npmAlpha=u.baseTexture.alphaMode?0:1,this.uniforms.mask=u,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(u.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=u.uvMatrix.uClampFrame,e.applyFilter(this,t,r,o))}}class R1{constructor(e=null){this.type=gt.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ft.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=gt.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class Iv{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let r=t;if(!r.isMaskData){const a=this.maskDataPool.pop()||new R1;a.pooled=!0,a.maskObject=t,r=a}const o=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(o),r._colorMask=o?o._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==gt.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case gt.SCISSOR:this.renderer.scissor.push(r);break;case gt.STENCIL:this.renderer.stencil.push(r);break;case gt.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case gt.COLOR:this.pushColorMask(r);break}r.type===gt.SPRITE&&this.maskStack.push(r)}pop(e){const t=this.maskStack.pop();if(!(!t||t._target!==e)){if(t.enabled)switch(t.type){case gt.SCISSOR:this.renderer.scissor.pop(t);break;case gt.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case gt.SPRITE:this.popSpriteMask(t);break;case gt.COLOR:this.popColorMask(t);break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){const r=this.maskStack[this.maskStack.length-1];r.type===gt.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=gt.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=gt.SCISSOR:e.type=gt.STENCIL:e.type=gt.COLOR}pushSpriteMask(e){const{maskObject:t}=e,r=e._target;let o=e._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex],o||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new I1])),o[0].resolution=e.resolution,o[0].multisample=e.multisample,o[0].maskSprite=t;const a=r.filterArea;r.filterArea=t.getBounds(!0),this.renderer.filter.push(r,o),r.filterArea=a,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,r=e._colorMask=t&e.colorMask;r!==t&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}popColorMask(e){const t=e._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==t&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}destroy(){this.renderer=null}}Iv.extension={type:fe.RendererSystem,name:"mask"};Te.add(Iv);class Rv{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,r=this.getStackLength();this.maskStack=e;const o=this.getStackLength();o!==r&&(o===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const fy=new Je,py=[],Pv=class vl extends Rv{constructor(e){super(e),this.glConst=ge.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:r}=e,{renderer:o}=this,a=o.renderTexture,u=r.getBounds(!0,py.pop()??new Be);this.roundFrameToPixels(u,a.current?a.current.resolution:o.resolution,a.sourceFrame,a.destinationFrame,o.projection.transform),t&&u.fit(t),e._scissorRectLocal=u}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:r,c:o,d:a}=e;return(Math.abs(r)>1e-4||Math.abs(o)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(a)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||vl.isMatrixRotated(t.worldTransform)||vl.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const r=e._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(e,t,r,o,a){vl.isMatrixRotated(a)||(a=a?fy.copyFrom(a):fy.identity(),a.translate(-r.x,-r.y).scale(o.width/r.width,o.height/r.height).translate(o.x,o.y),this.renderer.filter.transformAABB(a,e),e.fit(o),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&py.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};Pv.extension={type:fe.RendererSystem,name:"scissor"};let P1=Pv;Te.add(P1);class Mv extends Rv{constructor(e){super(e),this.glConst=ge.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:r}=this.renderer,o=e._stencilCounter;o===0&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++;const a=e._colorMask;a!==0&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,o,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,a!==0&&(e._colorMask=a,r.colorMask((a&1)!==0,(a&2)!==0,(a&4)!==0,(a&8)!==0)),this._useCurrent()}pop(e){const t=this.renderer.gl;if(this.getStackLength()===0)t.disable(t.STENCIL_TEST);else{const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,o=r?r._colorMask:15;o!==0&&(r._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,o!==0&&(r._colorMask=o,t.colorMask((o&1)!==0,(o&2)!==0,(o&4)!==0,(o&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}Mv.extension={type:fe.RendererSystem,name:"stencil"};Te.add(Mv);class kv{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return Ue("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return Ue("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return Ue("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}kv.extension={type:[fe.RendererSystem,fe.CanvasRendererSystem],name:"_plugin"};Te.add(kv);class Lv{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Je,this.transform=null}update(e,t,r,o){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,o),this.transform&&this.projectionMatrix.append(this.transform);const a=this.renderer;a.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,a.globalUniforms.update(),a.shader.shader&&a.shader.syncUniformGroup(a.shader.shader.uniforms.globals)}calculateProjection(e,t,r,o){const a=this.projectionMatrix,u=o?-1:1;a.identity(),a.a=1/t.width*2,a.d=u*(1/t.height*2),a.tx=-1-t.x*a.a,a.ty=-u-t.y*a.d}setTransform(e){}destroy(){this.renderer=null}}Lv.extension={type:fe.RendererSystem,name:"projection"};Te.add(Lv);const M1=new qd,my=new Be;class Dv{constructor(e){this.renderer=e,this._tempMatrix=new Je}generateTexture(e,t){const{region:r,...o}=t||{},a=r?.copyTo(my)||e.getLocalBounds(my,!0),u=o.resolution||this.renderer.resolution;a.width=Math.max(a.width,1/u),a.height=Math.max(a.height,1/u),o.width=a.width,o.height=a.height,o.resolution=u,o.multisample??(o.multisample=this.renderer.multisample);const c=ki.create(o);this._tempMatrix.tx=-a.x,this._tempMatrix.ty=-a.y;const f=e.transform;return e.transform=M1,this.renderer.render(e,{renderTexture:c,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=f,c}destroy(){}}Dv.extension={type:[fe.RendererSystem,fe.CanvasRendererSystem],name:"textureGenerator"};Te.add(Dv);const pi=new Be,xo=new Be;class Ov{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Be,this.destinationFrame=new Be,this.viewportFrame=new Be}contextChange(){const e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,r){const o=this.renderer;this.current=e;let a,u,c;e?(a=e.baseTexture,c=a.resolution,t||(pi.width=e.frame.width,pi.height=e.frame.height,t=pi),r||(xo.x=e.frame.x,xo.y=e.frame.y,xo.width=t.width,xo.height=t.height,r=xo),u=a.framebuffer):(c=o.resolution,t||(pi.width=o._view.screen.width,pi.height=o._view.screen.height,t=pi),r||(r=pi,r.width=t.width,r.height=t.height));const f=this.viewportFrame;f.x=r.x*c,f.y=r.y*c,f.width=r.width*c,f.height=r.height*c,e||(f.y=o.view.height-(f.y+f.height)),f.ceil(),this.renderer.framebuffer.bind(u,f),this.renderer.projection.update(r,t,c,!u),e?this.renderer.mask.setMaskStack(a.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(r)}clear(e,t){const r=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,o=Ze.shared.setValue(e||r);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&o.premultiply(o.alpha);const a=this.destinationFrame,u=this.current?this.current.baseTexture:this.renderer._view.screen,c=a.width!==u.width||a.height!==u.height;if(c){let{x:f,y:m,width:v,height:h}=this.viewportFrame;f=Math.round(f),m=Math.round(m),v=Math.round(v),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(f,m,v,h)}this.renderer.framebuffer.clear(o.red,o.green,o.blue,o.alpha,t),c&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}Ov.extension={type:fe.RendererSystem,name:"renderTexture"};Te.add(Ov);class k1{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function L1(i,e){const t={},r=e.getProgramParameter(i,e.ACTIVE_ATTRIBUTES);for(let o=0;o<r;o++){const a=e.getActiveAttrib(i,o);if(a.name.startsWith("gl_"))continue;const u=vv(e,a.type),c={type:u,name:a.name,size:yv(u),location:e.getAttribLocation(i,a.name)};t[a.name]=c}return t}function D1(i,e){const t={},r=e.getProgramParameter(i,e.ACTIVE_UNIFORMS);for(let o=0;o<r;o++){const a=e.getActiveUniform(i,o),u=a.name.replace(/\[.*?\]$/,""),c=!!a.name.match(/\[.*?\]$/),f=vv(e,a.type);t[u]={name:u,index:o,type:f,size:a.size,isArray:c,value:mv(f,a.size)}}return t}function O1(i,e){const t=oy(i,i.VERTEX_SHADER,e.vertexSrc),r=oy(i,i.FRAGMENT_SHADER,e.fragmentSrc),o=i.createProgram();i.attachShader(o,t),i.attachShader(o,r);const a=e.extra?.transformFeedbackVaryings;if(a&&(typeof i.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):i.transformFeedbackVaryings(o,a.names,a.bufferMode==="separate"?i.SEPARATE_ATTRIBS:i.INTERLEAVED_ATTRIBS)),i.linkProgram(o),i.getProgramParameter(o,i.LINK_STATUS)||h1(i,o,t,r),e.attributeData=L1(o,i),e.uniformData=D1(o,i),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const c=Object.keys(e.attributeData);c.sort((f,m)=>f>m?1:-1);for(let f=0;f<c.length;f++)e.attributeData[c[f]].location=f,i.bindAttribLocation(o,f,c[f]);i.linkProgram(o)}i.deleteShader(t),i.deleteShader(r);const u={};for(const c in e.uniformData){const f=e.uniformData[c];u[c]={location:i.getUniformLocation(o,c),value:mv(f.type,f.size)}}return new k1(o,u)}function B1(i,e,t,r,o){t.buffer.update(o)}const F1={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Bv={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function N1(i){const e=i.map(a=>({data:a,offset:0,dataLen:0,dirty:0}));let t=0,r=0,o=0;for(let a=0;a<e.length;a++){const u=e[a];if(t=Bv[u.data.type],u.data.size>1&&(t=Math.max(t,16)*u.data.size),u.dataLen=t,r%t!==0&&r<16){const c=r%t%16;r+=c,o+=c}r+t>16?(o=Math.ceil(o/16)*16,u.offset=o,o+=t,r=t):(u.offset=o,r+=t,o+=t)}return o=Math.ceil(o/16)*16,{uboElements:e,size:o}}function U1(i,e){const t=[];for(const r in i)e[r]&&t.push(e[r]);return t.sort((r,o)=>r.index-o.index),t}function G1(i,e){if(!i.autoManage)return{size:0,syncFunc:B1};const t=U1(i.uniforms,e),{uboElements:r,size:o}=N1(t),a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let u=0;u<r.length;u++){const c=r[u],f=i.uniforms[c.data.name],m=c.data.name;let v=!1;for(let h=0;h<Es.length;h++){const p=Es[h];if(p.codeUbo&&p.test(c.data,f)){a.push(`offset = ${c.offset/4};`,Es[h].codeUbo(c.data.name,f)),v=!0;break}}if(!v)if(c.data.size>1){const h=yv(c.data.type),p=Math.max(Bv[c.data.type]/16,1),y=h/p,x=(4-y%4)%4;a.push(`
                cv = ud.${m}.value;
                v = uv.${m};
                offset = ${c.offset/4};

                t = 0;

                for(var i=0; i < ${c.data.size*p}; i++)
                {
                    for(var j = 0; j < ${y}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${x};
                }

                `)}else{const h=F1[c.data.type];a.push(`
                cv = ud.${m}.value;
                v = uv.${m};
                offset = ${c.offset/4};
                ${h};
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:o,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}let H1=0;const al={textureCount:0,uboCount:0};class Fv{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=H1++}systemCheck(){if(!d1())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const r=e.program,o=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(o.program)),t||(al.textureCount=0,al.uboCount=0,this.syncUniformGroup(e.uniformGroup,al)),o}setUniforms(e){const t=this.shader.program,r=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(r.uniformData,e,this.renderer)}syncUniformGroup(e,t){const r=this.getGlProgram();(!e.static||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,t))}syncUniforms(e,t,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,r)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=a1(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const r=this.getGlProgram();if(!e.static||e.dirtyId!==0||!r.uniformGroups[e.id]){e.dirtyId=0;const o=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,t);e.buffer.update(),o(r.uniformData,e.uniforms,this.renderer,al,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[t])}createSyncBufferGroup(e,t,r){const{gl:o}=this.renderer;this.renderer.buffer.bind(e.buffer);const a=this.gl.getUniformBlockIndex(t.program,r);t.uniformBufferBindings[r]=this.shader.uniformBindCount,o.uniformBlockBinding(t.program,a,this.shader.uniformBindCount),this.shader.uniformBindCount++;const u=this.getSignature(e,this.shader.program.uniformData,"ubo");let c=this._uboCache[u];if(c||(c=this._uboCache[u]=G1(e,this.shader.program.uniformData)),e.autoManage){const f=new Float32Array(c.size/4);e.buffer.update(f)}return t.uniformGroups[e.id]=c.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,r){const o=e.uniforms,a=[`${r}-`];for(const u in o)a.push(u),t[u]&&a.push(t[u].type);return a.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,r=e.program,o=O1(t,r);return r.glPrograms[this.renderer.CONTEXT_UID]=o,o}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}Fv.extension={type:fe.RendererSystem,name:"shader"};Te.add(Fv);class kl{constructor(e){this.renderer=e}run(e){const{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&console.log(`PixiJS 7.4.3 - ${t.rendererLogId} - https://pixijs.com`),t.resize(t.screen.width,t.screen.height)}destroy(){}}kl.defaultOptions={hello:!1},kl.extension={type:[fe.RendererSystem,fe.CanvasRendererSystem],name:"startup"};Te.add(kl);function z1(i,e=[]){return e[Me.NORMAL]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Me.ADD]=[i.ONE,i.ONE],e[Me.MULTIPLY]=[i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Me.SCREEN]=[i.ONE,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Me.OVERLAY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Me.DARKEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Me.LIGHTEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Me.COLOR_DODGE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Me.COLOR_BURN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Me.HARD_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Me.SOFT_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Me.DIFFERENCE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Me.EXCLUSION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Me.HUE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Me.SATURATION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Me.COLOR]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Me.LUMINOSITY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Me.NONE]=[0,0],e[Me.NORMAL_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Me.ADD_NPM]=[i.SRC_ALPHA,i.ONE,i.ONE,i.ONE],e[Me.SCREEN_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Me.SRC_IN]=[i.DST_ALPHA,i.ZERO],e[Me.SRC_OUT]=[i.ONE_MINUS_DST_ALPHA,i.ZERO],e[Me.SRC_ATOP]=[i.DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],e[Me.DST_OVER]=[i.ONE_MINUS_DST_ALPHA,i.ONE],e[Me.DST_IN]=[i.ZERO,i.SRC_ALPHA],e[Me.DST_OUT]=[i.ZERO,i.ONE_MINUS_SRC_ALPHA],e[Me.DST_ATOP]=[i.ONE_MINUS_DST_ALPHA,i.SRC_ALPHA],e[Me.XOR]=[i.ONE_MINUS_DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],e[Me.SUBTRACT]=[i.ONE,i.ONE,i.ONE,i.ONE,i.FUNC_REVERSE_SUBTRACT,i.FUNC_ADD],e}const V1=0,$1=1,W1=2,j1=3,X1=4,Y1=5,Nv=class Ed{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Me.NONE,this._blendEq=!1,this.map=[],this.map[V1]=this.setBlend,this.map[$1]=this.setOffset,this.map[W1]=this.setCullFace,this.map[j1]=this.setDepthTest,this.map[X1]=this.setFrontFace,this.map[Y1]=this.setDepthMask,this.checks=[],this.defaultState=new Xr,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=z1(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,r=0;for(;t;)t&1&&this.map[r].call(this,!!(e.data&1<<r)),t=t>>1,r++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(Ed.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(Ed.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],r=this.gl;t.length===2?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const r=this.checks.indexOf(e);t&&r===-1?this.checks.push(e):!t&&r!==-1&&this.checks.splice(r,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};Nv.extension={type:fe.RendererSystem,name:"state"};let q1=Nv;Te.add(q1);class K1 extends Do{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter(o=>e.systems[o]),r=[...t,...Object.keys(e.systems).filter(o=>!t.includes(o))];for(const o of r)this.addSystem(e.systems[o],o)}addRunners(...e){e.forEach(t=>{this.runners[t]=new Sr(t)})}addSystem(e,t){const r=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=r,this._systemsHash[t]=r;for(const o in this.runners)this.runners[o].add(r);return this}emitWithCustomOptions(e,t){const r=Object.keys(this._systemsHash);e.items.forEach(o=>{const a=r.find(u=>this._systemsHash[u]===o);o[e.name](t[a])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const bo=class _l{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=_l.defaultMaxIdle,this.checkCountMax=_l.defaultCheckCountMax,this.mode=_l.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Wd.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let r=!1;for(let o=0;o<t.length;o++){const a=t[o];a.resource&&this.count-a.touched>this.maxIdle&&(e.destroyTexture(a,!0),t[o]=null,r=!0)}if(r){let o=0;for(let a=0;a<t.length;a++)t[a]!==null&&(t[o++]=t[a]);t.length=o}}unload(e){const t=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(let o=e.children.length-1;o>=0;o--)this.unload(e.children[o])}destroy(){this.renderer=null}};bo.defaultMode=Wd.AUTO,bo.defaultMaxIdle=3600,bo.defaultCheckCountMax=600,bo.extension={type:fe.RendererSystem,name:"textureGC"};let wi=bo;Te.add(wi);class Yc{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Ie.UNSIGNED_BYTE,this.internalFormat=ue.RGBA,this.samplerType=0}}function Q1(i){let e;return"WebGL2RenderingContext"in globalThis&&i instanceof globalThis.WebGL2RenderingContext?e={[i.RGB]:me.FLOAT,[i.RGBA]:me.FLOAT,[i.ALPHA]:me.FLOAT,[i.LUMINANCE]:me.FLOAT,[i.LUMINANCE_ALPHA]:me.FLOAT,[i.R8]:me.FLOAT,[i.R8_SNORM]:me.FLOAT,[i.RG8]:me.FLOAT,[i.RG8_SNORM]:me.FLOAT,[i.RGB8]:me.FLOAT,[i.RGB8_SNORM]:me.FLOAT,[i.RGB565]:me.FLOAT,[i.RGBA4]:me.FLOAT,[i.RGB5_A1]:me.FLOAT,[i.RGBA8]:me.FLOAT,[i.RGBA8_SNORM]:me.FLOAT,[i.RGB10_A2]:me.FLOAT,[i.RGB10_A2UI]:me.FLOAT,[i.SRGB8]:me.FLOAT,[i.SRGB8_ALPHA8]:me.FLOAT,[i.R16F]:me.FLOAT,[i.RG16F]:me.FLOAT,[i.RGB16F]:me.FLOAT,[i.RGBA16F]:me.FLOAT,[i.R32F]:me.FLOAT,[i.RG32F]:me.FLOAT,[i.RGB32F]:me.FLOAT,[i.RGBA32F]:me.FLOAT,[i.R11F_G11F_B10F]:me.FLOAT,[i.RGB9_E5]:me.FLOAT,[i.R8I]:me.INT,[i.R8UI]:me.UINT,[i.R16I]:me.INT,[i.R16UI]:me.UINT,[i.R32I]:me.INT,[i.R32UI]:me.UINT,[i.RG8I]:me.INT,[i.RG8UI]:me.UINT,[i.RG16I]:me.INT,[i.RG16UI]:me.UINT,[i.RG32I]:me.INT,[i.RG32UI]:me.UINT,[i.RGB8I]:me.INT,[i.RGB8UI]:me.UINT,[i.RGB16I]:me.INT,[i.RGB16UI]:me.UINT,[i.RGB32I]:me.INT,[i.RGB32UI]:me.UINT,[i.RGBA8I]:me.INT,[i.RGBA8UI]:me.UINT,[i.RGBA16I]:me.INT,[i.RGBA16UI]:me.UINT,[i.RGBA32I]:me.INT,[i.RGBA32UI]:me.UINT,[i.DEPTH_COMPONENT16]:me.FLOAT,[i.DEPTH_COMPONENT24]:me.FLOAT,[i.DEPTH_COMPONENT32F]:me.FLOAT,[i.DEPTH_STENCIL]:me.FLOAT,[i.DEPTH24_STENCIL8]:me.FLOAT,[i.DEPTH32F_STENCIL8]:me.FLOAT}:e={[i.RGB]:me.FLOAT,[i.RGBA]:me.FLOAT,[i.ALPHA]:me.FLOAT,[i.LUMINANCE]:me.FLOAT,[i.LUMINANCE_ALPHA]:me.FLOAT,[i.DEPTH_STENCIL]:me.FLOAT},e}function Z1(i){let e;return"WebGL2RenderingContext"in globalThis&&i instanceof globalThis.WebGL2RenderingContext?e={[Ie.UNSIGNED_BYTE]:{[ue.RGBA]:i.RGBA8,[ue.RGB]:i.RGB8,[ue.RG]:i.RG8,[ue.RED]:i.R8,[ue.RGBA_INTEGER]:i.RGBA8UI,[ue.RGB_INTEGER]:i.RGB8UI,[ue.RG_INTEGER]:i.RG8UI,[ue.RED_INTEGER]:i.R8UI,[ue.ALPHA]:i.ALPHA,[ue.LUMINANCE]:i.LUMINANCE,[ue.LUMINANCE_ALPHA]:i.LUMINANCE_ALPHA},[Ie.BYTE]:{[ue.RGBA]:i.RGBA8_SNORM,[ue.RGB]:i.RGB8_SNORM,[ue.RG]:i.RG8_SNORM,[ue.RED]:i.R8_SNORM,[ue.RGBA_INTEGER]:i.RGBA8I,[ue.RGB_INTEGER]:i.RGB8I,[ue.RG_INTEGER]:i.RG8I,[ue.RED_INTEGER]:i.R8I},[Ie.UNSIGNED_SHORT]:{[ue.RGBA_INTEGER]:i.RGBA16UI,[ue.RGB_INTEGER]:i.RGB16UI,[ue.RG_INTEGER]:i.RG16UI,[ue.RED_INTEGER]:i.R16UI,[ue.DEPTH_COMPONENT]:i.DEPTH_COMPONENT16},[Ie.SHORT]:{[ue.RGBA_INTEGER]:i.RGBA16I,[ue.RGB_INTEGER]:i.RGB16I,[ue.RG_INTEGER]:i.RG16I,[ue.RED_INTEGER]:i.R16I},[Ie.UNSIGNED_INT]:{[ue.RGBA_INTEGER]:i.RGBA32UI,[ue.RGB_INTEGER]:i.RGB32UI,[ue.RG_INTEGER]:i.RG32UI,[ue.RED_INTEGER]:i.R32UI,[ue.DEPTH_COMPONENT]:i.DEPTH_COMPONENT24},[Ie.INT]:{[ue.RGBA_INTEGER]:i.RGBA32I,[ue.RGB_INTEGER]:i.RGB32I,[ue.RG_INTEGER]:i.RG32I,[ue.RED_INTEGER]:i.R32I},[Ie.FLOAT]:{[ue.RGBA]:i.RGBA32F,[ue.RGB]:i.RGB32F,[ue.RG]:i.RG32F,[ue.RED]:i.R32F,[ue.DEPTH_COMPONENT]:i.DEPTH_COMPONENT32F},[Ie.HALF_FLOAT]:{[ue.RGBA]:i.RGBA16F,[ue.RGB]:i.RGB16F,[ue.RG]:i.RG16F,[ue.RED]:i.R16F},[Ie.UNSIGNED_SHORT_5_6_5]:{[ue.RGB]:i.RGB565},[Ie.UNSIGNED_SHORT_4_4_4_4]:{[ue.RGBA]:i.RGBA4},[Ie.UNSIGNED_SHORT_5_5_5_1]:{[ue.RGBA]:i.RGB5_A1},[Ie.UNSIGNED_INT_2_10_10_10_REV]:{[ue.RGBA]:i.RGB10_A2,[ue.RGBA_INTEGER]:i.RGB10_A2UI},[Ie.UNSIGNED_INT_10F_11F_11F_REV]:{[ue.RGB]:i.R11F_G11F_B10F},[Ie.UNSIGNED_INT_5_9_9_9_REV]:{[ue.RGB]:i.RGB9_E5},[Ie.UNSIGNED_INT_24_8]:{[ue.DEPTH_STENCIL]:i.DEPTH24_STENCIL8},[Ie.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[ue.DEPTH_STENCIL]:i.DEPTH32F_STENCIL8}}:e={[Ie.UNSIGNED_BYTE]:{[ue.RGBA]:i.RGBA,[ue.RGB]:i.RGB,[ue.ALPHA]:i.ALPHA,[ue.LUMINANCE]:i.LUMINANCE,[ue.LUMINANCE_ALPHA]:i.LUMINANCE_ALPHA},[Ie.UNSIGNED_SHORT_5_6_5]:{[ue.RGB]:i.RGB},[Ie.UNSIGNED_SHORT_4_4_4_4]:{[ue.RGBA]:i.RGBA},[Ie.UNSIGNED_SHORT_5_5_5_1]:{[ue.RGBA]:i.RGBA}},e}class Uv{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Oe,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=Z1(e),this.samplerTypes=Q1(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let o=0;o<t;o++)this.boundTextures[o]=null;this.emptyTextures={};const r=new Yc(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Yc(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let o=0;o<6;o++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let o=0;o<this.boundTextures.length;o++)this.bind(null,o)}bind(e,t=0){const{gl:r}=this;if(e=e?.castToBaseTexture(),e?.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const o=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(e.target,o.texture)),o.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),this.updateTexture(e)):o.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let o=0;o<r.length;o++)r[o]===this.unknownTexture&&this.bind(null,o)}for(let o=0;o<r.length;o++)r[o]===e&&(this.currentLocation!==o&&(t.activeTexture(t.TEXTURE0+o),this.currentLocation=o),t.bindTexture(e.target,this.emptyTextures[e.target].texture),r[o]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:r,CONTEXT_UID:o}=this;if(r)for(let a=e-1;a>=0;--a){const u=t[a];u&&u._glTextures[o].samplerType!==me.FLOAT&&this.renderer.texture.unbind(u)}}initTexture(e){const t=new Yc(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){t.internalFormat=this.internalFormats[e.type]?.[e.format]??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??me.FLOAT,this.webGLVersion===2&&e.type===Ie.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const r=this.renderer;if(this.initTextureType(e,t),e.resource?.upload(r,e,t))t.samplerType!==me.FLOAT&&(this.hasIntegerTextures=!0);else{const o=e.realWidth,a=e.realHeight,u=r.gl;(t.width!==o||t.height!==a||t.dirtyId<0)&&(t.width=o,t.height=a,u.texImage2D(e.target,0,t.internalFormat,o,a,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:r}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const o=this.managedTextures.indexOf(e);o!==-1&&ws(this.managedTextures,o,1)}}updateTextureStyle(e){const t=e._glTextures[this.CONTEXT_UID];t&&((e.mipmap===jr.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?t.mipmap=!1:t.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?t.wrapMode=Kn.CLAMP:t.wrapMode=e.wrapMode,e.resource?.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const r=this.gl;if(t.mipmap&&e.mipmap!==jr.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===cn.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const o=this.renderer.context.extensions.anisotropicFiltering;if(o&&e.anisotropicLevel>0&&e.scaleMode===cn.LINEAR){const a=Math.min(e.anisotropicLevel,r.getParameter(o.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,o.TEXTURE_MAX_ANISOTROPY_EXT,a)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===cn.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===cn.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}Uv.extension={type:fe.RendererSystem,name:"texture"};Te.add(Uv);class Gv{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:r}=this,o=e._glTransformFeedbacks[r]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,o)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:r,renderer:o}=this;t&&o.shader.bind(t),r.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:r,CONTEXT_UID:o}=this,a=t.createTransformFeedback();e._glTransformFeedbacks[o]=a,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,a);for(let u=0;u<e.buffers.length;u++){const c=e.buffers[u];c&&(r.buffer.update(c),c._glBuffers[o].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,u,c._glBuffers[o].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),a}disposeTransformFeedback(e,t){const r=e._glTransformFeedbacks[this.CONTEXT_UID],o=this.gl;e.disposeRunner.remove(this);const a=this.renderer.buffer;if(a)for(let u=0;u<e.buffers.length;u++){const c=e.buffers[u];if(!c)continue;const f=c._glBuffers[this.CONTEXT_UID];f&&(f.refCount--,f.refCount===0&&!t&&a.dispose(c,t))}r&&(t||o.deleteTransformFeedback(r),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Gv.extension={type:fe.RendererSystem,name:"transformFeedback"};Te.add(Gv);class Ll{constructor(e){this.renderer=e}init(e){this.screen=new Be(0,0,e.width,e.height),this.element=e.view||ge.ADAPTER.createCanvas(),this.resolution=e.resolution||ge.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const r=this.element.width/this.resolution,o=this.element.height/this.resolution;this.screen.width=r,this.screen.height=o,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${o}px`),this.renderer.emit("resize",r,o),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){e&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}Ll.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},Ll.extension={type:[fe.RendererSystem,fe.CanvasRendererSystem],name:"_view"};Te.add(Ll);ge.PREFER_ENV=Mi.WEBGL2;ge.STRICT_TEXTURE_CACHE=!1;ge.RENDER_OPTIONS={...Ml.defaultOptions,...Pl.defaultOptions,...Ll.defaultOptions,...kl.defaultOptions};Object.defineProperties(ge,{WRAP_MODE:{get(){return Oe.defaultOptions.wrapMode},set(i){Ue("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Oe.defaultOptions.wrapMode=i}},SCALE_MODE:{get(){return Oe.defaultOptions.scaleMode},set(i){Ue("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Oe.defaultOptions.scaleMode=i}},MIPMAP_TEXTURES:{get(){return Oe.defaultOptions.mipmap},set(i){Ue("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Oe.defaultOptions.mipmap=i}},ANISOTROPIC_LEVEL:{get(){return Oe.defaultOptions.anisotropicLevel},set(i){Ue("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Oe.defaultOptions.anisotropicLevel=i}},FILTER_RESOLUTION:{get(){return Ue("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Ft.defaultResolution},set(i){Ft.defaultResolution=i}},FILTER_MULTISAMPLE:{get(){return Ue("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Ft.defaultMultisample},set(i){Ft.defaultMultisample=i}},SPRITE_MAX_TEXTURES:{get(){return xi.defaultMaxTextures},set(i){Ue("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),xi.defaultMaxTextures=i}},SPRITE_BATCH_SIZE:{get(){return xi.defaultBatchSize},set(i){Ue("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),xi.defaultBatchSize=i}},CAN_UPLOAD_SAME_BUFFER:{get(){return xi.canUploadSameBuffer},set(i){Ue("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),xi.canUploadSameBuffer=i}},GC_MODE:{get(){return wi.defaultMode},set(i){Ue("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),wi.defaultMode=i}},GC_MAX_IDLE:{get(){return wi.defaultMaxIdle},set(i){Ue("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),wi.defaultMaxIdle=i}},GC_MAX_CHECK_COUNT:{get(){return wi.defaultCheckCountMax},set(i){Ue("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),wi.defaultCheckCountMax=i}},PRECISION_VERTEX:{get(){return pn.defaultVertexPrecision},set(i){Ue("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),pn.defaultVertexPrecision=i}},PRECISION_FRAGMENT:{get(){return pn.defaultFragmentPrecision},set(i){Ue("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),pn.defaultFragmentPrecision=i}}});var Pi=(i=>(i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY",i))(Pi||{});class qc{constructor(e,t=null,r=0,o=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=r,this.once=o}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const Hv=class Kt{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new qc(null,null,1/0),this.deltaMS=1/Kt.targetFPMS,this.elapsedMS=1/Kt.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,r=Pi.NORMAL){return this._addListener(new qc(e,t,r))}addOnce(e,t,r=Pi.NORMAL){return this._addListener(new qc(e,t,r,!0))}_addListener(e){let t=this._head.next,r=this._head;if(!t)e.connect(r);else{for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}return this._startIfPossible(),this}remove(e,t){let r=this._head.next;for(;r;)r.match(e,t)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const a=e-this._lastFrame|0;if(a<this._minElapsedMS)return;this._lastFrame=e-a%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Kt.targetFPMS;const r=this._head;let o=r.next;for(;o;)o=o.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,t)/1e3,Kt.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Kt._shared){const e=Kt._shared=new Kt;e.autoStart=!0,e._protected=!0}return Kt._shared}static get system(){if(!Kt._system){const e=Kt._system=new Kt;e.autoStart=!0,e._protected=!0}return Kt._system}};Hv.targetFPMS=.06;let Qt=Hv;Object.defineProperties(ge,{TARGET_FPMS:{get(){return Qt.targetFPMS},set(i){Ue("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Qt.targetFPMS=i}}});class zv{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Pi.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Qt.shared:new Qt,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}zv.extension=fe.Application;Te.add(zv);const Vv=[];Te.handleByList(fe.Renderer,Vv);function J1(i){for(const e of Vv)if(e.test(i))return new e(i);throw new Error("Unable to auto-detect a suitable renderer.")}var eE=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,tE=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const rE=eE,$v=tE;class Wv{constructor(e){this.renderer=e}contextChange(e){let t;if(this.renderer.context.webGLVersion===1){const r=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,r)}else{const r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}t>=ft.HIGH?this.multisample=ft.HIGH:t>=ft.MEDIUM?this.multisample=ft.MEDIUM:t>=ft.LOW?this.multisample=ft.LOW:this.multisample=ft.NONE}destroy(){}}Wv.extension={type:fe.RendererSystem,name:"_multisample"};Te.add(Wv);class nE{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class jv{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:r}=this,o=e._glBuffers[r]||this.createGLBuffer(e);t.bindBuffer(e.type,o.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:r,CONTEXT_UID:o}=this;if(this.boundBufferBases[t]!==e){const a=e._glBuffers[o]||this.createGLBuffer(e);this.boundBufferBases[t]=e,r.bindBufferBase(r.UNIFORM_BUFFER,t,a.buffer)}}bindBufferRange(e,t,r){const{gl:o,CONTEXT_UID:a}=this;r=r||0;const u=e._glBuffers[a]||this.createGLBuffer(e);o.bindBufferRange(o.UNIFORM_BUFFER,t||0,u.buffer,r*256,256)}update(e){const{gl:t,CONTEXT_UID:r}=this,o=e._glBuffers[r]||this.createGLBuffer(e);if(e._updateID!==o.updateID)if(o.updateID=e._updateID,t.bindBuffer(e.type,o.buffer),o.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const a=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;o.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,a)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const r=e._glBuffers[this.CONTEXT_UID],o=this.gl;e.disposeRunner.remove(this),r&&(t||o.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let r=0;r<t.length;r++)this.dispose(this.managedBuffers[t[r]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:r}=this;return e._glBuffers[t]=new nE(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}jv.extension={type:fe.RendererSystem,name:"buffer"};Te.add(jv);class Xv{constructor(e){this.renderer=e}render(e,t){const r=this.renderer;let o,a,u,c;if(t&&(o=t.renderTexture,a=t.clear,u=t.transform,c=t.skipUpdateTransform),this.renderingToScreen=!o,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=u,!r.context.isLost){if(o||(this.lastObjectRendered=e),!c){const f=e.enableTempParent();e.updateTransform(),e.disableTempParent(f)}r.renderTexture.bind(o),r.batch.currentRenderer.start(),(a??r.background.clearBeforeRender)&&r.renderTexture.clear(),e.render(r),r.batch.currentRenderer.flush(),o&&(t.blit&&r.framebuffer.blit(),o.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}Xv.extension={type:fe.RendererSystem,name:"objectRenderer"};Te.add(Xv);const xl=class Td extends K1{constructor(e){super(),this.type=qy.WEBGL,e=Object.assign({},ge.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Ar({projectionMatrix:new Je},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Td.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(Ue("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=Td.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e?.forceCanvas?!1:bw()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Ue("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Ue("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Ue("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Ue("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){Ue("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return Ue("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){Ue("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return Ue("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};xl.extension={type:fe.Renderer,priority:1},xl.__plugins={},xl.__systems={};let Qd=xl;Te.handleByMap(fe.RendererPlugin,Qd.__plugins);Te.handleByMap(fe.RendererSystem,Qd.__systems);Te.add(Qd);class Yv extends Lo{constructor(e,t){const{width:r,height:o}=t||{};super(r,o),this.items=[],this.itemDirtyIds=[];for(let a=0;a<e;a++){const u=new Oe;this.items.push(u),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):e[r]instanceof Lo?this.addResourceAt(e[r],r):this.addResourceAt(dv(e[r],t),r))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(t=>t.resource).filter(t=>t).map(t=>t.load());return this._load=Promise.all(e).then(()=>{const{realWidth:t,realHeight:r}=this.items[0];return this.resize(t,r),this.update(),Promise.resolve(this)}),this._load}}class iE extends Yv{constructor(e,t){const{width:r,height:o}=t||{};let a,u;Array.isArray(e)?(a=e,u=e.length):u=e,super(u,{width:r,height:o}),a&&this.initFromArray(a,t)}addBaseTextureAt(e,t){if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=xs.TEXTURE_2D_ARRAY}upload(e,t,r){const{length:o,itemDirtyIds:a,items:u}=this,{gl:c}=e;r.dirtyId<0&&c.texImage3D(c.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,o,0,t.format,r.type,null);for(let f=0;f<o;f++){const m=u[f];a[f]<m.dirtyId&&(a[f]=m.dirtyId,m.valid&&c.texSubImage3D(c.TEXTURE_2D_ARRAY,0,0,0,f,m.resource.width,m.resource.height,1,t.format,r.type,m.resource.source))}return!0}}class sE extends gn{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return t&&e instanceof t?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const qv=class Co extends Yv{constructor(e,t){const{width:r,height:o,autoLoad:a,linkBaseTexture:u}=t||{};if(e&&e.length!==Co.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:r,height:o});for(let c=0;c<Co.SIDES;c++)this.items[c].target=xs.TEXTURE_CUBE_MAP_POSITIVE_X+c;this.linkBaseTexture=u!==!1,e&&this.initFromArray(e,t),a!==!1&&this.load()}bind(e){super.bind(e),e.target=xs.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=xs.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,r){const o=this.itemDirtyIds;for(let a=0;a<Co.SIDES;a++){const u=this.items[a];(o[a]<u.dirtyId||r.dirtyId<t.dirtyId)&&(u.valid&&u.resource?(u.resource.upload(e,u,r),o[a]=u.dirtyId):o[a]<-1&&(e.gl.texImage2D(u.target,0,r.internalFormat,t.realWidth,t.realHeight,0,t.format,r.type,null),o[a]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Co.SIDES}};qv.SIDES=6;let oE=qv;class ys extends gn{constructor(e,t){t=t||{};let r,o,a;typeof e=="string"?(r=ys.EMPTY,o=e,a=!0):(r=e,o=null,a=!1),super(r),this.url=o,this.crossOrigin=t.crossOrigin??!0,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??a,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,t)=>{if(this.url===null){e(this);return}try{const r=await ge.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const o=await r.blob();if(this.destroyed)return;const a=await createImageBitmap(o,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Wt.UNPACK?"premultiply":"none"});if(this.destroyed){a.close();return}this.source=a,this.update(),e(this)}catch(r){if(this.destroyed)return;t(r),this.onError.emit(r)}}),this._load)}upload(e,t,r){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),super.upload(e,t,r)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return ys._EMPTY=ys._EMPTY??ge.ADAPTER.createCanvas(0,0),ys._EMPTY}}const Sd=class wl extends gn{constructor(e,t){t=t||{},super(ge.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},wl.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;gn.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,r=e.height;if(!t||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let o=t*this.scale,a=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(o=this._overrideWidth||this._overrideHeight/r*t,a=this._overrideHeight||this._overrideWidth/t*r),o=Math.round(o),a=Math.round(a);const u=this.source;u.width=o,u.height=a,u._pixiId=`canvas_${Ri()}`,u.getContext("2d").drawImage(e,0,0,t,r,0,0,o,a),this._resolve(),this._resolve=null}}static getSize(e){const t=wl.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&wl.SVG_XML.test(e)}};Sd.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,Sd.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let Ad=Sd;class aE extends gn{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const bd=class Cd extends gn{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const r=document.createElement("video");t.autoLoad!==!1&&r.setAttribute("preload","auto"),t.playsinline!==!1&&(r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline","")),t.muted===!0&&(r.setAttribute("muted",""),r.muted=!0),t.loop===!0&&r.setAttribute("loop",""),t.autoPlay!==!1&&r.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const o=e[0].src||e[0];gn.crossOrigin(r,o,t.crossorigin);for(let a=0;a<e.length;++a){const u=document.createElement("source");let{src:c,mime:f}=e[a];if(c=c||e[a],c.startsWith("data:"))f=c.slice(5,c.indexOf(";"));else if(!c.startsWith("blob:")){const m=c.split("?").shift().toLowerCase(),v=m.slice(m.lastIndexOf(".")+1);f=f||Cd.MIME_TYPES[v]||`video/${v}`}u.src=c,f&&(u.type=f),r.appendChild(u)}e=r}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const t=Qt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t,r)=>{this.valid?t(this):(this._resolve=t,this._reject=r,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Qt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Qt.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Qt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||Cd.TYPES.includes(t)}};bd.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],bd.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Kv=bd;fd.push(ys,wv,sE,Kv,aE,Ad,jl,oE,iE);class Dl{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Be.EMPTY:(e=e||new Be(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:r,b:o,c:a,d:u,tx:c,ty:f}=e,m=r*t.x+a*t.y+c,v=o*t.x+u*t.y+f;this.minX=Math.min(this.minX,m),this.maxX=Math.max(this.maxX,m),this.minY=Math.min(this.minY,v),this.maxY=Math.max(this.maxY,v)}addQuad(e){let t=this.minX,r=this.minY,o=this.maxX,a=this.maxY,u=e[0],c=e[1];t=u<t?u:t,r=c<r?c:r,o=u>o?u:o,a=c>a?c:a,u=e[2],c=e[3],t=u<t?u:t,r=c<r?c:r,o=u>o?u:o,a=c>a?c:a,u=e[4],c=e[5],t=u<t?u:t,r=c<r?c:r,o=u>o?u:o,a=c>a?c:a,u=e[6],c=e[7],t=u<t?u:t,r=c<r?c:r,o=u>o?u:o,a=c>a?c:a,this.minX=t,this.minY=r,this.maxX=o,this.maxY=a}addFrame(e,t,r,o,a){this.addFrameMatrix(e.worldTransform,t,r,o,a)}addFrameMatrix(e,t,r,o,a){const u=e.a,c=e.b,f=e.c,m=e.d,v=e.tx,h=e.ty;let p=this.minX,y=this.minY,x=this.maxX,w=this.maxY,E=u*t+f*r+v,T=c*t+m*r+h;p=E<p?E:p,y=T<y?T:y,x=E>x?E:x,w=T>w?T:w,E=u*o+f*r+v,T=c*o+m*r+h,p=E<p?E:p,y=T<y?T:y,x=E>x?E:x,w=T>w?T:w,E=u*t+f*a+v,T=c*t+m*a+h,p=E<p?E:p,y=T<y?T:y,x=E>x?E:x,w=T>w?T:w,E=u*o+f*a+v,T=c*o+m*a+h,p=E<p?E:p,y=T<y?T:y,x=E>x?E:x,w=T>w?T:w,this.minX=p,this.minY=y,this.maxX=x,this.maxY=w}addVertexData(e,t,r){let o=this.minX,a=this.minY,u=this.maxX,c=this.maxY;for(let f=t;f<r;f+=2){const m=e[f],v=e[f+1];o=m<o?m:o,a=v<a?v:a,u=m>u?m:u,c=v>c?v:c}this.minX=o,this.minY=a,this.maxX=u,this.maxY=c}addVertices(e,t,r,o){this.addVerticesMatrix(e.worldTransform,t,r,o)}addVerticesMatrix(e,t,r,o,a=0,u=a){const c=e.a,f=e.b,m=e.c,v=e.d,h=e.tx,p=e.ty;let y=this.minX,x=this.minY,w=this.maxX,E=this.maxY;for(let T=r;T<o;T+=2){const k=t[T],R=t[T+1],N=c*k+m*R+h,L=v*R+f*k+p;y=Math.min(y,N-a),w=Math.max(w,N+a),x=Math.min(x,L-u),E=Math.max(E,L+u)}this.minX=y,this.minY=x,this.maxX=w,this.maxY=E}addBounds(e){const t=this.minX,r=this.minY,o=this.maxX,a=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>o?e.maxX:o,this.maxY=e.maxY>a?e.maxY:a}addBoundsMask(e,t){const r=e.minX>t.minX?e.minX:t.minX,o=e.minY>t.minY?e.minY:t.minY,a=e.maxX<t.maxX?e.maxX:t.maxX,u=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=a&&o<=u){const c=this.minX,f=this.minY,m=this.maxX,v=this.maxY;this.minX=r<c?r:c,this.minY=o<f?o:f,this.maxX=a>m?a:m,this.maxY=u>v?u:v}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const r=e.minX>t.x?e.minX:t.x,o=e.minY>t.y?e.minY:t.y,a=e.maxX<t.x+t.width?e.maxX:t.x+t.width,u=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=a&&o<=u){const c=this.minX,f=this.minY,m=this.maxX,v=this.maxY;this.minX=r<c?r:c,this.minY=o<f?o:f,this.maxX=a>m?a:m,this.maxY=u>v?u:v}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,r,o,a,u){e-=a,t-=u,r+=a,o+=u,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>o?this.maxY:o}}class it extends Do{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new qd,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Dl,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let r=0;r<t.length;++r){const o=t[r];Object.defineProperty(it.prototype,o,Object.getOwnPropertyDescriptor(e,o))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new Be),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new Be),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Dl);const t=this.transform,r=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=r?.worldAlpha??1,this.transform=this._tempDisplayObjectParent.transform;const o=this._bounds,a=this._boundsID;this._bounds=this._localBounds;const u=this.getBounds(!1,e);return this.parent=r,this.transform=t,this._bounds=o,this._bounds.updateID+=this._boundsID-a,u}toGlobal(e,t,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,r,o){return t&&(e=t.toGlobal(e,r,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){this.parent?.removeChild(this)}setTransform(e=0,t=0,r=1,o=1,a=0,u=0,c=0,f=0,m=0){return this.position.x=e,this.position.y=t,this.scale.x=r||1,this.scale.y=o||1,this.rotation=a,this.skew.x=u,this.skew.y=c,this.pivot.x=f,this.pivot.y=m,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new lE),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*e1}set angle(e){this.transform.rotation=e*t1}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,t._maskRefCount===0&&(t.renderable=!0,t.isMask=!1))}if(this._mask=e,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount===0&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class lE extends it{constructor(){super(...arguments),this.sortDirty=null}}it.prototype.displayObjectUpdateTransform=it.prototype.updateTransform;const uE=new Je;function hE(i,e){return i.zIndex===e.zIndex?i._lastSortedIndex-e._lastSortedIndex:i.zIndex-e.zIndex}const Qv=class Id extends it{constructor(){super(),this.children=[],this.sortableChildren=Id.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const r=this.getChildIndex(e),o=this.getChildIndex(t);this.children[r]=t,this.children[o]=e,this.onChildrenChange(r<o?r:o)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(e);ws(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],r=this.children.indexOf(t);if(r===-1)return null;t.parent=null,t.transform._parentID=-1,ws(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),this.emit("childRemoved",t,this,r)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,ws(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const r=e,o=t,a=o-r;let u;if(a>0&&a<=o){u=this.children.splice(r,a);for(let c=0;c<u.length;++c)u[c].parent=null,u[c].transform&&(u[c].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let c=0;c<u.length;++c)u[c].emit("removed",this),this.emit("childRemoved",u[c],this,c);return u}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,r=this.children.length;t<r;++t){const o=this.children[t];o._lastSortedIndex=t,!e&&o.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(hE),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const r=this.children[e];r.visible&&r.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const r=t._mask.isMaskData?t._mask.maskObject:t._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(t._bounds,r._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const r=super.getLocalBounds(e);if(!t)for(let o=0,a=this.children.length;o<a;++o){const u=this.children[o];u.visible&&u.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let r,o;this.cullArea?(r=this.cullArea,o=this.worldTransform):this._render!==Id.prototype._render&&(r=this.getBounds(!0));const a=e.projection.transform;if(a&&(o?(o=uE.copyFrom(o),o.prepend(a)):o=a),r&&t.intersects(r,o))this._render(e);else if(this.cullArea)return;for(let u=0,c=this.children.length;u<c;++u){const f=this.children[u],m=f.cullable;f.cullable=m||!this.cullArea,f.render(e),f.cullable=m}}render(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,r=this.children.length;t<r;++t)this.children[t].render(e)}}renderAdvanced(e){const t=this.filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let a=0;a<t.length;a++)t[a].enabled&&this._enabledFilters.push(t[a])}const o=t&&this._enabledFilters?.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==gt.NONE));if(o&&e.batch.flush(),t&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let a=0,u=this.children.length;a<u;++a)this.children[a].render(e)}o&&e.batch.flush(),r&&e.mask.pop(this),t&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e?.children,r=this.removeChildren(0,this.children.length);if(t)for(let o=0;o<r.length;++o)r[o].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};Qv.defaultSortableChildren=!1;let br=Qv;br.prototype.containerUpdateTransform=br.prototype.updateTransform;Object.defineProperties(ge,{SORTABLE_CHILDREN:{get(){return br.defaultSortableChildren},set(i){Ue("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),br.defaultSortableChildren=i}}});const wo=new He,cE=new Uint16Array([0,1,2,0,2,3]);class Rs extends br{constructor(e){super(),this._anchor=new fn(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Ze(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Me.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||xe.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=cE,this.pluginName="batch",this.isSprite=!0,this._roundPixels=ge.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Xn(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Xn(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const t=this.transform.worldTransform,r=t.a,o=t.b,a=t.c,u=t.d,c=t.tx,f=t.ty,m=this.vertexData,v=e.trim,h=e.orig,p=this._anchor;let y=0,x=0,w=0,E=0;if(v?(x=v.x-p._x*h.width,y=x+v.width,E=v.y-p._y*h.height,w=E+v.height):(x=-p._x*h.width,y=x+h.width,E=-p._y*h.height,w=E+h.height),m[0]=r*x+a*E+c,m[1]=u*E+o*x+f,m[2]=r*y+a*E+c,m[3]=u*E+o*y+f,m[4]=r*y+a*w+c,m[5]=u*w+o*y+f,m[6]=r*x+a*w+c,m[7]=u*w+o*x+f,this._roundPixels){const T=ge.RESOLUTION;for(let k=0;k<m.length;++k)m[k]=Math.round(m[k]*T)/T}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,t=this.vertexTrimmedData,r=e.orig,o=this._anchor,a=this.transform.worldTransform,u=a.a,c=a.b,f=a.c,m=a.d,v=a.tx,h=a.ty,p=-o._x*r.width,y=p+r.width,x=-o._y*r.height,w=x+r.height;if(t[0]=u*p+f*x+v,t[1]=m*x+c*p+h,t[2]=u*y+f*x+v,t[3]=m*x+c*y+h,t[4]=u*y+f*w+v,t[5]=m*w+c*y+h,t[6]=u*p+f*w+v,t[7]=m*w+c*p+h,this._roundPixels){const E=ge.RESOLUTION;for(let T=0;T<t.length;++T)t[T]=Math.round(t[T]*E)/E}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new Dl),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Be),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,wo);const t=this._texture.orig.width,r=this._texture.orig.height,o=-t*this.anchor.x;let a=0;return wo.x>=o&&wo.x<o+t&&(a=-r*this.anchor.y,wo.y>=a&&wo.y<a+r)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e?.texture){const t=typeof e=="boolean"?e:e?.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){const r=e instanceof xe?e:xe.from(e,t);return new Rs(r)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const t=Xn(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const t=Xn(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||xe.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const Zv=new Je;it.prototype._cacheAsBitmap=!1;it.prototype._cacheData=null;it.prototype._cacheAsBitmapResolution=null;it.prototype._cacheAsBitmapMultisample=null;class dE{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(it.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(i){i!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=i,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(i){i!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=i,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(i){if(this._cacheAsBitmap===i)return;this._cacheAsBitmap=i;let e;i?(this._cacheData||(this._cacheData=new dE),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});it.prototype._renderCached=function(i){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(i),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(i))};it.prototype._initCachedDisplayObject=function(i){if(this._cacheData?.sprite)return;const e=this.alpha;this.alpha=1,i.batch.flush();const t=this.getLocalBounds(new Be,!0);if(this.filters?.length){const p=this.filters[0].padding;t.pad(p)}const r=this.cacheAsBitmapResolution||i.resolution;t.ceil(r),t.width=Math.max(t.width,1/r),t.height=Math.max(t.height,1/r);const o=i.renderTexture.current,a=i.renderTexture.sourceFrame.clone(),u=i.renderTexture.destinationFrame.clone(),c=i.projection.transform,f=ki.create({width:t.width,height:t.height,resolution:r,multisample:this.cacheAsBitmapMultisample??i.multisample}),m=`cacheAsBitmap_${Ri()}`;this._cacheData.textureCacheId=m,Oe.addToCache(f.baseTexture,m),xe.addToCache(f,m);const v=this.transform.localTransform.copyTo(Zv).invert().translate(-t.x,-t.y);this.render=this._cacheData.originalRender,i.render(this,{renderTexture:f,clear:!0,transform:v,skipUpdateTransform:!1}),i.framebuffer.blit(),i.projection.transform=c,i.renderTexture.bind(o,a,u),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const h=new Rs(f);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(t.x/t.width),h.anchor.y=-(t.y/t.height),h.alpha=e,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=h.containsPoint.bind(h)};it.prototype._renderCachedCanvas=function(i){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(i),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(i))};it.prototype._initCachedDisplayObjectCanvas=function(i){if(this._cacheData?.sprite)return;const e=this.getLocalBounds(new Be,!0),t=this.alpha;this.alpha=1;const r=i.canvasContext.activeContext,o=i._projTransform,a=this.cacheAsBitmapResolution||i.resolution;e.ceil(a),e.width=Math.max(e.width,1/a),e.height=Math.max(e.height,1/a);const u=ki.create({width:e.width,height:e.height,resolution:a}),c=`cacheAsBitmap_${Ri()}`;this._cacheData.textureCacheId=c,Oe.addToCache(u.baseTexture,c),xe.addToCache(u,c);const f=Zv;this.transform.localTransform.copyTo(f),f.invert(),f.tx-=e.x,f.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,i.render(this,{renderTexture:u,clear:!0,transform:f,skipUpdateTransform:!1}),i.canvasContext.activeContext=r,i._projTransform=o,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const m=new Rs(u);m.transform.worldTransform=this.transform.worldTransform,m.anchor.x=-(e.x/e.width),m.anchor.y=-(e.y/e.height),m.alpha=t,m._bounds=this._bounds,this._cacheData.sprite=m,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=i._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=m.containsPoint.bind(m)};it.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};it.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};it.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Oe.removeFromCache(this._cacheData.textureCacheId),xe.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};it.prototype._cacheAsBitmapDestroy=function(i){this.cacheAsBitmap=!1,this.destroy(i)};it.prototype.name=null;br.prototype.getChildByName=function(i,e){for(let t=0,r=this.children.length;t<r;t++)if(this.children[t].name===i)return this.children[t];if(e)for(let t=0,r=this.children.length;t<r;t++){const o=this.children[t];if(!o.getChildByName)continue;const a=o.getChildByName(i,!0);if(a)return a}return null};it.prototype.getGlobalPosition=function(i=new He,e=!1){return this.parent?this.parent.toGlobal(this.position,i,e):(i.x=this.position.x,i.y=this.position.y),i};var fE=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class pE extends Ft{constructor(e=1){super(rE,fE,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const mE={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},gE=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function yE(i){const e=mE[i],t=e.length;let r=gE,o="";const a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let u;for(let c=0;c<i;c++){let f=a.replace("%index%",c.toString());u=c,c>=t&&(u=i-c-1),f=f.replace("%value%",e[u].toString()),o+=f,o+=`
`}return r=r.replace("%blur%",o),r=r.replace("%size%",i.toString()),r}const vE=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function _E(i,e){const t=Math.ceil(i/2);let r=vE,o="",a;e?a="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":a="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let u=0;u<i;u++){let c=a.replace("%index%",u.toString());c=c.replace("%sampleIndex%",`${u-(t-1)}.0`),o+=c,o+=`
`}return r=r.replace("%blur%",o),r=r.replace("%size%",i.toString()),r}class Rd extends Ft{constructor(e,t=8,r=4,o=Ft.defaultResolution,a=5){const u=_E(a,e),c=yE(a);super(u,c),this.horizontal=e,this.resolution=o,this._quality=0,this.quality=r,this.blur=t}apply(e,t,r,o){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/t.width):this.uniforms.strength=1/r.height*(r.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,t,r,o);else{const a=e.getFilterTexture(),u=e.renderer;let c=t,f=a;this.state.blend=!1,e.applyFilter(this,c,f,zr.CLEAR);for(let m=1;m<this.passes-1;m++){e.bindAndClear(c,zr.BLIT),this.uniforms.uSampler=f;const v=f;f=c,c=v,u.shader.bind(this),u.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,f,r,o),e.returnFilterTexture(a)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class xE extends Ft{constructor(e=8,t=4,r=Ft.defaultResolution,o=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new Rd(!0,e,t,r,o),this.blurYFilter=new Rd(!1,e,t,r,o),this.resolution=r,this.quality=t,this.blur=e,this.repeatEdgePixels=!1}apply(e,t,r,o){const a=Math.abs(this.blurXFilter.strength),u=Math.abs(this.blurYFilter.strength);if(a&&u){const c=e.getFilterTexture();this.blurXFilter.apply(e,t,c,zr.CLEAR),this.blurYFilter.apply(e,c,r,o),e.returnFilterTexture(c)}else u?this.blurYFilter.apply(e,t,r,o):this.blurXFilter.apply(e,t,r,o)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var wE=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class Pd extends Ft{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super($v,wE,e),this.alpha=1}_loadMatrix(e,t=!1){let r=e;t&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(e,t,r){return e[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15],e[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16],e[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17],e[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18],e[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19]+t[4],e[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15],e[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16],e[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17],e[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18],e[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19]+t[9],e[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15],e[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16],e[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17],e[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18],e[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19]+t[14],e[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15],e[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16],e[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17],e[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18],e[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}tint(e,t){const[r,o,a]=Ze.shared.setValue(e).toArray(),u=[r,0,0,0,0,0,o,0,0,0,0,0,a,0,0,0,0,0,1,0];this._loadMatrix(u,t)}greyscale(e,t){const r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}blackAndWhite(e){const t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)}hue(e,t){e=(e||0)/180*Math.PI;const r=Math.cos(e),o=Math.sin(e),a=Math.sqrt,u=1/3,c=a(u),f=r+(1-r)*u,m=u*(1-r)-c*o,v=u*(1-r)+c*o,h=u*(1-r)+c*o,p=r+u*(1-r),y=u*(1-r)-c*o,x=u*(1-r)-c*o,w=u*(1-r)+c*o,E=r+u*(1-r),T=[f,m,v,0,0,h,p,y,0,0,x,w,E,0,0,0,0,0,1,0];this._loadMatrix(T,t)}contrast(e,t){const r=(e||0)+1,o=-.5*(r-1),a=[r,0,0,0,o,0,r,0,0,o,0,0,r,0,o,0,0,0,1,0];this._loadMatrix(a,t)}saturate(e=0,t){const r=e*2/3+1,o=(r-1)*-.5,a=[r,o,o,0,0,o,r,o,0,0,o,o,r,0,0,0,0,0,1,0];this._loadMatrix(a,t)}desaturate(){this.saturate(-1)}negative(e){const t=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(t,e)}sepia(e){const t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)}technicolor(e){const t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)}polaroid(e){const t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)}toBGR(e){const t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)}kodachrome(e){const t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)}browni(e){const t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)}vintage(e){const t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)}colorTone(e,t,r,o,a){e=e||.2,t=t||.15,r=r||16770432,o=o||3375104;const u=Ze.shared,[c,f,m]=u.setValue(r).toArray(),[v,h,p]=u.setValue(o).toArray(),y=[.3,.59,.11,0,0,c,f,m,e,0,v,h,p,t,0,c-v,f-h,m-p,0,0];this._loadMatrix(y,a)}night(e,t){e=e||.1;const r=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(r,t)}predator(e,t){const r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,t)}lsd(e){const t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}Pd.prototype.grayscale=Pd.prototype.greyscale;var EE=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,TE=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class SE extends Ft{constructor(e,t){const r=new Je;e.renderable=!1,super(TE,EE,{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=r,t==null&&(t=20),this.scale=new He(t,t)}apply(e,t,r,o){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const a=this.maskSprite.worldTransform,u=Math.sqrt(a.a*a.a+a.b*a.b),c=Math.sqrt(a.c*a.c+a.d*a.d);u!==0&&c!==0&&(this.uniforms.rotation[0]=a.a/u,this.uniforms.rotation[1]=a.b/u,this.uniforms.rotation[2]=a.c/c,this.uniforms.rotation[3]=a.d/c),e.applyFilter(this,t,r,o)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var AE=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,bE=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class CE extends Ft{constructor(){super(bE,AE)}}var IE=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class RE extends Ft{constructor(e=.5,t=Math.random()){super($v,IE,{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const gy={AlphaFilter:pE,BlurFilter:xE,BlurFilterPass:Rd,ColorMatrixFilter:Pd,DisplacementFilter:SE,FXAAFilter:CE,NoiseFilter:RE};Object.entries(gy).forEach(([i,e])=>{Object.defineProperty(gy,i,{get(){return Ue("7.1.0",`filters.${i} has moved to ${i}`),e}})});class PE{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(Qt.system.add(this.tickerUpdate,this,Pi.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Qt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Wn=new PE;class Oo{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Oo.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new He,this.page=new He,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,r,o,a){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Ol extends Oo{constructor(){super(...arguments),this.client=new He,this.movement=new He,this.offset=new He,this.global=new He,this.screen=new He}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,r,o,a,u,c,f,m,v,h,p,y,x,w){throw new Error("Method not implemented.")}}class Er extends Ol{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Ts extends Ol{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Ts.DOM_DELTA_PIXEL=0,Ts.DOM_DELTA_LINE=1,Ts.DOM_DELTA_PAGE=2;const ME=2048,kE=new He,Kc=new He;class LE{constructor(e){this.dispatch=new Do,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((r,o)=>r.priority-o.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let r=0,o=t.length;r<o;r++)t[r].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){Wn.pauseUpdate=!0;const r=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",o=this[r](this.rootTarget,this.rootTarget.eventMode,kE.set(e,t),this.hitTestFn,this.hitPruneFn);return o&&o[0]}propagate(e,t){if(!e.target)return;const r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let o=0,a=r.length-1;o<a;o++)if(e.currentTarget=r[o],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let o=r.length-2;o>=0;o--)if(e.currentTarget=r[o],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,r=this._allInteractiveElements){if(r.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const o=Array.isArray(t)?t:[t];for(let a=r.length-1;a>=0;a--)o.forEach(u=>{e.currentTarget=r[a],this.notifyTarget(e,u)})}propagationPath(e){const t=[e];for(let r=0;r<ME&&e!==this.rootTarget;r++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,r,o,a,u=!1){let c=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Wn.pauseUpdate=!1),e.interactiveChildren&&e.children){const v=e.children;for(let h=v.length-1;h>=0;h--){const p=v[h],y=this.hitTestMoveRecursive(p,this._isInteractive(t)?t:p.eventMode,r,o,a,u||a(e,r));if(y){if(y.length>0&&!y[y.length-1].parent)continue;const x=e.isInteractive();(y.length>0||x)&&(x&&this._allInteractiveElements.push(e),y.push(e)),this._hitElements.length===0&&(this._hitElements=y),c=!0}}}const f=this._isInteractive(t),m=e.isInteractive();return f&&m&&this._allInteractiveElements.push(e),u||this._hitElements.length>0?null:c?this._hitElements:f&&!a(e,r)&&o(e,r)?m?[e]:[]:null}hitTestRecursive(e,t,r,o,a){if(this._interactivePrune(e)||a(e,r))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Wn.pauseUpdate=!1),e.interactiveChildren&&e.children){const f=e.children;for(let m=f.length-1;m>=0;m--){const v=f[m],h=this.hitTestRecursive(v,this._isInteractive(t)?t:v.eventMode,r,o,a);if(h){if(h.length>0&&!h[h.length-1].parent)continue;const p=e.isInteractive();return(h.length>0||p)&&h.push(e),h}}}const u=this._isInteractive(t),c=e.isInteractive();return u&&o(e,r)?c?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,Kc),!e.hitArea.contains(Kc.x,Kc.y)))return!0;if(e._mask){const r=e._mask.isMaskData?e._mask.maskObject:e._mask;if(r&&!r.containsPoint?.(t))return!0}return!1}hitTestFn(e,t){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(t):!1}notifyTarget(e,t){t=t??e.type;const r=`on${t}`;e.currentTarget[r]?.(e);const o=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,o),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof Er)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){const o=t.button===2;this.dispatchEvent(t,o?"rightdown":"mousedown")}const r=this.trackingData(e.pointerId);r.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){if(!(e instanceof Er)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const r=t.pointerType==="mouse"||t.pointerType==="pen",o=this.trackingData(e.pointerId),a=this.findMountedTarget(o.overTargets);if(o.overTargets?.length>0&&a!==t.target){const f=e.type==="mousemove"?"mouseout":"pointerout",m=this.createPointerEvent(e,f,a);if(this.dispatchEvent(m,"pointerout"),r&&this.dispatchEvent(m,"mouseout"),!t.composedPath().includes(a)){const v=this.createPointerEvent(e,"pointerleave",a);for(v.eventPhase=v.AT_TARGET;v.target&&!t.composedPath().includes(v.target);)v.currentTarget=v.target,this.notifyTarget(v),r&&this.notifyTarget(v,"mouseleave"),v.target=v.target.parent;this.freeEvent(v)}this.freeEvent(m)}if(a!==t.target){const f=e.type==="mousemove"?"mouseover":"pointerover",m=this.clonePointerEvent(t,f);this.dispatchEvent(m,"pointerover"),r&&this.dispatchEvent(m,"mouseover");let v=a?.parent;for(;v&&v!==this.rootTarget.parent&&v!==t.target;)v=v.parent;if(!v||v===this.rootTarget.parent){const h=this.clonePointerEvent(t,"pointerenter");for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==a&&h.target!==this.rootTarget.parent;)h.currentTarget=h.target,this.notifyTarget(h),r&&this.notifyTarget(h,"mouseenter"),h.target=h.target.parent;this.freeEvent(h)}this.freeEvent(m)}const u=[],c=this.enableGlobalMoveEvents??!0;this.moveOnAll?u.push("pointermove"):this.dispatchEvent(t,"pointermove"),c&&u.push("globalpointermove"),t.pointerType==="touch"&&(this.moveOnAll?u.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),c&&u.push("globaltouchmove")),r&&(this.moveOnAll?u.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),c&&u.push("globalmousemove"),this.cursor=t.target?.cursor),u.length>0&&this.all(t,u),this._allInteractiveElements.length=0,this._hitElements.length=0,o.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){if(!(e instanceof Er)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),r=this.createPointerEvent(e),o=r.pointerType==="mouse"||r.pointerType==="pen";this.dispatchEvent(r,"pointerover"),o&&this.dispatchEvent(r,"mouseover"),r.pointerType==="mouse"&&(this.cursor=r.target?.cursor);const a=this.clonePointerEvent(r,"pointerenter");for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),o&&this.notifyTarget(a,"mouseenter"),a.target=a.target.parent;t.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(a)}mapPointerOut(e){if(!(e instanceof Er)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId);if(t.overTargets){const r=e.pointerType==="mouse"||e.pointerType==="pen",o=this.findMountedTarget(t.overTargets),a=this.createPointerEvent(e,"pointerout",o);this.dispatchEvent(a),r&&this.dispatchEvent(a,"mouseout");const u=this.createPointerEvent(e,"pointerleave",o);for(u.eventPhase=u.AT_TARGET;u.target&&u.target!==this.rootTarget.parent;)u.currentTarget=u.target,this.notifyTarget(u),r&&this.notifyTarget(u,"mouseleave"),u.target=u.target.parent;t.overTargets=null,this.freeEvent(a),this.freeEvent(u)}this.cursor=null}mapPointerUp(e){if(!(e instanceof Er)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=performance.now(),r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerup"),r.pointerType==="touch")this.dispatchEvent(r,"touchend");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const c=r.button===2;this.dispatchEvent(r,c?"rightup":"mouseup")}const o=this.trackingData(e.pointerId),a=this.findMountedTarget(o.pressTargetsByButton[e.button]);let u=a;if(a&&!r.composedPath().includes(a)){let c=a;for(;c&&!r.composedPath().includes(c);){if(r.currentTarget=c,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch")this.notifyTarget(r,"touchendoutside");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const f=r.button===2;this.notifyTarget(r,f?"rightupoutside":"mouseupoutside")}c=c.parent}delete o.pressTargetsByButton[e.button],u=c}if(u){const c=this.clonePointerEvent(r,"click");c.target=u,c.path=null,o.clicksByButton[e.button]||(o.clicksByButton[e.button]={clickCount:0,target:c.target,timeStamp:t});const f=o.clicksByButton[e.button];if(f.target===c.target&&t-f.timeStamp<200?++f.clickCount:f.clickCount=1,f.target=c.target,f.timeStamp=t,c.detail=f.clickCount,c.pointerType==="mouse"){const m=c.button===2;this.dispatchEvent(c,m?"rightclick":"click")}else c.pointerType==="touch"&&this.dispatchEvent(c,"tap");this.dispatchEvent(c,"pointertap"),this.freeEvent(c)}this.freeEvent(r)}mapPointerUpOutside(e){if(!(e instanceof Er)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),r=this.findMountedTarget(t.pressTargetsByButton[e.button]),o=this.createPointerEvent(e);if(r){let a=r;for(;a;)o.currentTarget=a,this.notifyTarget(o,"pointerupoutside"),o.pointerType==="touch"?this.notifyTarget(o,"touchendoutside"):(o.pointerType==="mouse"||o.pointerType==="pen")&&this.notifyTarget(o,o.button===2?"rightupoutside":"mouseupoutside"),a=a.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(o)}mapWheel(e){if(!(e instanceof Ts)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let r=1;r<e.length&&e[r].parent===t;r++)t=e[r];return t}createPointerEvent(e,t,r){const o=this.allocateEvent(Er);return this.copyPointerData(e,o),this.copyMouseData(e,o),this.copyData(e,o),o.nativeEvent=e.nativeEvent,o.originalEvent=e,o.target=r??this.hitTest(o.global.x,o.global.y)??this._hitElements[0],typeof t=="string"&&(o.type=t),o}createWheelEvent(e){const t=this.allocateEvent(Ts);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const r=this.allocateEvent(Er);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=t??r.type,r}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof Er&&t instanceof Er&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof Ol&&t instanceof Ol&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){const r=e.currentTarget._events[t];if(r&&e.currentTarget.isInteractive())if("fn"in r)r.once&&e.currentTarget.removeListener(t,r.fn,void 0,!0),r.fn.call(r.context,e);else for(let o=0,a=r.length;o<a&&!e.propagationImmediatelyStopped;o++)r[o].once&&e.currentTarget.removeListener(t,r[o].fn,void 0,!0),r[o].fn.call(r[o].context,e)}}const DE=1,OE={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Md=class kd{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new LE(null),Wn.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Er(null),this.rootWheelEvent=new Ts(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...kd.defaultEventFeatures},{set:(t,r,o)=>(r==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=o),t[r]=o,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:r}=this.renderer;this.setTargetElement(t),this.resolution=r,kd._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const r=this.cursorStyles[e];if(r)switch(typeof r){case"string":t&&(this.domElement.style.cursor=r);break;case"function":r(e);break;case"object":t&&Object.assign(this.domElement.style,r);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let r=0,o=t.length;r<o;r++){const a=t[r],u=this.bootstrapEvent(this.rootPointerEvent,a);this.rootBoundary.mapEvent(u)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Wn.pointerMoved();const t=this.normalizeToPointerData(e);for(let r=0,o=t.length;r<o;r++){const a=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const r=t!==this.domElement?"outside":"",o=this.normalizeToPointerData(e);for(let a=0,u=o.length;a<u;a++){const c=this.bootstrapEvent(this.rootPointerEvent,o[a]);c.type+=r,this.rootBoundary.mapEvent(c)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);for(let r=0,o=t.length;r<o;r++){const a=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,Wn.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Wn.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Wn.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,r){const o=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},a=1/this.resolution;e.x=(t-o.left)*(this.domElement.width/o.width)*a,e.y=(r-o.top)*(this.domElement.height/o.height)*a}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let r=0,o=e.changedTouches.length;r<o;r++){const a=e.changedTouches[r];typeof a.button>"u"&&(a.button=0),typeof a.buttons>"u"&&(a.buttons=1),typeof a.isPrimary>"u"&&(a.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof a.width>"u"&&(a.width=a.radiusX||1),typeof a.height>"u"&&(a.height=a.radiusY||1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="touch"),typeof a.pointerId>"u"&&(a.pointerId=a.identifier||0),typeof a.pressure>"u"&&(a.pressure=a.force||.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),typeof a.layerX>"u"&&(a.layerX=a.offsetX=a.clientX),typeof a.layerY>"u"&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,a.type=e.type,t.push(a)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const r=e;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=DE),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,t.push(r)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=OE[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};Md.extension={name:"events",type:[fe.RendererSystem,fe.CanvasRendererSystem]},Md.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let Ld=Md;Te.add(Ld);function yy(i){return i==="dynamic"||i==="static"}const BE={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??yy(Ld.defaultEventMode)},set interactive(i){Ue("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=i,this.eventMode=i?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Ld.defaultEventMode},set eventMode(i){this._internalInteractive=yy(i),this._internalEventMode=i},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(i,e,t){const r=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,o=typeof t=="object"?t.signal:void 0,a=typeof t=="object"?t.once===!0:!1,u=typeof e=="function"?void 0:e;i=r?`${i}capture`:i;const c=typeof e=="function"?e:e.handleEvent,f=this;o&&o.addEventListener("abort",()=>{f.off(i,c,u)}),a?f.once(i,c,u):f.on(i,c,u)},removeEventListener(i,e,t){const r=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,o=typeof e=="function"?void 0:e;i=r?`${i}capture`:i,e=typeof e=="function"?e:e.handleEvent,this.off(i,e,o)},dispatchEvent(i){if(!(i instanceof Oo))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return i.defaultPrevented=!1,i.path=null,i.target=this,i.manager.dispatchEvent(i),!i.defaultPrevented}};it.mixin(BE);const FE={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};it.mixin(FE);const NE=9,ll=100,UE=0,GE=0,vy=2,_y=1,HE=-1e3,zE=-1e3,VE=2;class Jv{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(dn.tablet||dn.phone)&&this.createTouchHook();const t=document.createElement("div");t.style.width=`${ll}px`,t.style.height=`${ll}px`,t.style.position="absolute",t.style.top=`${UE}px`,t.style.left=`${GE}px`,t.style.zIndex=vy.toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${_y}px`,e.style.height=`${_y}px`,e.style.position="absolute",e.style.top=`${HE}px`,e.style.left=`${zE}px`,e.style.zIndex=VE.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const t=e.children;if(t)for(let r=0;r<t.length;r++)this.updateAccessibleObjects(t[r])}update(){const e=performance.now();if(dn.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:t,y:r,width:o,height:a}=this.renderer.view.getBoundingClientRect(),{width:u,height:c,resolution:f}=this.renderer,m=o/u*f,v=a/c*f;let h=this.div;h.style.left=`${t}px`,h.style.top=`${r}px`,h.style.width=`${u}px`,h.style.height=`${c}px`;for(let p=0;p<this.children.length;p++){const y=this.children[p];if(y.renderId!==this.renderId)y._accessibleActive=!1,ws(this.children,p,1),this.div.removeChild(y._accessibleDiv),this.pool.push(y._accessibleDiv),y._accessibleDiv=null,p--;else{h=y._accessibleDiv;let x=y.hitArea;const w=y.worldTransform;y.hitArea?(h.style.left=`${(w.tx+x.x*w.a)*m}px`,h.style.top=`${(w.ty+x.y*w.d)*v}px`,h.style.width=`${x.width*w.a*m}px`,h.style.height=`${x.height*w.d*v}px`):(x=y.getBounds(),this.capHitArea(x),h.style.left=`${x.x*m}px`,h.style.top=`${x.y*v}px`,h.style.width=`${x.width*m}px`,h.style.height=`${x.height*v}px`,h.title!==y.accessibleTitle&&y.accessibleTitle!==null&&(h.title=y.accessibleTitle),h.getAttribute("aria-label")!==y.accessibleHint&&y.accessibleHint!==null&&h.setAttribute("aria-label",y.accessibleHint)),(y.accessibleTitle!==h.title||y.tabIndex!==h.tabIndex)&&(h.title=y.accessibleTitle,h.tabIndex=y.tabIndex,this.debug&&this.updateDebugHTML(h))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:r}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>r&&(e.height=r-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=`${ll}px`,t.style.height=`${ll}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=vy.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){const{displayObject:r}=e.target,o=this.renderer.events.rootBoundary,a=Object.assign(new Oo(o),{target:r});o.rootTarget=this.renderer.lastObjectRendered,t.forEach(u=>o.dispatchEvent(a,u))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===NE&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}Jv.extension={name:"accessibility",type:[fe.RendererPlugin,fe.CanvasRendererPlugin]};Te.add(Jv);const e_=class Dd{constructor(e){this.stage=new br,e=Object.assign({forceCanvas:!1},e),this.renderer=J1(e),Dd._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer?.view}get screen(){return this.renderer?.screen}destroy(e,t){const r=Dd._plugins.slice(0);r.reverse(),r.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};e_._plugins=[];let $E=e_;Te.handleByList(fe.Application,$E._plugins);class t_{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let t,r;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,r=globalThis.innerHeight;else{const{clientWidth:o,clientHeight:a}=this._resizeTo;t=o,r=a}this.renderer.resize(t,r),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}t_.extension=fe.Application;Te.add(t_);const xy={loader:fe.LoadParser,resolver:fe.ResolveParser,cache:fe.CacheParser,detection:fe.DetectionParser};Te.handle(fe.Asset,i=>{const e=i.ref;Object.entries(xy).filter(([t])=>!!e[t]).forEach(([t,r])=>Te.add(Object.assign(e[t],{extension:e[t].extension??r})))},i=>{const e=i.ref;Object.keys(xy).filter(t=>!!e[t]).forEach(t=>Te.remove(e[t]))});class WE{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<t;r++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function Ps(i,e){if(Array.isArray(e)){for(const t of e)if(i.startsWith(`data:${t}`))return!0;return!1}return i.startsWith(`data:${e}`)}function Jn(i,e){const t=i.split("?")[0],r=Et.extname(t).toLowerCase();return Array.isArray(e)?e.includes(r):r===e}const Tr=(i,e,t=!1)=>(Array.isArray(i)||(i=[i]),e?i.map(r=>typeof r=="string"||t?e(r):r):i),Od=(i,e)=>{const t=e.split("?")[1];return t&&(i+=`?${t}`),i};function r_(i,e,t,r,o){const a=e[t];for(let u=0;u<a.length;u++){const c=a[u];t<e.length-1?r_(i.replace(r[t],c),e,t+1,r,o):o.push(i.replace(r[t],c))}}function jE(i){const e=/\{(.*?)\}/g,t=i.match(e),r=[];if(t){const o=[];t.forEach(a=>{const u=a.substring(1,a.length-1).split(",");o.push(u)}),r_(i,o,0,t,r)}else r.push(i);return r}const Bl=i=>!Array.isArray(i);class XE{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const r=Tr(e);let o;for(let c=0;c<this.parsers.length;c++){const f=this.parsers[c];if(f.test(t)){o=f.getCacheableAssets(r,t);break}}o||(o={},r.forEach(c=>{o[c]=t}));const a=Object.keys(o),u={cacheKeys:a,keys:r};if(r.forEach(c=>{this._cacheMap.set(c,u)}),a.forEach(c=>{const f=o?o[c]:t;this._cache.has(c)&&this._cache.get(c)!==f&&console.warn("[Cache] already has key:",c),this._cache.set(c,o[c])}),t instanceof xe){const c=t;r.forEach(f=>{c.baseTexture!==xe.EMPTY.baseTexture&&Oe.addToCache(c.baseTexture,f),xe.addToCache(c,f)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(r=>{this._cache.delete(r)}),t.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const Ei=new XE;class YE{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,r)=>(this._parsersValidated=!1,e[t]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const r={promise:null,parser:null};return r.promise=(async()=>{let o=null,a=null;if(t.loadParser&&(a=this._parserHash[t.loadParser],a||console.warn(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!a){for(let u=0;u<this.parsers.length;u++){const c=this.parsers[u];if(c.load&&c.test?.(e,t,this)){a=c;break}}if(!a)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}o=await a.load(e,t,this),r.parser=a;for(let u=0;u<this.parsers.length;u++){const c=this.parsers[u];c.parse&&c.parse&&await c.testParse?.(o,t,this)&&(o=await c.parse(o,t,this)||o,r.parser=c)}return o})(),r}async load(e,t){this._parsersValidated||this._validateParsers();let r=0;const o={},a=Bl(e),u=Tr(e,m=>({alias:[m],src:m})),c=u.length,f=u.map(async m=>{const v=Et.toAbsolute(m.src);if(!o[m.src])try{this.promiseCache[v]||(this.promiseCache[v]=this._getLoadPromiseAndParser(v,m)),o[m.src]=await this.promiseCache[v].promise,t&&t(++r/c)}catch(h){throw delete this.promiseCache[v],delete o[m.src],new Error(`[Loader.load] Failed to load ${v}.
${h}`)}});return await Promise.all(f),a?o[u[0].src]:o}async unload(e){const t=Tr(e,r=>({alias:[r],src:r})).map(async r=>{const o=Et.toAbsolute(r.src),a=this.promiseCache[o];if(a){const u=await a.promise;delete this.promiseCache[o],a.parser?.unload?.(u,r,this)}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(e[t.name]&&console.warn(`[Assets] loadParser name conflict "${t.name}"`),{...e,[t.name]:t}),{})}}var Cr=(i=>(i[i.Low=0]="Low",i[i.Normal=1]="Normal",i[i.High=2]="High",i))(Cr||{});const qE=".json",KE="application/json",QE={extension:{type:fe.LoadParser,priority:Cr.Low},name:"loadJson",test(i){return Ps(i,KE)||Jn(i,qE)},async load(i){return await(await ge.ADAPTER.fetch(i)).json()}};Te.add(QE);const ZE=".txt",JE="text/plain",eT={name:"loadTxt",extension:{type:fe.LoadParser,priority:Cr.Low},test(i){return Ps(i,JE)||Jn(i,ZE)},async load(i){return await(await ge.ADAPTER.fetch(i)).text()}};Te.add(eT);const tT=["normal","bold","100","200","300","400","500","600","700","800","900"],rT=[".ttf",".otf",".woff",".woff2"],nT=["font/ttf","font/otf","font/woff","font/woff2"],iT=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function sT(i){const e=Et.extname(i),t=Et.basename(i,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1));let r=t.length>0;for(const a of t)if(!a.match(iT)){r=!1;break}let o=t.join(" ");return r||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}const oT=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function aT(i){return oT.test(i)?i:encodeURI(i)}const lT={extension:{type:fe.LoadParser,priority:Cr.Low},name:"loadWebFont",test(i){return Ps(i,nT)||Jn(i,rT)},async load(i,e){const t=ge.ADAPTER.getFontFaceSet();if(t){const r=[],o=e.data?.family??sT(i),a=e.data?.weights?.filter(c=>tT.includes(c))??["normal"],u=e.data??{};for(let c=0;c<a.length;c++){const f=a[c],m=new FontFace(o,`url(${aT(i)})`,{...u,weight:f});await m.load(),t.add(m),r.push(m)}return r.length===1?r[0]:r}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(i){(Array.isArray(i)?i:[i]).forEach(e=>ge.ADAPTER.getFontFaceSet().delete(e))}};Te.add(lT);const uT=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let Ss=null,Bd=class{constructor(){Ss||(Ss=URL.createObjectURL(new Blob([uT],{type:"application/javascript"}))),this.worker=new Worker(Ss)}};Bd.revokeObjectURL=function(){Ss&&(URL.revokeObjectURL(Ss),Ss=null)};const hT=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let As=null;class n_{constructor(){As||(As=URL.createObjectURL(new Blob([hT],{type:"application/javascript"}))),this.worker=new Worker(As)}}n_.revokeObjectURL=function(){As&&(URL.revokeObjectURL(As),As=null)};let wy=0,Qc;class cT{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new Bd;t.addEventListener("message",r=>{t.terminate(),Bd.revokeObjectURL(),e(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Qc===void 0&&(Qc=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<Qc&&(this._createdWorkers++,e=new n_().worker,e.addEventListener("message",t=>{this.complete(t.data),this.returnWorker(t.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const r=new Promise((o,a)=>{this.queue.push({id:e,arguments:t,resolve:o,reject:a})});return this.next(),r}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const t=this.queue.pop(),r=t.id;this.resolveHash[wy]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:wy++,id:r})}}const Ey=new cT;function Bo(i,e,t){i.resource.internal=!0;const r=new xe(i),o=()=>{delete e.promiseCache[t],Ei.has(t)&&Ei.remove(t)};return r.baseTexture.once("destroyed",()=>{t in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),o())}),r.once("destroyed",()=>{i.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),o())}),r}const dT=[".jpeg",".jpg",".png",".webp",".avif"],fT=["image/jpeg","image/png","image/webp","image/avif"];async function pT(i){const e=await ge.ADAPTER.fetch(i);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${i}: ${e.status} ${e.statusText}`);const t=await e.blob();return await createImageBitmap(t)}const Ql={name:"loadTextures",extension:{type:fe.LoadParser,priority:Cr.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(i){return Ps(i,fT)||Jn(i,dT)},async load(i,e,t){const r=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let o;r?this.config.preferWorkers&&await Ey.isImageBitmapSupported()?o=await Ey.loadImageBitmap(i):o=await pT(i):o=await new Promise((c,f)=>{const m=new Image;m.crossOrigin=this.config.crossOrigin,m.src=i,m.complete?c(m):(m.onload=()=>c(m),m.onerror=v=>f(v))});const a={...e.data};a.resolution??(a.resolution=mn(i)),r&&a.resourceOptions?.ownsImageBitmap===void 0&&(a.resourceOptions={...a.resourceOptions},a.resourceOptions.ownsImageBitmap=!0);const u=new Oe(o,a);return u.resource.src=i,Bo(u,t,i)},unload(i){i.destroy(!0)}};Te.add(Ql);const mT=".svg",gT="image/svg+xml",yT={extension:{type:fe.LoadParser,priority:Cr.High},name:"loadSVG",test(i){return Ps(i,gT)||Jn(i,mT)},async testParse(i){return Ad.test(i)},async parse(i,e,t){const r=new Ad(i,e?.data?.resourceOptions);await r.load();const o=new Oe(r,{resolution:mn(i),...e?.data});return o.resource.src=e.src,Bo(o,t,e.src)},async load(i,e){return(await ge.ADAPTER.fetch(i)).text()},unload:Ql.unload};Te.add(yT);const vT=[".mp4",".m4v",".webm",".ogv"],_T=["video/mp4","video/webm","video/ogg"],xT={name:"loadVideo",extension:{type:fe.LoadParser,priority:Cr.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(i){return Ps(i,_T)||Jn(i,vT)},async load(i,e,t){let r;const o=await(await ge.ADAPTER.fetch(i)).blob(),a=URL.createObjectURL(o);try{const u={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...e?.data?.resourceOptions,autoLoad:!0},c=new Kv(a,u);await c.load();const f=new Oe(c,{alphaMode:await Aw(),resolution:mn(i),...e?.data});f.resource.src=i,r=Bo(f,t,i),r.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(a)})}catch(u){throw URL.revokeObjectURL(a),u}return r},unload(i){i.destroy(!0)}};Te.add(xT);class wT{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(t[r])}`).join("&")}}getAlias(e){const{alias:t,name:r,src:o,srcs:a}=e;return Tr(t||r||o||a,u=>typeof u=="string"?u:Array.isArray(u)?u.map(c=>c?.src??c?.srcs??c):u?.src||u?.srcs?u.src??u.srcs:u,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const r=[];Array.isArray(t)?t.forEach(o=>{const a=o.src??o.srcs,u=o.alias??o.name;let c;if(typeof u=="string"){const f=this._createBundleAssetId(e,u);r.push(f),c=[u,f]}else{const f=u.map(m=>this._createBundleAssetId(e,m));r.push(...f),c=[...u,...f]}this.add({...o,alias:c,src:a})}):Object.keys(t).forEach(o=>{const a=[o,this._createBundleAssetId(e,o)];if(typeof t[o]=="string")this.add({alias:a,src:t[o]});else if(Array.isArray(t[o]))this.add({alias:a,src:t[o]});else{const u=t[o],c=u.src??u.srcs;this.add({...u,alias:a,src:Array.isArray(c)?c:[c]})}r.push(...a)}),this._bundles[e]=r}add(e,t,r,o,a){const u=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(Ue("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),u.push({alias:e,src:t,data:r,format:o,loadParser:a})):Array.isArray(e)?u.push(...e):u.push(e);let c;c=f=>{this.hasKey(f)&&console.warn(`[Resolver] already has key: ${f} overwriting`)},Tr(u).forEach(f=>{const{src:m,srcs:v}=f;let{data:h,format:p,loadParser:y}=f;const x=Tr(m||v).map(T=>typeof T=="string"?jE(T):Array.isArray(T)?T:[T]),w=this.getAlias(f);Array.isArray(w)?w.forEach(c):c(w);const E=[];x.forEach(T=>{T.forEach(k=>{let R={};if(typeof k!="object"){R.src=k;for(let N=0;N<this._parsers.length;N++){const L=this._parsers[N];if(L.test(k)){R=L.parse(k);break}}}else h=k.data??h,p=k.format??p,y=k.loadParser??y,R={...R,...k};if(!w)throw new Error(`[Resolver] alias is undefined for this asset: ${R.src}`);R=this.buildResolvedAsset(R,{aliases:w,data:h,format:p,loadParser:y}),E.push(R)})}),w.forEach(T=>{this._assetMap[T]=E})})}resolveBundle(e){const t=Bl(e);e=Tr(e);const r={};return e.forEach(o=>{const a=this._bundles[o];if(a){const u=this.resolve(a),c={};for(const f in u){const m=u[f];c[this._extractAssetIdFromBundle(o,f)]=m}r[o]=c}}),t?r[e[0]]:r}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const r={};for(const o in t)r[o]=t[o].src;return r}return t.src}resolve(e){const t=Bl(e);e=Tr(e);const r={};return e.forEach(o=>{if(!this._resolverHash[o])if(this._assetMap[o]){let a=this._assetMap[o];const u=a[0],c=this._getPreferredOrder(a);c?.priority.forEach(f=>{c.params[f].forEach(m=>{const v=a.filter(h=>h[f]?h[f]===m:!1);v.length&&(a=v)})}),this._resolverHash[o]=a[0]??u}else this._resolverHash[o]=this.buildResolvedAsset({alias:[o],src:o},{});r[o]=this._resolverHash[o]}),t?r[e[0]]:r}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const r=e[0],o=this._preferredOrder.find(a=>a.params.format.includes(r.format));if(o)return o}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}buildResolvedAsset(e,t){const{aliases:r,data:o,loadParser:a,format:u}=t;return(this._basePath||this._rootPath)&&(e.src=Et.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=r??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...o||{},...e.data},e.loadParser=a??e.loadParser,e.format=u??e.format??Et.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class ET{constructor(){this._detections=[],this._initialized=!1,this.resolver=new wT,this.loader=new YE,this.cache=Ei,this._backgroundLoader=new WE(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const t=e.texturePreference?.resolution??1,r=typeof t=="number"?[t]:t,o=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:o,resolution:r}}),e.preferences&&this.setPreferences(e.preferences)}add(e,t,r,o,a){this.resolver.add(e,t,r,o,a)}async load(e,t){this._initialized||await this.init();const r=Bl(e),o=Tr(e).map(c=>{if(typeof c!="string"){const f=this.resolver.getAlias(c);return f.some(m=>!this.resolver.hasKey(m))&&this.add(c),Array.isArray(f)?f[0]:f}return this.resolver.hasKey(c)||this.add({alias:c,src:c}),c}),a=this.resolver.resolve(o),u=await this._mapLoadToResolve(a,t);return r?u[o[0]]:u}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let r=!1;typeof e=="string"&&(r=!0,e=[e]);const o=this.resolver.resolveBundle(e),a={},u=Object.keys(o);let c=0,f=0;const m=()=>{t?.(++c/f)},v=u.map(h=>{const p=o[h];return f+=Object.keys(p).length,this._mapLoadToResolve(p,m).then(y=>{a[h]=y})});return await Promise.all(v),r?a[e[0]]:a}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(r=>{this._backgroundLoader.add(Object.values(r))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Ei.get(e);const t={};for(let r=0;r<e.length;r++)t[r]=Ei.get(e[r]);return t}async _mapLoadToResolve(e,t){const r=Object.values(e),o=Object.keys(e);this._backgroundLoader.active=!1;const a=await this.loader.load(r,t);this._backgroundLoader.active=!0;const u={};return r.forEach((c,f)=>{const m=a[c.src],v=[c.src];c.alias&&v.push(...c.alias),u[o[f]]=m,Ei.set(v,m)}),u}async unload(e){this._initialized||await this.init();const t=Tr(e).map(o=>typeof o!="string"?o.src:o),r=this.resolver.resolve(t);await this._unloadFromResolved(r)}async unloadBundle(e){this._initialized||await this.init(),e=Tr(e);const t=this.resolver.resolveBundle(e),r=Object.keys(t).map(o=>this._unloadFromResolved(t[o]));await Promise.all(r)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(r=>{Ei.remove(r.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const r of e.detections)e.skipDetections||await r.test()?t=await r.add(t):e.skipDetections||(t=await r.remove(t));return t=t.filter((r,o)=>t.indexOf(r)===o),t}get detections(){return this._detections}get preferWorkers(){return Ql.config.preferWorkers}set preferWorkers(e){Ue("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(r=>r in e).forEach(r=>{t.config[r]=e[r]})})}}const Ai=new ET;Te.handleByList(fe.LoadParser,Ai.loader.parsers).handleByList(fe.ResolveParser,Ai.resolver.parsers).handleByList(fe.CacheParser,Ai.cache.parsers).handleByList(fe.DetectionParser,Ai.detections);const TT={extension:fe.CacheParser,test:i=>Array.isArray(i)&&i.every(e=>e instanceof xe),getCacheableAssets:(i,e)=>{const t={};return i.forEach(r=>{e.forEach((o,a)=>{t[r+(a===0?"":a+1)]=o})}),t}};Te.add(TT);async function i_(i){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=i});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(i)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const ST={extension:{type:fe.DetectionParser,priority:1},test:async()=>i_("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async i=>[...i,"avif"],remove:async i=>i.filter(e=>e!=="avif")};Te.add(ST);const AT={extension:{type:fe.DetectionParser,priority:0},test:async()=>i_("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async i=>[...i,"webp"],remove:async i=>i.filter(e=>e!=="webp")};Te.add(AT);const Ty=["png","jpg","jpeg"],bT={extension:{type:fe.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async i=>[...i,...Ty],remove:async i=>i.filter(e=>!Ty.includes(e))};Te.add(bT);const CT="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Zd(i){return CT?!1:document.createElement("video").canPlayType(i)!==""}const IT={extension:{type:fe.DetectionParser,priority:0},test:async()=>Zd("video/webm"),add:async i=>[...i,"webm"],remove:async i=>i.filter(e=>e!=="webm")};Te.add(IT);const RT={extension:{type:fe.DetectionParser,priority:0},test:async()=>Zd("video/mp4"),add:async i=>[...i,"mp4","m4v"],remove:async i=>i.filter(e=>e!=="mp4"&&e!=="m4v")};Te.add(RT);const PT={extension:{type:fe.DetectionParser,priority:0},test:async()=>Zd("video/ogg"),add:async i=>[...i,"ogv"],remove:async i=>i.filter(e=>e!=="ogv")};Te.add(PT);const MT={extension:fe.ResolveParser,test:Ql.test,parse:i=>({resolution:parseFloat(ge.RETINA_PREFIX.exec(i)?.[1]??"1"),format:Et.extname(i).slice(1),src:i})};Te.add(MT);var At=(i=>(i[i.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",i[i.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",i[i.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",i[i.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",i[i.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",i[i.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",i[i.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",i[i.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",i[i.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",i[i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",i[i.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",i[i.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",i[i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",i[i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",i[i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",i[i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",i[i.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",i[i.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",i[i.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",i[i.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",i[i.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",i[i.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",i[i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",i[i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",i[i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",i))(At||{});const Fl={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let Ur,fs;function Sy(){fs={bptc:Ur.getExtension("EXT_texture_compression_bptc"),astc:Ur.getExtension("WEBGL_compressed_texture_astc"),etc:Ur.getExtension("WEBGL_compressed_texture_etc"),s3tc:Ur.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Ur.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:Ur.getExtension("WEBGL_compressed_texture_pvrtc")||Ur.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:Ur.getExtension("WEBGL_compressed_texture_etc1"),atc:Ur.getExtension("WEBGL_compressed_texture_atc")}}const kT={extension:{type:fe.DetectionParser,priority:2},test:async()=>{const i=ge.ADAPTER.createCanvas().getContext("webgl");return i?(Ur=i,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async i=>{fs||Sy();const e=[];for(const t in fs)fs[t]&&e.push(t);return[...e,...i]},remove:async i=>(fs||Sy(),i.filter(e=>!(e in fs)))};Te.add(kT);class LT extends jl{constructor(e,t={width:1,height:1,autoLoad:!0}){let r,o;typeof e=="string"?(r=e,o=new Uint8Array):(r=null,o=e),super(o,t),this.origin=r,this.buffer=o?new dd(o):null,this._load=null,this.loaded=!1,this.origin!==null&&t.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new dd(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class Ci extends LT{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=Ci._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||Ci._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,r){const o=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;o.pixelStorei(o.UNPACK_ALIGNMENT,4);for(let a=0,u=this.levels;a<u;a++){const{levelID:c,levelWidth:f,levelHeight:m,levelBuffer:v}=this._levelBuffers[a];o.compressedTexImage2D(o.TEXTURE_2D,c,this.format,f,m,0,v)}return!0}onBlobLoaded(){this._levelBuffers=Ci._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,t,r,o,a,u,c){const f=new Array(r);let m=e.byteOffset,v=u,h=c,p=v+o-1&~(o-1),y=h+a-1&~(a-1),x=p*y*Fl[t];for(let w=0;w<r;w++)f[w]={levelID:w,levelWidth:r>1?v:p,levelHeight:r>1?h:y,levelBuffer:new Uint8Array(e.buffer,m,x)},m+=x,v=v>>1||1,h=h>>1||1,p=v+o-1&~(o-1),y=h+a-1&~(a-1),x=p*y*Fl[t];return f}}const Zc=4,ul=124,DT=32,Ay=20,OT=542327876,hl={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},BT={FOURCC:2},cl={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},FT=1,NT=2,UT=4,GT=64,HT=512,zT=131072,VT=827611204,$T=861165636,WT=894720068,jT=808540228,XT=4,YT={[VT]:At.COMPRESSED_RGBA_S3TC_DXT1_EXT,[$T]:At.COMPRESSED_RGBA_S3TC_DXT3_EXT,[WT]:At.COMPRESSED_RGBA_S3TC_DXT5_EXT},qT={70:At.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:At.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:At.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:At.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:At.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:At.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:At.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:At.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:At.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:At.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:At.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:At.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:At.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function KT(i){const e=new Uint32Array(i);if(e[0]!==OT)throw new Error("Invalid DDS file magic word");const t=new Uint32Array(i,0,ul/Uint32Array.BYTES_PER_ELEMENT),r=t[hl.HEIGHT],o=t[hl.WIDTH],a=t[hl.MIPMAP_COUNT],u=new Uint32Array(i,hl.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,DT/Uint32Array.BYTES_PER_ELEMENT),c=u[FT];if(c&UT){const f=u[BT.FOURCC];if(f!==jT){const k=YT[f],R=Zc+ul,N=new Uint8Array(i,R);return[new Ci(N,{format:k,width:o,height:r,levels:a})]}const m=Zc+ul,v=new Uint32Array(e.buffer,m,Ay/Uint32Array.BYTES_PER_ELEMENT),h=v[cl.DXGI_FORMAT],p=v[cl.RESOURCE_DIMENSION],y=v[cl.MISC_FLAG],x=v[cl.ARRAY_SIZE],w=qT[h];if(w===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${h}`);if(y===XT)throw new Error("DDSParser does not support cubemap textures");if(p===6)throw new Error("DDSParser does not supported 3D texture data");const E=new Array,T=Zc+ul+Ay;if(x===1)E.push(new Uint8Array(i,T));else{const k=Fl[w];let R=0,N=o,L=r;for(let b=0;b<a;b++){const U=Math.max(1,N+3&-4),$=Math.max(1,L+3&-4),ee=U*$*k;R+=ee,N=N>>>1,L=L>>>1}let V=T;for(let b=0;b<x;b++)E.push(new Uint8Array(i,V,R)),V+=R}return E.map(k=>new Ci(k,{format:w,width:o,height:r,levels:a}))}throw c&GT?new Error("DDSParser does not support uncompressed texture data."):c&HT?new Error("DDSParser does not supported YUV uncompressed texture data."):c&zT?new Error("DDSParser does not support single-channel (lumninance) texture data!"):c&NT?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const by=[171,75,84,88,32,49,49,187,13,10,26,10],QT=67305985,xr={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Fd=64,Cy={[Ie.UNSIGNED_BYTE]:1,[Ie.UNSIGNED_SHORT]:2,[Ie.INT]:4,[Ie.UNSIGNED_INT]:4,[Ie.FLOAT]:4,[Ie.HALF_FLOAT]:8},ZT={[ue.RGBA]:4,[ue.RGB]:3,[ue.RG]:2,[ue.RED]:1,[ue.LUMINANCE]:1,[ue.LUMINANCE_ALPHA]:2,[ue.ALPHA]:1},JT={[Ie.UNSIGNED_SHORT_4_4_4_4]:2,[Ie.UNSIGNED_SHORT_5_5_5_1]:2,[Ie.UNSIGNED_SHORT_5_6_5]:2};function eS(i,e,t=!1){const r=new DataView(e);if(!tS(i,r))return null;const o=r.getUint32(xr.ENDIANNESS,!0)===QT,a=r.getUint32(xr.GL_TYPE,o),u=r.getUint32(xr.GL_FORMAT,o),c=r.getUint32(xr.GL_INTERNAL_FORMAT,o),f=r.getUint32(xr.PIXEL_WIDTH,o),m=r.getUint32(xr.PIXEL_HEIGHT,o)||1,v=r.getUint32(xr.PIXEL_DEPTH,o)||1,h=r.getUint32(xr.NUMBER_OF_ARRAY_ELEMENTS,o)||1,p=r.getUint32(xr.NUMBER_OF_FACES,o),y=r.getUint32(xr.NUMBER_OF_MIPMAP_LEVELS,o),x=r.getUint32(xr.BYTES_OF_KEY_VALUE_DATA,o);if(m===0||v!==1)throw new Error("Only 2D textures are supported");if(p!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(h!==1)throw new Error("WebGL does not support array textures");const w=4,E=4,T=f+3&-4,k=m+3&-4,R=new Array(h);let N=f*m;a===0&&(N=T*k);let L;if(a!==0?Cy[a]?L=Cy[a]*ZT[u]:L=JT[a]:L=Fl[c],L===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const V=t?nS(r,x,o):null;let b=N*L,U=f,$=m,ee=T,Z=k,z=Fd+x;for(let Y=0;Y<y;Y++){const j=r.getUint32(z,o);let ce=z+4;for(let I=0;I<h;I++){let P=R[I];P||(P=R[I]=new Array(y)),P[Y]={levelID:Y,levelWidth:y>1||a!==0?U:ee,levelHeight:y>1||a!==0?$:Z,levelBuffer:new Uint8Array(e,ce,b)},ce+=b}z+=j+4,z=z%4!==0?z+4-z%4:z,U=U>>1||1,$=$>>1||1,ee=U+w-1&-4,Z=$+E-1&-4,b=ee*Z*L}return a!==0?{uncompressed:R.map(Y=>{let j=Y[0].levelBuffer,ce=!1;return a===Ie.FLOAT?j=new Float32Array(Y[0].levelBuffer.buffer,Y[0].levelBuffer.byteOffset,Y[0].levelBuffer.byteLength/4):a===Ie.UNSIGNED_INT?(ce=!0,j=new Uint32Array(Y[0].levelBuffer.buffer,Y[0].levelBuffer.byteOffset,Y[0].levelBuffer.byteLength/4)):a===Ie.INT&&(ce=!0,j=new Int32Array(Y[0].levelBuffer.buffer,Y[0].levelBuffer.byteOffset,Y[0].levelBuffer.byteLength/4)),{resource:new jl(j,{width:Y[0].levelWidth,height:Y[0].levelHeight}),type:a,format:ce?rS(u):u}}),kvData:V}:{compressed:R.map(Y=>new Ci(null,{format:c,width:f,height:m,levels:y,levelBuffers:Y})),kvData:V}}function tS(i,e){for(let t=0;t<by.length;t++)if(e.getUint8(t)!==by[t])return console.error(`${i} is not a valid *.ktx file!`),!1;return!0}function rS(i){switch(i){case ue.RGBA:return ue.RGBA_INTEGER;case ue.RGB:return ue.RGB_INTEGER;case ue.RG:return ue.RG_INTEGER;case ue.RED:return ue.RED_INTEGER;default:return i}}function nS(i,e,t){const r=new Map;let o=0;for(;o<e;){const a=i.getUint32(Fd+o,t),u=Fd+o+4,c=3-(a+3)%4;if(a===0||a>e-o){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let f=0;for(;f<a&&i.getUint8(u+f)!==0;f++);if(f===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const m=new TextDecoder().decode(new Uint8Array(i.buffer,u,f)),v=new DataView(i.buffer,u+f+1,a-f-1);r.set(m,v),o+=4+a+c}return r}const iS={extension:{type:fe.LoadParser,priority:Cr.High},name:"loadDDS",test(i){return Jn(i,".dds")},async load(i,e,t){const r=await(await ge.ADAPTER.fetch(i)).arrayBuffer(),o=KT(r).map(a=>{const u=new Oe(a,{mipmap:jr.OFF,alphaMode:Wt.NO_PREMULTIPLIED_ALPHA,resolution:mn(i),...e.data});return Bo(u,t,i)});return o.length===1?o[0]:o},unload(i){Array.isArray(i)?i.forEach(e=>e.destroy(!0)):i.destroy(!0)}};Te.add(iS);const sS={extension:{type:fe.LoadParser,priority:Cr.High},name:"loadKTX",test(i){return Jn(i,".ktx")},async load(i,e,t){const r=await(await ge.ADAPTER.fetch(i)).arrayBuffer(),{compressed:o,uncompressed:a,kvData:u}=eS(i,r),c=o??a,f={mipmap:jr.OFF,alphaMode:Wt.NO_PREMULTIPLIED_ALPHA,resolution:mn(i),...e.data},m=c.map(v=>{c===a&&Object.assign(f,{type:v.type,format:v.format});const h=v.resource??v,p=new Oe(h,f);return p.ktxKeyValueData=u,Bo(p,t,i)});return m.length===1?m[0]:m},unload(i){Array.isArray(i)?i.forEach(e=>e.destroy(!0)):i.destroy(!0)}};Te.add(sS);const oS=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],aS={extension:fe.ResolveParser,test:i=>{const e=Et.extname(i).slice(1);return["basis","ktx","dds"].includes(e)},parse:i=>{const e=i.split("."),t=e.pop();if(["ktx","dds"].includes(t)){const r=e.pop();if(oS.includes(r))return{resolution:parseFloat(ge.RETINA_PREFIX.exec(i)?.[1]??"1"),format:r,src:i}}return{resolution:parseFloat(ge.RETINA_PREFIX.exec(i)?.[1]??"1"),format:t,src:i}}};Te.add(aS);const dl=new Be,lS=4,s_=class Io{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){const e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,t,r,o){const a=new Image;return a.src=await this.base64(e,t,r,o),a}async base64(e,t,r,o){const a=this.canvas(e,o);if(a.toBlob!==void 0)return new Promise((u,c)=>{a.toBlob(f=>{if(!f){c(new Error("ICanvas.toBlob failed!"));return}const m=new FileReader;m.onload=()=>u(m.result),m.onerror=c,m.readAsDataURL(f)},t,r)});if(a.toDataURL!==void 0)return a.toDataURL(t,r);if(a.convertToBlob!==void 0){const u=await a.convertToBlob({type:t,quality:r});return new Promise((c,f)=>{const m=new FileReader;m.onload=()=>c(m.result),m.onerror=f,m.readAsDataURL(u)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:r,width:o,height:a,flipY:u,premultipliedAlpha:c}=this._rawPixels(e,t);u&&Io._flipY(r,o,a),c&&Io._unpremultiplyAlpha(r);const f=new Hw(o,a,1),m=new ImageData(new Uint8ClampedArray(r.buffer),o,a);return f.context.putImageData(m,0,0),f.canvas}pixels(e,t){const{pixels:r,width:o,height:a,flipY:u,premultipliedAlpha:c}=this._rawPixels(e,t);return u&&Io._flipY(r,o,a),c&&Io._unpremultiplyAlpha(r),r}_rawPixels(e,t){const r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");let o,a=!1,u=!1,c,f=!1;e&&(e instanceof ki?c=e:(c=r.generateTexture(e,{region:t,resolution:r.resolution,multisample:r.multisample}),f=!0,t&&(dl.width=t.width,dl.height=t.height,t=dl)));const m=r.gl;if(c){if(o=c.baseTexture.resolution,t=t??c.frame,a=!1,u=c.baseTexture.alphaMode>0&&c.baseTexture.format===ue.RGBA,!f){r.renderTexture.bind(c);const y=c.framebuffer.glFramebuffers[r.CONTEXT_UID];y.blitFramebuffer&&r.framebuffer.bind(y.blitFramebuffer)}}else o=r.resolution,t||(t=dl,t.width=r.width/o,t.height=r.height/o),a=!0,u=this._rendererPremultipliedAlpha,r.renderTexture.bind();const v=Math.max(Math.round(t.width*o),1),h=Math.max(Math.round(t.height*o),1),p=new Uint8Array(lS*v*h);return m.readPixels(Math.round(t.x*o),Math.round(t.y*o),v,h,m.RGBA,m.UNSIGNED_BYTE,p),f&&c?.destroy(!0),{pixels:p,width:v,height:h,flipY:a,premultipliedAlpha:u}}destroy(){this.renderer=null}static _flipY(e,t,r){const o=t<<2,a=r>>1,u=new Uint8Array(o);for(let c=0;c<a;c++){const f=c*o,m=(r-c-1)*o;u.set(e.subarray(f,f+o)),e.copyWithin(f,m,m+o),e.set(u,m)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let r=0;r<t;r+=4){const o=e[r+3];if(o!==0){const a=255.001/o;e[r]=e[r]*a+.5,e[r+1]=e[r+1]*a+.5,e[r+2]=e[r+2]*a+.5}}}};s_.extension={name:"extract",type:fe.RendererSystem};let uS=s_;Te.add(uS);const Nl={build(i){const e=i.points;let t,r,o,a,u,c;if(i.type===bt.CIRC){const x=i.shape;t=x.x,r=x.y,u=c=x.radius,o=a=0}else if(i.type===bt.ELIP){const x=i.shape;t=x.x,r=x.y,u=x.width,c=x.height,o=a=0}else{const x=i.shape,w=x.width/2,E=x.height/2;t=x.x+w,r=x.y+E,u=c=Math.max(0,Math.min(x.radius,Math.min(w,E))),o=w-u,a=E-c}if(!(u>=0&&c>=0&&o>=0&&a>=0)){e.length=0;return}const f=Math.ceil(2.3*Math.sqrt(u+c)),m=f*8+(o?4:0)+(a?4:0);if(e.length=m,m===0)return;if(f===0){e.length=8,e[0]=e[6]=t+o,e[1]=e[3]=r+a,e[2]=e[4]=t-o,e[5]=e[7]=r-a;return}let v=0,h=f*4+(o?2:0)+2,p=h,y=m;{const x=o+u,w=a,E=t+x,T=t-x,k=r+w;if(e[v++]=E,e[v++]=k,e[--h]=k,e[--h]=T,a){const R=r-w;e[p++]=T,e[p++]=R,e[--y]=R,e[--y]=E}}for(let x=1;x<f;x++){const w=Math.PI/2*(x/f),E=o+Math.cos(w)*u,T=a+Math.sin(w)*c,k=t+E,R=t-E,N=r+T,L=r-T;e[v++]=k,e[v++]=N,e[--h]=N,e[--h]=R,e[p++]=R,e[p++]=L,e[--y]=L,e[--y]=k}{const x=o,w=a+c,E=t+x,T=t-x,k=r+w,R=r-w;e[v++]=E,e[v++]=k,e[--y]=R,e[--y]=E,o&&(e[v++]=T,e[v++]=k,e[--y]=R,e[--y]=T)}},triangulate(i,e){const t=i.points,r=e.points,o=e.indices;if(t.length===0)return;let a=r.length/2;const u=a;let c,f;if(i.type!==bt.RREC){const v=i.shape;c=v.x,f=v.y}else{const v=i.shape;c=v.x+v.width/2,f=v.y+v.height/2}const m=i.matrix;r.push(i.matrix?m.a*c+m.c*f+m.tx:c,i.matrix?m.b*c+m.d*f+m.ty:f),a++,r.push(t[0],t[1]);for(let v=2;v<t.length;v+=2)r.push(t[v],t[v+1]),o.push(a++,u,a);o.push(u+1,u,a)}};function Iy(i,e=!1){const t=i.length;if(t<6)return;let r=0;for(let o=0,a=i[t-2],u=i[t-1];o<t;o+=2){const c=i[o],f=i[o+1];r+=(c-a)*(f+u),a=c,u=f}if(!e&&r>0||e&&r<=0){const o=t/2;for(let a=o+o%2;a<t;a+=2){const u=t-a-2,c=t-a-1,f=a,m=a+1;[i[u],i[f]]=[i[f],i[u]],[i[c],i[m]]=[i[m],i[c]]}}}const o_={build(i){i.points=i.shape.points.slice()},triangulate(i,e){let t=i.points;const r=i.holes,o=e.points,a=e.indices;if(t.length>=6){Iy(t,!1);const u=[];for(let m=0;m<r.length;m++){const v=r[m];Iy(v.points,!0),u.push(t.length/2),t=t.concat(v.points)}const c=Gx(t,u,2);if(!c)return;const f=o.length/2;for(let m=0;m<c.length;m+=3)a.push(c[m]+f),a.push(c[m+1]+f),a.push(c[m+2]+f);for(let m=0;m<t.length;m++)o.push(t[m])}}},hS={build(i){const e=i.shape,t=e.x,r=e.y,o=e.width,a=e.height,u=i.points;u.length=0,o>=0&&a>=0&&u.push(t,r,t+o,r,t+o,r+a,t,r+a)},triangulate(i,e){const t=i.points,r=e.points;if(t.length===0)return;const o=r.length/2;r.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(o,o+1,o+2,o+1,o+2,o+3)}},cS={build(i){Nl.build(i)},triangulate(i,e){Nl.triangulate(i,e)}};var sr=(i=>(i.MITER="miter",i.BEVEL="bevel",i.ROUND="round",i))(sr||{}),Yn=(i=>(i.BUTT="butt",i.ROUND="round",i.SQUARE="square",i))(Yn||{});const Cs={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(i,e=20){if(!this.adaptive||!i||isNaN(i))return e;let t=Math.ceil(i/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}};class Ry{static curveTo(e,t,r,o,a,u){const c=u[u.length-2],f=u[u.length-1]-t,m=c-e,v=o-t,h=r-e,p=Math.abs(f*h-m*v);if(p<1e-8||a===0)return(u[u.length-2]!==e||u[u.length-1]!==t)&&u.push(e,t),null;const y=f*f+m*m,x=v*v+h*h,w=f*v+m*h,E=a*Math.sqrt(y)/p,T=a*Math.sqrt(x)/p,k=E*w/y,R=T*w/x,N=E*h+T*m,L=E*v+T*f,V=m*(T+k),b=f*(T+k),U=h*(E+R),$=v*(E+R),ee=Math.atan2(b-L,V-N),Z=Math.atan2($-L,U-N);return{cx:N+e,cy:L+t,radius:a,startAngle:ee,endAngle:Z,anticlockwise:m*v>h*f}}static arc(e,t,r,o,a,u,c,f,m){const v=c-u,h=Cs._segmentsCount(Math.abs(v)*a,Math.ceil(Math.abs(v)/Rl)*40),p=v/(h*2),y=p*2,x=Math.cos(p),w=Math.sin(p),E=h-1,T=E%1/E;for(let k=0;k<=E;++k){const R=k+T*k,N=p+u+y*R,L=Math.cos(N),V=-Math.sin(N);m.push((x*L+w*V)*a+r,(x*-V+w*L)*a+o)}}}class dS{constructor(){this.reset()}begin(e,t,r){this.reset(),this.style=e,this.start=t,this.attribStart=r}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Jd{static curveLength(e,t,r,o,a,u,c,f){let m=0,v=0,h=0,p=0,y=0,x=0,w=0,E=0,T=0,k=0,R=0,N=e,L=t;for(let V=1;V<=10;++V)v=V/10,h=v*v,p=h*v,y=1-v,x=y*y,w=x*y,E=w*e+3*x*v*r+3*y*h*a+p*c,T=w*t+3*x*v*o+3*y*h*u+p*f,k=N-E,R=L-T,N=E,L=T,m+=Math.sqrt(k*k+R*R);return m}static curveTo(e,t,r,o,a,u,c){const f=c[c.length-2],m=c[c.length-1];c.length-=2;const v=Cs._segmentsCount(Jd.curveLength(f,m,e,t,r,o,a,u));let h=0,p=0,y=0,x=0,w=0;c.push(f,m);for(let E=1,T=0;E<=v;++E)T=E/v,h=1-T,p=h*h,y=p*h,x=T*T,w=x*T,c.push(y*f+3*p*T*e+3*h*x*r+w*a,y*m+3*p*T*t+3*h*x*o+w*u)}}function Py(i,e,t,r,o,a,u,c){const f=i-t*o,m=e-r*o,v=i+t*a,h=e+r*a;let p,y;u?(p=r,y=-t):(p=-r,y=t);const x=f+p,w=m+y,E=v+p,T=h+y;return c.push(x,w,E,T),2}function mi(i,e,t,r,o,a,u,c){const f=t-i,m=r-e;let v=Math.atan2(f,m),h=Math.atan2(o-i,a-e);c&&v<h?v+=Math.PI*2:!c&&v>h&&(h+=Math.PI*2);let p=v;const y=h-v,x=Math.abs(y),w=Math.sqrt(f*f+m*m),E=(15*x*Math.sqrt(w)/Math.PI>>0)+1,T=y/E;if(p+=T,c){u.push(i,e,t,r);for(let k=1,R=p;k<E;k++,R+=T)u.push(i,e,i+Math.sin(R)*w,e+Math.cos(R)*w);u.push(i,e,o,a)}else{u.push(t,r,i,e);for(let k=1,R=p;k<E;k++,R+=T)u.push(i+Math.sin(R)*w,e+Math.cos(R)*w,i,e);u.push(o,a,i,e)}return E*2}function fS(i,e){const t=i.shape;let r=i.points||t.points.slice();const o=e.closePointEps;if(r.length===0)return;const a=i.lineStyle,u=new He(r[0],r[1]),c=new He(r[r.length-2],r[r.length-1]),f=t.type!==bt.POLY||t.closeStroke,m=Math.abs(u.x-c.x)<o&&Math.abs(u.y-c.y)<o;if(f){r=r.slice(),m&&(r.pop(),r.pop(),c.set(r[r.length-2],r[r.length-1]));const P=(u.x+c.x)*.5,A=(c.y+u.y)*.5;r.unshift(P,A),r.push(P,A)}const v=e.points,h=r.length/2;let p=r.length;const y=v.length/2,x=a.width/2,w=x*x,E=a.miterLimit*a.miterLimit;let T=r[0],k=r[1],R=r[2],N=r[3],L=0,V=0,b=-(k-N),U=T-R,$=0,ee=0,Z=Math.sqrt(b*b+U*U);b/=Z,U/=Z,b*=x,U*=x;const z=a.alignment,Y=(1-z)*2,j=z*2;f||(a.cap===Yn.ROUND?p+=mi(T-b*(Y-j)*.5,k-U*(Y-j)*.5,T-b*Y,k-U*Y,T+b*j,k+U*j,v,!0)+2:a.cap===Yn.SQUARE&&(p+=Py(T,k,b,U,Y,j,!0,v))),v.push(T-b*Y,k-U*Y,T+b*j,k+U*j);for(let P=1;P<h-1;++P){T=r[(P-1)*2],k=r[(P-1)*2+1],R=r[P*2],N=r[P*2+1],L=r[(P+1)*2],V=r[(P+1)*2+1],b=-(k-N),U=T-R,Z=Math.sqrt(b*b+U*U),b/=Z,U/=Z,b*=x,U*=x,$=-(N-V),ee=R-L,Z=Math.sqrt($*$+ee*ee),$/=Z,ee/=Z,$*=x,ee*=x;const A=R-T,F=k-N,M=R-L,C=V-N,O=A*M+F*C,H=F*M-C*A,J=H<0;if(Math.abs(H)<.001*Math.abs(O)){v.push(R-b*Y,N-U*Y,R+b*j,N+U*j),O>=0&&(a.join===sr.ROUND?p+=mi(R,N,R-b*Y,N-U*Y,R-$*Y,N-ee*Y,v,!1)+4:p+=2,v.push(R-$*j,N-ee*j,R+$*Y,N+ee*Y));continue}const te=(-b+T)*(-U+N)-(-b+R)*(-U+k),ne=(-$+L)*(-ee+N)-(-$+R)*(-ee+V),ae=(A*ne-M*te)/H,le=(C*te-F*ne)/H,de=(ae-R)*(ae-R)+(le-N)*(le-N),ie=R+(ae-R)*Y,ve=N+(le-N)*Y,Se=R-(ae-R)*j,ke=N-(le-N)*j,Fe=Math.min(A*A+F*F,M*M+C*C),Ee=J?Y:j,Ae=Fe+Ee*Ee*w,qe=de<=Ae;let st=a.join;if(st===sr.MITER&&de/w>E&&(st=sr.BEVEL),qe)switch(st){case sr.MITER:{v.push(ie,ve,Se,ke);break}case sr.BEVEL:{J?v.push(ie,ve,R+b*j,N+U*j,ie,ve,R+$*j,N+ee*j):v.push(R-b*Y,N-U*Y,Se,ke,R-$*Y,N-ee*Y,Se,ke),p+=2;break}case sr.ROUND:{J?(v.push(ie,ve,R+b*j,N+U*j),p+=mi(R,N,R+b*j,N+U*j,R+$*j,N+ee*j,v,!0)+4,v.push(ie,ve,R+$*j,N+ee*j)):(v.push(R-b*Y,N-U*Y,Se,ke),p+=mi(R,N,R-b*Y,N-U*Y,R-$*Y,N-ee*Y,v,!1)+4,v.push(R-$*Y,N-ee*Y,Se,ke));break}}else{switch(v.push(R-b*Y,N-U*Y,R+b*j,N+U*j),st){case sr.MITER:{J?v.push(Se,ke,Se,ke):v.push(ie,ve,ie,ve),p+=2;break}case sr.ROUND:{J?p+=mi(R,N,R+b*j,N+U*j,R+$*j,N+ee*j,v,!0)+2:p+=mi(R,N,R-b*Y,N-U*Y,R-$*Y,N-ee*Y,v,!1)+2;break}}v.push(R-$*Y,N-ee*Y,R+$*j,N+ee*j),p+=2}}T=r[(h-2)*2],k=r[(h-2)*2+1],R=r[(h-1)*2],N=r[(h-1)*2+1],b=-(k-N),U=T-R,Z=Math.sqrt(b*b+U*U),b/=Z,U/=Z,b*=x,U*=x,v.push(R-b*Y,N-U*Y,R+b*j,N+U*j),f||(a.cap===Yn.ROUND?p+=mi(R-b*(Y-j)*.5,N-U*(Y-j)*.5,R-b*Y,N-U*Y,R+b*j,N+U*j,v,!1)+2:a.cap===Yn.SQUARE&&(p+=Py(R,N,b,U,Y,j,!1,v)));const ce=e.indices,I=Cs.epsilon*Cs.epsilon;for(let P=y;P<p+y-2;++P)T=v[P*2],k=v[P*2+1],R=v[(P+1)*2],N=v[(P+1)*2+1],L=v[(P+2)*2],V=v[(P+2)*2+1],!(Math.abs(T*(N-V)+R*(V-k)+L*(k-N))<I)&&ce.push(P,P+1,P+2)}function pS(i,e){let t=0;const r=i.shape,o=i.points||r.points,a=r.type!==bt.POLY||r.closeStroke;if(o.length===0)return;const u=e.points,c=e.indices,f=o.length/2,m=u.length/2;let v=m;for(u.push(o[0],o[1]),t=1;t<f;t++)u.push(o[t*2],o[t*2+1]),c.push(v,v+1),v++;a&&c.push(v,m)}function My(i,e){i.lineStyle.native?pS(i,e):fS(i,e)}class ef{static curveLength(e,t,r,o,a,u){const c=e-2*r+a,f=t-2*o+u,m=2*r-2*e,v=2*o-2*t,h=4*(c*c+f*f),p=4*(c*m+f*v),y=m*m+v*v,x=2*Math.sqrt(h+p+y),w=Math.sqrt(h),E=2*h*w,T=2*Math.sqrt(y),k=p/w;return(E*x+w*p*(x-T)+(4*y*h-p*p)*Math.log((2*w+k+x)/(k+T)))/(4*E)}static curveTo(e,t,r,o,a){const u=a[a.length-2],c=a[a.length-1],f=Cs._segmentsCount(ef.curveLength(u,c,e,t,r,o));let m=0,v=0;for(let h=1;h<=f;++h){const p=h/f;m=u+(e-u)*p,v=c+(t-c)*p,a.push(m+(e+(r-e)*p-m)*p,v+(t+(o-t)*p-v)*p)}}}const Jc={[bt.POLY]:o_,[bt.CIRC]:Nl,[bt.ELIP]:Nl,[bt.RECT]:hS,[bt.RREC]:cS},ky=[],fl=[];class Ul{constructor(e,t=null,r=null,o=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=t,this.matrix=o,this.type=e.type}clone(){return new Ul(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const us=new He,a_=class l_ extends fv{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Dl,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),fl.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),ky.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,r=null,o=null){const a=new Ul(e,t,r,o);return this.graphicsData.push(a),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const r=new Ul(e,null,null,t),o=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=o.lineStyle,o.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let r=0;r<t.length;++r){const o=t[r];if(o.fillStyle.visible&&o.shape&&(o.matrix?o.matrix.applyInverse(e,us):us.copyFrom(e),o.shape.contains(us.x,us.y))){let a=!1;if(o.holes){for(let u=0;u<o.holes.length;u++)if(o.holes[u].shape.contains(us.x,us.y)){a=!0;break}}if(!a)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let r=null,o=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],o=r.style);for(let f=this.shapeIndex;f<t.length;f++){this.shapeIndex++;const m=t[f],v=m.fillStyle,h=m.lineStyle;Jc[m.type].build(m),m.matrix&&this.transformPoints(m.points,m.matrix),(v.visible||h.visible)&&this.processHoles(m.holes);for(let p=0;p<2;p++){const y=p===0?v:h;if(!y.visible)continue;const x=y.texture.baseTexture,w=this.indices.length,E=this.points.length/2;x.wrapMode=Kn.REPEAT,p===0?this.processFill(m):this.processLine(m);const T=this.points.length/2-E;T!==0&&(r&&!this._compareStyles(o,y)&&(r.end(w,E),r=null),r||(r=ky.pop()||new dS,r.begin(y,w,E),this.batches.push(r),o=y),this.addUvs(this.points,e,y.texture,E,T,y.matrix))}}const a=this.indices.length,u=this.points.length/2;if(r&&r.end(a,u),this.batches.length===0){this.batchable=!0;return}const c=u>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&c===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=c?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const r=this.graphicsData[e],o=r.fillStyle,a=r.lineStyle;if(o&&!o.texture.baseTexture.valid||a&&!a.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,r=e.length;t<r;t++){const o=e[t];for(let a=0;a<o.size;a++){const u=o.start+a;this.indicesUint16[u]=this.indicesUint16[u]-o.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<l_.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++Oe._globalBatch;for(let h=0;h<this.drawCalls.length;h++)this.drawCalls[h].texArray.clear(),fl.push(this.drawCalls[h]);this.drawCalls.length=0;const t=this.colors,r=this.textureIds;let o=fl.pop();o||(o=new md,o.texArray=new _d),o.texArray.count=0,o.start=0,o.size=0,o.type=Vr.TRIANGLES;let a=0,u=null,c=0,f=!1,m=Vr.TRIANGLES,v=0;this.drawCalls.push(o);for(let h=0;h<this.batches.length;h++){const p=this.batches[h],y=8,x=p.style,w=x.texture.baseTexture;f!==!!x.native&&(f=!!x.native,m=f?Vr.LINES:Vr.TRIANGLES,u=null,a=y,e++),u!==w&&(u=w,w._batchEnabled!==e&&(a===y&&(e++,a=0,o.size>0&&(o=fl.pop(),o||(o=new md,o.texArray=new _d),this.drawCalls.push(o)),o.start=v,o.size=0,o.texArray.count=0,o.type=m),w.touched=1,w._batchEnabled=e,w._batchLocation=a,w.wrapMode=Kn.REPEAT,o.texArray.elements[o.texArray.count++]=w,a++)),o.size+=p.size,v+=p.size,c=w._batchLocation,this.addColors(t,x.color,x.alpha,p.attribSize,p.attribStart),this.addTextureIds(r,c,p.attribSize,p.attribStart)}Oe._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,r=this.colors,o=this.textureIds,a=new ArrayBuffer(e.length*3*4),u=new Float32Array(a),c=new Uint32Array(a);let f=0;for(let m=0;m<e.length/2;m++)u[f++]=e[m*2],u[f++]=e[m*2+1],u[f++]=t[m*2],u[f++]=t[m*2+1],c[f++]=r[m],u[f++]=o[m];this._buffer.update(a),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?o_.triangulate(e,this):Jc[e.type].triangulate(e,this)}processLine(e){My(e,this);for(let t=0;t<e.holes.length;t++)My(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const r=e[t];Jc[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let r=0;r<e.length/2;r++){const o=e[r*2],a=e[r*2+1];e[r*2]=t.a*o+t.c*a+t.tx,e[r*2+1]=t.b*o+t.d*a+t.ty}}addColors(e,t,r,o,a=0){const u=Ze.shared.setValue(t).toLittleEndianNumber(),c=Ze.shared.setValue(u).toPremultiplied(r);e.length=Math.max(e.length,a+o);for(let f=0;f<o;f++)e[a+f]=c}addTextureIds(e,t,r,o=0){e.length=Math.max(e.length,o+r);for(let a=0;a<r;a++)e[o+a]=t}addUvs(e,t,r,o,a,u=null){let c=0;const f=t.length,m=r.frame;for(;c<a;){let h=e[(o+c)*2],p=e[(o+c)*2+1];if(u){const y=u.a*h+u.c*p+u.tx;p=u.b*h+u.d*p+u.ty,h=y}c++,t.push(h/m.width,p/m.height)}const v=r.baseTexture;(m.width<v.width||m.height<v.height)&&this.adjustUvs(t,r,f,a)}adjustUvs(e,t,r,o){const a=t.baseTexture,u=1e-6,c=r+o*2,f=t.frame,m=f.width/a.width,v=f.height/a.height;let h=f.x/f.width,p=f.y/f.height,y=Math.floor(e[r]+u),x=Math.floor(e[r+1]+u);for(let w=r+2;w<c;w+=2)y=Math.min(y,Math.floor(e[w]+u)),x=Math.min(x,Math.floor(e[w+1]+u));h-=y,p-=x;for(let w=r;w<c;w+=2)e[w]=(e[w]+h)*m,e[w+1]=(e[w+1]+p)*v}};a_.BATCHABLE_SIZE=100;let mS=a_;class Zl{constructor(){this.color=16777215,this.alpha=1,this.texture=xe.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new Zl;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=xe.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class tf extends Zl{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Yn.BUTT,this.join=sr.MITER,this.miterLimit=10}clone(){const e=new tf;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=Yn.BUTT,this.join=sr.MITER,this.miterLimit=10}}const ed={},Nd=class El extends br{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Zl,this._lineStyle=new tf,this._matrix=null,this._holeMode=!1,this.state=Xr.for2d(),this._geometry=e||new mS,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Ze(16777215),this.blendMode=Me.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new El(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,r,o=.5,a=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:r,alignment:o,native:a}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:xe.WHITE,color:e?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Yn.BUTT,join:sr.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new bi,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new bi,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,o=r[r.length-2],a=r[r.length-1];return(o!==e||a!==t)&&r.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,r,o){this._initCurve();const a=this.currentPath.points;return a.length===0&&this.moveTo(0,0),ef.curveTo(e,t,r,o,a),this}bezierCurveTo(e,t,r,o,a,u){return this._initCurve(),Jd.curveTo(e,t,r,o,a,u,this.currentPath.points),this}arcTo(e,t,r,o,a){this._initCurve(e,t);const u=this.currentPath.points,c=Ry.curveTo(e,t,r,o,a,u);if(c){const{cx:f,cy:m,radius:v,startAngle:h,endAngle:p,anticlockwise:y}=c;this.arc(f,m,v,h,p,y)}return this}arc(e,t,r,o,a,u=!1){if(o===a)return this;if(!u&&a<=o?a+=Rl:u&&o<=a&&(o+=Rl),a-o===0)return this;const c=e+Math.cos(o)*r,f=t+Math.sin(o)*r,m=this._geometry.closePointEps;let v=this.currentPath?this.currentPath.points:null;if(v){const h=Math.abs(v[v.length-2]-c),p=Math.abs(v[v.length-1]-f);h<m&&p<m||v.push(c,f)}else this.moveTo(c,f),v=this.currentPath.points;return Ry.arc(c,f,e,t,r,o,a,u,v),this}beginFill(e=0,t){return this.beginTextureFill({texture:xe.WHITE,color:e,alpha:t})}normalizeColor(e){const t=Ze.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:xe.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:r},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,r,o){return this.drawShape(new Be(e,t,r,o))}drawRoundedRect(e,t,r,o,a){return this.drawShape(new ql(e,t,r,o,a))}drawCircle(e,t,r){return this.drawShape(new Xl(e,t,r))}drawEllipse(e,t,r,o){return this.drawShape(new Yl(e,t,r,o))}drawPolygon(...e){let t,r=!0;const o=e[0];o.points?(r=o.closeStroke,t=o.points):Array.isArray(e[0])?t=e[0]:t=e;const a=new bi(t);return a.closeStroke=r,this.drawShape(a),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===bt.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,r=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(e.points);for(let o=0;o<r;o++){const a=e.batches[o],u=a.style.color,c=new Float32Array(this.vertexData.buffer,a.attribStart*4*2,a.attribSize*2),f=new Float32Array(e.uvsFloat32.buffer,a.attribStart*4*2,a.attribSize*2),m=new Uint16Array(e.indicesUint16.buffer,a.start*2,a.size),v={vertexData:c,blendMode:t,indices:m,uvs:f,_batchRGB:Ze.shared.setValue(u).toRgbArray(),_tintRGB:u,_texture:a.style.texture,alpha:a.style.alpha,worldAlpha:1};this.batches[o]=v}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,r=this.batches.length;t<r;t++){const o=this.batches[t];o.worldAlpha=this.worldAlpha*o.alpha,e.plugins[this.pluginName].render(o)}}}_renderDirect(e){const t=this._resolveDirectShader(e),r=this._geometry,o=this.worldAlpha,a=t.uniforms,u=r.drawCalls;a.translationMatrix=this.transform.worldTransform,Ze.shared.setValue(this._tintColor).premultiply(o).toArray(a.tint),e.shader.bind(t),e.geometry.bind(r,t),e.state.set(this.state);for(let c=0,f=u.length;c<f;c++)this._renderDrawCallDirect(e,r.drawCalls[c])}_renderDrawCallDirect(e,t){const{texArray:r,type:o,size:a,start:u}=t,c=r.count;for(let f=0;f<c;f++)e.texture.bind(r.elements[f],f);e.geometry.draw(o,a,u)}_resolveDirectShader(e){let t=this.shader;const r=this.pluginName;if(!t){if(!ed[r]){const{maxTextures:o}=e.plugins[r],a=new Int32Array(o);for(let f=0;f<o;f++)a[f]=f;const u={tint:new Float32Array([1,1,1,1]),translationMatrix:new Je,default:Ar.from({uSamplers:a},!0)},c=e.plugins[r]._shader.program;ed[r]=new Wr(c,u)}t=ed[r]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:r,maxX:o,maxY:a}=e.bounds;this._bounds.addFrame(this.transform,t,r,o,a)}containsPoint(e){return this.worldTransform.applyInverse(e,El._TEMP_POINT),this._geometry.containsPoint(El._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=Ze.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,r=t.a,o=t.b,a=t.c,u=t.d,c=t.tx,f=t.ty,m=this._geometry.points,v=this.vertexData;let h=0;for(let p=0;p<m.length;p+=2){const y=m[p],x=m[p+1];v[h++]=r*y+a*x+c,v[h++]=u*x+o*y+f}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};Nd.curves=Cs,Nd._TEMP_POINT=new He;let u_=Nd;class gS{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}const td=new He,Ly=new bi,h_=class c_ extends br{constructor(e,t,r,o=Vr.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=r||Xr.for2d(),this.drawMode=o,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=ge.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Vr.TRIANGLES&&t.length<c_.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const o=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[o]),e.plugins[o].render(this)}calculateVertices(){const e=this.geometry.buffers[0],t=e.data,r=e._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));const o=this.transform.worldTransform,a=o.a,u=o.b,c=o.c,f=o.d,m=o.tx,v=o.ty,h=this.vertexData;for(let p=0;p<h.length/2;p++){const y=t[p*2],x=t[p*2+1];h[p*2]=a*y+c*x+m,h[p*2+1]=u*y+f*x+v}if(this._roundPixels){const p=ge.RESOLUTION;for(let y=0;y<h.length;++y)h[y]=Math.round(h[y]*p)/p}this.vertexDirty=r}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new gS(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,td);const t=this.geometry.getBuffer("aVertexPosition").data,r=Ly.points,o=this.geometry.getIndex().data,a=o.length,u=this.drawMode===4?3:1;for(let c=0;c+2<a;c+=u){const f=o[c]*2,m=o[c+1]*2,v=o[c+2]*2;if(r[0]=t[f],r[1]=t[f+1],r[2]=t[m],r[3]=t[m+1],r[4]=t[v],r[5]=t[v+1],Ly.contains(td.x,td.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};h_.BATCHABLE_SIZE=100;let Dy=h_;class yS extends Qn{constructor(e,t,r){super();const o=new ht(e),a=new ht(t,!0),u=new ht(r,!0,!0);this.addAttribute("aVertexPosition",o,2,!1,Ie.FLOAT).addAttribute("aTextureCoord",a,2,!1,Ie.FLOAT).addIndex(u),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var vS=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,_S=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Oy extends Wr{constructor(e,t){const r={uSampler:e,alpha:1,uTextureMatrix:Je.IDENTITY,uColor:new Float32Array([1,1,1,1])};t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t),t.uniforms&&Object.assign(r,t.uniforms),super(t.program||pn.from(_S,vS),r),this._colorDirty=!1,this.uvMatrix=new Cv(e),this.batchable=t.program===void 0,this.pluginName=t.pluginName,this._tintColor=new Ze(t.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;Ze.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class By{constructor(e,t,r){this.geometry=new Qn,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let o=0;o<e.length;++o){let a=e[o];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||Ie.FLOAT,offset:a.offset},t[o]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let t=0;this.indexBuffer=new ht(Uw(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let u=0;u<this.dynamicProperties.length;++u){const c=this.dynamicProperties[u];c.offset=t,t+=c.size,this.dynamicStride+=c.size}const r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new ht(this.dynamicData,!1,!1);let o=0;this.staticStride=0;for(let u=0;u<this.staticProperties.length;++u){const c=this.staticProperties[u];c.offset=o,o+=c.size,this.staticStride+=c.size}const a=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(a),this.staticDataUint32=new Uint32Array(a),this.staticBuffer=new ht(this.staticData,!0,!1);for(let u=0;u<this.dynamicProperties.length;++u){const c=this.dynamicProperties[u];e.addAttribute(c.attributeName,this.dynamicBuffer,0,c.type===Ie.UNSIGNED_BYTE,c.type,this.dynamicStride*4,c.offset*4)}for(let u=0;u<this.staticProperties.length;++u){const c=this.staticProperties[u];e.addAttribute(c.attributeName,this.staticBuffer,0,c.type===Ie.UNSIGNED_BYTE,c.type,this.staticStride*4,c.offset*4)}}uploadDynamic(e,t,r){for(let o=0;o<this.dynamicProperties.length;o++){const a=this.dynamicProperties[o];a.uploadFunction(e,t,r,a.type===Ie.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,r){for(let o=0;o<this.staticProperties.length;o++){const a=this.staticProperties[o];a.uploadFunction(e,t,r,a.type===Ie.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var xS=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,wS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class d_ extends Kl{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new Je,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Ie.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Wr.from(wS,xS,{}),this.state=Xr.for2d()}render(e){const t=e.children,r=e._maxSize,o=e._batchSize,a=this.renderer;let u=t.length;if(u===0)return;u>r&&!e.autoResize&&(u=r);let c=e._buffers;c||(c=e._buffers=this.generateBuffers(e));const f=t[0]._texture.baseTexture,m=f.alphaMode>0;this.state.blendMode=hv(e.blendMode,m),a.state.set(this.state);const v=a.gl,h=e.worldTransform.copyTo(this.tempMatrix);h.prepend(a.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=Ze.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,m).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=f,this.renderer.shader.bind(this.shader);let p=!1;for(let y=0,x=0;y<u;y+=o,x+=1){let w=u-y;w>o&&(w=o),x>=c.length&&c.push(this._generateOneMoreBuffer(e));const E=c[x];E.uploadDynamic(t,y,w);const T=e._bufferUpdateIDs[x]||0;p=p||E._updateID<T,p&&(E._updateID=e._updateID,E.uploadStatic(t,y,w)),a.geometry.bind(E.geometry),v.drawElements(v.TRIANGLES,w*6,v.UNSIGNED_SHORT,0)}}generateBuffers(e){const t=[],r=e._maxSize,o=e._batchSize,a=e._properties;for(let u=0;u<r;u+=o)t.push(new By(this.properties,a,o));return t}_generateOneMoreBuffer(e){const t=e._batchSize,r=e._properties;return new By(this.properties,r,t)}uploadVertices(e,t,r,o,a,u){let c=0,f=0,m=0,v=0;for(let h=0;h<r;++h){const p=e[t+h],y=p._texture,x=p.scale.x,w=p.scale.y,E=y.trim,T=y.orig;E?(f=E.x-p.anchor.x*T.width,c=f+E.width,v=E.y-p.anchor.y*T.height,m=v+E.height):(c=T.width*(1-p.anchor.x),f=T.width*-p.anchor.x,m=T.height*(1-p.anchor.y),v=T.height*-p.anchor.y),o[u]=f*x,o[u+1]=v*w,o[u+a]=c*x,o[u+a+1]=v*w,o[u+a*2]=c*x,o[u+a*2+1]=m*w,o[u+a*3]=f*x,o[u+a*3+1]=m*w,u+=a*4}}uploadPosition(e,t,r,o,a,u){for(let c=0;c<r;c++){const f=e[t+c].position;o[u]=f.x,o[u+1]=f.y,o[u+a]=f.x,o[u+a+1]=f.y,o[u+a*2]=f.x,o[u+a*2+1]=f.y,o[u+a*3]=f.x,o[u+a*3+1]=f.y,u+=a*4}}uploadRotation(e,t,r,o,a,u){for(let c=0;c<r;c++){const f=e[t+c].rotation;o[u]=f,o[u+a]=f,o[u+a*2]=f,o[u+a*3]=f,u+=a*4}}uploadUvs(e,t,r,o,a,u){for(let c=0;c<r;++c){const f=e[t+c]._texture._uvs;f?(o[u]=f.x0,o[u+1]=f.y0,o[u+a]=f.x1,o[u+a+1]=f.y1,o[u+a*2]=f.x2,o[u+a*2+1]=f.y2,o[u+a*3]=f.x3,o[u+a*3+1]=f.y3,u+=a*4):(o[u]=0,o[u+1]=0,o[u+a]=0,o[u+a+1]=0,o[u+a*2]=0,o[u+a*2+1]=0,o[u+a*3]=0,o[u+a*3+1]=0,u+=a*4)}}uploadTint(e,t,r,o,a,u){for(let c=0;c<r;++c){const f=e[t+c],m=Ze.shared.setValue(f._tintRGB).toPremultiplied(f.alpha,f.texture.baseTexture.alphaMode>0);o[u]=m,o[u+a]=m,o[u+a*2]=m,o[u+a*3]=m,u+=a*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}d_.extension={name:"particle",type:fe.RendererPlugin};Te.add(d_);var Jl=(i=>(i[i.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",i[i.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",i))(Jl||{});const pl={willReadFrequently:!0},Gr=class Ce{static get experimentalLetterSpacingSupported(){let e=Ce._experimentalLetterSpacingSupported;if(e!==void 0){const t=ge.ADAPTER.getCanvasRenderingContext2D().prototype;e=Ce._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,r,o,a,u,c,f,m){this.text=e,this.style=t,this.width=r,this.height=o,this.lines=a,this.lineWidths=u,this.lineHeight=c,this.maxLineWidth=f,this.fontProperties=m}static measureText(e,t,r,o=Ce._canvas){r=r??t.wordWrap;const a=t.toFontString(),u=Ce.measureFont(a);u.fontSize===0&&(u.fontSize=t.fontSize,u.ascent=t.fontSize);const c=o.getContext("2d",pl);c.font=a;const f=(r?Ce.wordWrap(e,t,o):e).split(/(?:\r\n|\r|\n)/),m=new Array(f.length);let v=0;for(let x=0;x<f.length;x++){const w=Ce._measureText(f[x],t.letterSpacing,c);m[x]=w,v=Math.max(v,w)}let h=v+t.strokeThickness;t.dropShadow&&(h+=t.dropShadowDistance);const p=t.lineHeight||u.fontSize+t.strokeThickness;let y=Math.max(p,u.fontSize+t.strokeThickness*2)+t.leading+(f.length-1)*(p+t.leading);return t.dropShadow&&(y+=t.dropShadowDistance),new Ce(e,t,h,y,f,m,p+t.leading,v,u)}static _measureText(e,t,r){let o=!1;Ce.experimentalLetterSpacingSupported&&(Ce.experimentalLetterSpacing?(r.letterSpacing=`${t}px`,r.textLetterSpacing=`${t}px`,o=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let a=r.measureText(e).width;return a>0&&(o?a-=t:a+=(Ce.graphemeSegmenter(e).length-1)*t),a}static wordWrap(e,t,r=Ce._canvas){const o=r.getContext("2d",pl);let a=0,u="",c="";const f=Object.create(null),{letterSpacing:m,whiteSpace:v}=t,h=Ce.collapseSpaces(v),p=Ce.collapseNewlines(v);let y=!h;const x=t.wordWrapWidth+m,w=Ce.tokenize(e);for(let E=0;E<w.length;E++){let T=w[E];if(Ce.isNewline(T)){if(!p){c+=Ce.addLine(u),y=!h,u="",a=0;continue}T=" "}if(h){const R=Ce.isBreakingSpace(T),N=Ce.isBreakingSpace(u[u.length-1]);if(R&&N)continue}const k=Ce.getFromCache(T,m,f,o);if(k>x)if(u!==""&&(c+=Ce.addLine(u),u="",a=0),Ce.canBreakWords(T,t.breakWords)){const R=Ce.wordWrapSplit(T);for(let N=0;N<R.length;N++){let L=R[N],V=L,b=1;for(;R[N+b];){const $=R[N+b];if(!Ce.canBreakChars(V,$,T,N,t.breakWords))L+=$;else break;V=$,b++}N+=b-1;const U=Ce.getFromCache(L,m,f,o);U+a>x&&(c+=Ce.addLine(u),y=!1,u="",a=0),u+=L,a+=U}}else{u.length>0&&(c+=Ce.addLine(u),u="",a=0);const R=E===w.length-1;c+=Ce.addLine(T,!R),y=!1,u="",a=0}else k+a>x&&(y=!1,c+=Ce.addLine(u),u="",a=0),(u.length>0||!Ce.isBreakingSpace(T)||y)&&(u+=T,a+=k)}return c+=Ce.addLine(u,!1),c}static addLine(e,t=!0){return e=Ce.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,r,o){let a=r[e];return typeof a!="number"&&(a=Ce._measureText(e,t,o)+t,r[e]=a),a}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const r=e[t];if(!Ce.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:Ce._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:Ce._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let r="";if(typeof e!="string")return t;for(let o=0;o<e.length;o++){const a=e[o],u=e[o+1];if(Ce.isBreakingSpace(a,u)||Ce.isNewline(a)){r!==""&&(t.push(r),r=""),t.push(a);continue}r+=a}return r!==""&&t.push(r),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,r,o,a){return!0}static wordWrapSplit(e){return Ce.graphemeSegmenter(e)}static measureFont(e){if(Ce._fonts[e])return Ce._fonts[e];const t={ascent:0,descent:0,fontSize:0},r=Ce._canvas,o=Ce._context;o.font=e;const a=Ce.METRICS_STRING+Ce.BASELINE_SYMBOL,u=Math.ceil(o.measureText(a).width);let c=Math.ceil(o.measureText(Ce.BASELINE_SYMBOL).width);const f=Math.ceil(Ce.HEIGHT_MULTIPLIER*c);if(c=c*Ce.BASELINE_MULTIPLIER|0,u===0||f===0)return Ce._fonts[e]=t,t;r.width=u,r.height=f,o.fillStyle="#f00",o.fillRect(0,0,u,f),o.font=e,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(a,0,c);const m=o.getImageData(0,0,u,f).data,v=m.length,h=u*4;let p=0,y=0,x=!1;for(p=0;p<c;++p){for(let w=0;w<h;w+=4)if(m[y+w]!==255){x=!0;break}if(!x)y+=h;else break}for(t.ascent=c-p,y=v-h,x=!1,p=f;p>c;--p){for(let w=0;w<h;w+=4)if(m[y+w]!==255){x=!0;break}if(!x)y-=h;else break}return t.descent=p-c,t.fontSize=t.ascent+t.descent,Ce._fonts[e]=t,t}static clearMetrics(e=""){e?delete Ce._fonts[e]:Ce._fonts={}}static get _canvas(){if(!Ce.__canvas){let e;try{const t=new OffscreenCanvas(0,0);if(t.getContext("2d",pl)?.measureText)return Ce.__canvas=t,t;e=ge.ADAPTER.createCanvas()}catch{e=ge.ADAPTER.createCanvas()}e.width=e.height=10,Ce.__canvas=e}return Ce.__canvas}static get _context(){return Ce.__context||(Ce.__context=Ce._canvas.getContext("2d",pl)),Ce.__context}};Gr.METRICS_STRING="|q",Gr.BASELINE_SYMBOL="M",Gr.BASELINE_MULTIPLIER=1.4,Gr.HEIGHT_MULTIPLIER=2,Gr.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const i=new Intl.Segmenter;return e=>[...i.segment(e)].map(t=>t.segment)}return i=>[...i]})(),Gr.experimentalLetterSpacing=!1,Gr._fonts={},Gr._newlines=[10,13],Gr._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let $n=Gr;const ES=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],f_=class Ro{constructor(e){this.styleID=0,this.reset(),nd(this,e,e)}clone(){const e={};return nd(e,this,Ro.defaultStyle),new Ro(e)}reset(){nd(this,Ro.defaultStyle,Ro.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=rd(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=rd(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){TS(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=rd(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let r=t.length-1;r>=0;r--){let o=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&!ES.includes(o)&&(o=`"${o}"`),t[r]=o}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};f_.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Jl.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Zn=f_;function rd(i){const e=Ze.shared,t=r=>{const o=e.setValue(r);return o.alpha===1?o.toHex():o.toRgbaString()};return Array.isArray(i)?i.map(t):t(i)}function TS(i,e){if(!Array.isArray(i)||!Array.isArray(e)||i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(i[t]!==e[t])return!1;return!0}function nd(i,e,t){for(const r in t)Array.isArray(e[r])?i[r]=e[r].slice():i[r]=e[r]}const SS={texture:!0,children:!1,baseTexture:!0},p_=class Ud extends Rs{constructor(e,t,r){let o=!1;r||(r=ge.ADAPTER.createCanvas(),o=!0),r.width=3,r.height=3;const a=xe.from(r);a.orig=new Be,a.trim=new Be,super(a),this._ownCanvas=o,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=Ud.defaultResolution??ge.RESOLUTION,this._autoResolution=Ud.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return $n.experimentalLetterSpacing}static set experimentalLetterSpacing(e){Ue("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),$n.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const r=this.context,o=$n.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=o.width,u=o.height,c=o.lines,f=o.lineHeight,m=o.lineWidths,v=o.maxLineWidth,h=o.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,a)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,u)+t.padding*2)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=t.strokeThickness,r.textBaseline=t.textBaseline,r.lineJoin=t.lineJoin,r.miterLimit=t.miterLimit;let p,y;const x=t.dropShadow?2:1;for(let w=0;w<x;++w){const E=t.dropShadow&&w===0,T=E?Math.ceil(Math.max(1,u)+t.padding*2):0,k=T*this._resolution;if(E){r.fillStyle="black",r.strokeStyle="black";const N=t.dropShadowColor,L=t.dropShadowBlur*this._resolution,V=t.dropShadowDistance*this._resolution;r.shadowColor=Ze.shared.setValue(N).setAlpha(t.dropShadowAlpha).toRgbaString(),r.shadowBlur=L,r.shadowOffsetX=Math.cos(t.dropShadowAngle)*V,r.shadowOffsetY=Math.sin(t.dropShadowAngle)*V+k}else r.fillStyle=this._generateFillStyle(t,c,o),r.strokeStyle=t.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let R=(f-h.fontSize)/2;f-h.fontSize<0&&(R=0);for(let N=0;N<c.length;N++)p=t.strokeThickness/2,y=t.strokeThickness/2+N*f+h.ascent+R,t.align==="right"?p+=v-m[N]:t.align==="center"&&(p+=(v-m[N])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(c[N],p+t.padding,y+t.padding-T,!0),t.fill&&this.drawLetterSpacing(c[N],p+t.padding,y+t.padding-T)}this.updateTexture()}drawLetterSpacing(e,t,r,o=!1){const a=this._style.letterSpacing;let u=!1;if($n.experimentalLetterSpacingSupported&&($n.experimentalLetterSpacing?(this.context.letterSpacing=`${a}px`,this.context.textLetterSpacing=`${a}px`,u=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),a===0||u){o?this.context.strokeText(e,t,r):this.context.fillText(e,t,r);return}let c=t;const f=$n.graphemeSegmenter(e);let m=this.context.measureText(e).width,v=0;for(let h=0;h<f.length;++h){const p=f[h];o?this.context.strokeText(p,c,r):this.context.fillText(p,c,r);let y="";for(let x=h+1;x<f.length;++x)y+=f[x];v=this.context.measureText(y).width,c+=m-v+a,m=v}}updateTexture(){const e=this.canvas;if(this._style.trim){const u=Vw(e);u.data&&(e.width=u.width,e.height=u.height,this.context.putImageData(u.data,0,0))}const t=this._texture,r=this._style,o=r.trim?0:r.padding,a=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-o,t.trim.y=-o,t.orig.width=t._frame.width-o*2,t.orig.height=t._frame.height-o*2,this._onTextureUpdate(),a.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,r){const o=e.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const u=e.dropShadow?e.dropShadowDistance:0,c=e.padding||0,f=this.canvas.width/this._resolution-u-c*2,m=this.canvas.height/this._resolution-u-c*2,v=o.slice(),h=e.fillGradientStops.slice();if(!h.length){const p=v.length+1;for(let y=1;y<p;++y)h.push(y/p)}if(v.unshift(o[0]),h.unshift(0),v.push(o[o.length-1]),h.push(1),e.fillGradientType===Jl.LINEAR_VERTICAL){a=this.context.createLinearGradient(f/2,c,f/2,m+c);const p=r.fontProperties.fontSize+e.strokeThickness;for(let y=0;y<t.length;y++){const x=r.lineHeight*(y-1)+p,w=r.lineHeight*y;let E=w;y>0&&x>w&&(E=(w+x)/2);const T=w+p,k=r.lineHeight*(y+1);let R=T;y+1<t.length&&k<T&&(R=(T+k)/2);const N=(R-E)/m;for(let L=0;L<v.length;L++){let V=0;typeof h[L]=="number"?V=h[L]:V=L/v.length;let b=Math.min(1,Math.max(0,E/m+V*N));b=Number(b.toFixed(5)),a.addColorStop(b,v[L])}}}else{a=this.context.createLinearGradient(c,m/2,f+c,m/2);const p=v.length+1;let y=1;for(let x=0;x<v.length;x++){let w;typeof h[x]=="number"?w=h[x]:w=y/p,a.addColorStop(w,v[x]),y++}}return a}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},SS,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=Xn(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=Xn(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Zn?this._style=e:this._style=new Zn(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};p_.defaultAutoResolution=!0;let m_=p_;class AS{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function bS(i,e){let t=!1;if(i?._textures?.length){for(let r=0;r<i._textures.length;r++)if(i._textures[r]instanceof xe){const o=i._textures[r].baseTexture;e.includes(o)||(e.push(o),t=!0)}}return t}function CS(i,e){if(i.baseTexture instanceof Oe){const t=i.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function IS(i,e){if(i._texture&&i._texture instanceof xe){const t=i._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function RS(i,e){return e instanceof m_?(e.updateText(!0),!0):!1}function PS(i,e){if(e instanceof Zn){const t=e.toFontString();return $n.measureFont(t),!0}return!1}function MS(i,e){if(i instanceof m_){e.includes(i.style)||e.push(i.style),e.includes(i)||e.push(i);const t=i._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function kS(i,e){return i instanceof Zn?(e.includes(i)||e.push(i),!0):!1}const g_=class y_{constructor(e){this.limiter=new AS(y_.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(MS),this.registerFindHook(kS),this.registerFindHook(bS),this.registerFindHook(CS),this.registerFindHook(IS),this.registerUploadHook(RS),this.registerUploadHook(PS)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,Qt.system.addOnce(this.tick,this,Pi.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let r=0,o=this.uploadHooks.length;r<o;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Qt.system.addOnce(this.tick,this,Pi.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,r=e.length;t<r;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof br)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&Qt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};g_.uploadsPerFrame=4;let Gd=g_;Object.defineProperties(ge,{UPLOADS_PER_FRAME:{get(){return Gd.uploadsPerFrame},set(i){Ue("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Gd.uploadsPerFrame=i}}});function v_(i,e){return e instanceof Oe?(e._glTextures[i.CONTEXT_UID]||i.texture.bind(e),!0):!1}function LS(i,e){if(!(e instanceof u_))return!1;const{geometry:t}=e;e.finishPoly(),t.updateBatches();const{batches:r}=t;for(let o=0;o<r.length;o++){const{texture:a}=r[o].style;a&&v_(i,a.baseTexture)}return t.batchable||i.geometry.bind(t,e._resolveDirectShader(i)),!0}function DS(i,e){return i instanceof u_?(e.push(i),!0):!1}class __ extends Gd{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(DS),this.registerUploadHook(v_),this.registerUploadHook(LS)}}__.extension={name:"prepare",type:fe.RendererSystem};Te.add(__);var OS=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,BS=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,FS=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,Fy=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,NS=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const ml=new Je;class x_ extends Kl{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new Tv,this.state=Xr.for2d()}contextChange(){const e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=Wr.from(Fy,NS,t),this.shader=e.context.webGLVersion>1?Wr.from(BS,OS,t):Wr.from(Fy,FS,t)}render(e){const t=this.renderer,r=this.quad;let o=r.vertices;o[0]=o[6]=e._width*-e.anchor.x,o[1]=o[3]=e._height*-e.anchor.y,o[2]=o[4]=e._width*(1-e.anchor.x),o[5]=o[7]=e._height*(1-e.anchor.y);const a=e.uvRespectAnchor?e.anchor.x:0,u=e.uvRespectAnchor?e.anchor.y:0;o=r.uvs,o[0]=o[6]=-a,o[1]=o[3]=-u,o[2]=o[4]=1-a,o[5]=o[7]=1-u,r.invalidate();const c=e._texture,f=c.baseTexture,m=f.alphaMode>0,v=e.tileTransform.localTransform,h=e.uvMatrix;let p=f.isPowerOfTwo&&c.frame.width===f.width&&c.frame.height===f.height;p&&(f._glTextures[t.CONTEXT_UID]?p=f.wrapMode!==Kn.CLAMP:f.wrapMode===Kn.CLAMP&&(f.wrapMode=Kn.REPEAT));const y=p?this.simpleShader:this.shader,x=c.width,w=c.height,E=e._width,T=e._height;ml.set(v.a*x/E,v.b*x/T,v.c*w/E,v.d*w/T,v.tx/E,v.ty/T),ml.invert(),p?ml.prepend(h.mapCoord):(y.uniforms.uMapCoord=h.mapCoord.toArray(!0),y.uniforms.uClampFrame=h.uClampFrame,y.uniforms.uClampOffset=h.uClampOffset),y.uniforms.uTransform=ml.toArray(!0),y.uniforms.uColor=Ze.shared.setValue(e.tint).premultiply(e.worldAlpha,m).toArray(y.uniforms.uColor),y.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),y.uniforms.uSampler=c,t.shader.bind(y),t.geometry.bind(r),this.state.blendMode=hv(e.blendMode,m),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}x_.extension={name:"tilingSprite",type:fe.RendererPlugin};Te.add(x_);const w_=class Po{constructor(e,t,r){this.linkedSheets=[],(e instanceof Oe||e instanceof xe)&&(e={texture:e,data:t,resolutionFilename:r});const{texture:o,data:a,resolutionFilename:u=null,cachePrefix:c=""}=e;this.cachePrefix=c,this._texture=o instanceof xe?o:null,this.baseTexture=o instanceof Oe?o:this._texture.baseTexture,this.textures={},this.animations={},this.data=a;const f=this.baseTexture.resource;this.resolution=this._updateResolution(u||(f?f.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let r=mn(e,null);return r===null&&(r=typeof t=="number"?t:parseFloat(t??"1")),r!==1&&this.baseTexture.setResolution(r),r}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Po.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const r=Po.BATCH_SIZE;for(;t-e<r&&t<this._frameKeys.length;){const o=this._frameKeys[t],a=this._frames[o],u=a.frame;if(u){let c=null,f=null;const m=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,v=new Be(0,0,Math.floor(m.w)/this.resolution,Math.floor(m.h)/this.resolution);a.rotated?c=new Be(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):c=new Be(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(f=new Be(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[o]=new xe(this.baseTexture,c,v,f,a.rotated?2:0,a.anchor,a.borders),xe.addToCache(this.textures[o],this.cachePrefix+o.toString())}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let r=0;r<e[t].length;r++){const o=e[t][r];this.animations[t].push(this.textures[o])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Po.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Po.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};w_.BATCH_SIZE=1e3;let Ny=w_;const US=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function E_(i,e,t){const r={};if(i.forEach(o=>{r[o]=e}),Object.keys(e.textures).forEach(o=>{r[`${e.cachePrefix}${o}`]=e.textures[o]}),!t){const o=Et.dirname(i[0]);e.linkedSheets.forEach((a,u)=>{Object.assign(r,E_([`${o}/${e.data.meta.related_multi_packs[u]}`],a,!0))})}return r}const GS={extension:fe.Asset,cache:{test:i=>i instanceof Ny,getCacheableAssets:(i,e)=>E_(i,e,!1)},resolver:{test:i=>{const e=i.split("?")[0].split("."),t=e.pop(),r=e.pop();return t==="json"&&US.includes(r)},parse:i=>{const e=i.split(".");return{resolution:parseFloat(ge.RETINA_PREFIX.exec(i)?.[1]??"1"),format:e[e.length-2],src:i}}},loader:{name:"spritesheetLoader",extension:{type:fe.LoadParser,priority:Cr.Normal},async testParse(i,e){return Et.extname(e.src).toLowerCase()===".json"&&!!i.frames},async parse(i,e,t){const{texture:r,imageFilename:o,cachePrefix:a}=e?.data??{};let u=Et.dirname(e.src);u&&u.lastIndexOf("/")!==u.length-1&&(u+="/");let c;if(r&&r.baseTexture)c=r;else{const v=Od(u+(o??i.meta.image),e.src);c=(await t.load([v]))[v]}const f=new Ny({texture:c.baseTexture,data:i,resolutionFilename:e.src,cachePrefix:a});await f.parse();const m=i?.meta?.related_multi_packs;if(Array.isArray(m)){const v=[];for(const p of m){if(typeof p!="string")continue;let y=u+p;e.data?.ignoreMultiPack||(y=Od(y,e.src),v.push(t.load({src:y,data:{ignoreMultiPack:!0}})))}const h=await Promise.all(v);f.linkedSheets=h,h.forEach(p=>{p.linkedSheets=[f].concat(f.linkedSheets.filter(y=>y!==p))})}return f},unload(i){i.destroy(!0)}}};Te.add(GS);class Gl{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Tl{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const t=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const a in t){const u=t[a].match(/^[a-z]+/gm)[0],c=t[a].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),f={};for(const m in c){const v=c[m].split("="),h=v[0],p=v[1].replace(/"/gm,""),y=parseFloat(p),x=isNaN(y)?p:y;f[h]=x}r[u].push(f)}const o=new Gl;return r.info.forEach(a=>o.info.push({face:a.face,size:parseInt(a.size,10)})),r.common.forEach(a=>o.common.push({lineHeight:parseInt(a.lineHeight,10)})),r.page.forEach(a=>o.page.push({id:parseInt(a.id,10),file:a.file})),r.char.forEach(a=>o.char.push({id:parseInt(a.id,10),page:parseInt(a.page,10),x:parseInt(a.x,10),y:parseInt(a.y,10),width:parseInt(a.width,10),height:parseInt(a.height,10),xoffset:parseInt(a.xoffset,10),yoffset:parseInt(a.yoffset,10),xadvance:parseInt(a.xadvance,10)})),r.kerning.forEach(a=>o.kerning.push({first:parseInt(a.first,10),second:parseInt(a.second,10),amount:parseInt(a.amount,10)})),r.distanceField.forEach(a=>o.distanceField.push({distanceRange:parseInt(a.distanceRange,10),fieldType:a.fieldType})),o}}class Hd{static test(e){const t=e;return typeof e!="string"&&"getElementsByTagName"in e&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const t=new Gl,r=e.getElementsByTagName("info"),o=e.getElementsByTagName("common"),a=e.getElementsByTagName("page"),u=e.getElementsByTagName("char"),c=e.getElementsByTagName("kerning"),f=e.getElementsByTagName("distanceField");for(let m=0;m<r.length;m++)t.info.push({face:r[m].getAttribute("face"),size:parseInt(r[m].getAttribute("size"),10)});for(let m=0;m<o.length;m++)t.common.push({lineHeight:parseInt(o[m].getAttribute("lineHeight"),10)});for(let m=0;m<a.length;m++)t.page.push({id:parseInt(a[m].getAttribute("id"),10)||0,file:a[m].getAttribute("file")});for(let m=0;m<u.length;m++){const v=u[m];t.char.push({id:parseInt(v.getAttribute("id"),10),page:parseInt(v.getAttribute("page"),10)||0,x:parseInt(v.getAttribute("x"),10),y:parseInt(v.getAttribute("y"),10),width:parseInt(v.getAttribute("width"),10),height:parseInt(v.getAttribute("height"),10),xoffset:parseInt(v.getAttribute("xoffset"),10),yoffset:parseInt(v.getAttribute("yoffset"),10),xadvance:parseInt(v.getAttribute("xadvance"),10)})}for(let m=0;m<c.length;m++)t.kerning.push({first:parseInt(c[m].getAttribute("first"),10),second:parseInt(c[m].getAttribute("second"),10),amount:parseInt(c[m].getAttribute("amount"),10)});for(let m=0;m<f.length;m++)t.distanceField.push({fieldType:f[m].getAttribute("fieldType"),distanceRange:parseInt(f[m].getAttribute("distanceRange"),10)});return t}}class zd{static test(e){return typeof e=="string"&&e.includes("<font>")?Hd.test(ge.ADAPTER.parseXML(e)):!1}static parse(e){return Hd.parse(ge.ADAPTER.parseXML(e))}}const id=[Tl,Hd,zd];function HS(i){for(let e=0;e<id.length;e++)if(id[e].test(i))return id[e];return null}function zS(i,e,t,r,o,a){const u=t.fill;if(Array.isArray(u)){if(u.length===1)return u[0]}else return u;let c;const f=t.dropShadow?t.dropShadowDistance:0,m=t.padding||0,v=i.width/r-f-m*2,h=i.height/r-f-m*2,p=u.slice(),y=t.fillGradientStops.slice();if(!y.length){const x=p.length+1;for(let w=1;w<x;++w)y.push(w/x)}if(p.unshift(u[0]),y.unshift(0),p.push(u[u.length-1]),y.push(1),t.fillGradientType===Jl.LINEAR_VERTICAL){c=e.createLinearGradient(v/2,m,v/2,h+m);let x=0;const w=(a.fontProperties.fontSize+t.strokeThickness)/h;for(let E=0;E<o.length;E++){const T=a.lineHeight*E;for(let k=0;k<p.length;k++){let R=0;typeof y[k]=="number"?R=y[k]:R=k/p.length;const N=T/h+R*w;let L=Math.max(x,N);L=Math.min(L,1),c.addColorStop(L,p[k]),x=L}}}else{c=e.createLinearGradient(m,h/2,v+m,h/2);const x=p.length+1;let w=1;for(let E=0;E<p.length;E++){let T;typeof y[E]=="number"?T=y[E]:T=w/x,c.addColorStop(T,p[E]),w++}}return c}function VS(i,e,t,r,o,a,u){const c=t.text,f=t.fontProperties;e.translate(r,o),e.scale(a,a);const m=u.strokeThickness/2,v=-(u.strokeThickness/2);if(e.font=u.toFontString(),e.lineWidth=u.strokeThickness,e.textBaseline=u.textBaseline,e.lineJoin=u.lineJoin,e.miterLimit=u.miterLimit,e.fillStyle=zS(i,e,u,a,[c],t),e.strokeStyle=u.stroke,u.dropShadow){const h=u.dropShadowColor,p=u.dropShadowBlur*a,y=u.dropShadowDistance*a;e.shadowColor=Ze.shared.setValue(h).setAlpha(u.dropShadowAlpha).toRgbaString(),e.shadowBlur=p,e.shadowOffsetX=Math.cos(u.dropShadowAngle)*y,e.shadowOffsetY=Math.sin(u.dropShadowAngle)*y}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;u.stroke&&u.strokeThickness&&e.strokeText(c,m,v+t.lineHeight-f.descent),u.fill&&e.fillText(c,m,v+t.lineHeight-f.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Sl(i){return i.codePointAt?i.codePointAt(0):i.charCodeAt(0)}function T_(i){return Array.from?Array.from(i):i.split("")}function $S(i){typeof i=="string"&&(i=[i]);const e=[];for(let t=0,r=i.length;t<r;t++){const o=i[t];if(Array.isArray(o)){if(o.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${o.length}.`);const a=o[0].charCodeAt(0),u=o[1].charCodeAt(0);if(u<a)throw new Error("[BitmapFont]: Invalid character range.");for(let c=a,f=u;c<=f;c++)e.push(String.fromCharCode(c))}else e.push(...T_(o))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const zn=class Hr{constructor(e,t,r){const[o]=e.info,[a]=e.common,[u]=e.page,[c]=e.distanceField,f=mn(u.file),m={};this._ownsTextures=r,this.font=o.face,this.size=o.size,this.lineHeight=a.lineHeight/f,this.chars={},this.pageTextures=m;for(let v=0;v<e.page.length;v++){const{id:h,file:p}=e.page[v];m[h]=t instanceof Array?t[v]:t[p],c?.fieldType&&c.fieldType!=="none"&&(m[h].baseTexture.alphaMode=Wt.NO_PREMULTIPLIED_ALPHA,m[h].baseTexture.mipmap=jr.OFF)}for(let v=0;v<e.char.length;v++){const{id:h,page:p}=e.char[v];let{x:y,y:x,width:w,height:E,xoffset:T,yoffset:k,xadvance:R}=e.char[v];y/=f,x/=f,w/=f,E/=f,T/=f,k/=f,R/=f;const N=new Be(y+m[p].frame.x/f,x+m[p].frame.y/f,w,E);this.chars[h]={xOffset:T,yOffset:k,xAdvance:R,kerning:{},texture:new xe(m[p].baseTexture,N),page:p}}for(let v=0;v<e.kerning.length;v++){let{first:h,second:p,amount:y}=e.kerning[v];h/=f,p/=f,y/=f,this.chars[p]&&(this.chars[p].kerning[h]=y)}this.distanceFieldRange=c?.distanceRange,this.distanceFieldType=c?.fieldType?.toLowerCase()??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,r){let o;if(e instanceof Gl)o=e;else{const u=HS(e);if(!u)throw new Error("Unrecognized data format for font.");o=u.parse(e)}t instanceof xe&&(t=[t]);const a=new Hr(o,t,r);return Hr.available[a.font]=a,a}static uninstall(e){const t=Hr.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete Hr.available[e]}static from(e,t,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:o,padding:a,resolution:u,textureWidth:c,textureHeight:f,...m}=Object.assign({},Hr.defaultOptions,r),v=$S(o),h=t instanceof Zn?t:new Zn(t),p=c,y=new Gl;y.info[0]={face:h.fontFamily,size:h.fontSize},y.common[0]={lineHeight:h.fontSize};let x=0,w=0,E,T,k,R=0;const N=[];for(let V=0;V<v.length;V++){E||(E=ge.ADAPTER.createCanvas(),E.width=c,E.height=f,T=E.getContext("2d"),k=new Oe(E,{resolution:u,...m}),N.push(new xe(k)),y.page.push({id:N.length-1,file:""}));const b=v[V],U=$n.measureText(b,h,!1,E),$=U.width,ee=Math.ceil(U.height),Z=Math.ceil((h.fontStyle==="italic"?2:1)*$);if(w>=f-ee*u){if(w===0)throw new Error(`[BitmapFont] textureHeight ${f}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${b}')`);--V,E=null,T=null,k=null,w=0,x=0,R=0;continue}if(R=Math.max(ee+U.fontProperties.descent,R),Z*u+x>=p){if(x===0)throw new Error(`[BitmapFont] textureWidth ${c}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${b}')`);--V,w+=R*u,w=Math.ceil(w),x=0,R=0;continue}VS(E,T,U,x,w,u,h);const z=Sl(U.text);y.char.push({id:z,page:N.length-1,x:x/u,y:w/u,width:Z,height:ee,xoffset:0,yoffset:0,xadvance:$-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0)}),x+=(Z+2*a)*u,x=Math.ceil(x)}if(!r?.skipKerning)for(let V=0,b=v.length;V<b;V++){const U=v[V];for(let $=0;$<b;$++){const ee=v[$],Z=T.measureText(U).width,z=T.measureText(ee).width,Y=T.measureText(U+ee).width-(Z+z);Y&&y.kerning.push({first:Sl(U),second:Sl(ee),amount:Y})}}const L=new Hr(y,N,!0);return Hr.available[e]!==void 0&&Hr.uninstall(e),Hr.available[e]=L,L}};zn.ALPHA=[["a","z"],["A","Z"]," "],zn.NUMERIC=[["0","9"]],zn.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],zn.ASCII=[[" ","~"]],zn.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:zn.ALPHANUMERIC},zn.available={};let Vn=zn;var WS=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,jS=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const Uy=[],Gy=[],Hy=[],S_=class A_ extends br{constructor(e,t={}){super();const{align:r,tint:o,maxWidth:a,letterSpacing:u,fontName:c,fontSize:f}=Object.assign({},A_.styleDefaults,t);if(!Vn.available[c])throw new Error(`Missing BitmapFont "${c}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tintColor=new Ze(o),this._font=void 0,this._fontName=c,this._fontSize=f,this.text=e,this._maxWidth=a,this._maxLineHeight=0,this._letterSpacing=u,this._anchor=new fn(()=>{this.dirty=!0},this,0,0),this._roundPixels=ge.ROUND_PIXELS,this.dirty=!0,this._resolution=ge.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const e=Vn.available[this._fontName],t=this.fontSize,r=t/e.size,o=new He,a=[],u=[],c=[],f=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",m=T_(f),v=this._maxWidth*e.size/t,h=e.distanceFieldType==="none"?Uy:Gy;let p=null,y=0,x=0,w=0,E=-1,T=0,k=0,R=0,N=0;for(let Z=0;Z<m.length;Z++){const z=m[Z],Y=Sl(z);if(/(?:\s)/.test(z)&&(E=Z,T=y,N++),z==="\r"||z===`
`){u.push(y),c.push(-1),x=Math.max(x,y),++w,++k,o.x=0,o.y+=e.lineHeight,p=null,N=0;continue}const j=e.chars[Y];if(!j)continue;p&&j.kerning[p]&&(o.x+=j.kerning[p]);const ce=Hy.pop()||{texture:xe.EMPTY,line:0,charCode:0,prevSpaces:0,position:new He};ce.texture=j.texture,ce.line=w,ce.charCode=Y,ce.position.x=Math.round(o.x+j.xOffset+this._letterSpacing/2),ce.position.y=Math.round(o.y+j.yOffset),ce.prevSpaces=N,a.push(ce),y=ce.position.x+Math.max(j.xAdvance-j.xOffset,j.texture.orig.width),o.x+=j.xAdvance+this._letterSpacing,R=Math.max(R,j.yOffset+j.texture.height),p=Y,E!==-1&&v>0&&o.x>v&&(++k,ws(a,1+E-k,1+Z-E),Z=E,E=-1,u.push(T),c.push(a.length>0?a[a.length-1].prevSpaces:0),x=Math.max(x,T),w++,o.x=0,o.y+=e.lineHeight,p=null,N=0)}const L=m[m.length-1];L!=="\r"&&L!==`
`&&(/(?:\s)/.test(L)&&(y=T),u.push(y),x=Math.max(x,y),c.push(-1));const V=[];for(let Z=0;Z<=w;Z++){let z=0;this._align==="right"?z=x-u[Z]:this._align==="center"?z=(x-u[Z])/2:this._align==="justify"&&(z=c[Z]<0?0:(x-u[Z])/c[Z]),V.push(z)}const b=a.length,U={},$=[],ee=this._activePagesMeshData;h.push(...ee);for(let Z=0;Z<b;Z++){const z=a[Z].texture,Y=z.baseTexture.uid;if(!U[Y]){let j=h.pop();if(!j){const I=new yS;let P,A;e.distanceFieldType==="none"?(P=new Oy(xe.EMPTY),A=Me.NORMAL):(P=new Oy(xe.EMPTY,{program:pn.from(jS,WS),uniforms:{uFWidth:0}}),A=Me.NORMAL_NPM);const F=new Dy(I,P);F.blendMode=A,j={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:F,vertices:null,uvs:null,indices:null}}j.index=0,j.indexCount=0,j.vertexCount=0,j.uvsCount=0,j.total=0;const{_textureCache:ce}=this;ce[Y]=ce[Y]||new xe(z.baseTexture),j.mesh.texture=ce[Y],j.mesh.tint=this._tintColor.value,$.push(j),U[Y]=j}U[Y].total++}for(let Z=0;Z<ee.length;Z++)$.includes(ee[Z])||this.removeChild(ee[Z].mesh);for(let Z=0;Z<$.length;Z++)$[Z].mesh.parent!==this&&this.addChild($[Z].mesh);this._activePagesMeshData=$;for(const Z in U){const z=U[Z],Y=z.total;if(!(z.indices?.length>6*Y)||z.vertices.length<Dy.BATCHABLE_SIZE*2)z.vertices=new Float32Array(8*Y),z.uvs=new Float32Array(8*Y),z.indices=new Uint16Array(6*Y);else{const j=z.total,ce=z.vertices;for(let I=j*4*2;I<ce.length;I++)ce[I]=0}z.mesh.size=6*Y}for(let Z=0;Z<b;Z++){const z=a[Z];let Y=z.position.x+V[z.line]*(this._align==="justify"?z.prevSpaces:1);this._roundPixels&&(Y=Math.round(Y));const j=Y*r,ce=z.position.y*r,I=z.texture,P=U[I.baseTexture.uid],A=I.frame,F=I._uvs,M=P.index++;P.indices[M*6+0]=0+M*4,P.indices[M*6+1]=1+M*4,P.indices[M*6+2]=2+M*4,P.indices[M*6+3]=0+M*4,P.indices[M*6+4]=2+M*4,P.indices[M*6+5]=3+M*4,P.vertices[M*8+0]=j,P.vertices[M*8+1]=ce,P.vertices[M*8+2]=j+A.width*r,P.vertices[M*8+3]=ce,P.vertices[M*8+4]=j+A.width*r,P.vertices[M*8+5]=ce+A.height*r,P.vertices[M*8+6]=j,P.vertices[M*8+7]=ce+A.height*r,P.uvs[M*8+0]=F.x0,P.uvs[M*8+1]=F.y0,P.uvs[M*8+2]=F.x1,P.uvs[M*8+3]=F.y1,P.uvs[M*8+4]=F.x2,P.uvs[M*8+5]=F.y2,P.uvs[M*8+6]=F.x3,P.uvs[M*8+7]=F.y3}this._textWidth=x*r,this._textHeight=(o.y+e.lineHeight)*r;for(const Z in U){const z=U[Z];if(this.anchor.x!==0||this.anchor.y!==0){let I=0;const P=this._textWidth*this.anchor.x,A=this._textHeight*this.anchor.y;for(let F=0;F<z.total;F++)z.vertices[I++]-=P,z.vertices[I++]-=A,z.vertices[I++]-=P,z.vertices[I++]-=A,z.vertices[I++]-=P,z.vertices[I++]-=A,z.vertices[I++]-=P,z.vertices[I++]-=A}this._maxLineHeight=R*r;const Y=z.mesh.geometry.getBuffer("aVertexPosition"),j=z.mesh.geometry.getBuffer("aTextureCoord"),ce=z.mesh.geometry.getIndex();Y.data=z.vertices,j.data=z.uvs,ce.data=z.indices,Y.update(),j.update(),ce.update()}for(let Z=0;Z<a.length;Z++)Hy.push(a[Z]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:r,size:o}=Vn.available[this._fontName];if(r!=="none"){const{a,b:u,c,d:f}=this.worldTransform,m=Math.sqrt(a*a+u*u),v=Math.sqrt(c*c+f*f),h=(Math.abs(m)+Math.abs(v))/2,p=this.fontSize/o,y=e._view.resolution;for(const x of this._activePagesMeshData)x.mesh.shader.uniforms.uFWidth=h*t*p*y}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=Vn.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!Vn.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??Vn.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,r=Vn.available[this._fontName].distanceFieldType==="none"?Uy:Gy;r.push(...this._activePagesMeshData);for(const o of this._activePagesMeshData)this.removeChild(o.mesh);this._activePagesMeshData=[],r.filter(o=>t[o.mesh.texture.baseTexture.uid]).forEach(o=>{o.mesh.texture=xe.EMPTY});for(const o in t)t[o].destroy(),delete t[o];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};S_.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let _A=S_;const XS=[".xml",".fnt"],YS={extension:{type:fe.LoadParser,priority:Cr.Normal},name:"loadBitmapFont",test(i){return XS.includes(Et.extname(i).toLowerCase())},async testParse(i){return Tl.test(i)||zd.test(i)},async parse(i,e,t){const r=Tl.test(i)?Tl.parse(i):zd.parse(i),{src:o}=e,{page:a}=r,u=[];for(let m=0;m<a.length;++m){const v=a[m].file;let h=Et.join(Et.dirname(o),v);h=Od(h,o),u.push(h)}const c=await t.load(u),f=u.map(m=>c[m]);return Vn.install(r,f,!0)},async load(i,e){return(await ge.ADAPTER.fetch(i)).text()},unload(i){i.destroy()}};Te.add(YS);const Vd=class ps extends Zn{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new ps(Object.keys(ps.defaultOptions).reduce((t,r)=>({...t,[r]:e[r]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete ps.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:r}=ps;if(r[e]){const o=r[e];return this._fonts.push(o),o.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return ge.ADAPTER.fetch(e).then(o=>o.blob()).then(async o=>new Promise((a,u)=>{const c=URL.createObjectURL(o),f=new FileReader;f.onload=()=>a([c,f.result]),f.onerror=u,f.readAsDataURL(o)})).then(async([o,a])=>{const u=Object.assign({family:Et.basename(e,Et.extname(e)),weight:"normal",style:"normal",display:"auto",src:o,dataSrc:a,refs:1,originalUrl:e,fontFace:null},t);r[e]=u,this._fonts.push(u),this.styleID++;const c=new FontFace(u.family,`url(${u.src})`,{weight:u.weight,style:u.style,display:u.display});u.fontFace=c,await c.load(),document.fonts.add(c),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(r=>!this._overrides.includes(r));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(r=>this._overrides.includes(r));t.length>0&&(this._overrides=this._overrides.filter(r=>!t.includes(r)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style};
                font-display: ${t.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=Fw(e)),typeof e=="number"?Bw(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,r=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),o=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const a=`${r}px ${o}px`;return this.dropShadowBlur>0?`text-shadow: ${a} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${a} ${e}`}reset(){Object.assign(this,ps.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=ge.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};Vd.availableFonts={},Vd.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let sd=Vd;const gl=class ms extends Rs{constructor(e="",t={}){super(xe.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const r=new Image,o=xe.from(r,{scaleMode:ge.SCALE_MODE,resourceOptions:{autoLoad:!1}});o.orig=new Be,o.trim=new Be,this.texture=o;const a="http://www.w3.org/2000/svg",u="http://www.w3.org/1999/xhtml",c=document.createElementNS(a,"svg"),f=document.createElementNS(a,"foreignObject"),m=document.createElementNS(u,"div"),v=document.createElementNS(u,"style");f.setAttribute("width","10000"),f.setAttribute("height","10000"),f.style.overflow="hidden",c.appendChild(f),this.maxWidth=ms.defaultMaxWidth,this.maxHeight=ms.defaultMaxHeight,this._domElement=m,this._styleElement=v,this._svgRoot=c,this._foreignObject=f,this._foreignObject.appendChild(v),this._foreignObject.appendChild(m),this._image=r,this._loadImage=new Image,this._autoResolution=ms.defaultAutoResolution,this._resolution=ms.defaultResolution??ge.RESOLUTION,this.text=e,this.style=t}measureText(e){const{text:t,style:r,resolution:o}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:r.toCSS(o)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);const a=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:u,height:c}=a;(u>this.maxWidth||c>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const f=Math.min(this.maxWidth,Math.ceil(u)),m=Math.min(this.maxHeight,Math.ceil(c));return this._svgRoot.setAttribute("width",f.toString()),this._svgRoot.setAttribute("height",m.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(o)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:f+r.padding*2,height:m+r.padding*2}}async updateText(e=!0){const{style:t,_image:r,_loadImage:o}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:a,height:u}=this.measureText();r.width=o.width=Math.ceil(Math.max(1,a)),r.height=o.height=Math.ceil(Math.max(1,u)),this._updateID++;const c=this._updateID;await new Promise(f=>{o.onload=async()=>{if(c<this._updateID){f();return}await t.onBeforeDraw(),r.src=o.src,o.onload=null,o.src="",this.updateTexture(),f()};const m=new XMLSerializer().serializeToString(this._svgRoot);o.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(m)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:r,resolution:o}=this,{padding:a}=e,{baseTexture:u}=t;t.trim.width=t._frame.width=r.width/o,t.trim.height=t._frame.height=r.height/o,t.trim.x=-a,t.trim.y=-a,t.orig.width=t._frame.width-a*2,t.orig.height=t._frame.height-a*2,this._onTextureUpdate(),u.setRealSize(r.width,r.height,o),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},ms.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=t,this._svgRoot?.remove(),this._svgRoot=t,this._domElement?.remove(),this._domElement=t,this._foreignObject?.remove(),this._foreignObject=t,this._styleElement?.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=Xn(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=Xn(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof sd?(this.ownsStyle=!1,this._style=e):e instanceof Zn?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=sd.from(e)):(this.ownsStyle=!0,this._style=new sd(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};gl.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},gl.defaultMaxWidth=2024,gl.defaultMaxHeight=2024,gl.defaultAutoResolution=!0;class Hl{static instance;textures=new Map;animations=new Map;stateAssets=new Map;static getInstance(){return this.instance||(this.instance=new Hl),this.instance}async loadManifest(e,t,r){if(this.stateAssets.has(t)&&this.stateAssets.get(t).size>0){r&&r(1);return}const o=await fetch(e);if(!o.ok)throw new Error(`[SpriteManager] Failed to fetch manifest: ${e} (Status: ${o.status})`);const a=await o.json();this.stateAssets.has(t)||this.stateAssets.set(t,new Set);const u=this.stateAssets.get(t),c=Object.keys(a.spritesheets||{}).length+Object.keys(a.images||{}).length;let f=0;const m=()=>{f++,r&&r(f/c)};for(const[v,h]of Object.entries(a.spritesheets||{})){const p=await Ai.load(h.url);u.add(h.url);for(const[y,x]of Object.entries(h.frames||{})){const w=new xe(p,new Be(x.x,x.y,x.w,x.h));this.textures.set(y,w),u.add(y)}for(const[y,x]of Object.entries(h.animations||{})){const w=`${v}_${y}`,E=x.map(T=>this.textures.get(T)).filter(T=>!!T);this.animations.set(w,E),u.add(w)}m()}if(a.images)for(const[v,h]of Object.entries(a.images)){const p=await Ai.load(h);this.textures.set(v,p),u.add(v),u.add(h),m()}}uncacheByState(e){const t=this.stateAssets.get(e);t&&(t.forEach(r=>{(r.includes(".")||r.includes("/"))&&Ai.unload(r),this.textures.delete(r),this.animations.delete(r)}),this.stateAssets.delete(e))}getTexture(e){return this.textures.get(e)||xe.WHITE}getAnimation(e){return this.animations.get(e)||[]}}var od={};var zy;function qS(){return zy||(zy=1,(function(i){(function(){var e=function(){this.init()};e.prototype={init:function(){var h=this||t;return h._counter=1e3,h._html5AudioPool=[],h.html5PoolSize=10,h._codecs={},h._howls=[],h._muted=!1,h._volume=1,h._canPlayEvent="canplaythrough",h._navigator=typeof window<"u"&&window.navigator?window.navigator:null,h.masterGain=null,h.noAudio=!1,h.usingWebAudio=!0,h.autoSuspend=!0,h.ctx=null,h.autoUnlock=!0,h._setup(),h},volume:function(h){var p=this||t;if(h=parseFloat(h),p.ctx||v(),typeof h<"u"&&h>=0&&h<=1){if(p._volume=h,p._muted)return p;p.usingWebAudio&&p.masterGain.gain.setValueAtTime(h,t.ctx.currentTime);for(var y=0;y<p._howls.length;y++)if(!p._howls[y]._webAudio)for(var x=p._howls[y]._getSoundIds(),w=0;w<x.length;w++){var E=p._howls[y]._soundById(x[w]);E&&E._node&&(E._node.volume=E._volume*h)}return p}return p._volume},mute:function(h){var p=this||t;p.ctx||v(),p._muted=h,p.usingWebAudio&&p.masterGain.gain.setValueAtTime(h?0:p._volume,t.ctx.currentTime);for(var y=0;y<p._howls.length;y++)if(!p._howls[y]._webAudio)for(var x=p._howls[y]._getSoundIds(),w=0;w<x.length;w++){var E=p._howls[y]._soundById(x[w]);E&&E._node&&(E._node.muted=h?!0:E._muted)}return p},stop:function(){for(var h=this||t,p=0;p<h._howls.length;p++)h._howls[p].stop();return h},unload:function(){for(var h=this||t,p=h._howls.length-1;p>=0;p--)h._howls[p].unload();return h.usingWebAudio&&h.ctx&&typeof h.ctx.close<"u"&&(h.ctx.close(),h.ctx=null,v()),h},codecs:function(h){return(this||t)._codecs[h.replace(/^x-/,"")]},_setup:function(){var h=this||t;if(h.state=h.ctx&&h.ctx.state||"suspended",h._autoSuspend(),!h.usingWebAudio)if(typeof Audio<"u")try{var p=new Audio;typeof p.oncanplaythrough>"u"&&(h._canPlayEvent="canplay")}catch{h.noAudio=!0}else h.noAudio=!0;try{var p=new Audio;p.muted&&(h.noAudio=!0)}catch{}return h.noAudio||h._setupCodecs(),h},_setupCodecs:function(){var h=this||t,p=null;try{p=typeof Audio<"u"?new Audio:null}catch{return h}if(!p||typeof p.canPlayType!="function")return h;var y=p.canPlayType("audio/mpeg;").replace(/^no$/,""),x=h._navigator?h._navigator.userAgent:"",w=x.match(/OPR\/(\d+)/g),E=w&&parseInt(w[0].split("/")[1],10)<33,T=x.indexOf("Safari")!==-1&&x.indexOf("Chrome")===-1,k=x.match(/Version\/(.*?) /),R=T&&k&&parseInt(k[1],10)<15;return h._codecs={mp3:!!(!E&&(y||p.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!y,opus:!!p.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!p.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!p.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(p.canPlayType('audio/wav; codecs="1"')||p.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!p.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!p.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(p.canPlayType("audio/x-m4a;")||p.canPlayType("audio/m4a;")||p.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(p.canPlayType("audio/x-m4b;")||p.canPlayType("audio/m4b;")||p.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(p.canPlayType("audio/x-mp4;")||p.canPlayType("audio/mp4;")||p.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!R&&p.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!R&&p.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!p.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(p.canPlayType("audio/x-flac;")||p.canPlayType("audio/flac;")).replace(/^no$/,"")},h},_unlockAudio:function(){var h=this||t;if(!(h._audioUnlocked||!h.ctx)){h._audioUnlocked=!1,h.autoUnlock=!1,!h._mobileUnloaded&&h.ctx.sampleRate!==44100&&(h._mobileUnloaded=!0,h.unload()),h._scratchBuffer=h.ctx.createBuffer(1,1,22050);var p=function(y){for(;h._html5AudioPool.length<h.html5PoolSize;)try{var x=new Audio;x._unlocked=!0,h._releaseHtml5Audio(x)}catch{h.noAudio=!0;break}for(var w=0;w<h._howls.length;w++)if(!h._howls[w]._webAudio)for(var E=h._howls[w]._getSoundIds(),T=0;T<E.length;T++){var k=h._howls[w]._soundById(E[T]);k&&k._node&&!k._node._unlocked&&(k._node._unlocked=!0,k._node.load())}h._autoResume();var R=h.ctx.createBufferSource();R.buffer=h._scratchBuffer,R.connect(h.ctx.destination),typeof R.start>"u"?R.noteOn(0):R.start(0),typeof h.ctx.resume=="function"&&h.ctx.resume(),R.onended=function(){R.disconnect(0),h._audioUnlocked=!0,document.removeEventListener("touchstart",p,!0),document.removeEventListener("touchend",p,!0),document.removeEventListener("click",p,!0),document.removeEventListener("keydown",p,!0);for(var N=0;N<h._howls.length;N++)h._howls[N]._emit("unlock")}};return document.addEventListener("touchstart",p,!0),document.addEventListener("touchend",p,!0),document.addEventListener("click",p,!0),document.addEventListener("keydown",p,!0),h}},_obtainHtml5Audio:function(){var h=this||t;if(h._html5AudioPool.length)return h._html5AudioPool.pop();var p=new Audio().play();return p&&typeof Promise<"u"&&(p instanceof Promise||typeof p.then=="function")&&p.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(h){var p=this||t;return h._unlocked&&p._html5AudioPool.push(h),p},_autoSuspend:function(){var h=this;if(!(!h.autoSuspend||!h.ctx||typeof h.ctx.suspend>"u"||!t.usingWebAudio)){for(var p=0;p<h._howls.length;p++)if(h._howls[p]._webAudio){for(var y=0;y<h._howls[p]._sounds.length;y++)if(!h._howls[p]._sounds[y]._paused)return h}return h._suspendTimer&&clearTimeout(h._suspendTimer),h._suspendTimer=setTimeout(function(){if(h.autoSuspend){h._suspendTimer=null,h.state="suspending";var x=function(){h.state="suspended",h._resumeAfterSuspend&&(delete h._resumeAfterSuspend,h._autoResume())};h.ctx.suspend().then(x,x)}},3e4),h}},_autoResume:function(){var h=this;if(!(!h.ctx||typeof h.ctx.resume>"u"||!t.usingWebAudio))return h.state==="running"&&h.ctx.state!=="interrupted"&&h._suspendTimer?(clearTimeout(h._suspendTimer),h._suspendTimer=null):h.state==="suspended"||h.state==="running"&&h.ctx.state==="interrupted"?(h.ctx.resume().then(function(){h.state="running";for(var p=0;p<h._howls.length;p++)h._howls[p]._emit("resume")}),h._suspendTimer&&(clearTimeout(h._suspendTimer),h._suspendTimer=null)):h.state==="suspending"&&(h._resumeAfterSuspend=!0),h}};var t=new e,r=function(h){var p=this;if(!h.src||h.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}p.init(h)};r.prototype={init:function(h){var p=this;return t.ctx||v(),p._autoplay=h.autoplay||!1,p._format=typeof h.format!="string"?h.format:[h.format],p._html5=h.html5||!1,p._muted=h.mute||!1,p._loop=h.loop||!1,p._pool=h.pool||5,p._preload=typeof h.preload=="boolean"||h.preload==="metadata"?h.preload:!0,p._rate=h.rate||1,p._sprite=h.sprite||{},p._src=typeof h.src!="string"?h.src:[h.src],p._volume=h.volume!==void 0?h.volume:1,p._xhr={method:h.xhr&&h.xhr.method?h.xhr.method:"GET",headers:h.xhr&&h.xhr.headers?h.xhr.headers:null,withCredentials:h.xhr&&h.xhr.withCredentials?h.xhr.withCredentials:!1},p._duration=0,p._state="unloaded",p._sounds=[],p._endTimers={},p._queue=[],p._playLock=!1,p._onend=h.onend?[{fn:h.onend}]:[],p._onfade=h.onfade?[{fn:h.onfade}]:[],p._onload=h.onload?[{fn:h.onload}]:[],p._onloaderror=h.onloaderror?[{fn:h.onloaderror}]:[],p._onplayerror=h.onplayerror?[{fn:h.onplayerror}]:[],p._onpause=h.onpause?[{fn:h.onpause}]:[],p._onplay=h.onplay?[{fn:h.onplay}]:[],p._onstop=h.onstop?[{fn:h.onstop}]:[],p._onmute=h.onmute?[{fn:h.onmute}]:[],p._onvolume=h.onvolume?[{fn:h.onvolume}]:[],p._onrate=h.onrate?[{fn:h.onrate}]:[],p._onseek=h.onseek?[{fn:h.onseek}]:[],p._onunlock=h.onunlock?[{fn:h.onunlock}]:[],p._onresume=[],p._webAudio=t.usingWebAudio&&!p._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(p),p._autoplay&&p._queue.push({event:"play",action:function(){p.play()}}),p._preload&&p._preload!=="none"&&p.load(),p},load:function(){var h=this,p=null;if(t.noAudio){h._emit("loaderror",null,"No audio support.");return}typeof h._src=="string"&&(h._src=[h._src]);for(var y=0;y<h._src.length;y++){var x,w;if(h._format&&h._format[y])x=h._format[y];else{if(w=h._src[y],typeof w!="string"){h._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}x=/^data:audio\/([^;,]+);/i.exec(w),x||(x=/\.([^.]+)$/.exec(w.split("?",1)[0])),x&&(x=x[1].toLowerCase())}if(x||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),x&&t.codecs(x)){p=h._src[y];break}}if(!p){h._emit("loaderror",null,"No codec support for selected audio sources.");return}return h._src=p,h._state="loading",window.location.protocol==="https:"&&p.slice(0,5)==="http:"&&(h._html5=!0,h._webAudio=!1),new o(h),h._webAudio&&u(h),h},play:function(h,p){var y=this,x=null;if(typeof h=="number")x=h,h=null;else{if(typeof h=="string"&&y._state==="loaded"&&!y._sprite[h])return null;if(typeof h>"u"&&(h="__default",!y._playLock)){for(var w=0,E=0;E<y._sounds.length;E++)y._sounds[E]._paused&&!y._sounds[E]._ended&&(w++,x=y._sounds[E]._id);w===1?h=null:x=null}}var T=x?y._soundById(x):y._inactiveSound();if(!T)return null;if(x&&!h&&(h=T._sprite||"__default"),y._state!=="loaded"){T._sprite=h,T._ended=!1;var k=T._id;return y._queue.push({event:"play",action:function(){y.play(k)}}),k}if(x&&!T._paused)return p||y._loadQueue("play"),T._id;y._webAudio&&t._autoResume();var R=Math.max(0,T._seek>0?T._seek:y._sprite[h][0]/1e3),N=Math.max(0,(y._sprite[h][0]+y._sprite[h][1])/1e3-R),L=N*1e3/Math.abs(T._rate),V=y._sprite[h][0]/1e3,b=(y._sprite[h][0]+y._sprite[h][1])/1e3;T._sprite=h,T._ended=!1;var U=function(){T._paused=!1,T._seek=R,T._start=V,T._stop=b,T._loop=!!(T._loop||y._sprite[h][2])};if(R>=b){y._ended(T);return}var $=T._node;if(y._webAudio){var ee=function(){y._playLock=!1,U(),y._refreshBuffer(T);var j=T._muted||y._muted?0:T._volume;$.gain.setValueAtTime(j,t.ctx.currentTime),T._playStart=t.ctx.currentTime,typeof $.bufferSource.start>"u"?T._loop?$.bufferSource.noteGrainOn(0,R,86400):$.bufferSource.noteGrainOn(0,R,N):T._loop?$.bufferSource.start(0,R,86400):$.bufferSource.start(0,R,N),L!==1/0&&(y._endTimers[T._id]=setTimeout(y._ended.bind(y,T),L)),p||setTimeout(function(){y._emit("play",T._id),y._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?ee():(y._playLock=!0,y.once("resume",ee),y._clearTimer(T._id))}else{var Z=function(){$.currentTime=R,$.muted=T._muted||y._muted||t._muted||$.muted,$.volume=T._volume*t.volume(),$.playbackRate=T._rate;try{var j=$.play();if(j&&typeof Promise<"u"&&(j instanceof Promise||typeof j.then=="function")?(y._playLock=!0,U(),j.then(function(){y._playLock=!1,$._unlocked=!0,p?y._loadQueue():y._emit("play",T._id)}).catch(function(){y._playLock=!1,y._emit("playerror",T._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),T._ended=!0,T._paused=!0})):p||(y._playLock=!1,U(),y._emit("play",T._id)),$.playbackRate=T._rate,$.paused){y._emit("playerror",T._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}h!=="__default"||T._loop?y._endTimers[T._id]=setTimeout(y._ended.bind(y,T),L):(y._endTimers[T._id]=function(){y._ended(T),$.removeEventListener("ended",y._endTimers[T._id],!1)},$.addEventListener("ended",y._endTimers[T._id],!1))}catch(ce){y._emit("playerror",T._id,ce)}};$.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&($.src=y._src,$.load());var z=window&&window.ejecta||!$.readyState&&t._navigator.isCocoonJS;if($.readyState>=3||z)Z();else{y._playLock=!0,y._state="loading";var Y=function(){y._state="loaded",Z(),$.removeEventListener(t._canPlayEvent,Y,!1)};$.addEventListener(t._canPlayEvent,Y,!1),y._clearTimer(T._id)}}return T._id},pause:function(h){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"pause",action:function(){p.pause(h)}}),p;for(var y=p._getSoundIds(h),x=0;x<y.length;x++){p._clearTimer(y[x]);var w=p._soundById(y[x]);if(w&&!w._paused&&(w._seek=p.seek(y[x]),w._rateSeek=0,w._paused=!0,p._stopFade(y[x]),w._node))if(p._webAudio){if(!w._node.bufferSource)continue;typeof w._node.bufferSource.stop>"u"?w._node.bufferSource.noteOff(0):w._node.bufferSource.stop(0),p._cleanBuffer(w._node)}else(!isNaN(w._node.duration)||w._node.duration===1/0)&&w._node.pause();arguments[1]||p._emit("pause",w?w._id:null)}return p},stop:function(h,p){var y=this;if(y._state!=="loaded"||y._playLock)return y._queue.push({event:"stop",action:function(){y.stop(h)}}),y;for(var x=y._getSoundIds(h),w=0;w<x.length;w++){y._clearTimer(x[w]);var E=y._soundById(x[w]);E&&(E._seek=E._start||0,E._rateSeek=0,E._paused=!0,E._ended=!0,y._stopFade(x[w]),E._node&&(y._webAudio?E._node.bufferSource&&(typeof E._node.bufferSource.stop>"u"?E._node.bufferSource.noteOff(0):E._node.bufferSource.stop(0),y._cleanBuffer(E._node)):(!isNaN(E._node.duration)||E._node.duration===1/0)&&(E._node.currentTime=E._start||0,E._node.pause(),E._node.duration===1/0&&y._clearSound(E._node))),p||y._emit("stop",E._id))}return y},mute:function(h,p){var y=this;if(y._state!=="loaded"||y._playLock)return y._queue.push({event:"mute",action:function(){y.mute(h,p)}}),y;if(typeof p>"u")if(typeof h=="boolean")y._muted=h;else return y._muted;for(var x=y._getSoundIds(p),w=0;w<x.length;w++){var E=y._soundById(x[w]);E&&(E._muted=h,E._interval&&y._stopFade(E._id),y._webAudio&&E._node?E._node.gain.setValueAtTime(h?0:E._volume,t.ctx.currentTime):E._node&&(E._node.muted=t._muted?!0:h),y._emit("mute",E._id))}return y},volume:function(){var h=this,p=arguments,y,x;if(p.length===0)return h._volume;if(p.length===1||p.length===2&&typeof p[1]>"u"){var w=h._getSoundIds(),E=w.indexOf(p[0]);E>=0?x=parseInt(p[0],10):y=parseFloat(p[0])}else p.length>=2&&(y=parseFloat(p[0]),x=parseInt(p[1],10));var T;if(typeof y<"u"&&y>=0&&y<=1){if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"volume",action:function(){h.volume.apply(h,p)}}),h;typeof x>"u"&&(h._volume=y),x=h._getSoundIds(x);for(var k=0;k<x.length;k++)T=h._soundById(x[k]),T&&(T._volume=y,p[2]||h._stopFade(x[k]),h._webAudio&&T._node&&!T._muted?T._node.gain.setValueAtTime(y,t.ctx.currentTime):T._node&&!T._muted&&(T._node.volume=y*t.volume()),h._emit("volume",T._id))}else return T=x?h._soundById(x):h._sounds[0],T?T._volume:0;return h},fade:function(h,p,y,x){var w=this;if(w._state!=="loaded"||w._playLock)return w._queue.push({event:"fade",action:function(){w.fade(h,p,y,x)}}),w;h=Math.min(Math.max(0,parseFloat(h)),1),p=Math.min(Math.max(0,parseFloat(p)),1),y=parseFloat(y),w.volume(h,x);for(var E=w._getSoundIds(x),T=0;T<E.length;T++){var k=w._soundById(E[T]);if(k){if(x||w._stopFade(E[T]),w._webAudio&&!k._muted){var R=t.ctx.currentTime,N=R+y/1e3;k._volume=h,k._node.gain.setValueAtTime(h,R),k._node.gain.linearRampToValueAtTime(p,N)}w._startFadeInterval(k,h,p,y,E[T],typeof x>"u")}}return w},_startFadeInterval:function(h,p,y,x,w,E){var T=this,k=p,R=y-p,N=Math.abs(R/.01),L=Math.max(4,N>0?x/N:x),V=Date.now();h._fadeTo=y,h._interval=setInterval(function(){var b=(Date.now()-V)/x;V=Date.now(),k+=R*b,k=Math.round(k*100)/100,R<0?k=Math.max(y,k):k=Math.min(y,k),T._webAudio?h._volume=k:T.volume(k,h._id,!0),E&&(T._volume=k),(y<p&&k<=y||y>p&&k>=y)&&(clearInterval(h._interval),h._interval=null,h._fadeTo=null,T.volume(y,h._id),T._emit("fade",h._id))},L)},_stopFade:function(h){var p=this,y=p._soundById(h);return y&&y._interval&&(p._webAudio&&y._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(y._interval),y._interval=null,p.volume(y._fadeTo,h),y._fadeTo=null,p._emit("fade",h)),p},loop:function(){var h=this,p=arguments,y,x,w;if(p.length===0)return h._loop;if(p.length===1)if(typeof p[0]=="boolean")y=p[0],h._loop=y;else return w=h._soundById(parseInt(p[0],10)),w?w._loop:!1;else p.length===2&&(y=p[0],x=parseInt(p[1],10));for(var E=h._getSoundIds(x),T=0;T<E.length;T++)w=h._soundById(E[T]),w&&(w._loop=y,h._webAudio&&w._node&&w._node.bufferSource&&(w._node.bufferSource.loop=y,y&&(w._node.bufferSource.loopStart=w._start||0,w._node.bufferSource.loopEnd=w._stop,h.playing(E[T])&&(h.pause(E[T],!0),h.play(E[T],!0)))));return h},rate:function(){var h=this,p=arguments,y,x;if(p.length===0)x=h._sounds[0]._id;else if(p.length===1){var w=h._getSoundIds(),E=w.indexOf(p[0]);E>=0?x=parseInt(p[0],10):y=parseFloat(p[0])}else p.length===2&&(y=parseFloat(p[0]),x=parseInt(p[1],10));var T;if(typeof y=="number"){if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"rate",action:function(){h.rate.apply(h,p)}}),h;typeof x>"u"&&(h._rate=y),x=h._getSoundIds(x);for(var k=0;k<x.length;k++)if(T=h._soundById(x[k]),T){h.playing(x[k])&&(T._rateSeek=h.seek(x[k]),T._playStart=h._webAudio?t.ctx.currentTime:T._playStart),T._rate=y,h._webAudio&&T._node&&T._node.bufferSource?T._node.bufferSource.playbackRate.setValueAtTime(y,t.ctx.currentTime):T._node&&(T._node.playbackRate=y);var R=h.seek(x[k]),N=(h._sprite[T._sprite][0]+h._sprite[T._sprite][1])/1e3-R,L=N*1e3/Math.abs(T._rate);(h._endTimers[x[k]]||!T._paused)&&(h._clearTimer(x[k]),h._endTimers[x[k]]=setTimeout(h._ended.bind(h,T),L)),h._emit("rate",T._id)}}else return T=h._soundById(x),T?T._rate:h._rate;return h},seek:function(){var h=this,p=arguments,y,x;if(p.length===0)h._sounds.length&&(x=h._sounds[0]._id);else if(p.length===1){var w=h._getSoundIds(),E=w.indexOf(p[0]);E>=0?x=parseInt(p[0],10):h._sounds.length&&(x=h._sounds[0]._id,y=parseFloat(p[0]))}else p.length===2&&(y=parseFloat(p[0]),x=parseInt(p[1],10));if(typeof x>"u")return 0;if(typeof y=="number"&&(h._state!=="loaded"||h._playLock))return h._queue.push({event:"seek",action:function(){h.seek.apply(h,p)}}),h;var T=h._soundById(x);if(T)if(typeof y=="number"&&y>=0){var k=h.playing(x);k&&h.pause(x,!0),T._seek=y,T._ended=!1,h._clearTimer(x),!h._webAudio&&T._node&&!isNaN(T._node.duration)&&(T._node.currentTime=y);var R=function(){k&&h.play(x,!0),h._emit("seek",x)};if(k&&!h._webAudio){var N=function(){h._playLock?setTimeout(N,0):R()};setTimeout(N,0)}else R()}else if(h._webAudio){var L=h.playing(x)?t.ctx.currentTime-T._playStart:0,V=T._rateSeek?T._rateSeek-T._seek:0;return T._seek+(V+L*Math.abs(T._rate))}else return T._node.currentTime;return h},playing:function(h){var p=this;if(typeof h=="number"){var y=p._soundById(h);return y?!y._paused:!1}for(var x=0;x<p._sounds.length;x++)if(!p._sounds[x]._paused)return!0;return!1},duration:function(h){var p=this,y=p._duration,x=p._soundById(h);return x&&(y=p._sprite[x._sprite][1]/1e3),y},state:function(){return this._state},unload:function(){for(var h=this,p=h._sounds,y=0;y<p.length;y++)p[y]._paused||h.stop(p[y]._id),h._webAudio||(h._clearSound(p[y]._node),p[y]._node.removeEventListener("error",p[y]._errorFn,!1),p[y]._node.removeEventListener(t._canPlayEvent,p[y]._loadFn,!1),p[y]._node.removeEventListener("ended",p[y]._endFn,!1),t._releaseHtml5Audio(p[y]._node)),delete p[y]._node,h._clearTimer(p[y]._id);var x=t._howls.indexOf(h);x>=0&&t._howls.splice(x,1);var w=!0;for(y=0;y<t._howls.length;y++)if(t._howls[y]._src===h._src||h._src.indexOf(t._howls[y]._src)>=0){w=!1;break}return a&&w&&delete a[h._src],t.noAudio=!1,h._state="unloaded",h._sounds=[],h=null,null},on:function(h,p,y,x){var w=this,E=w["_on"+h];return typeof p=="function"&&E.push(x?{id:y,fn:p,once:x}:{id:y,fn:p}),w},off:function(h,p,y){var x=this,w=x["_on"+h],E=0;if(typeof p=="number"&&(y=p,p=null),p||y)for(E=0;E<w.length;E++){var T=y===w[E].id;if(p===w[E].fn&&T||!p&&T){w.splice(E,1);break}}else if(h)x["_on"+h]=[];else{var k=Object.keys(x);for(E=0;E<k.length;E++)k[E].indexOf("_on")===0&&Array.isArray(x[k[E]])&&(x[k[E]]=[])}return x},once:function(h,p,y){var x=this;return x.on(h,p,y,1),x},_emit:function(h,p,y){for(var x=this,w=x["_on"+h],E=w.length-1;E>=0;E--)(!w[E].id||w[E].id===p||h==="load")&&(setTimeout(function(T){T.call(this,p,y)}.bind(x,w[E].fn),0),w[E].once&&x.off(h,w[E].fn,w[E].id));return x._loadQueue(h),x},_loadQueue:function(h){var p=this;if(p._queue.length>0){var y=p._queue[0];y.event===h&&(p._queue.shift(),p._loadQueue()),h||y.action()}return p},_ended:function(h){var p=this,y=h._sprite;if(!p._webAudio&&h._node&&!h._node.paused&&!h._node.ended&&h._node.currentTime<h._stop)return setTimeout(p._ended.bind(p,h),100),p;var x=!!(h._loop||p._sprite[y][2]);if(p._emit("end",h._id),!p._webAudio&&x&&p.stop(h._id,!0).play(h._id),p._webAudio&&x){p._emit("play",h._id),h._seek=h._start||0,h._rateSeek=0,h._playStart=t.ctx.currentTime;var w=(h._stop-h._start)*1e3/Math.abs(h._rate);p._endTimers[h._id]=setTimeout(p._ended.bind(p,h),w)}return p._webAudio&&!x&&(h._paused=!0,h._ended=!0,h._seek=h._start||0,h._rateSeek=0,p._clearTimer(h._id),p._cleanBuffer(h._node),t._autoSuspend()),!p._webAudio&&!x&&p.stop(h._id,!0),p},_clearTimer:function(h){var p=this;if(p._endTimers[h]){if(typeof p._endTimers[h]!="function")clearTimeout(p._endTimers[h]);else{var y=p._soundById(h);y&&y._node&&y._node.removeEventListener("ended",p._endTimers[h],!1)}delete p._endTimers[h]}return p},_soundById:function(h){for(var p=this,y=0;y<p._sounds.length;y++)if(h===p._sounds[y]._id)return p._sounds[y];return null},_inactiveSound:function(){var h=this;h._drain();for(var p=0;p<h._sounds.length;p++)if(h._sounds[p]._ended)return h._sounds[p].reset();return new o(h)},_drain:function(){var h=this,p=h._pool,y=0,x=0;if(!(h._sounds.length<p)){for(x=0;x<h._sounds.length;x++)h._sounds[x]._ended&&y++;for(x=h._sounds.length-1;x>=0;x--){if(y<=p)return;h._sounds[x]._ended&&(h._webAudio&&h._sounds[x]._node&&h._sounds[x]._node.disconnect(0),h._sounds.splice(x,1),y--)}}},_getSoundIds:function(h){var p=this;if(typeof h>"u"){for(var y=[],x=0;x<p._sounds.length;x++)y.push(p._sounds[x]._id);return y}else return[h]},_refreshBuffer:function(h){var p=this;return h._node.bufferSource=t.ctx.createBufferSource(),h._node.bufferSource.buffer=a[p._src],h._panner?h._node.bufferSource.connect(h._panner):h._node.bufferSource.connect(h._node),h._node.bufferSource.loop=h._loop,h._loop&&(h._node.bufferSource.loopStart=h._start||0,h._node.bufferSource.loopEnd=h._stop||0),h._node.bufferSource.playbackRate.setValueAtTime(h._rate,t.ctx.currentTime),p},_cleanBuffer:function(h){var p=this,y=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!h.bufferSource)return p;if(t._scratchBuffer&&h.bufferSource&&(h.bufferSource.onended=null,h.bufferSource.disconnect(0),y))try{h.bufferSource.buffer=t._scratchBuffer}catch{}return h.bufferSource=null,p},_clearSound:function(h){var p=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);p||(h.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var o=function(h){this._parent=h,this.init()};o.prototype={init:function(){var h=this,p=h._parent;return h._muted=p._muted,h._loop=p._loop,h._volume=p._volume,h._rate=p._rate,h._seek=0,h._paused=!0,h._ended=!0,h._sprite="__default",h._id=++t._counter,p._sounds.push(h),h.create(),h},create:function(){var h=this,p=h._parent,y=t._muted||h._muted||h._parent._muted?0:h._volume;return p._webAudio?(h._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),h._node.gain.setValueAtTime(y,t.ctx.currentTime),h._node.paused=!0,h._node.connect(t.masterGain)):t.noAudio||(h._node=t._obtainHtml5Audio(),h._errorFn=h._errorListener.bind(h),h._node.addEventListener("error",h._errorFn,!1),h._loadFn=h._loadListener.bind(h),h._node.addEventListener(t._canPlayEvent,h._loadFn,!1),h._endFn=h._endListener.bind(h),h._node.addEventListener("ended",h._endFn,!1),h._node.src=p._src,h._node.preload=p._preload===!0?"auto":p._preload,h._node.volume=y*t.volume(),h._node.load()),h},reset:function(){var h=this,p=h._parent;return h._muted=p._muted,h._loop=p._loop,h._volume=p._volume,h._rate=p._rate,h._seek=0,h._rateSeek=0,h._paused=!0,h._ended=!0,h._sprite="__default",h._id=++t._counter,h},_errorListener:function(){var h=this;h._parent._emit("loaderror",h._id,h._node.error?h._node.error.code:0),h._node.removeEventListener("error",h._errorFn,!1)},_loadListener:function(){var h=this,p=h._parent;p._duration=Math.ceil(h._node.duration*10)/10,Object.keys(p._sprite).length===0&&(p._sprite={__default:[0,p._duration*1e3]}),p._state!=="loaded"&&(p._state="loaded",p._emit("load"),p._loadQueue()),h._node.removeEventListener(t._canPlayEvent,h._loadFn,!1)},_endListener:function(){var h=this,p=h._parent;p._duration===1/0&&(p._duration=Math.ceil(h._node.duration*10)/10,p._sprite.__default[1]===1/0&&(p._sprite.__default[1]=p._duration*1e3),p._ended(h)),h._node.removeEventListener("ended",h._endFn,!1)}};var a={},u=function(h){var p=h._src;if(a[p]){h._duration=a[p].duration,m(h);return}if(/^data:[^;]+;base64,/.test(p)){for(var y=atob(p.split(",")[1]),x=new Uint8Array(y.length),w=0;w<y.length;++w)x[w]=y.charCodeAt(w);f(x.buffer,h)}else{var E=new XMLHttpRequest;E.open(h._xhr.method,p,!0),E.withCredentials=h._xhr.withCredentials,E.responseType="arraybuffer",h._xhr.headers&&Object.keys(h._xhr.headers).forEach(function(T){E.setRequestHeader(T,h._xhr.headers[T])}),E.onload=function(){var T=(E.status+"")[0];if(T!=="0"&&T!=="2"&&T!=="3"){h._emit("loaderror",null,"Failed loading audio file with status: "+E.status+".");return}f(E.response,h)},E.onerror=function(){h._webAudio&&(h._html5=!0,h._webAudio=!1,h._sounds=[],delete a[p],h.load())},c(E)}},c=function(h){try{h.send()}catch{h.onerror()}},f=function(h,p){var y=function(){p._emit("loaderror",null,"Decoding audio data failed.")},x=function(w){w&&p._sounds.length>0?(a[p._src]=w,m(p,w)):y()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(h).then(x).catch(y):t.ctx.decodeAudioData(h,x,y)},m=function(h,p){p&&!h._duration&&(h._duration=p.duration),Object.keys(h._sprite).length===0&&(h._sprite={__default:[0,h._duration*1e3]}),h._state!=="loaded"&&(h._state="loaded",h._emit("load"),h._loadQueue())},v=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var h=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),p=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),y=p?parseInt(p[1],10):null;if(h&&y&&y<9){var x=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!x&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};i.Howler=t,i.Howl=r,typeof hn<"u"?(hn.HowlerGlobal=e,hn.Howler=t,hn.Howl=r,hn.Sound=o):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=r,window.Sound=o)})();(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var o=r._howls.length-1;o>=0;o--)r._howls[o].stereo(t);return r},HowlerGlobal.prototype.pos=function(t,r,o){var a=this;if(!a.ctx||!a.ctx.listener)return a;if(r=typeof r!="number"?a._pos[1]:r,o=typeof o!="number"?a._pos[2]:o,typeof t=="number")a._pos=[t,r,o],typeof a.ctx.listener.positionX<"u"?(a.ctx.listener.positionX.setTargetAtTime(a._pos[0],Howler.ctx.currentTime,.1),a.ctx.listener.positionY.setTargetAtTime(a._pos[1],Howler.ctx.currentTime,.1),a.ctx.listener.positionZ.setTargetAtTime(a._pos[2],Howler.ctx.currentTime,.1)):a.ctx.listener.setPosition(a._pos[0],a._pos[1],a._pos[2]);else return a._pos;return a},HowlerGlobal.prototype.orientation=function(t,r,o,a,u,c){var f=this;if(!f.ctx||!f.ctx.listener)return f;var m=f._orientation;if(r=typeof r!="number"?m[1]:r,o=typeof o!="number"?m[2]:o,a=typeof a!="number"?m[3]:a,u=typeof u!="number"?m[4]:u,c=typeof c!="number"?m[5]:c,typeof t=="number")f._orientation=[t,r,o,a,u,c],typeof f.ctx.listener.forwardX<"u"?(f.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),f.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),f.ctx.listener.forwardZ.setTargetAtTime(o,Howler.ctx.currentTime,.1),f.ctx.listener.upX.setTargetAtTime(a,Howler.ctx.currentTime,.1),f.ctx.listener.upY.setTargetAtTime(u,Howler.ctx.currentTime,.1),f.ctx.listener.upZ.setTargetAtTime(c,Howler.ctx.currentTime,.1)):f.ctx.listener.setOrientation(t,r,o,a,u,c);else return m;return f},Howl.prototype.init=(function(t){return function(r){var o=this;return o._orientation=r.orientation||[1,0,0],o._stereo=r.stereo||null,o._pos=r.pos||null,o._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},o._onstereo=r.onstereo?[{fn:r.onstereo}]:[],o._onpos=r.onpos?[{fn:r.onpos}]:[],o._onorientation=r.onorientation?[{fn:r.onorientation}]:[],t.call(this,r)}})(Howl.prototype.init),Howl.prototype.stereo=function(t,r){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"stereo",action:function(){o.stereo(t,r)}}),o;var a=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof t=="number")o._stereo=t,o._pos=[t,0,0];else return o._stereo;for(var u=o._getSoundIds(r),c=0;c<u.length;c++){var f=o._soundById(u[c]);if(f)if(typeof t=="number")f._stereo=t,f._pos=[t,0,0],f._node&&(f._pannerAttr.panningModel="equalpower",(!f._panner||!f._panner.pan)&&e(f,a),a==="spatial"?typeof f._panner.positionX<"u"?(f._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),f._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),f._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):f._panner.setPosition(t,0,0):f._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),o._emit("stereo",f._id);else return f._stereo}return o},Howl.prototype.pos=function(t,r,o,a){var u=this;if(!u._webAudio)return u;if(u._state!=="loaded")return u._queue.push({event:"pos",action:function(){u.pos(t,r,o,a)}}),u;if(r=typeof r!="number"?0:r,o=typeof o!="number"?-.5:o,typeof a>"u")if(typeof t=="number")u._pos=[t,r,o];else return u._pos;for(var c=u._getSoundIds(a),f=0;f<c.length;f++){var m=u._soundById(c[f]);if(m)if(typeof t=="number")m._pos=[t,r,o],m._node&&((!m._panner||m._panner.pan)&&e(m,"spatial"),typeof m._panner.positionX<"u"?(m._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),m._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),m._panner.positionZ.setValueAtTime(o,Howler.ctx.currentTime)):m._panner.setPosition(t,r,o)),u._emit("pos",m._id);else return m._pos}return u},Howl.prototype.orientation=function(t,r,o,a){var u=this;if(!u._webAudio)return u;if(u._state!=="loaded")return u._queue.push({event:"orientation",action:function(){u.orientation(t,r,o,a)}}),u;if(r=typeof r!="number"?u._orientation[1]:r,o=typeof o!="number"?u._orientation[2]:o,typeof a>"u")if(typeof t=="number")u._orientation=[t,r,o];else return u._orientation;for(var c=u._getSoundIds(a),f=0;f<c.length;f++){var m=u._soundById(c[f]);if(m)if(typeof t=="number")m._orientation=[t,r,o],m._node&&(m._panner||(m._pos||(m._pos=u._pos||[0,0,-.5]),e(m,"spatial")),typeof m._panner.orientationX<"u"?(m._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),m._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),m._panner.orientationZ.setValueAtTime(o,Howler.ctx.currentTime)):m._panner.setOrientation(t,r,o)),u._emit("orientation",m._id);else return m._orientation}return u},Howl.prototype.pannerAttr=function(){var t=this,r=arguments,o,a,u;if(!t._webAudio)return t;if(r.length===0)return t._pannerAttr;if(r.length===1)if(typeof r[0]=="object")o=r[0],typeof a>"u"&&(o.pannerAttr||(o.pannerAttr={coneInnerAngle:o.coneInnerAngle,coneOuterAngle:o.coneOuterAngle,coneOuterGain:o.coneOuterGain,distanceModel:o.distanceModel,maxDistance:o.maxDistance,refDistance:o.refDistance,rolloffFactor:o.rolloffFactor,panningModel:o.panningModel}),t._pannerAttr={coneInnerAngle:typeof o.pannerAttr.coneInnerAngle<"u"?o.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof o.pannerAttr.coneOuterAngle<"u"?o.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof o.pannerAttr.coneOuterGain<"u"?o.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof o.pannerAttr.distanceModel<"u"?o.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof o.pannerAttr.maxDistance<"u"?o.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof o.pannerAttr.refDistance<"u"?o.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof o.pannerAttr.rolloffFactor<"u"?o.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof o.pannerAttr.panningModel<"u"?o.pannerAttr.panningModel:t._panningModel});else return u=t._soundById(parseInt(r[0],10)),u?u._pannerAttr:t._pannerAttr;else r.length===2&&(o=r[0],a=parseInt(r[1],10));for(var c=t._getSoundIds(a),f=0;f<c.length;f++)if(u=t._soundById(c[f]),u){var m=u._pannerAttr;m={coneInnerAngle:typeof o.coneInnerAngle<"u"?o.coneInnerAngle:m.coneInnerAngle,coneOuterAngle:typeof o.coneOuterAngle<"u"?o.coneOuterAngle:m.coneOuterAngle,coneOuterGain:typeof o.coneOuterGain<"u"?o.coneOuterGain:m.coneOuterGain,distanceModel:typeof o.distanceModel<"u"?o.distanceModel:m.distanceModel,maxDistance:typeof o.maxDistance<"u"?o.maxDistance:m.maxDistance,refDistance:typeof o.refDistance<"u"?o.refDistance:m.refDistance,rolloffFactor:typeof o.rolloffFactor<"u"?o.rolloffFactor:m.rolloffFactor,panningModel:typeof o.panningModel<"u"?o.panningModel:m.panningModel};var v=u._panner;v||(u._pos||(u._pos=t._pos||[0,0,-.5]),e(u,"spatial"),v=u._panner),v.coneInnerAngle=m.coneInnerAngle,v.coneOuterAngle=m.coneOuterAngle,v.coneOuterGain=m.coneOuterGain,v.distanceModel=m.distanceModel,v.maxDistance=m.maxDistance,v.refDistance=m.refDistance,v.rolloffFactor=m.rolloffFactor,v.panningModel=m.panningModel}return t},Sound.prototype.init=(function(t){return function(){var r=this,o=r._parent;r._orientation=o._orientation,r._stereo=o._stereo,r._pos=o._pos,r._pannerAttr=o._pannerAttr,t.call(this),r._stereo?o.stereo(r._stereo):r._pos&&o.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}})(Sound.prototype.init),Sound.prototype.reset=(function(t){return function(){var r=this,o=r._parent;return r._orientation=o._orientation,r._stereo=o._stereo,r._pos=o._pos,r._pannerAttr=o._pannerAttr,r._stereo?o.stereo(r._stereo):r._pos?o.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,o._refreshBuffer(r)),t.call(this)}})(Sound.prototype.reset);var e=function(t,r){r=r||"spatial",r==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()})(od)),od}var KS=qS();class zl{static instance;sounds=new Map;stateAssets=new Map;volumes={master:1,ost:.7,sfx:1};constructor(){const e=Bt.getInstance();this.volumes.master=e.get("master_volume",1)??1,this.volumes.ost=e.get("ost_volume",.7)??.7,this.volumes.sfx=e.get("sfx_volume",1)??1}static getInstance(){return this.instance||(this.instance=new zl),this.instance}async loadManifest(e,t){const o=await(await fetch(e)).json();if(!o.audio)return;this.stateAssets.has(t)||this.stateAssets.set(t,new Set);const a=this.stateAssets.get(t);Object.entries(o.audio).forEach(([u,c])=>{if(this.sounds.has(u))return;const f=new KS.Howl({src:[c.url],loop:c.loop||!1,volume:c.volume*this.volumes[c.type]*this.volumes.master,html5:c.type==="ost"});this.sounds.set(u,{howl:f,type:c.type,baseVol:c.volume||1}),a.add(u)})}play(e){const t=this.sounds.get(e);t&&t.howl.play()}stop(e){this.sounds.get(e)?.howl.stop()}stopAllByState(e){const t=this.stateAssets.get(e);t&&t.forEach(r=>this.sounds.get(r)?.howl.stop())}uncacheByState(e){const t=this.stateAssets.get(e);t&&(t.forEach(r=>{const o=this.sounds.get(r);o&&(o.howl.stop(),o.howl.unload(),this.sounds.delete(r))}),this.stateAssets.delete(e))}setVolume(e,t){this.volumes[e]=t,Bt.getInstance().set(`settings_${e}_vol`,t),this.sounds.forEach(r=>{const o=r.type==="ost"?this.volumes.ost:this.volumes.sfx;r.howl.volume(r.baseVol*o*this.volumes.master)})}getVolumes(){return{...this.volumes}}}class QS extends Mx{constructor(e,t){super(),this.targetState=e,this.config=t,this.isRendering=!0}name="LoadingState";isTargetReady=!1;async init(){this.config.manifestPath&&await Promise.all([Hl.getInstance().loadManifest(this.config.manifestPath,this.name),zl.getInstance().loadManifest(this.config.manifestPath,this.name)]),this.startTargetInit()}async startTargetInit(){try{await this.targetState.init(),this.isTargetReady=!0,Zt.getInstance().notify()}catch(e){console.error("Failed to load target state:",e)}}update(e,t){}getView(){const e=this.config.view||kx;return Yy.createElement(e,{key:"loading-view",...this.config.props,isFinished:this.isTargetReady,onTransitionComplete:()=>this.finishLoading()})}finishLoading(){Zt.getInstance().replace(this.targetState)}destroy(){Hl.getInstance().uncacheByState(this.name),zl.getInstance().uncacheByState(this.name)}}class Zt{static instance;stack=[];listeners=[];constructor(){}static getInstance(){return Zt.instance||(Zt.instance=new Zt),Zt.instance}async push(e,t=!0){t&&this.stack.length>0&&(this.stack[this.stack.length-1].isUpdating=!1,this.stack[this.stack.length-1].isRendering=!0),await e.init(),this.stack.push(e),this.notify()}pop(){if(this.stack.length<=1)return;const e=this.stack.pop();e&&e.destroy(),this.stack.length>0&&(this.stack[this.stack.length-1].isUpdating=!0,this.stack[this.stack.length-1].isRendering=!0),this.notify()}async replace(e,t){this.stack.forEach(a=>a.destroy()),this.stack=[],this.notify();const r=await Promise.resolve(e),o=t?new QS(r,t):r;await o.init(),this.stack.push(o),this.notify(),jn.getInstance().start()}updateAll(e,t){this.stack.forEach(r=>{r.isUpdating&&r.update(e,t)})}getActiveUpdateStates(){return this.stack.filter(e=>e.isUpdating)}getCurrentStateName(){return this.stack.length>0?this.stack[this.stack.length-1].name:null}subscribe(e){return this.listeners.push(e),this.notify(),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}getUnderlyingStateName(){if(this.stack.length===0)return null;for(let e=this.stack.length-1;e>=0;e--){const t=this.stack[e];if(t.name!=="PauseMenu"&&t.name!=="SaveMenu"&&t.name!=="SettingsMenu")return t.name}return this.stack[0].name}getActiveState(){return this.stack.length>0?this.stack[this.stack.length-1]:null}notify(){const e=this.stack.filter(t=>t.isRendering).map(t=>t.getView());this.listeners.forEach(t=>t(e))}}const ZS=()=>{const i=at.useRef(null),e=jn.getInstance(),t=Zt.getInstance(),r=at.useRef(0),o=at.useRef([]),a=at.useRef(new Set);return at.useEffect(()=>{const u=v=>a.current.add(v.key.toUpperCase()),c=v=>a.current.delete(v.key.toUpperCase());window.addEventListener("keydown",u),window.addEventListener("keyup",c);let f;const m=()=>{if(i.current){const v=e.fps||0,h=e.frameCount||0,p=t.stack||[];if(p.length!==r.current){const E=new Date().toLocaleTimeString().split(" ")[0],T=p.length>r.current?"PUSH":"POP",k=p[p.length-1]?.name||"NULL";o.current.unshift(`[${E}] ${T}: ${k}`),o.current.length>3&&o.current.pop(),r.current=p.length}const y=p.map((E,T)=>`${T===p.length-1?" ACTIVE >":"        -"} [${T}] ${E.name}`).reverse().join(`
`),x=Array.from(a.current),w=x.length>0?x.join(" | "):"IDLE";i.current.innerText=`// ENGINE_STATS
FPS:    ${v}
FRAME:  ${h}

// STATE_STACK
${y||"EMPTY"}

// INPUT_MONITOR
KEYS:   ${w}

// RECENT_TRANSITIONS
${o.current.join(`
`)||"NONE"}`}f=requestAnimationFrame(m)};return f=requestAnimationFrame(m),()=>{cancelAnimationFrame(f),window.removeEventListener("keydown",u),window.removeEventListener("keyup",c)}},[e,t]),ct.jsx("div",{ref:i,style:{position:"absolute",top:"1cqw",right:"1cqw",color:"#0f0",fontFamily:"monospace",whiteSpace:"pre",textAlign:"left",fontSize:"0.95cqw",lineHeight:"1.4",textShadow:"0 0 5px rgba(0, 255, 0, 0.5)",backgroundColor:"rgba(5, 5, 5, 0.9)",padding:"1.2cqw",borderRadius:"0.2cqw",pointerEvents:"none",zIndex:9999,borderLeft:"3px solid #0f0",minWidth:"22cqw",boxShadow:"0 10px 30px rgba(0,0,0,0.8)",letterSpacing:"0.05cqw"}})};class Ii{static states=new Map;static register(e){this.states.set(e.id,e)}static get(e){return this.states.get(e)}static async create(e,t={},r){const o=this.get(e);if(!o)throw new Error(`StateRegistry: ID "${e}" not found.`);let a={...t};if(r){const c=o.presets?.find(f=>f.label===r);c?a={...c.params,...a}:console.warn(`StateRegistry: Preset "${r}" not found for ID "${e}". Falling back to raw params.`)}const u=await o.loader();return new u(a)}static getAllGames(){return Array.from(this.states.values()).filter(e=>e.type==="GAME")}}const JS="modulepreload",eA=function(i){return"/LuckyRepo/"+i},Vy={},or=function(e,t,r){let o=Promise.resolve();if(t&&t.length>0){let f=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=u?.nonce||u?.getAttribute("nonce");o=f(t.map(m=>{if(m=eA(m),m in Vy)return;Vy[m]=!0;const v=m.endsWith(".css"),h=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${h}`))return;const p=document.createElement("link");if(p.rel=v?"stylesheet":JS,v||(p.as="script"),p.crossOrigin="",p.href=m,c&&p.setAttribute("nonce",c),document.head.appendChild(p),v)return new Promise((y,x)=>{p.addEventListener("load",y),p.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return o.then(u=>{for(const c of u||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})};var $e=(i=>(i.GAME_1="Game1",i.GAME_2="Game2",i.GAME_3="Game3",i.BH_GAME="BHGame",i.DEV_MENU="DevMenu",i.PAUSE_MENU="PauseMenu",i.SAVE_MENU="SaveMenu",i.SETTINGS_MENU="SettingsMenu",i.CONTINUE="ContinueScreen",i.GAME_OVER="GameOverScreen",i.MAIN_MENU="MainMenu",i.CINEMATIC="Cinematic",i))($e||{});const $y={"Level 1":{width:960,height:540,initialHP:100,spawnCount:10,heroStartX:480,heroStartY:270,moveSpeed:5,manifestPath:"res/manifest.json",bgmKey:"bgm_level1",levelLabel:"Level 1"},"Level 2":{width:960,height:540,initialHP:80,spawnCount:20,heroStartX:100,heroStartY:100,moveSpeed:6,manifestPath:"res/manifest.json",bgmKey:"bgm_level1",levelLabel:"Level 2"},"Level 3":{width:960,height:540,initialHP:50,spawnCount:35,heroStartX:800,heroStartY:450,moveSpeed:8,manifestPath:"res/manifest.json",bgmKey:"bgm_level1",levelLabel:"Level 3"}};var Al=(i=>(i.Level1="Level 1",i.Level2="Level 2",i.Level3="Level 3",i))(Al||{});const xA=i=>{const e=$y[i];return e||(console.warn(`Config for ${i} not found, falling back to Level 1`),$y["Level 1"])},tA={id:$e.GAME_1,displayName:"Operation: Descent",type:"GAME",loader:()=>or(()=>import("./Game1State-DsDAw-Cb.js"),__vite__mapDeps([0,1,2,3])).then(i=>i.Game1State),presets:[{label:"LVL 1",params:{level:Al.Level1}},{label:"LVL 2",params:{level:Al.Level2}},{label:"LVL 3",params:{level:Al.Level3}}]},Wy={"Level 1":{initialHP:100,initialEnergy:50,initialScrap:0,maxEnergy:100,regenRate:60,manifestPath:"res/manifest.json",bgmKey:"bgm_level1"},"Level 2":{initialHP:80,initialEnergy:30,initialScrap:40,maxEnergy:80,regenRate:90,manifestPath:"res/manifest.json",bgmKey:"bgm_level1"},"Level 3":{initialHP:50,initialEnergy:10,initialScrap:10,maxEnergy:50,regenRate:120,manifestPath:"res/manifest.json",bgmKey:"bgm_level1"}};var bl=(i=>(i.Level1="Level 1",i.Level2="Level 2",i.Level3="Level 3",i))(bl||{});const wA=i=>Wy[i]||Wy["Level 1"],rA={id:$e.GAME_2,displayName:"Supply Run",type:"GAME",loader:()=>or(()=>import("./Game2State-FmdBOEbH.js"),__vite__mapDeps([4,1,2])).then(i=>i.Game2State),presets:[{label:"LVL 1",params:{level:bl.Level1}},{label:"LVL 2",params:{level:bl.Level2}},{label:"LVL 3",params:{level:bl.Level3}}]},nA={id:$e.DEV_MENU,displayName:"Switchboard",type:"MENU",loader:()=>or(()=>import("./DevMenuState-BCxfJw8m.js"),__vite__mapDeps([5,6])).then(i=>i.DevMenuState)},iA={id:$e.MAIN_MENU,displayName:"MAIN_MENU",type:"MENU",loader:()=>or(()=>import("./MainMenuState-D-RWstby.js"),__vite__mapDeps([7,6])).then(i=>i.MainMenuState)},sA=[{id:$e.PAUSE_MENU,displayName:"Paused",type:"MENU",loader:()=>or(()=>import("./PauseMenuState-BmMaqnSh.js"),__vite__mapDeps([8,9,6])).then(i=>i.PauseMenuState)},{id:$e.SAVE_MENU,displayName:"Storage",type:"MENU",loader:()=>or(()=>import("./SaveMenuState-GJyh1nQE.js"),__vite__mapDeps([10,9,6,2])).then(i=>i.SaveMenuState)},{id:$e.SETTINGS_MENU,displayName:"System Config",type:"MENU",loader:()=>or(()=>import("./SettingsMenuState-COFxkG6g.js"),__vite__mapDeps([11,9,6])).then(i=>i.SettingsMenuState)},{id:$e.CONTINUE,displayName:"Continue",type:"UTILITY",loader:()=>or(()=>import("./ContinueState-eoc8hQF-.js"),[]).then(i=>i.ContinueState)},{id:$e.GAME_OVER,displayName:"Game Over",type:"UTILITY",loader:()=>or(()=>import("./GameOverState-OnCih_Xy.js"),[]).then(i=>i.GameOverState)}],jy={"Level 1":{width:960,height:540,initialHP:100,spawnCount:10,heroStartX:480,heroStartY:270,moveSpeed:5,manifestPath:"res/manifest.json",bgmKey:"bgm_level1",levelLabel:"Level 1"},"Level 2":{width:960,height:540,initialHP:80,spawnCount:20,heroStartX:100,heroStartY:100,moveSpeed:6,manifestPath:"res/manifest.json",bgmKey:"bgm_level1",levelLabel:"Level 2"},"Level 3":{width:960,height:540,initialHP:50,spawnCount:35,heroStartX:800,heroStartY:450,moveSpeed:8,manifestPath:"res/manifest.json",bgmKey:"bgm_level1",levelLabel:"Level 3"},"Level 4":{width:960,height:540,initialHP:100,spawnCount:0,heroStartX:480,heroStartY:450,moveSpeed:5,manifestPath:"res/manifest.json",bgmKey:"bgm_boss",levelLabel:"Level 4"}};var Mo=(i=>(i.Level1="Level 1",i.Level2="Level 2",i.Level3="Level 3",i.Level4="Level 4",i))(Mo||{});const EA=i=>{const e=jy[i];return e||(console.warn(`Config for ${i} not found, falling back to Level 1`),jy["Level 1"])},oA={id:$e.BH_GAME,displayName:"Operation: Descent",type:"GAME",loader:()=>or(()=>import("./BHState-DoiKewee.js"),__vite__mapDeps([12,1,2,3])).then(i=>i.BHState),presets:[{label:"LVL 1",params:{level:Mo.Level1}},{label:"LVL 2",params:{level:Mo.Level2}},{label:"LVL 3",params:{level:Mo.Level3}},{label:"LVL 4",params:{level:Mo.Level4}}]},Xy={"Level 1":{initialHP:100,manifestPath:"res/three_manifest.json",bgmKey:"bgm_level1",mapPath:"res/sprite/maps/MapTest.png",mapScale:1,heroWidth:1,heroHeight:1,playerScale:1,playerOffsetY:0,worldScale:16},"Level 2":{initialHP:100,manifestPath:"res/three_manifest.json",bgmKey:"bgm_level1",mapPath:"res/sprite/maps/MapTest2(updated).png",mapScale:1,heroWidth:1,heroHeight:1,playerScale:1,playerOffsetY:0,worldScale:16},"Level 3":{initialHP:100,manifestPath:"res/three_manifest.json",bgmKey:"bgm_level1",mapPath:"res/sprite/maps/MapTest3.png",mapScale:1,heroWidth:1,heroHeight:1,playerScale:1,playerOffsetY:0,worldScale:16},"Level 4":{initialHP:100,manifestPath:"res/three_manifest.json",bgmKey:"bgm_level1",mapPath:"res/sprite/maps/MapTest4.png",mapScale:1,heroWidth:1,heroHeight:1,playerScale:1,playerOffsetY:0,worldScale:16},"Level 5":{initialHP:100,manifestPath:"res/three_manifest.json",bgmKey:"bgm_level1",mapPath:"res/sprite/maps/MapTest5.png",mapScale:1,heroWidth:1,heroHeight:1,playerScale:1,playerOffsetY:0,worldScale:16}};var gs=(i=>(i.Level1="Level 1",i.Level2="Level 2",i.Level3="Level 3",i.Level4="Level 4",i.Level5="Level 5",i))(gs||{});const TA=i=>{const e=Xy[i];return e||(console.warn(`[Game3Config] No config for "${i}", falling back to Level 1`),Xy["Level 1"])},aA={id:$e.GAME_3,displayName:"G3 Code Run",type:"GAME",loader:()=>or(()=>import("./Game3State-CRsnG8el.js"),__vite__mapDeps([13,1,2,3])).then(i=>i.Game3State),presets:[{label:"LVL 1",params:{level:gs.Level1}},{label:"LVL 2",params:{level:gs.Level2}},{label:"LVL 3",params:{level:gs.Level3}},{label:"LVL 4",params:{level:gs.Level4}},{label:"LVL 5",params:{level:gs.Level5}}]},lA={id:$e.CINEMATIC,displayName:"Cinematic",type:"MENU",loader:()=>or(()=>import("./CinematicState-D8sSohbz.js"),__vite__mapDeps([14,6,3])).then(i=>i.CinematicState)},uA=[tA,rA,aA,oA,iA,lA,nA,...sA],hA=()=>{uA.forEach(i=>Ii.register(i))};class qn{static campaigns=new Map;static register(e){this.campaigns.set(e.id,e)}static get(e){return this.campaigns.get(e)}static getAll(){return Array.from(this.campaigns.values())}}const bs=({isFinished:i,onTransitionComplete:e})=>{const[t,r]=at.useState(1),[o,a]=at.useState("");return at.useEffect(()=>{if(i)return;const u=setInterval(()=>{a(c=>c.length>=3?"":c+".")},400);return()=>clearInterval(u)},[i]),at.useEffect(()=>{if(i){const u=setTimeout(()=>{r(0)},600);return()=>clearTimeout(u)}},[i]),at.useEffect(()=>{if(t===0){const u=setTimeout(e,500);return()=>clearTimeout(u)}},[t,e]),ct.jsx("div",{style:{position:"absolute",inset:0,background:"#000",display:"flex",alignItems:"center",justifyContent:"center"},children:ct.jsx("div",{style:{width:"100%",height:"100%",maxWidth:"calc(100vh * (16 / 9))",maxHeight:"calc(100vw * (9 / 16))",aspectRatio:"16 / 9",backgroundColor:"#000",opacity:t,transition:"opacity 0.5s ease-in-out",display:"flex",alignItems:"center",justifyContent:"center",color:"#00ff00",fontFamily:"monospace",textTransform:"uppercase"},children:ct.jsx("div",{style:{fontSize:"1.5cqw",letterSpacing:"0.2cqw",textAlign:"center"},children:i?ct.jsx("span",{style:{color:"#fff"},children:"Loaded"}):ct.jsxs("span",{children:["Loading",o]})})})})},vs=({message:i,isFinished:e,onTransitionComplete:t})=>ct.jsxs("div",{style:{width:"100%",height:"100%",background:"#111",color:"#ccc",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:"monospace",padding:"20px",boxSizing:"border-box"},children:[ct.jsx("h1",{style:{color:"#e74c3c",letterSpacing:"4px",marginBottom:"30px"},children:"MISSION BRIEFING"}),ct.jsx("div",{style:{maxWidth:"600px",textAlign:"center",lineHeight:"1.8",fontSize:"1.2rem",borderLeft:"2px solid #e74c3c",paddingLeft:"20px"},children:i}),ct.jsx("div",{style:{marginTop:"40px",height:"50px"},children:e?ct.jsx("button",{onClick:t,style:{padding:"12px 40px",background:"#e74c3c",border:"none",color:"white",cursor:"pointer",fontWeight:"bold",fontSize:"1rem",boxShadow:"0 0 15px rgba(231, 76, 60, 0.4)"},children:"DEPLOY UNIT"}):ct.jsx("div",{style:{color:"#666",fontStyle:"italic"},children:"ESTABLISHING UPLINK..."})})]}),cA=[{name:"Prologue: The Awakening",stateId:$e.GAME_1,presetLabel:"LVL 1",loadingConfig:{view:vs,props:{message:"System initializing. Hostiles detected in Sector 7. Engage immediately."}},failFactory:()=>Ii.create($e.GAME_OVER)},{name:"Chapter 1: The Descent",stateId:$e.GAME_1,presetLabel:"LVL 2",loadingConfig:{view:vs,props:{message:"Surface cleared. Descending into the sub-levels. Energy signatures rising."}}},{name:"Intermission: Resupply",stateId:$e.GAME_2,presetLabel:"LVL 1",loadingConfig:{view:bs,props:{message:"Returning to Base..."}}}],dA=[{name:"Stage 1",stateId:$e.GAME_2,presetLabel:"LVL 1",loadingConfig:{view:bs,props:{message:"Arcade Mode: Stage 1"}}},{name:"Stage 2",stateId:$e.GAME_1,presetLabel:"LVL 3",loadingConfig:{view:bs,props:{message:"Arcade Mode: Stage 2"}}}],fA=[{name:"Floor 1: The Gatehouse",stateId:$e.BH_GAME,presetLabel:"LVL 1",loadingConfig:{view:vs,props:{message:"The tower doors creak open. Creatures stir in the darkness beyond the threshold."}}},{name:"The Outer Wall",stateId:$e.GAME_3,presetLabel:"LVL 1",loadingConfig:{view:bs,props:{message:"You slip through a window onto the crumbling ramparts. The only way forward is up."}}},{name:"Floor 2: The Armory",stateId:$e.BH_GAME,presetLabel:"LVL 2",loadingConfig:{view:vs,props:{message:"Rusted blades line the walls. The tower's guardians grow fiercer the higher you climb."}}},{name:"The Bell Tower Ascent",stateId:$e.GAME_3,presetLabel:"LVL 2",loadingConfig:{view:bs,props:{message:"Wind howls through broken stone. Ancient chains and beams offer treacherous footing."}}},{name:"Floor 3: The Sanctum",stateId:$e.BH_GAME,presetLabel:"LVL 3",loadingConfig:{view:vs,props:{message:"The air hums with old magic. Whatever rules this tower awaits in the chamber above."}}},{name:"The Summit",stateId:$e.GAME_3,presetLabel:"LVL 3",loadingConfig:{view:bs,props:{message:"Moonlight breaks through the clouds. One final climb to the peak  or a long fall down."}}},{name:"The Core: Final Confrontation",stateId:$e.BH_GAME,presetLabel:"LVL 4",loadingConfig:{view:vs,props:{message:"The tower's true master waits at the very peak. Steel your resolve for the final wave."}}}],pA=[{name:"Intro Splash",stateId:$e.CINEMATIC,params:{imageName:"lucky_group",manifestPath:"res/cinematic_manifest.json"}},{name:"Main Menu",stateId:$e.MAIN_MENU}],mA=()=>{qn.register({id:"story_mode",steps:cA,failFactory:()=>Ii.create($e.CONTINUE)}),qn.register({id:"arcade_mode",steps:dA,failFactory:()=>Ii.create($e.GAME_OVER)}),qn.register({id:"cross_game",steps:fA,failFactory:()=>Ii.create($e.CONTINUE)}),qn.register({id:"main_menu",steps:pA})};class _s{static instance;constructor(){}static getInstance(){return _s.instance||(_s.instance=new _s),_s.instance}startCampaign(e){const t=qn.get(e);if(!t){console.error(`[CampaignManager] Could not find campaign: ${e}`);return}console.log(`[CampaignManager] Starting Campaign: ${e}`);const r=Bt.getInstance();r.clearSavableKeys(),r.set("campaign_id",e),r.set("campaign_step_index",0),this.loadCurrentStep(t,0)}completeCurrentStep(){const e=Bt.getInstance(),t=e.get("campaign_id");let r=e.get("campaign_step_index");if(!t||r===void 0){this.quitCampaign();return}const o=qn.get(t);o&&(r++,e.set("campaign_step_index",r),r>=o.steps.length?this.quitCampaign():this.loadCurrentStep(o,r))}retryCurrentStep(){const e=Bt.getInstance(),t=e.get("campaign_id"),r=e.get("campaign_step_index");if(!t||r===void 0)return;const o=qn.get(t);o&&(console.log(`[CampaignManager] Retrying step ${r}`),e.clearSavableKeys(),e.set("campaign_id",t),e.set("campaign_step_index",r),this.loadCurrentStep(o,r))}failCurrentStep(e){const t=Bt.getInstance(),r=t.get("campaign_id"),o=t.get("campaign_step_index");if(!r){console.error("No active campaign to fail."),this.quitCampaign();return}const a=qn.get(r),c=a?.steps[o??-1]?.failFactory||a?.failFactory;if(c){console.log("[CampaignManager] Campaign Failed. Loading Fail State.");const f=c(e);Zt.getInstance().replace(f)}else console.warn("No failFactory defined for this campaign. Quitting."),this.quitCampaign()}quitCampaign(){const e=Bt.getInstance();e.clearSavableKeys(),e.set("campaign_id",null),e.set("campaign_step_index",0),console.log("[CampaignManager] Quitting to Menu."),Zt.getInstance().replace(Ii.create($e.DEV_MENU))}async loadCurrentStep(e,t){const r=e.steps[t];console.log(`[CampaignManager] Loading Step ${t}: ${r.name}`);const o=await Ii.create(r.stateId,r.params||{},r.presetLabel);Zt.getInstance().replace(o,r.loadingConfig)}}const gA=()=>{const[i,e]=at.useState([]),[t,r]=at.useState(!1),[o,a]=at.useState("fit"),[u,c]=at.useState(1),[f,m]=at.useState(window.devicePixelRatio||1),v=at.useRef(!1);at.useEffect(()=>{const p=Zt.getInstance(),y=k=>e([...k]),x=()=>m(window.devicePixelRatio||1),w=window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);w.addEventListener("change",x);const E=k=>{k.key==="F3"&&(k.preventDefault(),r(R=>!R))};window.addEventListener("keydown",E);const T=p.subscribe(y);return v.current||(hA(),mA(),_s.getInstance().startCampaign("main_menu"),v.current=!0),()=>{window.removeEventListener("keydown",E),w.removeEventListener("change",x),T()}},[]),at.useEffect(()=>{let p=document.querySelector("link[rel~='icon']");p||(p=document.createElement("link"),p.rel="icon",document.head.appendChild(p)),p.href="res/sprite/icon/icon.png"},[]);const h=at.useMemo(()=>{switch(o){case"540p":return{w:960,h:540};case"720p":return{w:1280,h:720};case"1080p":return{w:1920,h:1080};case"1440p":return{w:2560,h:1440};case"4k":return{w:3840,h:2160};default:return null}},[o]);return ct.jsx("div",{className:"engine-wrapper",style:{width:"100vw",height:"100vh",backgroundColor:"#000",display:"flex",alignItems:"center",justifyContent:"center",overflow:"auto"},children:ct.jsxs("div",{className:"engine-root",style:{width:h?`${h.w/f}px`:"100%",height:h?`${h.h/f}px`:"auto",maxWidth:o==="fit"?"100vw":"none",maxHeight:o==="fit"?"100vh":"none",aspectRatio:"16 / 9",position:"relative",backgroundColor:"#111",imageRendering:"pixelated",containerType:"size",flexShrink:0,margin:"auto"},children:[i.map((p,y)=>ct.jsx("div",{style:{position:"absolute",inset:0,zIndex:y,pointerEvents:y===i.length-1?"auto":"none"},children:at.cloneElement(p,{width:h?.w||960,height:h?.h||540,res:o,setRes:a,uiScale:u,setUiScale:c})},y)),t&&ct.jsx(ZS,{})]})})},b_=document.getElementById("root");if(!b_)throw new Error("Failed to find the root element.");jn.getInstance().start();bx.createRoot(b_).render(ct.jsx(Yy.StrictMode,{children:ct.jsx(gA,{})}));export{zl as A,Mo as B,_s as C,qd as D,Cv as E,$e as F,Al as G,Be as H,Si as I,$E as J,it as K,Vr as L,yS as M,m_ as N,fn as O,He as P,_A as Q,Yy as R,Ii as S,xe as T,Pi as U,Ti as V,Rx as W,gx as X,Zt as a,Hl as b,Rs as c,bl as d,wA as e,Bt as f,xA as g,Mx as h,Px as i,ct as j,u_ as k,EA as l,cn as m,gs as n,TA as o,hn as p,Vl as q,at as r,ge as s,Dy as t,Oy as u,Kn as v,br as w,Me as x,Ze as y,Qt as z};
//# sourceMappingURL=index-_DKrE1GQ.js.map
